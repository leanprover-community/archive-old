---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html">#6591 non-unital algebras</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230306581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230306581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230306581">(Mar 15 2021 at 08:01)</a>:</h4>
<p>The code in this PR looks fine to me. But I'm a bit worried that this will create a bunch of duplication with the existing <code>algebra</code> cleass. What do others think?</p>



<a name="230314012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314012">(Mar 15 2021 at 09:14)</a>:</h4>
<p>I think as long as we fit it "underneath" the current <code>algebra</code> in the typeclass graph so that we don't end up with duplicate lemmas, it should be fine. Maybe it would be easier to review if we added the new non-unital semiring stuff in its own PR first though.</p>
<p>(<a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> for mobile)</p>



<a name="230314099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314099">(Mar 15 2021 at 09:15)</a>:</h4>
<p>There's also not _that_ much you can say about algebras that are not necessarily unital or associative so I don't feel like I'm planting too much of a weed here.</p>



<a name="230314584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314584">(Mar 15 2021 at 09:20)</a>:</h4>
<p>I contend that we definitely do need a class for algebras that are not necessarily unital or associative. If we grant that I think it's just a question of whether we first "fix" the existing <code>algebra</code> class so that it allows the underlying ring to be non-unital and/or non-associative (I claim it will then become my <code>non_unital_non_associative_algebra</code> class) or have the two classes coexist until this work is done.</p>



<a name="230314745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314745">(Mar 15 2021 at 09:21)</a>:</h4>
<p>I have proposed the "coexisting" path but I can see the other point of view.</p>



<a name="230314781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314781">(Mar 15 2021 at 09:21)</a>:</h4>
<p>I think removing unitarity from <code>algebra</code> will be a big headache for defeqness of <code>algebra_map</code>, and probably isn't worth it</p>



<a name="230314824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314824">(Mar 15 2021 at 09:21)</a>:</h4>
<p>As opposed to removing associativity which should be considerably easier</p>



<a name="230314879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314879">(Mar 15 2021 at 09:22)</a>:</h4>
<p>But the first point alone is enough to justify the new class</p>



<a name="230314908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230314908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230314908">(Mar 15 2021 at 09:22)</a>:</h4>
<p>I completely agree on the relative effort of unitarity vs associativity.</p>



<a name="230315000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315000">(Mar 15 2021 at 09:23)</a>:</h4>
<p>Hopefully most of the interesting things you can say about non-unital algebras are already stated about unital ones</p>



<a name="230315016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315016">(Mar 15 2021 at 09:23)</a>:</h4>
<p>But I'm not yet convinced we should be planning to build a world in which we have <code>non_unital_algebra</code> and <code>algebra</code> where the answer to the question "why does <code>algebra</code> also exist?" is "legacy reasons".</p>



<a name="230315024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315024">(Mar 15 2021 at 09:23)</a>:</h4>
<p>So it really just becomes a game of weakening typeclasses</p>



<a name="230315077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315077">(Mar 15 2021 at 09:24)</a>:</h4>
<p>I feel like the argument is more "convenient definitional reduction"</p>



<a name="230315157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315157">(Mar 15 2021 at 09:24)</a>:</h4>
<p>Let's face it, we have a semigroup class and it doesn't cause problems, it's just that nobody uses it.</p>



<a name="230315171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315171">(Mar 15 2021 at 09:24)</a>:</h4>
<p>Like the answer to "why does add_group let you define both sub and neg"</p>



<a name="230315259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315259">(Mar 15 2021 at 09:25)</a>:</h4>
<p>and note also that after some head-scratching and debate about the definition of <code>-&gt;*</code>, the "map which preserves multiplication" which we needed for group theory, it was decided that it should also preserve 1.</p>



<a name="230315426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315426">(Mar 15 2021 at 09:26)</a>:</h4>
<p>We have both notions but IMHO the decision to give the notation to the one preserving 1 was the right call.</p>



<a name="230315462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315462">(Mar 15 2021 at 09:27)</a>:</h4>
<p>It will be similar for algebras: I argue we need both unital and non-unital maps.</p>



<a name="230315738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230315738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230315738">(Mar 15 2021 at 09:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/230315077">said</a>:</p>
<blockquote>
<p>I feel like the argument is more "convenient definitional reduction"</p>
</blockquote>
<p>Are you saying that forgetting legacy issues, the current <code>algebra</code> definition is worth having? Couldn't we just have a <code>of_unital_algebra_map</code> constructor?</p>



<a name="230316057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316057">(Mar 15 2021 at 09:32)</a>:</h4>
<p>A constructor wouldn't help; because the constructed object couldn't have an <code>algebra_map</code> defeq to it's constructor argument as it does today</p>



<a name="230316093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316093">(Mar 15 2021 at 09:32)</a>:</h4>
<p>Sorry, I understand that point. I just mean why is that so valuable?</p>



<a name="230316172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316172">(Mar 15 2021 at 09:33)</a>:</h4>
<p>I don't know for sure, but I suspect it is</p>



<a name="230316173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316173">(Mar 15 2021 at 09:33)</a>:</h4>
<p>(other than the fact that we'd have a bunch of refactoring to do)</p>



<a name="230316267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316267">(Mar 15 2021 at 09:34)</a>:</h4>
<p>Fair enough. I don't have a good reason to doubt you, I just want to check I'm not missing something.</p>



<a name="230316342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316342">(Mar 15 2021 at 09:34)</a>:</h4>
<p>Attempting to refactor would certainly help answer the question of where it's valuable, even if the refactor turns out not be be a good idea</p>



<a name="230316384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230316384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230316384">(Mar 15 2021 at 09:35)</a>:</h4>
<p>Agreed. It's really the only way to find out. Hands up who wants to do that?</p>



<a name="230638670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230638670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230638670">(Mar 17 2021 at 04:59)</a>:</h4>
<p>Could we add an account in the module-doc string explaining the relationship (and desired future relationship) with <code>algebra</code>?</p>



<a name="230638680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230638680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230638680">(Mar 17 2021 at 04:59)</a>:</h4>
<p>I think it's fine to do "big refactors" in chunks, but we should record in the source what the remaining plans are.</p>



<a name="230639867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230639867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230639867">(Mar 17 2021 at 05:15)</a>:</h4>
<p>Shouldn't there be instances from <code>[semiring R]</code> to <code>[non_unital_semiring]</code> and to <code>[non_assoc_semiring]</code>?</p>



<a name="230639878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230639878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230639878">(Mar 17 2021 at 05:15)</a>:</h4>
<p>In fact, why can't you just make <code>semiring</code> extend those?</p>



<a name="230640819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230640819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230640819">(Mar 17 2021 at 05:30)</a>:</h4>
<p>Okay, I see why you can't extend both simultaneously. But</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">semiring.non_unital_semiring</span> <span class="o">:</span> <span class="n">non_unital_semiring</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span><span class="o">‹</span><span class="n">semiring</span> <span class="n">α</span><span class="o">›</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="n">semiring.non_assoc_semiring</span> <span class="o">:</span> <span class="n">non_assoc_semiring</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span><span class="o">‹</span><span class="n">semiring</span> <span class="n">α</span><span class="o">›</span> <span class="o">}</span>
</code></pre></div>
<p>seem worthwhile.</p>



<a name="230641984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230641984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230641984">(Mar 17 2021 at 05:51)</a>:</h4>
<p>I've run out of time, but I started just trying to replace the definition in <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a>.</p>



<a name="230642001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230642001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230642001">(Mar 17 2021 at 05:51)</a>:</h4>
<p>I barely started, but so far it looks fine.</p>



<a name="230659158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230659158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230659158">(Mar 17 2021 at 09:13)</a>:</h4>
<p>I did a bit more. Still seems plausible, although I'm getting a lot of goals with opaque <code>•</code>s that I can't decipher the definitions of...</p>



<a name="230659514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230659514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230659514">(Mar 17 2021 at 09:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/230640819">said</a>:</p>
<blockquote>
<p>Okay, I see why you can't extend both simultaneously. But</p>
</blockquote>
<p>I don't, would you mind elaborating?</p>



<a name="230690695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230690695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230690695">(Mar 17 2021 at 13:36)</a>:</h4>
<p>Thank you so much for starting this. I just finished with some other work so I will join in later today when I have some time again.</p>



<a name="230780586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/230780586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#230780586">(Mar 17 2021 at 22:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/230690695">said</a>:</p>
<blockquote>
<p>Thank you so much for starting this. I just finished with some other work so I will join in later today when I have some time again.</p>
</blockquote>
<p>Urgh, I had a bunch of unexpected non-Mathlib stuff come up this evening so I didn't get to this after all. I definitely will be eager and able to work on this tomorrow though so I'll pick things up wherever you leave things!</p>



<a name="231052068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231052068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231052068">(Mar 19 2021 at 16:37)</a>:</h4>
<p>I pushed up a few commits to the <code>replace_algebra_def</code> branch. I'd love if this contributed to a decision on <a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> :-)</p>



<a name="231127320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231127320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231127320">(Mar 20 2021 at 06:44)</a>:</h4>
<p>Ah, sorry, I haven't been looking at this. I'm optimistic. :-)</p>



<a name="231157506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157506">(Mar 20 2021 at 16:57)</a>:</h4>
<p>I did a bit more on the <a href="https://github.com/leanprover-community/mathlib/commits/replace_algebra_def">https://github.com/leanprover-community/mathlib/commits/replace_algebra_def</a></p>
<p>It's hard to know how much there is to do but I can say that:</p>
<ol>
<li>The fundamental changes to <code>algebra/algebra/basic.lean</code> are essentially done.</li>
<li>So far all fixes for dependent files have been easy.</li>
<li>A cheap way to lower bound the amount of remaining work is to do a free text search for <code>smul_def' :=</code>. Currently this stands at just 16 results. This is just a lower bound and perhaps once these are done there will be a zillion other things to fix but at the moment, I share <span class="user-mention" data-user-id="110087">@Scott Morrison</span> 's optimism.</li>
</ol>



<a name="231157583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157583">(Mar 20 2021 at 16:58)</a>:</h4>
<p>Having said all that, I'm currently blocked on doing what I'd really like by the limbo in which <a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> stands. I appreciate everyone's busy but I'd be grateful for anything that could be done to help here.</p>



<a name="231157711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157711">(Mar 20 2021 at 17:00)</a>:</h4>
<p>I think an easy way to get some parts of <a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> out of limbo would be to do a short PR that just adds the new <code>semiring</code>-like typeclasses</p>



<a name="231157756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157756">(Mar 20 2021 at 17:01)</a>:</h4>
<p>As in everything except for the proposed new file <code>non_unital.lean</code>?</p>



<a name="231157759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157759">(Mar 20 2021 at 17:01)</a>:</h4>
<p>I'd be happy to do that for sure.</p>



<a name="231157772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157772">(Mar 20 2021 at 17:01)</a>:</h4>
<p>(I'd still be blocked but this would be progress)</p>



<a name="231157815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157815">(Mar 20 2021 at 17:02)</a>:</h4>
<p>Yeah, I think that would make for an easier review</p>



<a name="231157837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231157837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231157837">(Mar 20 2021 at 17:02)</a>:</h4>
<p>Thanks, I'll do that now.</p>



<a name="231158267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158267">(Mar 20 2021 at 17:09)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> Sorry that I haven't been more responsive... I think there has been too much going on in your PR/proposal for me to easily wrap my head around. I would really have to sit down and think it through. And I haven had/taken the time to do that yet.</p>



<a name="231158338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158338">(Mar 20 2021 at 17:10)</a>:</h4>
<p>So if you can split of "easy" bits, and in that way remove some clutter, that would be great.</p>



<a name="231158349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158349">(Mar 20 2021 at 17:10)</a>:</h4>
<p>Then it will be easier to have a focused discussion.</p>



<a name="231158375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158375">(Mar 20 2021 at 17:11)</a>:</h4>
<p>In principal, I agree that we'll need something like this. So I want to put in some time and energy to move this forward in the coming week.</p>



<a name="231158431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158431">(Mar 20 2021 at 17:12)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112680">@Johan Commelin</span> No need to apologise, it has been a complicated story and I appreciate you have a lot going on. I'm happy to wait etc. if necessary.</p>



<a name="231158449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231158449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231158449">(Mar 20 2021 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> This aims to do what you have suggested: <a href="https://github.com/leanprover-community/mathlib/pull/6786">https://github.com/leanprover-community/mathlib/pull/6786</a></p>



<a name="231264772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231264772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231264772">(Mar 22 2021 at 05:12)</a>:</h4>
<p>I did a few more sorries in <code>replace_algebra_def</code>, although my optimism is decreasing a bit. There are a lot of errors remaining, and often they involving replacing a <code>rfl</code> with a hard-to-guess term mode proof.</p>



<a name="231297692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231297692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231297692">(Mar 22 2021 at 11:57)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="110087">@Scott Morrison</span> It's great to wake up to progress on that branch. I think it will take a while but it will get done. I hope to have some time this afternoon and will do some more if I do.</p>



<a name="231297945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231297945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231297945">(Mar 22 2021 at 12:00)</a>:</h4>
<p>Also, I hate to pester people who I know are busy but I'd be very grateful for closure on <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> and <a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> (which I will merge / rebase if <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> goes through) in the near future.</p>



<a name="231394664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231394664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231394664">(Mar 22 2021 at 22:31)</a>:</h4>
<p>Okay, I pushed a few more changes on <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a>, removing the need for the <code>rw</code>s that used to be <code>simp</code>. I've hit merge.</p>



<a name="231440161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231440161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231440161">(Mar 23 2021 at 09:10)</a>:</h4>
<p>Wow, a lot happened on that branch while I was away. Thanks again <span class="user-mention" data-user-id="110087">@Scott Morrison</span></p>



<a name="231440477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231440477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231440477">(Mar 23 2021 at 09:13)</a>:</h4>
<p>So <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> adds three new types of semiring. Do we need to follow it up with the nine new types of <code>comm_</code> and <code>ring</code> variants?</p>



<a name="231440692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231440692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231440692">(Mar 23 2021 at 09:15)</a>:</h4>
<p>I don't know but I'm beginning to feel a bit paralysed here. Can't we just merge this?</p>



<a name="231440866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231440866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231440866">(Mar 23 2021 at 09:17)</a>:</h4>
<p>Let's decide that further variants of <code>ring</code> are out of scope for this PR. But I think we do need to decide, prior to merging, what the plan is here.</p>



<a name="231441026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441026">(Mar 23 2021 at 09:18)</a>:</h4>
<p>I forget, actually, what the situation is with <code>comm_</code>. Is it possible that we could have made it a mixin, rather than a structure extension? I wouldn't know immediately what the tradeoff is here.</p>



<a name="231441044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441044">(Mar 23 2021 at 09:19)</a>:</h4>
<p>Aside for legacy, is there a reason why we have things like <code>comm_ring</code> and can't just have <code>[comm_mul] [ring]</code> etc.?</p>



<a name="231441063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441063">(Mar 23 2021 at 09:19)</a>:</h4>
<p>Oh maybe that's what you're saying.</p>



<a name="231441221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441221">(Mar 23 2021 at 09:20)</a>:</h4>
<p>Hmm, maybe we've designed ourselves into an exponential amount of work and should plan to unwind?</p>



<a name="231441233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441233">(Mar 23 2021 at 09:20)</a>:</h4>
<p>As in, mixin as opposed to extend</p>



<a name="231441399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441399">(Mar 23 2021 at 09:22)</a>:</h4>
<p>To be clear <span class="user-mention" data-user-id="240862">@Oliver Nash</span>, my comments are not "we should not merge this PR" but "this PR highlights a corner we seem to have painted ourselves into"</p>



<a name="231441434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441434">(Mar 23 2021 at 09:22)</a>:</h4>
<p>Absolutely, I appreciate that!</p>



<a name="231441500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441500">(Mar 23 2021 at 09:23)</a>:</h4>
<p>I'm just selfishly eyeing my distant goal but I think this is a great opportunity to think about these things and I'm glad we're doing it.</p>



<a name="231441642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441642">(Mar 23 2021 at 09:24)</a>:</h4>
<p>I guess we might want some meta programming that can turn something like <code>[[comm_ring]]</code> into <code>[comm_mul] [has_neg] ... [semi_ring]</code> so that we have the linear amount of typeclasses without a huge mouthful all the time?</p>



<a name="231441859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231441859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231441859">(Mar 23 2021 at 09:26)</a>:</h4>
<p>I need to think a little since I seem to just be proposing unbundling everything.</p>



<a name="231442025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231442025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231442025">(Mar 23 2021 at 09:28)</a>:</h4>
<p>Yes, the extra syntax would be really nice. (On the other hand, Lean already receives some deserved flak from other theorem proving communities about our profusion of kinds of brackets...)</p>



<a name="231442076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231442076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231442076">(Mar 23 2021 at 09:29)</a>:</h4>
<p>btw -- I just started a new thread in general on this topic. Perhaps we can move the general discussion there for greater visibility.</p>



<a name="231442111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231442111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231442111">(Mar 23 2021 at 09:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/231442025">said</a>:</p>
<blockquote>
<p>Yes, the extra syntax would be really nice. (On the other hand, Lean already receives some deserved flak from other theorem proving communities about our profusion of kinds of brackets...)</p>
</blockquote>
<p>This feels a bit like when non-mathematicians complain about mathematical notation.</p>



<a name="231729433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231729433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231729433">(Mar 25 2021 at 00:10)</a>:</h4>
<p>Have we made any progress on <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a>? I would feel much happier about making this change if I was sure that was going to work.</p>



<a name="231758796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231758796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231758796">(Mar 25 2021 at 07:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/231729433">said</a>:</p>
<blockquote>
<p>Have we made any progress on <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a>? I would feel much happier about making this change if I was sure that was going to work.</p>
</blockquote>
<p>Technically yes, I even pushed up <a href="https://github.com/leanprover-community/mathlib/commit/dbc5baebaf4998aa5b1e5f222358a9a86ac9d734">a commit</a> yesterday.</p>



<a name="231758876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231758876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231758876">(Mar 25 2021 at 07:47)</a>:</h4>
<p>Assuming it's something we want, I'm very happy to continue to push on that. It's hard to know how much work it will be but my experience so far leaves me quite optimistic.</p>



<a name="231759005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231759005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231759005">(Mar 25 2021 at 07:49)</a>:</h4>
<p>On the other hand I kind of gave up on <a href="https://github.com/leanprover-community/mathlib/pull/6786">https://github.com/leanprover-community/mathlib/pull/6786</a> after the goalposts seemed to move at exactly the same speed as whatever effort was put in so I was actually beginning to think of diverting time to a different corner of Mathlib.</p>



<a name="231759684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231759684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231759684">(Mar 25 2021 at 07:58)</a>:</h4>
<p>I'm of the opinion that the refactor is worth having even if we never manage to replace the existing <code>algebra</code></p>



<a name="231774057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231774057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231774057">(Mar 25 2021 at 10:07)</a>:</h4>
<p>Yes: <code>replace_algebra_def</code> at the end of the day can not actually replace the def, and still it will have made lots of constructions more robust for future changes.</p>



<a name="231774219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231774219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231774219">(Mar 25 2021 at 10:08)</a>:</h4>
<p>I completely understand that you're frustrated by the slow progress on getting <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> merged. :-( Sorry. It's a pretty significant change to the algebraic hierarchy, and with people still thinking about the potential consequences we just can't rush it.</p>



<a name="231774240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231774240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231774240">(Mar 25 2021 at 10:08)</a>:</h4>
<p>I definitely want it all to happen, I like Lie algebras too. :-)</p>



<a name="231776205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231776205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231776205">(Mar 25 2021 at 10:25)</a>:</h4>
<p>I think part of what has happened is that we've started to realise that the various APIs for morphisms, equivalences, subobjects etc. tend to gradually drift out of sync over time, as people tweak the ones they are interested in.</p>
<p>Eventually this does become a problem, particularly if there ends up being no canonical model for new instances to copy.</p>
<p>You've come along with this PR at a moment when we're worried about this, and so we're using your PR as a "volunteer" guinea pig to work out what needs to be done. We'll get there. :-)</p>



<a name="231776831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231776831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231776831">(Mar 25 2021 at 10:31)</a>:</h4>
<p>Thanks for these words, we will of course get there, and I still feel I get easily 1000x more back from Mathlib, and its careful design decisions, than I put in. I'll put in some more time on the <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> this afternoon and get it a bit closer.</p>



<a name="231776888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231776888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231776888">(Mar 25 2021 at 10:31)</a>:</h4>
<p>Should <code>mul_one_class</code> be called <code>unital_magma</code>?</p>



<a name="231777137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231777137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231777137">(Mar 25 2021 at 10:33)</a>:</h4>
<p>Maybe, and at the very least that should probably go in its doc string. On the other hand, <code>to_additive</code> might not like this.</p>



<a name="231777532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231777532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231777532">(Mar 25 2021 at 10:36)</a>:</h4>
<p><code>unital_add_magma</code> ought to be easy for <code>to_additive</code>to understand</p>



<a name="231784281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231784281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231784281">(Mar 25 2021 at 11:31)</a>:</h4>
<p>I'm just asking if the name would be better for mathematicians, since I'm not one!</p>



<a name="231785840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231785840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231785840">(Mar 25 2021 at 11:45)</a>:</h4>
<p>These are called loops I think</p>



<a name="231785853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231785853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231785853">(Mar 25 2021 at 11:45)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Quasigroup#Loops">https://en.wikipedia.org/wiki/Quasigroup#Loops</a></p>



<a name="231785893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231785893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231785893">(Mar 25 2021 at 11:45)</a>:</h4>
<p>I claim that most mathematicians couldn't tell you what a magma is so I think either name is fine. On the one hand, even if I'm right that it's not a familiar term to most mathematicians, "unital magma" is at least _somewhat_ known. On the other hand, <code>mul_one_class</code> is pretty easy to guess.</p>



<a name="231785991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231785991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231785991">(Mar 25 2021 at 11:46)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span>, doesn't a loop have a inverse?</p>



<a name="231786064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786064">(Mar 25 2021 at 11:46)</a>:</h4>
<p>Ah yes, more or less an inverse</p>



<a name="231786089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786089">(Mar 25 2021 at 11:46)</a>:</h4>
<p>I had to stare at this picture before I answered: <a href="https://en.wikipedia.org/wiki/Magma_%28algebra%29#/media/File:Magma_to_group4.svg">https://en.wikipedia.org/wiki/Magma_%28algebra%29#/media/File:Magma_to_group4.svg</a></p>



<a name="231786097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786097">(Mar 25 2021 at 11:46)</a>:</h4>
<p><a href="/user_uploads/3121/17Vz79Js7ZQeF1e9AMSKxgGV/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/17Vz79Js7ZQeF1e9AMSKxgGV/image.png" title="image.png"><img src="/user_uploads/3121/17Vz79Js7ZQeF1e9AMSKxgGV/image.png"></a></div>



<a name="231786137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786137">(Mar 25 2021 at 11:47)</a>:</h4>
<p>That's also what I was going from</p>



<a name="231786140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786140">(Mar 25 2021 at 11:47)</a>:</h4>
<p>I claim <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> 's answer as evidence that these terms are no familiar to mathematicians</p>



<a name="231786144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786144">(Mar 25 2021 at 11:47)</a>:</h4>
<p>Ahahah, we had the same idea</p>



<a name="231786212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786212">(Mar 25 2021 at 11:47)</a>:</h4>
<p>(I just hope whoever made that picture got it right <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> )</p>



<a name="231786343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786343">(Mar 25 2021 at 11:48)</a>:</h4>
<p>I've heard of groups -- does this help?</p>



<a name="231786390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231786390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231786390">(Mar 25 2021 at 11:49)</a>:</h4>
<p>I am almost sure that all these terms more general than semigroup are very rarely used by "standard" mathematicians. Magma is probably quite well known, but for the others "wikipedia here we come"</p>



<a name="231787504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231787504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231787504">(Mar 25 2021 at 11:58)</a>:</h4>
<p>.. and after reading Wikipedia, I would still check that all the assumptions are there with Lean...</p>



<a name="231787657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231787657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231787657">(Mar 25 2021 at 11:59)</a>:</h4>
<p>I guess I've heard "loop" in the context of the 7-sphere but I only just realised it's the same term.</p>



<a name="231787897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231787897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231787897">(Mar 25 2021 at 12:01)</a>:</h4>
<p>Loop is still reasonable because of... well, loops, that form a... loop (before taking homotopy classes, these are needed only for associativity)</p>



<a name="231788355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231788355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231788355">(Mar 25 2021 at 12:04)</a>:</h4>
<p>Moufang loops show up also every once in a while.</p>



<a name="231825538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231825538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231825538">(Mar 25 2021 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I've added a couple of tiny commits to <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> to see if I can get the build passing.</p>



<a name="231825715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231825715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231825715">(Mar 25 2021 at 15:46)</a>:</h4>
<p>I'm not sure if they'll suffice or even if we'll keep them (though I suspect we will).</p>



<a name="231826009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231826009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231826009">(Mar 25 2021 at 15:48)</a>:</h4>
<p>Argh, a new failure. OK I'm looking at the next one 🤨</p>



<a name="231826462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231826462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231826462">(Mar 25 2021 at 15:50)</a>:</h4>
<p>I think my new plan is perhaps to split this in two again, and create a new PR containing just <code>mul_one_class</code> and <code>add_zero_class</code>.</p>



<a name="231826534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231826534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231826534">(Mar 25 2021 at 15:51)</a>:</h4>
<p>right now we're getting into pain where the generalizations for <code>monoid</code> are breaking the elaborator that aren't generalized yet for <code>semiring</code></p>



<a name="231827623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231827623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231827623">(Mar 25 2021 at 15:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/231826462">said</a>:</p>
<blockquote>
<p>I think my new plan is perhaps to split this in two again, and create a new PR containing just <code>mul_one_class</code> and <code>add_zero_class</code>.</p>
</blockquote>
<p>Yeah I think you're probably right.</p>



<a name="231827646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231827646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231827646">(Mar 25 2021 at 15:57)</a>:</h4>
<p>Zeno says we can keep doing this and still get there eventually!</p>



<a name="231828633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231828633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231828633">(Mar 25 2021 at 16:03)</a>:</h4>
<p>The <a href="https://github.com/leanprover-community/mathlib/pull/6786/commits/274ceb4987e8b19f0b0cc8fd66248bed9db8a427">latest fix</a> was a fun example of computer-assisted proof. I didn't bother trying to understand the details of the middle of the lemma. I got Lean to do the work for me by asking it the type of the relevant subterm. It said <code>submonoid P.quotient</code>. I blindly inserted that and it worked.</p>



<a name="231828875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231828875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231828875">(Mar 25 2021 at 16:04)</a>:</h4>
<p>Can you make a quick pr for the <code>mul_hom.inverse</code>?</p>



<a name="231828929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231828929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231828929">(Mar 25 2021 at 16:04)</a>:</h4>
<p>Yeah sure. Just pull that out totally on its own?</p>



<a name="231828948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231828948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231828948">(Mar 25 2021 at 16:04)</a>:</h4>
<p>I had thought that might be worth doing.</p>



<a name="231828975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231828975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231828975">(Mar 25 2021 at 16:04)</a>:</h4>
<p>Yeah, why not - was there anything else like that in the original PR?</p>



<a name="231829013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231829013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231829013">(Mar 25 2021 at 16:05)</a>:</h4>
<p>I feel like you might have added another <code>inverse</code> elsewhere, but I can't see it now</p>



<a name="231829063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231829063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231829063">(Mar 25 2021 at 16:05)</a>:</h4>
<p>No I don't think I did. I'll double check now but I'm pretty sure that was it.</p>



<a name="231829148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231829148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231829148">(Mar 25 2021 at 16:05)</a>:</h4>
<p>(I mean I used <code>mul_hom.inverse</code> to define an inverse for the non-unital algebra homs that I was defining but these don't exist yet.)</p>



<a name="231829446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231829446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231829446">(Mar 25 2021 at 16:07)</a>:</h4>
<p>Since you started this rolling, do you want to create the "non-assoc monoid" PR under your account? <a href="https://github.com/leanprover-community/mathlib/compare/non_assoc_monoids?expand=1">https://github.com/leanprover-community/mathlib/compare/non_assoc_monoids?expand=1</a></p>



<a name="231829811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/231829811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#231829811">(Mar 25 2021 at 16:09)</a>:</h4>
<p>Or shall I just go ahead and do it?</p>



<a name="232163441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232163441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232163441">(Mar 28 2021 at 12:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  I think I might use the coming week to see if I can carry out the refactor you started in <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> At the moment the branch is a bit of a mess and fairly stale (231 commits behind master, 56 ahead) so to make a serious effort I'd like to rebase, totally rewrite its history. The easiest way to do this might mean destroying some of your commits on that branch. Would that be OK?</p>



<a name="232163568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232163568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232163568">(Mar 28 2021 at 12:23)</a>:</h4>
<p>Also I think I will divide the work in two. First I'll just change the definition of <code>algebra</code> to:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">algebra</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">semimodule</span> <span class="n">R</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_mul_assoc'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="o">(</span><span class="n">t</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">•</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">mul_smul_comm'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">t</span> <span class="bp">•</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">•</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span>
</code></pre></div>
<p>Assuming I get this working, and once we have the not-necessarily-unital, not-necessarily-associative ring classes ready, I can then undertake weakening <code>semiring A</code> as a separate piece of work.</p>



<a name="232163621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232163621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232163621">(Mar 28 2021 at 12:24)</a>:</h4>
<p>This should also allow a lot of the refactor not to be blocked by the rather delicate work that <span class="user-mention" data-user-id="310045">@Eric Wieser</span> is currently doing to introduce the non-unital, non-assoc stuff.</p>



<a name="232164497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232164497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232164497">(Mar 28 2021 at 12:40)</a>:</h4>
<p>Of course!</p>



<a name="232164529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232164529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232164529">(Mar 28 2021 at 12:41)</a>:</h4>
<p>(I used to use rebase, and at some point decided it served no purpose of simply merging master. The git commit history looks messy, but it all gets squashed when it is added by bors, anyway.)</p>



<a name="232164598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232164598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232164598">(Mar 28 2021 at 12:42)</a>:</h4>
<p>Yes, as you say, changing the definition of <code>algebra</code> is pretty much orthogonal to other work introducing non_unital and non_assoc.</p>



<a name="232279611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232279611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232279611">(Mar 29 2021 at 14:44)</a>:</h4>
<p>I've made a bit more progress with <a href="https://github.com/leanprover-community/mathlib/issues/6865">#6865</a> now; it refactors <code>monoid_hom</code> and <code>submonoid</code> to use the new relaxed typeclasses, and supplies instances for <code>pi</code>, <code>prod</code>, <code>opposite</code>, and <code>set</code>. Still to go is <code>finsupp</code>.</p>



<a name="232283581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232283581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232283581">(Mar 29 2021 at 15:08)</a>:</h4>
<p>That's great. I've made some more progress on <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> today too after a giant rebase. Slow but steady progress.</p>



<a name="232283762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232283762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232283762">(Mar 29 2021 at 15:09)</a>:</h4>
<p>(I think there are only 6 remaining references to the old <code>algebra.mk</code> left, though there is plenty to do beyond refactoring these.)</p>



<a name="232490356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232490356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232490356">(Mar 30 2021 at 20:15)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6865">#6865</a> now has dfinsupp and monoid_algebra too, so I'm happy to call it done</p>



<a name="232541313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232541313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232541313">(Mar 31 2021 at 06:08)</a>:</h4>
<p>I'll hopefully have a look tonight or tomorrow.</p>



<a name="232553194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232553194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232553194">(Mar 31 2021 at 08:24)</a>:</h4>
<p>Great news, thanks <span class="user-mention" data-user-id="310045">@Eric Wieser</span> I'll look too and share any remarks if I have them. This is really great!</p>



<a name="232553304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232553304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232553304">(Mar 31 2021 at 08:25)</a>:</h4>
<p>I've pushed a bit harder on <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> over the last couple of days too. I'm getting a little worried by the fact that it's a lot of work and more importantly, it's very hard to tell how much work remains. With the latter concern in mind I've pivoted to mostly fixing errors with <code>sorry</code> in the hope that I can get some sort of bound on how much work there is by having a sorry-ridden, but working, build hopefully today.</p>



<a name="232569557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232569557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232569557">(Mar 31 2021 at 10:47)</a>:</h4>
<p>I've hit merge on <a href="https://github.com/leanprover-community/mathlib/issues/6865">#6865</a>. Let's get back to <a href="https://github.com/leanprover-community/mathlib/issues/6591">#6591</a> soon! :-)</p>



<a name="232573035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232573035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232573035">(Mar 31 2021 at 11:20)</a>:</h4>
<p>And I've cancelled it, because my other big refactor has broken it (in a trivial way)</p>



<a name="232573416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232573416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232573416">(Mar 31 2021 at 11:23)</a>:</h4>
<p>Once it's merged, I'll try to solve the merge conflicts it will create in <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a></p>



<a name="232579076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232579076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232579076">(Mar 31 2021 at 12:12)</a>:</h4>
<p>Feel free to close <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> and cherry pick (or whatever) to a new PR + branch if that is an easier route to resolving conflicts.</p>



<a name="232718114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232718114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232718114">(Apr 01 2021 at 07:59)</a>:</h4>
<p>The conflicts all look trivial to merge in the web UI, which I'd do myself if it weren't so utterly painful to select lines on mobile. Mind taking the reins again <span class="user-mention" data-user-id="240862">@Oliver Nash</span>?</p>



<a name="232719153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232719153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232719153">(Apr 01 2021 at 08:07)</a>:</h4>
<p>Of course happy to.</p>



<a name="232719235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232719235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232719235">(Apr 01 2021 at 08:08)</a>:</h4>
<p>I'll have a go now. Nice to have a distraction from the <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> job which I'm now a bit worried about.</p>



<a name="232721304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232721304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232721304">(Apr 01 2021 at 08:29)</a>:</h4>
<p>Resolved and pushed. <del>Just checking I didn't mess anything up.</del> Still some tidy up to do.</p>



<a name="232722332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232722332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232722332">(Apr 01 2021 at 08:39)</a>:</h4>
<p>Once you have the merge sorted out and a cache to work from, can you try removing some of the <code>(_ : _ -&gt;* _)</code> annotations you added to get the build passing? I'm thinking my generalization of <code>monoid_hom</code> may have solved the problem those were working around</p>



<a name="232722815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232722815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232722815">(Apr 01 2021 at 08:43)</a>:</h4>
<p>Sure, I'm keen to roll any of those back that are no longer needed.</p>



<a name="232753735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232753735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232753735">(Apr 01 2021 at 13:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/232722332">said</a>:</p>
<blockquote>
<p>Once you have the merge sorted out and a cache to work from, can you try removing some of the <code>(_ : _ -&gt;* _)</code> annotations you added to get the build passing? I'm thinking my generalization of <code>monoid_hom</code> may have solved the problem those were working around</p>
</blockquote>
<p>I just did this exercise and was able to push up <a href="https://github.com/leanprover-community/mathlib/pull/6786/commits/f3ab4402734ff43ab336c97484039aefd0dca832">this commit</a> which removed the changes to <code>ring_theory/jacobson.lean</code>. However I found that the remaining breadcrumbs we added for the elaborator cannot be removed. Specifically we still need:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">trigonometric.lean</span>
<span class="bp">-</span> <span class="o">{</span> <span class="n">rcases</span> <span class="n">exists_quadratic_eq_zero</span> <span class="n">one_ne_zero</span> <span class="o">(</span><span class="n">exists_eq_mul_self</span> <span class="n">_</span><span class="o">)</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">w</span><span class="o">,</span> <span class="n">hw</span><span class="o">⟩,</span>
<span class="bp">+</span> <span class="o">{</span> <span class="n">rcases</span> <span class="n">exists_quadratic_eq_zero</span> <span class="o">(</span><span class="bp">@</span><span class="n">one_ne_zero</span> <span class="n">ℂ</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">exists_eq_mul_self</span> <span class="n">_</span><span class="o">)</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">w</span><span class="o">,</span> <span class="n">hw</span><span class="o">⟩,</span>


<span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">mv_polynomial</span><span class="bp">/</span><span class="n">invertible.lean</span>
<span class="bp">-</span> <span class="n">invertible.map</span> <span class="n">C.to_monoid_hom</span> <span class="n">_</span>
<span class="bp">+</span> <span class="n">invertible.map</span> <span class="o">(</span><span class="n">C.to_monoid_hom</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→*</span> <span class="n">mv_polynomial</span> <span class="n">σ</span> <span class="n">R</span><span class="o">)</span> <span class="n">_</span>


 <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">mv_polynomial</span><span class="bp">/</span><span class="kd">variables</span><span class="bp">.</span><span class="n">lean</span>
<span class="bp">-</span> <span class="o">(</span><span class="n">degrees_monomial_eq</span> <span class="n">_</span> <span class="n">_</span> <span class="n">one_ne_zero</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">to_multiset_single</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span>
<span class="bp">+</span> <span class="o">(</span><span class="n">degrees_monomial_eq</span> <span class="n">_</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="n">one_ne_zero</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">to_multiset_single</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span>


<span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">degree</span><span class="bp">/</span><span class="n">definitions.lean</span>
<span class="bp">-</span> <span class="n">leading_coeff_hom.map_pow</span> <span class="n">p</span> <span class="n">n</span>
<span class="bp">+</span> <span class="o">(</span><span class="n">leading_coeff_hom</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="bp">→*</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">map_pow</span> <span class="n">p</span> <span class="n">n</span>
</code></pre></div>



<a name="232754270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/232754270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#232754270">(Apr 01 2021 at 13:17)</a>:</h4>
<p>Interesting that the <code>submonoid</code> annotations could go away, but not the <code>monoid_hom</code> ones</p>



<a name="233116239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233116239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233116239">(Apr 04 2021 at 22:08)</a>:</h4>
<p>I just addressed some of the pending review requests on <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a>. The following list still remains:</p>
<ul>
<li>[ ] <code>ring_hom</code> should be relaxed to require <code>non_assoc_semiring</code> instead of the current <code>semiring</code></li>
<li>[ ] <code>subsemiring</code> should be relaxed to require <code>non_assoc_semiring</code> instead of the current <code>semiring</code> (and provided with a <code>non_assoc_semiring</code> instance)</li>
<li>[ ] instances of the new classes for <code>opposite</code></li>
<li>[ ] instances of the new classes for <code>with_zero</code> - <code>with_zero (some_semigroup)</code> is obviously a <code>semigroup_with_zero</code></li>
<li>[ ] instances of the new classes for <code>monoid_algebra</code></li>
<li>[ ] instances of the new classes for <code>direct_sum</code> (in <code>direct_sum_graded.lean</code>)</li>
</ul>



<a name="233116259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233116259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233116259">(Apr 04 2021 at 22:09)</a>:</h4>
<p>I don't plan to take these up myself in the near future but I will eventually return to this work if it is still pending. For now I would like to resume formalising some mathematics, rather than getting mired in this very valuable, but not so exciting refactoring work.</p>



<a name="233116280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233116280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233116280">(Apr 04 2021 at 22:09)</a>:</h4>
<p>In addition, after pushing on the <a href="https://github.com/leanprover-community/mathlib/tree/replace_algebra_def">branch#replace_algebra_def</a> last week I succeeded only in convincing myself that this is a very significant refactor. I'm willing to do it but it could take me weeks I'd need encouragement that this is something we really, definitely want enough.</p>



<a name="233116368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233116368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233116368">(Apr 04 2021 at 22:11)</a>:</h4>
<p>So I guess I'm just saying: I'm absolutely not abandoning this effort but I am taking a break from it for at least a week!</p>



<a name="233168471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233168471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233168471">(Apr 05 2021 at 12:59)</a>:</h4>
<p>Generalizing <code>ring_hom</code> is not really viable yet, because it extends <code>monoid_with_zero_hom</code>. My suggestion would be simply removing that suggestion from the list.</p>



<a name="233171221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233171221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233171221">(Apr 05 2021 at 13:25)</a>:</h4>
<p>I'd forgotten that pain point</p>



<a name="233171267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233171267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233171267">(Apr 05 2021 at 13:25)</a>:</h4>
<p>Although generalizing subsemiring is hard without ring_homs</p>



<a name="233171303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233171303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233171303">(Apr 05 2021 at 13:25)</a>:</h4>
<p>So I think we really do need that new typeclass, <code>mul_zero_one_class</code></p>



<a name="233171554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233171554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233171554">(Apr 05 2021 at 13:28)</a>:</h4>
<p>Which would be a common ancestor of <code>monoid_with_zero</code> and <code>non_assoc_semiring</code></p>



<a name="233240794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233240794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233240794">(Apr 05 2021 at 22:36)</a>:</h4>
<p>Can we kick that one down the road, and leave both <code>ring_hom</code> and <code>subsemiring</code> for later, then?</p>



<a name="233241851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233241851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233241851">(Apr 05 2021 at 22:49)</a>:</h4>
<p>I'm a little suspicious that<code>non_assoc_semiring</code> isn't useful at all without the <code>ring_hom</code> support - so if anything, I'd lean towards either growing the PR to include <code>mul_zero_one_class</code>, or creating a separate PR that adds <code>mul_zero_one_class</code> first</p>



<a name="233241977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233241977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233241977">(Apr 05 2021 at 22:51)</a>:</h4>
<p>We have <a href="https://github.com/leanprover-community/mathlib/issues/6865">#6865</a> now to use as a template for such a separate PR, so the process is straightforward albeit very tedious</p>



<a name="233244828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/233244828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#233244828">(Apr 05 2021 at 23:25)</a>:</h4>
<p>In the interest of making gradual progress, I just split <a href="https://github.com/leanprover-community/mathlib/issues/7050">#7050</a> and <a href="https://github.com/leanprover-community/mathlib/issues/7049">#7049</a> out of Oliver's work</p>



<a name="234493297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234493297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234493297">(Apr 14 2021 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/233171303">said</a>:</p>
<blockquote>
<p>So I think we really do need that new typeclass, <code>mul_zero_one_class</code></p>
</blockquote>
<p>Done in <a href="https://github.com/leanprover-community/mathlib/issues/7176">#7176</a></p>



<a name="234537742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234537742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234537742">(Apr 14 2021 at 17:11)</a>:</h4>
<p>Thanks!</p>



<a name="234748620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234748620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234748620">(Apr 15 2021 at 20:37)</a>:</h4>
<p>Now merged. I might do one more split for <code>nonassoc_semiring</code>, since that's the one that permits all the extra generalizations</p>



<a name="234748705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234748705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234748705">(Apr 15 2021 at 20:38)</a>:</h4>
<p>(subsemiring, ring_hom, ...)</p>



<a name="234771538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234771538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234771538">(Apr 15 2021 at 23:35)</a>:</h4>
<p>We're getting there. :-)</p>



<a name="234833831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234833831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234833831">(Apr 16 2021 at 11:02)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I was going to look at resolving the conflicts in <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> this afternoon but I see you've already done it. Thank you very much! I'm going to try and finish some other work over the next week and then I expect I'll take up the non-assoc ring / algebra work properly again.</p>



<a name="234834461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234834461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234834461">(Apr 16 2021 at 11:07)</a>:</h4>
<p>They were smaller than I expected so I figured I'd just try resolving them in-browser</p>



<a name="234834651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234834651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234834651">(Apr 16 2021 at 11:09)</a>:</h4>
<p>Next step: resolve on your phone!</p>



<a name="234834901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234834901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234834901">(Apr 16 2021 at 11:11)</a>:</h4>
<p>I've done that once or twice and the experience has been painful. Android's gboard now has a full-keyboard text selection mode that makes it marginally less bad.</p>



<a name="234851032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234851032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234851032">(Apr 16 2021 at 13:18)</a>:</h4>
<p>Looks like <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> is back at the "needs more annotations" stage</p>



<a name="234851758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/234851758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#234851758">(Apr 16 2021 at 13:22)</a>:</h4>
<p>Yeah I see that. I'll add what's necessary to get the build green either this evening or tomorrow.</p>



<a name="235752511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/235752511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#235752511">(Apr 22 2021 at 21:38)</a>:</h4>
<p>I had a go at generalizing ring_hom on top of your PR in another branch, <a href="https://github.com/leanprover-community/mathlib/tree/non_unital_assoc_rings-eric-wieser">branch#non_unital_assoc_rings-eric-wieser</a>. If the build passes, I'll push it onto your PR</p>



<a name="235955482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/235955482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#235955482">(Apr 24 2021 at 09:00)</a>:</h4>
<p>I also tried splitting out <code>semigroup_with_zero</code> into its own PR (<a href="https://github.com/leanprover-community/mathlib/issues/7346">#7346</a>), and was surprised to find that most of the <code>zero_eq_one</code> annotation regressions are actually introduced by that typeclass</p>



<a name="236003811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236003811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236003811">(Apr 24 2021 at 20:39)</a>:</h4>
<p>I found and pushed a way to avoid needing any of those annotations</p>



<a name="236175261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236175261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236175261">(Apr 26 2021 at 13:38)</a>:</h4>
<p>I'd appreciate if someone could take a look at <a href="https://github.com/leanprover-community/mathlib/issues/7346">#7346</a> so that I can resume the refactor of <code>subsemiring</code> to be non-associative on the branch above</p>



<a name="236175653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236175653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236175653">(Apr 26 2021 at 13:40)</a>:</h4>
<p>Likewise!</p>



<a name="236181569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236181569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236181569">(Apr 26 2021 at 14:18)</a>:</h4>
<p>It turns out one of my very early claims in this saga was wrong - I claimed that <code>algebra R A</code> could be relaxed from <code>semiring A</code> to <code>non_assoc_semiring A</code> with minimal changes. Having just tried it, it turns out that this then isn't strong enough to prove <code>algebra.to_semimodule.mul_smul</code></p>



<a name="236184852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236184852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236184852">(Apr 26 2021 at 14:38)</a>:</h4>
<p>This doesn't matter as long as I do change the definition of <code>algebra</code> to extend <code>module</code> though, right?</p>



<a name="236184930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236184930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236184930">(Apr 26 2021 at 14:38)</a>:</h4>
<p>I'm hoping to start that work (again, but properly this time) by the end of the week.</p>



<a name="236468567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236468567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236468567">(Apr 28 2021 at 08:24)</a>:</h4>
<p>Unfortunately after the merge, <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> now hits a deterministic timeout. More unfortunately, it only does so in CI and not when run locally for me...</p>



<a name="236468990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236468990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236468990">(Apr 28 2021 at 08:28)</a>:</h4>
<p>Maybe you can change the <code>lean -T</code> parameter on your local Lean to match the one used in CI?</p>



<a name="236515451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236515451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236515451">(Apr 28 2021 at 14:24)</a>:</h4>
<p>I already have the <code>-T</code> parameter configured to match CI in my vscode settings</p>



<a name="236678144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236678144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236678144">(Apr 29 2021 at 14:05)</a>:</h4>
<p>Seems it was a nondeterministic cache and the problem went away</p>



<a name="236678172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236678172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236678172">(Apr 29 2021 at 14:05)</a>:</h4>
<p>The next problem is <code>@[simps]</code> timing out on a <code>direct_sum</code> lemma, which should hopefully be fixed by <a href="https://github.com/leanprover-community/mathlib/issues/7403">#7403</a></p>



<a name="236679019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236679019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236679019">(Apr 29 2021 at 14:10)</a>:</h4>
<p>I've said it before, but thank you so much for sticking with this! I'm planning to resume the work to change the algebra definition tomorrow afternoon (assuming <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> likes that idea).</p>



<a name="236697142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/236697142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#236697142">(Apr 29 2021 at 15:42)</a>:</h4>
<p>Speaking as your boss I would strongly recommend that you just do what the heck takes your fancy.</p>



<a name="237038169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237038169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237038169">(May 02 2021 at 08:42)</a>:</h4>
<p>Is a non-unital algebra covered by <code>[module R A] [smul_comm_class R A A] [is_scalar_tower R A A]</code>?</p>



<a name="237053770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237053770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237053770">(May 02 2021 at 13:44)</a>:</h4>
<p>Am I confused or is there a missing <code>[has_scalar A A]</code>? So the idea that the product of elements <code>x y : A</code> was <code>x • y</code> instead of <code>x * y</code>? I'm a bit uneasy about that.</p>
<p>But more seriously, I don't see anything forcing the product to be linear. E.g., if <code>x y z : A</code>, we don't necessarily have <code>x • (y + z) = x • y + x • z</code> etc.</p>



<a name="237060414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237060414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237060414">(May 02 2021 at 15:21)</a>:</h4>
<p>Does this come from <code>distrib_mul_action</code>, if we're thinking about things this way?</p>



<a name="237064160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237064160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237064160">(May 02 2021 at 16:26)</a>:</h4>
<p>Yes, but I guess <code>add_smul</code> doesn't</p>



<a name="237088314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237088314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237088314">(May 02 2021 at 21:54)</a>:</h4>
<p>I created <a href="https://github.com/leanprover-community/mathlib/issues/7441">#7441</a> which at least shows that my suggestion offers some generalizations, albeit not the one you needed.</p>



<a name="237846385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/237846385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#237846385">(May 07 2021 at 15:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras/near/236003811">said</a>:</p>
<blockquote>
<p>I found and pushed a way to avoid needing any of those annotations</p>
</blockquote>
<p>I had to add them back to <a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> in the end. I'm sure there's a similar solution, but we already decided not to bother looking for it.</p>



<a name="241418736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241418736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241418736">(Jun 03 2021 at 16:50)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6786">#6786</a> should be ready for a final look over, I've wrapped up all the scope creep I can think of</p>



<a name="241438790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241438790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241438790">(Jun 03 2021 at 19:15)</a>:</h4>
<p>This is marvellous. There's a good chance I'll actually need to use <code>non_unital_non_assoc_semiring</code> tomorrow!</p>



<a name="241444385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241444385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241444385">(Jun 03 2021 at 19:58)</a>:</h4>
<p>If you're lucky, the semiring lemmas you want to use with it will be generalized already!</p>



<a name="241458556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241458556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241458556">(Jun 03 2021 at 21:35)</a>:</h4>
<p>I think I might be able to generalize <a href="https://github.com/leanprover-community/mathlib/issues/6775">#6775</a> using this as well; as it turns out, the correspondence between Boolean rings and Boolean algebras extends to Boolean rings without unit and generalized Boolean algebras.</p>



<a name="241839533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241839533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241839533">(Jun 07 2021 at 20:56)</a>:</h4>
<p><img alt=":merge:" class="emoji" src="https://uploads.zulipusercontent.net/5e3e16a6488be72497f3dc476ec5306cd294251d/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f333132312f656d6f6a692f696d616765732f31383532372e706e67" title="merge"></p>



<a name="241839846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241839846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241839846">(Jun 07 2021 at 20:58)</a>:</h4>
<p>I just saw the notification. This is huge for me! Absolutely marvellous work. Thanks!</p>



<a name="241839946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241839946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241839946">(Jun 07 2021 at 20:59)</a>:</h4>
<p>Thanks a lot to <span class="user-mention" data-user-id="240862">@Oliver Nash</span> and <span class="user-mention" data-user-id="310045">@Eric Wieser</span> for making this happen.</p>



<a name="241841071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/241841071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#241841071">(Jun 07 2021 at 21:08)</a>:</h4>
<p>99% <span class="user-mention" data-user-id="310045">@Eric Wieser</span> for the record!</p>



<a name="242028294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/242028294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#242028294">(Jun 09 2021 at 07:54)</a>:</h4>
<p>I'm a little worried this may have substantially impacted the CI build time, although it's possibly that github is just under more load. Is there an easy way to measure?</p>



<a name="242029596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/242029596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#242029596">(Jun 09 2021 at 08:08)</a>:</h4>
<p>There's the <a class="stream" data-stream-id="113538" href="/#narrow/stream/113538-CI">#CI</a>  stream, does it contain the information you need?</p>



<a name="242030547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/242030547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#242030547">(Jun 09 2021 at 08:17)</a>:</h4>
<p>According to that it's only 3 minutes slower, which isn't catastrophic</p>



<a name="242032630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236591%20non-unital%20algebras/near/242032630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236591.20non-unital.20algebras.html#242032630">(Jun 09 2021 at 08:37)</a>:</h4>
<p>The noise level in those timings is probably larger than 3 minutes.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>