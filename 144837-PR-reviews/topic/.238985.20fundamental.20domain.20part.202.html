---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html">#8985 fundamental domain part 2</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279452463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279452463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279452463">(Apr 19 2022 at 18:50)</a>:</h4>
<p>I've just relabelled this PR as 'awaiting-author' because I've received permission from <span class="user-mention" data-user-id="252920">@Alex Kontorovich</span> to add a few commits of my own. I'll put it back out for review in a day or two once I've finished working on it.</p>



<a name="279593831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279593831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279593831">(Apr 20 2022 at 19:44)</a>:</h4>
<p>I think this is ready for review again.</p>



<a name="279603213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279603213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279603213">(Apr 20 2022 at 21:05)</a>:</h4>
<p>I will try to have a look tomorrow</p>



<a name="279611024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279611024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279611024">(Apr 20 2022 at 22:23)</a>:</h4>
<p>Thanks. Don’t worry if you don’t get to it, it’s been open quite a while already.</p>



<a name="279648424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279648424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279648424">(Apr 21 2022 at 08:07)</a>:</h4>
<p>I've left a bunch of small comments, but looks good to me.</p>



<a name="279655742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279655742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279655742">(Apr 21 2022 at 09:28)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I've just pushed a commit which aims to address all of your comments except <a href="https://github.com/leanprover-community/mathlib/pull/8985#discussion_r854885446">this one</a>.</p>



<a name="279655808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279655808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279655808">(Apr 21 2022 at 09:29)</a>:</h4>
<p>I can see quite a lot more old stuff that I could tidy up (especially in the files <code>modular.lean</code> and <code>upper_half_plane.lean</code>) but I think it's better not to mix too much of this in with the new additions.</p>



<a name="279659500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279659500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279659500">(Apr 21 2022 at 10:09)</a>:</h4>
<p>What tidying up did you have in mind for the files? We can maybe do some of this tidying up of <code>modular.lean</code> and <code>upper_half_plane</code> in <a href="https://github.com/leanprover-community/mathlib/pull/12415">#12415</a> ? (since this is going to be making things work for actions of <code>GL_pos</code>).</p>



<a name="279673112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279673112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279673112">(Apr 21 2022 at 12:30)</a>:</h4>
<p>I think it's ready to go, I've delegated it.</p>



<a name="279695595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279695595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279695595">(Apr 21 2022 at 15:27)</a>:</h4>
<p>Thanks all!</p>



<a name="279790764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279790764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279790764">(Apr 22 2022 at 07:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="389019">Chris Birkbeck</span> <a href="#narrow/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202/near/279659500">said</a>:</p>
<blockquote>
<p>What tidying up did you have in mind for the files? We can maybe do some of this tidying up of <code>modular.lean</code> and <code>upper_half_plane</code> in <a href="https://github.com/leanprover-community/mathlib/pull/12415">#12415</a> ? (since this is going to be making things work for actions of <code>GL_pos</code>).</p>
</blockquote>
<p>Mostly just minor things like naming, styling, golfing. I also wanted to experiment with some new notation, suggested <a href="https://github.com/leanprover-community/mathlib/pull/8985#issuecomment-1100865225">here</a>, to see if we could be able to write things like <code>g.c</code> instead of <code>↑ₘg 1 0</code>.</p>



<a name="279790918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279790918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279790918">(Apr 22 2022 at 07:58)</a>:</h4>
<p>I'm also a bit suspicious that I see various <code>local attribute [instance]</code>, <code>local attribute [-instance]</code>, <code>local attribute [simp]</code> etc. in these files and wanted to understand if they were really necessary.</p>



<a name="279790954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279790954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279790954">(Apr 22 2022 at 07:59)</a>:</h4>
<p>I'm planning to focus on some other corners of the codebase for the next while but I'll certainly chime in on reviews of this stuff if there are any PRs.</p>



<a name="279791277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279791277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279791277">(Apr 22 2022 at 08:02)</a>:</h4>
<p>Oh and I vaguely wondered if we should really be prioritising the <code>PSL(2, ℤ)</code> action on <code>ℍ</code> (rather than <code>SL(2, ℤ)</code>). See for example <a href="https://github.com/leanprover-community/mathlib/blob/2b902eb3a13739fc6f060608f58fec5cfb48118f/src/number_theory/modular.lean#L370">this comment</a>.</p>



<a name="279793017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279793017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279793017">(Apr 22 2022 at 08:23)</a>:</h4>
<p>Regarding the <code>local attribute [-instance]</code>, I found during review that the <code>has_coe_to_fun</code> instance, while convenient for accessing elements, was making it very hard to state lemmas in a way that was useful.</p>



<a name="279793031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279793031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279793031">(Apr 22 2022 at 08:24)</a>:</h4>
<p>Perhaps we should rip off the bandaid and just delete those instances entirely</p>



<a name="279796082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279796082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279796082">(Apr 22 2022 at 08:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202/near/279791277">said</a>:</p>
<blockquote>
<p>Oh and I vaguely wondered if we should really be prioritising the <code>PSL(2, ℤ)</code> action on <code>ℍ</code> (rather than <code>SL(2, ℤ)</code>). See for example <a href="https://github.com/leanprover-community/mathlib/blob/2b902eb3a13739fc6f060608f58fec5cfb48118f/src/number_theory/modular.lean#L370">this comment</a>.</p>
</blockquote>
<p>Mathematically this is a subtle question. The upper half plane is parametrising elliptic curves with some extra structure (an isomorphism between Z^2 and the first homology of the curve), and what is happening is that the +-1 in SL_2(Z) is fixing the curve and sending the extra structure to minus itself; however this new data is isomorphic to the original data because an elliptic curve is an abelian group and -1 is an automorphism of any abelian group, so the point on the moduli space doesn't move. When one starts building stuff on top of this moduli space one starts to see the effect of the -1 more, but I would say that we are a long way from this right now. There is even a third way to look at things; if you don't keep track of orientation then you end up with an action of GL_2(Z) on the disjoint union of the upper and lower half planes, or of course PGL_2(Z). Mathematically I don't think there will be some natural choice which makes everyone happy all of the time, so perhaps the decision on whether to make SL_2(Z) or PSL_2(Z) act should be made for other reasons (i.e. other design decisions).</p>



<a name="279796708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238985%20fundamental%20domain%20part%202/near/279796708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238985.20fundamental.20domain.20part.202.html#279796708">(Apr 22 2022 at 09:02)</a>:</h4>
<p>Thanks Kevin, this is really useful. I think this means we should leave things as they are, for now at least.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>