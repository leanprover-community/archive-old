---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.233463.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html">#3463</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204987207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/204987207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#204987207">(Jul 25 2020 at 04:14)</a>:</h4>
<p>Just wanted to ping <span class="user-mention" data-user-id="110026">@Simon Hudon</span>, to see if he can help me get <code>@[to_additive]</code> working in this PR.</p>



<a name="204987225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/204987225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#204987225">(Jul 25 2020 at 04:15)</a>:</h4>
<p>Also, I invited reviews from <span class="user-mention" data-user-id="243562">@Adam Topaz</span>, <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> --- it would be great to get you more involved in the PR review processes!</p>



<a name="204987589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/204987589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#204987589">(Jul 25 2020 at 04:27)</a>:</h4>
<p>How <code>to_additive</code> fails?</p>



<a name="204988046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/204988046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#204988046">(Jul 25 2020 at 04:42)</a>:</h4>
<p>It succeeds, it just takes it to a different name than I hoped for.</p>



<a name="204988067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/204988067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#204988067">(Jul 25 2020 at 04:42)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/3463#discussion_r460360748">https://github.com/leanprover-community/mathlib/pull/3463#discussion_r460360748</a></p>



<a name="205003866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205003866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205003866">(Jul 25 2020 at 13:24)</a>:</h4>
<p>The problem with translating <code>monoid</code> to <code>add_monoid</code> is that <code>comm_monoid</code> should be translated to <code>add_comm_monoid</code>, not <code>comm_add_monoid</code>.</p>



<a name="205003870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205003870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205003870">(Jul 25 2020 at 13:24)</a>:</h4>
<p>See <a href="https://leanprover-community.github.io/mathlib_docs/find/to_additive.guess_name/src">src#to_additive.guess_name</a></p>



<a name="205003876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205003876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205003876">(Jul 25 2020 at 13:25)</a>:</h4>
<p>And <code>tr</code> just above this definition.</p>



<a name="205005186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005186">(Jul 25 2020 at 14:04)</a>:</h4>
<p>I'm here. What's the status?</p>



<a name="205005312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005312">(Jul 25 2020 at 14:08)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/3463#discussion_r460360748">https://github.com/leanprover-community/mathlib/pull/3463#discussion_r460360748</a></p>



<a name="205005313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005313">(Jul 25 2020 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>, I don't think <code>guess_name</code> does that kind of translation. Try <code>#eval guess_name "monoid"</code> right underneath and you'll get <code>"monoid"</code></p>



<a name="205005315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005315">(Jul 25 2020 at 14:08)</a>:</h4>
<p>(Sorry to be terse, but I have to head to bed!)</p>



<a name="205005394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005394">(Jul 25 2020 at 14:10)</a>:</h4>
<p>That's fine. I need some time to look through <code>to_additive</code>. I haven't touched it in a while</p>



<a name="205005401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205005401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205005401">(Jul 25 2020 at 14:10)</a>:</h4>
<p>Sleep well <span aria-label="zzz" class="emoji emoji-1f4a4" role="img" title="zzz">:zzz:</span></p>



<a name="205006741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205006741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205006741">(Jul 25 2020 at 14:46)</a>:</h4>
<p>Anybody who's still up, if I experiment with the name generation, will recompiling mathlib tell me if I changed something I shouldn't have changed?</p>



<a name="205006967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205006967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205006967">(Jul 25 2020 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I think you were right. Changing <code>tr</code> seems to do the trick</p>



<a name="205010494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205010494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205010494">(Jul 25 2020 at 16:23)</a>:</h4>
<p>The best way to ensure that no names changed would be generating the list of all available names in <code>all.lean</code> before and after.</p>



<a name="205010554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205010554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205010554">(Jul 25 2020 at 16:25)</a>:</h4>
<p>If you just add <code>monoid → add_monoid</code> to <code>tr</code>, then it will transfer <code>comm_monoid</code> to <code>comm_add_monoid</code>, not <code>add_comm_monoid</code>.</p>



<a name="205010601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205010601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205010601">(Jul 25 2020 at 16:26)</a>:</h4>
<p>A possible solution is to match all top-level names already mapped by <code>to_additive</code>, starting with longer names.</p>



<a name="205010680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205010680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205010680">(Jul 25 2020 at 16:28)</a>:</h4>
<p>If you find a better heuristic, then you'll get quite a few <a href="https://github.com/leanprover-community/mathlib/blob/3484194/src/algebra/group/to_additive.lean#L111">warnings</a> while recompiling <code>mathlib</code>.</p>



<a name="205015428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205015428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205015428">(Jul 25 2020 at 18:22)</a>:</h4>
<p>I just pushed something. It handles <code>comm_group</code> (et cie) nicely. You can have a look</p>



<a name="205027213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205027213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205027213">(Jul 25 2020 at 23:48)</a>:</h4>
<p>Very nice!</p>



<a name="205027223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205027223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205027223">(Jul 25 2020 at 23:49)</a>:</h4>
<p>Would you be able to take your commit and make it a separate PR? I think we should keep these changes separate in the history. I can mark my PR as blocked on this PR to <code>to_additive</code>.</p>



<a name="205027688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205027688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205027688">(Jul 26 2020 at 00:04)</a>:</h4>
<p>(I'm also happy to make the separate PR, if you prefer.)</p>



<a name="205028824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205028824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205028824">(Jul 26 2020 at 00:39)</a>:</h4>
<p>If you're ok with taking it up, I'll let you take care of that part</p>



<a name="205030958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233463/near/205030958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233463.html#205030958">(Jul 26 2020 at 01:52)</a>:</h4>
<p>Thanks! I’m spending the evening with my partner. This way, you don’t have to wait</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>