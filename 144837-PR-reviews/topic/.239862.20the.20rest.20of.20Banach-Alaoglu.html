---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html">#9862 the rest of Banach-Alaoglu</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="278429966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278429966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278429966">(Apr 09 2022 at 20:52)</a>:</h4>
<p>Sorry for the long silence on my part on the final part of the Banach-Alaoglu theorem!</p>
<p>In the end of December, <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> made a very meaningful generalization to the PR. The generalization made me feel like I should rethink which parts of the weak dual code needed to exist in the original form of the codomain being the scalar ring, and which parts should exist in greater generality. Also, the changes included 52 new commits, including changes in files I do not know well. That happened just at the time when my teaching (or at least arranging TA meetings and posting course materials) for the semester became urgent, and also when I had finally accepted the reality that I'd have to switch to remote teaching again. I kept thinking I'd find a weekend to catch up and figure out what the new design choices and their downstream effects are, and what the appropriate scope of the weak dual file would be. But every time I tried to start, it just felt overwhelming, although the whole PR is only +184 -75 lines of code...</p>
<p>A very unfortunate effect of me having postponed this for long is that the merging with master might be complicated now. At least the folder structure has changed, but probably there may have been other relevant changes, too.</p>
<p>I expect to now have some time during weekends again (still sporadic, though), and I believe both the Banach-Alaoglu theorem and the other new improvements in that branch should find their ways to mathlib. But I am very unsure of what is the best way to proceed. I can think of a few possibilities, but I'm very open to other ideas as well.</p>
<p>One possibility is to continue with the existing PR. But I don't feel confident enough about my understanding of the design decisions to really be in charge of it. If Yury or someone else is willing to adopt this PR, I'd be grateful if this can still be salvaged despite the bitrot that I let happen.</p>
<p>Another option might be to start cherry-picking pieces from the code in that branch, and making possibly even smaller PRs, eventually abandoning the original PR when everything relevant has been picked. Hopefully the current diff in the branch indicates well enough what was new in the branch (and the total is not even very much). The advantage is that I could pick pieces that I do understand. However, some of the first cherry-pickable pieces should probably be Yury's changes, so I'm again not necessarily the right person to PR them. To me this looks like to more feasible option unless someone courageous takes over the original PR.</p>
<p>I'd love to hear also if anyone has more pragmatic alternatives of how to proceed!</p>



<a name="278430129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278430129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278430129">(Apr 09 2022 at 20:55)</a>:</h4>
<p>I am happy to do the merge for you. Looks like I'm pretty good at this.</p>



<a name="278430468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278430468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278430468">(Apr 09 2022 at 21:01)</a>:</h4>
<p>Oh wow, that would be great! As far as I'm concerned the contents are good with the improvements that especially Yury made. (I never really had any other concerns except whether I understood the choices and what the scope of the weak_dual file should be, and that probably doesn't have to be decided in the current PR anyway.)</p>
<p>Huge thanks if you are able to do this!</p>



<a name="278431902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278431902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278431902">(Apr 09 2022 at 21:29)</a>:</h4>
<p>Merge done. Didn't yet get to do the bump because you touched <code>topology.maps</code> which is way too far from <code>analysis.normed_space.weak_dual</code> for my machine to catch up <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="278432852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278432852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278432852">(Apr 09 2022 at 21:52)</a>:</h4>
<p>Is that the version of Banach-Alaoglu for normed spaces?</p>



<a name="278432933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278432933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278432933">(Apr 09 2022 at 21:54)</a>:</h4>
<p>Unfortunately we are all hitting a timeout in <a href="https://tqft.net/mathlib/category_theory/fin_category">file#category_theory/fin_category</a>, so the bump will have to wait.</p>



<a name="278433895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278433895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278433895">(Apr 09 2022 at 22:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu/near/278432852">said</a>:</p>
<blockquote>
<p>Is that the version of Banach-Alaoglu for normed spaces?</p>
</blockquote>
<p>Yes.</p>
<p>Well at least it was. The original PR was about the compactness of polar sets (including the closed unit ball) in duals of normed spaces over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">C</span></span></span></span> with their weak-star topology. Sébastien Gouëzel generalized to weak duals of normed spaces over  any<code>nondiscrete_normed_field</code> that is a <code>proper_space</code>. Then Yury Kudryashov generalized to the compactness in a suitable induced topology in spaces of semi-linear maps whose domain is a normed space and codomain is a proper normed space. Or maybe I lost track. <span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>
<p>But I think modulo mathlib style, it is <a href="https://en.wikipedia.org/wiki/Banach%E2%80%93Alaoglu_theorem">the usual Banach-Alaoglu theorem</a>. <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="278435252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278435252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278435252">(Apr 09 2022 at 22:53)</a>:</h4>
<p>The issue is that there is the (highly nontrivial) generalization to topological vector spaces, where the weak topology comes from a nondegenerate bilinear form. Mathlib is missing to two Lemmas (algebraic dual is complete and weakly bounded sets are precompact) that are crucial to get the tvs Banach-Alaoglu theorem.</p>



<a name="278436018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278436018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278436018">(Apr 09 2022 at 23:12)</a>:</h4>
<p>Ok, so this was indeed only for normed spaces in the PR, not for topological vector spaces.</p>
<p>(How to generalize to topological vector spaces with topology from a nondegenerate bilinear form might also have implications about the right scope of the <code>weak_dual</code> file.)</p>



<a name="278436521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/278436521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#278436521">(Apr 09 2022 at 23:26)</a>:</h4>
<p>Let me add that I originally PR'd the weak duals because it was suggested in a PR review about the portmanteau theorem that the right way to do the topology of convergence in distribution is via weak star topology on topological modules over topological semirings <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>. (I fully agree it was, but it opened a rabbit hole.) I then added Banach-Alaoglu for normed spaces because I felt like that should naturally come right after the definition of weak star topology... For now, the topology of convergence in distribution is still not in mathlib, let alone the proof of the portmanteau theorem which I was trying to PR... I think I'd now like to move back to those. I'd be quite happy to leave generalizations of weak topologies and Banach-Alaoglu theorems to others... (Although the sequential Banach-Alaoglu in weak duals of separable normed spaces will be of substantial interest to me. Yes, the sequential compactness version of Banach-Alaoglu is currently still missing.)</p>



<a name="281169353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/281169353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#281169353">(May 04 2022 at 15:07)</a>:</h4>
<p>Bors says there's a merge conflict, but there isn't? (I just pulled master and merged locally to be sure.)</p>
<p>Is this because it got pulled off and put back on the queue quickly?</p>



<a name="281169502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239862%20the%20rest%20of%20Banach-Alaoglu/near/281169502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239862.20the.20rest.20of.20Banach-Alaoglu.html#281169502">(May 04 2022 at 15:08)</a>:</h4>
<p>It's maybe another PR in the same batch.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>