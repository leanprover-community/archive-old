---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html">#15000: the Kummer-Dedekind theorem</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="297962823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297962823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297962823">(Sep 09 2022 at 12:36)</a>:</h4>
<p>PR <a href="https://github.com/leanprover-community/mathlib/pull/15000">#15000</a> is now (almost, modulo moving some results from one file to another) ready for review, if someone is willing to have a look at it. </p>
<p>The proof of the last lemma in <code>ring_theory.kummer_dedekind</code> is broken because of a <code>motive is not type correct</code> error on the last line, and I haven't found any fix, so any fixes/advice  would be more than welcome!</p>



<a name="297962977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297962977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297962977">(Sep 09 2022 at 12:37)</a>:</h4>
<p>There is a long line error <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="297963069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297963069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297963069">(Sep 09 2022 at 12:37)</a>:</h4>
<p>Just notice that, I'll fix it now <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="297963257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297963257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297963257">(Sep 09 2022 at 12:38)</a>:</h4>
<p>done</p>



<a name="297965855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297965855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297965855">(Sep 09 2022 at 12:54)</a>:</h4>
<p>i suggested a fix for the motive issue</p>



<a name="297966571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297966571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297966571">(Sep 09 2022 at 12:57)</a>:</h4>
<p>I've left a couple of comments, but I think you can open another preliminary PR.</p>



<a name="297982491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/297982491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#297982491">(Sep 09 2022 at 14:10)</a>:</h4>
<p>Thanks for the review and for catching all the style errors I had missed <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="298238906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/298238906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#298238906">(Sep 11 2022 at 11:32)</a>:</h4>
<p>I've split some of the stuff in <a href="https://github.com/leanprover-community/mathlib/pull/15000">#15000</a> into two other preliminary PRs : </p>
<ul>
<li><a href="https://github.com/leanprover-community/mathlib/pull/16450">#16450</a> which contains the stuff about <code>adjoin_root</code></li>
<li><a href="https://github.com/leanprover-community/mathlib/pull/16455">#16455</a> which constructs part of the map for the Dedekind-Kummer theorem</li>
</ul>



<a name="299146064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299146064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299146064">(Sep 16 2022 at 12:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15000">#15000</a> should be ready for another review - I'm just waiting to see if it builds, since I modified some files up the hierarchy</p>



<a name="299146212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299146212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299146212">(Sep 16 2022 at 12:05)</a>:</h4>
<p>I've made a couple of changes on the statements on the main theorems, since some of  assumptions weren't needed, but nothing substantial</p>



<a name="299147535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299147535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299147535">(Sep 16 2022 at 12:14)</a>:</h4>
<p>It looks essentially ready to go for me, but I think it's better to wait for a quick look by someones else (just because we reserved the PR number 15000...). Thanks for this nice result!</p>



<a name="299153806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299153806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299153806">(Sep 16 2022 at 12:52)</a>:</h4>
<p>Thanks for the review! <br>
And my pleasure :D</p>



<a name="299153968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299153968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299153968">(Sep 16 2022 at 12:53)</a>:</h4>
<p>Next step will be extending this to the general statement with conductors, which shouldn't be too bad</p>



<a name="299190175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299190175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299190175">(Sep 16 2022 at 15:53)</a>:</h4>
<p>I'm having a small issue with the linter, which is telling me that the following instance is problematic </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.dedekind_domain.ideal</span>

<span class="kn">open</span> <span class="n">ideal</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">}</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">[</span><span class="n">hI</span> <span class="o">:</span> <span class="n">is_maximal</span> <span class="n">I</span><span class="o">]</span> <span class="o">:</span> <span class="n">field</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⧸</span> <span class="n">I</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">((</span><span class="n">ideal.quotient.maximal_ideal_iff_is_field_quotient</span> <span class="n">I</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hI</span><span class="o">)</span><span class="bp">.</span><span class="n">to_field</span>
</code></pre></div>



<a name="299190398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299190398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299190398">(Sep 16 2022 at 15:54)</a>:</h4>
<p>The error message is <code>These instances contain one or more declarations that are not instances and are also not marked
</code>@[reducible]<code>. This means that type-class inference cannot unfold these declarations, which might mean that type-class inference cannot infer that two instances are definitionally equal. This can cause unexpected errors when this class occurs as an *argument* to a type-class problem. See note [reducible non-instances]. -/
#check @kummer_dedekind.has_quotient.quotient.field /- This instance contains the declarations [is_field.to_field], which are semireducible non-instances.</code></p>



<a name="299190506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299190506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299190506">(Sep 16 2022 at 15:54)</a>:</h4>
<p>Does anyone have advice on how to fix this?</p>



<a name="299190691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299190691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299190691">(Sep 16 2022 at 15:55)</a>:</h4>
<p>I tried adding <code>@[reducible]</code> in front of the instance, but that didn't work</p>



<a name="299191506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299191506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299191506">(Sep 16 2022 at 15:58)</a>:</h4>
<p>It is possible that <code>@[reducible] on </code>is_field.to_field` would fix this, but I do not know if it would create problems elsewhere...</p>



<a name="299191914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299191914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299191914">(Sep 16 2022 at 16:00)</a>:</h4>
<p>I'll try and see if that works</p>



<a name="299192738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299192738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299192738">(Sep 16 2022 at 16:03)</a>:</h4>
<p>I guess you're meant to use <a href="https://leanprover-community.github.io/mathlib_docs/find/ideal.quotient.field">docs#ideal.quotient.field</a>, but why isn't that triggering automatically in this case?</p>



<a name="299193853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299193853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299193853">(Sep 16 2022 at 16:08)</a>:</h4>
<p>Oh I wasn't aware of that instance, but I'm not sure why it wasn't triggering automatically</p>



<a name="299195638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299195638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299195638">(Sep 16 2022 at 16:16)</a>:</h4>
<p>It seems that </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">[</span><span class="n">hI</span> <span class="o">:</span> <span class="n">is_maximal</span> <span class="n">I</span><span class="o">]</span> <span class="o">:</span> <span class="n">field</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⧸</span> <span class="n">I</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>was a bad instance in the first place</p>



<a name="299196092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196092">(Sep 16 2022 at 16:19)</a>:</h4>
<p>i'm mildly confused how that's different that the instance that I linked, which seems to be fine.  apart from the extra <code>is_domain R</code>, of course</p>



<a name="299196451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196451">(Sep 16 2022 at 16:20)</a>:</h4>
<p>I think the difference is that the one already on mathlib doesn't use <code>is_field.to_field</code>, which was causing my linter problems</p>



<a name="299196501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196501">(Sep 16 2022 at 16:21)</a>:</h4>
<p>Is there an idiomatic way of defining a temporary instance in a file? I need <code>field (R ⧸ I)</code> to define <br>
<code>normalized_factors_map_equiv_normalized_factors_min_poly_mk</code></p>



<a name="299196595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196595">(Sep 16 2022 at 16:21)</a>:</h4>
<p>So something a bit like <code>letI</code> for outside of tactic mode?</p>



<a name="299196788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196788">(Sep 16 2022 at 16:22)</a>:</h4>
<p><code>def foo</code> and then <code>local attribute [instance] foo</code></p>



<a name="299196892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299196892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul Lezeau <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299196892">(Sep 16 2022 at 16:23)</a>:</h4>
<p>Ah great, thanks a lot!</p>



<a name="299197783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315000%3A%20the%20Kummer-Dedekind%20theorem/near/299197783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem.html#299197783">(Sep 16 2022 at 16:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315000.3A.20the.20Kummer-Dedekind.20theorem/near/299196788">said</a>:</p>
<blockquote>
<p><code>def foo</code> and then <code>local attribute [instance] foo</code></p>
</blockquote>
<p>It will only be an instance in the same section, IIRC.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>