---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html">#8819 suggest using X</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="250321647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250321647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250321647">(Aug 23 2021 at 08:05)</a>:</h4>
<p>You can now write <code>suggest using X</code>, to only give suggestions which make use of the local hypothesis <code>X</code>.</p>
<p>Similarly <code>suggest using X Y Z</code> for multiple hypotheses. <code>library_search using X</code> is also enabled.</p>
<p>This makes <code>suggest</code> much more useful. Previously</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">suggest</span>
</code></pre></div>
<p>would have just said <code>exact P</code>.</p>
<p>Now you can write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">suggest</span> <span class="n">using</span> <span class="n">P</span> <span class="n">Q</span>
</code></pre></div>
<p>and get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.diff</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.union</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.inter</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.append</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.bag_inter</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.remove_all</span> <span class="n">P</span> <span class="n">Q</span>
<span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">exact</span> <span class="n">list.reverse_core</span> <span class="n">P</span> <span class="n">Q</span>
</code></pre></div>



<a name="250323173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250323173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250323173">(Aug 23 2021 at 08:25)</a>:</h4>
<p>(I'm disappointed it took me this long to think of this feature.)</p>



<a name="250323189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250323189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250323189">(Aug 23 2021 at 08:25)</a>:</h4>
<p>Another one we could add is <code>suggest matching "foo"</code> which would only suggest lemmas with "foo" in their name.</p>



<a name="250323287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250323287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250323287">(Aug 23 2021 at 08:26)</a>:</h4>
<p>Unfortunately this probably wouldn't result in any speed-up: munging strings in Lean3 is so slow that it's faster to call <code>apply</code> and only check the names afterwards... :-)</p>



<a name="250324585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250324585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250324585">(Aug 23 2021 at 08:41)</a>:</h4>
<p>But checking them by hand, or checking them using the tactic?</p>



<a name="250325188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250325188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250325188">(Aug 23 2021 at 08:47)</a>:</h4>
<p>Oh, checking using the tactic. So it would just be a filter on the results, rather than a filter on the list of lemmas it has to try under the hood.</p>



<a name="250325257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238819%20suggest%20using%20X/near/250325257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238819.20suggest.20using.20X.html#250325257">(Aug 23 2021 at 08:48)</a>:</h4>
<p>(Perhaps just as significantly as string munging being slow in Lean3, calling <code>apply</code> is <strong>fast</strong>.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>