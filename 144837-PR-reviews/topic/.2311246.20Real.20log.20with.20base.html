---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html">#11246 Real log with base</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268315820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268315820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268315820">(Jan 17 2022 at 21:14)</a>:</h4>
<p>It's a bit unfortunate for this PR that <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.log">docs#nat.log</a> is a 2-ary function with a base, whereas <a href="https://leanprover-community.github.io/mathlib_docs/find/real.log">docs#real.log</a> is the 1-ary natural log. What do people think about a big refactor renaming the real natural log to <code>ln</code> and naming the real 2-ary log-with-base <code>log</code>?</p>



<a name="268316037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268316037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268316037">(Jan 17 2022 at 21:17)</a>:</h4>
<p>I would really personally dislike seeing the natural log as <code>ln</code>. <code>logb</code> maybe for log with base, but certainly not <code>ln</code></p>



<a name="268316161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268316161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268316161">(Jan 17 2022 at 21:19)</a>:</h4>
<p>Would you be in favor of renaming <code>nat.log</code> to <code>nat.logb</code> then? Or do you think it's fine that the conceptually similar function has the different name?</p>



<a name="268316466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268316466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268316466">(Jan 17 2022 at 21:24)</a>:</h4>
<p>I personally am in favor of <code>ln</code> for the natural log, because I think <code>ln</code> has no other interpretations. <code>log</code> can be either natural log or log base 10 (as I learned to my chagrin in high school after getting a question wrong on the AMC 12).</p>



<a name="268316743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268316743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268316743">(Jan 17 2022 at 21:28)</a>:</h4>
<p>How about the more radical suggestion of leaving <code>log</code> undefined so that it can be used as local notation? In much of theoretical computer science "log" means log base 2, and it would be nice to be able to support this locally in relevant files.</p>



<a name="268316942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268316942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268316942">(Jan 17 2022 at 21:31)</a>:</h4>
<p>This would also enable other fancy uses; for example, when we get the <a href="https://en.wikipedia.org/wiki/Continuous_functional_calculus">continuous functional calculus</a> working, we would be able to locally define <code>log</code> to be <code>real.log</code> applied to elements of a C*-algebra via this calculus.</p>



<a name="268317816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268317816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268317816">(Jan 17 2022 at 21:47)</a>:</h4>
<p>I just found <code>ordinal.log</code> which is also 2-ary.</p>



<a name="268317907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268317907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268317907">(Jan 17 2022 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-id="311453">@Frédéric Dupuis</span>  I'm not sure what you mean by "locally define". Wouldn't this use case be better covered using namespaces, as is already being done?</p>



<a name="268317963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268317963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268317963">(Jan 17 2022 at 21:49)</a>:</h4>
<p>I mean declaring something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">log</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">logb</span> <span class="mi">2</span>
</code></pre></div>
<p>at the top of a file where we want <code>log</code> to mean log base 2.</p>



<a name="268318281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268318281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268318281">(Jan 17 2022 at 21:53)</a>:</h4>
<p>Ah, ok, that makes sense to me and seems like the best solution.</p>



<a name="268327330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268327330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268327330">(Jan 18 2022 at 00:07)</a>:</h4>
<p>Hell's bells, I think <code>real.log</code> is completely unambiguous and base <code>e</code> in math departments</p>



<a name="268327561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268327561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268327561">(Jan 18 2022 at 00:11)</a>:</h4>
<p>Some CS texts, such as The Art of Computer Programming, use <code>lg</code> for base-2 log</p>



<a name="268334420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268334420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268334420">(Jan 18 2022 at 02:03)</a>:</h4>
<p><del>docs#ordinal.log is not 2-ary, it has a custom base</del> oh, you don't mean base 2</p>



<a name="268334528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268334528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268334528">(Jan 18 2022 at 02:05)</a>:</h4>
<p>I don't think I have ever seen <code>log</code> used for base 2 in CS, it's usually <code>lg</code> if it matters and <code>log</code> in big-O (where it doesn't matter)</p>



<a name="268334625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268334625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268334625">(Jan 18 2022 at 02:07)</a>:</h4>
<p>I'm in favor of the status quo: <code>nat.log</code> is 2-ary, <code>real.log</code> is base e</p>



<a name="268334824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268334824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268334824">(Jan 18 2022 at 02:11)</a>:</h4>
<p>I had a feeling this wouldn't be the most popular idea :-) The main area I was thinking of here is information theory, where taking log to mean base 2 lets you measure information in bits. Some even go so far as to use "exp" to mean 2^x.</p>



<a name="268334835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268334835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268334835">(Jan 18 2022 at 02:11)</a>:</h4>
<p>Maybe too far of an example, but <a href="https://numpy.org/doc/stable/reference/generated/numpy.log.html"><code>numpy</code></a> treats <code>log</code> as the natural logarithm. Same thing in <a href="https://www.cplusplus.com/reference/cmath/log/">C++</a></p>



<a name="268337438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268337438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268337438">(Jan 18 2022 at 02:58)</a>:</h4>
<p>Can we use <code>log_base</code> for the general version, and <code>log</code> for base e (Haskell's solution)? This isn't that different from the PR as it is now, which uses <code>logb</code> for the former and I think is totally fine as is!</p>



<a name="268349355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311246%20Real%20log%20with%20base/near/268349355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311246.20Real.20log.20with.20base.html#268349355">(Jan 18 2022 at 06:45)</a>:</h4>
<p>I would prefer <code>logb</code> over <code>log_base</code>. Just because it saves 4 * n characters from every lemma name about it. And also because it avoids an <code>_</code> in a function name.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>