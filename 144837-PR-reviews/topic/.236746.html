---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.236746.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html">#6746</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231140407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231140407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231140407">(Mar 20 2021 at 11:22)</a>:</h4>
<p>I am sorry to bother everybody, but I wanted to merge master in my branch and for some reasons I did rebase instead of merge (I must have misunderstood  the difference since it did the exact opposite of what I wanted) and now the PR shows a lot of commits and 463 modified files (I guess this are  the files modified in master since I opened the PR). Is there a simple way to get rid of all this noise? If it is too long I can just close this and open another one.</p>



<a name="231143405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143405">(Mar 20 2021 at 12:24)</a>:</h4>
<p>Hmm, that sounds quite horrible... do you still have a copy of the repo from before the rebase?</p>



<a name="231143419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143419">(Mar 20 2021 at 12:24)</a>:</h4>
<p><code>git rebase</code> is dangerous, in the sense that it rewrites git history</p>



<a name="231143430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143430">(Mar 20 2021 at 12:25)</a>:</h4>
<p>Maybe someone with more git skills than me can help here. It might be possible to get things out of <code>git reflog</code></p>



<a name="231143539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143539">(Mar 20 2021 at 12:27)</a>:</h4>
<p>I will close and open another PR, it's easier</p>



<a name="231143594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143594">(Mar 20 2021 at 12:28)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> Does that mean you have to do the entire refactor again?</p>



<a name="231143595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143595">(Mar 20 2021 at 12:28)</a>:</h4>
<p>I would first see if you can recover using <code>git reflog</code></p>



<a name="231143598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143598">(Mar 20 2021 at 12:28)</a>:</h4>
<p>At least don't delete your local copy of the repo</p>



<a name="231143619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143619">(Mar 20 2021 at 12:29)</a>:</h4>
<p>This is the third PR, and I have the flies on my computer, so it should be quite easy</p>



<a name="231143622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143622">(Mar 20 2021 at 12:29)</a>:</h4>
<p>ok... was this only adding new files?</p>



<a name="231143721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143721">(Mar 20 2021 at 12:31)</a>:</h4>
<p>Ah, even easier. Everything is here</p>
<p><a href="https://github.com/leanprover-community/mathlib/pull/6762">https://github.com/leanprover-community/mathlib/pull/6762</a></p>



<a name="231143775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231143775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231143775">(Mar 20 2021 at 12:32)</a>:</h4>
<p>I am with the phone now so it's a bit of a pain to check, but with the other PR it should be straightforward</p>



<a name="231144670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231144670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231144670">(Mar 20 2021 at 12:53)</a>:</h4>
<p>This other PR (that depends on the broken one) indeed contains all the modifications, plus the part about <code>semi_normed_ring</code>. This last part worked very well, all the small problems come from the other one, so we can maybe just close the other one and keep this one. It is of course bigger, but not that much</p>



<a name="231144880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231144880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231144880">(Mar 20 2021 at 12:58)</a>:</h4>
<p>Fine with me... but it depends on what the maintainers that will review this think.</p>



<a name="231144909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231144909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231144909">(Mar 20 2021 at 12:58)</a>:</h4>
<p>I guess, if needed you can split that PR again</p>



<a name="231144917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231144917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231144917">(Mar 20 2021 at 12:58)</a>:</h4>
<p>I don't think there are any git problems which justify throwing away a PR and creating a new one, since you can always force-push your redo over the old PR</p>



<a name="231144935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231144935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231144935">(Mar 20 2021 at 12:59)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6746">#6746</a> for mobile readers...</p>



<a name="231145078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145078">(Mar 20 2021 at 13:01)</a>:</h4>
<p>Part of what you're seeing is a github bug, I think; this diff shows only 9 modified files: <a href="https://github.com/leanprover-community/mathlib/compare/seminormed">https://github.com/leanprover-community/mathlib/compare/seminormed</a></p>



<a name="231145173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145173">(Mar 20 2021 at 13:02)</a>:</h4>
<p>Usually this type of mess happens when you rebase, but then git tells you off when you try to push, and tricks you into running <code>git pull</code> when actually you want <code>git push -f</code></p>



<a name="231145212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145212">(Mar 20 2021 at 13:03)</a>:</h4>
<p>That is exactly what happened...</p>



<a name="231145362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145362">(Mar 20 2021 at 13:05)</a>:</h4>
<p>The easy thing to do then is to <code>git reset --hard</code> to just before that merge it tricked you into doing</p>



<a name="231145367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145367">(Mar 20 2021 at 13:05)</a>:</h4>
<p>Then <code>git push -f</code></p>



<a name="231145753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231145753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231145753">(Mar 20 2021 at 13:12)</a>:</h4>
<p>It worked like a charm, thank you!</p>



<a name="231146005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231146005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231146005">(Mar 20 2021 at 13:17)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> thanks! It's good to know that solution</p>



<a name="231146055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%236746/near/231146055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.236746.html#231146055">(Mar 20 2021 at 13:18)</a>:</h4>
<p>But also, the mess isn't nearly as bad as it looks, it's a rendering bug in the PR ui</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>