---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html">4574 better `nontriviality`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212983688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212983688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212983688">(Oct 11 2020 at 22:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> In <a href="https://github.com/leanprover-community/mathlib/issues/4574">#4574</a> I'm trying to make <code>nontriviality</code> tactic extensible. E.g., I want <code>nontriviality α</code> to work if the goal is <code>is_open s</code>, <code>s : set α</code>, and for some other goals.</p>



<a name="212983764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212983764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212983764">(Oct 11 2020 at 22:04)</a>:</h4>
<p>I really like it!</p>



<a name="212983844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212983844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212983844">(Oct 11 2020 at 22:07)</a>:</h4>
<p>I guess my <code>meta</code> code is suboptimal, feel free to improve it.</p>



<a name="212983900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212983900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212983900">(Oct 11 2020 at 22:08)</a>:</h4>
<p>Here are a few things I don't know how to do:</p>
<ul>
<li>make it accept a list of additional <code>simp</code> lemmas;</li>
<li>given <code>nontriviality R</code>, make it mark <code>semimodule.subsingleton R</code> as an instance.</li>
</ul>



<a name="212984133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984133">(Oct 11 2020 at 22:14)</a>:</h4>
<p>One more idea: if we have <code>[inhabited α]</code>, then add <code>unique α</code> instead of <code>subsingleton α</code> to the context.</p>



<a name="212984451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984451">(Oct 11 2020 at 22:22)</a>:</h4>
<p>And I can't make <a href="https://github.com/leanprover-community/mathlib/blob/extend-nontriviality/src/analysis/calculus/times_cont_diff.lean#L2375">https://github.com/leanprover-community/mathlib/blob/extend-nontriviality/src/analysis/calculus/times_cont_diff.lean#L2375</a> work with <code>nontriviality</code>.</p>



<a name="212984456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984456">(Oct 11 2020 at 22:22)</a>:</h4>
<p>Or let me try...</p>



<a name="212984525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984525">(Oct 11 2020 at 22:25)</a>:</h4>
<p>What about <a href="https://github.com/leanprover-community/mathlib/blob/73f119e04c35a4ab10eae68345472d78e5c4f6c7/src/analysis/normed_space/operator_norm.lean#L835">https://github.com/leanprover-community/mathlib/blob/73f119e04c35a4ab10eae68345472d78e5c4f6c7/src/analysis/normed_space/operator_norm.lean#L835</a> ?</p>



<a name="212984585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984585">(Oct 11 2020 at 22:27)</a>:</h4>
<p>Maybe there's nothing that needs to be done there</p>



<a name="212984636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984636">(Oct 11 2020 at 22:28)</a>:</h4>
<p>But that lemma could be deleted after your tactic comes in, is that the idea?</p>



<a name="212984659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984659">(Oct 11 2020 at 22:29)</a>:</h4>
<p>AFAIR, <code>subsingleton E ∨ _</code> is used as a technical assumption in the proof of the inverse function theorem.</p>



<a name="212984661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984661">(Oct 11 2020 at 22:29)</a>:</h4>
<p>And the lemma's uses, in places like <a href="https://github.com/leanprover-community/mathlib/blob/952a407c2ea89c154d718aa1f92fd988f2b5d338/src/analysis/calculus/inverse.lean#L379">https://github.com/leanprover-community/mathlib/blob/952a407c2ea89c154d718aa1f92fd988f2b5d338/src/analysis/calculus/inverse.lean#L379</a> , replaced by uses of the tactic?</p>



<a name="212984716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984716">(Oct 11 2020 at 22:30)</a>:</h4>
<p>E.g., in <a href="https://github.com/leanprover-community/mathlib/blob/952a407c2ea89c154d718aa1f92fd988f2b5d338/src/analysis/calculus/inverse.lean#L158">https://github.com/leanprover-community/mathlib/blob/952a407c2ea89c154d718aa1f92fd988f2b5d338/src/analysis/calculus/inverse.lean#L158</a></p>



<a name="212984717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984717">(Oct 11 2020 at 22:30)</a>:</h4>
<p>Snap ... but yes, I meant that in the the inverse function where this lemma is currently used, could you use an improved <code>nontriviality</code> instead?</p>



<a name="212984787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984787">(Oct 11 2020 at 22:32)</a>:</h4>
<p>I did not plan to refactor <code>analysis/calculus/inverse</code>.</p>



<a name="212984849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/4574%20better%20%60nontriviality%60/near/212984849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/4574.20better.20.60nontriviality.60.html#212984849">(Oct 11 2020 at 22:34)</a>:</h4>
<p>And I don't see how can we get rid of this this assumption in the first part of the file.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>