---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.233403.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html">#3403</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204454196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454196">(Jul 20 2020 at 17:57)</a>:</h4>
<p>Pretty simple PR, generalizing the <code>update_*</code> definitions to work with rectangular matrices. Scott Morrison asked if the lemmas should be moved to the <code>data/matrix/basic</code> file. Should both the definitions and lemmas be moved? The <code>update</code> functions aren't used anywhere other than <code>nonsingular_inverse</code>. I am hoping to use them for the Laplace expansion of the determinant, to provide a computation-friendly <code>det</code> definition.</p>



<a name="204454549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454549">(Jul 20 2020 at 18:00)</a>:</h4>
<p>I don't really have an opinion on where they go.</p>



<a name="204454641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454641">(Jul 20 2020 at 18:01)</a>:</h4>
<p>What I find interesting is the <code>decidable_eq</code> hypotheses... with the current state of things in Lean, it is very clear that you want those, in order to make computation work.</p>



<a name="204454804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454804">(Jul 20 2020 at 18:02)</a>:</h4>
<p>However, for proving things, <code>decidable_*</code> is 98% of the time a royal pain. (And sometimes it is really awesome, because <code>dec_trivial</code> will deal with some annoying verification of some proposition in <code>zmod 4</code>...)</p>



<a name="204454863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454863">(Jul 20 2020 at 18:02)</a>:</h4>
<p>I really wonder if we can make these things work better side-by-side. But I might be hijacking this thread too much.</p>



<a name="204454945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204454945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204454945">(Jul 20 2020 at 18:03)</a>:</h4>
<p>Anyway, as it stands... I fear that we will need polynomials for proving things, and different polynomials if we want to compute. And matrices that have good computational behaviour. But different matrices if we want to compute.</p>



<a name="204455025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204455025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204455025">(Jul 20 2020 at 18:04)</a>:</h4>
<p>That seems a waste of time/space/energy</p>



<a name="204455106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204455106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204455106">(Jul 20 2020 at 18:04)</a>:</h4>
<p>It's completely normal in computer algebra systems to have more than one implementation of matrices</p>



<a name="204455136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204455136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204455136">(Jul 20 2020 at 18:05)</a>:</h4>
<p>e.g. one for if you know that the matrix is huge but sparse</p>



<a name="204455630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204455630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204455630">(Jul 20 2020 at 18:08)</a>:</h4>
<p>Totally, and then the <code>update</code> functions (and all other matrix functions) will change depending on the matrix implementation. In the meantime, should <code>update_*</code> be moved to <code>data/matrix/basic</code>? Currently, it's only used in <code>nonsingluar_inverse</code> but maybe will get more use if it is in the general file.</p>



<a name="204455989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204455989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204455989">(Jul 20 2020 at 18:11)</a>:</h4>
<p>But what I'm not so sure about, is whether we should want them to get more use, if they have this <code>decidable_eq</code> instance. We've had the experience with <code>polynomial</code> where everything was slow and unusable and broken, and we couldn't prove a thing. Until we ripped out the <code>decidable_eq</code>s, and made the whole thing <code>noncomputable</code>.</p>



<a name="204456052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204456052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204456052">(Jul 20 2020 at 18:12)</a>:</h4>
<p>So, do we want <code>matrix</code> to be for computations, or for proofs?</p>



<a name="204456500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204456500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204456500">(Jul 20 2020 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> (Just to be clear... I've nothing against computations. They are useful and interesting! But I also care about making it easy to prove things down the road. I wish the two were easier to combine. I see this as a flaw in Lean.)</p>



<a name="204456616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204456616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204456616">(Jul 20 2020 at 18:17)</a>:</h4>
<p>Can it be for both in the meantime? I'm a distant future, it might be a good interface for proving things about algorithms like Astar or alignments like Smith Waterman. If someone wants to prove general statements, they can use linear_map?</p>



<a name="204457198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204457198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204457198">(Jul 20 2020 at 18:22)</a>:</h4>
<p>The idea that proving and computing have different ideal data structures is nothing new. The "standard" approach goes by the name refinement: roughly speaking, prove your theorems in the abstract computational setting and prove transfer properties between that and an execution friendly type. Here's one reference: <a href="http://www-sop.inria.fr/members/Anders.Mortberg/papers/coqeal.pdf">http://www-sop.inria.fr/members/Anders.Mortberg/papers/coqeal.pdf</a></p>



<a name="204457312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204457312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204457312">(Jul 20 2020 at 18:23)</a>:</h4>
<p><a href="https://www.complang.tuwien.ac.at/kps2015/proceedings/KPS_2015_submission_13.pdf">https://www.complang.tuwien.ac.at/kps2015/proceedings/KPS_2015_submission_13.pdf</a></p>



<a name="204458029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204458029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204458029">(Jul 20 2020 at 18:28)</a>:</h4>
<p>so what should the set-up be here? What should <code>polynomial</code> be -- the provy one or the computy one? I guess <code>nat</code> is the provy one...</p>



<a name="204458512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204458512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204458512">(Jul 20 2020 at 18:32)</a>:</h4>
<p>I'm rambling on over here: <a href="#narrow/stream/113488-general/topic/computation.20vs.20proving/near/204457511">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/computation.20vs.20proving/near/204457511</a></p>



<a name="204458549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204458549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204458549">(Jul 20 2020 at 18:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/144837-PR-reviews/topic/.233403/near/204455630">said</a>:</p>
<blockquote>
<p>Totally, and then the <code>update</code> functions (and all other matrix functions) will change depending on the matrix implementation. In the meantime, should <code>update_*</code> be moved to <code>data/matrix/basic</code>? Currently, it's only used in <code>nonsingluar_inverse</code> but maybe will get more use if it is in the general file.</p>
</blockquote>
<p>I'm sorry, but I don't feel qualified to answer this... <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span> <span aria-label="oops" class="emoji emoji-1f643" role="img" title="oops">:oops:</span></p>



<a name="204504456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233403/near/204504456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233403.html#204504456">(Jul 21 2020 at 01:32)</a>:</h4>
<p>I don't see any argument for keeping them in <code>nonsingular_inverse</code>. Definitions/lemmas should go in the first place they can. (Sometimes this rule requires adding a new intermediate file, to avoid making a file too big, or adding otherwise unnecessary imports.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>