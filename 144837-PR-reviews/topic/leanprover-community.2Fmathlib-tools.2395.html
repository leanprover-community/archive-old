---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html">leanprover-community/mathlib-tools#95</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228577614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228577614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228577614">(Mar 03 2021 at 11:42)</a>:</h4>
<p>This one's been there for a while now. It's motivated in part by these threads from people with broken python setups:</p>
<ul>
<li><a href="#narrow/stream/113488-general/topic/leanproject.20and.20python.203.2E9.2E1/near/227411279">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject.20and.20python.203.2E9.2E1/near/227411279</a></li>
<li><a href="#narrow/stream/113488-general/topic/leanproject/near/221511733">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject/near/221511733</a></li>
</ul>
<p>And partly by things being slow for me on windows. <span class="user-mention" data-user-id="110031">@Patrick Massot</span>, mind taking a look?</p>



<a name="228664825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228664825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228664825">(Mar 03 2021 at 20:44)</a>:</h4>
<p>I am really reluctant to uglify the code in order to allow broken python setup. I'd be ok if this affect all Windows users. Can other Windows user tell us how much time it takes to run <code>leanproject -h</code>?</p>



<a name="228665254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228665254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228665254">(Mar 03 2021 at 20:47)</a>:</h4>
<p>I'd expect the ~40% speed improvement to apply on all platforms</p>



<a name="228665340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228665340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228665340">(Mar 03 2021 at 20:48)</a>:</h4>
<p>And I'd argue this is only really two lines of uglification</p>



<a name="228665455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228665455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228665455">(Mar 03 2021 at 20:48)</a>:</h4>
<p>But thanks for taking a look!</p>



<a name="228670028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228670028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228670028">(Mar 03 2021 at 21:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">Measure</span><span class="bp">-</span><span class="n">Command</span> <span class="o">{</span> <span class="n">leanproject</span> <span class="bp">-</span><span class="n">h</span> <span class="o">}</span>

<span class="n">Seconds</span>           <span class="o">:</span> <span class="mi">0</span>
<span class="n">Milliseconds</span>      <span class="o">:</span> <span class="mi">641</span>
</code></pre></div>



<a name="228674340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228674340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228674340">(Mar 03 2021 at 21:46)</a>:</h4>
<p>Any chance you could time the branch too?</p>



<a name="228675012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228675012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228675012">(Mar 03 2021 at 21:51)</a>:</h4>
<p>If you can give me detailed instructions on how to do this without breaking my setup, yes, sure.</p>



<a name="228675812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228675812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228675812">(Mar 03 2021 at 21:57)</a>:</h4>
<p>I found a way to do it. Time goes down to 467 Milliseconds. In practice, both are essentially instant. On a laptop which is not blazingly fast.</p>



<a name="228676143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228676143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228676143">(Mar 03 2021 at 21:59)</a>:</h4>
<p>This was from a powershell console, but from a git bash the figures are essentially the same (0.671s vs 0.456s)</p>



<a name="228676814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228676814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228676814">(Mar 03 2021 at 22:04)</a>:</h4>
<p>Half a second is a long way from instant for doing nothing at all</p>



<a name="228676873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228676873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228676873">(Mar 03 2021 at 22:04)</a>:</h4>
<p>Thanks for testing though</p>



<a name="228730940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/leanprover-community/mathlib-tools%2395/near/228730940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/leanprover-community.2Fmathlib-tools.2395.html#228730940">(Mar 04 2021 at 07:57)</a>:</h4>
<p>Thinking again about this before sleeping yesterday, I thought I've been too strict here. I really don't like importing a module in the middle of a file, but I think your mathlib PR reviewing work deserves some effort on the tooling side. I still recommend you try to understand why your python is so slow, but I'll merge this anyway.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>