---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html">#3221 remove universe annotations in category_theory</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202266781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202266781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202266781">(Jun 29 2020 at 02:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, just letting you know about this --- thanks to improvements in Lean, we can essentially remove all the <code>.{v}</code> universe annotations needed to operate categories, except in the <code>variables {C : Type u} [category.{v} C]</code> lines. It's a big improvement in ergonomics!</p>



<a name="202266789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202266789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202266789">(Jun 29 2020 at 02:25)</a>:</h4>
<p>Nice! How did it happen?</p>



<a name="202266845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202266845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202266845">(Jun 29 2020 at 02:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, do you know which commits to Lean fixed this? I don't actually know who was responsible, but it's lovely.</p>



<a name="202267030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202267030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202267030">(Jun 29 2020 at 02:33)</a>:</h4>
<p>and <code>include \mathcal{C}</code> is gone as well?</p>



<a name="202267069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202267069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202267069">(Jun 29 2020 at 02:34)</a>:</h4>
<p>Yup!</p>



<a name="202267073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202267073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202267073">(Jun 29 2020 at 02:34)</a>:</h4>
<p>Nice!</p>



<a name="202295375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202295375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202295375">(Jun 29 2020 at 11:03)</a>:</h4>
<p>No, I don't know about this change. (I only know about the <code>include</code> one.) Curious.</p>



<a name="202296551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202296551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202296551">(Jun 29 2020 at 11:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span>, do you know what changed in Lean so that suddenly we never need to write <code>.{v}</code> in the category theory library? I'm guessing you changed something about how universe metavariables get unified during typeclass search?</p>



<a name="202296576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202296576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202296576">(Jun 29 2020 at 11:19)</a>:</h4>
<p>(Thank you in advance, presuming it was you. :-) I just want to give due credit in the mathlib PR.)</p>



<a name="202298789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202298789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202298789">(Jun 29 2020 at 11:51)</a>:</h4>
<p>I did not make any intentional changes in that direction.  Do you recall why you had to add the <code>.{v}</code> in the first place?  The only related change I can think of that I did in core was to support <code>variables {α β : Type*}</code>.</p>



<a name="202303781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202303781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202303781">(Jun 29 2020 at 12:45)</a>:</h4>
<p>It used it fail to pick up the <code>category.{v} C</code> instance available, because it was searching for <code>category.{?l_1} C</code>.</p>



<a name="202303790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202303790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202303790">(Jun 29 2020 at 12:45)</a>:</h4>
<p>Now it just unifies happily.</p>



<a name="202303852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202303852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202303852">(Jun 29 2020 at 12:46)</a>:</h4>
<p>That change may well have happened a while back (months?!)</p>



<a name="202304078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202304078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202304078">(Jun 29 2020 at 12:48)</a>:</h4>
<p>This might also be an unintentional side effect of improving type-class inference.  It should have already picked up this instance before (according to the comments), but it is possible I happened to fix this when I allowed type-class search on goals with metavariables.</p>



<a name="202304240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202304240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202304240">(Jun 29 2020 at 12:50)</a>:</h4>
<p>That sounds more plausible than the <code>variables {α β : Type*}</code> commit.</p>



<a name="202305535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202305535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202305535">(Jun 29 2020 at 13:03)</a>:</h4>
<p>It seems plausible that this was unintentional. I was surprised no one had told me about this already. :-) Alena was fixing something in the category theory tutorial, and I went to find a good example of why <code>.{v}</code> was necessary for her and ... couldn't find any.</p>



<a name="202330423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202330423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202330423">(Jun 29 2020 at 15:58)</a>:</h4>
<p>Huh! I did need some universe annotations recently but I haven't checked if they disappear in the most recent versions of lean/mathlib</p>



<a name="202330493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233221%20remove%20universe%20annotations%20in%20category_theory/near/202330493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233221.20remove.20universe.20annotations.20in.20category_theory.html#202330493">(Jun 29 2020 at 15:59)</a>:</h4>
<p><a href="#narrow/stream/113489-new-members/topic/universe.20levels">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/universe.20levels</a> (here, for context)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>