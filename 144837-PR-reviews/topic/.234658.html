---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.234658.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html">#4658</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214856055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214856055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214856055">(Oct 28 2020 at 15:50)</a>:</h4>
<p>In this PR I am also trying to extend the definition of dual module to semimodules. Changing all modules and rings to semimodules and semirings makes the definition work but breaks stuff when things are stated for vector spaces (which is weird cause there is a coercion of vector space to semimodule as much as there is one to module). Can someone who is familiar with the linear algebra section take a look?</p>



<a name="214858179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214858179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214858179">(Oct 28 2020 at 16:03)</a>:</h4>
<p>Not related to your question here, but shouldn't the rank of the vector bundle be allowed to vary?</p>



<a name="214859467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214859467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214859467">(Oct 28 2020 at 16:11)</a>:</h4>
<p>I guess as the comment on <code>topological_vector_bundle</code> says, this isn't so much a "topological vector bundle" as a "topological vector bundle with fiber <code>F</code>".</p>



<a name="214860872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214860872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214860872">(Oct 28 2020 at 16:20)</a>:</h4>
<p>Wouldn't this complicate things? If you let the rank vary, you still get constant rank on connected components, and the transition maps (i.e. the Cech cocycle and/or descent data) describing the vector bundle becomes more complicated.</p>



<a name="214861147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214861147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214861147">(Oct 28 2020 at 16:22)</a>:</h4>
<p>But I think you have to let the rank vary to get correct statements for things like topological K-theory and Swan's theorem (unless you put "of rank <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>" on the projective module side too)</p>



<a name="214861265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214861265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214861265">(Oct 28 2020 at 16:23)</a>:</h4>
<p>You can sort of ignore this in informal math for the reason you gave</p>



<a name="214861443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214861443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214861443">(Oct 28 2020 at 16:24)</a>:</h4>
<p>but we don't have a <code>just_look_at_one_connected_component_at_a_time</code> tactic in Lean</p>



<a name="214862115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214862115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214862115">(Oct 28 2020 at 16:29)</a>:</h4>
<p>I mean, since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mn>0</mn></msup><mo stretchy="false">(</mo><mo>∗</mo><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">K^0(*) = \mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">∗</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span>, we must have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mn>0</mn></msup><mo stretchy="false">(</mo><mi>n</mi><mtext> </mtext><mrow><mi mathvariant="normal">p</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">s</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><msup><mi mathvariant="double-struck">Z</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">K^0(n\,\mathrm{points}) = \mathbb{Z}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathrm">p</span><span class="mord mathrm">o</span><span class="mord mathrm">i</span><span class="mord mathrm">n</span><span class="mord mathrm">t</span><span class="mord mathrm">s</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>, because that's how cohomology theories work, and those elements in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">Z</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\mathbb{Z}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> that aren't constant are supposed to be represented by (formal differences of) vector bundles of nonconstant rank.</p>



<a name="214862282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214862282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214862282">(Oct 28 2020 at 16:30)</a>:</h4>
<p>I think for the purposes of K-theory, you can take some appropriate categorical completion of (constant rank) vector bundles.</p>



<a name="214862329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214862329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214862329">(Oct 28 2020 at 16:30)</a>:</h4>
<p>For example on 2 points you can look at the map which contracts everything over one of the points to 0 (and is the identity over the other point), and the "kernel" will have nonconstant rank.</p>



<a name="214862961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214862961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214862961">(Oct 28 2020 at 16:35)</a>:</h4>
<p>Are you saying basically work with locally constant rank subbundles of constant rank bundles?</p>



<a name="214862997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214862997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214862997">(Oct 28 2020 at 16:35)</a>:</h4>
<p>Yeah, I guess so.</p>



<a name="214863022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863022">(Oct 28 2020 at 16:35)</a>:</h4>
<p>This kind of sounds more complicated than just letting the rank vary in the definition of bundle in the first place, though?</p>



<a name="214863040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863040">(Oct 28 2020 at 16:35)</a>:</h4>
<p>Or take some completion of the category using idempotents, or something like that.</p>



<a name="214863487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863487">(Oct 28 2020 at 16:38)</a>:</h4>
<p>I don't know. I think in practice when working with vector bundles it's useful to use cocycles and descent data to describe your vector bundles. If and when we get K-theory, the actual construction of K-theory shouldn't matter anyway, so what's the harm in doing some categorical magic tricks before constructing K(X)?</p>



<a name="214863754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863754">(Oct 28 2020 at 16:40)</a>:</h4>
<p>I don't understand... doesn't the descent data also have an object for each piece of the covering?</p>



<a name="214863784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863784">(Oct 28 2020 at 16:40)</a>:</h4>
<p>Like, it's kind of weird that there is a fixed model space <code>F</code> at all</p>



<a name="214863820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214863820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214863820">(Oct 28 2020 at 16:40)</a>:</h4>
<p>Yeah, but the transition maps take values in GL_n for a fixed n.</p>



<a name="214864051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864051">(Oct 28 2020 at 16:42)</a>:</h4>
<p>Okay, I would say instead they are linear isomorphisms between two vector spaces (which, if the open sets overlap, must have the same dimension, and then if you like you can choose a basis for each, and write down a matrix)</p>



<a name="214864203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864203">(Oct 28 2020 at 16:43)</a>:</h4>
<p>I'm not sure whether this fixed model space thing really works for operations on vector bundles</p>



<a name="214864312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864312">(Oct 28 2020 at 16:44)</a>:</h4>
<p>If I have a map between two vector bundles and the dimension of its kernel is (normally locally, but okay let's skip it) constant, then the kernel is a vector bundle</p>



<a name="214864390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864390">(Oct 28 2020 at 16:44)</a>:</h4>
<p>is that operation something that makes sense in the "topological vector bundle with fiber <code>F</code>" world?</p>



<a name="214864413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864413">(Oct 28 2020 at 16:44)</a>:</h4>
<p>obviously with a few different <code>F</code>s involved</p>



<a name="214864831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214864831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214864831">(Oct 28 2020 at 16:48)</a>:</h4>
<p>Let's say <code>F</code> is the model space for the vector bundle where we take the kernel. At a particular point <code>x</code> we can identify the bundle near <code>x</code> with the trivial one with fiber <code>x</code>, and then at the specific point <code>x</code> we could look at the kernel, which will be some subspace of <code>F</code>; but already at other points nearby the kernel will be a different subspace of <code>F</code></p>



<a name="214865311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214865311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214865311">(Oct 28 2020 at 16:51)</a>:</h4>
<p>So for this application, it seems problematic to index the type of topological vector bundles on the model space <code>F</code></p>



<a name="214866306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214866306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214866306">(Oct 28 2020 at 16:58)</a>:</h4>
<p>Related: should the model space of a manifold be permitted to vary?<br>
<a href="#narrow/stream/116395-maths/topic/Manifold.20constructors">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Manifold.20constructors</a></p>



<a name="214867804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214867804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214867804">(Oct 28 2020 at 17:08)</a>:</h4>
<p>I think I can easily modify the definition to allow this by taking <code>F :  index_type \to Type*</code></p>



<a name="214867830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214867830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214867830">(Oct 28 2020 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span></p>



<a name="214868128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214868128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214868128">(Oct 28 2020 at 17:10)</a>:</h4>
<p>Curiously, for a manifold, I think you can already make the model space vary, in the sense that you could take a manifold modeled on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∐</mo><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></msub><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\coprod_{n \ge 0} \mathbb{R}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∐</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>. Right?</p>



<a name="214878941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214878941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214878941">(Oct 28 2020 at 18:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214868128">said</a>:</p>
<blockquote>
<p>Curiously, for a manifold, I think you can already make the model space vary, in the sense that you could take a manifold modeled on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∐</mo><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></msub><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\coprod_{n \ge 0} \mathbb{R}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∐</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>. Right?</p>
</blockquote>
<p>I guess this is correct for charted spaces but not for smooth_manifolds_with_corners</p>



<a name="214879037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879037">(Oct 28 2020 at 18:28)</a>:</h4>
<p>In any case I can extend the definition, I'll just wait for Sébastien's opinion as well  just to be sure</p>



<a name="214879113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879113">(Oct 28 2020 at 18:28)</a>:</h4>
<p>In the while could someone take a quick look at the <code>linear_algebra.dual</code> problem? I think that someone who has experience with that part of the library would identify the problem easily</p>



<a name="214879182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879182">(Oct 28 2020 at 18:29)</a>:</h4>
<p>Do you have a branch of mathlib where you tried making this change?</p>



<a name="214879229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879229">(Oct 28 2020 at 18:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214868128">said</a>:</p>
<blockquote>
<p>Curiously, for a manifold, I think you can already make the model space vary, in the sense that you could take a manifold modeled on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∐</mo><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></msub><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\coprod_{n \ge 0} \mathbb{R}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∐</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>. Right?</p>
</blockquote>
<p>I think the real problem would be in infinite dimension.</p>



<a name="214879418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879418">(Oct 28 2020 at 18:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214879182">said</a>:</p>
<blockquote>
<p>Do you have a branch of mathlib where you tried making this change?</p>
</blockquote>
<p>Yes it is the one of the PR: since this and vector bundles are still unlinked if you just deal with the dual file you can ignore the other changes of the PR</p>



<a name="214879419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879419">(Oct 28 2020 at 18:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214879229">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214868128">said</a>:</p>
<blockquote>
<p>Curiously, for a manifold, I think you can already make the model space vary, in the sense that you could take a manifold modeled on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∐</mo><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></msub><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\coprod_{n \ge 0} \mathbb{R}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∐</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>. Right?</p>
</blockquote>
<p>I think the real problem would be in infinite dimension.</p>
</blockquote>
<p><code>Σ (α : Type*), (α → ℝ)</code>?</p>



<a name="214879672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879672">(Oct 28 2020 at 18:32)</a>:</h4>
<p>But you want a normed space structure, not just the bare <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mi>α</mi></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span></span></span></span></span></span></span></span> :)</p>



<a name="214879762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879762">(Oct 28 2020 at 18:33)</a>:</h4>
<p>Oh I see. But you can still take a giant sigma type over all normed vector spaces.</p>



<a name="214879941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879941">(Oct 28 2020 at 18:35)</a>:</h4>
<p>I mean, we're just having fun here, right?  This is obviously not the right way to use the manifolds library :)</p>



<a name="214879992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214879992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214879992">(Oct 28 2020 at 18:35)</a>:</h4>
<p>But I think there are still problems -- eg multiple norms on one space.</p>



<a name="214880055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880055">(Oct 28 2020 at 18:36)</a>:</h4>
<p>Like the various norms on the space of bounded linear operators.</p>



<a name="214880207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880207">(Oct 28 2020 at 18:37)</a>:</h4>
<p>Concerning the issues with dual for this PR. First, if you change lines 87-88 to this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">to_dual</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">module.dual</span> <span class="n">K</span> <span class="n">V</span> <span class="o">:=</span>
<span class="n">h.constr</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span> <span class="n">h.constr</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">w</span><span class="o">,</span> <span class="k">if</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">v</span> <span class="k">then</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div>

<p>then lean is happy with that line.</p>



<a name="214880344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880344">(Oct 28 2020 at 18:38)</a>:</h4>
<p>But it looks like the other issues later on, because lean doesn't know that <code>dual R M</code> is an additive abelian group when <code>R</code> is a ring and not just a semiring.</p>



<a name="214880373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880373">(Oct 28 2020 at 18:39)</a>:</h4>
<p>This seems similar to the issues regarding defining a ring structure for an algebra over a semiring which just so happens to be a ring.</p>



<a name="214880508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880508">(Oct 28 2020 at 18:40)</a>:</h4>
<p>Ok thank you very much for your help!</p>



<a name="214880526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880526">(Oct 28 2020 at 18:40)</a>:</h4>
<p><code>@[derive [add_comm_monoid, semimodule R]] def dual := M →ₗ[R] R</code> -- does this @derive business mean "add an instance"?</p>



<a name="214880578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880578">(Oct 28 2020 at 18:41)</a>:</h4>
<p>If so then it's probably just a matter of adding more instances (the change on line 39 is in some sense removing some stuff)</p>



<a name="214880581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880581">(Oct 28 2020 at 18:41)</a>:</h4>
<p>I added the following after the definition of <code>dual</code> and lean is now happy with the file.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span> <span class="n">N</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">dual</span> <span class="n">S</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">unfold</span> <span class="n">dual</span><span class="o">,</span> <span class="n">apply_instance</span><span class="o">}</span>
</code></pre></div>



<a name="214880760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880760">(Oct 28 2020 at 18:43)</a>:</h4>
<p>Thank you very much!</p>



<a name="214880784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214880784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214880784">(Oct 28 2020 at 18:43)</a>:</h4>
<p>No problem :)</p>



<a name="214881024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214881024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214881024">(Oct 28 2020 at 18:45)</a>:</h4>
<p>In any case the fiber of a topological fiber bundle is not allowed to vary. Should we change that as well? Or should we only allow constant rank vector bundles to be fiber bundles?</p>



<a name="214881505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214881505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214881505">(Oct 28 2020 at 18:49)</a>:</h4>
<p>Personally I don't think it matters too much, as long as we can write down the correct morphisms between vector bundles with different fibres. But <span class="user-mention" data-user-id="110032">@Reid Barton</span> might disagree.</p>



<a name="214881534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214881534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214881534">(Oct 28 2020 at 18:49)</a>:</h4>
<p>Aren't you in the UK now? So it's fibre bundle, right? :-) It's interesting -- one of the first examples of a fiber bundle in Wikipedia is the tangent bundle of a manifold [looks at Wikipedia page on manifolds] -- oh! There is a difference of opinions as to what a manifold is? (is the disjoint union of a line and a plane a manifold?)</p>



<a name="214881788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214881788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214881788">(Oct 28 2020 at 18:51)</a>:</h4>
<p>I've lived in the US, the UK and now Canada, and I'm completely confused about whether it's fibre or fiber.</p>



<a name="214881876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214881876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214881876">(Oct 28 2020 at 18:51)</a>:</h4>
<p>So does a fibre bundle have to have a fixed fibre? What about a vectro bundle?</p>



<a name="214882126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882126">(Oct 28 2020 at 18:53)</a>:</h4>
<p>I'm certainly not a differential geometre but it seems to me that the definition of vector bundle on Wikipedia allows different dimensions at different points, but the definition of fiber bundle doesn't.</p>



<a name="214882275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882275">(Oct 28 2020 at 18:54)</a>:</h4>
<p>"Often the definition of a vector bundle includes that the rank is well defined" -- geez -- you guys should sort your definitions out!</p>



<a name="214882289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882289">(Oct 28 2020 at 18:54)</a>:</h4>
<p>My experience with manifolds shouldn't count for anything, but it seems much more common to really talk about "an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>-manifold" in a way that makes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> explicit (and therefore, constant), so that the union of a line and a plane isn't a manifold</p>



<a name="214882301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882301">(Oct 28 2020 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214882126">said</a>:</p>
<blockquote>
<p>I'm certainly not a differential geometre but it seems to me that the definition of vector bundle on Wikipedia allows different dimensions at different points, but the definition of fiber bundle doesn't.</p>
</blockquote>
<p>You're a numbre theorist, right?</p>



<a name="214882351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882351">(Oct 28 2020 at 18:55)</a>:</h4>
<p>My two cents on this. Manifolds have locally constant dimension, but if they are not connected they could have non-constant dimension globally. I would say that half of the books (or slightly more) require constant dimension globally in the definition, half of the books allow varying dimension, but in practice all of them work with constant dimension manifolds, as do 99.9% of the math papers dealing with manifolds. As allowing varying dimension would be much more painful for essentially no gain, I vote for constant dimension.</p>
<p>As for vector bundles, it is a little bit the same story, except that as Reid points out for <code>K</code>-theory you may want bundles with varying dimension over a non-connected space. My impression though is that allowing varying dimension will be rather painful, so I'd vote for having the main definitions working with constant dimension (and constant model vector space -- in finite dimension, you can always take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>), and defining <code>K</code>-theory first for a connected space, and then taking sums over the connected components.</p>



<a name="214882423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882423">(Oct 28 2020 at 18:56)</a>:</h4>
<p>But I'm used to the rank of a vector bundle being allowed to change on different components. It's the definition in Atiyah's book on K-theory and in Swan's paper on, well, Swan's theorem.</p>



<a name="214882595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882595">(Oct 28 2020 at 18:57)</a>:</h4>
<p>The reference book on fiber bundle is still Steenrod, and the model space is definitely fixed, because we want a fixed structure group.</p>



<a name="214882747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882747">(Oct 28 2020 at 18:58)</a>:</h4>
<p>If you define K-theory as the product over connected components then there will be more complications when you want to define the map in K-theory induced by a continuous map, and prove that this construction commutes with composition</p>



<a name="214882773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882773">(Oct 28 2020 at 18:58)</a>:</h4>
<p>For fiber bundles I agree the fiber is fixed.</p>



<a name="214882847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214882847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214882847">(Oct 28 2020 at 18:59)</a>:</h4>
<p>Sure, there will be pain at some point. I'd rather see the pain localized in <code>K</code>-theory only instead of spreading everywhere.</p>



<a name="214883351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214883351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214883351">(Oct 28 2020 at 19:02)</a>:</h4>
<p>The thing is, there will already be some categorical gymnastics necessary when defining K-theory. And assuming we have a flexible enough notion of morphisms of vector bundles (of constant rank), you can formally add what you need (e.g. using idempotent morphisms) before going to construct K-theory.</p>



<a name="214884004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884004">(Oct 28 2020 at 19:07)</a>:</h4>
<p>I mean, what I think will happen most likely is that the existing topological vector bundles will get ignored by whoever wants to formalize K theory</p>



<a name="214884178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884178">(Oct 28 2020 at 19:09)</a>:</h4>
<p>because there's some basic stuff about vector bundles to be done first, and the sources I know work with this definition where the vector space varies</p>



<a name="214884681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884681">(Oct 28 2020 at 19:14)</a>:</h4>
<p>What's the problem of working with the category of pairs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(E,e)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">e</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> is a (constant rank) vector bundle and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>:</mo><mi>E</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">e : E \to E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> is an idempotent morphism?</p>



<a name="214884725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884725">(Oct 28 2020 at 19:15)</a>:</h4>
<p>I guess there's an issue with equality</p>



<a name="214884737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884737">(Oct 28 2020 at 19:15)</a>:</h4>
<p>but there usually is in type theory</p>



<a name="214884743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214884743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214884743">(Oct 28 2020 at 19:15)</a>:</h4>
<p>But you never want to speak about equality in category theory anyway</p>



<a name="214900108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214900108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214900108">(Oct 28 2020 at 21:29)</a>:</h4>
<p>I personally did not study K-theory yet and therefore I do not, for what I intend to formalize later, need that vector bundle have fibers that vary. However I think there is a way not too painful to save both. What I was planning to do after what Reid said was to define the class <code>vector_bundle</code> and the class <code>cvector_bundle</code> (c for "constant rank") and define an instance of <code>cvector_bundle</code> as vector bundle. <code>cvector_bundle</code> would be as it is now, but <code>vector_bundle</code> would be defined this way:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">{</span><span class="n">I</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">E</span> <span class="n">x</span><span class="o">)]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="n">E</span> <span class="n">x</span><span class="o">)]</span>
<span class="o">[</span><span class="n">topological_space</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="o">(</span><span class="n">total_space</span> <span class="n">E</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="n">F</span> <span class="n">x</span><span class="o">)]</span>

<span class="sd">/-- Topological vector bundle. -/</span>
<span class="kd">class</span> <span class="n">topological_vector_bundle</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fiber_index_at</span> <span class="o">[]</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span>
<span class="o">(</span><span class="n">trivialization_at</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="o">(</span><span class="n">vector_bundle_trivialization</span> <span class="n">R</span> <span class="n">E</span> <span class="o">(</span><span class="n">F</span> <span class="o">(</span><span class="n">fiber_index_at</span> <span class="n">b</span><span class="o">))))</span>
<span class="o">(</span><span class="n">mem_trivialization_source</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">total_space</span> <span class="n">E</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">trivialization_at</span> <span class="n">x.1</span><span class="o">)</span><span class="bp">.</span><span class="n">source</span><span class="o">)</span>
</code></pre></div>

<p>so that people who only care about constant rank bundles can only deal with them but results that are valid for both can be used for both. Again, I don't need this, but it could still be a way out: if this is not needed though I am happy to stick to the current PR.</p>



<a name="214900841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214900841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214900841">(Oct 28 2020 at 21:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214881534">said</a>:</p>
<blockquote>
<p>Aren't you in the UK now? So it's fibre bundle, right? :-) It's interesting -- one of the first examples of a fiber bundle in Wikipedia is the tangent bundle of a manifold [looks at Wikipedia page on manifolds] -- oh! There is a difference of opinions as to what a manifold is? (is the disjoint union of a line and a plane a manifold?)</p>
</blockquote>
<p>I am in Paris haha so I guess it'll be <code>fibré_vectoriel</code> sorry for people who do not have accents in their keyboards <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="214901016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214901016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214901016">(Oct 28 2020 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214881788">said</a>:</p>
<blockquote>
<p>I've lived in the US, the UK and now Canada, and I'm completely confused about whether it's fibre or fiber.</p>
</blockquote>
<p>Isn't there a convention in mathlib whether to adopt British or American English?</p>



<a name="214901672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214901672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214901672">(Oct 28 2020 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicolò Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214901016">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214881788">said</a>:</p>
<blockquote>
<p>I've lived in the US, the UK and now Canada, and I'm completely confused about whether it's fibre or fiber.</p>
</blockquote>
<p>Isn't there a convention in mathlib whether to adopt British or American English?</p>
</blockquote>
<p>I have no idea.</p>



<a name="214906416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214906416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214906416">(Oct 28 2020 at 22:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214884681">said</a>:</p>
<blockquote>
<p>What's the problem of working with the category of pairs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(E,e)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">e</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> is a (constant rank) vector bundle and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>:</mo><mi>E</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">e : E \to E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> is an idempotent morphism?</p>
</blockquote>
<p>At that point you could even get rid of the vector bundle <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> and just work with a big trivial bundle, and make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">e</span></span></span></span> a matrix. I'm pretty sure that would work in the sense of giving the right answer at least on compact Hausdorff spaces. What I don't know off-hand is whether you can set up the theory from the start that way.</p>



<a name="214907477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/214907477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#214907477">(Oct 28 2020 at 22:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214901672">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="267205">Nicolò Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214901016">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214881788">said</a>:</p>
<blockquote>
<p>I've lived in the US, the UK and now Canada, and I'm completely confused about whether it's fibre or fiber.</p>
</blockquote>
<p>Isn't there a convention in mathlib whether to adopt British or American English?</p>
</blockquote>
<p>I have no idea.</p>
</blockquote>
<p>Sorry I quoted your message but it was meant to be a question for everyone</p>



<a name="215027145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/215027145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#215027145">(Oct 29 2020 at 21:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicolò Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.234658/near/214900108">said</a>:</p>
<blockquote>
<p>However I think there is a way not too painful to save both. What I was planning to do after what Reid said was to define the class <code>vector_bundle</code> and the class <code>cvector_bundle</code> (c for "constant rank") and define an instance of <code>cvector_bundle</code> as vector bundle. </p>
</blockquote>
<p>If it works fine, then that's a great move. There are some things that you won't be able to do for <code>vector_bundle</code> (for instance put a manifold structure if the base is a manifold, or see it as a fiber bundle), so these should only be done for <code>cvector_bundle</code>s, but otherwise doing things in the greatest generality is a good idea!</p>



<a name="215103383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/215103383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#215103383">(Oct 30 2020 at 14:42)</a>:</h4>
<p>Things will probably need to be done twice anyways. I mean take for example the result that the homomorphism bundle is a vector bundle. You still want to have that the homomorphisms bundle of constant fiber bundles is a constant fiber bundles. It's not a bad thing because you are adding more math. I don't know though if there's a way to recover one situation from the other and just add the missing bit of the proof, but I think that this way is not too painful anyways.</p>



<a name="230804598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/230804598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#230804598">(Mar 18 2021 at 02:19)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span>'s PR <a href="https://github.com/leanprover-community/mathlib/issues/4658">#4658</a> on topological vector bundles has been on the <a href="https://bit.ly/3kaztxO">#queue</a> for a week, with <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> unable to merge it because he contributed a substantial rewrite.</p>
<p>I've made some suggestions now, but we should make sure this gets merged soon, as it's been waiting a long time.</p>



<a name="231627355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234658/near/231627355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234658.html#231627355">(Mar 24 2021 at 12:51)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110087">@Scott Morrison</span> ! I applied all of your remaining suggestions, and I added your lemma (thank you very much for the time you dedicated to that PR). Do you think you could have a final look in the next days?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>