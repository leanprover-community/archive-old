---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html">#12564 to_additive and units</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="274831726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274831726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274831726">(Mar 10 2022 at 13:07)</a>:</h4>
<p>Dear All,</p>
<p>in <a href="https://github.com/leanprover-community/mathlib/pull/12564">#12564</a>, I made a trivial addition to <code>to_additive</code> to support generating the intended names in the case of <code>units</code> and <code>is_unit</code>, respectively producing <code>add_units</code> and <code>is_add_unit</code>.</p>
<p>(Really, the current status of the PR only adds support for <code>is_unit</code>.  In my local branch I added both</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="n">is_comm</span> <span class="o">(</span><span class="s2">"unit"</span> <span class="o">::</span> <span class="n">s</span><span class="o">)</span>        <span class="o">:=</span> <span class="o">(</span><span class="s2">"add_"</span> <span class="bp">++</span> <span class="n">add_comm_prefix</span> <span class="n">is_comm</span> <span class="s2">"unit"</span><span class="o">)</span>    <span class="o">::</span> <span class="n">tr</span> <span class="n">ff</span> <span class="n">s</span>
<span class="bp">|</span> <span class="n">is_comm</span> <span class="o">(</span><span class="s2">"units"</span> <span class="o">::</span> <span class="n">s</span><span class="o">)</span>       <span class="o">:=</span> <span class="o">(</span><span class="s2">"add_"</span> <span class="bp">++</span> <span class="n">add_comm_prefix</span> <span class="n">is_comm</span> <span class="s2">"units"</span><span class="o">)</span>    <span class="o">::</span> <span class="n">tr</span> <span class="n">ff</span> <span class="n">s</span>
</code></pre></div>
<p>I am waiting for CI to approve of the first change, before pushing also the second one.)</p>
<p>I am not sure if this is desirable and I would welcome any comment!</p>



<a name="274831765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274831765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274831765">(Mar 10 2022 at 13:08)</a>:</h4>
<p>Moreover, since this is the first time that I actually change a <code>meta def</code>, I may very well have messed up badly!  Do let me know if you have better suggestions!</p>
<p>Finally, is there support for any other similar dictionary change?</p>



<a name="274853555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274853555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274853555">(Mar 10 2022 at 15:49)</a>:</h4>
<p>Looks great to me, lets see if CI is happy</p>



<a name="274854594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274854594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274854594">(Mar 10 2022 at 15:55)</a>:</h4>
<p>On my machine, it builds with just some auto-generated names to be removed.</p>



<a name="274854599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274854599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274854599">(Mar 10 2022 at 15:55)</a>:</h4>
<p>Incidentally, I saw that there are a couple of uses of <code>to_additive</code> with <code>center</code>: should I look to add those as well as auto-generated names?  They did not seem too straightforward, so maybe this is a reason not to do it.</p>



<a name="274856895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312564%20to_additive%20and%20units/near/274856895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312564.20to_additive.20and.20units.html#274856895">(Mar 10 2022 at 16:10)</a>:</h4>
<p>CI finished with an error, but is not letting me know what is wrong...</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>