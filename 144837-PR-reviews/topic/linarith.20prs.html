---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/linarith.20prs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html">linarith prs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200221607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200221607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200221607">(Jun 09 2020 at 12:47)</a>:</h4>
<p>We have two <code>linarith</code> PRs now: <a href="https://github.com/leanprover-community/mathlib/issues/2637">#2637</a> from <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> adds some nonlinear preprocessing and <a href="https://github.com/leanprover-community/mathlib/issues/2995">#2995</a> improves parsing into a linear structure. These are independent but the latter makes the former much more useful. A third change is on a branch (<a href="https://github.com/leanprover-community/mathlib/tree/linarith-speedup">https://github.com/leanprover-community/mathlib/tree/linarith-speedup</a>), it changes the representation of linear combinations to speed things up.</p>
<p>I also want to refactor the frontend because it's turned into a mess.</p>
<p>I propose that (when they're ready) we merge, in order, <a href="https://github.com/leanprover-community/mathlib/issues/2995">#2995</a>, the branch, and <a href="https://github.com/leanprover-community/mathlib/issues/2637">#2637</a>. Once the first two are in, there are interesting tests to add for the third. Further <code>nlinarith</code> improvements will be possible after refactoring the frontend. Does this sound okay? Trying to do the refactor while three semi-dependent PRs are floating around sounds like merge conflict hell.</p>



<a name="200553276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200553276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200553276">(Jun 11 2020 at 14:41)</a>:</h4>
<p>I implemented a redundancy filter for the variable elimination step. Should have done this a long time ago. It has some extra overhead, so there's no effective change in speed on the old test file. But the <code>nlinarith</code> example goes from 8 seconds to 1.5.</p>



<a name="200553394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200553394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200553394">(Jun 11 2020 at 14:42)</a>:</h4>
<p>Consider this a polite request for a review for the outstanding <code>linarith</code> PRs :) this will be yet another "independent" change that will be hard to merge.</p>



<a name="200825653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200825653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200825653">(Jun 14 2020 at 17:30)</a>:</h4>
<p>Two of these are now merged. <a href="https://github.com/leanprover-community/mathlib/issues/2637">#2637</a> (nlinarith) is now updated to show that it can solve some tests. I'd love more tests here, but please confirm that <code>nra</code> solves them in Coq first!</p>



<a name="200825676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200825676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200825676">(Jun 14 2020 at 17:31)</a>:</h4>
<p>Some of the changes I made to <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> 's code in <a href="https://github.com/leanprover-community/mathlib/issues/2637">#2637</a> are temporary. It'll change a lot in the <code>linarith</code> frontend refactor.</p>



<a name="200825721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/200825721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#200825721">(Jun 14 2020 at 17:32)</a>:</h4>
<p>The redundancy filter should be mostly independent of the frontend changes, so I can do those at once.</p>



<a name="201286556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/201286556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#201286556">(Jun 18 2020 at 15:46)</a>:</h4>
<p>There are now 3 open linarith-related PRs (thanks, Rob!): <a href="https://github.com/leanprover-community/mathlib/issues/3079">#3079</a>, <a href="https://github.com/leanprover-community/mathlib/issues/3108">#3108</a>, <a href="https://github.com/leanprover-community/mathlib/issues/3109">#3109</a></p>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3079">#3079</a> looks good to me, but I'm not really fluent in tactic-speak or the details of Fourier-Motzkin. Since it promises a nice speedup and also improves the generated proofs along the way, I think it'd be great to get it merged.</p>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3108">#3108</a> and <a href="https://github.com/leanprover-community/mathlib/issues/3109">#3109</a> introduce some mini-tactics, and they also look ready to me too.</p>



<a name="201289581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/201289581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#201289581">(Jun 18 2020 at 16:07)</a>:</h4>
<p>I wouldn't be surprised if there were bugs in <a href="https://github.com/leanprover-community/mathlib/issues/3079">#3079</a>. But it builds the library and passes the tests; I'm not sure reviews will catch them and I'm not sure what more to check for. I think it's ready for testing in production.</p>



<a name="201289767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/201289767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#201289767">(Jun 18 2020 at 16:09)</a>:</h4>
<p>The next linarith PR will be a massive refactor. Sorry in advance to whoever reviews that! The new tactics in <a href="https://github.com/leanprover-community/mathlib/issues/3108">#3108</a> and <a href="https://github.com/leanprover-community/mathlib/issues/3109">#3109</a> are the most user-facing parts of it though, a lot of it is moving around internals.</p>



<a name="201370872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/linarith%20prs/near/201370872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/linarith.20prs.html#201370872">(Jun 19 2020 at 09:53)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3113">#3113</a> is up (obviously blocked by <a href="https://github.com/leanprover-community/mathlib/issues/3108">#3108</a> and <a href="https://github.com/leanprover-community/mathlib/issues/3109">#3109</a>)! Sorry again for the big diff.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>