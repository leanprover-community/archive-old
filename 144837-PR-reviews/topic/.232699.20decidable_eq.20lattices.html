---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html">#2699 decidable_eq lattices</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197799123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799123">(May 16 2020 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> would like to prove theorems in logic that I don't know much about. But it's clear to me that it's totally legitimate stuff.</p>



<a name="197799157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799157">(May 16 2020 at 14:52)</a>:</h4>
<p>To this end, this PR (re)introduces <code>decidable_eq</code> assumptions for lemmas about lattices, but in the past we've had a huge pain with these.</p>



<a name="197799173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799173">(May 16 2020 at 14:53)</a>:</h4>
<p>What is a good way forward? Should we try <code>decidable_eq</code> again? Or can we have an attribute <code>@[to_decidable]</code> that creates duplicate constructive versions?</p>



<a name="197799178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799178">(May 16 2020 at 14:53)</a>:</h4>
<p>Or maybe the other way round... I guess that's easier</p>



<a name="197799184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799184">(May 16 2020 at 14:53)</a>:</h4>
<p>So <code>@[classical]</code> creates a classical version of a constructive lemma.</p>



<a name="197799230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799230">(May 16 2020 at 14:54)</a>:</h4>
<p>That way we don't have much overhead in writing stuff, and we can support both approaches.</p>



<a name="197799254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799254">(May 16 2020 at 14:55)</a>:</h4>
<p>The underlying problem here is that the definition of <code>fintype</code> is wrong</p>



<a name="197799294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799294">(May 16 2020 at 14:55)</a>:</h4>
<p>There is the question of the naming scheme though. I think the shorter version should be the classical one: in this way, people who don't know what they're doing would not carry around <code>decidable_eq</code> assumptions, but people who really want to remain constructive could do it.</p>



<a name="197799300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799300">(May 16 2020 at 14:55)</a>:</h4>
<p>When dealing with this sort of foundational stuff it feels weird to me to use choice when it's not needed. Taking an example from set theory (because I'm sharper on set theory and category theory than HoTT), constructing an inner model of ZFC (eg ZF + V=L) from a model of ZF doesn't feel like an achievement if your metatheory assumed choice</p>



<a name="197799351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799351">(May 16 2020 at 14:56)</a>:</h4>
<p>^copying my motivation for this from another thread</p>



<a name="197799356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799356">(May 16 2020 at 14:56)</a>:</h4>
<p>Isn't it what is done in most books?</p>



<a name="197799394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799394">(May 16 2020 at 14:57)</a>:</h4>
<p>I'm pretty sure it isn't, most foundational books take care to assume the least of the metatheory</p>



<a name="197799448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799448">(May 16 2020 at 14:58)</a>:</h4>
<p>I think the default position of mathlib is not to make concessions to those who care about foundations.</p>



<a name="197799449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799449">(May 16 2020 at 14:58)</a>:</h4>
<p>OK, thanks for the clarification (answering to Bhavik).</p>



<a name="197799455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799455">(May 16 2020 at 14:58)</a>:</h4>
<p>However, it's not that clear to me that we are conceding anything here--apparently no changes were required to the rest of mathlib, right?</p>



<a name="197799463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799463">(May 16 2020 at 14:59)</a>:</h4>
<p>Unfortunately there are some required changes...</p>



<a name="197799465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799465">(May 16 2020 at 14:59)</a>:</h4>
<p>We have made a design decision to be classical, and my iimpression was that letting polynomials be constructive caused problems.</p>



<a name="197799480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799480">(May 16 2020 at 14:59)</a>:</h4>
<p>Oh I see, the build fails</p>



<a name="197799492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799492">(May 16 2020 at 14:59)</a>:</h4>
<p>Is that only the linter complaining?</p>



<a name="197799494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799494">(May 16 2020 at 14:59)</a>:</h4>
<p>Or really the build?</p>



<a name="197799498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799498">(May 16 2020 at 14:59)</a>:</h4>
<p>It's the build, I thought it'd just be the linter too but there are some other complaints</p>



<a name="197799500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799500">(May 16 2020 at 14:59)</a>:</h4>
<p>There's a real error. Does the CI give up after the first error somehow?</p>



<a name="197799548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799548">(May 16 2020 at 15:00)</a>:</h4>
<p>Oh no, I see there are at least two different errors</p>



<a name="197799558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799558">(May 16 2020 at 15:00)</a>:</h4>
<p>I guess the output is truncated somehow</p>



<a name="197799564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799564">(May 16 2020 at 15:00)</a>:</h4>
<p>It doesn't go through the whole build, though.</p>



<a name="197799575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799575">(May 16 2020 at 15:01)</a>:</h4>
<p>Build time on the PR is only 43 minutes.</p>



<a name="197799586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799586">(May 16 2020 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Can you explain what's wrong with <code>fintype</code>? (Maybe in another topic?)</p>



<a name="197799675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799675">(May 16 2020 at 15:03)</a>:</h4>
<p>I think Johan's point about <code>decidable_eq b</code> being data is tempered by the fact that all these functions already have <code>fintype b</code> too, right?</p>



<a name="197799742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799742">(May 16 2020 at 15:04)</a>:</h4>
<p>Oh, this is actually about <code>finset</code></p>



<a name="197799888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799888">(May 16 2020 at 15:07)</a>:</h4>
<p>If this is ultimately about ZF vs ZFC, then this is not really the change you want anyways</p>



<a name="197799896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799896">(May 16 2020 at 15:07)</a>:</h4>
<p>because everything is decidable in ZF too</p>



<a name="197799947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799947">(May 16 2020 at 15:08)</a>:</h4>
<p>What you want is for <code>classical</code> to enable <code>lem</code> without using <code>choice</code></p>



<a name="197799953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799953">(May 16 2020 at 15:08)</a>:</h4>
<p>Yeah I kind of would like that</p>



<a name="197799974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197799974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197799974">(May 16 2020 at 15:09)</a>:</h4>
<p>I think breaking up <code>choice</code> is useful even for non-foundational reasons, so I would rather do that</p>



<a name="197800057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800057">(May 16 2020 at 15:11)</a>:</h4>
<p>I'd prefer that too. I would quite like lem, unique choice and finite choice to be distinct though I'd be happy with just the first two (or at a push, just the first)</p>



<a name="197800069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800069">(May 16 2020 at 15:11)</a>:</h4>
<p>Alternatively it should actually be possible to prove these things without <code>decidable_eq</code>, I think?</p>



<a name="197800146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800146">(May 16 2020 at 15:12)</a>:</h4>
<p>I think you can write a modified induction principle for <code>finset</code> which doesn't know <code>a ∉ s</code> in the <code>insert a s</code> case, and use that</p>



<a name="197800149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800149">(May 16 2020 at 15:12)</a>:</h4>
<p>does that seem right?</p>



<a name="197800172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800172">(May 16 2020 at 15:13)</a>:</h4>
<p>oh, the problem is with <code>insert</code> itself</p>



<a name="197800232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800232">(May 16 2020 at 15:14)</a>:</h4>
<p>Still, these theorems are true without <code>classical</code> or decidability hypotheses, I'm pretty sure.</p>



<a name="197800245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800245">(May 16 2020 at 15:15)</a>:</h4>
<p>I'm not sure about <code>fold_insert_idem</code> but I can certainly believe the others</p>



<a name="197800326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800326">(May 16 2020 at 15:16)</a>:</h4>
<p>But that one you didn't even need to change the type of, right? For some reason the <code>decidable_eq</code> hypothesis was there already?</p>



<a name="197800350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800350">(May 16 2020 at 15:17)</a>:</h4>
<p>True! It was there already for the insert</p>



<a name="197800369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800369">(May 16 2020 at 15:17)</a>:</h4>
<p>The proof of all these theorems is just to do them for multisets (in case it matters, the operation is idempotent)</p>



<a name="197800623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800623">(May 16 2020 at 15:23)</a>:</h4>
<p>Alright, giving that a try now</p>



<a name="197800698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800698">(May 16 2020 at 15:25)</a>:</h4>
<p>Or another way to say it is: <code>insert</code> doesn't really need to know that the whole type has decidable equality, it just has to be able to decide whether the element being inserted is in the list already; but in <code>finset.induction_on</code> we have that in the context</p>



<a name="197800706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800706">(May 16 2020 at 15:25)</a>:</h4>
<p>(it's not in the list already)</p>



<a name="197800734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800734">(May 16 2020 at 15:25)</a>:</h4>
<p>I'm not sure what the least disruptive way to prove these is, though</p>



<a name="197800791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197800791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197800791">(May 16 2020 at 15:26)</a>:</h4>
<p>Yeah I think that would be pretty disruptive, since I'd have to change the definition of insert</p>



<a name="197801122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197801122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197801122">(May 16 2020 at 15:35)</a>:</h4>
<p>Of course I very strongly vote against anything the makes mathlib harder to use for everybody while allowing arcane specialized logic stuff.</p>



<a name="197801192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197801192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197801192">(May 16 2020 at 15:36)</a>:</h4>
<p>There are plenty of alternative software for this. We simply need to keep this diversity by preserving Lean and mathlib from constructivism.</p>



<a name="197801418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197801418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197801418">(May 16 2020 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices/near/197800369">said</a>:</p>
<blockquote>
<p>The proof of all these theorems is just to do them for multisets (in case it matters, the operation is idempotent)</p>
</blockquote>
<p><del>This worked fine for <code>inf_le</code> but I'm struggling a bit with <code>le_inf</code></del> Never mind, got it</p>



<a name="197804002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804002">(May 16 2020 at 16:45)</a>:</h4>
<p>oh, I see that <code>multiset.inf</code> already exists! that's convenient.</p>



<a name="197804066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804066">(May 16 2020 at 16:46)</a>:</h4>
<p>It does, but it's not got the map in there</p>



<a name="197804102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804102">(May 16 2020 at 16:47)</a>:</h4>
<p>Okay I think I've made all the changes I need - there shouldn't be any <em>new</em> decidable_eq any more, but I managed to remove some uses of classical</p>



<a name="197804170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804170">(May 16 2020 at 16:48)</a>:</h4>
<p>Hopefully this should be acceptable to everyone!</p>



<a name="197804530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804530">(May 16 2020 at 16:56)</a>:</h4>
<p>Great! It's shorter than the original, too.</p>



<a name="197804652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197804652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197804652">(May 16 2020 at 16:59)</a>:</h4>
<p>Thanks for this suggestion <span class="user-mention" data-user-id="110032">@Reid Barton</span>!</p>



<a name="197807087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197807087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197807087">(May 16 2020 at 17:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> <a href="#narrow/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices/near/197804170">said</a>:</p>
<blockquote>
<p>Hopefully this should be acceptable to everyone!</p>
</blockquote>
<p>Certainly!</p>



<a name="197809054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197809054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197809054">(May 16 2020 at 18:47)</a>:</h4>
<p>One more idea: introduce <code>has_em (p : Prop) : Prop := (em : p ∨ not p)</code> typeclass with instance from <code>decidable p</code> and use it instead of <code>classical</code>.</p>



<a name="197811688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197811688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197811688">(May 16 2020 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices/near/197800698">said</a>:</p>
<blockquote>
<p>Or another way to say it is: <code>insert</code> doesn't really need to know that the whole type has decidable equality, it just has to be able to decide whether the element being inserted is in the list already; but in <code>finset.induction_on</code> we have that in the context</p>
</blockquote>
<p>IIRC there is a <code>finset.cons</code> function for this: it takes an <code>a</code> and <code>s</code> and a hypothesis <code>a \notin s</code> and produces a new finset. This is more efficient because it doesn't have to check for membership, but importantly it also doesn't require any decidable equality. It would be perfect for an induction theorem</p>



<a name="197813770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197813770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197813770">(May 16 2020 at 20:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices/near/197809054">said</a>:</p>
<blockquote>
<p>One more idea: introduce <code>has_em (p : Prop) : Prop := (em : p ∨ not p)</code> typeclass with instance from <code>decidable p</code> and use it instead of <code>classical</code>.</p>
</blockquote>
<p>I worry this would create the same typeclass issues people were worried about with my original suggestion though</p>



<a name="197857827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197857827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197857827">(May 17 2020 at 16:48)</a>:</h4>
<p>This is less bad because it's a Prop.</p>



<a name="197863226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%232699%20decidable_eq%20lattices/near/197863226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.232699.20decidable_eq.20lattices.html#197863226">(May 17 2020 at 18:44)</a>:</h4>
<p>There are really two kinds of issues. The more serious one is making definitions depend on data (like <code>decidable_eq</code>). That wasn't an issue here because the extra argument was only added to lemmas. The less serious one is adding an argument you don't need.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>