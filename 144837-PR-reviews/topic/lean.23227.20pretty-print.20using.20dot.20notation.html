---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html">lean#227 pretty-print using dot notation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197151983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197151983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197151983">(May 11 2020 at 14:20)</a>:</h4>
<p>There was a thread in the newbies stream about <code>eq.rhs</code>, and how the <code>.rhs</code> is not pretty-printed in the tactic state (I'm not sure if I understood the comment correctly).  This got me thinking, should we enable <code>pp.generalized_field_notation</code> by default?  (It is not complete, and there are very likely cases where it doesn't round-trip.)</p>



<a name="197152158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152158">(May 11 2020 at 14:22)</a>:</h4>
<p>Oh I didn't even notice this difference.</p>



<a name="197152424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152424">(May 11 2020 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> My comment was about something different:<br>
I would like</p>
<div class="codehilite"><pre><span></span><code><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
</code></pre></div>


<p>and then</p>
<div class="codehilite"><pre><span></span><code><span class="k">let</span> <span class="n">L</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="n">lhs</span>
</code></pre></div>


<p>should give</p>
<div class="codehilite"><pre><span></span><code><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
<span class="n">L</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="c1">-- and not h.lhs</span>
</code></pre></div>



<a name="197152485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152485">(May 11 2020 at 14:24)</a>:</h4>
<p>My point in that context was that you still see this term <code>eq.rhs</code> in some form, not the actual RHS of the equation (which you would see instead, if you had written it manually)</p>



<a name="197152491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152491">(May 11 2020 at 14:24)</a>:</h4>
<p>But that is orthogonal.</p>



<a name="197152521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152521">(May 11 2020 at 14:24)</a>:</h4>
<p>Yet another option I wasn't aware of...</p>



<a name="197152591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152591">(May 11 2020 at 14:25)</a>:</h4>
<p>Maybe we should add a reducibility setting <code>transparent</code></p>



<a name="197152614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152614">(May 11 2020 at 14:25)</a>:</h4>
<p><code>@[transparent] def eq.lhs := ...</code></p>



<a name="197152619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152619">(May 11 2020 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I get it now.  Unfortunately I don't see a way to get this without adding a (local) notation.</p>



<a name="197152648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152648">(May 11 2020 at 14:25)</a>:</h4>
<p>How do you do it with notation? I didn't see a way</p>



<a name="197152682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152682">(May 11 2020 at 14:25)</a>:</h4>
<p>Another possibility is a <code>pp</code> flag to unfold <code>reducible</code> things</p>



<a name="197152742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152742">(May 11 2020 at 14:26)</a>:</h4>
<p>Or at least unfold <code>transparent</code> things</p>



<a name="197152783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152783">(May 11 2020 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  You declare a notation that expands to a tactic, you can pass expressions to the tactic via the expected type.</p>



<a name="197152795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152795">(May 11 2020 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation/near/197152591">said</a>:</p>
<blockquote>
<p>Maybe we should add a reducibility setting <code>transparent</code></p>
</blockquote>
<p>I feel like this would end up touching virtually everything for not that much benefit, though I could be wrong</p>



<a name="197152930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197152930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197152930">(May 11 2020 at 14:27)</a>:</h4>
<p>I'm completely against making the pretty-printer unfold definitions.  This is just going to cause lots and lots of confusion.  There is a reason we don't beta-reduce during pretty-printing.  However, having the elaborator unfold transparent definitions would be ok with me.</p>



<a name="197153074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/lean%23227%20pretty-print%20using%20dot%20notation/near/197153074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/lean.23227.20pretty-print.20using.20dot.20notation.html#197153074">(May 11 2020 at 14:28)</a>:</h4>
<p><code>pp.beta</code> is one of my favorite options though...</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>