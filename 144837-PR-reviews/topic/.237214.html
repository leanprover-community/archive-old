---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.237214.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html">#7214</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="234778406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234778406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234778406">(Apr 16 2021 at 00:56)</a>:</h4>
<p>Not to be outdone by my friend <span class="user-mention" data-user-id="401024">@Matt Kempster</span>, I have started working on proving Bertrand's postulate so that we can increase our coverage of Wiedijk's 100 theorems. To that end I am starting by adding this lemma<br>
<code>lemma choose_middle_upper_bound (n : ℕ) : 4 ^ n ≤ (2 * n + 1) * choose (2 * n) n</code><br>
This is a little different from the <code>n &gt; 0  -&gt;  4 ^ n ≤ (2 * n) * choose (2 * n) n</code> that you would get from <a href="https://en.wikipedia.org/wiki/Proof_of_Bertrand%27s_postulate">the standard proof</a>. However, I think this version is a little cleaner, since we do not introduce an additional constraint on <code>n</code>, and the proof is a bit shorter. This slightly weaker version will still be sufficient to prove the postulate. What do you all think?</p>



<a name="234781334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234781334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234781334">(Apr 16 2021 at 01:39)</a>:</h4>
<p>So you're aware, <span class="user-mention" data-user-id="117987">@Patrick Stevens</span> has also been working on this, in <a href="https://github.com/leanprover-community/mathlib/issues/2784">#2784</a></p>



<a name="234782102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234782102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234782102">(Apr 16 2021 at 01:51)</a>:</h4>
<p>(whoops, Bhavik said the same thing)</p>



<a name="234784410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234784410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234784410">(Apr 16 2021 at 02:24)</a>:</h4>
<p>Ok wonderful. Fortuitously, it seems I proved a lemma that he hadn't gotten to yet. I personally like the idea of keeping this particular lemma in the <code>nat/choose</code> directory since there is a similar lower bound nearby.</p>



<a name="234784848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234784848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234784848">(Apr 16 2021 at 02:31)</a>:</h4>
<p>In fact, it would seem that with this, we are getting close to a proof - but it also seems like the last push to the <code>bertrand-postulate</code> branch was a few months ago. If Patrick is still interested in this, he's more than welcome to use this lemma in his proof.</p>



<a name="234789260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234789260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234789260">(Apr 16 2021 at 03:42)</a>:</h4>
<p>I'm guessing that <a href="https://github.com/leanprover-community/mathlib/issues/2784">#2784</a> will need quite a mathlib bump, given how old it is.</p>



<a name="234792222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234792222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234792222">(Apr 16 2021 at 04:22)</a>:</h4>
<p>Any guidance on the name for this theorem? <code>four_pow_le_two_mul_add_one_mul_central_binom</code> is a bit too wordy, but <code>upper_bound</code> potentially conflicts with future upper bounds on the central binomial coefficient.</p>



<a name="234792435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234792435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234792435">(Apr 16 2021 at 04:25)</a>:</h4>
<p>Hmm, maybe just go with the wordy name for now</p>



<a name="234792447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234792447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234792447">(Apr 16 2021 at 04:25)</a>:</h4>
<p>I guess you don't apply it that often, right?</p>



<a name="234792496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234792496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234792496">(Apr 16 2021 at 04:26)</a>:</h4>
<p>If you do, you can make a local notation for it in the file that you are working on.</p>



<a name="234792555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234792555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234792555">(Apr 16 2021 at 04:27)</a>:</h4>
<p>Yes, currently only adding this in preparation to use it in the one place, so I guess that makes sense.</p>



<a name="234799807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/234799807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#234799807">(Apr 16 2021 at 06:14)</a>:</h4>
<p>Should the preceding lemma, <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.choose_middle_le_pow">docs#nat.choose_middle_le_pow</a>, be renamed to <code>choose_middle_le_four_pow</code> to match?</p>



<a name="236924417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/236924417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#236924417">(May 01 2021 at 01:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237214/near/234789260">said</a>:</p>
<blockquote>
<p>I'm guessing that <a href="https://github.com/leanprover-community/mathlib/issues/2784">#2784</a> will need quite a mathlib bump, given how old it is.</p>
</blockquote>
<p>Can you explain this statement? Does the mathlib version depend on the branch somehow? Since <a href="https://github.com/leanprover-community/mathlib/issues/2784">#2784</a> only touches one file, can't I simply merge master into it then fix any broken references to bring it up to date?</p>



<a name="236924578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/236924578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#236924578">(May 01 2021 at 01:28)</a>:</h4>
<p>Yes, you can do exactly that.</p>



<a name="238952385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/238952385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#238952385">(May 16 2021 at 05:52)</a>:</h4>
<p>I am making progress on this. Seeing as <span class="user-mention" data-user-id="117987">@Patrick Stevens</span>  completed much of the work in this file, how should I handle the copyright header?</p>



<a name="238952612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/238952612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#238952612">(May 16 2021 at 05:58)</a>:</h4>
<p>The first line in the copyright header is the "initial author" of that chunk of text. The <code>Authors:</code> line is for whoever should be on the hook if we have trouble with the file later, and need an expert to explain what's going on / fix things. It does not need to capture every contributor. Use the <code>Coauthored-by: </code> tag in the PR top comment to acknowledge others: in the past to come up with lists of mathlib contributors we've machine processed all these tags.</p>



<a name="238964041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/238964041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#238964041">(May 16 2021 at 09:41)</a>:</h4>
<p>Hi - sorry for the radio silence, I kind of burned out while I was in the middle of the ancient PR</p>



<a name="239000704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239000704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239000704">(May 16 2021 at 19:30)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="117987">@Patrick Stevens</span> , good to see you're still around.</p>
<p>I have made some updates to the branch, some of which have commented out or deleted some lemmas you made. Hopefully I didn't remove anything important. If you want to jump back in, that's great - currently the branch only has 5 or so sorry lemmas left to finish. Otherwise, I have just been chugging along on them whenever I'm free.</p>



<a name="239000726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239000726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239000726">(May 16 2021 at 19:31)</a>:</h4>
<p>Also, sorry about the lemmas named by keyboard mashing, that's my bad habit when I'm trying to work quickly</p>



<a name="239938466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239938466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239938466">(May 23 2021 at 09:41)</a>:</h4>
<p>I did a bit of linting on <a href="https://github.com/leanprover-community/mathlib/issues/2784">#2784</a> - removed a couple of <code>omega</code> for speed, grouped lines together in <code>{}</code> to demarcate goals more cleanly, that sort of thing</p>



<a name="239938533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239938533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239938533">(May 23 2021 at 09:42)</a>:</h4>
<p>Also had a stab at showing the <code>false_inequality</code> to be false, but annoyingly all of my really crude approximations fail according to Mathematica</p>



<a name="239938549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239938549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239938549">(May 23 2021 at 09:43)</a>:</h4>
<p>And yet the inequality is false by a factor of 10^24 at the point <code>n = 750</code></p>



<a name="239941882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239941882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239941882">(May 23 2021 at 10:43)</a>:</h4>
<p>Are you asking a question or giving an update? If you're asking a question (e.g. "how do I prove this inequality in Lean") then can you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ? I'm a bit confused when you say you're trying to prove a false thing.</p>



<a name="239968876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239968876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239968876">(May 23 2021 at 18:19)</a>:</h4>
<p>Sorry, that was just an update</p>



<a name="239969106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239969106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239969106">(May 23 2021 at 18:23)</a>:</h4>
<p>To be clear: we're in a proof by contradiction, and modulo four rather easy <code>sorry</code>s, we've finally achieved a proof of a certain inequality that I know to be false for <code>n</code> greater than about 750 (the actual bound where it becomes false is around 700): <a href="https://github.com/leanprover-community/mathlib/pull/2784/files#diff-779714ecbcf3ae1ddff8a35448792a63daacd8e7c2b942aa723c2c19b65ec2ddR597">https://github.com/leanprover-community/mathlib/pull/2784/files#diff-779714ecbcf3ae1ddff8a35448792a63daacd8e7c2b942aa723c2c19b65ec2ddR597</a></p>
<p>However, showing that the inequality is in fact false at <code>n = 750</code> is currently eluding me (though I haven't put serious brainpower into it yet). Mathematica assures me the inequality is false by many orders of magnitude; I just haven't yet found a way to tell Lean this.</p>



<a name="239969192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239969192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239969192">(May 23 2021 at 18:24)</a>:</h4>
<p>No fundamental problems encountered so far, it's just that I haven't yet spotted whatever clever bound makes it obvious that the term <code>false_inequality</code> leads to a contradiction. I might try taking logs and then seeing if <code>norm_num</code> can do it.</p>



<a name="239973680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239973680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239973680">(May 23 2021 at 19:45)</a>:</h4>
<p>I had a go at this for an hour or so and the only thing that was learnt was that numerical stuff is a pain.</p>



<a name="239974590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239974590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239974590">(May 23 2021 at 20:02)</a>:</h4>
<p>Just checked properly with Mathematica; it's actually n=460, the first integer where the inequality becomes false</p>



<a name="239974659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239974659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239974659">(May 23 2021 at 20:03)</a>:</h4>
<p>The logs of both sides are 637.695, 637.149 respectively at n=460 - should be well within the realms of <code>norm_num</code> if <code>norm_num</code> works as I hope it does</p>



<a name="239974698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239974698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239974698">(May 23 2021 at 20:04)</a>:</h4>
<p>(I'm assuming an induction is easy from that point)</p>



<a name="239976314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239976314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239976314">(May 23 2021 at 20:33)</a>:</h4>
<p>i may try with something like 464, as <code>nat.log</code> seems a little easier to use than the normal log... I can't even find a monotonicity lemma for log that doesn't involve using <code>real.exp_order_iso.symm</code></p>



<a name="239979322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239979322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239979322">(May 23 2021 at 21:29)</a>:</h4>
<p>Can you make a MWE?</p>



<a name="239979785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239979785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239979785">(May 23 2021 at 21:37)</a>:</h4>
<p>A MWE of what?</p>



<a name="239979815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239979815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239979815">(May 23 2021 at 21:37)</a>:</h4>
<p>You mean like "the structurally smallest inequality of naturals that it's non-obvious how to evaluate"?</p>



<a name="239979859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239979859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239979859">(May 23 2021 at 21:38)</a>:</h4>
<p>If you want some help filling in a sorry, e.g. proving that some number is less than some other number, then why not just produce a small code block with a sorry in which other people can try for themselves.</p>



<a name="239979884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239979884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239979884">(May 23 2021 at 21:38)</a>:</h4>
<p>But one which compiles by itself in a small scratch file with mathlib master</p>



<a name="239980029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239980029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239980029">(May 23 2021 at 21:41)</a>:</h4>
<p>But if you don't need help on a sorry then forget it. I'm trying to work out if you need help and if you do I'm suggesting a way of maximising the chance that you'll get help</p>



<a name="239980122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239980122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239980122">(May 23 2021 at 21:43)</a>:</h4>
<p>PS if you think that norm_num can take the log of a number and get the answer to 6 significant figures then I think you're being extremely optimistic</p>



<a name="239980230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239980230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239980230">(May 23 2021 at 21:46)</a>:</h4>
<p>If you're interested, the problem is precisely the following, where I just want to show it for any choice of <code>500</code> that makes the theorem easy to prove; but I haven't really given it a serious go yet</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="c1">-- This theorem is true iff n &gt;= 460</span>
<span class="kd">theorem</span> <span class="n">but_why</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">big</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">500</span><span class="o">):</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">nat.sqrt</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">))</span> <span class="bp">*</span> <span class="mi">4</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">⊥</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="239980291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/239980291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#239980291">(May 23 2021 at 21:46)</a>:</h4>
<p>So no help required, at least at the moment</p>



<a name="240001410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240001410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240001410">(May 24 2021 at 04:02)</a>:</h4>
<p><span class="user-mention" data-user-id="117987">@Patrick Stevens</span> Is the theorem true for <code>n &gt;= 460</code> in <em>Lean</em>? I'm asking because <code>nat.sqrt (2 * n)</code> and <code>n / 3</code> are both truncating. This might be something you need to take into account.</p>



<a name="240010106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240010106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240010106">(May 24 2021 at 06:07)</a>:</h4>
<p>This looks like the inequality in bertrand's postulate. There is a really neat optimization of the argument by Toshiori that makes it true for n &gt;= 64 and the numbers work out nicely without any big norm_num or the need to estimate things to 6 digits. That's the version I implemented in metamath</p>



<a name="240013812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240013812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240013812">(May 24 2021 at 07:03)</a>:</h4>
<p>Do you know a maths proof for this <span class="user-mention" data-user-id="117987">@Patrick Stevens</span> ? Lean isn't going to solve this goal by magic, and an argument of the form "I worked out some values for n=500,501,502 and it was pretty clear that one side was growing faster than the other" can't be formalised because it's not rigorous</p>



<a name="240014251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240014251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240014251">(May 24 2021 at 07:09)</a>:</h4>
<p>It's not hard to prove that one side grows faster than the other, but that's a purely asymptotic statement so it's not very useful for the non-asymptotic version of bertrand's postulate</p>



<a name="240014326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240014326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240014326">(May 24 2021 at 07:10)</a>:</h4>
<p>If you put a gun to my head and asked me to prove this in lean I would first rewrite it as 4^n &gt;= ... (I don't know why you're making it more complicated with the <code>false</code> thing) and then prove that 4^(n/12) &gt;= 2n+1 for sufficiently large n, reduce to proving 4^(sqrt(2n)/24)&gt;2n and then try to reduce more</p>



<a name="240014368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240014368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240014368">(May 24 2021 at 07:10)</a>:</h4>
<p>You might get some much uglier constants though. How important is it that 500&lt;1000000?</p>



<a name="240014441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240014441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240014441">(May 24 2021 at 07:11)</a>:</h4>
<p>If you raise the constant too much you have to check more explicit primes, but the prime sequence grows exponentially so it's not too bad (except that proving that a single prime in the range of 1000000 is prime is a lot of work)</p>



<a name="240014534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240014534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240014534">(May 24 2021 at 07:12)</a>:</h4>
<p>but the constant 64 is quite magic, it has just the right square root and can be taken to the power 2/3 and stuff</p>



<a name="240016522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240016522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240016522">(May 24 2021 at 07:38)</a>:</h4>
<p>Johann, the square root truncation was dealt with (I checked with Sage myself); not sure about the division truncation, but that should be ±3 at most</p>



<a name="240016541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240016541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240016541">(May 24 2021 at 07:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237214/near/240001410">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> Is the theorem true for <code>n &gt;= 460</code> in <em>Lean</em>? I'm asking because <code>nat.sqrt (2 * n)</code> and <code>n / 3</code> are both truncating. This might be something you need to take into account.</p>
</blockquote>
<p>Yeah, it's true as stated - the least n becomes 476 if you use real-sqrt and rational-quotient</p>



<a name="240016995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240016995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240016995">(May 24 2021 at 07:44)</a>:</h4>
<p>also, whilst messing around with this I realised that <code>norm_num</code> can't deal with <code>nat.sqrt</code>, but it's pretty easy to do it; does anyone have a tutorial on writing tactic code or such like? it seems like a fun side project</p>



<a name="240017210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240017210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240017210">(May 24 2021 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span>  There are tactic writing docs on the community website</p>



<a name="240017227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/240017227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#240017227">(May 24 2021 at 07:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/extras/tactic_writing.html">https://leanprover-community.github.io/extras/tactic_writing.html</a></p>



<a name="243224225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243224225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243224225">(Jun 19 2021 at 02:47)</a>:</h4>
<p>I've reduced the problem now to <code>8 * x + 8 ≤ (x * log 4 / sqrt (8 * x + 8) / 3) ^ (3 : ℝ)</code> using the inequality <code>x^3 &lt; exp(3 * x)</code>. This will require us to increase the condition <code>249 \le x</code> to something higher, but I think this will ultimately be less effort than the calculus way.</p>
<p>The calculus approach of treating the inequality as a function and proving it has positive derivative above a certain value would require yet another version of Rolle's theorem. It might be worth defining a proposition such as <code>increasing_on</code> for real to real functions, along with lemmas relating this to the derivative if it exists.</p>



<a name="243243641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243243641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243243641">(Jun 19 2021 at 10:51)</a>:</h4>
<p>The current state of the PR requires x to be bounded below by about 3x10^6</p>



<a name="243243642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243243642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243243642">(Jun 19 2021 at 10:51)</a>:</h4>
<p>Which I think is rather optimistic</p>



<a name="243270138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243270138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243270138">(Jun 19 2021 at 21:33)</a>:</h4>
<p>When norm_num proves something is prime, how does it work? Does it check all factors up to p? Up to sqrt p?</p>



<a name="243270190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243270190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243270190">(Jun 19 2021 at 21:34)</a>:</h4>
<p>it checks odd numbers up to sqrt p</p>



<a name="243270192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243270192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243270192">(Jun 19 2021 at 21:34)</a>:</h4>
<p>There are more efficient algorithms of course but this performs well in the range that people normally need for formal proofs</p>



<a name="243270201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243270201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243270201">(Jun 19 2021 at 21:34)</a>:</h4>
<p>smh, GNFS implementation in Lean when? ;b</p>



<a name="243270433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243270433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243270433">(Jun 19 2021 at 21:40)</a>:</h4>
<p>GNFS not optimal, primes in P is what I would want</p>



<a name="243326068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237214/near/243326068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237214.html#243326068">(Jun 20 2021 at 23:02)</a>:</h4>
<p>What would really be useful would be a definition of computable reals and computable real functions, along with a tactic that proves goals of the form <code>x &lt; y</code> where <code>x</code> and <code>y</code> are composed of computable reals and computable real functions. This would circumvent all the switching between exponents and logs and moving of sqrts I need to do to prove a lemma like <code>log 584 + 2 ≤ sqrt (2 * 73) * log 2</code> or <code>sqrt 2008 * log 2008 ≤ 250 * log 4</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>