---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html">#9925 Naming request (factorisation of central binom)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259157399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259157399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259157399">(Oct 26 2021 at 20:36)</a>:</h4>
<p>I have a few lemmas of type signature e.g. the following (used in the proof of Bertrand's postulate):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">multiplicity_central_binom_of_large_eq_zero</span>
  <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">n_big</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="n">small</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="n">big</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">p</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">padic_val_nat</span> <span class="n">p</span> <span class="o">(</span><span class="n">central_binom</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span>
  <span class="o">:=</span>
</code></pre></div>
<p>These lemmas are all conditioned on <code>p &lt;= n</code> (which is kind of a crucial point of the proof!). So it's not a nice neat fact like "sufficiently large primes don't appear in the prime factorisation of <code>(2 * n).choose n</code>". Can anyone come up with a remotely reasonable name for this lemma?</p>



<a name="259157720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259157720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259157720">(Oct 26 2021 at 20:40)</a>:</h4>
<p><code>padic_val_nat_central_binom_of_something</code>?</p>



<a name="259157790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259157790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259157790">(Oct 26 2021 at 20:40)</a>:</h4>
<p>Then it depends on exactly how many such lemmas you have.</p>



<a name="259157873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259157873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259157873">(Oct 26 2021 at 20:41)</a>:</h4>
<p>The lemmas are facts about <code>p</code> more than they're facts about <code>n</code>. My other two lemmas are:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">multiplicity_central_binom_of_large_le_one</span>
  <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">n_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="n">p_large</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="n">p</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span>
  <span class="o">:</span> <span class="o">(</span><span class="n">padic_val_nat</span> <span class="n">p</span> <span class="o">(</span><span class="n">central_binom</span> <span class="n">n</span><span class="o">))</span> <span class="bp">≤</span> <span class="mi">1</span>
  <span class="o">:=</span>
</code></pre></div>
<p>and</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">multiplicity_central_binom_le</span>
  <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">n_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">padic_val_nat</span> <span class="n">p</span> <span class="o">(</span><span class="n">central_binom</span> <span class="n">n</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">log</span> <span class="n">p</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">:=</span>
</code></pre></div>



<a name="259158013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259158013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259158013">(Oct 26 2021 at 20:42)</a>:</h4>
<p>This is unrealted, but you can group <code>p</code> and  <code>n</code> and not use that many lines for the hypotheses.</p>



<a name="259158084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/259158084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#259158084">(Oct 26 2021 at 20:43)</a>:</h4>
<p>(I haven't done any linting of the PR in question yet, but I'll do that)</p>



<a name="263774536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/263774536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#263774536">(Dec 05 2021 at 15:50)</a>:</h4>
<p>Resubmitting this for review please - I am really unhappy about the naming but just can't think of anything better :(</p>



<a name="263791402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/263791402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#263791402">(Dec 05 2021 at 21:59)</a>:</h4>
<p>I might change <code>multiplicity_central_binom_of_large_le_one</code> to <code>multiplicity_central_binom_le_one_of_large</code> and similar for below.<br>
It strikes me that you are using <code>multiplicity</code> instead of <code>padic_val_nat</code>, and it is even the case that the docstring of <code>padic_val_rat_of_int</code> uses the word <code>multiplicity</code>. It seems <a href="https://leanprover-community.github.io/mathlib_docs/find/multiplicity">docs#multiplicity</a> has been defined - might it be better to use this definition, or rename the <code>padic_val_</code> functions to something that uses the word multiplicity?</p>



<a name="263826197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/263826197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#263826197">(Dec 06 2021 at 09:38)</a>:</h4>
<p>Back when doing the original mammoth Bertrand PR, <code>multiplicity</code> turned out to be really hard to use compared to <code>padic_val_nat</code>, because of the <code>enat</code>s involved :(</p>



<a name="279306128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239925%20Naming%20request%20%28factorisation%20of%20central%20binom%29/near/279306128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239925.20Naming.20request.20(factorisation.20of.20central.20binom).html#279306128">(Apr 18 2022 at 16:49)</a>:</h4>
<p>I think <a href="https://github.com/leanprover-community/mathlib/pull/9925">#9925</a> is ready again!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>