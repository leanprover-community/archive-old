---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html">#14930 Lean 3.44.0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="287424662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287424662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287424662">(Jun 25 2022 at 09:16)</a>:</h4>
<p>I'm running into some weird problems with sheafs in <a href="https://github.com/leanprover-community/mathlib/pull/14930">#14930</a>, presumably self-inflicted by <a href="https://github.com/leanprover-community/lean/pull/723">leanprover-community/lean#723</a>.<br>
It seems to me that <code>simp</code> is now simplifying something I can't see in the goal state, and this is causing other lemmas to no longer match.</p>
<p>Could someone more familiar with <code>eq_to_hom</code> take a look? (unfortunately I just blew away the cache, but I suspect it won't take long to produce a new one)</p>



<a name="287427437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287427437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287427437">(Jun 25 2022 at 10:25)</a>:</h4>
<p>It looks like the problem is that lean is simplifying <code>eq_to_hom h : op A ⟶ op B</code> where <code>h : op A = op B</code> to <code>eq_to_hom h' : op A ⟶ op B</code> where <code>h' : A = B</code></p>



<a name="287428080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428080">(Jun 25 2022 at 10:39)</a>:</h4>
<p>is the issue <a href="https://leanprover-community.github.io/mathlib_docs/find/op_inj_iff">docs#op_inj_iff</a>?</p>



<a name="287428097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428097">(Jun 25 2022 at 10:39)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/opposite.op_inj_iff">docs#opposite.op_inj_iff</a></p>



<a name="287428124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428124">(Jun 25 2022 at 10:40)</a>:</h4>
<p>Looks like adding <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_to_hom_map">docs#eq_to_hom_map</a> to the <code>simp</code> should fix whatever the problem is (still not sure why it is not a simp lemma)</p>



<a name="287428173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428173">(Jun 25 2022 at 10:40)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.eq_to_hom_map">docs#category_theory.eq_to_hom_map</a></p>



<a name="287428179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428179">(Jun 25 2022 at 10:40)</a>:</h4>
<p>everyone else has a bunch of stuff open today</p>



<a name="287428196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428196">(Jun 25 2022 at 10:41)</a>:</h4>
<p>Ah, I see what's happening; <code>opposite</code> is irreducible</p>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0/near/287428080">said</a>:</p>
<blockquote>
<p>is the issue <a href="https://leanprover-community.github.io/mathlib_docs/find/op_inj_iff">docs#op_inj_iff</a>?</p>
</blockquote>
<p>Yes exactly. Making that not be proved by <code>iff.rfl</code> solved the issue</p>



<a name="287428335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428335">(Jun 25 2022 at 10:44)</a>:</h4>
<p>Is this new <code>iff.rfl</code> stuff documented anywhere?</p>



<a name="287428437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428437">(Jun 25 2022 at 10:46)</a>:</h4>
<p>No; where would you like such documentation to live?</p>



<a name="287428445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428445">(Jun 25 2022 at 10:47)</a>:</h4>
<p>Perhaps <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#dsimp">tactic#dsimp</a>?</p>



<a name="287428461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428461">(Jun 25 2022 at 10:47)</a>:</h4>
<p>Writing documentation there maybe requires a new lean release...</p>



<a name="287428530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428530">(Jun 25 2022 at 10:49)</a>:</h4>
<p>Well my first question would just be how does it work</p>



<a name="287428534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428534">(Jun 25 2022 at 10:49)</a>:</h4>
<p>is there an auxiliary definition generated for these lemmas?</p>



<a name="287428591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428591">(Jun 25 2022 at 10:50)</a>:</h4>
<p>Or I guess <code>dsimp</code> doesn't really need the lemma anyways? it just needs to know that the two sides are defeq?</p>



<a name="287428840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428840">(Jun 25 2022 at 10:56)</a>:</h4>
<p>There are two things that seems to be going on here:</p>
<ul>
<li><code>dsimp</code> doesn't care about the proof, as ultimately it just does a single <code>change</code> (or equivalent), using <code>_refl_lemma</code> lemmas to guide it to the preferred form</li>
<li><code>simp</code> seems to use the proof of <code>_refl_lemma</code>s always, but apparently prioritizes using them over regular simp lemmas</li>
</ul>
<p>The change in 3.44.0 is that lemmas proved by <code>iff.rfl</code> are now tagged with <code>_refl_lemma</code> to match lemmas proved with <code>rfl</code>.</p>



<a name="287428861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428861">(Jun 25 2022 at 10:57)</a>:</h4>
<p>The problem with <code>opposite.op_inj_iff</code> is that the two sides are defeq when the lemma is declared, but are no longer defeq after the <code>attribute [irreducible]</code>.</p>



<a name="287428918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428918">(Jun 25 2022 at 10:58)</a>:</h4>
<p>So the same would apply to the next 3 lemmas right?</p>



<a name="287428927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428927">(Jun 25 2022 at 10:59)</a>:</h4>
<p>I think we might already have a linter to spot that type of thing</p>



<a name="287428928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428928">(Jun 25 2022 at 10:59)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14930/commits/29582a79587e66ee95b890e1c119c10cf21ff869">https://github.com/leanprover-community/mathlib/pull/14930/commits/29582a79587e66ee95b890e1c119c10cf21ff869</a></p>



<a name="287428930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428930">(Jun 25 2022 at 10:59)</a>:</h4>
<p>Or maybe not the <code>op_unop</code>/<code>unop_op</code> ones?</p>



<a name="287428937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428937">(Jun 25 2022 at 10:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0/near/287428930">said</a>:</p>
<blockquote>
<p>Or maybe not the <code>op_unop</code>/<code>unop_op</code> ones?</p>
</blockquote>
<p>I think these are safe because the type of the LHS and RHS are syntactically and definitionally the same</p>



<a name="287428990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287428990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287428990">(Jun 25 2022 at 11:00)</a>:</h4>
<p><code>op_inj</code> changes the type of an equality from <code>@eq X</code> to <code>@eq (opposite X)</code></p>



<a name="287429102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287429102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287429102">(Jun 25 2022 at 11:03)</a>:</h4>
<p>I don't really understand any more why we have <code>op (unop x)</code> defeq to <code>x</code> when <code>opposite</code> is irreducible... but anyways it's going away with eta for structures right?</p>



<a name="287429300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287429300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287429300">(Jun 25 2022 at 11:08)</a>:</h4>
<p>The point of making <code>opposite</code> irreducible was to stop things like <code>op x = x</code> being possible to prove or even state</p>



<a name="287429310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287429310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287429310">(Jun 25 2022 at 11:08)</a>:</h4>
<p>Pretty much the entire point of <code>irreducible</code> on types is to make things like <code>op (unop x) = x</code> defeq</p>



<a name="287429318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287429318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287429318">(Jun 25 2022 at 11:09)</a>:</h4>
<p>If we didn't care about that we could just use a structure instead</p>



<a name="287429321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287429321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287429321">(Jun 25 2022 at 11:09)</a>:</h4>
<p>(which indeed is what we probably want to do with eta for structures)</p>



<a name="287436709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287436709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287436709">(Jun 25 2022 at 14:07)</a>:</h4>
<p>Is this a temporary fix, or should these irreducible lemmas not be proven with <code>rfl</code> and <code>iff.rfl</code>?</p>



<a name="287437053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287437053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287437053">(Jun 25 2022 at 14:14)</a>:</h4>
<p>On this note, is it good practice to write down <code>rfl</code> lemmas that are already proven by <code>simp</code>?</p>



<a name="287437467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287437467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287437467">(Jun 25 2022 at 14:23)</a>:</h4>
<p>The commit I link to above is the right solution IMO</p>



<a name="287437586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287437586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287437586">(Jun 25 2022 at 14:25)</a>:</h4>
<p>Either that, or simp should check that the type of a refl-rewritten proof is still defeq to the original with current irreducibility settings</p>



<a name="287437643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287437643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287437643">(Jun 25 2022 at 14:26)</a>:</h4>
<p>But that's no longer blocking this PR anyway, it seems the other type aliases already handle this correctly</p>



<a name="287437663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287437663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287437663">(Jun 25 2022 at 14:26)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14930">#14930</a> is back to fixing broken <code>simp</code>s that are applying lemmas in a slightly different order to before</p>



<a name="287440091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287440091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287440091">(Jun 25 2022 at 15:12)</a>:</h4>
<p>So, the general idea is to avoid <code>dsimp</code> when a proof being <code>rfl</code> depends on reducibility attributes?</p>



<a name="287440141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287440141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287440141">(Jun 25 2022 at 15:12)</a>:</h4>
<p>That probably merits a library note</p>



<a name="287440273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287440273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287440273">(Jun 25 2022 at 15:14)</a>:</h4>
<p>Note that nothing notable has really changed here; we would have the same problem on master if the lemma were written <code>: (opposite.op x = opposite.op y) = (x = y) := rfl</code> (I tested this, I can confirm the same problem appears)</p>



<a name="287442484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287442484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287442484">(Jun 25 2022 at 15:58)</a>:</h4>
<p>Actually, that's really just something that should be documented in <code>dsimp</code> itself if it isn't already</p>



<a name="287442485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287442485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287442485">(Jun 25 2022 at 15:58)</a>:</h4>
<p>Is the idea that anything <code>dsimp</code> gives should also be achievable with <code>change</code>?</p>



<a name="287454685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287454685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287454685">(Jun 25 2022 at 20:52)</a>:</h4>
<p>Something I haven't worked out yet from this change; in <code>simp</code>, do refl lemmas have higher priority than regular ones, or is it just that <code>=</code> lemmas have higher priority than <code> ↔ </code>? (The answer to this shouldn't have changed in 3.44.0, but the relevance has)</p>



<a name="287494143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287494143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287494143">(Jun 26 2022 at 13:44)</a>:</h4>
<p>Ah, yep:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">constant</span> <span class="n">foo</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="kd">constant</span> <span class="n">bar</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="kn">section</span>
<span class="c1">-- one eq, one iff</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kd">lemma</span> <span class="n">foo_eq_bar</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">foo</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">bar</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">9000</span><span class="o">]</span> <span class="kd">lemma</span> <span class="n">foo_one_eiff_true</span> <span class="o">:</span> <span class="n">foo</span> <span class="mi">1</span> <span class="bp">↔</span> <span class="n">true</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">foo</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">foo</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span><span class="o">,</span> <span class="c1">-- priority was ignored</span>
  <span class="n">guard_target</span> <span class="n">bar</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">bar</span> <span class="mi">2</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
<span class="kd">end</span>

<span class="kn">section</span>
<span class="c1">-- both iff</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kd">lemma</span> <span class="n">foo_iff_bar</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">foo</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">bar</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">9000</span><span class="o">]</span> <span class="kd">lemma</span> <span class="n">foo_one_iff_true</span> <span class="o">:</span> <span class="n">foo</span> <span class="mi">1</span> <span class="bp">↔</span> <span class="n">true</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">foo</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">foo</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span><span class="o">,</span> <span class="c1">-- priority was respected</span>
  <span class="n">guard_target</span> <span class="n">true</span> <span class="bp">=</span> <span class="n">bar</span> <span class="mi">2</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
<span class="kd">end</span>
</code></pre></div>



<a name="287494234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287494234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287494234">(Jun 26 2022 at 13:46)</a>:</h4>
<p>I think this means that Lean 3.44.0 has a design flaw; right now <code>rfl</code> iff lemmas are internally (invisibly) promoted to <code>rfl</code> eq lemmas, which makes their priorities surprising (and makes the porting very annoying in <a href="https://github.com/leanprover-community/mathlib/pull/14930">#14930</a>)</p>



<a name="287494247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287494247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287494247">(Jun 26 2022 at 13:46)</a>:</h4>
<p>This is probably fixable, but maybe we should just revert the change and I'll try it again a different way later, now that I know this gotcha</p>



<a name="287496777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287496777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287496777">(Jun 26 2022 at 14:44)</a>:</h4>
<p>Ah, the fix wasn't too bad: <a href="https://github.com/leanprover-community/lean/pull/736">leanprover-community/lean#736</a>. I guess that should be 3.44.1?</p>



<a name="287511889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287511889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287511889">(Jun 26 2022 at 20:15)</a>:</h4>
<p>Is there any way to get mathlib CI to run against an unreleased lean version?</p>



<a name="287512012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287512012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287512012">(Jun 26 2022 at 20:18)</a>:</h4>
<p>I believe so, because Anne did that to backport <code>has_coe_to_fun</code>. Try changing <code>leanpkg.toml</code>?</p>



<a name="287512023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287512023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287512023">(Jun 26 2022 at 20:19)</a>:</h4>
<p>I think what people have done in the past is to point <code>leanpkg.toml</code> to a release on their own fork of Lean.</p>



<a name="287512452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287512452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287512452">(Jun 26 2022 at 20:29)</a>:</h4>
<p>Is there anything more to creating such a release than making a tag? Does elan build lean locally, or do I have to deploy binaries somehow?</p>



<a name="287512764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287512764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287512764">(Jun 26 2022 at 20:37)</a>:</h4>
<p>Yes you just need to make a tag, but please do it on your own fork.</p>



<a name="287513124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287513124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287513124">(Jun 26 2022 at 20:44)</a>:</h4>
<p>Excellent, thanks. I'll convince myself that the change is an improvement before we throw away another version number again</p>



<a name="287516468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287516468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287516468">(Jun 26 2022 at 22:05)</a>:</h4>
<p>What exactly does the uploading of the lean binaries?</p>



<a name="287516521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287516521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287516521">(Jun 26 2022 at 22:06)</a>:</h4>
<p>Currently I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="n">binary</span> <span class="n">package</span> <span class="n">was</span> <span class="n">not</span> <span class="n">provided</span> <span class="n">for</span> <span class="bp">'</span><span class="n">linux'</span>
</code></pre></div>



<a name="287516727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287516727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287516727">(Jun 26 2022 at 22:11)</a>:</h4>
<p>Do I really have to download them from the CI build and reupload them to the release?</p>



<a name="287542723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287542723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287542723">(Jun 27 2022 at 07:41)</a>:</h4>
<p>This is strange.  Pushing to a tag should trigger the github actions, which will automatically upload the releases.  But I don't see any actions being run on the v3.44.1 tag in your repo.  <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span>  Adding the binary manually will of course also work in a pinch.</p>



<a name="287543150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287543150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287543150">(Jun 27 2022 at 07:47)</a>:</h4>
<p>Adding the binary manually did the trick</p>



<a name="287543980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287543980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287543980">(Jun 27 2022 at 07:57)</a>:</h4>
<p>Do you know where the CI script that's supposed to do that is?</p>



<a name="287548616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287548616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287548616">(Jun 27 2022 at 08:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0/near/287513124">said</a>:</p>
<blockquote>
<p>Excellent, thanks. I'll convince myself that the change is an improvement before we throw away another version number again</p>
</blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14984">#14984</a> is passing the build (and awaiting the linter),  and is about half the size of <a href="https://github.com/leanprover-community/mathlib/pull/14930">#14930</a>; so I think the latest patch to Lean is working as intended</p>



<a name="287548792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287548792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287548792">(Jun 27 2022 at 08:48)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/blob/c8a1a26c0aadd59403b5344aca9cedd28db2b077/.github/workflows/on-push.yml">https://github.com/leanprover-community/lean/blob/c8a1a26c0aadd59403b5344aca9cedd28db2b077/.github/workflows/on-push.yml</a></p>



<a name="287556098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556098">(Jun 27 2022 at 10:02)</a>:</h4>
<p>CI was happy (I just pushed a rebase to clean up the history for review so it's running again, the original run was <a href="https://github.com/leanprover-community/mathlib/commit/85aac758bd27f3d3af7fcb54847fbb6fc2ce7009">https://github.com/leanprover-community/mathlib/commit/85aac758bd27f3d3af7fcb54847fbb6fc2ce7009</a>).</p>
<p>Are you happy to release 3.44.1?</p>



<a name="287556123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556123">(Jun 27 2022 at 10:03)</a>:</h4>
<p>Well done Eric for getting to the bottom of this! How will it change the way things work in practice?</p>



<a name="287556170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556170">(Jun 27 2022 at 10:03)</a>:</h4>
<p>Basically it just means that we don't need weird lemmas stated in the form <code>p = q</code> where <code>p q : Prop</code></p>



<a name="287556198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556198">(Jun 27 2022 at 10:04)</a>:</h4>
<p>like <a href="https://leanprover-community.github.io/mathlib_docs/find/set.mem_set_of_eq">docs#set.mem_set_of_eq</a></p>



<a name="287556241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556241">(Jun 27 2022 at 10:04)</a>:</h4>
<p>Or at least, we no longer need them for <code>dsimp</code></p>



<a name="287556360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556360">(Jun 27 2022 at 10:05)</a>:</h4>
<p>There are two reasons we might still need them:</p>
<ul>
<li>Someone feels very strongly about <code>propext</code>, and doesn't want <code>simp</code> to use it. These people can either add <code>=</code> copies of lemmas themselves, or use <code>dsimp</code> before <code>simp</code>, since <code>dsimp</code> doesn't use any axioms</li>
<li><code>=</code> simp lemmas live in a different priority "universe" to <code>iff</code> simp lemmas; the lowest-priority lemmas in the former universe are tried before the highest-priority lemmas in the latter</li>
</ul>



<a name="287556433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556433">(Jun 27 2022 at 10:06)</a>:</h4>
<p>(Discovering that this second bullet point has always been true was the surprise that made 3.44.0 undesirable)</p>



<a name="287556656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556656">(Jun 27 2022 at 10:09)</a>:</h4>
<p>(more notably but unrelated to the thread above, 3.44.x gives us approximate outline and breadcrumb views in vscode)<br>
<a href="/user_uploads/3121/HEQAs0cD3kiQIIrK2AUwrfYq/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/HEQAs0cD3kiQIIrK2AUwrfYq/image.png" title="image.png"><img src="/user_uploads/3121/HEQAs0cD3kiQIIrK2AUwrfYq/image.png"></a></div>



<a name="287556830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287556830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287556830">(Jun 27 2022 at 10:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/pull/737">lean#737</a></p>



<a name="287580426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314930%20Lean%203.44.0/near/287580426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314930.20Lean.203.2E44.2E0.html#287580426">(Jun 27 2022 at 13:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14984">#14984</a> is now green, and points to the real release!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>