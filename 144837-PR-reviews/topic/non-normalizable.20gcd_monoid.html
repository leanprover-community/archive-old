---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html">non-normalizable gcd_monoid</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316888504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316888504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316888504">(Dec 20 2022 at 07:24)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/17984">#17984</a></p>
<p>The idea is stated in the <a href="https://github.com/leanprover-community/mathlib/blob/a1ec8086280da9e4031f377eb6b5f33ca5b41588/counterexamples/not_normalization_monoid.lean#L14-L20">module docstring</a>; I guess there also exist examples from commutative rings, but my construction doesn't produce one. If such examples do exist, we'd need to generalize <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.normalized_gcd_monoid">docs#polynomial.normalized_gcd_monoid</a> to account for them; any other examples?</p>
<p>Many lemmas/instances need to moved; I think I know where they should go, but if they are not interesting enough they can stay, and that's the main reason why I ask for review.</p>
<p>I'd like to tag <span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span>, since you removed normalization from <code>gcd_domain</code> in <a href="https://github.com/leanprover-community/mathlib/pull/9443">#9443</a>.</p>



<a name="316890862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316890862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316890862">(Dec 20 2022 at 07:45)</a>:</h4>
<p>I don't know if it's really impossible to find a normalization, but for rings of integers of number fields it seems quite unnatural if the group of units is big.</p>



<a name="316891468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316891468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316891468">(Dec 20 2022 at 07:50)</a>:</h4>
<p>It's been a while since I touched that :)</p>
<p>It does seem like some of the results from the start of your file could move into mathlib proper, though I'm not quite sure where</p>



<a name="316892372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316892372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316892372">(Dec 20 2022 at 07:57)</a>:</h4>
<p>For noetherian rings like rings of integers, being a gcd_monoid is equivalent to being UFD, and <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.normalization_monoid">docs#unique_factorization_monoid.normalization_monoid</a> shows there aren't counterexamples when class number is 1, but I don't see immediately whether there can be class number &gt;1 examples that don't admit <code>normalization_monoid</code> structures.</p>



<a name="316892836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316892836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316892836">(Dec 20 2022 at 08:01)</a>:</h4>
<p>Being UFD is equivalent to being a PID in this case</p>



<a name="316893783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316893783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316893783">(Dec 20 2022 at 08:08)</a>:</h4>
<p>I am a little confused and with the phone is difficult to read the source, but how we define the normalization on a UFD?</p>



<a name="316893859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316893859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316893859">(Dec 20 2022 at 08:08)</a>:</h4>
<p>Ah, we just choose a random one</p>



<a name="316894163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316894163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316894163">(Dec 20 2022 at 08:11)</a>:</h4>
<p>Still using that def for ring of integers can be quite a pain, since for the integers it creates a diamond</p>



<a name="316895209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316895209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316895209">(Dec 20 2022 at 08:18)</a>:</h4>
<p>Yeah I proposed using <code>nonempty gcd_monoid</code> etc. in <a href="#narrow/stream/116395-maths/topic/.E2.9C.94.20gcd_monoid/near/303539302">this thread</a>. Maybe we should use <code>nonempty gcd_monoid</code> unless the statement requires <code>gcd_monoid</code>, like how we use <code>finite</code> instead of <code>fintype</code>. Maybe <code>nonempty normalized_gcd_monoid</code> is required sometimes, but I guess most thoerems about <code>normalized_gcd_monoid</code> can simply be generalized to <code>gcd_monoid</code>. I don't know about any interesting theorems that requires <code>nonempty normalization_monoid</code> because it seems to be some mathlib artifact that doesn't appear in math textbooks.</p>



<a name="316895929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316895929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316895929">(Dec 20 2022 at 08:23)</a>:</h4>
<p>And I think I can now prove that any ring of integers can be normalized: the group completion of the monoid of associates (minus zero) embeds into the group of fractional ideals, which is freely generated by the prime ideals, and any subgroup of a free abelian group is itself free, hence projective. Then you should be able to apply <a href="https://leanprover-community.github.io/mathlib_docs/find/normalization_monoid_of_monoid_hom_right_inverse">docs#normalization_monoid_of_monoid_hom_right_inverse</a>.</p>



<a name="316897021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316897021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316897021">(Dec 20 2022 at 08:30)</a>:</h4>
<p>Actually I think <a href="https://leanprover-community.github.io/mathlib_docs/find/hahn_series.comm_ring">docs#hahn_series.comm_ring</a> over the <code>M</code> in my PR probably serves as a comm_ring counterexample ...</p>



<a name="316898421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/316898421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#316898421">(Dec 20 2022 at 08:37)</a>:</h4>
<p>I agree it's very weird that we normalization gcd contains data. I would be very surprised if something depends on the actual choice and not only on the existence of a normalization</p>



<a name="318664691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/318664691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#318664691">(Dec 30 2022 at 22:51)</a>:</h4>
<p>If so, we should have a <code>normalization_monoid.ext</code> in the style of <a href="https://leanprover-community.github.io/mathlib_docs/find/group.ext">docs#group.ext</a></p>



<a name="318691240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/non-normalizable%20gcd_monoid/near/318691240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/non-normalizable.20gcd_monoid.html#318691240">(Dec 31 2022 at 05:41)</a>:</h4>
<p>How could we do that? The normalization data isn't determined by the multiplication (it's basically the choice of a splitting of the nonzero elements as a product of the associates with the unit group), while all the data fields of a group (inv, npow, zpow, etc.) are determined by the multiplication. If the result doesn't depend on the choice, I proposed that we should use <code>nonempty (normalized_gcd_monoid α)</code> instead, and I think <code>nonempty (gcd_monoid α)</code> already suffices for all interesting results. When the unit group is trivial, we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/subsingleton_normalized_gcd_monoid_of_unique_units">docs#subsingleton_normalized_gcd_monoid_of_unique_units</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_normalization_monoid_of_unique_units">docs#unique_normalization_monoid_of_unique_units</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>