---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html">#3210, openness of units</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202611602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202611602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202611602">(Jul 01 2020 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> , you <a href="https://github.com/leanprover-community/mathlib/pull/3210#discussion_r447398763">asked</a> me on this PR, </p>
<blockquote>
<p>Why do you have an implicit <code>𝕜</code> here and an explicit <code>𝕜</code> in <code>normed_algebra.zero_ne_one</code>?</p>
</blockquote>
<p>This is just a situation where I didn't know how to do what I really wanted, so maybe you can explain it to me here over chat.</p>



<a name="202611686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202611686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202611686">(Jul 01 2020 at 19:15)</a>:</h4>
<p>I would have guessed that the correct choice was to have an implicit <code>𝕜</code> in all three of the following lemmas:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">norm_one</span> <span class="o">(</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="err">𝕜&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_ring</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">normed_algebra</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">:</span> <span class="err">∥</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="err">𝕜&#39;</span><span class="o">)</span><span class="err">∥</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="o">(</span><span class="n">norm_algebra_map_eq</span> <span class="err">𝕜&#39;</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="err">𝕜</span><span class="o">))</span>

<span class="kn">lemma</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">zero_ne_one</span> <span class="o">(</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="err">𝕜&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_ring</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">normed_algebra</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="err">𝕜&#39;</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="o">(</span><span class="n">norm_pos_iff</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">norm_one</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">to_nonzero</span> <span class="o">{</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="err">𝕜&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_ring</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">normed_algebra</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="err">𝕜&#39;</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">zero_ne_one</span> <span class="o">:=</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">zero_ne_one</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span> <span class="o">}</span>
</code></pre></div>



<a name="202611725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202611725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202611725">(Jul 01 2020 at 19:15)</a>:</h4>
<p>But when I make this switch, I get the following error, which I don't know how to fix:</p>



<a name="202612076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202612076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202612076">(Jul 01 2020 at 19:18)</a>:</h4>
<p>in the proof of the second lemma (<code>zero_ne_one</code>), when I drop the <code>𝕜</code> from the <code>rw</code>, 3 new goals appear,  complaining about lack of <code>normed_algebra</code> and <code>normed_field</code> instances.</p>



<a name="202612622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202612622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202612622">(Jul 01 2020 at 19:22)</a>:</h4>
<p>I think that Lean can't guess <code>𝕜</code> based on <code>𝕜'</code>, so <code>𝕜</code> should be an explicit argument. I don't know whether you want <code>𝕜'</code> to be explicit or not.</p>



<a name="202612737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202612737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202612737">(Jul 01 2020 at 19:23)</a>:</h4>
<p>OK, is this a general rule for all facts about normed algebras, normed spaces, vector spaces, modules, ..., that the base field/ring should be explicit in all definitions and lemmas?</p>



<a name="202613545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613545">(Jul 01 2020 at 19:30)</a>:</h4>
<p>Unless you have an argument of type <code>𝕜</code>, yes.</p>



<a name="202613636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613636">(Jul 01 2020 at 19:31)</a>:</h4>
<p>E.g., <code>has_fderiv_at</code> doesn't take <code>𝕜</code> as an argument but <code>differentiable_at</code> does.</p>



<a name="202613644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613644">(Jul 01 2020 at 19:31)</a>:</h4>
<p>Thank you!</p>



<a name="202613669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613669">(Jul 01 2020 at 19:31)</a>:</h4>
<p>If you don't mind, let me ask you another question about variables.</p>



<a name="202613702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613702">(Jul 01 2020 at 19:31)</a>:</h4>
<p>I tried rewriting the first lemma with the variables introduced separately,</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="o">(</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="err">𝕜&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="err">𝕜</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_ring</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">normed_algebra</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">norm_one</span> <span class="o">:</span> <span class="err">∥</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="err">𝕜&#39;</span><span class="o">)</span><span class="err">∥</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="o">(</span><span class="n">norm_algebra_map_eq</span> <span class="err">𝕜&#39;</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="err">𝕜</span><span class="o">))</span>
</code></pre></div>



<a name="202613796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202613796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202613796">(Jul 01 2020 at 19:32)</a>:</h4>
<p>This gives the error <code>unknown identifier '𝕜'</code> -- why?</p>



<a name="202614304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614304">(Jul 01 2020 at 19:36)</a>:</h4>
<p>You can use <code>include 𝕜</code> after <code>variables</code>.</p>



<a name="202614426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614426">(Jul 01 2020 at 19:37)</a>:</h4>
<p>Otherwise only variables mentioned in the statement of a lemma/definition and the corresponding <code>instance</code>s are visible in <code>tactic</code> mode proofs.</p>



<a name="202614440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614440">(Jul 01 2020 at 19:37)</a>:</h4>
<p>Thank you, that works!  I will read about <code>include</code>.</p>



<a name="202614589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614589">(Jul 01 2020 at 19:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units/near/202614426">said</a>:</p>
<blockquote>
<p>Otherwise only variables mentioned in the statement of a lemma/definition and the corresponding <code>instance</code>s are visible in <code>tactic</code> mode proofs.</p>
</blockquote>
<p>Are you saying, by the way, that in term mode I would not have this error?</p>



<a name="202614715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614715">(Jul 01 2020 at 19:39)</a>:</h4>
<p>Yes.</p>



<a name="202614968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202614968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202614968">(Jul 01 2020 at 19:41)</a>:</h4>
<p>Thanks again.</p>



<a name="202615059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202615059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202615059">(Jul 01 2020 at 19:42)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#more-on-sections">https://leanprover.github.io/theorem_proving_in_lean/interacting_with_lean.html#more-on-sections</a></p>



<a name="202615081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233210%2C%20openness%20of%20units/near/202615081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233210.2C.20openness.20of.20units.html#202615081">(Jul 01 2020 at 19:42)</a>:</h4>
<p>Read near "Note that double does not have y as argument"</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>