---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html">#4273 intervals and with_top/bot</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="211343762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211343762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211343762">(Sep 26 2020 at 05:36)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/issues/4273">#4273</a> linter fails because <code>simp</code> can apply <code>with_bot</code> lemmas to <code>with_top</code>. How can I avoid this? BTW, it can also apply <code>with_top.range_coe</code> to <code>ennreal</code> creating <code>with_top nnreal</code> in the output; this makes it harder to <code>apply</code> some lemmas afterwards.</p>



<a name="211348302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211348302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211348302">(Sep 26 2020 at 07:57)</a>:</h4>
<p>I had problems like this with <code>with_zero</code> and <code>with_one</code> and I fixed them all by making them both irreducible</p>



<a name="211348349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211348349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211348349">(Sep 26 2020 at 07:58)</a>:</h4>
<p>It broke very little, and a lot of what broke could either be fixed by writing better code (ie not abusing definitional equality as much) or just temporarily marking them as reducible in a file</p>



<a name="211348643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211348643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211348643">(Sep 26 2020 at 08:06)</a>:</h4>
<p>Yes, making them both irreducible makes sense, and is probably a good thing (after proving the relevant API).</p>



<a name="211348856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211348856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211348856">(Sep 26 2020 at 08:13)</a>:</h4>
<p>Yes, "writing better code" sometimes meant "filling in some API"</p>



<a name="211348910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%234273%20intervals%20and%20with_top/bot/near/211348910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.234273.20intervals.20and.20with_top.2Fbot.html#211348910">(Sep 26 2020 at 08:15)</a>:</h4>
<p>But it was the only way I could get the simp linter to be happy. Before this change it was for me very unpredictable what was going to fire, because sometimes option lemmas fired too (to my surprise)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>