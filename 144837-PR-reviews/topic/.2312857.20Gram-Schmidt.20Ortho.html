---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html">#12857 Gram-Schmidt Ortho</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="277909149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277909149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277909149">(Apr 05 2022 at 16:49)</a>:</h4>
<p>Hello, my PR about Gram-Schmidt is awaiting review for over a week, may I ask for someone have a look on it?</p>



<a name="277909796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277909796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277909796">(Apr 05 2022 at 16:54)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span> Thanks for the ping. I left some minor comments.</p>



<a name="277911336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277911336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277911336">(Apr 05 2022 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Thank you! I saw these comments and they are really helpful, I have fixed them <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="277921183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277921183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277921183">(Apr 05 2022 at 18:12)</a>:</h4>
<p>I showed how to golf the orthogonality proof using strong induction.</p>



<a name="277924310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277924310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277924310">(Apr 05 2022 at 18:33)</a>:</h4>
<p>Can you generalize the indexing type to a arbitrary well-ordered type (which will then include <code>‚Ñï</code> but also <code>fin n</code>), by taking as definition</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Gram-Schmidt process -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">gram_schmidt</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">I</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">‚Üí</span> <span class="n">E</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">orthogonal_projection</span>
    <span class="o">(</span><span class="n">submodule.span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">set.range</span> <span class="bp">$</span> <span class="n">gram_schmidt</span> <span class="bp">‚àò</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="bp">//</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">}</span> <span class="bp">‚Üí</span> <span class="n">I</span><span class="o">)))</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span>
<span class="n">using_well_founded</span> <span class="o">{</span><span class="n">dec_tac</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">i.2</span><span class="o">]}</span>
</code></pre></div>
<p>We would need to replace <code>submodule.span</code> with the "completed span". Does something like that exist? cc <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> <span class="user-mention" data-user-id="412682">@Moritz Doll</span></p>



<a name="277924907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277924907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277924907">(Apr 05 2022 at 18:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.topological_closure">docs#submodule.topological_closure</a></p>



<a name="277924940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277924940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277924940">(Apr 05 2022 at 18:36)</a>:</h4>
<p>Is that what you want?</p>



<a name="277928564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277928564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277928564">(Apr 05 2022 at 19:01)</a>:</h4>
<p>It sounds like you are making a <a href="https://leanprover-community.github.io/mathlib_docs/find/hilbert_basis">docs#hilbert_basis</a>, right?</p>



<a name="277928931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277928931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277928931">(Apr 05 2022 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span> Would you want to generalize in that direction?</p>



<a name="277930212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277930212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277930212">(Apr 05 2022 at 19:13)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Thank you for your comments! I am not very familiar with that part, but I think I would have a try on it first. I would be appreciate if you can give me more hints here<span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="277930890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277930890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277930890">(Apr 05 2022 at 19:19)</a>:</h4>
<p>Hmm, I'm currently unsure if we want to do a very general version, or whether we want two versions...</p>



<a name="277930941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277930941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277930941">(Apr 05 2022 at 19:19)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> or <span class="user-mention" data-user-id="311453">@Fr√©d√©ric Dupuis</span> can indicate what they think is best.</p>



<a name="277930971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277930971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277930971">(Apr 05 2022 at 19:19)</a>:</h4>
<p>(I'm an algebraist, so I've only ever needed the finite version... <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span>)</p>



<a name="277932980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277932980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277932980">(Apr 05 2022 at 19:37)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span> Ooh, if this is on the undergrad list, please update <code>undergrad.yaml</code> (-;</p>



<a name="277933235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277933235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277933235">(Apr 05 2022 at 19:40)</a>:</h4>
<p>I just took a look at the PR. I think it would make sense to have the following:</p>
<ol>
<li>A version only slightly generalized from what currently exists, where we replace <code>‚Ñï</code> with an encodable type. Although if people think we really only want <code>‚Ñï</code>, I could likely be convinced. Pretty much everything should be able to be translated as is. However, there could be an addendum to the effect that if the space is complete, then the closure of the span of (linearly independent) <code>f : ‚Ñï ‚Üí E</code> has the gram-schmidt collection as a Hilbert basis, as Heather suggested. (This addendum could be a separate PR.)</li>
<li>For an arbitrary well-ordered type, we would need the underlying space to be complete so that the closure of the span of an initial segment is  a complete space, which would then allow you to have the orthogonal projection onto that subspace. This is the reason to keep the two separate (so that the simpler version doesn't need completeness). I've never needed Gram-Schmidt for an uncountable collection before, <del>but it might be handy</del> (see below). In any case, this should definitely be a separate PR.</li>
</ol>



<a name="277934202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277934202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277934202">(Apr 05 2022 at 19:48)</a>:</h4>
<p>Actually, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I just realized why I've never worked with gram-schmidt for anything other than <code>‚Ñï</code>. It's because it isn't well-behaved. Take the ordinal <code>œâ + 1</code> and define <code>f : (œâ + 1) ‚Üí ‚Ñì¬≤(‚Ñï)</code> (sorry, I'm not too familiar with actual mathlib notation here) by setting <code>f n</code> to be the standard basis vector and then define the last vector to be any element of <code>‚Ñì¬≤(‚Ñï)</code> with infinite support. Then this collection will be linearly independent, but the last vector of the gram-schmidt process will be zero.</p>



<a name="277934646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277934646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277934646">(Apr 05 2022 at 19:52)</a>:</h4>
<p>If you wanted it to behave nicely in greater generality, then the assumption shouldn't be that the collection is linearly independent, but that each vector is not in the closure of the span of the previous ones, but this condition is significantly less nice to work with.</p>



<a name="277935135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277935135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277935135">(Apr 05 2022 at 19:57)</a>:</h4>
<p>Generalizing from <code>‚Ñï</code> to an encodable type would be nice if it's easy to do (I think it is but maybe there are surprises...). I think a Hilbert basis version can wait for a subsequent PR though!</p>



<a name="277937610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/277937610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#277937610">(Apr 05 2022 at 20:15)</a>:</h4>
<p>If nothing else, it would be nice if this were easy to use on <code>fin n</code></p>



<a name="278468498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278468498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278468498">(Apr 10 2022 at 13:36)</a>:</h4>
<p>Hello, I am wondering would that be possible for another PR to generalize a more general version?</p>



<a name="278474423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278474423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278474423">(Apr 10 2022 at 15:39)</a>:</h4>
<p>Are you having trouble generalizing to an encodable type? If so, where are you having issues?</p>



<a name="278489668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278489668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278489668">(Apr 10 2022 at 21:03)</a>:</h4>
<p><span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> I am hitting trouble on a few questions. As suggested, I tried to generalize from N to an encodable type, but I have no idea on how to formalize following things : </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="kd">lemma</span> <span class="n">span_gram_schmidt</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">gram_schmidt</span> <span class="bp">ùïú</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">Iic</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="n">Iic</span> <span class="n">c</span><span class="o">)</span>

 <span class="kd">lemma</span> <span class="n">gram_schmidt_ne_zero</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h‚ÇÄ</span> <span class="o">:</span> <span class="n">linear_independent</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">f</span> <span class="bp">‚àò</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n.succ</span> <span class="bp">‚Üí</span> <span class="n">‚Ñï</span><span class="o">)))</span> <span class="o">:</span>  <span class="n">gram_schmidt</span> <span class="bp">ùïú</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="mi">0</span> <span class="o">:=</span>
</code></pre></div>
<p>here is me new definition with encodable of gram schmidt : </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">gram_schmidt_aux</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">E</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">-</span> <span class="bp">‚àë</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">orthogonal_projection</span> <span class="o">(</span><span class="bp">ùïú</span> <span class="bp">‚àô</span> <span class="n">gram_schmidt_aux</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span>
<span class="n">using_well_founded</span> <span class="o">{</span><span class="n">dec_tac</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">i.prop</span><span class="o">]}</span>

<span class="sd">/-- Gram-Schmidt process -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">gram_schmidt</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Œπ</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span>
  <span class="o">:=</span> <span class="n">gram_schmidt_aux</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span><span class="o">,</span> <span class="o">(((</span><span class="n">decode‚ÇÇ</span> <span class="n">Œπ</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">get_or_else</span> <span class="mi">0</span><span class="o">))</span> <span class="o">(</span><span class="n">encode</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>
<p>Could somebody give me any hints on that?</p>



<a name="278489917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278489917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278489917">(Apr 10 2022 at 21:09)</a>:</h4>
<p>Read <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="278490007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278490007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278490007">(Apr 10 2022 at 21:11)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Ya√´l Dillies</span>  Thank you! better now :)</p>



<a name="278490790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278490790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278490790">(Apr 10 2022 at 21:29)</a>:</h4>
<p>I think the way to go would be to define it for a type with a linear order, so that not much changes in the actual code. The well-foundedness proof might then need extra stuff like encodability but hopefully that's it.</p>



<a name="278518416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278518416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278518416">(Apr 11 2022 at 07:49)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span> Let us know how it goes. Otherwise we can just focus on the current version, and do tweaks and generalizations on a follow-up PR.</p>



<a name="278521669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278521669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278521669">(Apr 11 2022 at 08:27)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Thank you!  I am currently working on generalizing from N to an encodable type as suggested. But I feel unapproachable when I tried to deal with questions above and also some reviewers suggested other possible like well order or linear order, so I am not sure what's going on next?</p>



<a name="278522549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278522549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278522549">(Apr 11 2022 at 08:34)</a>:</h4>
<p><span class="user-mention" data-user-id="311453">@Fr√©d√©ric Dupuis</span>  Thank you for your suggestions! I will try to use the definition of  <code>gram_schmidt</code>in a linear order and see how it's going.</p>



<a name="278565746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278565746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278565746">(Apr 11 2022 at 14:55)</a>:</h4>
<p>Could someone give me any hints on definition of gram-schmidt with linear order here? <br>
I tried to use suggestion above : </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Gram-Schmidt process -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">gram_schmidt</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">I</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">‚Üí</span> <span class="n">E</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">orthogonal_projection</span>
    <span class="o">(</span><span class="n">submodule.span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">set.range</span> <span class="bp">$</span> <span class="n">gram_schmidt</span> <span class="bp">‚àò</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="bp">//</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">}</span> <span class="bp">‚Üí</span> <span class="n">I</span><span class="o">)))</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span>
<span class="n">using_well_founded</span> <span class="o">{</span><span class="n">dec_tac</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">i.2</span><span class="o">]}</span>
</code></pre></div>
<p>but I don't know how to deal with completeness here :(<br>
Also, do I replace the old version with this new definition or I keep both two here?</p>



<a name="278577975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278577975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278577975">(Apr 11 2022 at 16:15)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span> give me until the end of the day to try and outline the ideas. I'm not feeling the best, so I won't be able to get to it until later. I know there was a lot that was originally suggested, but then we decided that most of it should wait until later (if we do it at all). I will make clear exactly what the goal is.</p>



<a name="278579182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278579182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278579182">(Apr 11 2022 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="197836">@Jireh Loreaux</span>  Thank you for your reply! I do feel a little confused with what should I go next here.  :-)</p>



<a name="278579225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278579225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278579225">(Apr 11 2022 at 16:24)</a>:</h4>
<p>I might have some time to look at this tomorrow</p>



<a name="278579476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278579476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278579476">(Apr 11 2022 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>  Thank you! :-)</p>



<a name="278697540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278697540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278697540">(Apr 12 2022 at 14:06)</a>:</h4>
<p>Waiting for some suggestions here... <span aria-label="robot" class="emoji emoji-1f916" role="img" title="robot">:robot:</span></p>



<a name="278698244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698244">(Apr 12 2022 at 14:12)</a>:</h4>
<p>Sorry, I was feeling too bad to get anything done yesterday. <span class="user-mention" data-user-id="310045">@Eric Wieser</span> When I sat down to do this today I realized that I think we might have some useful API missing for encodable types. In particular, while I know we don't want a <code>has_well_founded</code> instance for encdoable types, it might be nice to pull back the natural well order on ‚Ñï vie the <code>encode</code> map. I saw <a href="https://leanprover-community.github.io/mathlib_docs/find/measure">docs#measure</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_wf">docs#measure_wf</a>, but it would be nice if there were a bit more API around it. For example, if <code>Œπ</code> is encodable, and <code>n : Œπ</code>, it would be nice if we had <code>{i : Œπ | i &lt; n}</code> as a finset, where <code>&lt;</code> is the pullback. Am I missing this API, or does it just not exist? If it doesn't, is there are reason, or should I develop it?</p>



<a name="278698458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698458">(Apr 12 2022 at 14:14)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.Iio">docs#finset.Iio</a></p>



<a name="278698637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698637">(Apr 12 2022 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Ya√´l Dillies</span>, encodable types aren't locally finite though right?</p>



<a name="278698676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698676">(Apr 12 2022 at 14:15)</a>:</h4>
<p>Unless they have an <code>le</code> that agrees with their encoding</p>



<a name="278698686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698686">(Apr 12 2022 at 14:15)</a>:</h4>
<p>They should be under the pullback order, right?</p>



<a name="278698688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698688">(Apr 12 2022 at 14:15)</a>:</h4>
<p>Yeah, exactly</p>



<a name="278698806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698806">(Apr 12 2022 at 14:16)</a>:</h4>
<p>Is <code>[linear_order I] [locally_finite I]</code> the generalization we want?</p>



<a name="278698880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698880">(Apr 12 2022 at 14:16)</a>:</h4>
<p>I don't think we need that. All we want to do is pullback the order from ‚Ñï. (not for all encodable types, just locally for this gram-schmidt)</p>



<a name="278698916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698916">(Apr 12 2022 at 14:17)</a>:</h4>
<p>I think all we care about is <code>‚Ñï</code> and <code>fin n</code>, really</p>



<a name="278698956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278698956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278698956">(Apr 12 2022 at 14:17)</a>:</h4>
<p>Sure, but it sounds like right now we're leaning towards <code>encodable I</code>?</p>



<a name="278699019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699019">(Apr 12 2022 at 14:17)</a>:</h4>
<p>In my opinion <code>[linear_order I] [locally_finite I]</code> is nicer, because it uses the "obvious" order on the type</p>



<a name="278699103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699103">(Apr 12 2022 at 14:18)</a>:</h4>
<p>And you can always turn <code>encodable I</code> into those typeclasses by applying the pullback order</p>



<a name="278699119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699119">(Apr 12 2022 at 14:18)</a>:</h4>
<p>What about <code>Œ± \hookright ‚Ñï</code>?</p>



<a name="278699191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699191">(Apr 12 2022 at 14:19)</a>:</h4>
<p>That way, you can control the order in which orthogonalisation happens.</p>



<a name="278699215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699215">(Apr 12 2022 at 14:19)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> , don't we still need a well-order so that we can define the gram-schmidt process by induction?</p>



<a name="278699411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699411">(Apr 12 2022 at 14:20)</a>:</h4>
<p>Ah, you need <code>order_bot I</code> too</p>



<a name="278699547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699547">(Apr 12 2022 at 14:21)</a>:</h4>
<p>I believe that's still not what you want, because ordinals aren't locally finite.</p>



<a name="278699562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699562">(Apr 12 2022 at 14:21)</a>:</h4>
<p><del>I think this wouldn't work for <code>fin n</code> because we don't have these type classes, right?</del></p>



<a name="278699676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699676">(Apr 12 2022 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Ya√´l Dillies</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho/near/278699547">said</a>:</p>
<blockquote>
<p>I believe that's still not what you want, because ordinals aren't locally finite.</p>
</blockquote>
<p>But they're encodable? <a href="https://leanprover-community.github.io/mathlib_docs/find/ordinal.encodable">docs#ordinal.encodable</a><br>
That doesn't sound right to me</p>



<a name="278699775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699775">(Apr 12 2022 at 14:23)</a>:</h4>
<p>That link doesn't work</p>



<a name="278699797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699797">(Apr 12 2022 at 14:23)</a>:</h4>
<p>Are they?</p>



<a name="278699803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699803">(Apr 12 2022 at 14:23)</a>:</h4>
<p>Only certain ordinals should be encodable.</p>



<a name="278699862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699862">(Apr 12 2022 at 14:23)</a>:</h4>
<p>We do not mean ordinals, we mean <code>ordinal</code>, Jireh.</p>



<a name="278699912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699912">(Apr 12 2022 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Ya√´l Dillies</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho/near/278699547">said</a>:</p>
<blockquote>
<p>I believe that's still not what you want, because ordinals aren't locally finite.</p>
</blockquote>
<p>I have no idea what you mean by this</p>



<a name="278699967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278699967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278699967">(Apr 12 2022 at 14:24)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>œâ</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, \omega]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">œâ</span><span class="mclose">]</span></span></span></span> is infinite.</p>



<a name="278700097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278700097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278700097">(Apr 12 2022 at 14:25)</a>:</h4>
<p>But can't <code>ordinal</code> still be uncountable? So there can't be an encoding?</p>



<a name="278700199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278700199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278700199">(Apr 12 2022 at 14:26)</a>:</h4>
<p>Yeah, my point was that it failed even more badly <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="278701181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701181">(Apr 12 2022 at 14:32)</a>:</h4>
<p>Gram-Schmidt does not apply to omega+1 right? You can't take the limit at the limit ordinal. Is there any example of a situation where G-S does something meaningful which isn't fin n or nat? Or am I missing something?</p>



<a name="278701225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701225">(Apr 12 2022 at 14:33)</a>:</h4>
<p>FYI: <code>fin n</code> does not have an <code>order_bot</code> instance. I guess this is just an oversight.</p>



<a name="278701268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701268">(Apr 12 2022 at 14:33)</a>:</h4>
<p>Maybe fin 0 has no bot ;-)</p>



<a name="278701280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701280">(Apr 12 2022 at 14:33)</a>:</h4>
<p><code>fin (n + 1)</code> does!</p>



<a name="278701465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701465">(Apr 12 2022 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, right, I gave this example a while ago. In order for it to do something interesting you don't need linear independence, you need the stronger condition that each vector is not in the closure of the span of the previous ones (and you need a complete space). That's why we're restricting to things like encodable types.</p>



<a name="278701920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701920">(Apr 12 2022 at 14:38)</a>:</h4>
<p>Here's the version I was thinking of:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">locally_finite_order.to_has_well_founded</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span>
  <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">order_bot</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">locally_finite_order</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_well_founded</span> <span class="n">Œπ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">r</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">),</span>
  <span class="n">wf</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">convert</span> <span class="n">measure_wf</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">i</span> <span class="o">:</span> <span class="n">Œπ</span><span class="o">,</span> <span class="o">(</span><span class="n">finset.Iic</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">card</span><span class="o">)</span> <span class="n">using</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">ext</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">measure</span><span class="o">,</span> <span class="n">inv_image</span><span class="o">],</span>
    <span class="gr">sorry</span> <span class="c1">-- a &lt; b ‚Üî (finset.Iic a).card &lt; (finset.Iic b).card</span>
  <span class="kd">end</span> <span class="o">}</span>


<span class="sd">/-- Gram-Schmidt process -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">gram_schmidt</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">order_bot</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">locally_finite_order</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">E</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">-</span> <span class="bp">‚àë</span> <span class="n">i</span> <span class="k">in</span> <span class="o">(</span><span class="n">finset.Iio</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">attach</span><span class="o">,</span> <span class="n">orthogonal_projection</span> <span class="o">(</span><span class="bp">ùïú</span> <span class="bp">‚àô</span> <span class="n">gram_schmidt</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span>
<span class="n">using_well_founded</span> <span class="o">{</span><span class="n">dec_tac</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">finset.mem_Iio.mp</span> <span class="n">i.prop</span><span class="o">]}</span>
</code></pre></div>



<a name="278701994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278701994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278701994">(Apr 12 2022 at 14:39)</a>:</h4>
<p>I guess this doesn't work for <code>fin 0</code> though</p>



<a name="278702067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702067">(Apr 12 2022 at 14:39)</a>:</h4>
<p>But I guess we don't care about <code>fin 0</code>.</p>



<a name="278702250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702250">(Apr 12 2022 at 14:40)</a>:</h4>
<p>I think we do care, after all 0-dimensional vector spaces are perfectly reasonable.</p>



<a name="278702321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702321">(Apr 12 2022 at 14:41)</a>:</h4>
<p>Do we have a propositional version of <code>order_bot</code> that is true on <code>empty</code>? "does not have multiple bottom elements"</p>



<a name="278702418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702418">(Apr 12 2022 at 14:41)</a>:</h4>
<p>Reid, sure, but why would you ever apply Gram-Schmidt in such a situation? You don't even have linearly independent vectors?</p>



<a name="278702514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702514">(Apr 12 2022 at 14:42)</a>:</h4>
<p>Isn't <code>{}</code> a set of linearly independent vectors in 0D?</p>



<a name="278702527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702527">(Apr 12 2022 at 14:42)</a>:</h4>
<p>Hmm... <code>is_empty (no_bot_order Œ±)</code> or something?</p>



<a name="278702682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702682">(Apr 12 2022 at 14:43)</a>:</h4>
<p>I just want to remark that one reason for this work is that G-S is on the undergraduate to-do list and a few people are realising that actually clearing this list, random though it is, is going to be a milestone. Jiale is a first year undergraduate at Imperial and I just want to make sure that this attempt to generalise the result out of the park doesn't end up with a result of 0 PRs and someone having to go back to the drawing board later.</p>



<a name="278702817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278702817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278702817">(Apr 12 2022 at 14:44)</a>:</h4>
<p>Kevin, understood. We'll definitely get it working soon, we really only want ‚Ñï and <code>fin n</code>.</p>



<a name="278703389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278703389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278703389">(Apr 12 2022 at 14:48)</a>:</h4>
<p>I think being able to support <code>lex (prod (fin n) (fin m))</code> would also be nice, but certainly less important</p>



<a name="278703587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278703587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278703587">(Apr 12 2022 at 14:50)</a>:</h4>
<p>Maybe "care" is a bit of a strong word, but for uniformity it would be preferable to have statements like e.g. "every fin-dim inner product space has an orthonormal basis"</p>



<a name="278703653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278703653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278703653">(Apr 12 2022 at 14:50)</a>:</h4>
<p>We already have that statement elsewhere, <del>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/exists_orthogonal_basis">docs#exists_orthogonal_basis</a></del> <a href="https://leanprover-community.github.io/mathlib_docs/find/std_orthonormal_basis">docs#std_orthonormal_basis</a></p>



<a name="278703685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278703685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278703685">(Apr 12 2022 at 14:50)</a>:</h4>
<p>OK, pick some other use in that case</p>



<a name="278703709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278703709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278703709">(Apr 12 2022 at 14:50)</a>:</h4>
<p>Maybe it would be best to keep only the nat version  for now, and focus our review efforts on simplifying the existing proofs. Generalizing will be easier later if the proofs are shorter</p>



<a name="278704493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278704493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278704493">(Apr 12 2022 at 14:55)</a>:</h4>
<p>To me, the biggest concern is that surely we must be duplicating most of the proof for <a href="https://leanprover-community.github.io/mathlib_docs/find/std_orthonormal_basis">docs#std_orthonormal_basis</a>, and that therefore we ought to be able to reuse some lemmas used to prove that (or vice versa)</p>



<a name="278705274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278705274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278705274">(Apr 12 2022 at 15:00)</a>:</h4>
<p>I don't think so. This proof goes by way of constructing maximal orthonormal sets containing a given orthonormal set.</p>



<a name="278705428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278705428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278705428">(Apr 12 2022 at 15:01)</a>:</h4>
<p>The "vice versa" might apply though</p>



<a name="278705538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278705538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278705538">(Apr 12 2022 at 15:01)</a>:</h4>
<p>Even just the auxiliary steps in the proof which say "And the new construction is still mutually orthogonal" might be extractable to lemmas</p>



<a name="278707549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278707549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278707549">(Apr 12 2022 at 15:14)</a>:</h4>
<p>I'm just not yet convinced there's a close connection. The heart of <a href="https://leanprover-community.github.io/mathlib_docs/find/std_orthonormal_basis">docs#std_orthonormal_basis</a> is <a href="https://leanprover-community.github.io/mathlib_docs/find/exists_maximal_orthonormal">docs#exists_maximal_orthonormal</a>, which uses a Zorn argument. At no point is it doing anything like Gram-Schmidt. Of course, once we have Gram-Schmidt, yes, it would be possible to replace the proof of <code>std_orthonormal_basis</code>, but why would we?</p>
<p>I'm not claiming that we shouldn't make the current PR as modular as possible. We should extract lemmas where appropriate. I'm just claiming that I don't think it's connected to <code>std_orthonormal_basis</code>.</p>



<a name="278744430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278744430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278744430">(Apr 12 2022 at 19:50)</a>:</h4>
<p>Thanks all! I guess I could focus more on <code>N</code> and <code>fin n</code> and try to simplify the existing proofs now.  :)</p>



<a name="278883470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278883470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278883470">(Apr 13 2022 at 20:10)</a>:</h4>
<p>Hello, may I ask someone to have a review on my code? I am trying to simplify the existing proof about span. But I couldn't get a good way to simplify my proof.  </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Gram-Schmidt process preserves span -/</span>
<span class="kd">lemma</span> <span class="n">span_gram_schmidt</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">gram_schmidt</span> <span class="bp">ùïú</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">Iic</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">span</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="n">Iic</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> suggested using a lemma like <code>Iic n.succ = insert n.succ (Iic n)</code> but I am not sure how to work with it. :(</p>



<a name="278883954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278883954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278883954">(Apr 13 2022 at 20:14)</a>:</h4>
<p>Your proof worked by jnducting on <code>c</code>; my thinking was that that lemma combined with <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.span_insert">docs#submodule.span_insert</a> lets you easily apply your inductive hypothesis, and your left with only a bit of cleanup</p>



<a name="278885918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278885918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278885918">(Apr 13 2022 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>  sorry I am a bit confused since I saw <code>span_insert</code> working on forms like <code>span R (insert x s)</code>, but in my proof either it's like <code>span ùïú (f ''  insert c.succ (Iic c)) </code> or like <code>span ùïú (gram_schmidt ùïú f ''  insert c.succ (Iic c))</code>.</p>



<a name="278885952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278885952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278885952">(Apr 13 2022 at 20:30)</a>:</h4>
<p><del>docs#set.image_insert</del></p>



<a name="278885960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278885960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278885960">(Apr 13 2022 at 20:30)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.image_insert_eq">docs#set.image_insert_eq</a></p>



<a name="278886001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278886001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278886001">(Apr 13 2022 at 20:31)</a>:</h4>
<p>Arf! Point for Eric</p>



<a name="278886082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278886082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278886082">(Apr 13 2022 at 20:31)</a>:</h4>
<p>I only know that one because I started trying to prove it myself</p>



<a name="278886241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278886241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278886241">(Apr 13 2022 at 20:32)</a>:</h4>
<p>Probably that lemma should be renamed to match <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.image_insert">docs#finset.image_insert</a></p>



<a name="278886257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278886257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278886257">(Apr 13 2022 at 20:33)</a>:</h4>
<p>Yeah, that's the one I know by heart.</p>



<a name="278886281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278886281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278886281">(Apr 13 2022 at 20:33)</a>:</h4>
<p>But that rename is not in scope for Gram-schmidt obviously</p>



<a name="278896124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278896124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278896124">(Apr 13 2022 at 21:54)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>  Thank you! I applied that lemma and it makes proof much clearer. May I ask how to deal with the lemma you given?  Do I wait it until being merged first or do I write something like that in my proof and wait for improvement later?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="bp">....</span>
<span class="kd">begin</span>
<span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">Iic</span> <span class="n">c.succ</span> <span class="bp">=</span> <span class="n">insert</span> <span class="n">c.succ</span> <span class="o">(</span><span class="n">Iic</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
<span class="bp">...</span>
<span class="kd">end</span>
</code></pre></div>



<a name="278925623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278925623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278925623">(Apr 14 2022 at 05:50)</a>:</h4>
<p>That looks reasonable to me. <span class="user-mention" data-user-id="387244">@Ya√´l Dillies</span>, is your PR adding that entire family of lemmas imminent, or should we just add that one for now?</p>



<a name="278994103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/278994103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#278994103">(Apr 14 2022 at 17:13)</a>:</h4>
<p>May I ask for someone to have a review on my code?  (Waiting for 100th conversation :) )</p>



<a name="279189299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279189299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279189299">(Apr 16 2022 at 22:24)</a>:</h4>
<p>Could anyone look at this PR again? I have (or I think) tried my best to simplify the proof and it looks much better now :)</p>



<a name="279223889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279223889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279223889">(Apr 17 2022 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="471791">@Jiale Miao</span>, there you have it! <a href="https://github.com/leanprover-community/mathlib/pull/13486">#13486</a></p>



<a name="279436862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279436862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279436862">(Apr 19 2022 at 16:50)</a>:</h4>
<p>Could anyone have a look on this PR? I have added Yael‚Äôs lemma into my codeüòÉ</p>



<a name="279515234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279515234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279515234">(Apr 20 2022 at 08:54)</a>:</h4>
<p>Thank you all! I have fixed them :)</p>



<a name="279515458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279515458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279515458">(Apr 20 2022 at 08:56)</a>:</h4>
<p>Cool! If CI is happy, let's kick this on the merge queue! I gave you the permission to do this yourself after the PR has a green checkmark.</p>



<a name="279515751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312857%20Gram-Schmidt%20Ortho/near/279515751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiale Miao <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312857.20Gram-Schmidt.20Ortho.html#279515751">(Apr 20 2022 at 08:59)</a>:</h4>
<p>Thank you!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>