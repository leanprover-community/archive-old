---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html">#13996 right actions on restrict_scalars</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282433830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/282433830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#282433830">(May 15 2022 at 23:10)</a>:</h4>
<p>27 messages were moved here from <a class="stream-topic" data-stream-id="116395" href="/#narrow/stream/116395-maths/topic/left.20vs.20right.20modules.20in.20tensor.20products">#maths &gt; left vs right modules in tensor products</a> by <span class="user-mention silent" data-user-id="310045">Eric Wieser</span>.</p>



<a name="282602133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/282602133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#282602133">(May 17 2022 at 07:33)</a>:</h4>
<p>Any more thoughts on this, <span class="user-mention" data-user-id="110087">@Scott Morrison</span>?</p>



<a name="284392301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284392301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284392301">(May 30 2022 at 17:38)</a>:</h4>
<p><span aria-label="ping pong" class="emoji emoji-1f3d3" role="img" title="ping pong">:ping_pong:</span></p>



<a name="284443252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284443252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284443252">(May 31 2022 at 08:34)</a>:</h4>
<p>I vote in favour of merging this PR.</p>



<a name="284443322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284443322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284443322">(May 31 2022 at 08:35)</a>:</h4>
<p>I appreciate Scott's point about wanting control over whether <code>restrict_scalars</code> affects a set of right or left scalars (or both) but this can never be achieved with <code>restrict_scalars</code> as it stands because it only mentions one set of scalars so any instances to copy across other actions (e.g., "right actions") are underdetermined.</p>
<p>For this, we would need something like what Eric mentions <a href="#narrow/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars/near/282063117">above</a> <code>restrict_scalars₂ A B L R M</code>.</p>



<a name="284443417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284443417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284443417">(May 31 2022 at 08:36)</a>:</h4>
<p>That day may come but I think it should not block this PR as it's a separate concern.</p>



<a name="284443880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284443880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284443880">(May 31 2022 at 08:40)</a>:</h4>
<p>For emphasis, this Lean snippet indicates what I mean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.restrict_scalars</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">L</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">B</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">module</span> <span class="n">L</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">A</span> <span class="o">(</span><span class="n">restrict_scalars</span> <span class="n">A</span> <span class="n">L</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Works</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span><span class="bp">ᵐᵒᵖ</span> <span class="o">(</span><span class="n">restrict_scalars</span> <span class="n">A</span> <span class="n">L</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Fails, can never work.</span>
</code></pre></div>



<a name="284444605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284444605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284444605">(May 31 2022 at 08:47)</a>:</h4>
<p>There is still a choice to be made in the case that one has a left and right action of the same right. The following Lean snippet indicates what I mean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.restrict_scalars</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">L</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">L</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">module</span> <span class="n">L</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">L</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">A</span> <span class="o">(</span><span class="n">restrict_scalars</span> <span class="n">A</span> <span class="n">L</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Works</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">L</span><span class="bp">ᵐᵒᵖ</span> <span class="o">(</span><span class="n">restrict_scalars</span> <span class="n">A</span> <span class="n">L</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Fails, could work.</span>

<span class="c1">-- This is the instance that this PR proposes should work.</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">A</span><span class="bp">ᵐᵒᵖ</span> <span class="o">(</span><span class="n">restrict_scalars</span> <span class="n">A</span> <span class="n">L</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Fails, could work.</span>
</code></pre></div>



<a name="284444892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284444892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284444892">(May 31 2022 at 08:50)</a>:</h4>
<p>Come to think of it, <span class="user-mention" data-user-id="310045">@Eric Wieser</span> what do you think about allowing both <code>module Lᵐᵒᵖ</code> and <code>module Aᵐᵒᵖ</code> above?</p>



<a name="284445155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284445155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284445155">(May 31 2022 at 08:52)</a>:</h4>
<p>Since Scott recently merged a PR that disabled the <code>L</code> instance, I'm inclined to leave the <code>Lᵐᵒᵖ</code> instance absent too, at least until someone actually needs it and then we can revisit the design</p>



<a name="284445250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2313996%20right%20actions%20on%20restrict_scalars/near/284445250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars.html#284445250">(May 31 2022 at 08:53)</a>:</h4>
<p>I agree. I'm going to merge this. I'm confident appreciate the issues at play.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>