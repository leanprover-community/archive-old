---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html">#12709 - redefine nat.prime as prime</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="275387882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275387882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275387882">(Mar 15 2022 at 15:23)</a>:</h4>
<p>Would love to hear your thoughts on this before spending too much more time on it</p>



<a name="275389422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275389422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275389422">(Mar 15 2022 at 15:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> You've been deeply involved with setting up the basic number theory/algebra part of the library. I think you should have a say in this.</p>
<p>That said, I like this direction!</p>



<a name="275390014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275390014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275390014">(Mar 15 2022 at 15:38)</a>:</h4>
<p>We should convince all the primary school teachers in the world to say "irreducible", until they prove the equivalence :D</p>



<a name="275397056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275397056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275397056">(Mar 15 2022 at 16:23)</a>:</h4>
<p>I think this is a good idea, if only because of the number of times I've had to convert between the two in unexpected places. Ideally, it should be easy to access both properties of a natural (ie irreducible and prime) without explicitly using ring theory API for the sake of pedagogy; and also I hope we can remove some duplicate lemmas this way!</p>



<a name="275411028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275411028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275411028">(Mar 15 2022 at 17:54)</a>:</h4>
<p>What is the advantage of the change? Is it just that we can use the linguistic sleight-of-hand of using <code>_root_.prime</code> when we mean <code>nat.prime</code>? I was opposed to this change when we moved away from the direct definition to <code>irreducible</code> because it pumps up the dependency height of this file significantly, but changing <code>irreducible</code> to <code>prime</code> doesn't do much except make the definition farther from the textbook definition.</p>



<a name="275411867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275411867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275411867">(Mar 15 2022 at 17:59)</a>:</h4>
<p><del>coughcough definition of group is a long way from textbook definition and I'm not sure we care any more</del></p>



<a name="275412407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275412407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275412407">(Mar 15 2022 at 18:02)</a>:</h4>
<p><del>and definition of compact is even worse</del></p>



<a name="275413804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275413804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275413804">(Mar 15 2022 at 18:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> To be fair, most textbooks define groups in a way that's perfectly fine for a human but a bit informal (which is not the case for the definition of <code>nat.prime</code>). They say, among other things, that "(a) there exists an identity element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>" and "(b) every element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> has an inverse <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>g</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">g^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>g</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>∗</mo><mi>g</mi><mo>=</mo><mi>e</mi></mrow><annotation encoding="application/x-tex">g^{-1} * g = e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>". But <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span> is behind an existential in part (a), you're not supposed to use it in part (b) like that! Sure, the identity element is unique, but I bet most people happily prove uniqueness by assuming part (b) of the definition holds for a fixed value of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>.</p>



<a name="275414020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275414020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275414020">(Mar 15 2022 at 18:13)</a>:</h4>
<p>Are we able to solve the multiple definition problem here in a different way? What would it take to make it so that, without changing their definitions, <code>nat.prime</code> and <code>prime</code> are more-or-less interchangable?</p>
<p>For example, would having coercions between them work? Is there anything that Lean could do to help?</p>



<a name="275414478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275414478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275414478">(Mar 15 2022 at 18:16)</a>:</h4>
<p>Regarding the textbook definition, in my intro to number theory class <a href="https://leanprover-community.github.io/mathlib_docs/find/prime">docs#prime</a> was the definition we went with, after spending time showing a few different concepts (including irreducibility and primality) were equivalent, so, for what it's worth, this makes it closer to the textbook definition for me!</p>



<a name="275417109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312709%20-%20redefine%20nat.prime%20as%20prime/near/275417109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312709.20-.20redefine.20nat.2Eprime.20as.20prime.html#275417109">(Mar 15 2022 at 18:34)</a>:</h4>
<p>I'd prefer dropping <code>nat.prime</code> entirely, but that's more work still</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>