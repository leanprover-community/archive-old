---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html">#14669 and 14680: has_reflect instances</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="285913630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/285913630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#285913630">(Jun 13 2022 at 11:35)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/pull/14669">#14669</a> and <a href="https://github.com/leanprover-community/mathlib/pull/14680">#14680</a> I add <code>has_reflect</code> instances for <code>vector α n</code> and <code>fin n → α</code>, which make it easier to assemble matrices in a metaprogram and then emit proofs about them.</p>
<p>I stumbled around a bit by cheating and making <a href="https://leanprover-community.github.io/mathlib_docs/find/reflected">docs#reflected</a> locally reducible, but eventually worked out that the API is designed to encourage (but not force) you to prove that the reflection is faithful, and so now use that instead.</p>



<a name="285915314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/285915314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#285915314">(Jun 13 2022 at 11:52)</a>:</h4>
<p>(I added a docstring in <a href="https://github.com/leanprover-community/lean/pull/729">https://github.com/leanprover-community/lean/pull/729</a> to make that cheat easier to avoid)</p>



<a name="286006175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/286006175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#286006175">(Jun 14 2022 at 00:16)</a>:</h4>
<p>Are those instances ever used? It's the first time I hear about <code>has_reflect</code>.</p>



<a name="286031957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/286031957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#286031957">(Jun 14 2022 at 07:31)</a>:</h4>
<p>I was writing some meta code that complained the instances were missing</p>



<a name="286032133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/286032133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#286032133">(Jun 14 2022 at 07:33)</a>:</h4>
<p>Can we make it so that the instances show up in the docs? I assume they don't because everything is labelled<code>meta</code>?</p>



<a name="286032272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/286032272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#286032272">(Jun 14 2022 at 07:34)</a>:</h4>
<p>They don't show up because <a href="https://leanprover-community.github.io/mathlib_docs/find/has_reflect">docs#has_reflect</a> is reducible (and unfolds to <a href="https://leanprover-community.github.io/mathlib_docs/find/reflected">docs#reflected</a>)</p>



<a name="286032301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314669%20and%2014680%3A%20has_reflect%20instances/near/286032301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314669.20and.2014680.3A.20has_reflect.20instances.html#286032301">(Jun 14 2022 at 07:34)</a>:</h4>
<p>In the same way that the docs don't list any <a href="https://leanprover-community.github.io/mathlib_docs/find/decidable_eq">docs#decidable_eq</a> instances</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>