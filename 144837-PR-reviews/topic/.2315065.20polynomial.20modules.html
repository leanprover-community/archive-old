---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html">#15065 polynomial modules</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289949429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289949429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289949429">(Jul 18 2022 at 11:00)</a>:</h4>
<p>This PR adds <code>M[X]</code> as module over <code>R[X]</code>. Should we try to merge both constructions into 1 definition? So that we can use <code>polynomial M</code> for both of them? I.e., it becomes a ring if <code>M</code> is a ring.<br>
Currently the definition of <code>polynomial R</code> relies on <code>R</code> being a ring. Can we weaken that? Is the refactor worth it?</p>



<a name="289950212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950212">(Jul 18 2022 at 11:09)</a>:</h4>
<p>Presumably that would mean weakening <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_algebra">docs#add_monoid_algebra</a> too?</p>



<a name="289950322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950322">(Jul 18 2022 at 11:10)</a>:</h4>
<p>Hmm; what happens when <code>M = R[X]</code>?</p>



<a name="289950410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950410">(Jul 18 2022 at 11:11)</a>:</h4>
<p>Mathematically you get <code>R[X, Y]</code>.</p>



<a name="289950411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950411">(Jul 18 2022 at 11:11)</a>:</h4>
<p>This sounds like it touches the same can of worms we kept tripping over for representation theory</p>



<a name="289950508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950508">(Jul 18 2022 at 11:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules/near/289950410">said</a>:</p>
<blockquote>
<p>Mathematically you get <code>R[X, Y]</code>.</p>
</blockquote>
<p>Right, which means that now the action of <code>R[X]</code> on <code>M[X]</code> (<code>M = R[X]</code>) is ambiguous because the variables aren't named</p>



<a name="289950578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950578">(Jul 18 2022 at 11:13)</a>:</h4>
<p>(currently, the action of <code>R[X][X]</code> on <code>R[X][X][X]</code> is not ambiguous, it always acts on the trailing <code>X</code>s)</p>



<a name="289950657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289950657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289950657">(Jul 18 2022 at 11:14)</a>:</h4>
<p><del>Hmm actually I might be wrong</del></p>



<a name="289951208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951208">(Jul 18 2022 at 11:20)</a>:</h4>
<p>But I think Johan's proposal has <code>R[X]</code> act on <code>M[X]</code> via the action of <code>R</code> on <code>M</code></p>



<a name="289951232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951232">(Jul 18 2022 at 11:21)</a>:</h4>
<p>Whcih means that <code>R[X][X]</code> acts on <code>R[X][X][X]</code> via the action on the leading <code>X</code>s, and we're in trouble</p>



<a name="289951266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951266">(Jul 18 2022 at 11:21)</a>:</h4>
<p>(note that we're already in trouble here with <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.has_scalar">docs#pi.has_scalar</a> vs <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.has_scalar'">docs#pi.has_scalar'</a>, which has the same problem)</p>



<a name="289951307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951307">(Jul 18 2022 at 11:22)</a>:</h4>
<p>Even mathematically speaking, saying that <code>M[X]</code> as module over <code>R[X]</code> is technically ambiguous: "everyone" knows what the action is, but there are situations where you can change the default expectation.</p>
<p>Isn't it possible to give a default module structure that can be overridden by an explicit one?</p>



<a name="289951447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951447">(Jul 18 2022 at 11:23)</a>:</h4>
<p>Yes, to be honest I would not be totally sure what <code>X â€¢ mY</code> means, taking the action of <code>R[X]</code> on <code>M[Y]</code> (to avoid confusion).</p>



<a name="289951460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951460">(Jul 18 2022 at 11:23)</a>:</h4>
<p>For instance, it is useful to have Laurent polynomials be modules over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> and over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><msup><mi>X</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[X^{-1}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>.  In unformalized maths, this causes little issues.</p>



<a name="289951599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951599">(Jul 18 2022 at 11:25)</a>:</h4>
<p>Riccardo, I agree: in the absence of further hints, I would proceed thinking that the action is the one where "<code>X</code> acts as <code>Y</code>", but would be ready to switch to whatever I was told later on!  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="289951700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951700">(Jul 18 2022 at 11:26)</a>:</h4>
<p>Yes, if nothing is written I would do the same. But in my brain a module over <code>R[X]</code> is a module over <code>R</code> <em>plus</em> a chosen endomorphism. And it is extremely useful to be able to choose the endomorphism.</p>



<a name="289951741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951741">(Jul 18 2022 at 11:27)</a>:</h4>
<p>Isn't it exactly what <span class="user-mention" data-user-id="475844">@Pierre-Alexandre Bazin</span> has been defining recently?</p>



<a name="289951745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951745">(Jul 18 2022 at 11:27)</a>:</h4>
<p>And, if I'm supposed to switch, I would think that the person who is writing the proof should be in charge of letting me know what I should be doing!  This feels very much like providing the instance explicitly, when it is not the "obvious" choice.  The remaining detail seems to be figuring out what is the default choice that requires introducing as few custom implementations as possible.</p>



<a name="289951821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951821">(Jul 18 2022 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@YaÃ«l Dillies</span> yes, in <a href="https://github.com/leanprover-community/mathlib/pull/14666">#14666</a></p>



<a name="289951871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289951871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289951871">(Jul 18 2022 at 11:29)</a>:</h4>
<p>So isn't the solution to not overload instances but instead use the type synonym coming from <a href="https://github.com/leanprover-community/mathlib/pull/14666">#14666</a>?</p>



<a name="289952012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952012">(Jul 18 2022 at 11:30)</a>:</h4>
<p>What's <code>M[X]</code> in the picture implied by 14666?</p>



<a name="289952148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952148">(Jul 18 2022 at 11:31)</a>:</h4>
<p><code>M[X]</code> is not directly related to <a href="https://github.com/leanprover-community/mathlib/pull/14666">#14666</a>. In that PR the author considers module over <code>R[X]</code> in general, where the action of <code>X</code> is not specified.</p>



<a name="289952379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952379">(Jul 18 2022 at 11:32)</a>:</h4>
<p>And by "not specified", you mean "specified by an endomorphism", right?</p>



<a name="289952678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952678">(Jul 18 2022 at 11:35)</a>:</h4>
<p>So the problem is that, since <code>R[X]</code> is an <code>R</code>-algebra, we always have an external multiplication of <code>R</code> on <code>R[X]</code>. In particular <code>R[X]</code> acts on <code>R[X][X]</code>.</p>
<p>If we define <code>M[X]</code> as a module over <code>S[X]</code> (for an <code>S</code>-module <code>M</code>), then, in the case <code>S = M = R[X]</code>, then we have <em>two</em> actions of <code>R[X]</code> on <code>M[X]</code>, and the two don't agree, right?</p>



<a name="289952713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952713">(Jul 18 2022 at 11:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules/near/289952379">said</a>:</p>
<blockquote>
<p>And by "not specified", you mean "specified by an endomorphism", right?</p>
</blockquote>
<p>Yes, I mean something not found by TC inference.</p>



<a name="289952943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289952943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289952943">(Jul 18 2022 at 11:37)</a>:</h4>
<p>I'm not sure I understand your point, Riccardo. If the action of <code>R[X]</code> over <code>R[X][X]</code> is ambiguous, the answer is to define a type synonym of <code>R[X][X]</code>, and that's exactly what <a href="https://github.com/leanprover-community/mathlib/pull/14666">#14666</a> does.</p>



<a name="289953185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289953185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289953185">(Jul 18 2022 at 11:39)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span>'s summary</p>



<a name="289953212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289953212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289953212">(Jul 18 2022 at 11:39)</a>:</h4>
<p>We are mixing problems I think. <a href="https://github.com/leanprover-community/mathlib/pull/14666">#14666</a> is not that relevant to this discussion. Here we are proposing to define a new object <code>M[X]</code>, for an <code>R</code>-module <code>M</code>, that generalize the definition of polynomial ring, meaning that if <code>M</code> is also a ring you get the usual polynomial ring. In general you get a "polynomial module", so you can add stuff but not multiply.</p>



<a name="289953282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289953282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289953282">(Jul 18 2022 at 11:40)</a>:</h4>
<p>And we are wondering whether it should be a module over <code>R[X]</code>.</p>



<a name="289953317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289953317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289953317">(Jul 18 2022 at 11:40)</a>:</h4>
<p>The object itself is fine, the danger indeed only arises when we give it the <code>R[X]</code> action</p>



<a name="289953364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289953364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289953364">(Jul 18 2022 at 11:40)</a>:</h4>
<p>Because presumably we also want it to have the <code>R</code> action</p>



<a name="289972803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289972803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289972803">(Jul 18 2022 at 14:27)</a>:</h4>
<p>If only the addition is needed, you can use <code>â„• â†’â‚€ M</code> instead.<br>
A type alias is introduced in this PR for <code>â„• â†’â‚€ M</code>to give it a <code>R[X]</code>-module instance, and what I need is this particular instance.<br>
I think including <code>R</code> in the type alias would solve this diamond?<br>
If so, then</p>
<ul>
<li><code>R[X]</code> acts on <code>polynomial_module R R[X]</code> as <code>R[Y]</code> acting on <code>R[X][Y]</code></li>
<li><code>R[X]</code> acts on <code>polynomial_module R[X] R[X]</code> as <code>R[X]</code> acting on <code>R[X][Y]</code> </li>
<li><code>R[X][X]</code> acts on <code>polynomial_module R[X] R[X]</code> as <code>R[X][Y]</code> acting on itself.</li>
</ul>



<a name="289973188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289973188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289973188">(Jul 18 2022 at 14:30)</a>:</h4>
<p>That sounds promising</p>



<a name="289973315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289973315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289973315">(Jul 18 2022 at 14:31)</a>:</h4>
<p>Can you elaborate on what the instance arguments look like?</p>



<a name="289974791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289974791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289974791">(Jul 18 2022 at 14:42)</a>:</h4>
<p>Do you mean the arguments to <code>polynomial_module</code>?<br>
It is <code>(R M : Type*) [comm_ring R] [add_comm_group M] [module R M]</code>.</p>



<a name="289975010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289975010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289975010">(Jul 18 2022 at 14:43)</a>:</h4>
<p>No, I mean the definition of <code>polynomial_module</code> and the statement of <code>polynomial_module.module</code> (no need for its definition)</p>



<a name="289975446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289975446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289975446">(Jul 18 2022 at 14:46)</a>:</h4>
<p>The definition is <code>def polynomial_module := â„• â†’â‚€ M</code>.<br>
The module instance on <code>polynomial_module</code> are<br>
<code>instance : module R (polynomial_module R M)</code> and<br>
<code>instance : module R[X] (polynomial_module R M)</code>.</p>



<a name="289975986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289975986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289975986">(Jul 18 2022 at 14:49)</a>:</h4>
<p>But <code>polynomial_module R M</code> is also a <code>nat</code>-module, right?</p>



<a name="289976104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289976104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289976104">(Jul 18 2022 at 14:50)</a>:</h4>
<p>Is <code>polynomial_module R[X] R[X]</code> an <code>R</code> module? You don't seem to include that</p>



<a name="289976263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289976263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289976263">(Jul 18 2022 at 14:51)</a>:</h4>
<blockquote>
<p>Is <code>polynomial_module R[X] R[X]</code> an <code>R</code> module?</p>
</blockquote>
<p>I don't think so?</p>



<a name="289976448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289976448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289976448">(Jul 18 2022 at 14:52)</a>:</h4>
<blockquote>
<p>But <code>polynomial_module R M</code> is also a <code>nat</code>-module</p>
</blockquote>
<p>Does every <code>add_comm_group</code> automatically get this? I don't think this would cause a diamond though.</p>



<a name="289976965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289976965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289976965">(Jul 18 2022 at 14:56)</a>:</h4>
<p>Is this rule safe?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">S</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="n">module</span> <span class="n">S</span> <span class="o">(</span><span class="n">polynomial_module</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span>
</code></pre></div>
<p>That forces the inherited actions to factor through S, which at least prevents inheriting a <code>R[X]</code>- action</p>



<a name="289977151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289977151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289977151">(Jul 18 2022 at 14:58)</a>:</h4>
<p>But also means you get a <code>module R (polynomial_module R[X] R[X])</code> instance which is probably a good thing</p>



<a name="289978181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/289978181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#289978181">(Jul 18 2022 at 15:04)</a>:</h4>
<p>I think it is safe. Though I would probably never use <code>polynomial_module R[X] R[X]</code>, I suppose there is also no harm in generalizing.</p>



<a name="291791337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/291791337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#291791337">(Aug 03 2022 at 02:00)</a>:</h4>
<p><span aria-label="ping pong" class="emoji emoji-1f3d3" role="img" title="ping pong">:ping_pong:</span></p>



<a name="293765332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/293765332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#293765332">(Aug 16 2022 at 17:25)</a>:</h4>
<p>Could someone please put this back on the bors queue?</p>



<a name="293839106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315065%20polynomial%20modules/near/293839106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315065.20polynomial.20modules.html#293839106">(Aug 17 2022 at 05:55)</a>:</h4>
<p>done</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>