---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html">#7864 continuous primitives</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242136342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242136342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242136342">(Jun 09 2021 at 21:56)</a>:</h4>
<p><span class="user-mention" data-user-id="314430">@Benjamin Davidson</span> and <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> this PR is related to the discussion in <a href="https://github.com/leanprover-community/mathlib/issues/7273">#7273</a></p>



<a name="242151597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242151597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242151597">(Jun 10 2021 at 01:50)</a>:</h4>
<p>That's great<br>
Then we can remove the <code>continuous</code> assumption from <a href="https://leanprover-community.github.io/mathlib_docs/find/interval_integral.continuous_on_integral_of_continuous">docs#interval_integral.continuous_on_integral_of_continuous</a>, and <code>hgm</code> from <a href="https://leanprover-community.github.io/mathlib_docs/find/interval_integral.integral_comp_mul_deriv'">docs#interval_integral.integral_comp_mul_deriv'</a>.</p>



<a name="242156262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242156262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242156262">(Jun 10 2021 at 03:36)</a>:</h4>
<p>Brilliant! I'll get working on removing those assumptions of continuity.</p>



<a name="242166799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242166799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242166799">(Jun 10 2021 at 07:06)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- Below is a capital iota</span>
<span class="n">localized</span> <span class="s2">"notation `Ι` := interval_oc"</span> <span class="k">in</span> <span class="n">interval</span>
</code></pre></div>
<p><span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="242167752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242167752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242167752">(Jun 10 2021 at 07:19)</a>:</h4>
<p>I don't mind changing this notation, or even not using any notation. This code comes from the sphere eversion project where I use <code>I</code> for the unit interval.</p>



<a name="242167931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242167931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242167931">(Jun 10 2021 at 07:21)</a>:</h4>
<p>I don't mind the notation, in fact!</p>



<a name="242168997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242168997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242168997">(Jun 10 2021 at 07:33)</a>:</h4>
<p>I see you complained the statements are not general enough. Don't hesitate to suggest statements if you have them in mind.</p>



<a name="242169145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242169145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242169145">(Jun 10 2021 at 07:34)</a>:</h4>
<p>It seems we already have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">unit_interval.lean</span>
<span class="mi">28</span><span class="o">:</span><span class="n">localized</span> <span class="s2">"notation `I` := unit_interval"</span> <span class="k">in</span> <span class="n">unit_interval</span>
</code></pre></div>



<a name="242169755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242169755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242169755">(Jun 10 2021 at 07:41)</a>:</h4>
<p>Yep, this is compatible. The one you found is a capital i.</p>



<a name="242169976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242169976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242169976">(Jun 10 2021 at 07:43)</a>:</h4>
<p>I'm really not excited by the naming here.  We already have <code>Icc</code> and <code>Ioc</code>.  Now we have <code>interval</code> and <code>interval_oc</code> (where <code>interval</code> is, as you can tell from the name, closed...).  But this isn't even the best part: there's also two random notations <code>[a,b]</code> and <code>I a b</code> for them.  (Ok, the first one looks nice, but it conflicts with list notation and there's no corresponding notation for other intervals.)</p>



<a name="242170058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242170058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242170058">(Jun 10 2021 at 07:44)</a>:</h4>
<p>IMHO the unordered intervals should follow the same naming scheme as the ordered ones.  Maybe <code>Iccu</code> and <code>Iocu</code> (with u for unordered), or <code>Icc'</code> and <code>Ioc'</code>.  And no notation.</p>



<a name="242170494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242170494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242170494">(Jun 10 2021 at 07:49)</a>:</h4>
<p>I have no strong opinion here (and I didn't introduce <code>interval</code>). On paper we don't even have notation for unordered interval, we simply keep things ambiguous. I'd be fine with <code>Iccu</code> or <code>Icc'</code></p>



<a name="242185931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242185931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242185931">(Jun 10 2021 at 10:28)</a>:</h4>
<p>Could we have <code>I[a, b)</code>, <code>I'[a, b)</code> etc as notation? Or are we not allowed to use a paren like that?</p>



<a name="242187201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187201">(Jun 10 2021 at 10:43)</a>:</h4>
<p>This messes with auto-closing parens (i.e. that you get <code>[]</code> automatically when you type <code>[</code>), as well as with paren-matching (hover over one <code>[</code>, and the matching <code>]</code> will be highlighted).  So I'd rather not have mismatched delimiters.</p>



<a name="242187379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187379">(Jun 10 2021 at 10:45)</a>:</h4>
<p>It probably also breaks the new syntax highlighter</p>



<a name="242187581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187581">(Jun 10 2021 at 10:47)</a>:</h4>
<p><code>I(a,b|)</code> for <code>Ioc a b</code>, since <code>|)</code> sort of resembles <code>]</code>?</p>



<a name="242187751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187751">(Jun 10 2021 at 10:49)</a>:</h4>
<p>Maybe the original is already best</p>



<a name="242187849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187849">(Jun 10 2021 at 10:50)</a>:</h4>
<p>I don't see any immediate issues with this notation.  We could then use <code>I{a,b|}</code> for the unordered intervals.  (Only commenting on the technical feasibility here.)</p>



<a name="242187941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242187941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242187941">(Jun 10 2021 at 10:51)</a>:</h4>
<p>Or swap the <code>,</code> for a <code>;</code> for unordered</p>



<a name="242190699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242190699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242190699">(Jun 10 2021 at 11:22)</a>:</h4>
<p>The Isabelle notations: <code>{a .. b}</code> or <code>{a &lt;.. b}</code> or <code>{a .. }</code> and so on. You can easily guess which is which. (Only for ordered intervals, though).</p>



<a name="242190851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242190851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242190851">(Jun 10 2021 at 11:23)</a>:</h4>
<p>If we wait a year, then these should be straightforward to add.</p>



<a name="242191016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242191016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242191016">(Jun 10 2021 at 11:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives/near/242168997">said</a>:</p>
<blockquote>
<p>I see you complained the statements are not general enough. Don't hesitate to suggest statements if you have them in mind.</p>
</blockquote>
<p>I imagine something like: assume <code>f</code> is integrable on <code>Ico a b</code>, and fix some point <code>c</code>. Then <code>x -&gt; \int_{Ico a x} f</code> is continuous at <code>c</code> within <code>Icc a b</code>. Moreover, if <code>\mu {c}=0</code>, then <code>x -&gt; \int_{Icc a x} f</code> is also continuous at <code>c</code> within <code>Icc a b</code>.</p>



<a name="242193346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242193346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242193346">(Jun 10 2021 at 11:49)</a>:</h4>
<p>I proved</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">continuous_within_at_primitive</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b₀</span> <span class="n">b₁</span> <span class="n">b₂</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hb₀</span> <span class="o">:</span> <span class="n">μ</span> <span class="o">{</span><span class="n">b₀</span><span class="o">}</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h_int</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="n">f</span> <span class="n">μ</span> <span class="o">(</span><span class="n">min</span> <span class="n">a</span> <span class="n">b₁</span><span class="o">)</span> <span class="o">(</span><span class="n">max</span> <span class="n">a</span> <span class="n">b₂</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">continuous_within_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a</span> <span class="bp">..</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∂</span> <span class="n">μ</span><span class="o">)</span> <span class="o">(</span><span class="n">Icc</span> <span class="n">b₁</span> <span class="n">b₂</span><span class="o">)</span> <span class="n">b₀</span>
</code></pre></div>



<a name="242194488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242194488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242194488">(Jun 10 2021 at 12:00)</a>:</h4>
<p>Then I deduce</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">continuous_on_primitive</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">has_no_atoms</span> <span class="n">μ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">h_int</span> <span class="o">:</span> <span class="n">integrable_on</span> <span class="n">f</span> <span class="o">(</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">μ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∫</span> <span class="n">t</span> <span class="k">in</span> <span class="n">Ioc</span> <span class="n">a</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">∂</span> <span class="n">μ</span><span class="o">)</span> <span class="o">(</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">continuous_on_primitive'</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">has_no_atoms</span> <span class="n">μ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">h_int</span> <span class="o">:</span> <span class="n">integrable_on</span> <span class="n">f</span> <span class="o">(</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">μ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∫</span> <span class="n">t</span> <span class="k">in</span> <span class="n">a..x</span><span class="o">,</span> <span class="n">f</span> <span class="n">t</span> <span class="bp">∂</span> <span class="n">μ</span><span class="o">)</span> <span class="o">(</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>in addition to the version I already have.</p>



<a name="242194530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242194530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242194530">(Jun 10 2021 at 12:00)</a>:</h4>
<p>If this makes you happy then I'll stop torturing intervals.</p>



<a name="242194861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242194861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242194861">(Jun 10 2021 at 12:03)</a>:</h4>
<p>I'm 99,9% happy, thanks! Maybe I'd just replace <code>Ioc a x</code> with <code>Icc a x</code> in <code>continuous_on_primitive</code> just because closed intervals are nicer (and since you don't have any atoms it doesn't make a difference).</p>



<a name="242194997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242194997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242194997">(Jun 10 2021 at 12:04)</a>:</h4>
<p>The whole interval_integral is about Ioc, that's why I use them</p>



<a name="242195065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242195065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242195065">(Jun 10 2021 at 12:05)</a>:</h4>
<p>Do you think we should have both statements? Or do you want only the one with Icc?</p>



<a name="242195773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242195773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242195773">(Jun 10 2021 at 12:12)</a>:</h4>
<p>As long as we have a lemma saying that the integral on <code>Ioc</code> is the same as the integral on <code>Icc</code> for <code>has_no_atoms \mu</code>, I don't really mind and you can go for the one you prefer. Probably staying with <code>Ioc</code> is the simplest. </p>
<p>I'm just slightly perturbed with the discrepancy between finite sums (where we mostly have statements on sums over <code>[0, n)</code>), and interval integrals where we deal with <code>(0, n]</code>. That's not for this PR to fix, in any case!</p>



<a name="242196696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242196696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242196696">(Jun 10 2021 at 12:20)</a>:</h4>
<p>This choice is explained in the docstring of <code>interval_integral</code>, as follows:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">with</span> <span class="n">this</span> <span class="kd">definition</span> <span class="n">for</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">measure</span> <span class="bp">`</span><span class="n">μ</span><span class="bp">`</span><span class="o">,</span> <span class="n">the</span> <span class="n">integral</span> <span class="bp">`∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">∂</span><span class="n">μ</span><span class="bp">`</span> <span class="n">equals</span>
  <span class="n">the</span> <span class="n">difference</span> <span class="bp">$</span><span class="n">F_μ</span><span class="o">(</span><span class="n">b</span><span class="o">)</span><span class="bp">-</span><span class="n">F_μ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span><span class="bp">$</span><span class="o">,</span> <span class="n">where</span> <span class="bp">$</span><span class="n">F_μ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span><span class="bp">=</span><span class="n">μ</span><span class="o">(</span><span class="bp">-∞</span><span class="o">,</span> <span class="n">a</span><span class="o">]</span><span class="bp">$</span> <span class="n">is</span> <span class="n">the</span>
  <span class="o">[</span><span class="n">cumulative</span> <span class="n">distribution</span> <span class="n">function</span><span class="o">](</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">en.wikipedia.org</span><span class="bp">/</span><span class="n">wiki</span><span class="bp">/</span><span class="n">Cumulative_distribution_function</span><span class="o">)</span>
  <span class="n">of</span> <span class="bp">`</span><span class="n">μ</span><span class="bp">`.</span>
</code></pre></div>
<p>This makes perfect sense.</p>



<a name="242230989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237864%20continuous%20primitives/near/242230989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237864.20continuous.20primitives.html#242230989">(Jun 10 2021 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> this is ready for review again. The main proof became more complicated by I'm running out of energy for this. I hope what we have now covers all we need, and I stated many variations. Also note I didn't touch the <code>interval_oc</code> bikshed. I agree with Gabriel but I think this should be refactored in a later PR since it should also touch <code>interval</code> and has nothing to do with integration.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>