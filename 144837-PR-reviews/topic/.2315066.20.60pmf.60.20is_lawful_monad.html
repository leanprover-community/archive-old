---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html">#15066 `pmf` is_lawful_monad</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288598759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315066%20%60pmf%60%20is_lawful_monad/near/288598759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Devon Tuma <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html#288598759">(Jul 05 2022 at 22:18)</a>:</h4>
<p>Would anyone be able to take a look at <a href="https://github.com/leanprover-community/mathlib/pull/15066">https://github.com/leanprover-community/mathlib/pull/15066</a> ? The only change is adding a lawful monad instance for <code>pmf</code> and replacing the custom <code>map</code> and <code>seq</code> operations with the standard operations provided by <code>monad</code>. I'm using <code>pmf</code> for another project and this change would simplify a lot of the things I'm working on there.</p>



<a name="288621554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315066%20%60pmf%60%20is_lawful_monad/near/288621554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html#288621554">(Jul 06 2022 at 04:17)</a>:</h4>
<p>I think that unfortunately we probably ought to be keeping the custom map and seq, as the universe arguments are more general</p>



<a name="288621628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315066%20%60pmf%60%20is_lawful_monad/near/288621628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html#288621628">(Jul 06 2022 at 04:18)</a>:</h4>
<p>Of course we can and should <em>also</em> have the monad instance</p>



<a name="288621653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315066%20%60pmf%60%20is_lawful_monad/near/288621653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html#288621653">(Jul 06 2022 at 04:19)</a>:</h4>
<p>In general mathlib tends to avoid using the monad API, precisely because it forces a partial lack of universe polymorphism.</p>



<a name="288712521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315066%20%60pmf%60%20is_lawful_monad/near/288712521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Devon Tuma <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315066.20.60pmf.60.20is_lawful_monad.html#288712521">(Jul 06 2022 at 18:39)</a>:</h4>
<p>Okay that makes a lot of sense. I've just left the lawful instances, and added conversion lemmas between monad and custom versions. My use case doesn't need universe polymorphism, but the lawful instances on their own should give me everything I need.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>