---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.237553.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html">#7553</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="238018399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238018399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238018399">(May 09 2021 at 08:07)</a>:</h4>
<p>I have formalized a nice counterexample (requiring measure theory, ordinals, Hahn-Banach and complete Banach spaces -- the fact that all this was readily available shows that mathlib has reached a form of maturity). I don't think it belongs to mathlib, though: this is clearly a leaf on which noone will build anything further. There was a discussion of a <code>counterexamples</code> folder at some point, if I recall correctly, so I created this folder and put my file there.</p>
<p>There is the question of what the requirements on files in this folder would be. I did not try to be as general as possible, or to develop a whole API on the objects I introduce in the file, because my goal is just to get to the counterexample as efficiently as possible. It might be worth discussing here.</p>



<a name="238018514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238018514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238018514">(May 09 2021 at 08:09)</a>:</h4>
<p><code>counterexamples</code> is a branch that Damiano (I think) runs, if you wanted to coordinate that</p>



<a name="238018964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238018964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238018964">(May 09 2021 at 08:19)</a>:</h4>
<p>I like the idea of a counter-example folder for large-scale counter-examples (smaller ones could go directly in the relevant files). It's much easier to keep up to date than a branch.</p>



<a name="238019089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019089">(May 09 2021 at 08:21)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> , what do you think of PRing your branch to master? A difference between your branch and mine is that I put my counterexample folder at the root, while yours is in <code>src</code>.</p>



<a name="238019152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019152">(May 09 2021 at 08:22)</a>:</h4>
<p>The idea is that when doing <code>lean --make src</code>, the counterexamples don't get compiled, which gains some time since they're supposed to be leaves of the hierarchy.</p>



<a name="238019238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019238">(May 09 2021 at 08:24)</a>:</h4>
<p>Do you mean you don't want CI to test them?</p>



<a name="238019245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019245">(May 09 2021 at 08:25)</a>:</h4>
<p>Or only when people compile by hand?</p>



<a name="238019434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019434">(May 09 2021 at 08:28)</a>:</h4>
<p>Only when people compile by hand. CI tests everything.</p>



<a name="238019964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238019964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238019964">(May 09 2021 at 08:39)</a>:</h4>
<p>Under what situation do people typically compile all of mathlib by hand if not to check in advance if they'll break CI?</p>



<a name="238027527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238027527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238027527">(May 09 2021 at 10:54)</a>:</h4>
<p>Ok, I like the idea of counterexamples being somewhere and I do not mind whether in <code>src</code> or somewhere else!</p>



<a name="238027590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238027590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238027590">(May 09 2021 at 10:55)</a>:</h4>
<p>Sébastien, I will see how to fix it, now that your refactors of <code>nat</code>- and <code>int</code>-stuff have gone through!</p>



<a name="238027944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238027944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238027944">(May 09 2021 at 11:01)</a>:</h4>
<p>Should I move the folder <code>counterexamples</code> to the folder where <code>src</code> is?  At the moment, it is inside <code>src</code>.</p>



<a name="238030465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238030465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238030465">(May 09 2021 at 11:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237553/near/238027944">said</a>:</p>
<blockquote>
<p>Should I move the folder <code>counterexamples</code> to the folder where <code>src</code> is?  At the moment, it is inside <code>src</code>.</p>
</blockquote>
<p>I'd say yes, just like it's done in <a href="https://github.com/leanprover-community/mathlib/issues/7553">#7553</a>.</p>



<a name="238030587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238030587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238030587">(May 09 2021 at 11:49)</a>:</h4>
<p>Sebastien, can you elaborate on the advantage of not putting the counterexamples in src?</p>



<a name="238030900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238030900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238030900">(May 09 2021 at 11:55)</a>:</h4>
<p>Sébastien, are you sure you extracted from the counter-example everything that could go to mathlib? It looks like like it contains a lot of things. Are they really for counter-example purposes? Also, seeing the conclusion of the main result being <code>false</code> is psychologically weird. What not stating <code>¬
(∀ (φ : (discrete_copy ℝ →ᵇ ℝ) →L[ℝ] ℝ), ∫ x in Icc 0 1, φ (f Hcont x) = φ g)</code>? Is it only to save one line in the proof?</p>



<a name="238031795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238031795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238031795">(May 09 2021 at 12:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237553/near/238030587">said</a>:</p>
<blockquote>
<p>Sebastien, can you elaborate on the advantage of not putting the counterexamples in src?</p>
</blockquote>
<p>For me, it's a little bit like the <code>tests</code> directory: things that are not supposed to be imported by anything. I'd say that things in <code>src</code> are of interest for projects using <code>mathlib</code>, and things in another subdirectory are not. Also, quite often I type <code>lean --make src</code> to test I've not broken anything relevant, and I don't count these counterexamples as relevant in this sense. Maybe a better home for the counterexamples would even be <code>archive/counterexamples/</code>.</p>



<a name="238032020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238032020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238032020">(May 09 2021 at 12:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237553/near/238030900">said</a>:</p>
<blockquote>
<p>Also, seeing the conclusion of the main result being <code>false</code> is psychologically weird. </p>
</blockquote>
<p>The most natural way to state the main result is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">¬</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">discrete_copy</span> <span class="n">ℝ</span> <span class="bp">→ᵇ</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">φ</span> <span class="o">:</span> <span class="o">(</span><span class="n">discrete_copy</span> <span class="n">ℝ</span> <span class="bp">→ᵇ</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">Icc</span> <span class="mi">0</span> <span class="mi">1</span><span class="o">,</span> <span class="n">φ</span> <span class="o">(</span><span class="n">f</span> <span class="n">Hcont</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">φ</span> <span class="n">g</span>
</code></pre></div>
<p>i.e., there is no Pettis integral. This seemed a bit of a mouthful to me, so I switched to the current formulation to make it more readable. But I can definitely change it!</p>



<a name="238032143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238032143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238032143">(May 09 2021 at 12:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237553/near/238030900">said</a>:</p>
<blockquote>
<p>Sébastien, are you sure you extracted from the counter-example everything that could go to mathlib? It looks like like it contains a lot of things.</p>
</blockquote>
<p>I have the feeling that all of this is really esoterical. If it turns out that it is useful for other theorems I'd be very happy to move it to mathlib, but for now I have to admit I don't have other applications in mind.</p>



<a name="238032508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238032508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238032508">(May 09 2021 at 12:24)</a>:</h4>
<p>I trust you</p>



<a name="238045132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238045132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238045132">(May 09 2021 at 16:12)</a>:</h4>
<p>I created PR <a href="https://github.com/leanprover-community/mathlib/issues/7558">#7558</a> with the counterexamples folder.  I left it in <code>src</code>, since I wanted CI to finish and confirm that everything was alright.  I do not mind moving it elsewhere, though!</p>



<a name="238943701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238943701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238943701">(May 16 2021 at 02:55)</a>:</h4>
<p>After both <a href="https://github.com/leanprover-community/mathlib/issues/7553">#7553</a> and <a href="https://github.com/leanprover-community/mathlib/issues/7558">#7558</a> were merged, we now have both <code>src/counterexamples</code> and <code>counterexamples/</code>. <a href="https://github.com/leanprover-community/mathlib/issues/7618">#7618</a> consolidates them into <code>counterexamples/</code> and adds that folder to CI; let me know if there are any objections.</p>



<a name="238947737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238947737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238947737">(May 16 2021 at 04:13)</a>:</h4>
<p>Bryan, I think that having a single counterexamples folder with all the counterexamples inside is great!</p>



<a name="238956653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237553/near/238956653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237553.html#238956653">(May 16 2021 at 07:16)</a>:</h4>
<p>There was a suggestion elsewhere to use <code>archive/counterexamples</code> as the name.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>