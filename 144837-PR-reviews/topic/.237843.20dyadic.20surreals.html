---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html">#7843 dyadic surreals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242071240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242071240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242071240">(Jun 09 2021 at 14:10)</a>:</h4>
<p>We're having some discussion about instance priorities <a href="https://github.com/leanprover-community/mathlib/pull/7843#discussion_r647430790">here</a></p>
<p>Currently there are two instances defined for surreal numbers:<br>
<code>instance : ordered_add_comm_group surreal</code> and <br>
<code>noncomputable instance : linear_ordered_add_comm_group surreal</code></p>
<p>What's a proper way to ask Lean to infer <code>instance add_comm_group</code> from the computable instance and not the noncomputable one. Lowering priorities isn't quite working. </p>
<p>The current hack is to just use <code>instance : add_comm_group surreal := by apply_instance</code> before the <code>noncomputable</code> instance.</p>
<p>Thanks,</p>



<a name="242072123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242072123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242072123">(Jun 09 2021 at 14:15)</a>:</h4>
<p>Can you tell us why you would like some things to remain <code>computable</code>? If this is not important, I'd just go for the noncomputable version otherwise.</p>



<a name="242072932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242072932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242072932">(Jun 09 2021 at 14:20)</a>:</h4>
<p>The confusing thing here is that <code>linear_ordered_add_comm_group</code> has a direct path to <code>add_comm_group</code> that does not go through <code>ordered_add_comm_group</code>.</p>



<a name="242072980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242072980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242072980">(Jun 09 2021 at 14:20)</a>:</h4>
<p>I think the right thing to do is split <code>ordered_add_comm_group surreal</code> in two</p>



<a name="242073021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073021">(Jun 09 2021 at 14:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242072123">said</a>:</p>
<blockquote>
<p>Can you tell us why you would like some things to remain <code>computable</code>? If this is not important, I'd just go for the noncomputable version otherwise.</p>
</blockquote>
<p>No particular reason tbh. Because there are far fewer <code>noncomputable</code> theorems in the library, I think I just assumed that one should make theorems <code>computable</code> whenever possible.</p>



<a name="242073120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073120">(Jun 09 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242072980">said</a>:</p>
<blockquote>
<p>I think the right thing to do is split <code>ordered_add_comm_group surreal</code> in two</p>
</blockquote>
<p>That is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span>               <span class="o">:=</span> <span class="o">(</span><span class="bp">+</span><span class="o">),</span>
  <span class="n">add_assoc</span>         <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="n">add_assoc_equiv</span> <span class="o">},</span>
  <span class="n">zero</span>              <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">zero_add</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">add_zero</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.add_zero_equiv</span> <span class="n">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">neg</span>               <span class="o">:=</span> <span class="n">has_neg.neg</span><span class="o">,</span>
  <span class="n">add_left_neg</span>      <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="n">pgame.add_left_neg_equiv</span> <span class="o">},</span>
  <span class="n">add_comm</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="n">pgame.add_comm_equiv</span> <span class="o">},</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">ordered_add_comm_group</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le</span>                <span class="o">:=</span> <span class="o">(</span><span class="bp">≤</span><span class="o">),</span>
  <span class="n">lt</span>                <span class="o">:=</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">),</span>
  <span class="n">le_refl</span>           <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="n">le_trans</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.le_trans</span> <span class="o">},</span>
  <span class="n">lt_iff_le_not_le</span>  <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.lt_iff_le_not_le</span> <span class="n">ox</span> <span class="n">oy</span> <span class="o">},</span>
  <span class="n">le_antisymm</span>       <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">⟩</span> <span class="o">},</span>
  <span class="n">add_le_add_left</span>   <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩</span> <span class="n">hx</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.add_le_add_left</span> <span class="n">hx</span> <span class="o">},</span>
  <span class="bp">..</span> <span class="n">surreal.add_comm_group</span> <span class="o">}</span>
</code></pre></div>



<a name="242073156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073156">(Jun 09 2021 at 14:21)</a>:</h4>
<p>This fixes the problem and groups things a little more tidily</p>



<a name="242073271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073271">(Jun 09 2021 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245078">Apurva Nakade</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242073021">said</a>:</p>
<blockquote>
<p>No particular reason tbh. Because there are far fewer <code>noncomputable</code> theorems in the library, I think I just assumed that one should make theorems <code>computable</code> whenever possible.</p>
</blockquote>
<p><code>theorem</code>s are never computable, only <code>def</code>s are</p>



<a name="242073481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073481">(Jun 09 2021 at 14:23)</a>:</h4>
<p>Oops...</p>



<a name="242073521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073521">(Jun 09 2021 at 14:23)</a>:</h4>
<p>I'll apply your suggested fix and split up the instances into two.</p>



<a name="242073653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073653">(Jun 09 2021 at 14:24)</a>:</h4>
<p>I take it back - the right fix is probably to just change <code>linear_ordered_add_comm_group</code> to extend <code>ordered_add_comm_group</code> instead of <code>add_comm_group</code>. I thought there was a reason for it being that way, but I can't see one</p>



<a name="242073682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073682">(Jun 09 2021 at 14:24)</a>:</h4>
<p>I'll open a quick PR to do that and see what breaks</p>



<a name="242073893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242073893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242073893">(Jun 09 2021 at 14:25)</a>:</h4>
<p>In the mean time the split is probably fine in your PR, it's at worst ultimately unnecessary</p>



<a name="242074099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242074099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242074099">(Jun 09 2021 at 14:27)</a>:</h4>
<p>Sounds good.</p>



<a name="242074969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242074969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242074969">(Jun 09 2021 at 14:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242073682">said</a>:</p>
<blockquote>
<p>I'll open a quick PR to do that and see what breaks</p>
</blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7861">#7861</a></p>



<a name="242076634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242076634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242076634">(Jun 09 2021 at 14:42)</a>:</h4>
<p>Eric, I do not know if this is the reason, but the way it was, you had no "repetition" in the fields: one Typeclass assumption only dealt with the order relation, the other only with the algebraic operation.</p>
<p>In any case, as you can probably guess from my involvement with the <code>ordered</code>-refactor, I did not find the <code>ordered</code> typeclasses flexible enough anyway!</p>



<a name="242077604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242077604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242077604">(Jun 09 2021 at 14:49)</a>:</h4>
<p>Repetition in fields is handled just fine by <code>old_structure_cmd</code>, and is ubiquitous in the algebra heirarchy - so is not in itself a concern</p>



<a name="242077666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242077666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242077666">(Jun 09 2021 at 14:49)</a>:</h4>
<p>Remember these are not typeclass assumptions, they're fields</p>



<a name="242078388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242078388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242078388">(Jun 09 2021 at 14:54)</a>:</h4>
<p>Of course, my comment simply gave an aesthetic reason for why the other splitting had been made: even though you <em>can</em> repeat fields, you can also be minimalistic and not repeat them!  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="242079092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242079092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242079092">(Jun 09 2021 at 14:58)</a>:</h4>
<p>But you're not actually minimizing anything, the net effect of the "minimization" you propose is the same number of fields but needing one more definition and running into more problems like this one!</p>



<a name="242080451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/242080451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#242080451">(Jun 09 2021 at 15:06)</a>:</h4>
<p>Oh, I was not suggesting that the other way is better from the programming side of things, just that it saves up space in your mind: on the one hand you have the order relation, on the other you have the algebraic operation.  Clean and tidy!  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="243254185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254185">(Jun 19 2021 at 15:09)</a>:</h4>
<p>I'm having a weird (universe?) problem in the <a href="https://github.com/leanprover-community/mathlib/blob/4f7e0ddd0f9e6eb044657520cfbd2685b6d49a8a/src/set_theory/surreal.lean#L302">following proof</a></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="bp">@</span><span class="n">pow_half_left_moves</span>
<span class="c1">-- pow_half_left_moves : ∀ {n : ℕ}, (pow_half n).left_moves = punit</span>

<span class="kd">lemma</span> <span class="n">pow_half_left_moves'</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:</span> <span class="n">punit</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">pow_half</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_half_left_moves</span><span class="o">],</span>
  <span class="n">fsplit</span><span class="o">,</span> <span class="c1">-- apply equiv.cast does not work?</span>
  <span class="o">{</span> <span class="n">intro</span><span class="o">,</span> <span class="n">fsplit</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span><span class="o">,</span> <span class="n">fsplit</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="n">dec_trivial</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="n">dec_trivial</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>After the first <code>simp</code> the goal is <code>punit \equiv punit</code> and yet <code>apply equiv.cast</code>throws the following error. <br>
I got above proof from <code>tidy?</code> but I don't quite understand why we need <code>fsplit</code> and <code>dec_trivial</code> to prove something as simple as  <code>punit \equiv punit</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">pow_half_left_moves'</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:</span> <span class="n">punit</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">pow_half</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_half_left_moves</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">equiv.cast</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">307:3: invalid apply tactic, failed to unify</span>
<span class="cm">  punit ≃ punit</span>
<span class="cm">with</span>
<span class="cm">  ?m_1 ≃ ?m_2</span>
<span class="cm">state:</span>
<span class="cm">n : ℕ</span>
<span class="cm">⊢ punit ≃ punit</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="243254262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254262">(Jun 19 2021 at 15:11)</a>:</h4>
<p>There should be something like <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_equiv_punit">docs#unique_equiv_punit</a> instead of equiv.cast</p>



<a name="243254399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254399">(Jun 19 2021 at 15:14)</a>:</h4>
<p>Nice! Thanks</p>



<a name="243254620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254620">(Jun 19 2021 at 15:20)</a>:</h4>
<p>What's the output of <code>set_option pp.universes true</code> before that snippet?</p>



<a name="243254708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254708">(Jun 19 2021 at 15:23)</a>:</h4>
<p><code> ⊢ punit.{u_1} ≃ punit.{u_2+1} </code></p>



<a name="243254788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254788">(Jun 19 2021 at 15:25)</a>:</h4>
<p>You might just want to put the right universe on the LHS in the lemma statement</p>



<a name="243254913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254913">(Jun 19 2021 at 15:28)</a>:</h4>
<p>What's the result of <code>#check pow_half_left_moves</code> with that option enabled?</p>



<a name="243254931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243254931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243254931">(Jun 19 2021 at 15:29)</a>:</h4>
<p><code> pow_half_left_moves.{u_1} : (pgame.pow_half.{u_1} ?M_1).left_moves = punit.{u_1+1} </code></p>



<a name="243255016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243255016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243255016">(Jun 19 2021 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/243254262">said</a>:</p>
<blockquote>
<p>There should be something like <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_equiv_punit">docs#unique_equiv_punit</a> instead of equiv.cast</p>
</blockquote>
<p>This worked, btw</p>



<a name="243255136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243255136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243255136">(Jun 19 2021 at 15:34)</a>:</h4>
<p>What's the real name of that definition I was suggesting?</p>



<a name="243255219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243255219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243255219">(Jun 19 2021 at 15:36)</a>:</h4>
<p>It is <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.punit_equiv_punit">docs#equiv.punit_equiv_punit</a></p>



<a name="243255234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243255234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243255234">(Jun 19 2021 at 15:37)</a>:</h4>
<p>This theorem's better because <code>pgame.lean</code> uses <code>punit</code> a lot without specifying its universe. So there are a lot of <code>punit</code>s floating around with unspecified universes.</p>



<a name="243301523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243301523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243301523">(Jun 20 2021 at 12:44)</a>:</h4>
<p>The linter forced me to change <code>lemma</code> to <code>def</code> and the proof is shorter! This is very mysterious to me, why would a <code>def</code> proof be shorter than a <code>lemma</code> proof?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="bp">@</span><span class="n">pow_half_left_moves</span>
<span class="c1">-- pow_half_left_moves : ∀ {n : ℕ}, (pow_half n).left_moves = punit</span>

<span class="kd">lemma</span> <span class="n">pow_half_left_moves'</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:</span> <span class="n">punit</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">pow_half</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_half_left_moves</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">equiv.punit_equiv_punit</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">pow_half_left_moves''</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:</span> <span class="n">punit</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">pow_half</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_half_left_moves</span><span class="o">]</span>
<span class="c1">-- works!!!</span>
</code></pre></div>



<a name="243301754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243301754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243301754">(Jun 20 2021 at 12:51)</a>:</h4>
<p>An equiv is data, so it should be a def. And because it is data, it's not great to use tactics to define it. Instead, you might want to use <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.cast">docs#equiv.cast</a></p>



<a name="243301822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243301822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243301822">(Jun 20 2021 at 12:52)</a>:</h4>
<p>In this case, what data you get is basically equivalent. But it'll be easier to prove things about the data you constructed if you use existing defs</p>



<a name="243301901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243301901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243301901">(Jun 20 2021 at 12:54)</a>:</h4>
<p>Also, I would make the (n : nat) variable explicit. Otherwise it's hard to conjure up the proper n when you invoke the statement, without using @</p>



<a name="243303209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243303209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243303209">(Jun 20 2021 at 13:33)</a>:</h4>
<p>Thanks, will do!</p>



<a name="243306276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243306276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243306276">(Jun 20 2021 at 14:52)</a>:</h4>
<p>Those two definitions are not the same!</p>



<a name="243306291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243306291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243306291">(Jun 20 2021 at 14:53)</a>:</h4>
<p>When you use <code>def</code>. It deduces the universe argument to <code>punit</code> from the "proof"</p>



<a name="243306297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243306297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243306297">(Jun 20 2021 at 14:53)</a>:</h4>
<p>The universe it deduces is not the same as the one in the <code>lemma</code></p>



<a name="243888649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/243888649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#243888649">(Jun 25 2021 at 08:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242074969">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/242073682">said</a>:</p>
<blockquote>
<p>I'll open a quick PR to do that and see what breaks</p>
</blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7861">#7861</a></p>
</blockquote>
<p>Basically nothing broke, I just took a really long time to fix the easy CI error.</p>



<a name="244611480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244611480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244611480">(Jul 01 2021 at 18:56)</a>:</h4>
<p>What would be a good name for this lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nsmul_nonneg_of_pos</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_add_comm_monoid</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>
  <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">•</span> <span class="n">x</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>Also, which file should this belong to? same file as <a href="https://leanprover-community.github.io/mathlib_docs/find/ordered_add_comm_monoid">docs#ordered_add_comm_monoid</a> ?<br>
Thanks,</p>



<a name="244611577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244611577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244611577">(Jul 01 2021 at 18:57)</a>:</h4>
<p><code>nsmul_nonneg_of_pos</code> -- but isn't it true for <code>0 \le x</code> as well?</p>



<a name="244611606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244611606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244611606">(Jul 01 2021 at 18:57)</a>:</h4>
<p>Ooh, you already guessed the name (-;</p>



<a name="244611696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244611696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244611696">(Jul 01 2021 at 18:58)</a>:</h4>
<p>Ah right, I'll generalize it to <code>0 \le x</code></p>



<a name="244611701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244611701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244611701">(Jul 01 2021 at 18:58)</a>:</h4>
<p>Thanks!</p>



<a name="244614590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244614590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244614590">(Jul 01 2021 at 19:22)</a>:</h4>
<p>The file defining <a href="https://leanprover-community.github.io/mathlib_docs/find/ordered_module">docs#ordered_module</a> might also be a good place</p>



<a name="244615604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244615604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244615604">(Jul 01 2021 at 19:31)</a>:</h4>
<p>Looks like that lemma (and some of the other similar ones) are already in mathlib: <a href="https://leanprover-community.github.io/mathlib_docs/find/nsmul_pos">docs#nsmul_pos</a><br>
I totally did not see this before, probably because it is in the file algebra.group_power.order</p>
<p>I'll rewrite the relevant code in <code>surreal.lean</code> using these library lemmas.</p>



<a name="244615765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244615765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244615765">(Jul 01 2021 at 19:33)</a>:</h4>
<p>There's also a <a href="https://leanprover-community.github.io/mathlib_docs/find/gsmul_pos">docs#gsmul_pos</a> but in a separate file :-/</p>



<a name="244615899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244615899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244615899">(Jul 01 2021 at 19:34)</a>:</h4>
<p>I'll take a closer look at all the files in the folder algebra/group_power</p>



<a name="244617218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244617218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244617218">(Jul 01 2021 at 19:46)</a>:</h4>
<p>Ah yeah, I think I remember being annoyed by that file when I split it out of a larger file</p>



<a name="244617263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244617263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244617263">(Jul 01 2021 at 19:46)</a>:</h4>
<p>The import graph is messy there</p>



<a name="244617691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/244617691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#244617691">(Jul 01 2021 at 19:50)</a>:</h4>
<p>I think <code>data.int.basic</code> imports the file containing <code>nsmul_pos</code>, meaning <code>gsmul_pos</code> can't go there yet</p>



<a name="245694369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245694369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245694369">(Jul 12 2021 at 14:34)</a>:</h4>
<p>Hi, Can someone take a look at this PR? It has been stable and hasn't had any changes for a while.<br>
Thanks,</p>



<a name="245751701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245751701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245751701">(Jul 12 2021 at 21:20)</a>:</h4>
<p>What's the correct file to import to make the following proof work?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.int.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
 <span class="n">norm_cast</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
 <span class="n">assumption</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="245751830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245751830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245751830">(Jul 12 2021 at 21:21)</a>:</h4>
<p>I need the import to be minimal as this is needed for proving <code>int.pow_right_injective</code>.</p>



<a name="245753364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245753364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245753364">(Jul 12 2021 at 21:34)</a>:</h4>
<p>I managed to get it to work with <code>import algebra.group_power.lemmas</code> but not with <code>import algebra.group_power.basic</code>.</p>



<a name="245753382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245753382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245753382">(Jul 12 2021 at 21:34)</a>:</h4>
<p>Not sure if this is the optimal import though.</p>



<a name="245756399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245756399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245756399">(Jul 12 2021 at 22:06)</a>:</h4>
<p><code>assumption_mod_cast</code> might solve this goal (this is unrelated to the import question)</p>



<a name="245758364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245758364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245758364">(Jul 12 2021 at 22:28)</a>:</h4>
<p>Thanks, this is working when <code>norm_cast, assumption</code> also works.</p>
<p>Actually, I found the <code>lemma</code> that <code>norm_cast</code> needs to solve this problem: <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.cast_pow">docs#nat.cast_pow</a></p>



<a name="245758396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/245758396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#245758396">(Jul 12 2021 at 22:29)</a>:</h4>
<p>and also <a href="https://leanprover-community.github.io/mathlib_docs/find/int.coe_nat_pow">docs#int.coe_nat_pow</a></p>



<a name="246299181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/246299181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#246299181">(Jul 17 2021 at 02:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245078">Apurva Nakade</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals/near/245694369">said</a>:</p>
<blockquote>
<p>Hi, Can someone take a look at this PR? It has been stable and hasn't had any changes for a while.<br>
Thanks,</p>
</blockquote>
<p>I made a few suggestions. Mostly requests to move content to earlier files. You may even consider adding a <code>surreal/dyadic.lean</code> or <code>game/dyadic.lean</code> file, particularly if later you or someone else will do dyadic dedekind cuts.</p>



<a name="246344926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/246344926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#246344926">(Jul 17 2021 at 21:13)</a>:</h4>
<p>Thanks! I just implemented the suggested changes.</p>
<p>I'm planning on refactoring <code>surreal.lean</code> into <code>surreal/basic.lean</code> and <code>surreal/dyadic.lean</code> in a short separate PR<br>
This PR has already become too complex :P</p>



<a name="246360516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/246360516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#246360516">(Jul 18 2021 at 05:11)</a>:</h4>
<p>But isn't this all new material being added in this PR? It seems simpler to do the refactor as part of this PR. I don't particularly object if you want to defer it, I just don't see why it would be easier.</p>



<a name="246377063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/246377063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#246377063">(Jul 18 2021 at 13:12)</a>:</h4>
<p>Ok, I'll refactor it here itself.</p>



<a name="252572349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252572349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252572349">(Sep 09 2021 at 05:17)</a>:</h4>
<p><span class="user-mention" data-user-id="245078">@Apurva Nakade</span> sorry this has taken a while to review. I'm curious -- are you planning on defining the multiplication on surreals? It seems a bit strange to have the map from Z[1/2] to the surreals without being able to say that it is multiplicative.</p>



<a name="252572815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252572815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252572815">(Sep 09 2021 at 05:24)</a>:</h4>
<p>No worries, I have been quite busy over the summer myself.</p>



<a name="252572940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252572940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252572940">(Sep 09 2021 at 05:25)</a>:</h4>
<p>I am not able to define associativity of multiplication for surreals.</p>



<a name="252573026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252573026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252573026">(Sep 09 2021 at 05:26)</a>:</h4>
<p>The proof gets too big, you essentially have to prove 3-4 theorems simultaneously for the recursion to work.</p>



<a name="252573070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252573070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252573070">(Sep 09 2021 at 05:27)</a>:</h4>
<p>As of now, I have some additive results about the surreal map and it might even be enough to deal with real numbers.</p>



<a name="252573182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252573182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252573182">(Sep 09 2021 at 05:29)</a>:</h4>
<p>Oh wait, we only have multiplication on <code>pgame</code> not on <code>surreals</code>.</p>



<a name="252573262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252573262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252573262">(Sep 09 2021 at 05:30)</a>:</h4>
<p>Would it be better to add these results to the <code>archive</code> folder?</p>



<a name="252573511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252573511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252573511">(Sep 09 2021 at 05:34)</a>:</h4>
<p>I'm really hoping to do some Cauchy sequences and get to the map <code>real \to surreal</code> and show that it is an ordered abelian group embedding.</p>



<a name="252575644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252575644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252575644">(Sep 09 2021 at 06:06)</a>:</h4>
<p>Ah, okay, I remember re: the multiplication now.</p>



<a name="252575682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252575682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252575682">(Sep 09 2021 at 06:07)</a>:</h4>
<p>I had trouble even understanding what we were meant to be inducting on.</p>



<a name="252575766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252575766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252575766">(Sep 09 2021 at 06:08)</a>:</h4>
<p>Do you still have a link to that paper that had a detailed proof? Perhaps we should stick that in a comment somewhere in mathlib.</p>



<a name="252926369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252926369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252926369">(Sep 11 2021 at 18:18)</a>:</h4>
<p>Yups, these are the notes: <a href="http://www.cs.cmu.edu/afs/cs/academic/class/15859-s05/www/lecture-notes/comb-games-notes.pdf">http://www.cs.cmu.edu/afs/cs/academic/class/15859-s05/www/lecture-notes/comb-games-notes.pdf</a><br>
And the result is Theorem 3.8</p>



<a name="252926393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252926393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252926393">(Sep 11 2021 at 18:19)</a>:</h4>
<p>I'll add a comment about this in the doc string</p>



<a name="252947509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/252947509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#252947509">(Sep 12 2021 at 01:05)</a>:</h4>
<p>Okay, I think after that I'll be happy to merge. Ping me here if I. don't notice on github. :-)</p>



<a name="253030949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237843%20dyadic%20surreals/near/253030949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237843.20dyadic.20surreals.html#253030949">(Sep 13 2021 at 02:59)</a>:</h4>
<p>Awesome!</p>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  I added the reference in <code>docs/references.bib</code> and added a paragraph at the beginning of <code>set_theory/surreal/basic.lean</code> under the heading "Multiplication of surreal numbers".</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>