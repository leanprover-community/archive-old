---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html">#8707 linter weirdness</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249762592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249762592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249762592">(Aug 17 2021 at 18:54)</a>:</h4>
<p>The linter seems to be complaining about a missing docstring in <a href="https://github.com/leanprover-community/mathlib/issues/8707">#8707</a>, but to me it looks like it's got one already. What am I missing?</p>



<a name="249763206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249763206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249763206">(Aug 17 2021 at 19:00)</a>:</h4>
<p><del>Number of hyphens. I've commented</del></p>



<a name="249763355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249763355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249763355">(Aug 17 2021 at 19:00)</a>:</h4>
<p>I misunderstood how to_additive docstringing works</p>



<a name="249764206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764206">(Aug 17 2021 at 19:07)</a>:</h4>
<p>This isn't to-additive docstringing specifically, this is just <code>/-" comment-string "-/</code> syntax which is the same as <code>" comment-string "</code> to lean</p>



<a name="249764326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764326">(Aug 17 2021 at 19:08)</a>:</h4>
<p>(but gets markdown comment highlighting)</p>



<a name="249764388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764388">(Aug 17 2021 at 19:08)</a>:</h4>
<p><code>has_scalar.comp.smul</code> has <code>has_vadd.comp.vadd</code> as additive version.<br>
However, it seems like this is not added to the <code>to_additive</code>-dictionary. When translating <code>has_scalar.comp</code>, it generates a new additive version <br>
<code>has_vadd.comp.smul</code> of the previous definition.<br>
So this is a bug in <code>to_additive</code> that I likely introduced. I will investigate more later today.</p>



<a name="249764577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764577">(Aug 17 2021 at 19:10)</a>:</h4>
<p>Should I replace the <code>.</code> with an <code>_</code> for now to fix it?</p>



<a name="249764777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764777">(Aug 17 2021 at 19:12)</a>:</h4>
<p>Does that fix it?</p>



<a name="249764826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764826">(Aug 17 2021 at 19:12)</a>:</h4>
<p>Ah, that does fix it indeed...</p>



<a name="249764843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764843">(Aug 17 2021 at 19:12)</a>:</h4>
<p>I didn't try, just guessed</p>



<a name="249764856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249764856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249764856">(Aug 17 2021 at 19:13)</a>:</h4>
<p>Feel free to push to that branch</p>



<a name="249784692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249784692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249784692">(Aug 17 2021 at 22:02)</a>:</h4>
<p>This was indeed a bug in <code>to_additive</code>. To trigger it you needed the following conditions:</p>
<ul>
<li>In <code>has_scalar.comp</code> you used a declaration in the namespace <code>has_scalar.comp</code> (namely <code>has_scalar.comp.smul</code>)</li>
<li><code>has_scalar.comp</code> and <code>has_scalar.comp.smul</code> both have the attribute <code>@[to_additive]</code></li>
<li>Additivizing <code>has_scalar.comp.smul</code> changes the last part of the name</li>
</ul>
<p>I'll fix it in a new PR.</p>



<a name="249788372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238707%20linter%20weirdness/near/249788372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness.html#249788372">(Aug 17 2021 at 22:42)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/8733">#8733</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>