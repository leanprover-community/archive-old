---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html">#12942 Bochner integral refactor</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276651112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276651112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276651112">(Mar 25 2022 at 17:15)</a>:</h4>
<p>The Bochner integral refactor is live in <a href="https://github.com/leanprover-community/mathlib/pull/12942">#12942</a>. I'll try to merge master regularly until it is merged, but it will probably be a little painful as the refactor touches 69 files in a pretty fundamental way.</p>



<a name="276651345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276651345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276651345">(Mar 25 2022 at 17:17)</a>:</h4>
<p>Refactoring the measure theory library is a rite of passage.  And now you have performed this rite many times!</p>



<a name="276651433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276651433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276651433">(Mar 25 2022 at 17:18)</a>:</h4>
<p>Oh yes, too many times already :-)</p>



<a name="276652011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276652011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276652011">(Mar 25 2022 at 17:22)</a>:</h4>
<p>The definition of <code>is_separable</code> looks slightly weird</p>



<a name="276652043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276652043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276652043">(Mar 25 2022 at 17:22)</a>:</h4>
<p>Don't you want <code>c</code> to be contained in <code>s</code>?</p>



<a name="276652140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276652140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276652140">(Mar 25 2022 at 17:23)</a>:</h4>
<p>I'm talking about <a href="https://github.com/leanprover-community/mathlib/pull/12936">#12936</a></p>



<a name="276656393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276656393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276656393">(Mar 25 2022 at 17:54)</a>:</h4>
<p>I really want to have <code>is_separable.mono</code>. This one is obvious if you don't require <code>c</code> to be contained in <code>s</code>, but probably not true otherwise. Note that I prove that, in metric spaces, it is equivalent to require <code>c</code> to be contained in <code>s</code> or not (and that is also part of the PR).</p>



<a name="276656726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276656726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276656726">(Mar 25 2022 at 17:57)</a>:</h4>
<p>I left a review</p>



<a name="276656891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276656891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276656891">(Mar 25 2022 at 17:58)</a>:</h4>
<p>I would have thought that the non-trivial and true statement is that a subset of a separable metric space is separable (in the usual sense). Do you need more?</p>



<a name="276659547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276659547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276659547">(Mar 25 2022 at 18:19)</a>:</h4>
<p>There is a tension that, in general, a subtype of a separable space is not a separable space (If I'm not mistaken, the Stone-Cech compactification of the naturals should be an example), so any definition will be badly behaved for general spaces, and well behaved for metric spaces. I chose the definition for which most properties remain true in general, to have less assumptions to check in general.</p>



<a name="276660865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276660865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276660865">(Mar 25 2022 at 18:31)</a>:</h4>
<p>Ok, so I suggest you simply add a warning in the docstring.</p>



<a name="276661059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276661059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276661059">(Mar 25 2022 at 18:33)</a>:</h4>
<p>I also reviewed  <a href="https://github.com/leanprover-community/mathlib/pull/12935">#12935</a> but Rémy was too quick</p>



<a name="276661287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276661287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276661287">(Mar 25 2022 at 18:34)</a>:</h4>
<p>I cancelled the merge</p>



<a name="276661409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276661409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276661409">(Mar 25 2022 at 18:36)</a>:</h4>
<p>Ping me when you split a PR with the 1000 lines of <code>ae_strongly_measurable</code>. I'll review that.</p>



<a name="276661822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276661822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276661822">(Mar 25 2022 at 18:39)</a>:</h4>
<p>Yes, we are done with the topological preliminaries. All four PRs are either ready to merge or delegated.</p>



<a name="276661980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276661980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276661980">(Mar 25 2022 at 18:40)</a>:</h4>
<p>Thanks for being so quick!</p>



<a name="276662786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276662786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276662786">(Mar 25 2022 at 18:48)</a>:</h4>
<p>Your 69 files story frightened us.</p>



<a name="276719125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276719125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276719125">(Mar 26 2022 at 10:44)</a>:</h4>
<p>Next batch of short prerequisites is ready, in <a href="https://github.com/leanprover-community/mathlib/pull/12951">#12951</a>, <a href="https://github.com/leanprover-community/mathlib/pull/12952">#12952</a>, <a href="https://github.com/leanprover-community/mathlib/pull/12953">#12953</a>, <a href="https://github.com/leanprover-community/mathlib/pull/12954">#12954</a>.</p>



<a name="276726783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276726783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276726783">(Mar 26 2022 at 13:42)</a>:</h4>
<p>About <a href="https://github.com/leanprover-community/mathlib/pull/12952">#12952</a> : can we merge both lemmas into one assuming <code>has_div</code>?</p>



<a name="276726975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276726975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276726975">(Mar 26 2022 at 13:47)</a>:</h4>
<p>About <a href="https://github.com/leanprover-community/mathlib/pull/12953">#12953</a>: could you please add docstrings with words "Chebyshev's inequality"?</p>



<a name="276727194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276727194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276727194">(Mar 26 2022 at 13:52)</a>:</h4>
<p>I removed both from the queue, sorry for a delay.</p>



<a name="276727561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276727561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276727561">(Mar 26 2022 at 14:00)</a>:</h4>
<p>Can you also mention <code>mul_meas_ge_le_lintegral₀</code> in the doc-string of <code>mul_meas_ge_le_lintegral</code></p>



<a name="276736241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276736241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276736241">(Mar 26 2022 at 17:22)</a>:</h4>
<p>I delegated both <a href="https://github.com/leanprover-community/mathlib/pull/12952">#12952</a> and <a href="https://github.com/leanprover-community/mathlib/pull/12953">#12953</a></p>



<a name="276764416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276764416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276764416">(Mar 27 2022 at 04:30)</a>:</h4>
<p>I pushed 2 small commits to <a href="https://github.com/leanprover-community/mathlib/tree/integral_refactor">branch#integral_refactor</a> (drop an unused argument, drop a TODO).</p>



<a name="276774203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276774203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276774203">(Mar 27 2022 at 08:04)</a>:</h4>
<p>Wow, you're already looking at it while it's not even ready for review, thanks!<br>
By the way, there is a last small bit before we get into serious things, in <a href="https://github.com/leanprover-community/mathlib/pull/12978">#12978</a>.</p>



<a name="276774601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276774601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276774601">(Mar 27 2022 at 08:12)</a>:</h4>
<p>I had a look at the files about complex analysis, nothing more.</p>



<a name="276796999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276796999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276796999">(Mar 27 2022 at 16:51)</a>:</h4>
<p>First serious stuff is there in <a href="https://github.com/leanprover-community/mathlib/pull/12985">#12985</a>. Sorry for the length...</p>



<a name="276800281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/276800281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#276800281">(Mar 27 2022 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="350992">Rémy Degenne</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor/near/276661409">said</a>:</p>
<blockquote>
<p>Ping me when you split a PR with the 1000 lines of <code>ae_strongly_measurable</code>. I'll review that.</p>
</blockquote>
<p><span aria-label="ping pong" class="emoji emoji-1f3d3" role="img" title="ping pong">:ping_pong:</span></p>



<a name="277018700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/277018700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#277018700">(Mar 29 2022 at 15:05)</a>:</h4>
<p>The last and most painful bit is now ready for review in <a href="https://github.com/leanprover-community/mathlib/pull/12942">#12942</a>. Unfortunately, it has to be done in one single PR, because once you change a basic definition you have to fix everything that depends on it.</p>



<a name="277082065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2312942%20Bochner%20integral%20refactor/near/277082065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2312942.20Bochner.20integral.20refactor.html#277082065">(Mar 30 2022 at 00:45)</a>:</h4>
<p>On the queue. I did not verify that none of the remaining <code>[second_countable_topology _]</code> assumptions can't be dropped. If some of them can be dropped, then we can do it later. Thanks a lot for this refactor!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>