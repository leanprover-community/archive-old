---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2311147.20function.20field.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html">#11147 function field</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="266504218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266504218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266504218">(Dec 31 2021 at 13:42)</a>:</h4>
<p>Function fields of integral schemes are coming to mathlib. One thing that I don't know yet is how to deal with concrete special cases. For example: the function field of <code>Spec ℤ</code> is ℚ`. Except that this "is" is of course meant in a very loose sense of "canonically isomorphic". It's not defeq, and not even propeq.<br>
Should we just not worry about this, and fix this with characteristic predicates whenever the time comes?</p>
<p>(cc <span class="user-mention" data-user-id="439483">@Andrew Yang</span>)</p>



<a name="266504304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266504304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266504304">(Dec 31 2021 at 13:44)</a>:</h4>
<p>My instinct is that this is what we've done with things like fields of fractions (a concrete model and a characteristic predicate) and this is working fine. We'll need to do this with algebraic closures at some point -- we have the concrete model but I think we'll need the abstract predicate at some point.</p>



<a name="266521817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266521817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266521817">(Dec 31 2021 at 20:12)</a>:</h4>
<p>One option could be to provide <a href="https://leanprover-community.github.io/mathlib_docs/find/is_fraction_ring">docs#is_fraction_ring</a>  instances for the chosen field on various rings constructed from the scheme, like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{O}(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span> for any nonempty open, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">O</mi><mrow><mi>X</mi><mo separator="true">,</mo><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathcal{O}_{X,x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> for any point, etc.</p>



<a name="266521839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266521839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266521839">(Dec 31 2021 at 20:13)</a>:</h4>
<p>BTW <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/algebraic_closure.is_alg_closure">docs#algebraic_closure.is_alg_closure</a></p>



<a name="266522087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266522087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266522087">(Dec 31 2021 at 20:19)</a>:</h4>
<p>There is a follow up PR: <a href="https://github.com/leanprover-community/mathlib/pull/11129">#11129</a> that provides the instance <code>is_fraction_ring (X.presheaf.stalk x) X.function_field</code>.</p>



<a name="266522099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266522099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266522099">(Dec 31 2021 at 20:19)</a>:</h4>
<p>Do we have a predicate saying that a certain open is affine?</p>



<a name="266522791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266522791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266522791">(Dec 31 2021 at 20:37)</a>:</h4>
<p>Not yet. I've tried to come up with one some time ago but some properties that I wanted to show got a bit blocked without the Spec adjunction. (Or at least the fact that Spec is fully faithful).<br>
But I probably should add it sooner so that we could state some results using it.</p>



<a name="266572188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266572188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266572188">(Jan 01 2022 at 19:49)</a>:</h4>
<p>(deleted)</p>



<a name="266572252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266572252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266572252">(Jan 01 2022 at 19:50)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="439483">@Andrew Yang</span>, please free free to revive <a href="https://github.com/leanprover-community/mathlib/pull/9802">#9802</a> and get it merged, as I said once before. If you encounter any problem and need help, just let me know! (I think that to_Γ_Spec (the unit of adjunction) is_iso is a good definition for affineness.) I’m still working on the (co)limits in the Grothendieck categories, and haven’t started to leanify the core of Gillam’s paper (and by the way, I no longer plan to do a massive refactor of Spec using the localization functor).<br>
What I have been able to achieve at <a href="https://github.com/leanprover-community/mathlib/compare/lax_grothendieck?expand=1#diff-779e8ece193ac9cfb8b3ab087590457d8f57c59a774bd663d70eaa8e6a160ecd">branch lax_grothendieck</a> is showing colimits exist under conditions listed in the nLab page. Now I’m trying to establish that the forgetful functor preserves colimits in the greatest generality: of course if the listed conditions are all met then it follows from the construction. However I think I can prove it in four cases: (1) fiber categories has_terminal (leanified); (2) fiber categories has_initial and the “pushforward” functors preserves_initial; (3) fiber categories has_colimits; (4) base categories has_colimits and pushforward functors is_left_adjoint (i.e. we have pullback functors). (It’s sort of original research, albeit rather trivial, and does take time. The same for the organization of the whole construction of colimits around <code>fiber_push</code> and other functors (a 2-natural transformation pops up!).)<br>
After these, I still need to do the ‘transfer pseudofunctor across adjunctions’ stuff to dualize the results, before getting back to Gillam’s paper proper, and it won’t be fast.</p>



<a name="266609002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2311147%20function%20field/near/266609002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2311147.20function.20field.html#266609002">(Jan 02 2022 at 11:14)</a>:</h4>
<p>Wow. Sounds that you've embarked on a great journey!<br>
If you are no longer trying to refactor Spec, I think I will start tidying up <a href="https://github.com/leanprover-community/mathlib/pull/9802">#9802</a> and try to get it merged.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>