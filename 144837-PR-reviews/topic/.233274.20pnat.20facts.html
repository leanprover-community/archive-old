---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html">#3274 pnat facts</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202857229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857229">(Jul 04 2020 at 05:20)</a>:</h4>
<p>This PR is passing the main build CI, but some tests are failing. Could someone who understands <code>guard_target</code> please take a look at <code>test/interval_cases.lean</code> after</p>
<div class="codehilite"><pre><span></span><code>leanproject get mathlib:pnat_facts_for_perfect
</code></pre></div>



<a name="202857456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857456">(Jul 04 2020 at 05:28)</a>:</h4>
<p>The issue is that <code>guard_target</code> is failing, but as far as I can see the goal is <em>exactly</em> what it should be according to <code>guard_target</code>.</p>



<a name="202857463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857463">(Jul 04 2020 at 05:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> If you have a spare 5 minutes, that would be lovely.</p>



<a name="202857514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857514">(Jul 04 2020 at 05:30)</a>:</h4>
<p>Away from a computer for 48 hours, but I'll look them if it's still open.</p>



<a name="202857593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857593">(Jul 04 2020 at 05:33)</a>:</h4>
<p>Have you tried <code>guard_target'</code>?</p>



<a name="202857712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857712">(Jul 04 2020 at 05:36)</a>:</h4>
<p>If the implicit parameters are exactly right, it might be an issue with metavariables not getting instantiated. You can also try prefixing the <code>guard_target</code> with <code>do { target &gt;&gt;= instantiate_mvars &gt;&gt;= change }</code> (and do <code>open tactic</code> first)</p>



<a name="202857731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857731">(Jul 04 2020 at 05:37)</a>:</h4>
<p>Sorry, the timing is bad. It's 1:37 AM here and I'm due for a night of sleep</p>



<a name="202857775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202857775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202857775">(Jul 04 2020 at 05:38)</a>:</h4>
<p>Let me know if those changes work and I'll see what's going on tomorrow</p>



<a name="202858871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202858871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202858871">(Jul 04 2020 at 06:13)</a>:</h4>
<p><code>guard_target'</code> seems to work. Let's see if CI is happy now.</p>



<a name="202872174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202872174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202872174">(Jul 04 2020 at 12:42)</a>:</h4>
<p>This feels like it might be papering over an actual issue.</p>



<a name="202875941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202875941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202875941">(Jul 04 2020 at 14:25)</a>:</h4>
<p>I think it's that <code>guard_target</code> is often inadequate. It is too sensitive. I'm not sure if it is always too sensitive but often, I'm ok with a looser notion of equality than alpha equality. It would be interesting to see what tripped it up this time.</p>



<a name="202877301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202877301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202877301">(Jul 04 2020 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/144837-PR-reviews/topic/.233274.20pnat.20facts/near/202872174">said</a>:</p>
<blockquote>
<p>This feels like it might be papering over an actual issue.</p>
</blockquote>
<p>Certainly... but I also feel like I'm not qualified to figure out or fix the actual issue.</p>



<a name="202877479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202877479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202877479">(Jul 04 2020 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="302826">@Aaron Anderson</span> I've kicked it on the merge queue. Congrats!</p>



<a name="202877486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202877486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202877486">(Jul 04 2020 at 15:03)</a>:</h4>
<p>The <code>guard_target</code> issue can be fixed by others in another PR</p>



<a name="202881207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202881207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202881207">(Jul 04 2020 at 16:33)</a>:</h4>
<p>but probably won't be <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="202881297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202881297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202881297">(Jul 04 2020 at 16:35)</a>:</h4>
<p>Well, there's a bunch of primed tactic in mathlib that we considered moving into core to replace the unprimed version. That could be such an example. I don't know concretely where it is on the list of priorities though</p>



<a name="202881878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%233274%20pnat%20facts/near/202881878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.233274.20pnat.20facts.html#202881878">(Jul 04 2020 at 16:48)</a>:</h4>
<p>I think this should remain primed, because it does something different.  And in particular because the failure mode is that tests would silently pass even though they should fail.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>