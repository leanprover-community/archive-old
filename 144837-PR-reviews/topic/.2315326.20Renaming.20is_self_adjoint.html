---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html">#15326 Renaming is_self_adjoint</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="290297710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290297710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290297710">(Jul 20 2022 at 20:57)</a>:</h4>
<p>This will accumulate merge conflicts rather quickly (thanks Anatole for letting me know of the first one), so I'd like to discuss this rather sooner than later</p>



<a name="290409460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290409460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290409460">(Jul 21 2022 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span>  I am fine with this change and think it makes sense (I'll look carefully at the PR today sometime), but can you add a detailed description to the PR explaining precisely what you are changing and why it is necessary? That way (a) there will be a clear history in the git log, and (b) for those unfamiliar with the area they will understand the distinction clearly which should make it easier to review.</p>



<a name="290794962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290794962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290794962">(Jul 25 2022 at 17:52)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span> Have you considered defining <code>is_self_adjoint</code> in the context of a general star-ring?  So it would be the unbundled version of <a href="https://leanprover-community.github.io/mathlib_docs/find/self_adjoint">docs#self_adjoint</a> ?  I guess this would still let you use dot notation for lemmas <code>is_self_adjoint.foo</code>, and it would deduplicate the continuous-linear and linear theory.</p>



<a name="290795200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290795200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290795200">(Jul 25 2022 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290297710">said</a>:</p>
<blockquote>
<p>This will accumulate merge conflicts rather quickly (thanks Anatole for letting me know of the first one),</p>
</blockquote>
<p>Indeed, I think there are a few more lemmas that need to be renamed now that <a href="https://github.com/leanprover-community/mathlib/pull/15470">#15470</a> is merged.</p>



<a name="290805406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290805406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290805406">(Jul 25 2022 at 19:11)</a>:</h4>
<p>I guess my grand plan would be rather to do the unbounded operator theory first and then deduce the bounded operators as a special case. This would make it impossible to use abstract notions of self-adjointness. In the bounded case the adjoint is naturally a bounded operator, whereas for finite dimensional vector spaces it might be annoying to do everything with <code>continuous_linear_map</code>s so I am not sure how to avoid duplications completely.</p>



<a name="290805808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290805808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290805808">(Jul 25 2022 at 19:15)</a>:</h4>
<p>I agree that for the unbounded operator theory, <code>is_self_adjoint</code> (to be renamed <code>is_symmetric</code>) is the useful concept.  But the thing which you propose in the future to call <code>is_self_adjoint</code>, namely</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- A (not necessarily bounded) operator `A` on an inner product space is self-adjoint iff</span>
<span class="sd">  `A` is equal to its adjoint. -/</span>
<span class="kd">def</span> <span class="n">is_self_adjoint</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">A.adjoint</span> <span class="bp">=</span> <span class="n">A</span>
</code></pre></div>
<p>the right context here is star-rings, right?</p>



<a name="290805977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290805977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290805977">(Jul 25 2022 at 19:17)</a>:</h4>
<p>yes</p>



<a name="290819439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290819439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290819439">(Jul 25 2022 at 21:14)</a>:</h4>
<p>So should we move that definition in your PR to the file<br>
<a href="https://leanprover-community.github.io/mathlib_docs/algebra/star/self_adjoint.html">https://leanprover-community.github.io/mathlib_docs/algebra/star/self_adjoint.html</a><br>
?</p>



<a name="290840111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290840111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290840111">(Jul 26 2022 at 01:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290805808">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- A (not necessarily bounded) operator `A` on an inner product space is self-adjoint iff</span>
<span class="sd">  `A` is equal to its adjoint. -/</span>
<span class="kd">def</span> <span class="n">is_self_adjoint</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">A.adjoint</span> <span class="bp">=</span> <span class="n">A</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Do we really need a second version of this? We already have <code>x ‚àà self_adjoint (E ‚ÜíL[ùïú] E)</code>, no...?</p>



<a name="290840223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290840223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290840223">(Jul 26 2022 at 01:39)</a>:</h4>
<p>Right, there's an argument about whether the second (unbundled) version should exist, but if we do add it, I think it should be in the same file and mathematical setting as the bundled version!</p>



<a name="290870110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290870110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290870110">(Jul 26 2022 at 09:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290795200">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290297710">said</a>:</p>
<blockquote>
<p>This will accumulate merge conflicts rather quickly (thanks Anatole for letting me know of the first one),</p>
</blockquote>
<p>Indeed, I think there are a few more lemmas that need to be renamed now that <a href="https://github.com/leanprover-community/mathlib/pull/15470">#15470</a> is merged.</p>
</blockquote>
<p>I've (hopefully) fixed all merge conflicts. The diff looks rather complicated because the proofs can be improved with the new <code>is_self_adjoint</code>, now it is possible to rewrite everything in terms of the adjoint and <code>simp</code> helps there a bit.</p>



<a name="290903438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290903438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290903438">(Jul 26 2022 at 14:42)</a>:</h4>
<p>I am afraid that the dedup to remove <code>is_self_adjoint</code> in favor of <code>self_adjoint R</code> might not be doable at the moment. In the abstract setting the adjoint is only defined over one ring and <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> 's recent additions crucially use that <code>A.adjoint : F -&gt; E</code> for <code>A : E -&gt; F</code>.</p>



<a name="290903704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290903704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290903704">(Jul 26 2022 at 14:44)</a>:</h4>
<p>For instance I don't see how <code>conj_orthogonal_projection</code> can be proved in a sensible way with <code>self_adjoint R</code></p>



<a name="290904416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290904416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290904416">(Jul 26 2022 at 14:49)</a>:</h4>
<p>on a related note, we then should also redefine <code>is_positive</code> in an abstract way (there exists a square root), but proving the equality to the current definition requires the spectral theorem for bounded self-adjoint operators <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="290908843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290908843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290908843">(Jul 26 2022 at 15:18)</a>:</h4>
<p>it builds successfully now</p>



<a name="290936579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290936579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290936579">(Jul 26 2022 at 18:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290903438">said</a>:</p>
<blockquote>
<p>I am afraid that the dedup to remove <code>is_self_adjoint</code> in favor of <code>self_adjoint R</code> might not be doable at the moment. In the abstract setting the adjoint is only defined over one ring and <span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> 's recent additions crucially use that <code>A.adjoint : F -&gt; E</code> for <code>A : E -&gt; F</code>.</p>
</blockquote>
<p>This is a good point. I think this means that we shouldn't use <code>star</code> to mean <code>adjoint</code> <del>, and that we have to keep the <code>is_self_adjoint</code> definition</del></p>



<a name="290936764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290936764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290936764">(Jul 26 2022 at 18:30)</a>:</h4>
<p>Unless we want to make a theory of "pairs of algebras with a <code>star</code> sending each algebra to the other" <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="290936964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290936964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290936964">(Jul 26 2022 at 18:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290904416">said</a>:</p>
<blockquote>
<p>on a related note, we then should also redefine <code>is_positive</code> in an abstract way (there exists a square root), but proving the equality to the current definition requires the spectral theorem for bounded self-adjoint operators <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>
</blockquote>
<p>I'm not a big fan of having definitions which need huge theorems to even be useful, because although I don't know about this particular case, in a lot of cases you have to develop both theorie anyway to show they are equivalent</p>



<a name="290937569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290937569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290937569">(Jul 26 2022 at 18:36)</a>:</h4>
<p>It would be useful, since it is very easy to show that the abstract definition implies the concrete one (if you have a square root <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><msup><mi>B</mi><mo>‚àó</mo></msup><mi>B</mi></mrow><annotation encoding="application/x-tex">A = B^* B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> you immediately see that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">‚ü®</mo><mi>A</mi><mi>x</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">‚ü©</mo><mo>=</mo><mo stretchy="false">‚ü®</mo><mi>B</mi><mi>x</mi><mo separator="true">,</mo><mi>B</mi><mi>x</mi><mo stretchy="false">‚ü©</mo><mo>‚â•</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\langle A x, x \rangle = \langle B x, B x\rangle \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">‚ü®</span><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">‚ü©</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">‚ü®</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal">x</span><span class="mclose">‚ü©</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚â•</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>), it is just that showing the converse direction uses (at least to my knowledge) the spectral theorem via the functional calculus (you construct <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>A</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">A</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span>).</p>



<a name="290937832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290937832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290937832">(Jul 26 2022 at 18:38)</a>:</h4>
<p>but I was really serious about that remark, even though it might happen eventually since the C*-people might prefer to have an abstract definition of non-negative operators.</p>



<a name="290938676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290938676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290938676">(Jul 26 2022 at 18:45)</a>:</h4>
<p>I will <em>definitely</em> have an abstract definition (likely via the spectrum) for nonnegative operators. My goal is to keep the C*-algebra theory independent of representation as much as possible. I find it analogous to the situation in linear algebra where you want to avoid choosing a basis in developing most of the theory in a nice way.</p>



<a name="290938940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290938940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290938940">(Jul 26 2022 at 18:47)</a>:</h4>
<p>Is there a quick way to prove that the sum of two positive operators is positive using the abstract definition. If yes that we could switch to it, otherwise I think this is a pretty strong reason of keeping the concrete definition at least before we are able to prove this about the abstract definitoon.</p>



<a name="290938961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290938961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290938961">(Jul 26 2022 at 18:47)</a>:</h4>
<p>Although I'm not sure I understand the comment about A : E -&gt; F. Even if you have an adjoint defined in this context, the operator can't be selfadjoint. Or am I missing the point?</p>



<a name="290939074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290939074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290939074">(Jul 26 2022 at 18:48)</a>:</h4>
<p>We cannot replace <code>A.adjoint</code> by <code>star A</code> everywhere, because the adjoint is more general. Nothing about self-adjointness here</p>



<a name="290939175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290939175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290939175">(Jul 26 2022 at 18:49)</a>:</h4>
<p>There is an abstract way, yes, but no it's not as simple as with the inner product. To be clear, I'm not advocating getting rid of the concrete definition, only emphasizing that we will have an abstract one too.</p>



<a name="290939445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290939445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290939445">(Jul 26 2022 at 18:52)</a>:</h4>
<p>Also, quick disclaimer : as usual, I am learning some of the math while doing them in Lean, so it is completely possible that I am doing some things wrong <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="290939588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290939588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290939588">(Jul 26 2022 at 18:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/290939074">said</a>:</p>
<blockquote>
<p>We cannot replace <code>A.adjoint</code> by <code>star A</code> everywhere, because the adjoint is more general. Nothing about self-adjointness here</p>
</blockquote>
<p>That said, why can't we use the general self adjointness then ? I agree it would be annoying to use because one would have to constantly switch between <code>star</code> and <code>adjoint</code> all the time, but this is doable, right ?</p>



<a name="290939823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290939823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290939823">(Jul 26 2022 at 18:55)</a>:</h4>
<p>hm, you might be right and I was a bit too eager with removing things. Give me a second for a less invasive dedup.</p>



<a name="290940084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290940084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290940084">(Jul 26 2022 at 18:57)</a>:</h4>
<p>I guess all one needs is <code>mem_self_adjoint_iff</code> with rhs being <code>A.adjoint = A</code> and everything should work just fine</p>



<a name="290942258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290942258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290942258">(Jul 26 2022 at 19:13)</a>:</h4>
<p>it works, and the stuff I have to do to fix all the files is rather easy</p>



<a name="290942604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290942604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290942604">(Jul 26 2022 at 19:15)</a>:</h4>
<p>but it is really sad to not have dot-notation</p>



<a name="290942811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290942811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290942811">(Jul 26 2022 at 19:17)</a>:</h4>
<p>and it is a bit more annoying to write down since you have to be explicit about the spaces</p>



<a name="290944843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290944843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290944843">(Jul 26 2022 at 19:33)</a>:</h4>
<p>If I use a completely bundled approach (i.e., using <code>A : self_adjoint (..)</code>), then all lemmas that show that certain operators are self-adjoint become definitions, right?</p>



<a name="290945320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290945320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290945320">(Jul 26 2022 at 19:37)</a>:</h4>
<p>Hmmm I'm not sure about doing this, it smells coercion hell. Do you think the fact that it brings back dot notation is worth the trouble ?</p>



<a name="290945353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290945353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290945353">(Jul 26 2022 at 19:37)</a>:</h4>
<p>But if you do this yes, everything becomes definitions</p>



<a name="290945776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290945776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290945776">(Jul 26 2022 at 19:40)</a>:</h4>
<p>I am not sure about this either, but the version with mem looks really messy</p>



<a name="290946076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290946076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290946076">(Jul 26 2022 at 19:43)</a>:</h4>
<p>Yes it's always the same balance to find between unifying things and making things easy to write. There is the same problem with the morphism refactor, where we lost some of the dot notation and have to be much more explicit because Lean can't guess that when we want to consider a continuous linear map as a linear map it is obviously between the same spaces and with the same base field</p>



<a name="290946101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290946101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290946101">(Jul 26 2022 at 19:43)</a>:</h4>
<p>I really don't have a good answer</p>



<a name="290946458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290946458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290946458">(Jul 26 2022 at 19:46)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Conjugating preserves self-adjointness -/</span>
<span class="kd">def</span> <span class="n">adjoint_conj'</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">self_adjoint</span> <span class="o">(</span><span class="n">E</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">))</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">self_adjoint</span> <span class="o">(</span><span class="n">F</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">A</span> <span class="k">with</span> <span class="n">A</span> <span class="n">hA</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">‚ü®</span><span class="n">S</span><span class="bp">‚Ä†</span> <span class="bp">‚àò</span><span class="n">L</span> <span class="n">A</span> <span class="bp">‚àò</span><span class="n">L</span> <span class="n">S</span><span class="o">,</span> <span class="n">_</span><span class="o">‚ü©,</span>
  <span class="n">rw</span> <span class="n">mem_self_adjoint_iff</span> <span class="n">at</span> <span class="bp">‚ä¢</span> <span class="n">hA</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hA</span><span class="o">,</span> <span class="n">adjoint_comp</span><span class="o">,</span> <span class="n">adjoint_adjoint</span><span class="o">,</span> <span class="n">add_subgroup.coe_mk</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">continuous_linear_map.comp_assoc</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>

<span class="sd">/-- Conjugating preserves self-adjointness -/</span>
<span class="kd">lemma</span> <span class="n">adjoint_conj</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">}</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">‚àà</span> <span class="n">self_adjoint</span> <span class="o">(</span><span class="n">E</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">))</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">S</span><span class="bp">‚Ä†</span> <span class="bp">‚àò</span><span class="n">L</span> <span class="n">A</span> <span class="bp">‚àò</span><span class="n">L</span> <span class="n">S</span><span class="o">)</span> <span class="bp">‚àà</span> <span class="n">self_adjoint</span> <span class="o">(</span><span class="n">F</span> <span class="bp">‚Üí</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">mem_self_adjoint_iff</span> <span class="n">at</span> <span class="bp">‚ä¢</span> <span class="n">hA</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hA</span><span class="o">,</span> <span class="n">adjoint_comp</span><span class="o">,</span> <span class="n">adjoint_adjoint</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">continuous_linear_map.comp_assoc</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>these are the two different versions</p>



<a name="290946562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290946562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290946562">(Jul 26 2022 at 19:47)</a>:</h4>
<p>For <code>A : self_adjoint (E ‚ÜíL[ùïú] E)</code> and <code>x : E</code> the coercion <code>A x</code> works just fine</p>



<a name="290947245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290947245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290947245">(Jul 26 2022 at 19:53)</a>:</h4>
<p>If we use the unbundled version, then we have a worse variant of the <code>is_self_adjoint</code> definition (without dot-notation and less portable), but the bundled variant adds a bit of boilerplate to each proof that needs to unfold the self-adjointness condition. I could live with both variants, but I only want to change it once :-D</p>



<a name="290947731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290947731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290947731">(Jul 26 2022 at 19:57)</a>:</h4>
<p>There's also the option of keeping <code>is_self_adjoint</code> for convenience but defining it in terms of <code>self_adjoint</code></p>



<a name="290947746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290947746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290947746">(Jul 26 2022 at 19:57)</a>:</h4>
<p>Maybe it is time for a poll ?</p>



<a name="290948112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290948112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290948112">(Jul 26 2022 at 20:00)</a>:</h4>
<p>/poll How to define self-adjoint operators<br>
New definition: <code>A.is_self_adjoint</code><br>
Abstract definition, unbundled: <code>A ‚àà self_adjoint (E ‚ÜíL[ùïú] E)</code><br>
Abstract definition, bundled: <code>A : self_adjoint (E ‚ÜíL[ùïú] E)</code></p>



<a name="290948224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290948224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290948224">(Jul 26 2022 at 20:00)</a>:</h4>
<p>I always forget that polls don't support backticks..</p>



<a name="290948347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290948347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290948347">(Jul 26 2022 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> <span class="user-mention" data-user-id="311453">@Fr√©d√©ric Dupuis</span> <span class="user-mention" data-user-id="240862">@Oliver Nash</span></p>



<a name="290977770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290977770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290977770">(Jul 27 2022 at 01:43)</a>:</h4>
<p>The way I see it, the main disadvantage of the new definition is that we will have to convert between the two versions whenever we use both lemmas that are specifically about self-adjoint operators and lemmas that are about self-adjoint elements of an abstract algebra.</p>



<a name="290983586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290983586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290983586">(Jul 27 2022 at 03:30)</a>:</h4>
<p>Reasoning for my vote: we want a bundled version so that we can, for instance, make the selfadjoint operators into a real vector space under certain circumstances. While this is still possible with the unbundled approach, I don't think it's as nice. However, we also want the unbundled version because there are times when you just want the predicate (so that not all theorems that prove something is selfadjoint have to be defs; that could get old quickly). And as mentioned above, it would be nice not to need to switch between the two (abstract and concrete) all the time.</p>



<a name="290983627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/290983627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#290983627">(Jul 27 2022 at 03:31)</a>:</h4>
<p>Yes, the advantage for option 2 is that we can bundle on the fly, right ? Although it would only be a subgroup, not a submodule.</p>



<a name="291029490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291029490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291029490">(Jul 27 2022 at 12:58)</a>:</h4>
<p>This LGTM but I figured <span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> might want to have a look one more time so I've delegated it to him.</p>



<a name="291059974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291059974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291059974">(Jul 27 2022 at 15:55)</a>:</h4>
<p>I'm agnostic, more or less.  There is precedent for having both a propositional <code>is_self_adjoint</code> and a subgroup <code>self_adjoint</code>.  Compare e.g. <code>is_unit</code> and <code>units</code>.  But I think this makes sense only if we commit to keeping up the parallel theories and writing a lot of support for both versions.</p>



<a name="291069485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291069485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291069485">(Jul 27 2022 at 16:04)</a>:</h4>
<p>I am starting to wonder whether this whole discussion becomes easy to settle once we have unbounded operators. there we will need a new definition (because there is no algebraic structure) and for bounded operators we then have the concrete version for <code>linear_pmap</code> and the abstract version using the fact that <code>continuous_linear_map</code> is a <code>star_ring</code>.</p>



<a name="291072039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291072039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291072039">(Jul 27 2022 at 16:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/291059974">said</a>:</p>
<blockquote>
<p>I'm agnostic, more or less.  There is precedent for having both a propositional <code>is_self_adjoint</code> and a subgroup <code>self_adjoint</code>.  Compare e.g. <code>is_unit</code> and <code>units</code>.  But I think this makes sense only if we commit to keeping up the parallel theories and writing a lot of support for both versions.</p>
</blockquote>
<p>If <code>is_unit</code> is a <code>set</code> instead of a predicate, we'd be able to write <code>r : is_unit R</code> and <code>r</code> would be a term of the ("bundled") subtype, because we have <a href="https://leanprover-community.github.io/mathlib_docs/find/set.has_coe_to_sort">docs#set.has_coe_to_sort</a>. The main advantage of using <code>r : units R</code> is that <code>units</code> carries the data of an inverse, which doesn't seem to apply here.</p>
<p>Now <code>self_adjoint</code> is a <code>subgroup</code>, which is <code>set_like</code>, and we have <a href="https://leanprover-community.github.io/mathlib_docs/find/set_like.has_coe_to_sort">docs#set_like.has_coe_to_sort</a>, so both expressions <code>A ‚àà self_adjoint (E ‚ÜíL[ùïú] E)</code> and <code>A : self_adjoint (E ‚ÜíL[ùïú] E)</code> should already be supported, but I'm not sure how dot notations work for them. If <code>self_adjoint</code> carries other structures, I think we'd want to make it the strongest substructure possible (e.g. <code>submodule</code>).</p>



<a name="291296183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291296183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291296183">(Jul 29 2022 at 08:41)</a>:</h4>
<p>I am rather confused on how to proceed given that the poll is rather indecisive</p>



<a name="291617802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291617802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291617802">(Aug 01 2022 at 18:55)</a>:</h4>
<p>I've just re-read this entire thread, and it's rather confusing (to me), so I'm going to try and summarize and put it into a coherent form.</p>
<ol>
<li>The current <code>inner_product_space.is_self_adjoint</code> is misnamed, and is being changed in this PR to <code>linear_map.is_symmetric</code>. There seem to be no complaints about this change.</li>
<li>We currently have <code>self_adjoint R</code> as an <code>add_subgroup</code> of a star add group <code>R</code>.</li>
<li>This allows us to talk about <code>A : self_adjoint R</code> as a bundled selfadjoint element, and <code>A ‚àà self_adjoint R</code> as the unbundled predicate.</li>
<li>While the former allows for both bundled and unbundled versions, it can be extremely verbose when <code>R</code> is, for example, <code>E ‚ÜíL[ùïú] E</code>, and it precludes dot notation, both of which can be inconvenient.</li>
<li>
<p>Consequently, the current PR defines a new predicate <code>continuous_linear_map.is_self_adjoint</code> which solves the verbosity and dot notation problems, but:<br>
  a. introduces a new predicate, separate from <code>A ‚àà self_adjoint R</code>,<br>
  b. is only defined for <code>continuous_linear_map</code>s, not even <code>linear_map</code>s, so perhaps it should be migrated to the context of <code>star_ring</code>s and defined in terms of <code>star</code> rather than <code>adjoint</code>.</p>
</li>
<li>
<p>The poll on which things to prefer was indecisive.</p>
</li>
</ol>



<a name="291617848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291617848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291617848">(Aug 01 2022 at 18:55)</a>:</h4>
<p>After thinking much more about all this, I propose the following, which I <em>think</em> may appease most everyone, but it's entirely possible I'm missing the mark.</p>
<ol>
<li>Create a new definition to live in <code>algebra/star/self_adjoint</code>:</li>
</ol>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_self_adjoint</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">non_unital_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">star_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">star</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
</code></pre></div>
<ol start="2">
<li>This will allow for dot notation, and for deduplicating selfadjointness of linear_maps versus continuous_linear_maps</li>
<li>We keep the bundled type <code>self_adjoint R</code> (because we want it to put various structures on it). Optionally, we redefine the carrier in terms of the new <code>is_self_adjoint</code> predicate (I'm not sure if this would be useful or worth doing).</li>
<li>Crucially, we then make a note which says to prefer <code>A.is_self_adjoint</code> over <code>A ‚àà self_adjoint R</code> and we migrate existing uses of the latter to the former.</li>
</ol>
<p>Thoughts?</p>



<a name="291619748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291619748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291619748">(Aug 01 2022 at 19:09)</a>:</h4>
<p>Thanks Jireh for summarizing. I am not sure whether we need a new definition at all. My guess is that a mixture of using the unbundled and bundled version will be more than sufficient (i.e., using the unbundled version where having a definition seems overly complicated). But I am not completely sure whether this works as smoothly as I imagine.</p>



<a name="291620961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291620961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291620961">(Aug 01 2022 at 19:20)</a>:</h4>
<p>To be honest, if everything I said above is true, I think having the new definition will be nicer (provided it is generalized to star_ring to encompass both linear_map and continuous_linear_map). The access to dot notation and less verbosity seem like sufficient benefit for the minor change of preferring <code>A.is_self_adjoint</code> to <code>A ‚àà self_adjoint R</code>.</p>



<a name="291645458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291645458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291645458">(Aug 01 2022 at 23:13)</a>:</h4>
<p>The summary seems exactly accurate to me.  I am mildly in favour of having both <code>is_self_adjoint</code> and <code>self_adjoint</code>, and if this is implemented, I am furthermore mildly in favour of<br>
<span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/291617848">said</a>:</p>
<blockquote>
<p>Optionally, we redefine the carrier in terms of the new <code>is_self_adjoint</code> predicate (I'm not sure if this would be useful or worth doing).</p>
</blockquote>



<a name="291645720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291645720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291645720">(Aug 01 2022 at 23:17)</a>:</h4>
<p>Actually, one point.  Having <code>is_self_adjoint</code> indeed "enables dot notation", but it's not that it allows <code>A : E ‚ÜíL[ùïú] E</code> to have the dot notation <code>A.is_self_adjoint</code>.  Rather, it's that in any setting</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">non_unital_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">star_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span>
</code></pre></div>
<p>it allows <code>ha : is_self_adjoint a</code> to be a dot-notation input into theorems <code>is_self_adjoint.blah</code>.  Right?</p>



<a name="291646798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291646798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291646798">(Aug 01 2022 at 23:32)</a>:</h4>
<p>Yes</p>



<a name="291682638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291682638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291682638">(Aug 02 2022 at 09:00)</a>:</h4>
<p>So if everyone is happy with this solution, I will move <code>is_self_adjoint</code> to <code>star_ring</code> everything this evening.</p>



<a name="291743241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291743241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291743241">(Aug 02 2022 at 17:44)</a>:</h4>
<p>Just to make sure: I am correct in assuming that lemmas like this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">bit0_mem</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">self_adjoint</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">bit0</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">self_adjoint</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">hx.bit0</span>
</code></pre></div>
<p>should not exist?</p>



<a name="291758031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291758031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291758031">(Aug 02 2022 at 19:36)</a>:</h4>
<p>I would think those should not exist. I can't see why we would want them.</p>



<a name="291758815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291758815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291758815">(Aug 02 2022 at 19:43)</a>:</h4>
<p>It also seems like we already have this lemma for general add_subgroups, no reason to have the version specialized to this particular add_subgroup.</p>



<a name="291821925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291821925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291821925">(Aug 03 2022 at 09:22)</a>:</h4>
<p>Really, we should have a <code>bit0_mem</code> lemma for every instance of <code>add_mem_class</code>.</p>



<a name="291873481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291873481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291873481">(Aug 03 2022 at 16:12)</a>:</h4>
<p>It seems that the PR builds again and is ready for more reviews</p>



<a name="291921436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291921436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291921436">(Aug 03 2022 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span>, can you explain why that's important?</p>



<a name="291982804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/291982804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#291982804">(Aug 04 2022 at 09:13)</a>:</h4>
<p>Thanks Jireh for reviewing and I am happy to help on your quest for <code>non_unital_mathlib</code></p>



<a name="292340126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292340126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292340126">(Aug 07 2022 at 21:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/291921436">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span>, can you explain why that's important?</p>
</blockquote>
<p>(Sorry for the late response!) I didn't mean that this PR should have that, just that an <code>add_mem_class</code> version of <code>bit0_mem</code> would be useful to have - something to put on someone's TODO list (along with other generalizations to subobject classes)</p>



<a name="292492397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292492397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292492397">(Aug 08 2022 at 20:30)</a>:</h4>
<p>Discussion continues on this PR (cc <span class="user-mention" data-user-id="412682">@Moritz Doll</span> <span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> <span class="user-mention" data-user-id="240862">@Oliver Nash</span> <span class="user-mention" data-user-id="311453">@Fr√©d√©ric Dupuis</span> ).  Here's my attempt to summarize where we are at.</p>
<p>The PR now contains three separate changes.</p>
<ol>
<li>Rename <a href="https://leanprover-community.github.io/mathlib_docs/find/inner_product_space.is_self_adjoint">docs#inner_product_space.is_self_adjoint</a> to <code>linear_map.is_symmetric</code></li>
<li>Introduce <code>is_self_adjoint</code> in the context of star-rings, a Prop version of the existing (bundled) <a href="https://leanprover-community.github.io/mathlib_docs/find/self_adjoint">docs#self_adjoint</a></li>
<li>Rewrite several existing theories (notably in <code>inner_product_space/positive</code> and <code>inner_product_space/rayleigh</code>) to use the new, star-ring <code>is_self_adjoint</code> rather than the old <code>inner_product_space.is_self_adjoint</code> which is now being renamed <code>is_symmetric</code>.</li>
</ol>
<p>The first two changes are not controversial but the third change is controversial.</p>



<a name="292493187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292493187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292493187">(Aug 08 2022 at 20:37)</a>:</h4>
<p>My own opinion is that we should not carry out the change (3). The condition <code>is_symmetric</code> is more lightweight than <code>is_self_adjoint</code>,* since it doesn't depend on the construction of the adjoint.  So it requires fewer imports (well, it used to require fewer imports -- there was a move of material in <a href="https://github.com/leanprover-community/mathlib/pull/15281">#15281</a> which put everything in the same place, but I propose reverting that move).  It is also more general, since it applies to linear maps, rather than to continuous linear maps.</p>
<p>*I am writing throughout using the new terminology, for clarity.</p>



<a name="292493314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292493314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292493314">(Aug 08 2022 at 20:38)</a>:</h4>
<p>On the other hand, Moritz says in favor of (3)</p>
<blockquote>
<p>the whole point why I made this refactor is that I find that this goes too much against the mathematical standards. Technically you could say that the spectral theorem holds for bounded symmetric operators, but nobody does that.</p>
</blockquote>



<a name="292493882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292493882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292493882">(Aug 08 2022 at 20:43)</a>:</h4>
<p>But maybe this is a difference of subfields?  For example, in Evans' book on elliptic PDE, which is the context where I use this kind of thing, he uses "symmetric elliptic operators" (in this same sense -- elliptic operators whose associated bilinear form is symmetric) rather than phrasing in terms of adjoints of partially-defined operators (which from what Moritz has been saying is more common in the literature he knows).</p>



<a name="292494037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292494037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292494037">(Aug 08 2022 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span> , responding here to your latest GitHub comment:</p>
<blockquote>
<p>Also, I don't really see the value in adding a definition <code>linear_map.is_positive</code>, but maybe you have a good reason for that. There might be an argument that it is necessary for the finite dimensional case, because we don't want to talk about <code>continuous_linear_map</code>s in finite dimensions.</p>
</blockquote>
<p>Yes, the finite dimensional case was my idea, although I can see that such a change would be outside the scope of this PR.</p>



<a name="292494417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292494417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292494417">(Aug 08 2022 at 20:48)</a>:</h4>
<p>Heather, you mean the PDE book or is there special book by Evans on elliptic PDEs?</p>



<a name="292495269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292495269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292495269">(Aug 08 2022 at 20:55)</a>:</h4>
<p>I think the reason I am in favor of the <code>is_symmetric T</code> + <code>‚àÄ x, T.re_apply_inner_self x</code> definition for <code>is_positive</code> here (aside from the fact that it also applies to <code>linear_map</code>), is that it is not "mixing concrete and abstract." What I mean is that I would expect at some point to have another definition for <code>is_positive</code> which amounts to something like <code>is_self_adjoint T ‚àß is_R_or_C.re '' (spectrum ùïú T) ‚äÜ set.Ici 0</code>. (or something like this). The current definition in the PR as <code>is_self_adjoint T ‚àß ‚àÄ x, T.re_apply_inner_self x</code> seems to mix the two ideas.</p>
<p>That being said, I am certainly willing to hear arguments in favor of the mixed approach. However, I'm not sure why you (Moritz) say:</p>
<blockquote>
<p>I am sorry if I come across as too stubborn on this, I only think that reverting to is_symmetric for <code>continuous_linear_map</code> would make this whole PR completely useless.</p>
</blockquote>
<p>I think this PR has value even with reverting this.</p>
<p>All that being said, I am actually rather ambivalent about which way this ultimately goes. I am completely in favor of (1) and (2) that Heather listed above, but (3) I am ultimately okay either way.</p>



<a name="292496361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292496361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292496361">(Aug 08 2022 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292494417">said</a>:</p>
<blockquote>
<p>Heather, you mean the PDE book or is there special book by Evans on elliptic PDEs?</p>
</blockquote>
<p>I found it in the PDE book. He actually defines symmetric as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mo>‚àó</mo></msup><mo>=</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">A^* = A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></p>



<a name="292496416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292496416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292496416">(Aug 08 2022 at 21:04)</a>:</h4>
<p>p. 639</p>



<a name="292496609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292496609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292496609">(Aug 08 2022 at 21:05)</a>:</h4>
<p>so his symmetry is not the symmetry that you mean because he only defines it for continuous linear operators (which is really weird).</p>



<a name="292498190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292498190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292498190">(Aug 08 2022 at 21:20)</a>:</h4>
<p>He does not care about unbounded operators (which is bad because his operators are unbounded), but I guess the reason why he gets away with it is because he only uses the spectral theorem for compact operators (applied to the resolvent). Even this is sketchy because if you don't choose boundary conditions - say you take the Laplacian on a bounded domain as an operator <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>C</mi><mi>c</mi><mi mathvariant="normal">‚àû</mi></msubsup><mo>‚Üí</mo><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">C_c^\infty \to L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9303em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.453em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">‚àû</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚Üí</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> - then the resolvent set is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">C</span></span></span></span> and your resolvent is not defined anywhere. So his whole definitions work because he just takes Dirichlet boundary conditions and this implies that his operator is actually self-adjoint.</p>



<a name="292499668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292499668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292499668">(Aug 08 2022 at 21:34)</a>:</h4>
<p>Jireh, I agree the definition as it is now is weird and I have no very good way to solve that at the moment. I guess I would be fine with reverting that the <code>is_positive</code> for the sake of the PR getting merged and knowing that we find a better solution later on.</p>



<a name="292500022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292500022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292500022">(Aug 08 2022 at 21:37)</a>:</h4>
<p>If we revert all the <code>is_self_adjoint T</code> to <code>is_symmetric (T : E ‚Üí‚Çó[ùïú] E)</code> then the only thing gained from the PR is that the old <code>is_self_adjoint</code> is renamed to <code>is_symmetric</code> (ok, that is good), but we added a definition (<code>is_self_adjoint</code>) that is never used at all and we would loose dot-notation again.</p>



<a name="292500242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292500242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292500242">(Aug 08 2022 at 21:39)</a>:</h4>
<p>(I find it quite funny that Evans defines <code>is_symmetric</code> as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mo>‚àó</mo></msup><mo>=</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">A^* = A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> and the current mathlib defines <code>is_self_adjoint</code> as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">‚ü®</mo><mi>A</mi><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">‚ü©</mo><mo>=</mo><mo stretchy="false">‚ü®</mo><mi>x</mi><mo separator="true">,</mo><mi>A</mi><mi>y</mi><mo stretchy="false">‚ü©</mo></mrow><annotation encoding="application/x-tex">‚ü®A x, y‚ü© = ‚ü® x, A y‚ü©</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">‚ü®</span><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">‚ü©</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">‚ü®</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">‚ü©</span></span></span></span>)</p>



<a name="292508592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292508592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292508592">(Aug 08 2022 at 23:05)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span> I was thinking more of e.g. the discussion at pp 335-6 (maybe this is ambiguous across editions, but Section 6.5.1, "Eigenvalues of symmetric elliptic operators").  Here he has a second-order elliptic operator L, which is symmetric and unbounded as an operator on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>H</mi><mn>0</mn><mn>1</mn></msubsup></mrow><annotation encoding="application/x-tex">H^1_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0622em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span>; this symmetry is really <code>is_symmetric</code> in your terminology.  And then for fixed boundary conditions he builds an operator on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> which he calls formally <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mrow><mo>‚àí</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">L^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">‚àí</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>; this is symmetric and compact (because of the Rellich-Kondrachov compactness theorem) and he applies the spectral theorem to it.</p>



<a name="292508940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292508940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292508940">(Aug 08 2022 at 23:10)</a>:</h4>
<p>Anyway, I mention Evans' book as a data point for how I am used to thinking about these things -- isn't it useful to have theory for symmetric, unbounded operators?</p>



<a name="292508970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292508970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292508970">(Aug 08 2022 at 23:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292500022">said</a>:</p>
<blockquote>
<p>we would loose dot-notation again.</p>
</blockquote>
<p>This point I don't quite follow, by the way.</p>



<a name="292509986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292509986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292509986">(Aug 08 2022 at 23:22)</a>:</h4>
<p>Anyway, in terms of concrete differences between the approaches:  Maybe one difference is that I propose to put <code>is_symmetric</code> in a different file from the adjoint and then to make some attempt to reserve the adjoint to later in the import hierarchy, whereas for you this is not really worth the effort.</p>



<a name="292510021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510021">(Aug 08 2022 at 23:23)</a>:</h4>
<p>Yes and no, symmetric unbounded operators are useful in the sense that they are usually what you start with (Laplacian without choosing boundary conditions), but you want to have self-adjoint operators, because the spectral theorem only holds for self-adjoint operators (well for normal operators, but let's not get into that). So one really big part of mathematical physics is showing that certain symmetric operators are (essentially) self-adjoint. Of course we want to have the definition of symmetric operators in mathlib, but you cannot use it to prove anything about the spectrum or eigenvalues.</p>



<a name="292510125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510125">(Aug 08 2022 at 23:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292509986">said</a>:</p>
<blockquote>
<p>Anyway, in terms of concrete differences between the approaches:  Maybe one difference is that I propose to put <code>is_symmetric</code> in a different file from the adjoint and then to make some attempt to reserve the adjoint to later in the import hierarchy, whereas for you this is not really worth the effort.</p>
</blockquote>
<p>I have no problems with that. I would rather not have it in the basics file, because this is too long already.</p>



<a name="292510234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510234">(Aug 08 2022 at 23:26)</a>:</h4>
<p>VSCode tends to crash my laptop if I open files that are significant longer than 1000 lines</p>



<a name="292510561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510561">(Aug 08 2022 at 23:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292508970">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292500022">said</a>:</p>
<blockquote>
<p>we would loose dot-notation again.</p>
</blockquote>
<p>This point I don't quite follow, by the way.</p>
</blockquote>
<p>Technically you can, but then everything is in the wrong namespace <code>linear_map.is_symmetric</code>, but the map was actually defined as a <code>continuous_linear_map</code> that got coerced into a <code>linear_map</code> for the <code>is_symmetric</code> property.</p>



<a name="292510569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510569">(Aug 08 2022 at 23:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/292510021">said</a>:</p>
<blockquote>
<p>Of course we want to have the definition of symmetric operators in mathlib, but you cannot use it to prove anything about the spectrum or eigenvalues.</p>
</blockquote>
<p>Maybe I don't follow ... it's certainly possible to do this if you want to (see <a href="https://github.com/leanprover-community/mathlib/blob/b5cf0af69f065f116018f8cab61405aae5adbb7b/src/analysis/inner_product_space/spectrum.lean#L569">one version</a> of the spectral theorem from <a href="https://arxiv.org/abs/2202.05360">https://arxiv.org/abs/2202.05360</a>, before we changed it to use the adjoint)</p>



<a name="292510715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510715">(Aug 08 2022 at 23:33)</a>:</h4>
<p>you assume <code>variables [cplt : complete_space E] {T : E ‚ÜíL[ùïú] E} (hT : is_self_adjoint (T : E ‚Üí‚Çó[ùïú] E))</code>, right? This is equivalent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mo>‚àó</mo></msup><mo>=</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">A^* = A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></p>



<a name="292510839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292510839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292510839">(Aug 08 2022 at 23:34)</a>:</h4>
<p>so I would argue that your operator is secretly self-adjoint.</p>



<a name="292512955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292512955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292512955">(Aug 09 2022 at 00:01)</a>:</h4>
<p>I see -- you mean, for good <em>theorems</em> you need <code>‚ÜíL[ùïú]</code>, i.e. the context in which the criteria are equivalent.</p>



<a name="292539757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292539757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292539757">(Aug 09 2022 at 08:23)</a>:</h4>
<p>There's one more issue that hasn't been adressed yet: wouldn't it make more sense to define <code>is_symmetric</code> and <code>is_self_adjoint</code> (if we do end up defining the latter) for <code>linear_map_class</code> rather than <code>linear_map</code>s? Certainly we would want to avoid having to coerce continuous linear maps, linear isometries, etc, into <code>linear_map</code>s all the time.</p>



<a name="292544054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292544054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292544054">(Aug 09 2022 at 09:13)</a>:</h4>
<p>maybe then we want a class <code>linear_pmap_class</code> and we define <code>is_symmetric</code> and <code>is_self_adjoint</code> for that.</p>



<a name="292544361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292544361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292544361">(Aug 09 2022 at 09:16)</a>:</h4>
<p>Heather, essentially yes. for the compact operator spectral theorem the compactness (which implies <code>‚ÜíL[ùïú]</code>) is the crucial point. for the general spectral theorem you don't need <code>‚ÜíL[ùïú]</code>, but the results are better if you assume it ("spectral theorem for bounded operators").</p>



<a name="292544706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292544706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292544706">(Aug 09 2022 at 09:19)</a>:</h4>
<p>when defining <code>continuous_linear_pmap</code> I thought about a possible <code>linear_pmap_class</code>, but since the domain is not fixed I did not know how to define it</p>



<a name="292546940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292546940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292546940">(Aug 09 2022 at 09:35)</a>:</h4>
<p>so my view on the PR (but I am of  course biased in favor of it) is that does not solve all issues, but it improves the situation significantly and makes it so that later refactors are way easier to do. If Heather has really strong opinions on the condition in <code>is_positive</code> as I said I would be change it there, just to do be done with it (even though I think <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> might have also strong opinions on that). For the Rayleigh quotient, I am more stubborn, because it will eventually end up being defined for <code>linear_pmap</code> and <code>is_self_adjoint</code>, so reverting it to <code>is_symmetric</code> does not gain anything.</p>



<a name="292609246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292609246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292609246">(Aug 09 2022 at 16:14)</a>:</h4>
<p>Sorry for the delay. For the case of positive operators, what bothers me is not so much heavy imports but rather the fact that the whole file currently works in non complete spaces, and I‚Äôm not sure having a cleaner phrasing would be worth adding this restriction. But in cases where completeness is needed anyway I don‚Äôt think we should be too strict about prioritizing minimal imports over consistency and readability</p>



<a name="292654039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292654039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292654039">(Aug 09 2022 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="311453">@Fr√©d√©ric Dupuis</span> that's a nice idea, but perhaps for a future PR? I think this one is doing enough already. </p>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> I'm inclined to accept this as is. What do you think?</p>



<a name="292656646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/292656646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fr√©d√©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#292656646">(Aug 09 2022 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> Fair enough!</p>



<a name="293347702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293347702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293347702">(Aug 14 2022 at 06:46)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span>, unless you strenuously object, I'll just merge this.</p>



<a name="293372790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293372790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293372790">(Aug 14 2022 at 11:44)</a>:</h4>
<p>I'm still a bit annoyed by the fact that positiveness now only works in complete spaces, but I think we can just discuss it separately because otherwise this PR seems good.</p>



<a name="293372813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293372813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293372813">(Aug 14 2022 at 11:45)</a>:</h4>
<p>So I'd be in favor of merging it</p>



<a name="293373060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293373060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293373060">(Aug 14 2022 at 11:47)</a>:</h4>
<p>And maybe creating an issue mentionning the discussion about positive operators in the comments of the PR</p>



<a name="293423796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293423796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293423796">(Aug 14 2022 at 17:22)</a>:</h4>
<p>one sidenote: Anatole, you wrote that Bourbaki define positive as self-adjoint plus <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>A</mi><mi>x</mi><mo separator="true">,</mo><mi>x</mi><mo>&gt;</mo><mo>‚â•</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">&lt;Ax ,x&gt; \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;‚â•</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>. Is that for bounded operators and if not is it self-adjoint or symmetric?</p>



<a name="293428373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293428373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293428373">(Aug 14 2022 at 18:06)</a>:</h4>
<p>I just saw that the PR has merge conflicts. I will fix them later today (I am in a train atm)</p>



<a name="293434237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293434237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293434237">(Aug 14 2022 at 19:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="412682">Moritz Doll</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint/near/293423796">said</a>:</p>
<blockquote>
<p>one sidenote: Anatole, you wrote that Bourbaki define positive as self-adjoint plus <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>A</mi><mi>x</mi><mo separator="true">,</mo><mi>x</mi><mo>&gt;</mo><mo>‚â•</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">&lt;Ax ,x&gt; \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;‚â•</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>. Is that for bounded operators and if not is it self-adjoint or symmetric?</p>
</blockquote>
<p>Their definition is for bounded operators and their condition is indeed <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>u</mi><mo>‚àó</mo></msup><mo>=</mo><mi>u</mi></mrow><annotation encoding="application/x-tex">u^* = u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span>, which makes sense since they don't care about the non-complete case</p>



<a name="293435054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293435054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293435054">(Aug 14 2022 at 19:26)</a>:</h4>
<p>ok, then the correct generalization is to <code>is_self_adjoint</code> for <code>linear_pmap</code>. Actually I was thinking about defining it for a <code>linear_pmap_class</code> (which we don't have yet, but after a discussion with Jireh, I was convinced that we should) and this would include the non-complete case (consider the operator as a partially defined operator on the completion)</p>



<a name="293435644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293435644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293435644">(Aug 14 2022 at 19:34)</a>:</h4>
<p>Ok I'm happy with that</p>



<a name="293440613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293440613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293440613">(Aug 14 2022 at 20:39)</a>:</h4>
<p>Note: before we dive headlong into making that <code>linear_pmap_class</code> (which we should definitely do!), we should have a discussion about how to implement it, because I'm reasonably sure it won't be able to extend <code>fun_like</code> in any nice way. </p>
<p>So maybe we want to have a <code>pfun_,like</code> class hierarchy. Perhaps we don't, but I think we should outline the various partial function situations that commonly arise and see if there is any shot at unifying them, or if it isn't worth the effort to make a general framework.</p>



<a name="293783405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293783405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293783405">(Aug 16 2022 at 19:14)</a>:</h4>
<p>Now that this is merged, it unlocks <a href="https://github.com/leanprover-community/mathlib/pull/15682">#15682</a> where <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> suggested moving <code>is_symmetric</code> to a new file sitting between <code>basic</code> and <code>projection</code>. Since it's been a while, I just wanted to make sure everyone is still on board for that? cc <span class="user-mention" data-user-id="412682">@Moritz Doll</span></p>



<a name="293783733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293783733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293783733">(Aug 16 2022 at 19:16)</a>:</h4>
<p>in the medium term I hope that <code>is_symmetric</code> is part of <code>inner_product_space/linear_pmap</code>, but for the short term it certainly does not hurt to move it into its own file</p>



<a name="293783881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293783881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293783881">(Aug 16 2022 at 19:17)</a>:</h4>
<p>do you want to do the move or should I?</p>



<a name="293784628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2315326%20Renaming%20is_self_adjoint/near/293784628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2315326.20Renaming.20is_self_adjoint.html#293784628">(Aug 16 2022 at 19:22)</a>:</h4>
<p>I'll do it</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>