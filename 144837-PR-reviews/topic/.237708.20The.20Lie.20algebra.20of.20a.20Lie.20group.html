---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html">#7708 The Lie algebra of a Lie group</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242883711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/242883711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#242883711">(Jun 16 2021 at 13:55)</a>:</h4>
<p>After merging the branch master this PR triggers an error that was never triggered before, and that is triggered only some times (it triggered it on mathlib, but it didn't on my local machine, but after compiling the file enough times it triggered it also on my machine).</p>
<p>Changing the corresponding function to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The differential of a function interpreted in the context of derivations. -/</span>
<span class="kd">def</span> <span class="n">fdifferential_map</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I</span><span class="o">,</span> <span class="n">M</span><span class="bp">;</span> <span class="n">I'</span><span class="o">,</span> <span class="n">M'</span><span class="bp">‚üØ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">point_derivation</span> <span class="n">I</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">point_derivation</span> <span class="n">I'</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">g</span> <span class="o">:</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I'</span><span class="o">,</span> <span class="n">M'</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span><span class="o">,</span> <span class="n">v</span> <span class="o">(</span><span class="n">g.comp</span> <span class="n">f</span><span class="o">),</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">g</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smooth_map.add_comp</span><span class="o">,</span> <span class="n">derivation.map_add</span><span class="o">],</span>
  <span class="n">map_smul'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">k</span> <span class="n">g</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smooth_map.smul_comp</span><span class="o">,</span> <span class="n">derivation.map_smul</span><span class="o">],</span>
  <span class="n">leibniz'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">g</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">letI</span> <span class="o">:=</span> <span class="o">(</span><span class="n">point_derivation.module</span> <span class="n">_</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">module</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I'</span><span class="o">,</span> <span class="n">M'</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span> <span class="bp">ùïú</span><span class="o">),</span> <span class="n">simp</span> <span class="n">only</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">derivation.leibniz</span><span class="o">,</span> <span class="n">smooth_map.mul_comp</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">point_derivation.scalar_def</span><span class="o">,</span> <span class="n">times_cont_mdiff_map.comp_apply</span><span class="o">],</span> <span class="n">rw</span> <span class="n">point_derivation.scalar_def</span><span class="o">,</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></div>
<p>shows that Lean is having troubles with recognizing the scalar multiplication as such. Can some mantainer / expert have a look?</p>



<a name="243054622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243054622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243054622">(Jun 17 2021 at 17:34)</a>:</h4>
<p>I went back to the commit before the merge and indeed it typechecks, what is the quickest way to find out what commit broke it?</p>



<a name="243054838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243054838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243054838">(Jun 17 2021 at 17:36)</a>:</h4>
<p>There is <code>git bisect</code>, but it might take a ton of time to do all the compiles. Maybe the binary caches can help?</p>



<a name="243054928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243054928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243054928">(Jun 17 2021 at 17:37)</a>:</h4>
<p>To be honest, I also have "troubles with recognizing the scalar multiplication as such"</p>



<a name="243057057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057057">(Jun 17 2021 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243054928">said</a>:</p>
<blockquote>
<p>To be honest, I also have "troubles with recognizing the scalar multiplication as such"</p>
</blockquote>
<p>What do you mean?</p>



<a name="243057132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057132">(Jun 17 2021 at 17:53)</a>:</h4>
<p>I don't see a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>‚àô</mo></mrow><annotation encoding="application/x-tex">\bullet</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord">‚àô</span></span></span></span> in the code you pasted</p>



<a name="243057191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057191">(Jun 17 2021 at 17:53)</a>:</h4>
<p>That doesn't have to be a problem of course. I'm not really familiar with this part of the library.</p>



<a name="243057363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057363">(Jun 17 2021 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243057132">said</a>:</p>
<blockquote>
<p>I don't see a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>‚àô</mo></mrow><annotation encoding="application/x-tex">\bullet</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord">‚àô</span></span></span></span> in the code you pasted</p>
</blockquote>
<p>Did you checkout in my branch? Or you mean by looking just at the code in my snippet? It is in the goal!</p>



<a name="243057493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057493">(Jun 17 2021 at 17:55)</a>:</h4>
<p>There is four instances of scalar multiplication in the goal, and lean only recognizes two of them as such after the merge</p>



<a name="243057641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243057641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243057641">(Jun 17 2021 at 17:56)</a>:</h4>
<p>But it did recognize all four before: I checked out in that commit and it still does... there something in the merge that broke it</p>



<a name="243087236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243087236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243087236">(Jun 17 2021 at 21:26)</a>:</h4>
<p>Isn't it possible to download the oleans for a specific commit? If yes I can do a bisecting research manually</p>



<a name="243088774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243088774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243088774">(Jun 17 2021 at 21:41)</a>:</h4>
<p>Is <code>leanproject get-cache --rev=commit-hash</code> what you need?</p>



<a name="243091487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243091487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243091487">(Jun 17 2021 at 22:08)</a>:</h4>
<p>If I do that I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="c1">--rev=ff44ed50037063894c3f1e3c523e30f969c8e91e</span>
<span class="n">Usage</span><span class="o">:</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="o">[</span><span class="n">OPTIONS</span><span class="o">]</span>
<span class="n">Try</span> <span class="bp">'</span><span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="bp">-</span><span class="n">h'</span> <span class="n">for</span> <span class="n">help.</span>

<span class="n">Error</span><span class="o">:</span> <span class="n">no</span> <span class="n">such</span> <span class="n">option</span><span class="o">:</span> <span class="c1">--rev</span>
</code></pre></div>



<a name="243091537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243091537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243091537">(Jun 17 2021 at 22:08)</a>:</h4>
<p>The help says</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="bp">-</span><span class="n">h</span>
<span class="n">Usage</span><span class="o">:</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="o">[</span><span class="n">OPTIONS</span><span class="o">]</span>

  <span class="n">Restore</span> <span class="n">cached</span> <span class="n">olean</span> <span class="n">files.</span>

<span class="n">Options</span><span class="o">:</span>
  <span class="c1">--force     Get cache even if the repository is dirty.</span>
  <span class="bp">-</span><span class="n">h</span><span class="o">,</span> <span class="c1">--help  Show this message and exit.</span>
</code></pre></div>



<a name="243091579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243091579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243091579">(Jun 17 2021 at 22:09)</a>:</h4>
<p>What am I doing wrong?</p>



<a name="243091722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243091722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243091722">(Jun 17 2021 at 22:10)</a>:</h4>
<p>Looks like you need to upgrade <code>leanproject</code>.</p>



<a name="243091770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243091770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243091770">(Jun 17 2021 at 22:11)</a>:</h4>
<p>If you installed <code>leanproject</code> using <code>pip</code>, then <code>pip install -U mathlibtools</code> should do the trick.</p>



<a name="243096896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243096896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243096896">(Jun 17 2021 at 23:05)</a>:</h4>
<p>What kind of commits can I run that command for? I am using it for commits of master branch, as in PRs that get merged as commits, but I always get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span> <span class="c1">--rev=2a93644a2df19713a56db7abf39410bc9eacb781</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="kn">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">remote</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Trying</span> <span class="n">to</span> <span class="n">download</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">oleanstorage.azureedge.net</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="mi">2</span><span class="n">a93644a2df19713a56db7abf39410bc9eacb781.tar.xz</span>¬†<span class="n">to</span> <span class="n">C</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">nicoc</span><span class="bp">\.</span><span class="n">mathlib</span><span class="bp">\</span><span class="mi">2</span><span class="n">a93644a2df19713a56db7abf39410bc9eacb781.tar.xz</span>
<span class="n">Failed</span> <span class="n">to</span> <span class="n">fetch</span> <span class="n">cached</span> <span class="n">oleans</span>
</code></pre></div>
<p>no matter what commit I try it for...</p>



<a name="243096968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243096968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243096968">(Jun 17 2021 at 23:06)</a>:</h4>
<p>Also <code>leanproject up</code> works on the master branch so it is not a problem of my github account or anything similar</p>



<a name="243097738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243097738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243097738">(Jun 17 2021 at 23:16)</a>:</h4>
<p>Ah, the issue is that not every single commit on the <code>master</code>  branch has an accompanying <code>.tar.xz</code> file, since bors merges commits in batches...</p>



<a name="243098076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243098076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243098076">(Jun 17 2021 at 23:20)</a>:</h4>
<p>How do I find out which commits have a .tar.xz file? Even if only one in 10 had oleans that would be great</p>



<a name="243098337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243098337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243098337">(Jun 17 2021 at 23:23)</a>:</h4>
<p>Hmm, there's probably a better way with some scripting, but the commits that have green checkmarks or red x's <a href="https://github.com/leanprover-community/mathlib/commits/master">here</a> should have downloadable olean files.</p>



<a name="243101088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243101088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243101088">(Jun 18 2021 at 00:03)</a>:</h4>
<p>Ok thanks this is working!</p>



<a name="243101555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243101555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243101555">(Jun 18 2021 at 00:08)</a>:</h4>
<p>The code broke in between <a href="https://github.com/leanprover-community/mathlib/issues/7909">#7909</a> and <a href="https://github.com/leanprover-community/mathlib/issues/7914">#7914</a>... There is 4 PRs</p>



<a name="243102099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243102099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243102099">(Jun 18 2021 at 00:17)</a>:</h4>
<p>Thanks for digging into this! I know how frustrating these things can be...</p>



<a name="243102733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243102733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243102733">(Jun 18 2021 at 00:25)</a>:</h4>
<p>Thank you for your help! I need to compile these 4 PRs manually, which means compiling two because I can compile the middle one and then either the 1 or the 3 depending on the result of the 2</p>



<a name="243134784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243134784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243134784">(Jun 18 2021 at 09:09)</a>:</h4>
<p>I think your problem is that the smul induced by <code>point_derivation.algebra</code> is not defeq to the smul induced by <code>point_derivation.module</code></p>



<a name="243134809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243134809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243134809">(Jun 18 2021 at 09:09)</a>:</h4>
<p><code>ring_hom.to_algebra</code> in general generates inconvenient smul actions</p>



<a name="243135138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243135138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243135138">(Jun 18 2021 at 09:12)</a>:</h4>
<p>Things would be a lot less painful if you introduced a type alias like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">I</span> <span class="bp">ùïú</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">eval_at</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I</span><span class="o">,</span> <span class="n">M</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="bp">ùïú</span><span class="o">}</span>
</code></pre></div>
<p>so that you can attach instances to <code>eval_at</code> rather than having <code>@</code>s everywhere</p>



<a name="243137986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243137986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243137986">(Jun 18 2021 at 09:41)</a>:</h4>
<p>The PR that broke it is <a href="https://github.com/leanprover-community/mathlib/issues/7885">#7885</a>. <span class="user-mention" data-user-id="240862">@Oliver Nash</span>  Maybe you want to have a look as well to what is happening?</p>



<a name="243138028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243138028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243138028">(Jun 18 2021 at 09:41)</a>:</h4>
<p>Looking again at your PR on gitpod, it looks like there's a bug in <code>simp</code></p>



<a name="243138087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243138087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243138087">(Jun 18 2021 at 09:42)</a>:</h4>
<p>If you run <code>recover</code> before <code>refl</code> you'll see there's actually a second goal</p>



<a name="243138439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243138439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243138439">(Jun 18 2021 at 09:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicol√≤ Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243137986">said</a>:</p>
<blockquote>
<p>The PR that broke it is <a href="https://github.com/leanprover-community/mathlib/issues/7885">#7885</a>. <span class="user-mention silent" data-user-id="240862">Oliver Nash</span>  Maybe you want to have a look as well to what is happening?</p>
</blockquote>
<p>I will look this afternoon, especially as I've been meaning to check in on that PR again anyway.</p>



<a name="243139830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243139830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243139830">(Jun 18 2021 at 09:58)</a>:</h4>
<p>I think I found a fix: <a href="https://github.com/leanprover-community/mathlib/pull/7708/files#r654304392">https://github.com/leanprover-community/mathlib/pull/7708/files#r654304392</a></p>



<a name="243139857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243139857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243139857">(Jun 18 2021 at 09:58)</a>:</h4>
<p>There's some very weird behavior happening there with typeclass inference when mixed with new-style structures extending old-style structures</p>



<a name="243139889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243139889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243139889">(Jun 18 2021 at 09:59)</a>:</h4>
<p>Making <code>derivation</code> an old-style structure would probably have avoided the problem in the first place</p>



<a name="243144578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243144578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243144578">(Jun 18 2021 at 10:56)</a>:</h4>
<p>I see. Nice work!</p>



<a name="243149266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243149266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243149266">(Jun 18 2021 at 11:48)</a>:</h4>
<p>Thank you very much! I am confused though: you proposed fix on github works without making derivation an old-style structure, so should I still do that?</p>



<a name="243149835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243149835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243149835">(Jun 18 2021 at 11:54)</a>:</h4>
<p>Also should we not touch the code in <a href="https://github.com/leanprover-community/mathlib/issues/7885">#7885</a>? My code should have worked as it was written before, I tried to make derivations an old-style structure but it breaks a lot of stuff... I love this workaround that Eric found but I would also like to fix the problem at its root once for all!</p>



<a name="243152844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243152844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243152844">(Jun 18 2021 at 12:27)</a>:</h4>
<p>I don't think we need to explore using an old-style structure right now, but it might be worth trying it in a standalone PR</p>



<a name="243152995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243152995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243152995">(Jun 18 2021 at 12:28)</a>:</h4>
<p>The root of the problem feels like a combination of your code using unusual non-instance typeclasses throughout, and a likely corner-case in the hacks needed to allow mixing old and new structure constructors</p>



<a name="243153256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243153256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243153256">(Jun 18 2021 at 12:31)</a>:</h4>
<p>I think the <code>eval_at</code> idea above is worth   pursuing, although I don't have any idea what a good name is</p>



<a name="243162064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243162064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243162064">(Jun 18 2021 at 13:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243153256">said</a>:</p>
<blockquote>
<p>I think the <code>eval_at</code> idea above is worth   pursuing, although I don't have any idea what a good name is</p>
</blockquote>
<p>I will give it a try</p>



<a name="243257588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243257588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243257588">(Jun 19 2021 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243153256">said</a>:</p>
<blockquote>
<p>I think the <code>eval_at</code> idea above is worth   pursuing, although I don't have any idea what a good name is</p>
</blockquote>
<p>I did it but still it does not solve that problem...</p>



<a name="243261920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243261920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243261920">(Jun 19 2021 at 18:09)</a>:</h4>
<p>I think it's still worth having to remove the <code>@</code>s</p>



<a name="243265389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243265389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243265389">(Jun 19 2021 at 19:35)</a>:</h4>
<p>This is very risky though because one might want to evaluate two point derivations at different points <code>x y</code> on the same function, which at this point has to be an element of <code>C^‚àû‚üÆI, G; ùïú‚üØ[x]</code> and <code>C^‚àû‚üÆI, G; ùïú‚üØ[y]</code>. Take for example the case of the equality defining left invariant derivations:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">‚àÄ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="bp">ùíÖ</span><span class="o">(</span><span class="bp">ùë≥</span> <span class="n">I</span> <span class="n">g</span><span class="o">)</span> <span class="mi">1</span> <span class="o">(</span><span class="n">derivation.eval_at</span> <span class="mi">1</span> <span class="n">to_derivation</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">derivation.eval_at</span> <span class="n">g</span> <span class="n">to_derivation</span> <span class="n">f</span>
</code></pre></div>
<p>With this new method it breaks because f needs to be of two different types. I can fix it with an inclusion but it makes things slower... is it worth it? <span class="user-mention" data-user-id="240862">@Oliver Nash</span> ?</p>



<a name="243265444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243265444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243265444">(Jun 19 2021 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicol√≤ Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243257588">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243153256">said</a>:</p>
<blockquote>
<p>I think the <code>eval_at</code> idea above is worth   pursuing, although I don't have any idea what a good name is</p>
</blockquote>
<p>I did it but still it does not solve that problem...</p>
</blockquote>
<p>What should we do regarding this? <span class="user-mention" data-user-id="240862">@Oliver Nash</span> did you have time to take a look at the code?</p>



<a name="243267348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243267348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243267348">(Jun 19 2021 at 20:24)</a>:</h4>
<p>You'd add a helper to cast f to the appropriate type in each place</p>



<a name="243267352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243267352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243267352">(Jun 19 2021 at 20:25)</a>:</h4>
<p>Like we have additive.of_mul</p>



<a name="243267845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243267845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243267845">(Jun 19 2021 at 20:36)</a>:</h4>
<p>So you'd have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- A smooth map evaluated at a particular point.</span>
<span class="sd">By not actually evaluating the map, we can move between the value of the map and the value of its differential -/</span>
<span class="kd">@[derive comm_ring]</span>
<span class="kd">def</span> <span class="n">smooth_map.evaluation</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="n">smooth_map</span> <span class="gr">sorry</span> <span class="c1">-- whatever the arguments are</span>

<span class="kd">def</span> <span class="n">smooth_map.eval_at</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">smooth_map</span> <span class="gr">sorry</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">smooth_map.evaluation</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">f</span>
</code></pre></div>



<a name="243268579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243268579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243268579">(Jun 19 2021 at 20:53)</a>:</h4>
<p>Actually specifying the type works, but the build on github waits very little before triggering time out, and figuring out all types are ok with this new formulation takes more than github can wait...</p>



<a name="243268589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243268589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243268589">(Jun 19 2021 at 20:54)</a>:</h4>
<p>I am scared this will trigger a lot of timeouts</p>



<a name="243268757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243268757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243268757">(Jun 19 2021 at 20:58)</a>:</h4>
<p>Well it triggers timeout after 40s and there is no way it will compile in less then 40s... Do you have other ideas? I have the feeling we are taking a wrong turn as there is so much room for timeouts with this formulation!</p>



<a name="243269126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269126">(Jun 19 2021 at 21:06)</a>:</h4>
<p>Oh, did you already push this to the branch? I didn't see it</p>



<a name="243269245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269245">(Jun 19 2021 at 21:10)</a>:</h4>
<p>My guess is that lean isn't very happy about <code>point_derivation.pointed_smooth_map</code> (what I was calling <code>eval_at</code>) being reducible</p>



<a name="243269295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269295">(Jun 19 2021 at 21:11)</a>:</h4>
<p>Because if it's reducible, you get a weird mix of instances (module, mul_action, etc) from both the regular map and the pointed one</p>



<a name="243269340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269340">(Jun 19 2021 at 21:12)</a>:</h4>
<p>So probably you need to remove <code>reducible</code> and copy across the instances you need manually</p>



<a name="243269536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269536">(Jun 19 2021 at 21:16)</a>:</h4>
<p>The problem or removing that is that Lean for some reason does not rewrite <code>point_derivation.pointed_smooth_map</code> in some circumstances:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I</span><span class="o">,</span> <span class="n">M</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">pointed_smooth_map</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">}</span> <span class="c1">--works</span>
<span class="kd">instance</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">:</span> <span class="n">algebra</span> <span class="bp">ùïú</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I</span><span class="o">,</span> <span class="n">M</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">pointed_smooth_map</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">}</span> <span class="c1">-- error</span>
</code></pre></div>



<a name="243269560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269560">(Jun 19 2021 at 21:17)</a>:</h4>
<p>Also, will</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="bp">‚àÄ</span> <span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="bp">^‚àû‚üÆ</span><span class="n">I</span><span class="o">,</span> <span class="n">G</span><span class="bp">;</span> <span class="bp">ùïú‚üØ</span><span class="o">,</span> <span class="bp">‚àÄ</span> <span class="n">g</span><span class="o">,</span> <span class="bp">ùíÖ</span><span class="o">(</span><span class="bp">ùë≥</span> <span class="n">I</span> <span class="n">g</span><span class="o">)</span> <span class="mi">1</span> <span class="o">(</span><span class="n">derivation.eval_at</span> <span class="mi">1</span> <span class="n">to_derivation</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span>  <span class="n">derivation.eval_at</span> <span class="n">g</span> <span class="n">to_derivation</span> <span class="n">f</span>
</code></pre></div>
<p>still work if I take out the reducible? I can't verify myself because I am having a hard time putting the instances</p>



<a name="243269668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269668">(Jun 19 2021 at 21:20)</a>:</h4>
<p>I'll have to look at this again tomorrow or Monday. Unfortunately there's a lot of boilerplate that this approach needs, but it acts as careful book-keeping to use appropriate instances, rather than using ad-hoc fragile expressions that pass typeclasses with <code>@</code>.</p>



<a name="243269691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243269691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243269691">(Jun 19 2021 at 21:21)</a>:</h4>
<p>Instead of <code>rw</code> try <code>dunfold</code> or dsimp</p>



<a name="243299494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243299494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243299494">(Jun 20 2021 at 11:48)</a>:</h4>
<p>Ok it worked thanks!</p>



<a name="243354982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243354982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243354982">(Jun 21 2021 at 08:57)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicol√≤ Cavalleri</span> Sorry I had no time over the weekend but I'll review this again now.</p>



<a name="243357242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243357242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243357242">(Jun 21 2021 at 09:20)</a>:</h4>
<p>Reviewing this PR inspired me to attempt some cleanup in <a href="https://github.com/leanprover-community/mathlib/issues/8013">#8013</a>. I'd expect minimal conflicts, so the order they go in shouldn't matter much</p>



<a name="243358412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243358412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243358412">(Jun 21 2021 at 09:32)</a>:</h4>
<p>Just looked over <a href="https://github.com/leanprover-community/mathlib/issues/8013">#8013</a>, LGTM. That file needed some love for a while.</p>



<a name="243358620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243358620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243358620">(Jun 21 2021 at 09:34)</a>:</h4>
<p>My only question is the change to <code>old_structure</code>. In view of the porting efforts to Lean 4, my understanding is that we should rather try to move as much as possible to new structures. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> what do you think?</p>



<a name="243358805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243358805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243358805">(Jun 21 2021 at 09:36)</a>:</h4>
<p>My understanding is that the move to new structures comes combined with some kind of global analysis of the hierarchy and a choice of a maximal spanning tree (although I am still unclear about why it needs to span), so the switch sounds to me like it needs to be of a global nature and not something which we can just do bit by bit.</p>



<a name="243358898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243358898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243358898">(Jun 21 2021 at 09:37)</a>:</h4>
<p>I don't think we should worry about it on the lean 3 side. Things will change in lean 4 and backporting isn't likely to help that much</p>



<a name="243362504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362504">(Jun 21 2021 at 10:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicol√≤ Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243265444">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="267205">Nicol√≤ Cavalleri</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243257588">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243153256">said</a>:</p>
<blockquote>
<p>I think the <code>eval_at</code> idea above is worth   pursuing, although I don't have any idea what a good name is</p>
</blockquote>
<p>I did it but still it does not solve that problem...</p>
</blockquote>
<p>What should we do regarding this? <span class="user-mention silent" data-user-id="240862">Oliver Nash</span> did you have time to take a look at the code?</p>
</blockquote>
<p>It looks like you two have solved the problem while I was away over the weekend but please let me know if you still want my input on this point.</p>



<a name="243362656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362656">(Jun 21 2021 at 10:20)</a>:</h4>
<p>It would be helpful if someone with a good understanding of the maths could come up with a helpful docstring for the <code>pointed_smooth_map</code> synonym. The lean reason it exists is because we want different typeclass instances - what's missing is the math reason that explains _why_ we want those instances.</p>



<a name="243362659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362659">(Jun 21 2021 at 10:20)</a>:</h4>
<p>I've just looked over this PR except for the file <code>left_invariant_derivation.lean</code>. I wonder if there is a case for splitting this file out into a dependent PR.</p>



<a name="243362698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362698">(Jun 21 2021 at 10:20)</a>:</h4>
<p>I have a good understanding of this mathematics. Let me see if I can answer your question.</p>



<a name="243362746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362746">(Jun 21 2021 at 10:21)</a>:</h4>
<p>So IIRC this originally came up because I suggest to <span class="user-mention" data-user-id="267205">@Nicol√≤ Cavalleri</span> that we could factor one of his constructions through <code>derivation.comp_der</code> (which he has now done).</p>



<a name="243362844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362844">(Jun 21 2021 at 10:22)</a>:</h4>
<p>Mathematically the point is that the algebra of smooth functions has extra structure beyond that of just being an algebra.</p>



<a name="243362902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362902">(Jun 21 2021 at 10:23)</a>:</h4>
<p>The two obvious questions that come to mind looking at <code>pointed_smooth_map</code> are  "why not just evaluate the map and use <code>ùïú</code>" (which I think is easy, but would be good to explain in a docstring), and "why not use <code>prod C^‚àû‚üÆI, G; ùïú‚üØ G</code> (which I think has the answer "pointed maps at different points should not be the same type")</p>



<a name="243362931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243362931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243362931">(Jun 21 2021 at 10:23)</a>:</h4>
<p>Since it's actually an algebra of functions, it has a family of evaluation maps, parameterised by <code>M</code> and it is really an object of this type (an algebra with this extra structure) to which the construction applies.</p>



<a name="243363008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243363008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243363008">(Jun 21 2021 at 10:24)</a>:</h4>
<p>Could such an algebra exist for plain non-continuous functions?</p>



<a name="243363051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243363051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243363051">(Jun 21 2021 at 10:24)</a>:</h4>
<p>I've been wondering this, and I haven't sat down to think it through.</p>



<a name="243363126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243363126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243363126">(Jun 21 2021 at 10:25)</a>:</h4>
<p>Step one would be to figure out exactly what properties of <code>C^‚àû‚üÆI, G; ùïú‚üØ</code> (beyond its <code>algebra</code> structure) we actually need here.</p>



<a name="243363173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243363173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243363173">(Jun 21 2021 at 10:26)</a>:</h4>
<p>(very little I think)</p>



<a name="243366281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243366281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243366281">(Jun 21 2021 at 11:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243362659">said</a>:</p>
<blockquote>
<p>I've just looked over this PR except for the file <code>left_invariant_derivation.lean</code>. I wonder if there is a case for splitting this file out into a dependent PR.</p>
</blockquote>
<p>I believe that file is very standard, as it just adds one property to derivations and it proves usual stuff: algebraic structure are preserved! Do you have any specific reason to split it?</p>



<a name="243366440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243366440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243366440">(Jun 21 2021 at 11:05)</a>:</h4>
<p>Speaking only for myself, I would argue that while it is mathematically very standard, it is a non-trivial addition to an already-large PR and would probably result in things getting reviewed more quickly if it were split out.</p>



<a name="243372256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243372256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243372256">(Jun 21 2021 at 12:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group/near/243363126">said</a>:</p>
<blockquote>
<p>Step one would be to figure out exactly what properties of <code>C^‚àû‚üÆI, G; ùïú‚üØ</code> (beyond its <code>algebra</code> structure) we actually need here.</p>
</blockquote>
<p>For the differential you also need that it is a composition ring</p>



<a name="243377065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243377065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243377065">(Jun 21 2021 at 12:52)</a>:</h4>
<p>I am pretty sure things can be made more general, but I would do it in a future PR, I can take care of it myself in about a month from now</p>



<a name="243633714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243633714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243633714">(Jun 23 2021 at 10:44)</a>:</h4>
<p>Hey this PR has been around for a while and I was wondering if some maintainer who knows the math will be able to merge it at some point: if I understand correctly, Eric does not feel entitle to merge it because it is not his math area, and Oliver is not yet a maintainer, so cannot merge it.</p>



<a name="243634726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243634726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243634726">(Jun 23 2021 at 10:57)</a>:</h4>
<p>I think Oliver's point about splitting out the "left invariant derivation" into its own PR is likely still a good idea to get things reviewed more quickly</p>



<a name="243635896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/243635896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#243635896">(Jun 23 2021 at 11:10)</a>:</h4>
<p>Done</p>



<a name="244022503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/244022503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#244022503">(Jun 26 2021 at 16:16)</a>:</h4>
<p>Scott will be away for a couple of weeks, so if there's another maintainer who would like to take on that would be great!</p>



<a name="244144770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%237708%20The%20Lie%20algebra%20of%20a%20Lie%20group/near/244144770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicol√≤ Cavalleri <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.237708.20The.20Lie.20algebra.20of.20a.20Lie.20group.html#244144770">(Jun 28 2021 at 13:34)</a>:</h4>
<p>Now the second part of the PR is on github as <a href="https://github.com/leanprover-community/mathlib/issues/8108">#8108</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>