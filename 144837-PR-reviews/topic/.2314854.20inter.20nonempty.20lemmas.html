---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html">#14854 inter nonempty lemmas</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291591739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291591739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291591739">(Aug 01 2022 at 15:34)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14854">#14854</a> has been languishing in limbo for some time and I do not know how to progress it without re-tagging people who I assume are not replying for a reason. It is a small PR and I didn't expect it to take this long.</p>



<a name="291597473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291597473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291597473">(Aug 01 2022 at 16:11)</a>:</h4>
<p>I'll leave this for someone else to decide. From my perspective, this PR seems to be change for changes sake; it's not at all obvious that the new lemmas are any better than the existing ones<del>, nor does the PR contain any evidence one way or the other</del> indeed, the downstream changes in the PR suggest that the new lemmas are worse.</p>



<a name="291597696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291597696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291597696">(Aug 01 2022 at 16:12)</a>:</h4>
<p>For instance, <code>inter_nonempty : (s ‚à© t).nonempty ‚Üî ‚àÉ x, x ‚àà s ‚àß x ‚àà t</code> is provable with just <code>simp_rw [nonempty, mem_inter]</code> and this is the obvious chain of rewrites to get to that goal.</p>



<a name="291597879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291597879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291597879">(Aug 01 2022 at 16:14)</a>:</h4>
<p>What do you need this PR for?</p>



<a name="291598969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291598969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291598969">(Aug 01 2022 at 16:22)</a>:</h4>
<p>I wish you'd told me that a month ago.</p>



<a name="291599256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291599256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291599256">(Aug 01 2022 at 16:24)</a>:</h4>
<p>I can't now remember - about a month ago I was working on something and the current form was really getting in my way, and I noticed that the form of <code>inter_nonempty</code> was quite different from that of all the lemmas that surrounded it.</p>
<p>I don't agree about the downstream changes - they only look worse because the particular context <em>is</em> using sets as types instead of membership. But it seems a lot more common to use membership, certainly in things I've worked on!</p>



<a name="291599344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291599344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291599344">(Aug 01 2022 at 16:25)</a>:</h4>
<p>(That is to say, the downstream lemmas have <code>‚àÄ t ‚àà ùìù a, ‚àÉ y : s, ‚Üëy ‚àà t</code>, instead of <code>‚àÄ t ‚àà ùìù a, ‚àÉ y ‚àà s, y ‚àà t</code>, which is how I'd expect to spell that...)</p>



<a name="291599656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291599656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291599656">(Aug 01 2022 at 16:28)</a>:</h4>
<p>You may as well say "why does <code>union_nonempty</code> exist, can't you use <code>simp_rw [nonempty, mem_union]</code>: you can. But we have the former...</p>



<a name="291600036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291600036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291600036">(Aug 01 2022 at 16:30)</a>:</h4>
<p>Indeed, on the 24th of June, you told me that "[<code>inter_nonempty</code>] is great": <a href="https://github.com/leanprover-community/mathlib/pull/14854#discussion_r905981630">https://github.com/leanprover-community/mathlib/pull/14854#discussion_r905981630</a>.</p>
<p>If you have now changed your mind, that's fine: but I do find it confusing to be told that a new lemma is great, and then a month later told that there's no point to my PR. It really disincentivises future contribution.</p>



<a name="291600263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291600263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291600263">(Aug 01 2022 at 16:32)</a>:</h4>
<p>And indeed: <code>simp</code> is not necessary. As the commit has:<br>
<code>lemma inter_nonempty : (s ‚à© t).nonempty ‚Üî ‚àÉ x, x ‚àà s ‚àß x ‚àà t := iff.rfl</code> - this was the lemma you said was great.</p>



<a name="291602336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291602336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291602336">(Aug 01 2022 at 16:49)</a>:</h4>
<p>Perhaps what I should have said is "I've looked at this PR too much and now can't tell good from bad". A fresh pair of eyes should make the call.</p>



<a name="291602484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291602484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291602484">(Aug 01 2022 at 16:50)</a>:</h4>
<p>Indeed, you're right that I previously thought <code>inter_nonempty</code> was great. In my most recent comment, I had forgotten about <code>union_nonempty</code>.<br>
If the PR description said "adds inter_nonempty to match union_nonempty" then I wouldn't have gotten confused just now!</p>



<a name="291604156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291604156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291604156">(Aug 01 2022 at 17:03)</a>:</h4>
<p>I will edit it. The issue was that I have also myself lost track of what I did where (and to be fair I did also confuse things initially by making style changes that you didn't like, and I think were not good).</p>
<p>I do remember thinking that <code>mem_closure_iff_nhds'</code> was a pretty weird lemma at the time when I made this PR, but I was trying to minimally disturb things.</p>
<p>Personally I think:</p>
<ul>
<li>You were right before: <code>inter_nonempty</code> is indeed good.</li>
<li>
<p>The other two lemmas were weird originally and they're weird now (there is not much else like them).<br>
 Options include:</p>
</li>
<li>
<p>get rid of them entirely - they're barely used anyway, only by <code>mem_closure_iff_comap_ne_bot</code> and <code>mem_closure_iff_nhds'</code> and maybe there's better proofs. And also nobody uses <em>those</em> lemmas anyway, but that's a different PR.</p>
</li>
<li>leave them as they are e.g. <code>nonempty_inter_iff_exists_right</code> - but I do not think we would now accept a PR that added lemmas like this</li>
<li>Accept my changes, and deal with the weirdness of <code>mem_closure_iff_comap_ne_bot</code> and <code>mem_closure_iff_nhds'</code> separately (this was my original plan).</li>
</ul>
<p>Mostly I just don't care anymore except that I want <code>inter_nonempty</code>.</p>



<a name="291606739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291606739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291606739">(Aug 01 2022 at 17:22)</a>:</h4>
<p>For what it's worth, the original lemmas aren't in simp normal form with respect to <a href="https://leanprover-community.github.io/mathlib_docs/find/subtype.exists">docs#subtype.exists</a> (a.k.a. <a href="https://leanprover-community.github.io/mathlib_docs/find/set_coe.exists">docs#set_coe.exists</a>). I'm not making a suggestion by bringing this up, but it seems worth considering.</p>



<a name="291606814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291606814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291606814">(Aug 01 2022 at 17:23)</a>:</h4>
<p>Huh - shouldn't they fail linting if that's the case?</p>



<a name="291606881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291606881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291606881">(Aug 01 2022 at 17:24)</a>:</h4>
<p>They weren't simp lemmas, so no</p>



<a name="291608822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2314854%20inter%20nonempty%20lemmas/near/291608822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2314854.20inter.20nonempty.20lemmas.html#291608822">(Aug 01 2022 at 17:38)</a>:</h4>
<p>Ah, I see.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>