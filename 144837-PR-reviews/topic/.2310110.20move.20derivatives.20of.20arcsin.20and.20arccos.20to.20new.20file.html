---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html">#10110 move derivatives of arcsin and arccos to new file</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="260110712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260110712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260110712">(Nov 03 2021 at 09:59)</a>:</h4>
<p>I get lint errors for this PR, but the errors come from a file that I did not change at all. What should I do about it?</p>



<a name="260112744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260112744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260112744">(Nov 03 2021 at 10:17)</a>:</h4>
<p>I guess this is a consequence of changing the import structure.</p>



<a name="260112765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260112765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260112765">(Nov 03 2021 at 10:17)</a>:</h4>
<p>Probably best to just fix the linting complaints.</p>



<a name="260112820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260112820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260112820">(Nov 03 2021 at 10:18)</a>:</h4>
<p>It looks possible that the lemmas it is complaining about can <del>just be removed</del> just have <code>@[simp]</code> removed?</p>



<a name="260113062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113062">(Nov 03 2021 at 10:20)</a>:</h4>
<p>It looks indeed like a consequence of changing the imports, but I don't understand how, since some files should maybe import less stuff, but not more. I'll check this and remove some simp attributes if needed.</p>



<a name="260113285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113285">(Nov 03 2021 at 10:22)</a>:</h4>
<p>Possibly the order in which statements appear in the environment could depend on details of the import graph? I've never looked at the internals of the simp linter.</p>



<a name="260113757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113757">(Nov 03 2021 at 10:27)</a>:</h4>
<p>The linter gives a good explanation.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- data/complex/basic.lean</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">complex.conj_of_real</span> <span class="c">/-</span><span class="cm"> simp can prove this:</span>
<span class="cm">  by simp only [is_R_or_C.conj_of_real]</span>
<span class="cm">One of the lemmas above could be a duplicate.</span>
</code></pre></div>
<p>We have two lemmas called <code>conj_of_real</code>, one of which subsumes the other.</p>



<a name="260113835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113835">(Nov 03 2021 at 10:27)</a>:</h4>
<p>Sometimes it's useful to have a general lemma first and then a more specific one, so the linter ignores the duplicate in that situation.</p>



<a name="260113902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113902">(Nov 03 2021 at 10:28)</a>:</h4>
<p>By changing the imports you changed the order of <code>complex.conj_of_real</code> and <code>is_R_or_C.conj_of_real</code>.</p>



<a name="260113925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260113925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260113925">(Nov 03 2021 at 10:28)</a>:</h4>
<p>AFAICT the solution is to remove the <code>@[simp]</code> on <code>complex.conj_of_real</code>.</p>



<a name="260114097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260114097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260114097">(Nov 03 2021 at 10:30)</a>:</h4>
<p>Ah, I hadn't realised that the linter would forgive duplicates in one order, but not the other.</p>



<a name="260114099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260114099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260114099">(Nov 03 2021 at 10:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file/near/260113835">said</a>:</p>
<blockquote>
<p>Sometimes it's useful to have a general lemma first and then a more specific one, so the linter ignores the duplicate in that situation.</p>
</blockquote>
<p>That's the thing I did not know and which confused me. I did not understand how it could be an issue after my changes, but was not an issue before. Thanks!</p>



<a name="260114729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260114729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260114729">(Nov 03 2021 at 10:36)</a>:</h4>
<p>I still don't understand how my changes caused that import order change, but I don't really know how to investigate that. My fear is that if I remove <code>[simp]</code> from one lemma and a future PR changes the order again, then I could end up in a situation where simp is weaker in some files than previously.</p>
<p>But that it is not a problem if that particular simp lemma is not used in the affected files, and if that is a problem then I will find out by getting errors again.</p>



<a name="260116511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260116511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260116511">(Nov 03 2021 at 10:55)</a>:</h4>
<p>A related question: the linter does not find any error when I write <code>#lint</code> at the end of the file. Is that an expected difference in behaviour between the local lint and CI?</p>



<a name="260116642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260116642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260116642">(Nov 03 2021 at 10:56)</a>:</h4>
<p>The simp linter is a global one, it doesn't necessarily find errors in a single file</p>



<a name="260116769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310110%20move%20derivatives%20of%20arcsin%20and%20arccos%20to%20new%20file/near/260116769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310110.20move.20derivatives.20of.20arcsin.20and.20arccos.20to.20new.20file.html#260116769">(Nov 03 2021 at 10:57)</a>:</h4>
<p>Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>