---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html">#9470 (+127,-1) computable cyclic perm notation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="255634642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255634642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255634642">(Sep 30 2021 at 19:36)</a>:</h4>
<p>For all speed devils out there: this PR is providing a framework to compute with permutations in cycle notation. But it seems to be slowish atm. Speedups welcome.</p>



<a name="255647980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255647980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255647980">(Sep 30 2021 at 21:03)</a>:</h4>
<p>In particular, I think it is slow because of how determining the perm's factors is slow, it is a search over all possible supports.</p>



<a name="255693520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255693520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255693520">(Oct 01 2021 at 05:47)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> Is this a matter of changing the function that computes those factors?</p>



<a name="255733558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255733558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255733558">(Oct 01 2021 at 12:13)</a>:</h4>
<p>I am not sure. It's just my guess from what I think could be slow. I haven't checked how the factorization of a perm could be reformulated. In addition, I don't know how to use the profiler information to drill down to where the slowness comes from.</p>



<a name="255789059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255789059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255789059">(Oct 01 2021 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Do you have some hints or tips on how to debug this?</p>



<a name="255811285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255811285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255811285">(Oct 01 2021 at 21:40)</a>:</h4>
<p>Is there a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> / usage example?</p>



<a name="255811404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/255811404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#255811404">(Oct 01 2021 at 21:41)</a>:</h4>
<p>I think the basic questions is: can we make</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.perm.concrete_cycle</span>

<span class="k">#eval</span> <span class="n">c</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">7</span><span class="o">),</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]</span> <span class="bp">*</span> <span class="n">c</span><span class="o">[</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">]</span>
</code></pre></div>
<p>faster? (On <a href="https://github.com/leanprover-community/mathlib/tree/pechersky/repr-perm">branch#pechersky/repr-perm</a>.)</p>



<a name="256845961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256845961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256845961">(Oct 09 2021 at 06:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> are you ok with merging the PR as is, and making it faster later? I imagine that making these computations fast might actually be a job for a <code>norm_num</code> extension, instead of <code>dec_trivial</code>.</p>



<a name="256848314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256848314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256848314">(Oct 09 2021 at 07:20)</a>:</h4>
<p>I don't really understand what this PR is doing, sorry.</p>



<a name="256848920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256848920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256848920">(Oct 09 2021 at 07:31)</a>:</h4>
<p>I fear that it is not adding any maths, just a computational version of something, but it isn't actually efficient enough to be usable. I might be wrong about what's in the PR however.</p>



<a name="256850669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256850669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256850669">(Oct 09 2021 at 08:00)</a>:</h4>
<p>I don't see any reason not to merge it. An improvement in running time for the computation is a completely separate PR anyway.</p>



<a name="256906678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256906678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256906678">(Oct 09 2021 at 23:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> the PR gives two things, one is the ability to write a cyclic permutation in a syntax akin to the regular way of writing "(1 2 3 4)", in a way that lean knows that "(1 2 3 4)" is the same as "(3 4 1 2)" definitionally. The second thing it does is gives a repr instance to permutations over fintypes. That second part is the slow part.</p>



<a name="256906721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256906721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256906721">(Oct 09 2021 at 23:23)</a>:</h4>
<p>For pedagogical purposes, being able to write "(1 3 2 4)" and have that behave as expected was my goal.</p>



<a name="256906744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%239470%20%28%2B127%2C-1%29%20computable%20cyclic%20perm%20notation/near/256906744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.239470.20(.2B127.2C-1).20computable.20cyclic.20perm.20notation.html#256906744">(Oct 09 2021 at 23:23)</a>:</h4>
<p>In a similar way that we have data.matrix.notation. I'm sorry that I didn't make that clearer in the commits or comments.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>