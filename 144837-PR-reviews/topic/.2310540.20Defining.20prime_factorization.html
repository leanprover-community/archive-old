---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html">#10540 Defining prime_factorization</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263044419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/263044419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#263044419">(Nov 29 2021 at 17:56)</a>:</h4>
<p>I've just PR'ed the basics of a definition of <code>prime_factorization</code> in terms of <code>finsupp</code>, as discussed in<br>
<a href="#narrow/stream/113489-new-members/topic/Prime.20factorizations">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Prime.20factorizations</a><br>
and<br>
<a href="#narrow/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient</a></p>
<p>I have more material to follow, but I figured I should keep the first PR relatively short and simple to check that I'm on the right track.</p>
<p>I've added this as a new file rather than putting it in <code>data/nat/prime</code> which is already 1100+ lines.</p>
<p>This is my first time PRing a new file rather than an edit to an existing file; sorry if I've messed something up or if this would be better placed in some other file.</p>



<a name="267042187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267042187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267042187">(Jan 06 2022 at 09:50)</a>:</h4>
<p>I think this is ready to merge now.  I responded to a few comments from <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> a few days ago, and it's had a <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> from two reviewers.  Do <span class="user-mention" data-user-id="310045">@Eric Wieser</span> , <span class="user-mention" data-user-id="112680">@Johan Commelin</span> , or <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> (who also reviewed this) have any other comments, suggestions, or objections?</p>



<a name="267042376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267042376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267042376">(Jan 06 2022 at 09:52)</a>:</h4>
<p>There is of course more material to add, and more work to be done to align with <code>factors.count</code>, <code>padic_val_nat</code>, <code>multiplicity</code>, and the material in <code>data/pnat/factors</code>.  But as a starting point does this look ok?</p>



<a name="267043539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267043539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267043539">(Jan 06 2022 at 10:04)</a>:</h4>
<p>My only comment is that I hope the two approaches will be deduplicated in the future. Currently we are doing a lot of work specialized to primes in <code>ℕ</code> which shouldn't be necessary.</p>



<a name="267196074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267196074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267196074">(Jan 07 2022 at 14:40)</a>:</h4>
<p>Ok, I've added a TODO note to that effect.  Is there anything else?</p>



<a name="267251723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267251723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267251723">(Jan 07 2022 at 22:33)</a>:</h4>
<p>Thanks to everyone for your comments, suggestions, and improvements on this.</p>



<a name="267252256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%2310540%20Defining%20prime_factorization/near/267252256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.2310540.20Defining.20prime_factorization.html#267252256">(Jan 07 2022 at 22:38)</a>:</h4>
<p>Now that this is merged, <a href="https://github.com/leanprover-community/mathlib/pull/10850">#10850</a> should be ready for review — it just adds a couple of simple lemmas on coprime pairs.  That's the last obstruction to <a href="https://github.com/leanprover-community/mathlib/pull/11167">#11167</a>, which gives the formula for evaluating multiplicative functions over prime power divisors.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>