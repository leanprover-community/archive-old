---
layout: archive
title: Zulip Chat Archive
permalink: /stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/index.html">PR reviews</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html">#8820 Lucas Primality</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="252789051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252789051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252789051">(Sep 10 2021 at 13:45)</a>:</h4>
<p>Responding in more depth to <span class="user-mention" data-user-id="112680">@Johan Commelin</span> 's comment about the theorem actually being true for <code>p=1</code>. This sort of thing came up earlier in <a href="#narrow/stream/113488-general/topic/Units.20of.20zmod.201">this thread</a>. </p>
<p>Another thing is the lemma <code>prime_iff_card_units</code>, which is actually true <em>even if <code>p = 0</code></em>, since <code>p-1 = 0</code> and <code>fintype.card (units (zmod p)) = 2</code>. But that gets back to the thread on <code>fintype (units (zmod n))</code> and how easy it is to make a computable instance of that fintype. </p>
<p>To me it just feels more natural to put in the condition that <code>p</code> is big enough that we have a nondegenerate ring, even if it's not strictly needed.</p>



<a name="252789168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252789168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252789168">(Sep 10 2021 at 13:46)</a>:</h4>
<p>It might be more natural, but the question is which version is easier to use down the road.</p>



<a name="252789521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252789521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252789521">(Sep 10 2021 at 13:49)</a>:</h4>
<p>To add to that: If its too difficult to prove the degenerate ring case, then that probably means some api is missing and there is a gap to be filled there, ideally dealing with the degenerate case should just take a couple of lines.</p>



<a name="252789772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252789772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252789772">(Sep 10 2021 at 13:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality/near/252789168">said</a>:</p>
<blockquote>
<p>It might be more natural, but the question is which version is easier to use down the road.</p>
</blockquote>
<p>I agree.</p>
<p>In my mind, it's more likely that someone would be trying to encounter problems thinking "Wait was it 0 &lt; p or 1 &lt; p, I guess its probably 1 &lt; p because it doesn't make sense to compare something to 1 in zmod 1", than for someone to want to apply this theorem when p = 1, since the theorem is vacuous in that case anyway.</p>



<a name="252790403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252790403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252790403">(Sep 10 2021 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="282271">@Bolton Bailey</span> Sure, I don't think it will be applied to <code>p = 1</code>. But proving that a number is positive is usually a lot easier than proving that it is <code>&gt; 1</code>. Simply because there are many more lemmas of the form <code>pos_of_foobar</code></p>



<a name="252790451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252790451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252790451">(Sep 10 2021 at 13:55)</a>:</h4>
<p>You only need to prove <code>p \ne 0</code>. And there are many lemmas with such a conclusion as well.</p>



<a name="252790579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252790579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252790579">(Sep 10 2021 at 13:56)</a>:</h4>
<p>So even if you apply the lemma to <code>n^2 + n + k</code>, it will be easier if you only need to check that this expression is nonzero.</p>



<a name="252790607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252790607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252790607">(Sep 10 2021 at 13:56)</a>:</h4>
<p>Motto: "Make your life harder so that we don't" <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="252792166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252792166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252792166">(Sep 10 2021 at 14:05)</a>:</h4>
<p>For me, superfluous hypotheses which don't need to be there make things more confusing not less, because I am confused about why they're there (whereas the fact that 0=1 in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mi mathvariant="normal">/</mi><mn>1</mn><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z/1\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mord">/1</span><span class="mord mathbb">Z</span></span></span></span> is not at all confusing to me)</p>



<a name="252792906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252792906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252792906">(Sep 10 2021 at 14:10)</a>:</h4>
<p>Ok, well, I guess I'm outnumbered.</p>



<a name="252792975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252792975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252792975">(Sep 10 2021 at 14:11)</a>:</h4>
<p>What's happening is that we all know from weary experience that what we're suggesting is better in the long run.</p>



<a name="252793228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252793228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252793228">(Sep 10 2021 at 14:12)</a>:</h4>
<p>We all learnt this in our own ways. Mine was back in 2017 when we didn't have <code>real.sqrt</code> and I wrote one under the hypothesis that the input was &gt;=0, and was told that I should remove this hypothesis and just return junk for negative reals. I thought this was crazy so I ignored people and stuck to my own ideas, but then once I'd got sick of filling in many many proofs that 2&gt;0, 3&gt;0, 6&gt;0,... when trying to prove some simple question about square roots I began to see the point of view of the others.</p>



<a name="252802596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252802596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252802596">(Sep 10 2021 at 15:17)</a>:</h4>
<p>As <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> has commented on the PR, you don't even need any assumption on <code>p</code> at all. This makes the decision much clearer.</p>



<a name="252803530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252803530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252803530">(Sep 10 2021 at 15:24)</a>:</h4>
<p>But from that comment, it seems like he thought <code>zmod 0</code> was an empty type. This  makes me feel like people will continue to be confused by <code>zmod 0</code> if something isn't done to make it clear that <code>[fact (0 &lt; n)]</code> is often needed when using it.</p>



<a name="252803592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252803592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252803592">(Sep 10 2021 at 15:24)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mi mathvariant="normal">/</mi><mn>0</mn><mi mathvariant="double-struck">Z</mi><mo>=</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z/0\Z=\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mord">/0</span><span class="mord mathbb">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">Z</span></span></span></span> right?</p>



<a name="252803641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252803641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252803641">(Sep 10 2021 at 15:25)</a>:</h4>
<p>That doesn't look confusing to me (although of course it will confuse the computer scientists because I'm using mathematical equality ;-) )</p>



<a name="252803829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252803829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252803829">(Sep 10 2021 at 15:26)</a>:</h4>
<p>Yes, it's very natural if you are used to thinking about modding out rings by ideals, but when you happily assume that <code>zmod n</code> is finite, you hit a brick wall if you're a computer scientist.</p>



<a name="252805846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/252805846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#252805846">(Sep 10 2021 at 15:39)</a>:</h4>
<p>yeah but <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mi mathvariant="normal">/</mi><mn>0</mn><mi mathvariant="double-struck">Z</mi><mo>=</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z/0\Z=\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mord">/0</span><span class="mord mathbb">Z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">Z</span></span></span></span> right?</p>



<a name="259427363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259427363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259427363">(Oct 28 2021 at 17:54)</a>:</h4>
<p>I have found a bit more time to try to finish this, but there's one suggestion from <span class="user-mention" data-user-id="310045">@Eric Wieser</span>  which is tripping me up. See the PR for details, but when I do the version of <code>card_units_zmod_lt_sub_one</code> which has the <code>[fintype (units (zmod p))]</code> argument, I get a "did not find instance of pattern" in a situation where it seems like the pattern is right there. Is a diamond causing this?</p>



<a name="259428655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259428655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259428655">(Oct 28 2021 at 18:01)</a>:</h4>
<p>Have you merged master recently?</p>



<a name="259428739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259428739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259428739">(Oct 28 2021 at 18:02)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/units.fintype">docs#units.fintype</a> was changed recently</p>



<a name="259429589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259429589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259429589">(Oct 28 2021 at 18:08)</a>:</h4>
<p>I merged master two days ago, after which this issue started occurring.</p>



<a name="259430119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259430119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259430119">(Oct 28 2021 at 18:13)</a>:</h4>
<p>That makes sense</p>



<a name="259430292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259430292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259430292">(Oct 28 2021 at 18:15)</a>:</h4>
<p>I can take a look tomorrow</p>



<a name="259430649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259430649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259430649">(Oct 28 2021 at 18:18)</a>:</h4>
<p>Thanks!</p>



<a name="259432692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259432692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259432692">(Oct 28 2021 at 18:33)</a>:</h4>
<p>Usually a <code>convert</code> will solve the type of problem you're seeing</p>



<a name="259433269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259433269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259433269">(Oct 28 2021 at 18:38)</a>:</h4>
<p>What was the rewrite by that didn't match?</p>



<a name="259448638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259448638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259448638">(Oct 28 2021 at 20:38)</a>:</h4>
<p>I found some time tonight; github wouldn't let me comment on the relevant lines, so I just pushed the change I was suggesting; feel free to revert if you don't like it (although maybe make a comment why first!)</p>



<a name="259448673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259448673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259448673">(Oct 28 2021 at 20:38)</a>:</h4>
<p>The upshot is that <code>prime_iff_card_units</code> now applies when <code>p = 0</code> too.</p>



<a name="259459398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259459398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259459398">(Oct 28 2021 at 22:15)</a>:</h4>
<p>I'm talking about the proof of <code>card_units_zmod_lt_sub_one</code>, this is what I have, which gives me the error I mentioned.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">card_units_zmod_lt_sub_one</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span>
  <span class="o">[</span><span class="n">fintype</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">p</span><span class="o">))]:</span>
  <span class="n">fintype.card</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">p</span><span class="o">))</span> <span class="bp">≤</span> <span class="n">p</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span>
  <span class="n">haveI</span> <span class="n">hp'</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">),</span> <span class="n">exact</span> <span class="o">{</span><span class="n">out</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">},</span>
  <span class="n">rw</span> <span class="bp">@</span><span class="n">zmod.card_units_eq_totient</span> <span class="n">p</span> <span class="n">hp'</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat.le_pred_of_lt</span> <span class="o">(</span><span class="n">nat.totient_lt</span> <span class="n">p</span> <span class="n">hp</span><span class="o">),</span> <span class="o">}</span>
</code></pre></div>



<a name="259459519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259459519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259459519">(Oct 28 2021 at 22:16)</a>:</h4>
<p>Sorry to keep questioning the maintainers' suggestions for this PR, but isn't this version a little harder to use than the one which just has the default typeclass argument? Is there a way to change this version so that there is a default argument like there is in the current version?</p>



<a name="259460412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259460412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259460412">(Oct 28 2021 at 22:26)</a>:</h4>
<p>Perhaps the idea is that the fintype type class is more likely to be present when using this theorem?</p>



<a name="259461061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259461061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259461061">(Oct 28 2021 at 22:36)</a>:</h4>
<p>Ah I see you pushed a change that fixes it, thanks!</p>



<a name="259463747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259463747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259463747">(Oct 28 2021 at 23:05)</a>:</h4>
<p>The typeclass is needed to even state the theorem so must always be present</p>



<a name="259463748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%238820%20Lucas%20Primality/near/259463748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/144837-PR-reviews/topic/.238820.20Lucas.20Primality.html#259463748">(Oct 28 2021 at 23:05)</a>:</h4>
<p>Yes, I pushed a fix, sorry if that wasn't clear</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>