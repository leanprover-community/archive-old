---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html">Data.Set.Pairwise</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="317472486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317472486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317472486">(Dec 23 2022 at 00:08)</a>:</h4>
<p><span class="user-mention" data-user-id="311453">@Frédéric Dupuis</span> and zeramorphic you have a race-condition: <a href="https://github.com/leanprover-community/mathlib4/pull/1176">mathlib4#1176</a> and <a href="https://github.com/leanprover-community/mathlib4/pull/1175">mathlib4#1175</a></p>



<a name="317472535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317472535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317472535">(Dec 23 2022 at 00:09)</a>:</h4>
<p><span class="user-mention" data-user-id="492774">@Sky Wilshaw</span> = zeramorphic it seems</p>



<a name="317474605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317474605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317474605">(Dec 23 2022 at 00:30)</a>:</h4>
<p>Oh wow, I guess we both started working on the file at the same time - I checked the open PRs but there wasn't anything at the time!</p>



<a name="317475567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317475567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317475567">(Dec 23 2022 at 00:39)</a>:</h4>
<p>Our branches are almost the same, but we made some different choices in naming convention: for lemmas like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Pairwise</span> <span class="o">(</span><span class="n">Disjoint</span> <span class="n">on</span> <span class="k">fun</span> <span class="n">c</span> <span class="bp">=&gt;</span> <span class="n">cond</span> <span class="n">c</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">Disjoint</span> <span class="n">a</span> <span class="n">b</span>
</code></pre></div>
<p>I chose <code>pairwise_disjoint_on_bool</code>, and Frédéric chose <code>pairwiseDisjoint_on_bool</code> - I <em>think</em> that mine is correct because <code>PairwiseDisjoint</code> isn't the hypothesis. Additionally, there's a panic in <a href="https://github.com/leanprover-community/mathlib4/pull/1176">mathlib4#1176</a> on line 68(ish) that doesn't occur on my copy (probably due to a difference in capitalisation). I also golfed some of the unnecessary uses of <code>Set.</code> before lemma names in invocations of <code>simp</code> etc.</p>



<a name="317475664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317475664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317475664">(Dec 23 2022 at 00:40)</a>:</h4>
<p>I did have some incorrect names later in the file that Frédéric did correctly - I've fixed all of them that I saw on my PR <a href="https://github.com/leanprover-community/mathlib4/pull/1175">mathlib4#1175</a>.</p>



<a name="317476201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476201">(Dec 23 2022 at 00:46)</a>:</h4>
<p>Oh! Yeah, we must have worked on it at the same time.</p>



<a name="317476331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476331">(Dec 23 2022 at 00:48)</a>:</h4>
<p>For <code>pairwise_disjoint_on_bool</code> I hesitated a bit, and I went with <code>pairwiseDisjoint_on_bool</code> since there are similar lemmas lower down that are in the <code>PairwiseDisjoint</code> namespace.</p>



<a name="317476338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476338">(Dec 23 2022 at 00:48)</a>:</h4>
<p>I don't know why the panic happened in this file (it also crashed my VS Code language server) but changing <code>Injective</code> to <code>injective</code> fixed it. It's strange to me that something like that caused the language server to completely crash.</p>



<a name="317476378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476378">(Dec 23 2022 at 00:48)</a>:</h4>
<p>Yes, this looks like a bug.</p>



<a name="317476418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476418">(Dec 23 2022 at 00:49)</a>:</h4>
<p>Let's use your PR since you already started "merging" the two.</p>



<a name="317476559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317476559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317476559">(Dec 23 2022 at 00:51)</a>:</h4>
<p>Ok, great. I've copied through a lot of your naming changes. There are a couple of other small aesthetic changes I made to the file as well, feel free to take a look over and revert any of them! I tend to prefer <code>_x</code> rather than <code>_</code> for example, if there's additionally a hypothesis <code>hx</code> or something else referencing the name <code>x</code>.</p>



<a name="317493610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317493610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317493610">(Dec 23 2022 at 05:01)</a>:</h4>
<p>Hmm, sorry for that race condition.</p>



<a name="317493663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317493663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317493663">(Dec 23 2022 at 05:02)</a>:</h4>
<p><a href="https://math.commelin.net/files/port_status.html">#port-status</a> is updated every 30 mins. So there is actually quite a window for such race conditions.</p>



<a name="317495314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317495314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317495314">(Dec 23 2022 at 05:26)</a>:</h4>
<p>running the port status script by hand makes race conditions very unlikely, but I think in this case it was almost exactly at the same time. If this happens more frequently (which I honestly doubt) we might have consider returning to a long list with manually claiming files</p>



<a name="317495387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317495387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317495387">(Dec 23 2022 at 05:27)</a>:</h4>
<p>Agreed, let's hope it is indeed rare.</p>



<a name="317517410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317517410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317517410">(Dec 23 2022 at 08:54)</a>:</h4>
<p>Another possibility is that when people start on new files they announce it on this stream. Note that it would also occasionally happen with the old system too.</p>



<a name="317518650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317518650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317518650">(Dec 23 2022 at 09:02)</a>:</h4>
<p>I'd suggest people run the new script and then push immediately. That way you're guaranteed that github will tell you off if that branch already exists</p>



<a name="317524977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317524977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317524977">(Dec 23 2022 at 09:39)</a>:</h4>
<p>But not push to master, of course</p>



<a name="317525202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317525202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317525202">(Dec 23 2022 at 09:40)</a>:</h4>
<p>Well, I tried to to exactly this and of course I pushed to master. I am a little bit confused, since VS Code was showing the new branch, but the usual button I use to push did it on master.</p>



<a name="317525936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317525936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317525936">(Dec 23 2022 at 09:44)</a>:</h4>
<p>Odd</p>



<a name="317526480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526480">(Dec 23 2022 at 09:48)</a>:</h4>
<p><a href="/user_uploads/3121/m2qB4tRi2rRL2BQRDAhjb-17/image.png">image.png</a><br>
This is my VS code after running the script (I was on master before). It is on the new branch, but if I click on the button it pushes to master, as indicated (I didn't notice it before).</p>
<div class="message_inline_image"><a href="/user_uploads/3121/m2qB4tRi2rRL2BQRDAhjb-17/image.png" title="image.png"><img src="/user_uploads/3121/m2qB4tRi2rRL2BQRDAhjb-17/image.png"></a></div>



<a name="317526544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526544">(Dec 23 2022 at 09:48)</a>:</h4>
<p>Can you show the full terminal output from running the script?</p>



<a name="317526617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526617">(Dec 23 2022 at 09:49)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code> ./scripts/start_port.sh Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ <span class="nb">set</span> -o pipefail
+ <span class="nv">MATHLIB3PORT_BASE_URL</span><span class="o">=</span>https://raw.githubusercontent.com/leanprover-community/mathlib3port/master
+ <span class="nv">PORT_STATUS_YAML</span><span class="o">=</span>https://raw.githubusercontent.com/wiki/leanprover-community/mathlib/mathlib4-port-status.md
+ <span class="nv">TMP_FILE</span><span class="o">=</span>start_port_tmp.lean
+ <span class="nv">mathlib4_path</span><span class="o">=</span>Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+++ <span class="nb">echo</span> Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+++ tr / .
++ basename Mathlib.Order.ConditionallyCompleteLattice.Basic.lean .lean
+ <span class="nv">mathlib4_mod</span><span class="o">=</span>Mathlib.Order.ConditionallyCompleteLattice.Basic
+ <span class="nv">mathlib3port_url</span><span class="o">=</span>https://raw.githubusercontent.com/leanprover-community/mathlib3port/master/Mathbin/Order/ConditionallyCompleteLattice/Basic.lean
+ curl --silent --show-error -o start_port_tmp.lean https://raw.githubusercontent.com/leanprover-community/mathlib3port/master/Mathbin/Order/ConditionallyCompleteLattice/Basic.lean
++ grep <span class="s1">'^! .*source module '</span>
++ sed <span class="s1">'s/.*source module \(.*\)$/\1/'</span>
+ <span class="nv">mathlib3_module</span><span class="o">=</span>order.conditionally_complete_lattice.basic
+ curl --silent --show-error https://raw.githubusercontent.com/wiki/leanprover-community/mathlib/mathlib4-port-status.md
+ grep -F <span class="s1">'order.conditionally_complete_lattice.basic: '</span>
+ grep mathlib4#
++ dirname Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ mkdir -p Mathlib/Order/ConditionallyCompleteLattice
+ mv start_port_tmp.lean Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ git fetch
+ <span class="nv">branch_name</span><span class="o">=</span>port/Order.ConditionallyCompleteLattice.Basic
+ git checkout -b port/Order.ConditionallyCompleteLattice.Basic origin/master
La branche <span class="s1">'port/Order.ConditionallyCompleteLattice.Basic'</span> est paramétrée pour suivre la branche distante <span class="s1">'master'</span> depuis <span class="s1">'origin'</span>.
Basculement sur la nouvelle branche <span class="s1">'port/Order.ConditionallyCompleteLattice.Basic'</span>
+ git add Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ git commit -m <span class="s1">'Initial file copy from mathport'</span>
<span class="o">[</span>port/Order.ConditionallyCompleteLattice.Basic e732abe0<span class="o">]</span> Initial file copy from mathport
 <span class="m">1</span> file changed, <span class="m">1484</span> insertions<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ sed -i <span class="s1">'s/Mathbin\./Mathlib\./g'</span> Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ <span class="nb">echo</span> <span class="s1">'import Mathlib.Order.ConditionallyCompleteLattice.Basic'</span>
+ cat Mathlib.lean
+ <span class="nv">LC_ALL</span><span class="o">=</span>C
+ sort
+ mv -f Mathlib.lean.tmp Mathlib.lean
+ git add Mathlib.lean Mathlib/Order/ConditionallyCompleteLattice/Basic.lean
+ git commit -m <span class="s1">'Mathbin -&gt; Mathlib; add import to Mathlib.lean'</span>
<span class="o">[</span>port/Order.ConditionallyCompleteLattice.Basic b9b71d3a<span class="o">]</span> Mathbin -&gt; Mathlib<span class="p">;</span> add import to Mathlib.lean
 <span class="m">2</span> files changed, <span class="m">5</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">4</span> deletions<span class="o">(</span>-<span class="o">)</span>
</code></pre></div>



<a name="317526650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526650">(Dec 23 2022 at 09:49)</a>:</h4>
<p>sorry for the french...</p>



<a name="317526729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526729">(Dec 23 2022 at 09:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">git</span> <span class="n">checkout</span> <span class="bp">-</span><span class="n">b</span> <span class="n">port</span><span class="bp">/</span><span class="n">Order.ConditionallyCompleteLattice.Basic</span> <span class="n">origin</span><span class="bp">/</span><span class="n">master</span>
<span class="n">La</span> <span class="n">branche</span> <span class="bp">'</span><span class="n">port</span><span class="bp">/</span><span class="n">Order.ConditionallyCompleteLattice.Basic'</span> <span class="n">est</span> <span class="n">param</span><span class="bp">é</span><span class="n">tr</span><span class="bp">é</span><span class="n">e</span> <span class="n">pour</span> <span class="n">suivre</span> <span class="n">la</span> <span class="n">branche</span> <span class="n">distante</span> <span class="bp">'</span><span class="n">master'</span> <span class="n">depuis</span> <span class="bp">'</span><span class="n">origin'.</span>
</code></pre></div>
<p>That sounds suspicious</p>



<a name="317526945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317526945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317526945">(Dec 23 2022 at 09:51)</a>:</h4>
<p>What does <code>git branch --unset-upstream port/Order.ConditionallyCompleteLattice.Basic</code> do?</p>



<a name="317527134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527134">(Dec 23 2022 at 09:52)</a>:</h4>
<p>I suspect adding that line to the script would solve the problem</p>



<a name="317527143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527143">(Dec 23 2022 at 09:52)</a>:</h4>
<p>No output</p>



<a name="317527169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527169">(Dec 23 2022 at 09:52)</a>:</h4>
<p>Ok, but is vscode now not offering a push to master?</p>



<a name="317527215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527215">(Dec 23 2022 at 09:52)</a>:</h4>
<p>You might need to refresh the UI somehow, vscode doesn't know when you run command line things</p>



<a name="317527618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527618">(Dec 23 2022 at 09:55)</a>:</h4>
<p>It now says "publish branch", that is the expected behavior I guess</p>



<a name="317527669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317527669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317527669">(Dec 23 2022 at 09:55)</a>:</h4>
<p>So the correct fix is either to add the <code>--unset-upstream</code> command as I do above (edit: or the equivalent <code>--no-track</code> at creation time), or have the script just push the branch immediately to the right place, at which point it can correct the tracking reference to the right one</p>



<a name="317528014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317528014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317528014">(Dec 23 2022 at 09:57)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/1182">mathlib4#1182</a></p>



<a name="317528963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317528963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317528963">(Dec 23 2022 at 10:02)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Thanks for that fix!</p>



<a name="317530724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317530724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317530724">(Dec 23 2022 at 10:13)</a>:</h4>
<p>It might still be worth having it immediately push the branch, but then the script needs to learn to handle cases where someone else already pushed the same branch, so I left that for a follow-up</p>



<a name="317530845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317530845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317530845">(Dec 23 2022 at 10:14)</a>:</h4>
<p>We might want to disable force-pushes for <code>port/*</code> branches to avoid people accidentally cloberring each other's work</p>



<a name="317533882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317533882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317533882">(Dec 23 2022 at 10:31)</a>:</h4>
<p>Does github support that? If so, sounds like a good idea.</p>



<a name="317535333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317535333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317535333">(Dec 23 2022 at 10:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise/near/317530724">said</a>:</p>
<blockquote>
<p>It might still be worth having it immediately push the branch, but then the script needs to learn to handle cases where someone else already pushed the same branch, so I left that for a follow-up</p>
</blockquote>
<p>Well, the only thing the script needs to do is error, which git will do by default :)</p>



<a name="317537410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317537410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317537410">(Dec 23 2022 at 10:51)</a>:</h4>
<p>It needs to detect the error and explain what went wrong, otherwise people will claim there is a bug in the script :)</p>



<a name="317631447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.Set.Pairwise/near/317631447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise.html#317631447">(Dec 23 2022 at 19:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/287929-mathlib4/topic/Data.2ESet.2EPairwise/near/317493610">said</a>:</p>
<blockquote>
<p>Hmm, sorry for that race condition.</p>
</blockquote>
<p>No need to apologise - from what I can tell, we both started making our PRs so close to each other that even updating <a href="https://math.commelin.net/files/port_status.html">#port-status</a> every time a branch was created might even be too slow! I think the solution with the new script looks very useful.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>