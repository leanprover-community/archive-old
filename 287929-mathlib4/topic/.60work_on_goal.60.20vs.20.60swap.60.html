---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html">`work_on_goal` vs `swap`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270587312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270587312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270587312">(Feb 03 2022 at 17:32)</a>:</h4>
<p>On <code>work_on_goal i</code>, the n-th goal is indexed from 0 and on <code>swap i</code> the target goal is indexed from 1. Should we unify these so that both are indexed from the same value?</p>
<p>(I am biased towards indexing both from 0)</p>



<a name="270590150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270590150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270590150">(Feb 03 2022 at 17:51)</a>:</h4>
<p>I don't know off the top of my head if there are any tactics in core that take a goal number as argument.  But if there are we should also be consistent with the core tactics.</p>



<a name="270593787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270593787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270593787">(Feb 03 2022 at 18:16)</a>:</h4>
<p>I have a mild preference for 1-indexing goals, since it's not like the values are subject to scripting applications, they go straight to the user. Another place where lean uses 1-indexing is structure projections <code>x.1</code>, <code>x.2</code> (which btw always trips me up since they are 0-indexed in rust)</p>



<a name="270594882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270594882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270594882">(Feb 03 2022 at 18:24)</a>:</h4>
<p>Regarding 1-indexing of fields, it's actually both: <a href="#narrow/stream/270676-lean4/topic/.E2.9C.94.20.22.2E0.22.20in.20expressions/near/270048156">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/.E2.9C.94.20.22.2E0.22.20in.20expressions/near/270048156</a> which makes it even more confusing :/</p>



<a name="270595538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270595538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270595538">(Feb 03 2022 at 18:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270593787">said</a>:</p>
<blockquote>
<p>I have a mild preference for 1-indexing goals, since it's not like the values are subject to scripting applications, they go straight to the user. Another place where lean uses 1-indexing is structure projections <code>x.1</code>, <code>x.2</code> (which btw always trips me up since they are 0-indexed in rust)</p>
</blockquote>
<p>I totally agree. So the behavior wrt 0 would be the same as wrt 1? My only concern is about dealing with 0's</p>



<a name="270600821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270600821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270600821">(Feb 03 2022 at 19:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270593787">said</a>:</p>
<blockquote>
<p>I have a mild preference for 1-indexing goals, since it's not like the values are subject to scripting applications, they go straight to the user. Another place where lean uses 1-indexing is structure projections <code>x.1</code>, <code>x.2</code> (which btw always trips me up since they are 0-indexed in rust)</p>
</blockquote>
<p>There aren't that many total occurrences of <code>work_on_goal</code> in mathlib (which is not surprising because it exists mainly to support <code>tidy</code>), and a couple look like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">archive</span><span class="bp">/</span><span class="mi">100</span><span class="bp">-</span><span class="n">theorems</span><span class="bp">-</span><span class="n">list</span><span class="bp">/</span><span class="mi">73</span><span class="n">_ascending_descending_sequences.lean</span><span class="o">:</span>    <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">ab</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">∈</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">max'_mem</span> <span class="n">_</span> <span class="n">_</span> <span class="o">},</span>
<span class="n">archive</span><span class="bp">/</span><span class="mi">100</span><span class="bp">-</span><span class="n">theorems</span><span class="bp">-</span><span class="n">list</span><span class="bp">/</span><span class="mi">73</span><span class="n">_ascending_descending_sequences.lean</span><span class="o">:</span>    <span class="n">work_on_goal</span> <span class="mi">1</span> <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">ab</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">∈</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">max'_mem</span> <span class="n">_</span> <span class="n">_</span> <span class="o">},</span>
</code></pre></div>
<p>which is more reason to use 1-based indexing</p>



<a name="270602659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270602659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270602659">(Feb 03 2022 at 19:17)</a>:</h4>
<blockquote>
<p>which is more reason to use 1-based indexing</p>
</blockquote>
<p>or to use  0-based indexing for structure projections (as that is the general standard for indexing and is what is done internally)</p>



<a name="270602780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270602780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270602780">(Feb 03 2022 at 19:18)</a>:</h4>
<p>In principle yes, but that's a much bigger change in terms of user impact and not very nice for writing math</p>



<a name="270603187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603187">(Feb 03 2022 at 19:21)</a>:</h4>
<p>Considering we are still in beta Lean 4, I think this would be the best time to make such high impact user changes (as they are still quite frequent anyway). Also, do mathematicians really care that much about whether things are 0- or 1-indexed? From the fact that some things in mathlib (like the old <code>work_on_goal</code>) are 0-indexed, I would assume not much. Conversely, CS really loves things to be 0-indexed.</p>



<a name="270603377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603377">(Feb 03 2022 at 19:23)</a>:</h4>
<p>Yes!</p>



<a name="270603406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603406">(Feb 03 2022 at 19:23)</a>:</h4>
<p>A point in favor of 1-indexing for UI: the number row on a keyboard goes 1234567890</p>



<a name="270603626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603626">(Feb 03 2022 at 19:25)</a>:</h4>
<p>You will always see things like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><msub><mi>R</mi><mn>1</mn></msub><mo>×</mo><msub><mi>R</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x \in R_1 \times R_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x = (x_1, x_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, and never <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x = (x_0, x_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>



<a name="270603694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603694">(Feb 03 2022 at 19:25)</a>:</h4>
<p>Of course it doesn't matter to the user how the goals/fields/whatever are indexed internally, though.</p>



<a name="270603713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603713">(Feb 03 2022 at 19:25)</a>:</h4>
<p>I can be trained, but having the <em>first</em> index being 0 seems very weird.  If the <em>second</em> is 1, then I really wonder what has gone wrong!</p>



<a name="270603966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270603966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270603966">(Feb 03 2022 at 19:27)</a>:</h4>
<p>The problem is that there is a wide variety of things that are already necessarily  0-indexed (like arrays/lists), so special casing certain things to be 1-indexed seems like a nightmare for UX and a breeding ground for confusion.</p>



<a name="270604092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270604092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270604092">(Feb 03 2022 at 19:28)</a>:</h4>
<p>I've felt that this 0-indexing vs 1-indexing debate is simply that 1-indexing is about ordinals (first, second, third, fourth, ...) but 0-indexing is uses the underlying monoid for ordinals as an "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span>-torsor" directly (you work with displacements from the first element; that's particularly useful in C since the array itself reduces to a pointer to the first element, for example).</p>



<a name="270604258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270604258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270604258">(Feb 03 2022 at 19:29)</a>:</h4>
<p>(I appreciate languages like Ada that have sidestepped the debate entirely by letting you start your arrays at any number you might want.)</p>



<a name="270604600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270604600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270604600">(Feb 03 2022 at 19:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270603966">said</a>:</p>
<blockquote>
<p>The problem is that there is a wide variety of things that are already necessarily  0-indexed (like arrays/lists), so special casing certain things to be 1-indexed seems like a nightmare for UX and a breeding ground for confusion.</p>
</blockquote>
<p>I agree there is some possibility for confusion, but I think it's less than the confusion from (e.g.) <code>fst p = p.0</code>, even if you put aside alignment with math notation otherwise.</p>



<a name="270604658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270604658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270604658">(Feb 03 2022 at 19:32)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> I see it more as modelling structures/lists/arrays as an index function (e.g., <code>Nat -&gt; a</code> / <code>Fin size -&gt; a</code>) and thus the initial element is the base point of the index (which, for <code>Nat</code>, is <code>0</code>).</p>



<a name="270604737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270604737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270604737">(Feb 03 2022 at 19:32)</a>:</h4>
<p>Note that Julia uses 1-based indexing for arrays (from what I understand), presumably to align with mathematical practice (given that Julia is designed for scientific computation)</p>



<a name="270605169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605169">(Feb 03 2022 at 19:36)</a>:</h4>
<p>It seems that the canonical choice for CS and maths is not the same.  As a mathematician, I hope that my preferred choice is available, but I can live with never knowing if 1 means 1 or 0!</p>



<a name="270605218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605218">(Feb 03 2022 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> It doesn't have to be <code>Nat</code>, though.  You can use <code>PNat</code> (positive nats) equally well, then have a <code>PNat -&gt; Nat -&gt; PNat</code> additive structure (it's a <code>Nat</code>-torsor).  <code>Nat</code> is convenient since it's a monoid already.</p>
<p>(Incidentally, in C there is a <code>ptr -&gt; int -&gt; ptr</code> additive structure.)</p>



<a name="270605369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605369">(Feb 03 2022 at 19:37)</a>:</h4>
<p>(Sorry everyone if I'm misusing the word "torsor" here. <code>PNat</code> is to <code>Nat</code> as an affine space is to a vector space.)</p>



<a name="270605391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605391">(Feb 03 2022 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270604600">said</a>:</p>
<blockquote>
<p>confusion from (e.g.) <code>fst p = p.0</code></p>
</blockquote>
<p>I personally have never understood the choice of first <code>fst</code> and second <code>snd</code> for <code>Prod</code>. <code>lft</code> and <code>rht</code> feel more logical to me and align better with the <code>Sum</code> constructors. This is especially true when you have a type like <code>Prod (Prod a b) c)</code> and thus the <code>snd</code> of the outer <code>Prod</code> isn't really even the second element.</p>



<a name="270605662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605662">(Feb 03 2022 at 19:39)</a>:</h4>
<p>Can we start with 4 because it's lean4? <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="270605868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270605868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270605868">(Feb 03 2022 at 19:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270605391">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270604600">said</a>:</p>
<blockquote>
<p>confusion from (e.g.) <code>fst p = p.0</code></p>
</blockquote>
<p>I personally have never understood the choice of first <code>fst</code> and second <code>snd</code> for <code>Prod</code>. </p>
</blockquote>
<p>The thing is this is mathlib, not maclib--it's really really helpful for formalizing if the theorem prover language doesn't differ from the informal one in random ways.</p>



<a name="270606152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270606152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270606152">(Feb 03 2022 at 19:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270605218">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> It doesn't have to be <code>Nat</code>, though. </p>
</blockquote>
<p>True, the logical base point varies depending on the perceived mapping (e.g., you could even have something like <code>List Unit -&gt; a</code> where the base point is <code>nil</code>). However, the natural index is <code>Nat</code> (which is why they are called the natural numbers -- they are the numbers used naturally for counting/ordering). The natural numbers themselves can also be 1-indexed, but as they are not in Lean, the natural base point is 0 (in my view).</p>



<a name="270607381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270607381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270607381">(Feb 03 2022 at 19:50)</a>:</h4>
<p>Hm, the discussion deviated a little. I have a feeling that for this specific purpose of the mentioned tactics, maybe we should index both starting from 1.<br>
Would that be okay?</p>



<a name="270607601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270607601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270607601">(Feb 03 2022 at 19:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270604600">said</a>:</p>
<blockquote>
<p>The thing is this is mathlib, not maclib--it's really really helpful for formalizing if the theorem prover language doesn't differ from the informal one in random ways.</p>
</blockquote>
<p>But I explained why I felt that why immediately afterwards?  That is, the left and right terminology is used for <code>Sum</code>/<code>Or</code> in Lean. The left and right terminology is also used for <code>And</code> (which is <code>Prod</code> is simply the <code>Type</code> generalization of) and is used informally in type theory quite often as well. As far as I can tell, <code>fst</code> and <code>snd</code> is largely just a hold over from other functional languages (i.e., Haskell) which uses the same names and not due to any particular consensus in terminology in informal parlance.</p>



<a name="270607702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270607702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270607702">(Feb 03 2022 at 19:52)</a>:</h4>
<p>Right I understand that, but it simply isn't relevant.</p>



<a name="270607841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270607841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270607841">(Feb 03 2022 at 19:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270607601">said</a>:</p>
<blockquote>
<p>As far as I can tell, <code>fst</code> and <code>snd</code> is largely just a hold over from other functional languages (i.e., Haskell) which uses the same names and not due to any particular consensus in terminology in informal parlance.</p>
</blockquote>
<p>It's totally normal in math to refer to <code>y</code> in <code>p = (x, y)</code> as the second component of <code>p</code>, and it's very confusing if it's <code>p.1</code>.</p>



<a name="270607997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270607997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270607997">(Feb 03 2022 at 19:54)</a>:</h4>
<p>Maybe it's true that in an ideal world everyone would say left and right component--but they don't.</p>



<a name="270608104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270608104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270608104">(Feb 03 2022 at 19:55)</a>:</h4>
<p>Left and right also has some connotations specific to the direction of writing.</p>



<a name="270609520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270609520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270609520">(Feb 03 2022 at 20:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270607841">said</a>:</p>
<blockquote>
<p>It's totally normal in math to refer to <code>y</code> in <code>p = (x, y)</code> as the second component of <code>p</code>, and it's very confusing if it's <code>p.1</code>.</p>
</blockquote>
<p>I mean, that is really just a side effect of tuples in math being 1-indexed whereas they are 0-indexed in CS. It equivalently is very weird, in CS, if <code>(x,y)[1]</code> (and thus <code>(x,y).1</code>) is <code>x</code>. Lean 4 is not merely a language for math, it is also suppose to be general purpose language for CS. I feel like the computational-based <em>need</em> for 0-indexing in CS is a stronger motivation than the largely just convention-based <em>desire</em> for 1-indexing in math. But I am a CS person, so I am biased.</p>



<a name="270609610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270609610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270609610">(Feb 03 2022 at 20:05)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi mathvariant="double-struck">P</mi><mi>k</mi><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\mathbb{P}^n_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.972em;vertical-align:-0.2831em;"></span><span class="mord"><span class="mord mathbb">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4169em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span></span></span></span></span></span></span></span></span></span></p>



<a name="270609830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270609830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270609830">(Feb 03 2022 at 20:07)</a>:</h4>
<p>@Mac You're going against ordinals in the english language here, not math per se. <code>(x, y)</code> has two components, the first and the second, just like how in a line of people you refer to the first person in line, not the zeroth.</p>



<a name="270609953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270609953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270609953">(Feb 03 2022 at 20:08)</a>:</h4>
<p>I wonder if anyone's ever explored having a number parser where <code>1st</code>, <code>2nd</code>, <code>3rd</code>, <code>4th</code>, <code>5th</code>, and so on parse as <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code>, respectively. (You ought to be able to write <code>1th</code>, <code>2th</code>, <code>3th</code>, and so on, since requiring special cases seems unnecessary.)</p>



<a name="270610358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270610358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270610358">(Feb 03 2022 at 20:11)</a>:</h4>
<p>I still don't understand how there is a <strong>need</strong> for 0 indexing in CS at this level. Doesn't julia show that 1-indexing can be the interface of a high level language without worrying about what is happening under the hood. We are talking about indexing goals here right?</p>



<a name="270610424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270610424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270610424">(Feb 03 2022 at 20:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270609830">said</a>:</p>
<blockquote>
<p>@Mac You're going against ordinals in the english language here, not math per se.</p>
</blockquote>
<p>True, the 1-indexing in math arising from the natural use of 1-indexing in language. I am not saying 0-indexing is natural generally, I am saying that is natural in CS (for good reasons) and as Lean 4 is supposed a general purpose programming language, 0-indexing is to be reasonably expected. It is just one of those weird details about formulating things for a computer. A happy medium, I suppose, would be having two syntax for projections, one which is 0-indexed (for CS) and one which is 1-indexed (for Math).</p>



<a name="270611040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270611040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270611040">(Feb 03 2022 at 20:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270610358">said</a>:</p>
<blockquote>
<p>We are talking about indexing goals here right?</p>
</blockquote>
<p>That was my first question, yeah</p>



<a name="270611183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270611183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270611183">(Feb 03 2022 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270610358">said</a>:</p>
<blockquote>
<p>We are talking about indexing goals here right?</p>
</blockquote>
<p>Initially yes, but this lead to a discussion about the indexing of the projection syntax as many of the examples using <code>work_on_goal</code> intersected with uses of the projection syntax.</p>



<a name="270611892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270611892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270611892">(Feb 03 2022 at 20:23)</a>:</h4>
<p>Thinking very objectively, if I have three goals and I want to target the third goal, <code>work_on_goal 3</code> or <code>swap 3</code> come to my thought faster. <code>2</code> would be an indirect way of thinking to adjust to a certain system</p>



<a name="270611976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270611976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270611976">(Feb 03 2022 at 20:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270610358">said</a>:</p>
<blockquote>
<p>I still don't understand how there is a <strong>need</strong> for 0 indexing in CS at this level. Doesn't julia show that 1-indexing can be the interface of a high level language without worrying about what is happening under the hood.</p>
</blockquote>
<p>For a user who does not care about what is happening under the hood, it is true that 1-indexing is fine (and for non-CS people, more natural). It does require translation, though, which for a CS person (to whom 0-indexing is generally quite natural and preferrable), is unnecessarily cumbersome. However, this can be solved as long as there is a division in the UX such that each side can use the syntax they desire.</p>



<a name="270612208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270612208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270612208">(Feb 03 2022 at 20:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270611892">said</a>:</p>
<blockquote>
<p>Thinking very objectively, if I have three goals and I want to target the third goal, <code>work_on_goal 3</code> or <code>swap 3</code> come to my thought faster. <code>2</code> would be an indirect way of thinking to adjust to a certain system</p>
</blockquote>
<p>This may just be a result of differences in background. Having grown up in CS, my brain automatically indexes things (at least those computer-related) from 0 now, so I would naturally say <code>2</code> rather than <code>3</code>.</p>



<a name="270612549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270612549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270612549">(Feb 03 2022 at 20:27)</a>:</h4>
<p>However, since <code>work_on_goal</code> and <code>swap</code> are tactics and thus more mathematician and less CS facing, 1-indexing seems fine to me.</p>



<a name="270612688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270612688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270612688">(Feb 03 2022 at 20:28)</a>:</h4>
<p>I come from CS too, but in this context I am not thinking of the goals as a list. I'm thinking from a higher level of abstraction</p>



<a name="270613033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270613033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270613033">(Feb 03 2022 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span>  Well, I guess we just think differently in that regard. I do think of goals as list (and I have kind of assumed that is the way they are implemented).</p>



<a name="270613716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270613716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270613716">(Feb 03 2022 at 20:35)</a>:</h4>
<p>Right, that was my first bias because we're more used to use things thinking about their implementations (or hypothesizing about them). But I changed my mind throughout the discussion</p>
<p>(Also having some kind of unobvious behavior when the user provides <code>0</code> as input bugs me a little bit)</p>



<a name="270614246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270614246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270614246">(Feb 03 2022 at 20:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270609830">said</a>:</p>
<blockquote>
<p><code>(x, y)</code> has two components, the first and the second, just like how in a line of people you refer to the first person in line, not the zeroth.</p>
</blockquote>
<p>I would also like to highlight that this depends on whether one thinks of <code>(x,y)</code> as a tuple (i.e., an ordered list) or as a pair. As <code>(x,y)</code> is the syntax for a value of <code>Prod</code> (which is conceptually a pair) I would think of <code>(x,y)</code> using pair terminology. That is, it has two components: a left and right. Just like I would talk about the left and right shoe of a pair of shoes and not refer to them as my first and second shoe.</p>



<a name="270614780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270614780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270614780">(Feb 03 2022 at 20:43)</a>:</h4>
<p>I do admit that the alternative interpretation of <code>(x,y)</code> as a tuple is valid, especially as the syntax itself is structured in that way (i.e., <code>(x,y,z)</code> also exists). Without considering that syntax, though,<code>Prod.mk x y</code>, is much more naturally a pair rather than a tuple. I think the rub is that tuples in Lean (and in math) are implemented via products and thus products often inherit much of the tuple terminology even if pair terminology is more natural for the product type itself.</p>



<a name="270614925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270614925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270614925">(Feb 03 2022 at 20:44)</a>:</h4>
<p>There is also the consideration that the product type is often treated as associative in math (i.e., a distinction is not generally made between <code>(N x N) x N</code> and <code>N x (N x N)</code> -- in fact, parentheses are pretty much never used at all), making them more list like, whereas they are not in Lean and type theory.</p>



<a name="270616664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270616664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270616664">(Feb 03 2022 at 20:59)</a>:</h4>
<p>In my mind, a vector in ℝˆ3 is a list of 3 element from the product of ℝ with itself 3 times.  It is also a tuple of length 3.</p>
<p>Today might be the first time that I hear a distinction between tuples and ordered lists.</p>



<a name="270617350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270617350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270617350">(Feb 03 2022 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270616664">said</a>:</p>
<blockquote>
<p>Today might be the first time that I hear a distinction between tuples and ordered lists.</p>
</blockquote>
<p>Huh? I wasn't attempting making such a distinction. In what I was saying, a tuple <em>is</em> an ordered list. (That is, in the general sense of a list, not in the CS/functional sense of <code>List</code> -- which is an ordered list in general sense but not a tuple in the CS sense.)</p>



<a name="270618138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270618138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270618138">(Feb 03 2022 at 21:10)</a>:</h4>
<p>Ah, then the distinction is between ordered pairs and lists of length 2 that I had never heard before! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="270619796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270619796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270619796">(Feb 03 2022 at 21:23)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> ah, thanks for the clarification. The distinction I am making is one abstraction of a pair is that of composite with two elements: a left and a right (e.g., a pair of shoes or gloves). Unlike a fully unordered pair (i.e., a set/multiset of length 2), it has distinguish elements, but unlike a fully ordered pair (i.e., a list of length 2), it is not numerically ordered (i.e., it could be ordered from left to right or right to left). Essentially, such a pair is a special case of a key-value map of length 2 (with keys left and right) as opposed to being a simple ordered list of length 2. I am then asserting that such an abstraction is closer to that of <code>Prod</code> (and <code>PProd</code>, <code>And</code>, etc.) than the ordered pair / list of length 2 interpretation. This is also more true for the type itself than the tuple syntax (i.e., <code>(x,y)</code> or <code>(x,y,z)</code>) for constructing values of the type (which is more akin to the list interpretation).</p>



<a name="270621256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270621256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270621256">(Feb 03 2022 at 21:34)</a>:</h4>
<p>Ok, while I do not understand the key-value map, the distinction that you are making is probably what is sometime denoted as marking or labelling in mathematics.  "The" symmetric group on <code>n</code> symbols does not care what the symbols are.  Still, in maths it is customary to use <code>{1,...,n}</code> for a set with <code>n</code> elements on which it acts, rather than <code>{0,...,n-1}</code>.</p>
<p>I understand that this is just a matter of convention and that CS people probably like their symmetric groups to act on <code>{0,...n-1}</code>.  The maths convention is different, though.</p>



<a name="270621469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270621469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270621469">(Feb 03 2022 at 21:35)</a>:</h4>
<p>Anyway, I'm off to bed now!  I honestly think, though that there is no "correct" answer to this and that either solution is workable! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="270621583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270621583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270621583">(Feb 03 2022 at 21:36)</a>:</h4>
<p>Yeah, I largely agree. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="270635138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270635138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270635138">(Feb 03 2022 at 23:29)</a>:</h4>
<p>A backport PR to make <code>work_on_goal</code> be 1-indexed is now available at <a href="https://github.com/leanprover-community/mathlib/pull/11813">#11813</a></p>



<a name="270653868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270653868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270653868">(Feb 04 2022 at 01:21)</a>:</h4>
<p>I once published a paper on permutation patterns where my permutations were of integers from 0 to n-1 not 1 to n.</p>



<a name="270660726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270660726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270660726">(Feb 04 2022 at 02:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270609953">said</a>:</p>
<blockquote>
<p>I wonder if anyone's ever explored having a number parser where <code>1st</code>, <code>2nd</code>, <code>3rd</code>, <code>4th</code>, <code>5th</code>, and so on parse as <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code>, respectively. (You ought to be able to write <code>1th</code>, <code>2th</code>, <code>3th</code>, and so on, since requiring special cases seems unnecessary.)</p>
</blockquote>
<p>I like this idea. Which would mean that you can either write <code>work_on_goal 0</code> or <code>work_on_goal 1th</code>, and the effect would be the same. And maybe even, if <code>p : X × Y</code> you could write <code>p.0 = p.1th := rfl</code>. Or would that be completely weird?</p>



<a name="270660945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270660945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270660945">(Feb 04 2022 at 02:49)</a>:</h4>
<p>Mario made it <a href="https://github.com/leanprover-community/mathlib/blob/e6393be1a75834b688f9ca42ebcc6f34e363f3dc/src/tactic/interactive.lean#L108">fail with <code>0</code></a> so I'm replicating it. But it's easy to change if we change our minds</p>



<a name="270663509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270663509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270663509">(Feb 04 2022 at 03:32)</a>:</h4>
<p>I quite like <span class="user-mention" data-user-id="112680">@Johan Commelin</span>'s idea.</p>



<a name="270671776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270671776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270671776">(Feb 04 2022 at 06:02)</a>:</h4>
<p>It's not my idea. Kyle mentioned it first.</p>



<a name="270677913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270677913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270677913">(Feb 04 2022 at 07:51)</a>:</h4>
<p>I assert boldly that a better user experience than indexing numerically might be one where Lean magicked up <em>names</em> for each goal (e.g. after <code>refine foo _ _</code>, it could name the new goals after the arguments to <code>foo</code>), so that you could at least refer to them by name rather than by index into some unguessable state. Absolutely no idea whether this would be easy to add.</p>



<a name="270683409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270683409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270683409">(Feb 04 2022 at 08:39)</a>:</h4>
<p>That already exists, that's the <code>case</code> tactic</p>



<a name="270702395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/270702395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#270702395">(Feb 04 2022 at 11:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270660726">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270609953">said</a>:</p>
<blockquote>
<p>I wonder if anyone's ever explored having a number parser where <code>1st</code>, <code>2nd</code>, <code>3rd</code>, <code>4th</code>, <code>5th</code>, and so on parse as <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code>, respectively. (You ought to be able to write <code>1th</code>, <code>2th</code>, <code>3th</code>, and so on, since requiring special cases seems unnecessary.)</p>
</blockquote>
<p>And maybe even, if <code>p : X × Y</code> you could write <code>p.0 = p.1th := rfl</code>. Or would that be completely weird?</p>
</blockquote>
<p>TBH, I think it's completely weird--code has to be read as well as written, so someone who prefers <code>p.1</code> can't ignore that <code>p.1th</code> has the other meaning (or vice versa).</p>



<a name="274119364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60work_on_goal%60%20vs%20%60swap%60/near/274119364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60.html#274119364">(Mar 04 2022 at 12:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60/near/270590150">said</a>:</p>
<blockquote>
<p>I don't know off the top of my head if there are any tactics in core that take a goal number as argument.  But if there are we should also be consistent with the core tactics.</p>
</blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/conv.interactive.for">docs#conv.interactive.for</a> does (<a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#conv:%20for">https://leanprover-community.github.io/mathlib_docs/tactics.html#conv:%20for</a>), but already starts at one</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>