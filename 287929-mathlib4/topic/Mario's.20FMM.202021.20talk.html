---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html">Mario's FMM 2021 talk</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247720236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720236">(Jul 30 2021 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/FMM.202021/near/247701918">said</a>:</p>
<blockquote>
<p>Here are my slides: <a href="/user_uploads/3121/sl0pTs6l5urs6BNmxcuu4nSM/Porting_Mathlib.pdf">Porting_Mathlib.pdf</a></p>
</blockquote>
<p>My internet access here doesn't allow me to attend Zoom talks. Can anyone reveal whether Mario answered any questions about the porting schedule?</p>



<a name="247720388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720388">(Jul 30 2021 at 15:08)</a>:</h4>
<p>I estimated one year, but there is a large variance on that. There is nothing like a schedule in terms of milestones</p>



<a name="247720431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720431">(Jul 30 2021 at 15:09)</a>:</h4>
<p>One year from now?</p>



<a name="247720638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720638">(Jul 30 2021 at 15:10)</a>:</h4>
<p>It's hard to tell from the slides: did you decide on one strategy (maybe mixing several tools)?</p>



<a name="247720641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720641">(Jul 30 2021 at 15:10)</a>:</h4>
<p>less seems plausible, but I still don't know what some stages of the process will actually look like</p>



<a name="247720696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720696">(Jul 30 2021 at 15:10)</a>:</h4>
<p>What does the grey color mean on Page 26?</p>



<a name="247720790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247720790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247720790">(Jul 30 2021 at 15:11)</a>:</h4>
<p>At that point I said that <code>olean-port</code> and <code>lean3-port</code> are strictly dominated by <code>synport</code> because it has better information to work from</p>



<a name="247721078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721078">(Jul 30 2021 at 15:12)</a>:</h4>
<p>and the plan involves all three of the remaining methods</p>



<a name="247721112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721112">(Jul 30 2021 at 15:12)</a>:</h4>
<p>the next slide tries to summarize how they interact</p>



<a name="247721240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721240">(Jul 30 2021 at 15:13)</a>:</h4>
<p>Daniel has argued that the current <code>binport</code> in the mathport repo is actually somewhere between what I called <code>olean-port</code> and <code>binport</code></p>



<a name="247721248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721248">(Jul 30 2021 at 15:13)</a>:</h4>
<p>I really think we shouldn't be afraid of "stop the world and port everything". We simply have to reach a consensus among all mathlib maintainers to simply stop merging stuff. I'm pretty sure everyone is convinced this is extremely important, we are simply waiting for your signal.</p>



<a name="247721303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721303">(Jul 30 2021 at 15:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk/near/247720638">said</a>:</p>
<blockquote>
<p>It's hard to tell from the slides: did you decide on one strategy (maybe mixing several tools)?</p>
</blockquote>
<p>We have not converged on a specific roadmap yet. The solution will very likely involve a mix of synport, binport, delabbing defs/types from binport, running large-scale proof search to fix broken proofs, and then a (still unclear how herculean) manual process at the end. I think there is good chance the whole process takes much less than a year, but TBD</p>



<a name="247721389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721389">(Jul 30 2021 at 15:14)</a>:</h4>
<p>as long as we can do that sufficiently quickly it's not a bad strategy. But we need the porting tools to be ready to make sure it is straightforward</p>



<a name="247721554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721554">(Jul 30 2021 at 15:16)</a>:</h4>
<p>Most people expect it will be a lot of manual work anyway. The key is whether this can be parallelized. It's not only about having several people working in parallel, it's about how much things will diverge (we can fear the early files will force so many variations that the late files will have to be rewritten from scratch).</p>



<a name="247721655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721655">(Jul 30 2021 at 15:16)</a>:</h4>
<p>I would really like to avoid that</p>



<a name="247721677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721677">(Jul 30 2021 at 15:16)</a>:</h4>
<p>Of course I understand we all want to avoid that.</p>



<a name="247721749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721749">(Jul 30 2021 at 15:17)</a>:</h4>
<p>We have some really promising results, it might actually be largely automatic</p>



<a name="247721845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721845">(Jul 30 2021 at 15:18)</a>:</h4>
<p>Anyway, my point is that once you get the tactics working in Lean 4 and you'll be happy with your porting tool then I'm sure we can provide a lot of forces for grunt work.</p>



<a name="247721851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721851">(Jul 30 2021 at 15:18)</a>:</h4>
<p>I don't think there's any way we can avoid a massive cleanup operation afterwards.  There's lots of Lean 3-specific workaround and hacks in mathlib after all.</p>



<a name="247721856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721856">(Jul 30 2021 at 15:18)</a>:</h4>
<p>The examples on my slides were mostly autogenerated, except for formatting and name resolution (which isn't hooked up yet but will eventually be part of synport)</p>



<a name="247721958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721958">(Jul 30 2021 at 15:19)</a>:</h4>
<p>the output was formatted, but it doesn't quite hit the style guide yet</p>



<a name="247721983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247721983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247721983">(Jul 30 2021 at 15:19)</a>:</h4>
<p>Mario, how much MSR time do you still have?</p>



<a name="247722160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722160">(Jul 30 2021 at 15:20)</a>:</h4>
<p>On Page 29, do we have to use the obfuscated Lean 4 forall or can we reintroduced the readable notation, at least in mathlib?</p>



<a name="247722299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722299">(Jul 30 2021 at 15:21)</a>:</h4>
<p>It's even worse on the next page <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="247722411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722411">(Jul 30 2021 at 15:22)</a>:</h4>
<p>until 27 Aug</p>



<a name="247722485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722485">(Jul 30 2021 at 15:23)</a>:</h4>
<p>Oh, that's too soon. I should stop writing questions and let you work.</p>



<a name="247722524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722524">(Jul 30 2021 at 15:23)</a>:</h4>
<p>Right now there is a hole in synport where we insert the "DArrow heuristic" - once types become available it will be easier to use forall for props</p>



<a name="247722633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722633">(Jul 30 2021 at 15:24)</a>:</h4>
<p>it is capable of producing both ATM</p>



<a name="247722669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722669">(Jul 30 2021 at 15:24)</a>:</h4>
<p>we could just use forall everywhere too</p>



<a name="247722693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722693">(Jul 30 2021 at 15:24)</a>:</h4>
<p>but I don't know if people feel Pi should be Pi</p>



<a name="247722715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722715">(Jul 30 2021 at 15:24)</a>:</h4>
<p>Mathematicians would definitely prefer forall everywhere.</p>



<a name="247722761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722761">(Jul 30 2021 at 15:25)</a>:</h4>
<p>lean 3 uses Pi when the codomain is a type</p>



<a name="247722790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722790">(Jul 30 2021 at 15:25)</a>:</h4>
<p>For us it makes sense that forall and Pi are different, but if we need to choose only one then it's definitely forall</p>



<a name="247722955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247722955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247722955">(Jul 30 2021 at 15:26)</a>:</h4>
<p>also, this is one of the cases where lean forgets which is which very early in parsing so that the AST doesn't record it; if we modify lean to keep track of the distinction we can just use forall iff the user used forall in lean 3, which will probably yield the best results</p>



<a name="247723079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723079">(Jul 30 2021 at 15:27)</a>:</h4>
<p>another case is <code>lemma</code> vs <code>theorem</code>, which you will note also shows up in the example. Lean 3 forgets which is which right in the tokenizer, so the parser doesn't export the info</p>



<a name="247723176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723176">(Jul 30 2021 at 15:28)</a>:</h4>
<p>But I have heard it said that mathlib's lemma vs theorem markings are way off anyway so maybe preserving them isn't worth it</p>



<a name="247723182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723182">(Jul 30 2021 at 15:28)</a>:</h4>
<p>Honestly that lemma vs theorem information is not worth fighting for. Our current mathlib is a mess here.</p>



<a name="247723297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723297">(Jul 30 2021 at 15:29)</a>:</h4>
<p>also <code>fun</code> vs <code>\lam</code> and <code>-&gt;</code> vs <code>\r</code></p>



<a name="247723706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723706">(Jul 30 2021 at 15:32)</a>:</h4>
<p>You already know what mathematicians want (no ascii art, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>↦</mo></mrow><annotation encoding="application/x-tex">\mapsto</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mrel">↦</span></span></span></span>).</p>



<a name="247723707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247723707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247723707">(Jul 30 2021 at 15:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk/near/247721845">said</a>:</p>
<blockquote>
<p>Anyway, my point is that once you get the tactics working in Lean 4 and you'll be happy with your porting tool then I'm sure we can provide a lot of forces for grunt work.</p>
</blockquote>
<p>We will not be shy about enlisting this help when it is appropriate. Right now there is still both (a) a lot of low-hanging fruit to improve the automatic part and (b) still too many hard-to-diagnose issues when using the binported oleans for it to be worth having non-devs experimenting with them yet. We may be within ~1 week of solving enough elab issues for it to be extremely useful if users start trying to patch random synport-importing-binport files and reporting issues they hit.</p>



<a name="247740132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247740132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247740132">(Jul 30 2021 at 17:45)</a>:</h4>
<p>So lemme get this straight: is there any way at all I can have mathlib3's <code>Scheme</code> in Lean 4 right now?</p>



<a name="247741275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247741275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247741275">(Jul 30 2021 at 17:55)</a>:</h4>
<p>You can get a translated <code>Mathlib.scheme</code> in lean 4 right now with binport; a lean 4 file that appears to be defining <code>Scheme</code> but actually has lots of errors is coming soonish</p>



<a name="247741407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247741407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247741407">(Jul 30 2021 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Yes, these <code>.olean</code>s work with Lean4 master: <a href="https://github.com/dselsam/mathport/releases/tag/v0.0.0.0">https://github.com/dselsam/mathport/releases/tag/v0.0.0.0</a> I can also run the same pipeline on other repos e.g. liquid if it would be useful. <strong>HOWEVER</strong> when trying to use these oleans, you will currently hit subtle yet-to-be-addressed issues elaborating new terms. We are making rapid progress here and the experience should be much better in ~1 week.</p>



<a name="247741944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247741944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247741944">(Jul 30 2021 at 18:00)</a>:</h4>
<p>Most of the remaining issues only emerge once the typeclass instances start getting insanely big later in the library. This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Mathlib.Data.Nat.Prime</span>

<span class="kn">namespace</span> <span class="n">Nat</span>

<span class="kd">theorem</span> <span class="n">exists_infinite_primes_alt</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">p</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">Prime</span> <span class="n">p</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">minFac</span> <span class="o">(</span><span class="n">n.factorial</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
  <span class="k">have</span> <span class="n">f1</span> <span class="o">:</span> <span class="n">n.factorial</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≠</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">ne_of_gt</span> <span class="bp">$</span> <span class="n">succ_lt_succ'</span> <span class="bp">$</span> <span class="n">factorial_pos</span> <span class="n">n</span>
  <span class="k">have</span> <span class="n">pp</span> <span class="o">:</span> <span class="n">Prime</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">min_fac_prime</span> <span class="n">f1</span>
  <span class="k">have</span> <span class="n">np</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">le_of_not_ge</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">h</span> <span class="bp">=&gt;</span>
    <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∣</span> <span class="n">n.factorial</span> <span class="o">:=</span> <span class="n">dvd_factorial</span> <span class="o">(</span><span class="n">min_fac_pos</span> <span class="n">_</span><span class="o">)</span> <span class="n">h</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∣</span> <span class="mi">1</span> <span class="o">:=</span> <span class="o">(</span><span class="n">Nat.dvd_add_iff_right</span> <span class="n">h₁</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">min_fac_dvd</span> <span class="n">_</span><span class="o">)</span>
    <span class="n">pp.not_dvd_one</span> <span class="n">h₂</span>
  <span class="o">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">np</span><span class="o">,</span> <span class="n">pp</span><span class="o">⟩</span>

<span class="kd">end</span> <span class="n">Nat</span>
</code></pre></div>
<p>Note the annoying prime in the name <code>succ_lt_succ'</code> -- this is due to a clash with the existing one. Still hoping somebody will backport <a href="#narrow/stream/270676-lean4/topic/backporting.20Nat.2ELe/near/246798442">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/backporting.20Nat.2ELe/near/246798442</a></p>



<a name="247742437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247742437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247742437">(Jul 30 2021 at 18:03)</a>:</h4>
<p>I don't really understand what it means to backport Nat.le . Does this mean changing the definition of <code>nat.le</code> in Lean 3 or mathlib or wherever it is to something different and then picking up all the pieces?</p>



<a name="247742724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Mario%27s%20FMM%202021%20talk/near/247742724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Mario's.20FMM.202021.20talk.html#247742724">(Jul 30 2021 at 18:06)</a>:</h4>
<p>Yes, it means somehow making Lean's <code>nat.le</code> def-eq-compatible with Lean4's. I suspect the refactor can be contained after patching a small number of proofs and won't leak very far out of the file defining it.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>