---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html">my PRs that need help</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="321395334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/321395334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#321395334">(Jan 14 2023 at 18:31)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/1464">mathlib4#1464</a>: universe issues, should be straightforward for someone who understands universe resolution issues. Mathport complains about suspect translations and proofs later fail due to universe comparison issues.<br>
<a href="https://github.com/leanprover-community/mathlib4/pull/1216">mathlib4#1216</a>: three issues, one needs a replacement for <code>change</code>…<code>with</code>, one is a proof that's backed into a corner, last is a type resolution issue.<br>
<a href="https://github.com/leanprover-community/mathlib4/pull/1179">mathlib4#1179</a>:  one proof where the goal state is too unfolded, to fields with motives, and <code>rw</code>s that should work don't, two <code>generalize_proofs</code> that are broken with <code>unknown free variable</code>,  two proofs that also seem to be oddly unfolded, and a <code>by tidy</code> proof where my attempt to replicate the <code>tidy?</code> output gets to the same "too unfolded" state.<br>
<a href="https://github.com/leanprover-community/mathlib4/pull/809">mathlib4#809</a>: I think I should delete this one -- waiting on a <code>higher_order</code> attr, and no work lost.</p>



<a name="321417568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/321417568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#321417568">(Jan 14 2023 at 23:09)</a>:</h4>
<p>(deleted <a href="https://github.com/leanprover-community/mathlib4/pull/809">mathlib4#809</a>)</p>



<a name="322510926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322510926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322510926">(Jan 20 2023 at 13:19)</a>:</h4>
<p>Just about to get on the tube so thought I'd try one of these on the journey (I don't have internet underground so it's hard to switch branches). <a href="https://github.com/leanprover-community/mathlib4/pull/1464">mathlib4#1464</a> seems to have been put on the queue and then fell off again? Bors failed for some reason? Are <a href="https://github.com/leanprover-community/mathlib4/pull/1216">mathlib4#1216</a> and <a href="https://github.com/leanprover-community/mathlib4/pull/1179">mathlib4#1179</a> still in the same state as above?</p>



<a name="322511319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322511319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322511319">(Jan 20 2023 at 13:21)</a>:</h4>
<p>gaargh does <code>lake exe cache get</code> not work on 1179 because it's too old or something? Can this be fixed by merging master or rebasing master or whatever you're supposed to do? (note: I'll not do it, I'll just look at 1216)</p>



<a name="322536690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322536690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322536690">(Jan 20 2023 at 15:11)</a>:</h4>
<p>1216 (data.seq.computation) I managed to fix one of the errors; I pushed. I'm not sure if I care to diagnose why things had changed; I left a porting note. One issue was that Lean 3 <code>foo._match_1</code> and Lean 4 <code>Foo.match_1</code> had totally different types (I mean widely different) when foo=<code>corec.F</code>, but mathport or you had aligned them anyway.</p>



<a name="322562485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322562485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322562485">(Jan 20 2023 at 17:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help/near/322510926">said</a>:</p>
<blockquote>
<p>Just about to get on the tube so thought I'd try one of these on the journey (I don't have internet underground so it's hard to switch branches). <a href="https://github.com/leanprover-community/mathlib4/pull/1464">mathlib4#1464</a> seems to have been put on the queue and then fell off again? Bors failed for some reason? Are <a href="https://github.com/leanprover-community/mathlib4/pull/1216">mathlib4#1216</a> and <a href="https://github.com/leanprover-community/mathlib4/pull/1179">mathlib4#1179</a> still in the same state as above?</p>
</blockquote>
<p>There was a build failure due to failure to get cache, and I rebuilt, but realized I needed to kick bors again</p>



<a name="322567656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322567656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322567656">(Jan 20 2023 at 17:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help/near/322536690">said</a>:</p>
<blockquote>
<p>1216 (data.seq.computation) I managed to fix one of the errors; I pushed. I'm not sure if I care to diagnose why things had changed; I left a porting note. One issue was that Lean 3 <code>foo._match_1</code> and Lean 4 <code>Foo.match_1</code> had totally different types (I mean widely different) when foo=<code>corec.F</code>, but mathport or you had aligned them anyway.</p>
</blockquote>
<p><code>_match_1</code> just isn't a thing in Lean 4; I switched to <code>.match_1</code> so I could see what the issues are, but my conclusion was that the whole thing needed to be redone...</p>



<a name="322578481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322578481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322578481">(Jan 20 2023 at 17:47)</a>:</h4>
<p>OK, I fixed one more issue (<code>intros</code> in Lean 3 behaves differently in Lean 4 and requires careful comparison in both sides to get everything right).</p>
<p>Down to a single issue....</p>



<a name="322583789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322583789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322583789">(Jan 20 2023 at 18:07)</a>:</h4>
<p>I truly don't understand the last issue -- all the types line up, there must be some autoimplicit issues, but none of the tricks I know work....</p>



<a name="322603146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322603146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322603146">(Jan 20 2023 at 19:53)</a>:</h4>
<p>Higher unification is failing in Lean 4 when it worked in Lean 3 -- this seems to be a general regression where unification doesn't work as well in Lean 4. I'm working on a fix.</p>



<a name="322606504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322606504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322606504">(Jan 20 2023 at 20:14)</a>:</h4>
<p>Pushed! <a href="https://github.com/leanprover-community/mathlib4/pull/1216">mathlib4#1216</a> now compiles.</p>



<a name="322607177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322607177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322607177">(Jan 20 2023 at 20:17)</a>:</h4>
<p>I'm building <a href="https://github.com/leanprover-community/mathlib4/pull/1179">mathlib4#1179</a> from scratch just like the old days. Does someone who knows the difference between merge and rebase and knows which one is the right one to do, want to merge/rebase master onto that branch, namely <code>feat-port-data.pfun</code>?</p>



<a name="322613645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322613645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322613645">(Jan 20 2023 at 20:54)</a>:</h4>
<p>Down to two lints, one [both?] of which is/are incorrect:</p>
<p>In <code>LiftRelRec.lem</code> the linter complains that in <code>have h := h HC</code>, but <code>h</code> is reverted then intro'd. Seems like a linter bug, but how do I tell the linter to ignore this?</p>
<p>In <code>lift_rel_pure</code> the linter wants to use <code>lift_rel_pure_right</code> to simplify the rhs of the lemma, but I think the very point of the lemma is to express a core invariance of <code>LiftRel</code> and <code>lift_rel_pure_right</code> is a means to an end here.</p>



<a name="322619313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322619313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322619313">(Jan 20 2023 at 21:28)</a>:</h4>
<p>&amp; now that I think about it, it should probably be <code>liftRel_pure</code> :-)</p>



<a name="322620816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322620816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322620816">(Jan 20 2023 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help/near/322613645">said</a>:</p>
<blockquote>
<p>In <code>LiftRelRec.lem</code> the linter complains that in <code>have h := h HC</code>, but <code>h</code> is reverted then intro'd. Seems like a linter bug, but how do I tell the linter to ignore this?</p>
</blockquote>
<p>The linter was right, actually.</p>



<a name="322622018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322622018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322622018">(Jan 20 2023 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help/near/322613645">said</a>:</p>
<blockquote>
<p>In <code>lift_rel_pure</code> the linter wants to use <code>lift_rel_pure_right</code> to simplify the rhs of the lemma, but I think the very point of the lemma is to express a core invariance of <code>LiftRel</code> and <code>lift_rel_pure_right</code> is a means to an end here.</p>
</blockquote>
<p><code>nolint</code>'d to push to review.</p>



<a name="322639477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322639477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322639477">(Jan 20 2023 at 23:59)</a>:</h4>
<p>For <a href="https://github.com/leanprover-community/mathlib4/pull/1179">mathlib4#1179</a> it might be the case that the reason you had to add <code>noncomputable</code> in the def of <code>fix</code> on line 255 (something to do with WellFounded not reducing? I don't really understand this stuff) is the same reason why the proof of <code>mem_fix_iff</code> 15 lines later doesn't work. The chaos starts right on the first line <code>let ⟨h₁, h₂⟩ := Part.mem_assert_iff.1 h</code> --the lean 4 h_2 has several Eq.ndrec's in which aren't present in Lean 3. I can't figure this one out.</p>



<a name="322639550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322639550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322639550">(Jan 20 2023 at 23:59)</a>:</h4>
<p>It would be great if someone could make this PR work with caching without messing up the git history but I don't know how to do that either.</p>



<a name="322639766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322639766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322639766">(Jan 21 2023 at 00:01)</a>:</h4>
<p>It does now...</p>



<a name="322639808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322639808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322639808">(Jan 21 2023 at 00:01)</a>:</h4>
<p><span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span>  did the git magic.</p>



<a name="322639924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322639924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322639924">(Jan 21 2023 at 00:02)</a>:</h4>
<p>Thanks! The issue is that <code>simp [e] at h₃</code> no longer succeeds; the motive is not type correct in mathlib4 presumably because everything is so much more complicated than the corresponding mathlib3 term.</p>



<a name="322640073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/my%20PRs%20that%20need%20help/near/322640073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/my.20PRs.20that.20need.20help.html#322640073">(Jan 21 2023 at 00:04)</a>:</h4>
<p>This is probably the same issue that's borking <code>fixInduction'_stop</code> and <code>fixInduction'_fwd</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>