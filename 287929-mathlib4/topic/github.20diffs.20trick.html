---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/github.20diffs.20trick.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html">github diffs trick</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="239939137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239939137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239939137">(May 23 2021 at 09:55)</a>:</h4>
<p><a href="/user_uploads/3121/cdGycykXFEg2nMKCcJmocrY9/issue2.png">issue2.png</a> <br>
<a href="/user_uploads/3121/3V20_J7NE7irNjBJaZsP3vxa/issue1.png">issue1.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/cdGycykXFEg2nMKCcJmocrY9/issue2.png" title="issue2.png"><img src="/user_uploads/3121/cdGycykXFEg2nMKCcJmocrY9/issue2.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/3V20_J7NE7irNjBJaZsP3vxa/issue1.png" title="issue1.png"><img src="/user_uploads/3121/3V20_J7NE7irNjBJaZsP3vxa/issue1.png"></a></div><p>This sort of thing is happening when I make mathlib4 PRs because when I edit mathlib4 files VS Code isn't clearing up after me, removing spaces at the end of lines and adding a newline at the end of a file, right? I also think that this doesn't happen when I edit mathlib3 files, because someone added a clever tweak to a config file. Am I talking nonsense or is there a trick we're currently missing?</p>



<a name="239939643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239939643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239939643">(May 23 2021 at 10:04)</a>:</h4>
<p>This looks like your editor is <em>fixing</em> bad whitespace in mathlib4, which I guess it didn't do in 3</p>



<a name="239940592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239940592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239940592">(May 23 2021 at 10:21)</a>:</h4>
<p>Yes, but my editor also added those bad whitespaces! I suspect I fixed them manually, possibly by accident.</p>



<a name="239942588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239942588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239942588">(May 23 2021 at 10:57)</a>:</h4>
<p>I added the <code>.vscode</code> directory to the mathlib4 repository a while back. It tells VSCode to normalize whitespace, exactly according to the conventions mathlib uses. I suspect what happened is that commits before I added this had random whitespace, and you're now seeing things slowly come back to match the conventions.</p>



<a name="239942597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239942597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239942597">(May 23 2021 at 10:57)</a>:</h4>
<p>If this is annoying, we could open and resave every file in VScode, I guess.</p>



<a name="239943671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239943671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239943671">(May 23 2021 at 11:16)</a>:</h4>
<p>I see! So the problem will go away on its own now then. Thanks!</p>



<a name="239945107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239945107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239945107">(May 23 2021 at 11:44)</a>:</h4>
<p>you might also want to disable whitespace changes:</p>
<p><a href="/user_uploads/3121/b4ZrHIgqhjkUs_7vTwqCxddy/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/b4ZrHIgqhjkUs_7vTwqCxddy/image.png" title="image.png"><img src="/user_uploads/3121/b4ZrHIgqhjkUs_7vTwqCxddy/image.png"></a></div>



<a name="239949837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239949837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239949837">(May 23 2021 at 13:00)</a>:</h4>
<p>Also pre-commit (<a href="https://pre-commit.com/hooks.html">https://pre-commit.com/hooks.html</a>) is quite nice. It can catch or autofix (either locally or in CI) these and other kinds of things. (E.g. rather than manually opening and closing vscode, running <code>pre-commit run --all-files</code> with a pre-commit config that prevented trailing whitespace will go and fix all the files in the repo).</p>



<a name="239952765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239952765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239952765">(May 23 2021 at 13:49)</a>:</h4>
<p>Note that you can append <code>?w=1</code> to a pull request URL in GitHub to see the diff without whitespace changes, e.g. <a href="https://github.com/leanprover-community/mathlib/pull/7701/files?w=1">https://github.com/leanprover-community/mathlib/pull/7701/files?w=1</a> (not that that PR actually contains any whitespace changes)</p>



<a name="239952828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/github%20diffs%20trick/near/239952828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/github.20diffs.20trick.html#239952828">(May 23 2021 at 13:50)</a>:</h4>
<p>(same as the UI option just above, but easier to type)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>