---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/commit.20convention.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html">commit convention</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="312937858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/312937858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#312937858">(Nov 29 2022 at 21:05)</a>:</h4>
<p>PSA: The commit / PR title convention for mathlib4 is to use <code>feat: desc</code>/ <code>chore: desc</code> /  <code>refactor: desc</code> /  <code>fix: desc</code>. We no longer use  <code>feat(file/name): desc</code>, if you want to include a file name then you should work it into the description. For port commits, my recommendation is <code>feat: port Data.Nat.Basic</code>.</p>



<a name="313107199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313107199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313107199">(Nov 30 2022 at 17:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/commit.20convention/near/312937858">said</a>:</p>
<blockquote>
<p>PSA: The commit / PR title convention for mathlib4 is to use <code>feat: desc</code>/ <code>chore: desc</code> /  <code>refactor: desc</code> /  <code>fix: desc</code>. We no longer use  <code>feat(file/name): desc</code>, if you want to include a file name then you should work it into the description. For port commits, my recommendation is <code>feat: port Data.Nat.Basic</code>.</p>
</blockquote>
<p>I seem to have scrolled past this, so I'll bump it in case anyone else did as well</p>



<a name="313107957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313107957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313107957">(Nov 30 2022 at 17:07)</a>:</h4>
<p>Sounds like something we could write CI for</p>



<a name="313119305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313119305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313119305">(Nov 30 2022 at 17:59)</a>:</h4>
<p>Been there, done that! <a href="https://github.com/leanprover/lean4/blob/master/.github/workflows/pr.yml">https://github.com/leanprover/lean4/blob/master/.github/workflows/pr.yml</a></p>



<a name="313119602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313119602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313119602">(Nov 30 2022 at 18:00)</a>:</h4>
<p>I'll move it to mathlib4</p>



<a name="313120077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313120077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313120077">(Nov 30 2022 at 18:02)</a>:</h4>
<p>Oh, hmm, I don't like it, I think we need to be more flexible.</p>



<a name="313120113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313120113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313120113">(Nov 30 2022 at 18:02)</a>:</h4>
<p>This should read the PR description, not look at any commit messages.</p>



<a name="313120229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313120229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313120229">(Nov 30 2022 at 18:03)</a>:</h4>
<p>For mathlib(4), it is very common that people submit PRs with very complicated commit histories, particularly because it is common to branch off other open PRs to add further work.</p>



<a name="313120458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313120458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313120458">(Nov 30 2022 at 18:04)</a>:</h4>
<p>And many contributors don't use rebase or squash at all.</p>



<a name="313121275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313121275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313121275">(Nov 30 2022 at 18:07)</a>:</h4>
<p>If that CI runs on the bors batch it will be enough</p>



<a name="313121457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313121457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313121457">(Nov 30 2022 at 18:08)</a>:</h4>
<p>It will rip the batches into little pieces if you're not careful, but it should at least do so instantly</p>



<a name="313121997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313121997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313121997">(Nov 30 2022 at 18:11)</a>:</h4>
<p>But it's way too late to be complaining then.</p>



<a name="313122052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/commit%20convention/near/313122052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/commit.20convention.html#313122052">(Nov 30 2022 at 18:11)</a>:</h4>
<p>Getting stuff through bors is already far too slow, we can't add anything that throws up delays at the last moment.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>