---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html">Algebra.BigOperators.Basic mathlib4#1628</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="321831758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321831758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321831758">(Jan 17 2023 at 13:38)</a>:</h4>
<p>Work started. PR is at <a href="https://github.com/leanprover-community/mathlib4/pull/1628">mathlib4#1628</a>.</p>



<a name="321832593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321832593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321832593">(Jan 17 2023 at 13:42)</a>:</h4>
<p>Aahrg, immediately stuck on notation</p>



<a name="321836217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321836217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321836217">(Jan 17 2023 at 13:58)</a>:</h4>
<p>I'm currently adding <code>#align</code> for all the additivized versions.</p>



<a name="321836258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321836258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321836258">(Jan 17 2023 at 13:58)</a>:</h4>
<p>If someone can get the 4 notation lines at the top of the file working, that would be great.</p>



<a name="321841503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321841503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321841503">(Jan 17 2023 at 14:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- mathport name: finset.sum_univ</span>
<span class="c1">-- scoped[BigOperators] -- Porting note: `notation3` doesn't mesh with `scoped[Foo]`</span>
<span class="n">notation3</span><span class="s2">"∑ "</span><span class="o">(</span><span class="bp">...</span><span class="o">)</span><span class="s2">", "</span><span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Finset.sum</span> <span class="n">Finset.univ</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">r</span>

<span class="c1">-- mathport name: finset.prod_univ</span>
<span class="c1">-- scoped[BigOperators] -- Porting note: `notation3` doesn't mesh with `scoped[Foo]`</span>
<span class="n">notation3</span><span class="s2">"∏ "</span><span class="o">(</span><span class="bp">...</span><span class="o">)</span><span class="s2">", "</span><span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Finset.prod</span> <span class="n">Finset.univ</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">r</span>

<span class="c1">-- mathport name: finset.sum</span>
<span class="c1">-- scoped[BigOperators] -- Porting note: `notation3` doesn't mesh with `scoped[Foo]`</span>
<span class="n">notation3</span><span class="s2">"∑ "</span><span class="o">(</span><span class="bp">...</span><span class="o">)</span><span class="s2">" in "</span><span class="n">s</span><span class="s2">", "</span><span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Finset.sum</span> <span class="n">s</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">r</span>

<span class="c1">-- mathport name: finset.prod</span>
<span class="c1">-- scoped[BigOperators] -- Porting note: `notation3` doesn't mesh with `scoped[Foo]`</span>
<span class="n">notation3</span><span class="s2">"∏ "</span><span class="o">(</span><span class="bp">...</span><span class="o">)</span><span class="s2">" in "</span><span class="n">s</span><span class="s2">", "</span><span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Finset.prod</span> <span class="n">s</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">r</span>
</code></pre></div>
<p>works, for now</p>



<a name="321844832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321844832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321844832">(Jan 17 2023 at 14:35)</a>:</h4>
<p>I'm stopping on this file for a bit</p>



<a name="321878396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321878396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321878396">(Jan 17 2023 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> says he knows how to do it</p>



<a name="321889464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321889464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321889464">(Jan 17 2023 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> has pushed</p>



<a name="321897574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321897574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321897574">(Jan 17 2023 at 18:29)</a>:</h4>
<p>There also seems to be a bug in mathport which causes it to print literal "\n" strings in the docstring arguments to <code>to_additive</code>.</p>



<a name="321921183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321921183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321921183">(Jan 17 2023 at 20:35)</a>:</h4>
<p>This file is now ~ 50% error free</p>



<a name="321989581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321989581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321989581">(Jan 18 2023 at 07:42)</a>:</h4>
<p>I'm going to work on this file a bit more</p>



<a name="321991410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/321991410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#321991410">(Jan 18 2023 at 07:56)</a>:</h4>
<p>I'm a bit concerned that none of the notation is showing in the goal view</p>



<a name="322011643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/322011643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#322011643">(Jan 18 2023 at 10:00)</a>:</h4>
<p>CI is happy with this one</p>



<a name="322011676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/322011676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#322011676">(Jan 18 2023 at 10:00)</a>:</h4>
<p>But notation is still not showing up in the goal view</p>



<a name="322049239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/322049239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#322049239">(Jan 18 2023 at 13:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628/near/322011676">said</a>:</p>
<blockquote>
<p>But notation is still not showing up in the goal view</p>
</blockquote>
<p>AFAIU, that's because I implemented it using <code>macro_rules</code>, which means I'd need to write a delaborator to show the notation. I shall check if it's possible to use higher level <code>notation</code> / <code>macro</code> that automatically generates the delaborator. If this is not possible, I shall implement the delaborator annotation.</p>



<a name="322050295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Algebra.BigOperators.Basic%20mathlib4%231628/near/322050295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Algebra.2EBigOperators.2EBasic.20mathlib4.231628.html#322050295">(Jan 18 2023 at 13:20)</a>:</h4>
<p>Awesome, thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>