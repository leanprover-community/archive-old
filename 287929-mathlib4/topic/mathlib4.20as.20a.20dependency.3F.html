---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html">mathlib4 as a dependency?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="238643198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238643198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238643198">(May 13 2021 at 16:12)</a>:</h4>
<p>Can someone talk me through how to use mathlib4 as a dependency in a lean4 project? On Thursday evenings I goof around with mini Lean 4 experiments and I'm sick of copying Data.Set.Basic around from repo to repo.</p>



<a name="238643282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238643282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238643282">(May 13 2021 at 16:13)</a>:</h4>
<p>Do your goofing in a directory in mathlib4 that you don't commit?</p>



<a name="238652432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238652432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238652432">(May 13 2021 at 17:23)</a>:</h4>
<p>Are you saying it's not possible right now?</p>



<a name="238652693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238652693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238652693">(May 13 2021 at 17:25)</a>:</h4>
<p>It is definitely possible. I use a custom setup though so I am unable to advise on the canonical way to do it. I thought this local-directory trick might be a satisfactory workaround for you for the very short-term.</p>



<a name="238652774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238652774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238652774">(May 13 2021 at 17:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F/near/238643198">said</a>:</p>
<blockquote>
<p>Can someone talk me through how to use mathlib4 as a dependency in a lean4 project? On Thursday evenings I goof around with mini Lean 4 experiments and I'm sick of copying Data.Set.Basic around from repo to repo.</p>
</blockquote>
<p>You should be able to add it as a dependency to your <code>leanpkg.toml</code> like here:<br>
<a href="https://github.com/mhuisi/lean4-cli/blob/main/leanpkg.toml">https://github.com/mhuisi/lean4-cli/blob/main/leanpkg.toml</a></p>



<a name="238702490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238702490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> François G. Dorais <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238702490">(May 14 2021 at 00:51)</a>:</h4>
<p>That's been working since January but the parser had issues with line breaks and spacing, maybe that can be fixed easily so we can put <code>rev=</code> on a separate line. In your <code>leanpkg.toml</code> add:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">dependencies</span><span class="o">]</span>
<span class="n">MathLib4</span> <span class="bp">=</span> <span class="o">{</span><span class="n">git</span> <span class="bp">=</span> <span class="s2">"https://github.com/leanprover-community/mathlib4"</span><span class="o">,</span> <span class="n">rev</span> <span class="bp">=</span> <span class="s2">"&lt;fill_me_in&gt;"</span><span class="o">}</span>
</code></pre></div>



<a name="238702600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/238702600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#238702600">(May 14 2021 at 00:52)</a>:</h4>
<p>regarding line breaks, that's just the way <a href="https://github.com/toml-lang/toml">toml</a> works. If you want multiple lines you can use something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">dependencies.MathLib4</span><span class="o">]</span>
<span class="n">git</span> <span class="bp">=</span> <span class="s2">"https://github.com/leanprover-community/mathlib"</span>
<span class="n">rev</span> <span class="bp">=</span> <span class="s2">"&lt;fill_me_in&gt;"</span>
</code></pre></div>
<p>(IIRC)</p>



<a name="272539827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/272539827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Wilhelm <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#272539827">(Feb 19 2022 at 20:13)</a>:</h4>
<p>Hi is this supported currently? I tried creating a new empty package and importing mathlib4 like so --</p>
<p>lakefile.lean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Lake</span>
<span class="kn">open</span> <span class="n">Lake</span> <span class="n">DSL</span>

<span class="n">package</span> <span class="n">scratch5</span> <span class="o">{</span>
  <span class="n">dependencies</span> <span class="o">:=</span> <span class="bp">#</span><span class="o">[{</span>
    <span class="n">name</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">mathlib</span>
    <span class="n">src</span> <span class="o">:=</span> <span class="n">Source.git</span> <span class="s2">"https://github.com/leanprover-community/mathlib4.git"</span> <span class="s2">"master"</span>
  <span class="o">}]</span>
<span class="o">}</span>
</code></pre></div>
<p>Scratch5.lean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Mathlib.Logic.Basic</span>
<span class="kd">def</span> <span class="n">hello</span> <span class="o">:=</span> <span class="s2">"world"</span>
</code></pre></div>
<p>and "lake build" gives:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">info</span><span class="o">:</span> <span class="n">mathlib</span><span class="o">:</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">update</span> <span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="n">revision</span> <span class="n">master</span>
<span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span> <span class="bp">/</span><span class="n">root</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---stable/bin/lean ./lean_packages/mathlib/././Mathlib/Tactic/OpenPrivate.lean -R ./lean_packages/mathlib/./. -o ./lean_packages/mathlib/./build/lib/Mathlib/Tactic/OpenPrivate.olean -i ./lean_packages/mathlib/./build/lib/Mathlib/Tactic/OpenPrivate.ilean -c ./lean_packages/mathlib/./build/ir/Mathlib/Tactic/OpenPrivate.c</span>
<span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span> <span class="bp">/</span><span class="n">root</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---stable/bin/lean ./lean_packages/mathlib/././Mathlib/Tactic/RCases.lean -R ./lean_packages/mathlib/./. -o ./lean_packages/mathlib/./build/lib/Mathlib/Tactic/RCases.olean -i ./lean_packages/mathlib/./build/lib/Mathlib/Tactic/RCases.ilean -c ./lean_packages/mathlib/./build/ir/Mathlib/Tactic/RCases.c</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">OpenPrivate.lean</span><span class="o">:</span><span class="mi">36</span><span class="o">:</span><span class="mi">24</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">cannot</span> <span class="n">lift</span> <span class="bp">`</span><span class="o">(</span><span class="bp">&lt;-</span> <span class="bp">...</span><span class="o">)</span><span class="bp">`</span> <span class="n">over</span> <span class="n">a</span> <span class="n">binder</span><span class="o">,</span> <span class="n">this</span> <span class="n">error</span> <span class="n">usually</span> <span class="n">happens</span> <span class="n">when</span> <span class="n">you</span> <span class="n">are</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">lift</span> <span class="n">a</span> <span class="n">method</span> <span class="n">nested</span> <span class="k">in</span> <span class="n">a</span> <span class="bp">`</span><span class="k">fun</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="k">let</span><span class="bp">`</span><span class="o">,</span> <span class="n">or</span> <span class="bp">`</span><span class="k">match</span><span class="bp">`-</span><span class="n">alternative</span><span class="o">,</span> <span class="n">and</span> <span class="n">it</span> <span class="n">can</span> <span class="n">often</span> <span class="n">be</span> <span class="n">fixed</span> <span class="kd">by</span> <span class="n">adding</span> <span class="n">a</span> <span class="n">missing</span> <span class="bp">`</span><span class="k">do</span><span class="bp">`</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">OpenPrivate.lean</span><span class="o">:</span><span class="mi">37</span><span class="o">:</span><span class="mi">6</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">expected</span> <span class="n">command</span>

<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">/</span><span class="n">root</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---stable/bin/lean exited with status 1</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">328</span><span class="o">:</span><span class="mi">8</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">expected</span> <span class="bp">'=&gt;'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">371</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">invalid</span> <span class="bp">'</span><span class="kd">end</span><span class="bp">'</span><span class="o">,</span> <span class="n">name</span> <span class="n">is</span> <span class="n">missing</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">386</span><span class="o">:</span><span class="mi">24</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">TermElabM'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">393</span><span class="o">:</span><span class="mi">52</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">396</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.alts''</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">398</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.typed'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">400</span><span class="o">:</span><span class="mi">30</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.one'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">401</span><span class="o">:</span><span class="mi">37</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.one'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">402</span><span class="o">:</span><span class="mi">30</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.clear'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">404</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt.tuple'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">425</span><span class="o">:</span><span class="mi">9</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">432</span><span class="o">:</span><span class="mi">6</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unsupported</span> <span class="n">pattern</span> <span class="k">in</span> <span class="n">syntax</span> <span class="k">match</span>
  <span class="n">RCasesPatt.typed</span> <span class="n">ref</span> <span class="n">pat</span> <span class="n">ty</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">429</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">processConstructor'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">437</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">rcasesContinue'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">438</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">invalid</span> <span class="n">field</span> <span class="kd">notation</span><span class="o">,</span> <span class="n">type</span> <span class="n">is</span> <span class="n">not</span> <span class="n">of</span> <span class="n">the</span> <span class="n">form</span> <span class="o">(</span><span class="n">C</span> <span class="bp">...</span><span class="o">)</span> <span class="n">where</span> <span class="n">C</span> <span class="n">is</span> <span class="n">a</span> <span class="kd">constant</span>
  <span class="n">gs</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m.19077</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">443</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCasesPatt'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">447</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">rcasesCore'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">448</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">invalid</span> <span class="n">field</span> <span class="kd">notation</span><span class="o">,</span> <span class="n">type</span> <span class="n">is</span> <span class="n">not</span> <span class="n">of</span> <span class="n">the</span> <span class="n">form</span> <span class="o">(</span><span class="n">C</span> <span class="bp">...</span><span class="o">)</span> <span class="n">where</span> <span class="n">C</span> <span class="n">is</span> <span class="n">a</span> <span class="kd">constant</span>
  <span class="n">gs</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m.19643</span> <span class="n">pat</span> <span class="n">ty</span><span class="bp">✝</span> <span class="n">g</span> <span class="n">ty</span> <span class="n">g₁</span> <span class="n">a</span><span class="bp">✝</span> <span class="n">discr</span><span class="bp">✝</span> <span class="n">v</span> <span class="n">g₂</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">459</span><span class="o">:</span><span class="mi">4</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">rcasesCore'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">458</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">invalid</span> <span class="n">field</span> <span class="kd">notation</span><span class="o">,</span> <span class="n">type</span> <span class="n">is</span> <span class="n">not</span> <span class="n">of</span> <span class="n">the</span> <span class="n">form</span> <span class="o">(</span><span class="n">C</span> <span class="bp">...</span><span class="o">)</span> <span class="n">where</span> <span class="n">C</span> <span class="n">is</span> <span class="n">a</span> <span class="kd">constant</span>
  <span class="n">pat</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m.20541</span> <span class="n">g</span> <span class="n">fs</span> <span class="n">clears</span> <span class="n">a</span> <span class="n">ref</span> <span class="n">pat</span><span class="bp">✝¹</span> <span class="n">ty</span><span class="bp">?</span> <span class="n">cont</span> <span class="n">a</span><span class="bp">✝</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">480</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">invalid</span> <span class="bp">'</span><span class="kd">end</span><span class="bp">'</span><span class="o">,</span> <span class="n">insufficient</span> <span class="n">scopes</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">496</span><span class="o">:</span><span class="mi">23</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCases.rcases'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">507</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCases.obtainNone'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">513</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCases.rcases'</span>
<span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Tactic</span><span class="bp">/</span><span class="n">RCases.lean</span><span class="o">:</span><span class="mi">521</span><span class="o">:</span><span class="mi">23</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">RCases.rintro'</span>

<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">/</span><span class="n">root</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---stable/bin/lean exited with status 1</span>
<span class="n">error</span><span class="o">:</span> <span class="n">build</span> <span class="n">failed</span>
</code></pre></div>
<p>should this work?</p>



<a name="272540208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/272540208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#272540208">(Feb 19 2022 at 20:20)</a>:</h4>
<p>mathport uses mathlib4 as a dependency, you might use that as an example</p>



<a name="272540375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/272540375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#272540375">(Feb 19 2022 at 20:23)</a>:</h4>
<p>My guess is that you are compiling mathlib with the wrong lean version. Mathport has a <code>lean-toolchain</code> file in the project root which is used by lake to select the right nightly version; right now it says <code>leanprover/lean4:nightly-2022-02-17</code>, which matches the <code>lean-toolchain</code> version inside the selected version of mathlib4</p>



<a name="272540615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathlib4%20as%20a%20dependency%3F/near/272540615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Wilhelm <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/mathlib4.20as.20a.20dependency.3F.html#272540615">(Feb 19 2022 at 20:27)</a>:</h4>
<p>yes! that fixed it, thank you</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>