---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/aesop.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html">aesop</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="311519356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/311519356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#311519356">(Nov 22 2022 at 05:15)</a>:</h4>
<p><span class="user-mention" data-user-id="256311">@Jannis Limperg</span>, it seems that <code>declare_aesop_rule_sets</code> is forgotten between files. I can file an issue with an example tomorrow.</p>



<a name="311568815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/311568815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#311568815">(Nov 22 2022 at 11:12)</a>:</h4>
<p>I'm investigating, no need for a test case. Thanks!</p>



<a name="311577620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/311577620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#311577620">(Nov 22 2022 at 12:06)</a>:</h4>
<p>Fixed.</p>



<a name="313530459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313530459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313530459">(Dec 02 2022 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="256311">@Jannis Limperg</span>, if you have a chance to merge <a href="https://github.com/JLimperg/aesop/pull/32">https://github.com/JLimperg/aesop/pull/32</a> that would be helpful; we need it to be able to bump mathlib4.</p>



<a name="313532186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313532186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313532186">(Dec 02 2022 at 16:05)</a>:</h4>
<p>Oh, sorry, there is still a build error.</p>



<a name="313532690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313532690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313532690">(Dec 02 2022 at 16:07)</a>:</h4>
<p>Fixed, by adding an unexpected <code>.{0}</code></p>



<a name="313589452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313589452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313589452">(Dec 02 2022 at 21:07)</a>:</h4>
<p>Done, thanks! (The <code>.{0}</code> was actually on an unnecessary assumption.)</p>



<a name="313589578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313589578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313589578">(Dec 02 2022 at 21:08)</a>:</h4>
<p>Btw, if anyone wants maintainer rights for the Aesop repo, or if you want to move Aesop into leanprover-community, I'd be happy to do that.</p>



<a name="313600608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313600608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313600608">(Dec 02 2022 at 22:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="256311">@Jannis Limperg</span>, can you send me maintainer rights for Aesop? I like to have maintainer rights for dependencies of mathlib so I can roll out traumatic nightly updates as atomically as possible.</p>



<a name="313600861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313600861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313600861">(Dec 02 2022 at 22:33)</a>:</h4>
<p>I think moving to leanprover-community isn't a requirement, seeing as quote4 and std4 are also not under leanprover-community</p>



<a name="313600929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313600929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313600929">(Dec 02 2022 at 22:33)</a>:</h4>
<p>but I don't have an issue with doing so if you would like to make it look more official</p>



<a name="313656750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313656750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313656750">(Dec 03 2022 at 10:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/aesop/near/313600608">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="256311">Jannis Limperg</span>, can you send me maintainer rights for Aesop? I like to have maintainer rights for dependencies of mathlib so I can roll out traumatic nightly updates as atomically as possible.</p>
</blockquote>
<p>Done!</p>



<a name="313656775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313656775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313656775">(Dec 03 2022 at 10:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/aesop/near/313600861">said</a>:</p>
<blockquote>
<p>I think moving to leanprover-community isn't a requirement, seeing as quote4 and std4 are also not under leanprover-community</p>
</blockquote>
<p>Okay then let's just keep it as it is for now.</p>



<a name="313658475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313658475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313658475">(Dec 03 2022 at 10:15)</a>:</h4>
<p>one thing that would be nice is that aesop (and std4) could allow for downloading prebuild nightly-releases. I've looked a bit into the lake cloud release feature and it seems not to play well with what mathlib3 did before, but it should be very easy to use for dependencies, which would slightly decrease the build times</p>



<a name="313659508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/313659508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#313659508">(Dec 03 2022 at 10:23)</a>:</h4>
<p>I wasn't aware of this Lake functionality, but it looks really nice. I'll look into it.</p>



<a name="317583925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317583925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317583925">(Dec 23 2022 at 14:54)</a>:</h4>
<p>I am getting an error in <code>Aesop/Tree/Data</code>.  I'm on</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>Lean (version 4.0.0-nightly-2022-12-22, commit a2f595911898, Release)
</code></pre></div>
<p>Std</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>a109889bf299f0d086f93a228e4c152f40ff5b0d
</code></pre></div>
<p>and Aesop</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>79127e2c0a6254eae99a1e919fdd6da8815189ff
</code></pre></div>
<p>(both seem to be the latest versions).  Has anyone else seen it?</p>



<a name="317584110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317584110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317584110">(Dec 23 2022 at 14:55)</a>:</h4>
<p>The error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">[</span><span class="n">Nonempty</span> <span class="n">Goal</span><span class="o">]</span> <span class="o">:</span> <span class="n">Nonempty</span> <span class="o">(</span><span class="n">RappData</span> <span class="n">Goal</span> <span class="n">MVarCluster</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">⟨{</span> <span class="n">id</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">parent</span> <span class="o">:=</span> <span class="n">Classical.ofNonempty</span>
     <span class="n">children</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">state</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">isIrrelevant</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">appliedRule</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">scriptBuilder</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">originalSubgoals</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">successProbability</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">metaState</span> <span class="o">:=</span> <span class="n">default</span> <span class="c1">-- failed to synthesize instance Inhabited SavedState</span>
     <span class="n">introducedMVars</span> <span class="o">:=</span> <span class="n">default</span>
     <span class="n">assignedMVars</span> <span class="o">:=</span> <span class="n">default</span> <span class="o">}⟩</span>
</code></pre></div>



<a name="317585188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317585188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lukas Miaskiwskyi <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317585188">(Dec 23 2022 at 15:00)</a>:</h4>
<p>I've  been running into the same error during <code>lake build </code> on a freshly cloned mathlib4, only since today. Together with an error in <code>Data.Int.Basic </code>, which I am not sure is related:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Mathlib</span><span class="bp">\</span><span class="n">Data</span><span class="bp">\</span><span class="n">Int</span><span class="bp">\</span><span class="n">Basic.lean</span><span class="o">:</span><span class="mi">278</span><span class="o">:</span><span class="mi">44</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">Declaration</span> <span class="n">Int.toNat_add_toNat_neg_eq_nat_abs</span> <span class="n">not</span> <span class="n">found.</span>
</code></pre></div>



<a name="317586380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317586380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317586380">(Dec 23 2022 at 15:05)</a>:</h4>
<p>That shouldn't happen, Gabriel linked mathlib4 to to his updated version of Aesop <a href="https://github.com/JLimperg/aesop/pull/37">https://github.com/JLimperg/aesop/pull/37</a></p>



<a name="317586557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317586557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317586557">(Dec 23 2022 at 15:06)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/commit/4b0358a2186132a387f3278f1519632cdbeb4c70#diff-d2bbbefe896fa3db86583f19e6fb402ed9ba755d564f4de97f398b0596f4c2b8L35-R37">https://github.com/leanprover-community/mathlib4/commit/4b0358a2186132a387f3278f1519632cdbeb4c70#diff-d2bbbefe896fa3db86583f19e6fb402ed9ba755d564f4de97f398b0596f4c2b8L35-R37</a></p>



<a name="317587174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587174">(Dec 23 2022 at 15:09)</a>:</h4>
<p>I wonder if the following is the problem: at some point this morning when I had run <code>lake build</code>, I received the message</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>% lake build
warning: manifest out of date: git url of dependency aesop changed, use `lake update` to update
</code></pre></div>
<p>so I followed its instructions:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>% lake update
updating ./lake-packages/std to revision a109889bf299f0d086f93a228e4c152f40ff5b0d
aesop: URL has changed; deleting ./lake-packages/aesop and cloning again
cloning https://github.com/JLimperg/aesop to ./lake-packages/aesop
</code></pre></div>



<a name="317587344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587344">(Dec 23 2022 at 15:10)</a>:</h4>
<p>Is there a command to undo my <code>lake update</code>?</p>



<a name="317587522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587522">(Dec 23 2022 at 15:10)</a>:</h4>
<p>Reverting the changes to <code>lake-manifest.json</code> should do it</p>



<a name="317587738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587738">(Dec 23 2022 at 15:11)</a>:</h4>
<p>I'm assuming Gabriel didn't update the Aesop URL in lakefile.lean since it was supposed to be a temporary change, but that warning is confusing, yeah</p>



<a name="317587824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587824">(Dec 23 2022 at 15:12)</a>:</h4>
<p>Just ignore it for now, after reverting</p>



<a name="317587868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317587868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317587868">(Dec 23 2022 at 15:12)</a>:</h4>
<p>Thanks!</p>



<a name="317764427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/317764427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#317764427">(Dec 24 2022 at 20:55)</a>:</h4>
<p>FWIW I just fell into the same trap. Thanks for the fix Sebastian!</p>



<a name="318072996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/318072996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#318072996">(Dec 27 2022 at 10:57)</a>:</h4>
<p>I run the <code>start_port.sh</code> on freshly cloned mathlib4, and after running <code>lake build</code> I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">warning</span><span class="o">:</span> <span class="n">manifest</span> <span class="n">out</span> <span class="n">of</span> <span class="n">date</span><span class="o">:</span> <span class="n">git</span> <span class="n">url</span> <span class="n">of</span> <span class="n">dependency</span> <span class="n">aesop</span> <span class="n">changed</span><span class="o">,</span> <span class="n">use</span> <span class="bp">`</span><span class="n">lake</span> <span class="n">update</span><span class="bp">`</span> <span class="n">to</span> <span class="n">update</span>
<span class="n">error</span><span class="o">:</span> <span class="n">no</span> <span class="n">such</span> <span class="n">file</span> <span class="n">or</span> <span class="n">directory</span> <span class="o">(</span><span class="n">error</span> <span class="n">code</span><span class="o">:</span> <span class="mi">2</span><span class="o">)</span>
  <span class="n">file</span><span class="o">:</span> <span class="bp">./././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Group</span><span class="bp">/</span><span class="n">Ulift.lean</span>
</code></pre></div>
<p>(<code>Ulift.lean</code> is the file I wanted to port). Trying <code>lake update</code> doesn't help.</p>



<a name="318074969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/318074969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#318074969">(Dec 27 2022 at 11:09)</a>:</h4>
<p>The same happens to CI: <a href="https://github.com/leanprover-community/mathlib4/pull/1240">#1240</a>.</p>



<a name="318082193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/318082193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#318082193">(Dec 27 2022 at 11:57)</a>:</h4>
<p>For the warning see above. The error is likely unrelated (edit: see PR).</p>



<a name="318085868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aesop/near/318085868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/aesop.html#318085868">(Dec 27 2022 at 12:19)</a>:</h4>
<p>Oh, I sorry, I just didn't read the error message. Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>