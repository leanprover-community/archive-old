---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/synchronization.20label.20bot.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html">synchronization label bot</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="315863823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315863823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315863823">(Dec 14 2022 at 16:45)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>, did the mathlib4 synchronization label bot die? I can't find an open PR (the last one I found that was closed was from last week), and there are now a ton of files that need the label.</p>



<a name="315864045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315864045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315864045">(Dec 14 2022 at 16:46)</a>:</h4>
<p>Yes, here's the failure: <a href="https://github.com/leanprover-community/mathlib/actions/runs/3690518843/jobs/6247604123#step:5:50">https://github.com/leanprover-community/mathlib/actions/runs/3690518843/jobs/6247604123#step:5:50</a></p>



<a name="315864107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315864107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315864107">(Dec 14 2022 at 16:47)</a>:</h4>
<p>It's not happy with the filename that doesn't exist</p>



<a name="315864281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315864281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315864281">(Dec 14 2022 at 16:47)</a>:</h4>
<p>Should be an easy fix, but I don't have time right now</p>



<a name="315864404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315864404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315864404">(Dec 14 2022 at 16:48)</a>:</h4>
<p>Removing that line from the port wiki, running the bot, then adding it back would also be enough in the short term</p>



<a name="315864939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315864939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315864939">(Dec 14 2022 at 16:50)</a>:</h4>
<p>You can run the bot manually from the actions page</p>



<a name="315867686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315867686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315867686">(Dec 14 2022 at 17:03)</a>:</h4>
<p>Thanks, I got it.</p>



<a name="315867898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315867898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315867898">(Dec 14 2022 at 17:04)</a>:</h4>
<p>It's <a href="https://github.com/leanprover-community/mathlib/pull/17943">#17943</a>. I've checked it, but I'm just waiting for the current bors batch in mathlib4 to finish.</p>



<a name="315868741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315868741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315868741">(Dec 14 2022 at 17:07)</a>:</h4>
<p>Actually, I got this warning in the <code>check for modifications to ported files</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Base</span> <span class="n">commit</span><span class="o">:</span> <span class="n">ae193735714ee12590325bff0a20cba1380fd4d4</span>
<span class="n">Head</span> <span class="n">commit</span><span class="o">:</span> <span class="mi">075</span><span class="n">f6ac3fa40ccdc03dcf7a5bcc0a0dc0f98e8cf</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">The</span> <span class="n">head</span> <span class="n">commit</span> <span class="n">for</span> <span class="n">this</span> <span class="n">pull_request</span> <span class="n">event</span> <span class="n">is</span> <span class="n">not</span> <span class="n">ahead</span> <span class="n">of</span> <span class="n">the</span> <span class="n">base</span> <span class="n">commit.</span> <span class="n">Please</span> <span class="n">submit</span> <span class="n">an</span> <span class="n">issue</span> <span class="n">on</span> <span class="n">this</span> <span class="n">action's</span> <span class="n">GitHub</span> <span class="n">repo.</span>
</code></pre></div>
<p>Is this because I asked the bot to re-run the failed job instead of starting a new job?</p>



<a name="315870227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315870227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315870227">(Dec 14 2022 at 17:14)</a>:</h4>
<p>Aha, I guess it's because I made a change to fix something.</p>



<a name="315872841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315872841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315872841">(Dec 14 2022 at 17:26)</a>:</h4>
<p>That error is fixed by <a href="https://github.com/leanprover-community/mathlib/pull/17936">#17936</a></p>



<a name="315872998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/315872998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#315872998">(Dec 14 2022 at 17:27)</a>:</h4>
<blockquote>
<p>Aha, I guess it's because I made a change to fix something.</p>
</blockquote>
<p>Yes, CI doesn't run on the bot output (there is no need for it to!)</p>



<a name="316805907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316805907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316805907">(Dec 19 2022 at 18:34)</a>:</h4>
<p>The bot has died again:<br>
<a href="https://github.com/leanprover-community/mathlib/actions/runs/3727264113/jobs/6321252042#step:5:54">https://github.com/leanprover-community/mathlib/actions/runs/3727264113/jobs/6321252042#step:5:54</a></p>
<p>I haven't yet debugged what went wrong.</p>



<a name="316810883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316810883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316810883">(Dec 19 2022 at 19:02)</a>:</h4>
<p>The yaml file mentions a mathlib3 file that doesn't exist, and the bot tried to add a comment to it</p>



<a name="316810974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316810974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316810974">(Dec 19 2022 at 19:03)</a>:</h4>
<p>Well, that shouldn't happen any more! Except if it runs at an unlucky time I guess</p>



<a name="316811536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811536">(Dec 19 2022 at 19:06)</a>:</h4>
<p>What happens now when a lean3 file is renamed?</p>



<a name="316811577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811577">(Dec 19 2022 at 19:07)</a>:</h4>
<p>I think probably the way the yaml file is being used is WAI, and the bot is buggy</p>



<a name="316811627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811627">(Dec 19 2022 at 19:07)</a>:</h4>
<p>If it hasn't been ported then the "yaml file" (port status wiki page) will automatically get updated with the new module name</p>



<a name="316811659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811659">(Dec 19 2022 at 19:07)</a>:</h4>
<p>If it has been ported then probably bad things happen?</p>



<a name="316811739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811739">(Dec 19 2022 at 19:08)</a>:</h4>
<p>As long as the new version doesn't delete the entry about the ported file if the lean3 file goes missing</p>



<a name="316811749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811749">(Dec 19 2022 at 19:08)</a>:</h4>
<p>I assume we can agree that renaming already-ported files isn't a good idea</p>



<a name="316811818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811818">(Dec 19 2022 at 19:08)</a>:</h4>
<p>Sure, but race conditions happen, and when they do it's best to have a record of what happened so it can be manually cleaned up</p>



<a name="316811900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316811900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316811900">(Dec 19 2022 at 19:09)</a>:</h4>
<p>The "yaml file" doesn't contain any data that can't be computed from mathlib3 + mathlib4 + the ad-hoc comments page</p>



<a name="316812056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316812056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316812056">(Dec 19 2022 at 19:10)</a>:</h4>
<p>What would happen is that the mathlib4 ported file would refer to a mathlib3 module that no longer exists, probably confusing some tools, but we could fix it by manually adjusting the header</p>



<a name="316812085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316812085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316812085">(Dec 19 2022 at 19:10)</a>:</h4>
<p>and meanwhile the "new" mathlib3 file would appear as unported</p>



<a name="316844421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316844421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316844421">(Dec 19 2022 at 22:38)</a>:</h4>
<p>Fixed in <a href="https://github.com/leanprover-community/mathlib/pull/17978">https://github.com/leanprover-community/mathlib/pull/17978</a>, probably</p>



<a name="316844505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/316844505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#316844505">(Dec 19 2022 at 22:39)</a>:</h4>
<p>I can't do a test run of the last commit in the chain for some reason</p>



<a name="319093548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/synchronization%20label%20bot/near/319093548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/synchronization.20label.20bot.html#319093548">(Jan 02 2023 at 20:51)</a>:</h4>
<p><span aria-label="ping pong" class="emoji emoji-1f3d3" role="img" title="ping pong">:ping_pong:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>