---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/dependent.20PRs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html">dependent PRs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="319088813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319088813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319088813">(Jan 02 2023 at 20:01)</a>:</h4>
<p>I don't understand our workflow of, on the one hand, merging master into older PRs (versus rebasing) but, on the other hand, rebasing (and squashing) PRs onto master when they are merged. Once a PR has had master merged in, it seems to become impossible to tell what changes were intended to be part of the PR. How do people deal with this?</p>



<a name="319089140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319089140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319089140">(Jan 02 2023 at 20:04)</a>:</h4>
<p>For example, in <a href="https://github.com/leanprover-community/mathlib4/pull/1256">mathlib4#1256</a>, the PR adds some files which were part of other PRs, and master has also added those files (by those PRs getting merged), but with different contents.</p>



<a name="319089436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319089436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319089436">(Jan 02 2023 at 20:07)</a>:</h4>
<p>I guess I'll just assume the PR in question did not try to change those files, but this seems awkward in general</p>



<a name="319091128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319091128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319091128">(Jan 02 2023 at 20:25)</a>:</h4>
<p>You can see from the diff with master that only two files were changed. Probably rebasing is better I guess, but I just use the mathlib3 workflow because it's all I know.</p>



<a name="319091246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319091246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319091246">(Jan 02 2023 at 20:26)</a>:</h4>
<p>I merged master into the open PRs</p>



<a name="319091252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319091252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319091252">(Jan 02 2023 at 20:26)</a>:</h4>
<p>I changed some global config on my git which...might be relevant here?</p>



<a name="319091318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319091318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319091318">(Jan 02 2023 at 20:27)</a>:</h4>
<p>There's not really a great way to do dependent PRs in github</p>



<a name="319094915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319094915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319094915">(Jan 02 2023 at 21:07)</a>:</h4>
<p>The right thing to do here is to merge master into any dependent PRs so that the diff view shows the right thing, before setting bors on the PR</p>



<a name="319095010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319095010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319095010">(Jan 02 2023 at 21:08)</a>:</h4>
<p>Rebasing is possible too but usually requires a lot more work and for no payoff given that bors squashes everything</p>



<a name="319095385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319095385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319095385">(Jan 02 2023 at 21:13)</a>:</h4>
<p>The problem is that merging master into PRs is likely to result in big merge conflicts, because of the rest of the workflow</p>



<a name="319096161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096161">(Jan 02 2023 at 21:22)</a>:</h4>
<p>It shouldn't do</p>



<a name="319096195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096195">(Jan 02 2023 at 21:22)</a>:</h4>
<p>In the cases where it does, there is a standard solution that always works</p>



<a name="319096248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096248">(Jan 02 2023 at 21:23)</a>:</h4>
<p>But also, I don't think github will even let you merge a PR if you don't solve those conflicts anyway?</p>



<a name="319096348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096348">(Jan 02 2023 at 21:24)</a>:</h4>
<p>I don't understand what you mean</p>



<a name="319096360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096360">(Jan 02 2023 at 21:24)</a>:</h4>
<p>Of course, there may be conflicts</p>



<a name="319096489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096489">(Jan 02 2023 at 21:25)</a>:</h4>
<p>It's quite likely if one PR is branched off another, and then the other PR has been merged after further changes</p>



<a name="319096515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319096515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319096515">(Jan 02 2023 at 21:26)</a>:</h4>
<p>See my instructions <a href="#narrow/stream/113489-new-members/topic/Dependent.20PR.20-.20merge.20conflict/near/277015458">here</a></p>



<a name="319151814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319151814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319151814">(Jan 03 2023 at 09:12)</a>:</h4>
<p>It's a massive pain, but you <em>could</em> recreate the merge commit for the closed PR locally, and then merge it into the WIP branch… (<em>cries in Pijul</em>)</p>



<a name="319152250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319152250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319152250">(Jan 03 2023 at 09:15)</a>:</h4>
<p>That's exactly what I describe in the link above, isn't it?</p>



<a name="319155024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319155024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319155024">(Jan 03 2023 at 09:33)</a>:</h4>
<p>It is, sorry</p>



<a name="319159841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/dependent%20PRs/near/319159841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/dependent.20PRs.html#319159841">(Jan 03 2023 at 10:05)</a>:</h4>
<p>If I want to see changes relative to master, I either look at the diffs on github (which seems to pretty reliably get it right, unless an earlier dependent PR has been merged into master, but master hasn't been merged back to the PR branch), or merge master into my local copy of the PR branch and then <code>git diff</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>