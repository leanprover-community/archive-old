---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html">naming: `map_int_cast` vs `map_natCast` vs `map_ratCast`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="319460291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319460291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319460291">(Jan 04 2023 at 19:44)</a>:</h4>
<p>Just when I thought I had somewhat understood the naming conventions, I stumbled upon these three names:</p>
<p><a href="https://github.com/leanprover-community/mathlib4/blob/2d48a4ee2ad8bc9454c8e11fe1f395565c84353f/Mathlib/Data/Int/Cast/Lemmas.lean#L314">map_int_cast</a><br>
<a href="https://github.com/leanprover-community/mathlib4/blob/10507fe5cd9db3424e2ac73c968d6054c17145f5/Mathlib/Data/Nat/Cast/Basic.lean#L225">map_natCast</a><br>
<a href="https://github.com/leanprover-community/mathlib4/blob/cfdf43201a61aa3e57566656a27a5da3cf2b6110/Mathlib/Data/Rat/Cast.lean#L459">map_ratCast</a></p>
<p>Is this an oversight, or is there a deeper reason why they are not consistent?</p>



<a name="319462348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319462348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319462348">(Jan 04 2023 at 19:57)</a>:</h4>
<p>Oversight</p>



<a name="319464073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319464073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319464073">(Jan 04 2023 at 20:07)</a>:</h4>
<p>ok, I will prepare a fix renaming <code>map_int_cast</code> to <code>map_intCast</code> and similar</p>



<a name="319468128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319468128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319468128">(Jan 04 2023 at 20:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/1337">mathlib4#1337</a></p>



<a name="319712912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319712912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319712912">(Jan 06 2023 at 03:19)</a>:</h4>
<p>Given that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Mathlib.Data.Nat.Cast.Basic</span>

<span class="kd">example</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">RingHomClass</span> <span class="n">F</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
  <span class="n">map_natCast</span> <span class="n">f</span> <span class="mi">2</span>
</code></pre></div>
<p>works and <code>map_natCast</code> is tagged simp, why doesn't</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Mathlib.Data.Nat.Cast.Basic</span>

<span class="kd">example</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">RingHomClass</span> <span class="n">F</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span>
</code></pre></div>
<p>work?</p>



<a name="319712956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319712956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319712956">(Jan 06 2023 at 03:19)</a>:</h4>
<p>(Encountered while debugging something previously proved with <code>map_bit0</code>.)</p>



<a name="319724826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319724826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319724826">(Jan 06 2023 at 06:27)</a>:</h4>
<p>The head of the expression is a variable, so there is nothing to index this on. This is the same behaviour as in Lean 3.</p>



<a name="319724937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319724937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319724937">(Jan 06 2023 at 06:28)</a>:</h4>
<p>Interesting, should we remove the simp tag then?</p>



<a name="319724991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319724991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319724991">(Jan 06 2023 at 06:29)</a>:</h4>
<p>And would it be worth adding simp-lemmas for some small numbers,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">map_two</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">RingHomClass</span> <span class="n">F</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
  <span class="n">map_natCast</span> <span class="n">f</span> <span class="mi">2</span>

<span class="kd">lemma</span> <span class="n">map_three</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">Ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">RingHomClass</span> <span class="n">F</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
  <span class="n">map_natCast</span> <span class="n">f</span> <span class="mi">3</span>
</code></pre></div>



<a name="319728277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319728277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319728277">(Jan 06 2023 at 07:07)</a>:</h4>
<p>They aren't going to work any better with <code>simp</code>, so I'm not sure where we'd be using them.</p>



<a name="319728863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319728863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319728863">(Jan 06 2023 at 07:12)</a>:</h4>
<p>Oh ... the problem is <code>RingHomClass</code>, not <code>Nat.cast</code>?</p>



<a name="319733217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319733217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319733217">(Jan 06 2023 at 07:55)</a>:</h4>
<p>Is the head really a variable? Maybe this is <a href="https://github.com/leanprover/lean4/issues/1937">https://github.com/leanprover/lean4/issues/1937</a> instead?</p>



<a name="319733328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319733328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319733328">(Jan 06 2023 at 07:56)</a>:</h4>
<p>Which apparently has been fixed :-)</p>



<a name="319733551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319733551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319733551">(Jan 06 2023 at 07:58)</a>:</h4>
<p>Yes but I don't know if mathlib4 is on the new version yet.</p>



<a name="319757112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319757112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319757112">(Jan 06 2023 at 10:54)</a>:</h4>
<p>The  head symbol here is <code>FunLike.coe</code></p>



<a name="319894027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319894027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319894027">(Jan 07 2023 at 02:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/1397">mathlib4#1397</a> bumps to the latest nightly, which should bring in the fix for <a href="https://github.com/leanprover-community/lean4/pull/1937">lean4#1937</a>.</p>



<a name="319894034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319894034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319894034">(Jan 07 2023 at 02:11)</a>:</h4>
<p>(anagram not intended...?)</p>



<a name="319898290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/naming%3A%20%60map_int_cast%60%20vs%20%60map_natCast%60%20vs%20%60map_ratCast%60/near/319898290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/naming.3A.20.60map_int_cast.60.20vs.20.60map_natCast.60.20vs.20.60map_ratCast.60.html#319898290">(Jan 07 2023 at 03:13)</a>:</h4>
<p>That link doesn't work for me?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>