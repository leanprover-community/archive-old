---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/porting.20progress.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html">porting progress</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="275649332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275649332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275649332">(Mar 17 2022 at 13:09)</a>:</h4>
<p>Is there a place where we can see how further in mathlib mathport goes successfully?<br>
I think some kind of progress report would help motivating the community. Example:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>Progress report
  total files:   28%
  algebra:       35%
  combinatorics: 10%
  ...
</code></pre></div>



<a name="275652223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275652223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275652223">(Mar 17 2022 at 13:31)</a>:</h4>
<p><a href="https://twitter.com/andy_kelley/status/1503618085789466624">https://twitter.com/andy_kelley/status/1503618085789466624</a> comes to mind for a similar (and apparently popular) example</p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/andy_kelley/status/1503618085789466624"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/9df5ed49aca30c6d95d1ce7547a09031edf764db/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313436303332383637313638383838343233312f33547851475662375f6e6f726d616c2e6a7067"></a><p>Zig self-hosted compiler progress report:
* 185,470 lines of code
* Behavior Tests Passing:
  - LLVM: 973/1096 (89%)
  - WASM: 706/1096 (64%)
  - C: 657/1096 (60%)
  - x86_64: 607/1096 (55%)
  - arm: 409/1096 (37%)
  - aarch64: 366/1096 (33%)</p><span>- Andrew Kelley (@andy_kelley)</span></div></div>



<a name="275656564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275656564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275656564">(Mar 17 2022 at 14:01)</a>:</h4>
<blockquote>
<p>Is there a place where we can see how further in mathlib mathport goes successfully?</p>
</blockquote>
<p>The elephant in the room is of course what progress means at this stage of the port.  I can only think of two axes which you can measure in percent at the moment: and that's the tactics and metaprograms (i.e., <code>@[to_additive]</code> and co.).</p>
<p>It might be useful to create issues on the mathlib4 repo for that (like Ed has done for to_additive).  Then you automatically get a progress bar if you put the issues in projects.  Check this out as an example: <a href="https://github.com/leanprover-community/mathlib/projects">https://github.com/leanprover-community/mathlib/projects</a></p>



<a name="275658575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275658575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275658575">(Mar 17 2022 at 14:13)</a>:</h4>
<p>To me, progress is something along the lines of "how many of the files mathport successfully translates?".</p>
<p>It is indeed possible to create issues and make projects on GitHub that will give us an idea of progress. But I find it kind of blurry. E.g. I can't have an idea of the impact caused by the implementation of a certain set of things (some tactics and/or tags etc).</p>
<p>In other words, my notion of completeness of the port is "we will be done when all files from mathlib are translated to Lean 4". So my most straightforward question is: "how many of them can we successfully translate <em>now</em>?"</p>



<a name="275658674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275658674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275658674">(Mar 17 2022 at 14:14)</a>:</h4>
<p>At a later point in the porting process, we should try to compile the synported files on their own (i.e., without the binport).  Then we might get progress information like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">files</span> <span class="n">w</span><span class="bp">/</span> <span class="n">syntax</span> <span class="n">errors</span><span class="o">:</span> <span class="mi">1</span><span class="bp">%</span>
<span class="n">files</span> <span class="n">w</span><span class="bp">/</span> <span class="n">errors</span> <span class="k">in</span> <span class="n">proofs</span><span class="o">:</span> <span class="mi">99</span><span class="bp">%</span>
<span class="n">files</span> <span class="n">w</span><span class="bp">/</span> <span class="n">errors</span> <span class="k">in</span> <span class="n">defs</span> <span class="n">and</span> <span class="n">thm</span> <span class="n">stmts</span><span class="o">:</span> <span class="mi">90</span><span class="bp">%</span>
<span class="n">files</span> <span class="n">w</span><span class="bp">/</span><span class="n">o</span> <span class="n">errors</span><span class="o">:</span> <span class="mi">1</span><span class="bp">%</span>
</code></pre></div>
<p>I'm not sure it makes sense to try this yet (because almost all files still have errors in definitions), but if you're motivated it would be awesome to have infrastructure for testing (and measuring) ready for this experiment.  After to_additive is ported the number of errors should go down significantly.  On the mathport side, <a href="https://github.com/leanprover-community/mathport/pull/131">mathport#131</a> and <a href="https://github.com/leanprover-community/mathport/pull/106">mathport#106</a> are two other big issues that break lots of instances (and with that, lots of dependent definitions).</p>
<p>This experiment will also require some modifications to core Lean.  One to address <a href="https://github.com/leanprover-community/mathport/pull/53">mathport#53</a>.  Then we'll also need options to ignore errors (i.e., save the olean even if there are errors so that we can continue compiling).</p>



<a name="275658929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275658929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275658929">(Mar 17 2022 at 14:16)</a>:</h4>
<p>After flag day, we'll most certainly need to fix up the ported files.  Only then do we really get a progress bar of the form "how many files compile successfully".</p>



<a name="275664423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275664423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275664423">(Mar 17 2022 at 14:51)</a>:</h4>
<p>Thanks a lot for the explanation! I'll try to stick to the Mathport low-hanging fruits (as you say it) because they're on the verge of my understanding and are good challenges for me at the moment. <em>Maybe</em> when those are done I will be knowledgeable enough to study Mathport code base and play with the porting experiments</p>



<a name="275666667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/275666667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#275666667">(Mar 17 2022 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span> Thank you so much for all that you are doing! It's lovely to see everyone contributing in all these different places with all these different skills.</p>



<a name="276018612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/276018612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#276018612">(Mar 21 2022 at 08:33)</a>:</h4>
<p>Is there some place where there is a description of the tactics (I see some described in MathLib for lean 3), or can some wiki be created to make this easy? For example, I know the <code>decide</code> tactic, but what is <code>decide!</code>? Also is <code>symm</code> just <code>apply Eq.symm</code>or something more (similarly for <code>trans</code>).</p>



<a name="276022356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/276022356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#276022356">(Mar 21 2022 at 09:11)</a>:</h4>
<p>I assume you know about <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html">https://leanprover-community.github.io/mathlib_docs/tactics.html</a> ?</p>



<a name="276022700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/276022700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#276022700">(Mar 21 2022 at 09:15)</a>:</h4>
<p>The tactics in <code>Syntax.lean</code> are just the lean 3 tactics, although I made use of some editorial license to change the syntax to be more lean-4-ish in a few places. <code>decide!</code> is the lean 4 version of the <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#dec_trivial"><code>dec_trivial!</code> tactic</a></p>



<a name="276022881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/276022881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#276022881">(Mar 21 2022 at 09:17)</a>:</h4>
<p>As <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#symmetry">the documentation says</a>, the <code>symm(etry)</code> tactic is not just <code>apply Eq.symm</code>, it will apply any lemma marked with the <code>@[symm]</code> attribute, which is placed on theorems of the form <code>r a b -&gt; r b a</code> for a variety of relations <code>r</code></p>



<a name="276025208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/276025208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#276025208">(Mar 21 2022 at 09:39)</a>:</h4>
<p>Thanks. Yes, that link was what I meant by "MathLib for lean 3". <br>
Are all tactics then Lean 3 tactics, but with modified names and sometimes syntax? In that case, could someone in the know add comments giving the older name (where it is not obvious).</p>



<a name="279142706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/279142706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#279142706">(Apr 16 2022 at 02:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/234">I've made some progress with to_additive.</a> There are still lots of bugs and todos but the majority of the mathlib code is now ported. There is a test file which is still failing but some of them are working <a href="https://github.com/leanprover-community/mathlib4/blob/42dba0238c60197c456f16a5052a5e24e56235b0/test/toAdditive.lean">https://github.com/leanprover-community/mathlib4/blob/42dba0238c60197c456f16a5052a5e24e56235b0/test/toAdditive.lean</a></p>



<a name="279142791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/279142791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#279142791">(Apr 16 2022 at 02:42)</a>:</h4>
<p>It would be good to get some eyes on it because the PR is really big now</p>



<a name="287705881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287705881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Zibrowius <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287705881">(Jun 28 2022 at 12:05)</a>:</h4>
<p>Is there a place where I can read up on the plans for porting and the progress that has been made?  I'm new not only to Lean but also to Zulip, and I struggle nagivating here.  I can see that there are lots of discussions of these questions, but I fail to see what consensus has emerged.  The <a href="https://github.com/leanprover-community/mathlib4">github page for mathlib4</a> only says that the "real" port hasn't even started.</p>



<a name="287706784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287706784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287706784">(Jun 28 2022 at 12:15)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/blog/posts/intro-to-mathport/">https://leanprover-community.github.io/blog/posts/intro-to-mathport/</a> is still reasonably up to date</p>



<a name="287707332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287707332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287707332">(Jun 28 2022 at 12:20)</a>:</h4>
<p>mathlib is now 910K lines of code ;-)</p>



<a name="287707609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287707609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287707609">(Jun 28 2022 at 12:23)</a>:</h4>
<p>Technically that's over 700K :)</p>



<a name="287707979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287707979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287707979">(Jun 28 2022 at 12:26)</a>:</h4>
<p>Since the porting strategies are somewhat involved, here's the long story short: there's an automated method to port mathlib code except for the metaprogramming part, which was completely revamped in Lean 4. That is, linters, tactics, tags etc have to be done by hand.</p>
<p>There are also things that have to be done in Lean 4 core to facilitate such automation, but in the meantime we're working on spreading the metaprogramming word because that's the bottleneck for the community side of the effort</p>



<a name="287708212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287708212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287708212">(Jun 28 2022 at 12:28)</a>:</h4>
<p>And then programming in Lean 4 is a requisite for understanding metaprogramming. So there are books being written on both ends</p>



<a name="287708689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287708689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287708689">(Jun 28 2022 at 12:33)</a>:</h4>
<p>This is the WIP book for functional programming in Lean 4: <a href="https://leanprover.github.io/functional_programming_in_lean/">https://leanprover.github.io/functional_programming_in_lean/</a></p>
<p>This is the WIP book for metaprogramming in Lean 4: <a href="https://github.com/arthurpaulino/lean4-metaprogramming-book">https://github.com/arthurpaulino/lean4-metaprogramming-book</a></p>



<a name="287709206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20progress/near/287709206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20progress.html#287709206">(Jun 28 2022 at 12:37)</a>:</h4>
<p>Besides the excellent documentation being written, one other piece of news that's not in the blog post comes from <a href="https://leanprover.github.io/talks/lean-update-2022-06-15.pdf">https://leanprover.github.io/talks/lean-update-2022-06-15.pdf</a> (page 6): There will be increased focus on the mathlib port after <a href="https://icerm.brown.edu/topical_workshops/tw-22-lean/">LftCM 2022</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>