---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Classical.2Echoose.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Classical.2Echoose.html">Classical.choose</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="317491179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Classical.choose/near/317491179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Classical.2Echoose.html#317491179">(Dec 23 2022 at 04:17)</a>:</h4>
<p>I'm porting <code>Algebra.GCDMonoid.Basic</code> (<a href="https://github.com/leanprover-community/mathlib4/pull/1135">mathlib4#1135</a>) and got stuck at one final error at line 1088. The goal is <code>l = 0</code>, which in mathlib3 is closed by <code>hl : l = 0</code>. Instead, in Lean4 we have <code>hl : Classical.choose (_ : Exists fun x ↦ (fun x ↦ 0 = gcd a 0 * x) x) = 0</code>. Earlier, we have a <code>set l := ...</code> that gives <code>l := Classical.choose (_ : gcd a 0 ∣ ↑normalize (a * 0))</code>. mathlib3 is able to use that to rewrite <code>hl</code> into <code>l = 0</code>, but Lean4 is unable to do so.</p>
<p>What is the meaning of <code>Classical.choose (_ : p)</code> where <code>p</code> is not an existential proposition? Why is mathlib3 able to equate two <code>Classical.choose</code> terms with seemingly different propositions? What is a workaround in mathlib4?</p>



<a name="317502491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Classical.choose/near/317502491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Classical.2Echoose.html#317502491">(Dec 23 2022 at 06:53)</a>:</h4>
<p>I found a workaround by using a pure <code>rw</code> instead of <code>simp</code> in an earlier line, preventing the propositions in <code>Classical.choose</code> to disagree. My other questions above still hold, nevertheless.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>