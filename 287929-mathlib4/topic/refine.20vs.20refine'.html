---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/refine.20vs.20refine'.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html">refine vs refine'</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313712809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313712809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313712809">(Dec 03 2022 at 17:03)</a>:</h4>
<p>Why do we have both <code>refine</code> and <code>refine'</code>? Why do we have to put interrogation marks before holes in <code>refine</code> now?</p>



<a name="313712847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313712847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313712847">(Dec 03 2022 at 17:03)</a>:</h4>
<p>Also, why am I see a handful of terminal <code>refine'</code> in mathlib4?</p>



<a name="313714245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714245">(Dec 03 2022 at 17:18)</a>:</h4>
<p><code>refine'</code> is equivalent to Lean 3 <code>refine</code>.</p>



<a name="313714285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714285">(Dec 03 2022 at 17:18)</a>:</h4>
<p>Why is it primed if we're going to use this one mainly?</p>



<a name="313714306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714306">(Dec 03 2022 at 17:18)</a>:</h4>
<p>In Lean 4, <code>refine</code> won't create goals for natural holes and will fail if it can't fill them in.</p>



<a name="313714358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714358">(Dec 03 2022 at 17:19)</a>:</h4>
<p>I use <code>refine</code> generally.</p>



<a name="313714391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714391">(Dec 03 2022 at 17:19)</a>:</h4>
<p>It's possible we'll even deprecate <code>refine'</code> after the port.</p>



<a name="313714460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714460">(Dec 03 2022 at 17:20)</a>:</h4>
<p>But what is a natural hole? Why do we not want them?</p>



<a name="313714465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714465">(Dec 03 2022 at 17:20)</a>:</h4>
<p>It's nice because you can distinguish between holes you want goals for and holes Lean should fill.</p>



<a name="313714535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714535">(Dec 03 2022 at 17:20)</a>:</h4>
<p><code>?_</code> for the former and <code>_</code> for the latter.</p>



<a name="313714593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313714593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313714593">(Dec 03 2022 at 17:21)</a>:</h4>
<p>So whatever the option, the refine syntax got longer?</p>



<a name="313716652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313716652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313716652">(Dec 03 2022 at 17:40)</a>:</h4>
<p>Or put differently, whatever the option, the refine syntax got more precise.</p>



<a name="313722976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313722976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313722976">(Dec 03 2022 at 18:49)</a>:</h4>
<p>One user-side nice thing about <code>refine</code> vs. <code>refine'</code> is that you can name your goals to keep track of them in the tactic state as different <code>case</code>s, e.g. <code>refine (?x, ?y)</code></p>



<a name="313723283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/refine%20vs%20refine%27/near/313723283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/refine.20vs.20refine'.html#313723283">(Dec 03 2022 at 18:53)</a>:</h4>
<p>(Which is especially useful for clarity/interactivity if you have a few goals and the resulting types of those goals depend on each other, e.g. maybe one of your goals winds up with type <code>?x = ?y</code>!)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>