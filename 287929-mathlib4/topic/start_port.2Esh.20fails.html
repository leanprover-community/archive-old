---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/start_port.2Esh.20fails.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html">start_port.sh fails</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="318465371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318465371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318465371">(Dec 29 2022 at 18:17)</a>:</h4>
<p>The script <code>start_port.sh</code> fails midway on my macOS Ventura 13.1 (M1). Here is the full transcript:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Algorithmi</span><span class="o">:</span><span class="n">mathlib4</span> <span class="n">roblot</span><span class="bp">$</span> <span class="bp">./</span><span class="n">scripts</span><span class="bp">/</span><span class="n">start_port.sh</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">set</span> <span class="bp">-</span><span class="n">o</span> <span class="n">pipefail</span>
<span class="bp">+</span> <span class="n">MATHLIB3PORT_BASE_URL</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib3port</span><span class="bp">/</span><span class="n">master</span>
<span class="bp">+</span> <span class="n">PORT_STATUS_YAML</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">wiki</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">mathlib4</span><span class="bp">-</span><span class="n">port</span><span class="bp">-</span><span class="n">status.md</span>
<span class="bp">+</span> <span class="n">TMP_FILE</span><span class="bp">=</span><span class="n">start_port_tmp.lean</span>
<span class="bp">+</span> <span class="n">mathlib4_path</span><span class="bp">=</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+++</span> <span class="n">echo</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+++</span> <span class="n">tr</span> <span class="bp">/</span> <span class="bp">.</span>
<span class="bp">++</span> <span class="n">basename</span> <span class="n">Mathlib.Algebra.Regular.Pow.lean</span> <span class="bp">.</span><span class="n">lean</span>
<span class="bp">+</span> <span class="n">mathlib4_mod</span><span class="bp">=</span><span class="n">Mathlib.Algebra.Regular.Pow</span>
<span class="bp">+</span> <span class="n">mathlib3port_url</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib3port</span><span class="bp">/</span><span class="n">master</span><span class="bp">/</span><span class="n">Mathbin</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">curl</span> <span class="c1">--silent --show-error -o start_port_tmp.lean https://raw.githubusercontent.com/leanprover-community/mathlib3port/master/Mathbin/Algebra/Regular/Pow.lean</span>
<span class="bp">++</span> <span class="n">grep</span> <span class="bp">'^!</span> <span class="bp">.*</span><span class="n">source</span> <span class="n">module</span> <span class="bp">'</span>
<span class="bp">++</span> <span class="n">sed</span> <span class="bp">'</span><span class="n">s</span><span class="bp">/.*</span><span class="n">source</span> <span class="n">module</span> <span class="bp">\</span><span class="o">(</span><span class="bp">.*\</span><span class="o">)</span><span class="bp">$/\</span><span class="mi">1</span><span class="bp">/'</span>
<span class="bp">+</span> <span class="n">mathlib3_module</span><span class="bp">=</span><span class="n">algebra.regular.pow</span>
<span class="bp">+</span> <span class="n">curl</span> <span class="c1">--silent --show-error https://raw.githubusercontent.com/wiki/leanprover-community/mathlib/mathlib4-port-status.md</span>
<span class="bp">+</span> <span class="n">grep</span> <span class="bp">-</span><span class="n">F</span> <span class="bp">'</span><span class="n">algebra.regular.pow</span><span class="o">:</span> <span class="bp">'</span>
<span class="bp">+</span> <span class="n">grep</span> <span class="n">mathlib4</span><span class="bp">#</span>
<span class="bp">++</span> <span class="n">dirname</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">mkdir</span> <span class="bp">-</span><span class="n">p</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span>
<span class="bp">+</span> <span class="n">mv</span> <span class="n">start_port_tmp.lean</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">fetch</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Enumerating</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">6</span><span class="o">,</span> <span class="n">done.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Counting</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="bp">%</span> <span class="o">(</span><span class="mi">6</span><span class="bp">/</span><span class="mi">6</span><span class="o">),</span> <span class="n">done.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Total</span> <span class="mi">6</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">5</span><span class="o">),</span> <span class="n">reused</span> <span class="mi">6</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">5</span><span class="o">),</span> <span class="n">pack</span><span class="bp">-</span><span class="n">reused</span> <span class="mi">0</span>
<span class="n">Unpacking</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="bp">%</span> <span class="o">(</span><span class="mi">6</span><span class="bp">/</span><span class="mi">6</span><span class="o">),</span> <span class="mi">496</span> <span class="n">bytes</span> <span class="bp">|</span> <span class="mi">70</span><span class="bp">.</span><span class="mi">00</span> <span class="n">KiB</span><span class="bp">/</span><span class="n">s</span><span class="o">,</span> <span class="n">done.</span>
<span class="n">From</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib4</span>
   <span class="n">fa20385e..796b4ed7</span>  <span class="n">AD_PORT_Logic_Equiv_Nat</span> <span class="bp">-&gt;</span> <span class="n">origin</span><span class="bp">/</span><span class="n">AD_PORT_Logic_Equiv_Nat</span>
<span class="bp">+</span> <span class="n">branch_name</span><span class="bp">=</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Regular.Pow</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--no-track -b port/Algebra.Regular.Pow origin/master</span>
<span class="n">Switched</span> <span class="n">to</span> <span class="n">a</span> <span class="n">new</span> <span class="n">branch</span> <span class="bp">'</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Regular.Pow'</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">add</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">commit</span> <span class="bp">-</span><span class="n">m</span> <span class="bp">'</span><span class="n">Initial</span> <span class="n">file</span> <span class="n">copy</span> <span class="k">from</span> <span class="n">mathport'</span>
<span class="o">[</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Regular.Pow</span> <span class="mi">4</span><span class="n">c97e99c</span><span class="o">]</span> <span class="n">Initial</span> <span class="n">file</span> <span class="n">copy</span> <span class="k">from</span> <span class="n">mathport</span>
 <span class="mi">1</span> <span class="n">file</span> <span class="n">changed</span><span class="o">,</span> <span class="mi">72</span> <span class="n">insertions</span><span class="o">(</span><span class="bp">+</span><span class="o">)</span>
 <span class="n">create</span> <span class="n">mode</span> <span class="mi">100644</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="bp">+</span> <span class="n">sed</span> <span class="bp">-</span><span class="n">i</span> <span class="bp">'</span><span class="n">s</span><span class="bp">/</span><span class="n">Mathbin</span><span class="bp">\./</span><span class="n">Mathlib</span><span class="bp">\./</span><span class="n">g'</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Regular</span><span class="bp">/</span><span class="n">Pow.lean</span>
<span class="n">sed</span><span class="o">:</span> <span class="mi">1</span><span class="o">:</span> <span class="s2">"Mathlib/Algebra/Regular ..."</span><span class="o">:</span> <span class="n">invalid</span> <span class="n">command</span> <span class="n">code</span> <span class="n">M</span>
</code></pre></div>



<a name="318465653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318465653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318465653">(Dec 29 2022 at 18:19)</a>:</h4>
<p>The <code>sed</code> on my computer is the standard version included in <code>macOS</code>, as far as I can tell, it doesn't come with a version number...</p>



<a name="318466110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318466110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318466110">(Dec 29 2022 at 18:22)</a>:</h4>
<p><a href="https://stackoverflow.com/a/21470675">https://stackoverflow.com/a/21470675</a> suggests that we should pass an argument to <code>-i</code>.</p>



<a name="318466175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318466175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318466175">(Dec 29 2022 at 18:22)</a>:</h4>
<p>Could you please try editing the script and changing <code>-i</code> into <code>-ibak</code>?</p>



<a name="318467275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318467275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318467275">(Dec 29 2022 at 18:30)</a>:</h4>
<p>It seems that it works. The script terminates without any error </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Algorithmi</span><span class="o">:</span><span class="n">mathlib4</span> <span class="n">roblot</span><span class="bp">$</span> <span class="bp">./</span><span class="n">scripts</span><span class="bp">/</span><span class="n">start_port.sh</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">set</span> <span class="bp">-</span><span class="n">o</span> <span class="n">pipefail</span>
<span class="bp">+</span> <span class="n">MATHLIB3PORT_BASE_URL</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib3port</span><span class="bp">/</span><span class="n">master</span>
<span class="bp">+</span> <span class="n">PORT_STATUS_YAML</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">wiki</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">mathlib4</span><span class="bp">-</span><span class="n">port</span><span class="bp">-</span><span class="n">status.md</span>
<span class="bp">+</span> <span class="n">TMP_FILE</span><span class="bp">=</span><span class="n">start_port_tmp.lean</span>
<span class="bp">+</span> <span class="n">mathlib4_path</span><span class="bp">=</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+++</span> <span class="n">echo</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+++</span> <span class="n">tr</span> <span class="bp">/</span> <span class="bp">.</span>
<span class="bp">++</span> <span class="n">basename</span> <span class="n">Mathlib.Algebra.Hom.Centroid.lean</span> <span class="bp">.</span><span class="n">lean</span>
<span class="bp">+</span> <span class="n">mathlib4_mod</span><span class="bp">=</span><span class="n">Mathlib.Algebra.Hom.Centroid</span>
<span class="bp">+</span> <span class="n">mathlib3port_url</span><span class="bp">=</span><span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib3port</span><span class="bp">/</span><span class="n">master</span><span class="bp">/</span><span class="n">Mathbin</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">curl</span> <span class="c1">--silent --show-error -o start_port_tmp.lean https://raw.githubusercontent.com/leanprover-community/mathlib3port/master/Mathbin/Algebra/Hom/Centroid.lean</span>
<span class="bp">++</span> <span class="n">grep</span> <span class="bp">'^!</span> <span class="bp">.*</span><span class="n">source</span> <span class="n">module</span> <span class="bp">'</span>
<span class="bp">++</span> <span class="n">sed</span> <span class="bp">'</span><span class="n">s</span><span class="bp">/.*</span><span class="n">source</span> <span class="n">module</span> <span class="bp">\</span><span class="o">(</span><span class="bp">.*\</span><span class="o">)</span><span class="bp">$/\</span><span class="mi">1</span><span class="bp">/'</span>
<span class="bp">+</span> <span class="n">mathlib3_module</span><span class="bp">=</span><span class="n">algebra.hom.centroid</span>
<span class="bp">+</span> <span class="n">curl</span> <span class="c1">--silent --show-error https://raw.githubusercontent.com/wiki/leanprover-community/mathlib/mathlib4-port-status.md</span>
<span class="bp">+</span> <span class="n">grep</span> <span class="bp">-</span><span class="n">F</span> <span class="bp">'</span><span class="n">algebra.hom.centroid</span><span class="o">:</span> <span class="bp">'</span>
<span class="bp">+</span> <span class="n">grep</span> <span class="n">mathlib4</span><span class="bp">#</span>
<span class="bp">++</span> <span class="n">dirname</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">mkdir</span> <span class="bp">-</span><span class="n">p</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span>
<span class="bp">+</span> <span class="n">mv</span> <span class="n">start_port_tmp.lean</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">fetch</span>
<span class="bp">+</span> <span class="n">branch_name</span><span class="bp">=</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Hom.Centroid</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--no-track -b port/Algebra.Hom.Centroid origin/master</span>
<span class="n">M</span>   <span class="n">lake</span><span class="bp">-</span><span class="n">manifest.json</span>
<span class="n">M</span>   <span class="n">scripts</span><span class="bp">/</span><span class="n">start_port.sh</span>
<span class="n">Switched</span> <span class="n">to</span> <span class="n">a</span> <span class="n">new</span> <span class="n">branch</span> <span class="bp">'</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Hom.Centroid'</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">add</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">commit</span> <span class="bp">-</span><span class="n">m</span> <span class="bp">'</span><span class="n">Initial</span> <span class="n">file</span> <span class="n">copy</span> <span class="k">from</span> <span class="n">mathport'</span>
<span class="o">[</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Hom.Centroid</span> <span class="mi">5</span><span class="n">f6153dc</span><span class="o">]</span> <span class="n">Initial</span> <span class="n">file</span> <span class="n">copy</span> <span class="k">from</span> <span class="n">mathport</span>
 <span class="mi">1</span> <span class="n">file</span> <span class="n">changed</span><span class="o">,</span> <span class="mi">516</span> <span class="n">insertions</span><span class="o">(</span><span class="bp">+</span><span class="o">)</span>
 <span class="n">create</span> <span class="n">mode</span> <span class="mi">100644</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">sed</span> <span class="bp">-</span><span class="n">ibak</span> <span class="bp">'</span><span class="n">s</span><span class="bp">/</span><span class="n">Mathbin</span><span class="bp">\./</span><span class="n">Mathlib</span><span class="bp">\./</span><span class="n">g'</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">echo</span> <span class="bp">'</span><span class="kn">import</span> <span class="n">Mathlib.Algebra.Hom.Centroid'</span>
<span class="bp">+</span> <span class="n">cat</span> <span class="n">Mathlib.lean</span>
<span class="bp">+</span> <span class="n">LC_ALL</span><span class="bp">=</span><span class="n">C</span>
<span class="bp">+</span> <span class="n">sort</span>
<span class="bp">+</span> <span class="n">mv</span> <span class="bp">-</span><span class="n">f</span> <span class="n">Mathlib.lean.tmp</span> <span class="n">Mathlib.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">add</span> <span class="n">Mathlib.lean</span> <span class="n">Mathlib</span><span class="bp">/</span><span class="n">Algebra</span><span class="bp">/</span><span class="n">Hom</span><span class="bp">/</span><span class="n">Centroid.lean</span>
<span class="bp">+</span> <span class="n">git</span> <span class="n">commit</span> <span class="bp">-</span><span class="n">m</span> <span class="bp">'</span><span class="n">Mathbin</span> <span class="bp">-&gt;</span> <span class="n">Mathlib</span><span class="bp">;</span> <span class="n">add</span> <span class="kn">import</span> <span class="n">to</span> <span class="n">Mathlib.lean'</span>
<span class="o">[</span><span class="n">port</span><span class="bp">/</span><span class="n">Algebra.Hom.Centroid</span> <span class="mi">00146657</span><span class="o">]</span> <span class="n">Mathbin</span> <span class="bp">-&gt;</span> <span class="n">Mathlib</span><span class="bp">;</span> <span class="n">add</span> <span class="kn">import</span> <span class="n">to</span> <span class="n">Mathlib.lean</span>
 <span class="mi">2</span> <span class="n">files</span> <span class="n">changed</span><span class="o">,</span> <span class="mi">3</span> <span class="n">insertions</span><span class="o">(</span><span class="bp">+</span><span class="o">),</span> <span class="mi">2</span> <span class="n">deletions</span><span class="o">(</span><span class="bp">-</span><span class="o">)</span>
</code></pre></div>



<a name="318467317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318467317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318467317">(Dec 29 2022 at 18:30)</a>:</h4>
<p>Thanks!</p>



<a name="318467982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318467982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318467982">(Dec 29 2022 at 18:36)</a>:</h4>
<p>Also see <a href="https://stackoverflow.com/questions/4247068/sed-command-with-i-option-failing-on-mac-but-works-on-linux">https://stackoverflow.com/questions/4247068/sed-command-with-i-option-failing-on-mac-but-works-on-linux</a></p>



<a name="318468020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468020">(Dec 29 2022 at 18:36)</a>:</h4>
<p>We assumed when we were writing this script that it would fail somehow on Macs, but we didn't have any way to find out specifically how--thanks for the report.</p>



<a name="318468187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468187">(Dec 29 2022 at 18:37)</a>:</h4>
<p>I installed gnu-sed and aliased to sed ffwiw</p>



<a name="318468277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468277">(Dec 29 2022 at 18:38)</a>:</h4>
<p>It looks like <code>sed -ibak</code> (or better, <code>sed -i.bak</code>) will leave behind a <code>.bak</code> file, that we maybe then want to delete</p>



<a name="318468656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468656">(Dec 29 2022 at 18:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/287929-mathlib4/topic/start_port.2Esh.20fails/near/318468020">said</a>:</p>
<blockquote>
<p>We assumed when we were writing this script that it would fail somehow on Macs, but we didn't have any way to find out specifically how--thanks for the report.</p>
</blockquote>
<p>In general BSD sed and GNU sed don't exactly like each other, however BSD sed is a strict subset of GNU sed (at least in the way it accepts -i arguments) you can also to the <code>-ibak</code> in GNU sed what you can also do is pass an empty backup file ending! <code>sed -i '' 's/foo/bar/g' file</code></p>



<a name="318468803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468803">(Dec 29 2022 at 18:42)</a>:</h4>
<p>I guess if you wanted to test next time you could install some FreeBSD or OpenBSD in a VM and give it a shot :D</p>



<a name="318468837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468837">(Dec 29 2022 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/287929-mathlib4/topic/start_port.2Esh.20fails/near/318468656">said</a>:</p>
<blockquote>
<p>what you can also do is pass an empty backup file ending! <code>sed -i '' 's/foo/bar/g' file</code></p>
</blockquote>
<p>This doesn't work on my (Ubuntu Linux) system</p>



<a name="318468889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468889">(Dec 29 2022 at 18:43)</a>:</h4>
<p>:(</p>



<a name="318468926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318468926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318468926">(Dec 29 2022 at 18:43)</a>:</h4>
<p>I do remember some trick like this working out though, hmmmm</p>



<a name="318469198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318469198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318469198">(Dec 29 2022 at 18:45)</a>:</h4>
<p>Ah of course a whitespace mistake: <code>sed -i'' 's/foo/bar/g' file</code></p>



<a name="318469373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318469373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318469373">(Dec 29 2022 at 18:46)</a>:</h4>
<p>Can't make this type of stuff too easy</p>



<a name="318469377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318469377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318469377">(Dec 29 2022 at 18:46)</a>:</h4>
<p>Isn't <code>sed -i''</code> the same as <code>sed -i</code>?</p>



<a name="318469485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318469485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318469485">(Dec 29 2022 at 18:47)</a>:</h4>
<p>Hmmm, my OpenBSD seems to like it, but that might already have been infected by a GNU sed lets see</p>



<a name="318469703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318469703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318469703">(Dec 29 2022 at 18:48)</a>:</h4>
<p>Indeed a GNU sed /o\</p>



<a name="318470182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318470182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318470182">(Dec 29 2022 at 18:51)</a>:</h4>
<p>I tried on my Haiku VM but it also has GNU sed</p>



<a name="318478583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318478583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318478583">(Dec 29 2022 at 19:56)</a>:</h4>
<p>fwiw, I ran into this in my Mac as well and just made gnu-sed be the default <code>sed</code></p>



<a name="318478725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318478725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318478725">(Dec 29 2022 at 19:57)</a>:</h4>
<p>after <code>brew install gnu-sed</code> there should be a link in  <code>/opt/homebrew/opt/gnu-sed/libexec/gnubin</code> (or <code>/usr/local/opt/gnu-sed/libexec/gnubin</code> if Intel mac) so just prepend that to your path and it should work</p>



<a name="318478744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318478744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318478744">(Dec 29 2022 at 19:57)</a>:</h4>
<p>but it's annoying that this sort of incomaptibility exists :/</p>



<a name="318487713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318487713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318487713">(Dec 29 2022 at 21:18)</a>:</h4>
<p>Bash is a terrible language to write cross-platform code</p>



<a name="318582715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318582715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318582715">(Dec 30 2022 at 13:08)</a>:</h4>
<p>Unfortunately, so are all the others.</p>



<a name="318583208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318583208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318583208">(Dec 30 2022 at 13:11)</a>:</h4>
<p>It's safer to write it in Lean, if possible. Because that would trigger a self-contained run, always using the same executor for everyone, at any point, modulo eventual differences in the execution of binaries generated for each OS (which should always be reported and are in the scope of the core devs)</p>



<a name="318591471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318591471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trebor Huang <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318591471">(Dec 30 2022 at 13:56)</a>:</h4>
<p><del>Lean OS on the way.</del></p>



<a name="318594587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318594587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318594587">(Dec 30 2022 at 14:11)</a>:</h4>
<p>A Lean reimplementation is of course welcome, if someone would like to contribute one.</p>



<a name="318619872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318619872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318619872">(Dec 30 2022 at 16:39)</a>:</h4>
<p>IIRC, the dependency for  Lean implementation is a safe HTTP &amp; TLS client</p>



<a name="318623514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318623514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318623514">(Dec 30 2022 at 16:56)</a>:</h4>
<p>The script already calls <code>curl</code> anyway, so you might as well call it in Lean</p>



<a name="318632566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318632566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318632566">(Dec 30 2022 at 18:00)</a>:</h4>
<p>Or we could just bundle it into mathlibtools, since pretty much everyone involved in the port had a working installation of that</p>



<a name="318633641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318633641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318633641">(Dec 30 2022 at 18:07)</a>:</h4>
<p>I don't have an installation of mathlibtools</p>



<a name="318636347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318636347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318636347">(Dec 30 2022 at 18:29)</a>:</h4>
<p>You don't use <code>leanproject</code>?</p>



<a name="318636392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318636392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318636392">(Dec 30 2022 at 18:30)</a>:</h4>
<p>Nope</p>



<a name="318638446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318638446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318638446">(Dec 30 2022 at 18:45)</a>:</h4>
<p>How do you get your caches for lean3?</p>



<a name="318638952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318638952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318638952">(Dec 30 2022 at 18:49)</a>:</h4>
<p>My what?</p>



<a name="318639583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/318639583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#318639583">(Dec 30 2022 at 18:54)</a>:</h4>
<p>He already upgraded</p>



<a name="321725407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321725407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321725407">(Jan 16 2023 at 22:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/287929-mathlib4/topic/start_port.2Esh.20fails/near/318468187">said</a>:</p>
<blockquote>
<p>I installed gnu-sed and aliased to sed ffwiw</p>
</blockquote>
<p>As an update,  <code>brew</code>'d<code>gsed</code> still fails</p>



<a name="321725424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321725424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321725424">(Jan 16 2023 at 22:17)</a>:</h4>
<p>how do you do the alias?</p>



<a name="321905534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321905534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321905534">(Jan 17 2023 at 19:09)</a>:</h4>
<p><code>alias sed=gsed</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">which</span> <span class="n">sed</span>
<span class="n">sed</span><span class="o">:</span> <span class="n">aliased</span> <span class="n">to</span> <span class="n">gsed</span>
<span class="bp">%</span> <span class="n">sed</span> <span class="c1">--version</span>
<span class="n">gsed</span> <span class="o">(</span><span class="n">GNU</span> <span class="n">sed</span><span class="o">)</span> <span class="mi">4</span><span class="bp">.</span><span class="mi">9</span>
</code></pre></div>



<a name="321910469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321910469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321910469">(Jan 17 2023 at 19:33)</a>:</h4>
<p>do you <code>export</code> that?</p>



<a name="321910968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321910968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321910968">(Jan 17 2023 at 19:35)</a>:</h4>
<p>Judging from your prompt, you might be using a non-<code>sh</code> shell. Then I'm not sure if whatever customization you have set up will apply to <code>start_port.sh</code>.</p>



<a name="321911946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321911946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321911946">(Jan 17 2023 at 19:40)</a>:</h4>
<p>I'm using <code>zsh</code> which is standard for OS X; I elided the computer name, etc from the prompt. But yeah, it's possible my alias only takes effect for <code>zsh</code>...</p>



<a name="321912046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321912046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321912046">(Jan 17 2023 at 19:41)</a>:</h4>
<p>and that the shell script defaults to <code>bash</code> -- sigh.</p>



<a name="321912478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321912478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321912478">(Jan 17 2023 at 19:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/287929-mathlib4/topic/start_port.2Esh.20fails/near/318478725">said</a>:</p>
<blockquote>
<p>after <code>brew install gnu-sed</code> there should be a link in  <code>/opt/homebrew/opt/gnu-sed/libexec/gnubin</code> (or <code>/usr/local/opt/gnu-sed/libexec/gnubin</code> if Intel mac) so just prepend that to your path and it should work</p>
</blockquote>
<p>have you tried adding this to your <code>path</code> <span class="user-mention" data-user-id="542196">@Arien Malec</span> ?</p>



<a name="321912608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321912608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321912608">(Jan 17 2023 at 19:45)</a>:</h4>
<p>the issue is where -- I think I can update this so deeply that <code>/bin/sh</code> picks it up as well.</p>



<a name="321912635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321912635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321912635">(Jan 17 2023 at 19:45)</a>:</h4>
<p>Try adding the <code>alias</code> line to <code>.bashrc</code>? or put a gnu sed on the path, yeah</p>



<a name="321915228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321915228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321915228">(Jan 17 2023 at 20:00)</a>:</h4>
<p>no, it's on zshrc</p>



<a name="321915306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321915306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321915306">(Jan 17 2023 at 20:00)</a>:</h4>
<p>bash doesn't run bashrc when it  runs only a script, just for interactive sessions</p>



<a name="321916431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321916431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321916431">(Jan 17 2023 at 20:07)</a>:</h4>
<p>Oh whoops you're right</p>



<a name="321916655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321916655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321916655">(Jan 17 2023 at 20:08)</a>:</h4>
<p>i've dealt with this fiasco already so I know the rundown :b</p>



<a name="321918464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/321918464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#321918464">(Jan 17 2023 at 20:19)</a>:</h4>
<p>added to <code>/etc/paths</code> <span aria-label="fingers crossed" class="emoji emoji-1f91e" role="img" title="fingers crossed">:fingers_crossed:</span></p>



<a name="322347080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/start_port.sh%20fails/near/322347080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/start_port.2Esh.20fails.html#322347080">(Jan 19 2023 at 18:17)</a>:</h4>
<p>note that now you'll need gnu awk too (<code>brew install gawk</code>) and also similar extra steps</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>