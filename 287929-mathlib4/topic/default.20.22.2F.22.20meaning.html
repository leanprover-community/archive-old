---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html">default "/" meaning</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="322657562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322657562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322657562">(Jan 21 2023 at 03:31)</a>:</h4>
<p>I think that if people type e.g. <code>3 / 4</code>, there's a ‚â•90% chance they mean three fourths instead of <code>0</code>‚Äîbut <code>0</code> is the default interpretation, since <code>/</code> among nats defaults to <code>Nat.div</code>, and <code>/</code> among ints defaults to the similar <code>Int.div</code>.</p>
<p>I understand the desire to have operations default to a <code>Œ± ‚Üí Œ± ‚Üí Œ±</code> type signature, but my expectation is that that just doesn't reflect the most common actual usage in this particular case.</p>
<p>I feel as though type annotations should be required to specify that I actually want  e.g. <code>Int.div</code> instead of type annotations being required to get a rational number. (If type annotations wouldn't work in this case for whatever reason, could we either move to another symbol or just rely on <code>Int.div</code> or <code>Nat.div</code>?)</p>
<p>Is there any support for having <code>/</code> among nats and ints always land in <code>‚Ñö</code> in mathlib4?</p>



<a name="322670582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322670582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322670582">(Jan 21 2023 at 06:04)</a>:</h4>
<p>Currently, we try to be as close to <code>mathlib3</code> as possible.</p>



<a name="322670634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322670634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322670634">(Jan 21 2023 at 06:05)</a>:</h4>
<p>While Lean 4 supports <code>HDiv</code>, we don't use it (yet).</p>



<a name="322670684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322670684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322670684">(Jan 21 2023 at 06:06)</a>:</h4>
<p>Once the migration is complete, we can talk about possible refactors.</p>



<a name="322670777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322670777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322670777">(Jan 21 2023 at 06:08)</a>:</h4>
<p>E.g., we don't use <code>HMul</code> for scalar multiplication.</p>



<a name="322673166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322673166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322673166">(Jan 21 2023 at 06:44)</a>:</h4>
<p>You‚Äôre right, I should have saved this thought until after the port! :)</p>
<p>‚Ä¶If we dare to think that far in advance, though, how do people feel about this? üëÄ</p>



<a name="322673325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322673325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322673325">(Jan 21 2023 at 06:47)</a>:</h4>
<p>I guess you'll also propose making nat-subtraction give an integer?</p>



<a name="322673704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322673704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322673704">(Jan 21 2023 at 06:51)</a>:</h4>
<p>That DOES seem reasonable to me! :) But if I had to make a case for just one change, I would say that there‚Äôs a bit of a stronger one for <code>/</code>, since <code>/</code> is not ‚Äújust‚Äù a binary operation, but also our primary way of writing nonintegral rational numbers.</p>



<a name="322674004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322674004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322674004">(Jan 21 2023 at 06:55)</a>:</h4>
<p>Agda uses ‚à∏ for Nat subtraction, which seems sensible and would reduce the number of "how come I can't prove this [false] lemma" questions</p>



<a name="322674112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322674112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322674112">(Jan 21 2023 at 06:56)</a>:</h4>
<p>I might also suggest the notation <code>√∑</code> for nat and int division, which would coincidentally be visually consistent with <code>‚à∏</code>! (‚Ä¶In the distant future, of course. üôÉ)</p>



<a name="322687890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322687890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322687890">(Jan 21 2023 at 09:16)</a>:</h4>
<p>We considered monus early in Lean 4 and discarded it for being entirely too strange for programming. I'm afraid I don't have a satisfying answer here.</p>



<a name="322688137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322688137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322688137">(Jan 21 2023 at 09:17)</a>:</h4>
<p>Perhaps making the "bad" instances scoped would be acceptable for programmers if we also had a system to suggest opening that namespace on failed TC inference to avoid the immediate "WTF" reaction</p>



<a name="322688478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322688478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322688478">(Jan 21 2023 at 09:20)</a>:</h4>
<p>Hmm, it might be too strange for programming, but is it too strange for mathematics? If not, would localizing the notation to mathlib4 somehow be a potential solution?</p>



<a name="322688620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322688620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322688620">(Jan 21 2023 at 09:21)</a>:</h4>
<p>How would that help if there is still a global <code>Sub Nat</code> instance in core?</p>



<a name="322695590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322695590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322695590">(Jan 21 2023 at 10:11)</a>:</h4>
<p>Would it make sense for <code>2 / 3</code> with natural number literals to desugar to <code>ofFraction 2 3</code>? Then that typeclass could just be missing for Int and Nat, and you could force int division with <code>(2)/3</code> or something</p>



<a name="322697169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322697169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322697169">(Jan 21 2023 at 10:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning/near/322687890">said</a>:</p>
<blockquote>
<p>We considered monus early in Lean 4 and discarded it for being entirely too strange for programming. I'm afraid I don't have a satisfying answer here.</p>
</blockquote>
<p>But isn't the semantics of <code>-</code> on Nat even more "too strange for programming"? I thought this would be an advantage of monus, not a disadvantage</p>



<a name="322697693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322697693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322697693">(Jan 21 2023 at 10:27)</a>:</h4>
<p>For instance if you write <code>a[i-1]</code> and <code>i : Nat</code> is zero then I think it's very unlikely you silently want to return <code>a[0]</code></p>



<a name="322698138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322698138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322698138">(Jan 21 2023 at 10:30)</a>:</h4>
<p>Right, but usually we use subtraction in that way when we're relatively sure it cannot overflow... famous last words. What I'm trying to say is, I think programmers expect that there is <em>some</em> subtraction that does the right thing in the happy case, and are aware that it probably doesn't do what they need in other cases.</p>



<a name="322698202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322698202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322698202">(Jan 21 2023 at 10:31)</a>:</h4>
<p>If <code>i - 1 = -1 : Int</code> then you can make a <code>GetElem</code> instance that does the right thing e.g. <code>a[-1]? = none</code>, or you can use dotminus and then be aware that you need to check somethinig</p>



<a name="322698242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322698242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322698242">(Jan 21 2023 at 10:31)</a>:</h4>
<p>In advent of code I basically never used Nat, since it's so obviously full of footguns</p>



<a name="322698469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322698469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322698469">(Jan 21 2023 at 10:33)</a>:</h4>
<p>Like it's possible to write correct code with Nat sure, but why try</p>



<a name="322698539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/default%20%22/%22%20meaning/near/322698539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/default.20.22.2F.22.20meaning.html#322698539">(Jan 21 2023 at 10:33)</a>:</h4>
<p>True, our APIs are perhaps more Nat-focused than they should be. Though <code>/</code> is not quite as easy to solve.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>