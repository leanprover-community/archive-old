---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html">porting `Data.RBTree.Init`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="309174515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309174515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309174515">(Nov 11 2022 at 11:34)</a>:</h4>
<p>I'm would like to try and port <code>Data.RBTree.Init</code>. Should it go in <code>Mathlib</code> or <code>Std</code>?</p>



<a name="309174690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309174690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309174690">(Nov 11 2022 at 11:36)</a>:</h4>
<p>probably mathlib4, we can move parts to Std4 later on</p>



<a name="309175658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309175658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309175658">(Nov 11 2022 at 11:43)</a>:</h4>
<p>It seems like I do not have the permission to write to a non-master branch. Is it still standard to work on an non-master branch? If so, can someone grant the right to me? Thanks!</p>



<a name="309179873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309179873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309179873">(Nov 11 2022 at 12:12)</a>:</h4>
<p><span class="user-mention" data-user-id="439483">@Andrew Yang</span> note that there's also <a href="https://leanprover-community.github.io/mathlib4_docs/Std/Data/RBMap/Basic.html">https://leanprover-community.github.io/mathlib4_docs/Std/Data/RBMap/Basic.html</a> in std4, so I'm not sure what (if anything) still needs porting</p>



<a name="309180835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309180835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309180835">(Nov 11 2022 at 12:19)</a>:</h4>
<p>Oh I didn't notice that. But that rbtree is (syntactically) different than the <a href="https://leanprover-community.github.io/mathlib_docs/find/rbtree">docs#rbtree</a> in mathlib3, and we should probably do something to appease mathport? Is it possible to align them in this case?</p>



<a name="309191810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309191810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309191810">(Nov 11 2022 at 13:23)</a>:</h4>
<p>I think a suitable "port" of the <code>data.rbtree</code> is: make a list of all the theorems about rbtree that don't yet exist in <code>Std.Data.RBMap</code>, open an issue for them on <code>std4</code>, and then remove everything from the module except for <code>#align</code>s if possible (if the types are too different, just leave them unaligned). <code>Std.Data.RBMap</code> intends to completely replace that directory.</p>



<a name="309265664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/309265664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#309265664">(Nov 11 2022 at 21:59)</a>:</h4>
<p><span class="user-mention" data-user-id="439483">@Andrew Yang</span>, I've given you permissions for mathlib4.</p>



<a name="318274861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/318274861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lukas Miaskiwskyi <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#318274861">(Dec 28 2022 at 15:22)</a>:</h4>
<p>I PR'd the RBTree.Init file a couple hours ago, thinking it'd be a simple job, but this thread showed me that it's a bit of a nonstandard endeavour :) I followed <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>'s recommended approach trying to align the contents with the corresponding ones from std4, maybe someone can have a look if things make sense in there: <a href="https://github.com/leanprover-community/mathlib4/pull/1246">https://github.com/leanprover-community/mathlib4/pull/1246</a></p>



<a name="318276027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/porting%20%60Data.RBTree.Init%60/near/318276027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/porting.20.60Data.2ERBTree.2EInit.60.html#318276027">(Dec 28 2022 at 15:29)</a>:</h4>
<p>Note: I have an incomplete port of the rbtree files in progress, although it is a relatively low priority so I'm not actively working on it now. As for the <code>#align</code>s, most of them need to have <code>\_x</code> because they aren't exact defeq ports, and for something like <code>depth</code> which is more than a little different (such that it would not be reasonable to ask someone porting a downstream file to migrate from one definition to the other) it should either be <code>#noalign</code>ed or <code>#align</code>ed to a <code>depth'</code> function that is defined as it is in mathlib3.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>