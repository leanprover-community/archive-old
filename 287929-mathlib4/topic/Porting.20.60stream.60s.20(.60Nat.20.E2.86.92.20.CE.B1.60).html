---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html">Porting `stream`s (`Nat → α`)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282638143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282638143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282638143">(May 17 2022 at 13:16)</a>:</h4>
<p>Original discussion in <a class="stream-topic" data-stream-id="270676" href="/#narrow/stream/270676-lean4/topic/infinite.20lists">#lean4 &gt; infinite lists</a>.</p>
<p>I ported the <code>stream</code> type from <a href="https://github.com/leanprover-community/mathlib/tree/master/src/data/stream/defs.lean"><code>mathlib/data/stream/defs.lean</code></a> and <a href="https://github.com/leanprover-community/mathlib/tree/master/src/data/stream/init.lean"><code>mathlib/data/stream/init.lean</code></a> which encodes streams as functions over discrete time (<code>Nat → α</code>).</p>
<ul>
<li><a href="https://github.com/AdrienChampion/mathlib4/tree/streams/Mathlib/Data/FStream">https://github.com/AdrienChampion/mathlib4/tree/streams/Mathlib/Data/FStream</a></li>
</ul>
<p>If deemed worth it, I would be interested in contributing this code to mathlib4. I wrote it as an exercise: naming the stream type <code>FStream</code> might not have been a good idea, and commits (all two of them) do not follow lean's commit conventions, but that's easily fixed.</p>



<a name="282674863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282674863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282674863">(May 17 2022 at 17:13)</a>:</h4>
<p>Not sure about this, but I'm guessing this will be covered by synport. Are you aware of the general <a href="https://leanprover-community.github.io/blog/posts/intro-to-mathport/">porting strategy</a> for mathlib4?</p>



<a name="282705008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282705008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282705008">(May 17 2022 at 20:50)</a>:</h4>
<p>Well in the original discussion <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> pointed to the ported version of these files</p>
<ul>
<li><a href="https://github.com/leanprover-community/mathlib3port/blob/master/Mathbin/Data/Stream/Defs.lean">https://github.com/leanprover-community/mathlib3port/blob/master/Mathbin/Data/Stream/Defs.lean</a></li>
<li><a href="https://github.com/leanprover-community/mathlib3port/blob/master/Mathbin/Data/Stream/Init.lean">https://github.com/leanprover-community/mathlib3port/blob/master/Mathbin/Data/Stream/Init.lean</a></li>
</ul>
<p>I was then told that they would most likely not work right away, or at least the <code>Init</code>file, because of the dependency on <code>tactic.ext</code>. The port itself was initially more of an exercise than anything for me, so I did not investigate much.</p>
<p>All I can say is that I was using the ported <code>Init.lean</code> and went back to the Lean 3 version when I ran into a few theorems/proofs that did not make sense. I don't remember precisely what the problem was but I can re-discover it if you want more details (I vaguely remember notation clashes or something like that but I'm not sure)</p>



<a name="282705140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282705140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282705140">(May 17 2022 at 20:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="372804">Marcus Rossel</span> <a href="#narrow/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20.28.60Nat.20.E2.86.92.20.CE.B1.60.29/near/282674863">said</a>:</p>
<blockquote>
<p>Not sure about this, but I'm guessing this will be covered by synport. Are you aware of the general <a href="https://leanprover-community.github.io/blog/posts/intro-to-mathport/">porting strategy</a> for mathlib4?</p>
</blockquote>
<p>To address your question no, I was not aware of this page. Thank you for mentioning it I'll read this asap</p>



<a name="282706086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282706086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282706086">(May 17 2022 at 20:59)</a>:</h4>
<p>Also, my version includes Lean-4-ifying some aspects that (I assume) synport would not cover. (Slightly) more documentation is one aspect, but I'm thinking more of defining functions in the appropriate namespace for accessibility and <code>val.fun args</code> notation. For instance the original version has <code>appendStream : List -&gt; stream a -&gt; stream a</code> which I changed to <code>List.appendStream</code>, and added <code>FStream.prependList</code>.</p>



<a name="282706427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282706427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282706427">(May 17 2022 at 21:01)</a>:</h4>
<p>Admittedly there are few situations like that in the port</p>



<a name="282791247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282791247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282791247">(May 18 2022 at 13:55)</a>:</h4>
<p>I think we should try not to make any naming changes for things that already exist, because this makes downstream porting a lot harder. If your innovations are possible to do in lean 3 as well as lean 4, it seems better to submit them first to mathlib and then port it to mathlib4.</p>



<a name="282791379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/282791379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#282791379">(May 18 2022 at 13:56)</a>:</h4>
<p>Perhaps we should also back-port the new name, since <code>stream</code> is taken</p>



<a name="283066924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/283066924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#283066924">(May 20 2022 at 13:11)</a>:</h4>
<p>I understand. Sadly, I have virtually no experience with Lean 3 and not enough time to get into it for the sake of this (very minor) contribution :/</p>



<a name="283066991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Porting%20%60stream%60s%20%28%60Nat%20%E2%86%92%20%CE%B1%60%29/near/283066991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Porting.20.60stream.60s.20(.60Nat.20.E2.86.92.20.CE.B1.60).html#283066991">(May 20 2022 at 13:12)</a>:</h4>
<p>Thank you all for the feedback though!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>