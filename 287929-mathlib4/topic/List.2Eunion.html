---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/List.2Eunion.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html">List.union</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="320456191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320456191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320456191">(Jan 10 2023 at 13:56)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">nil_union</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">nil.union</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">l</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">List.union</span><span class="o">,</span> <span class="n">foldr</span><span class="o">]</span>

<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">cons_union</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l₁</span> <span class="n">l₂</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
    <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">l₁</span><span class="o">)</span><span class="bp">.</span><span class="n">union</span> <span class="n">l₂</span> <span class="bp">=</span> <span class="o">(</span><span class="n">l₁.union</span> <span class="n">l₂</span><span class="o">)</span><span class="bp">.</span><span class="n">insert</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">List.union</span><span class="o">,</span> <span class="n">foldr</span><span class="o">]</span>
</code></pre></div>
<p>Why do these not use union notation? Now they are basically unusable.</p>



<a name="320456310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320456310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320456310">(Jan 10 2023 at 13:57)</a>:</h4>
<p><del>This is a question about mathlib3, right?</del> Looks like <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.cons_union#doc">docs4#List.cons_union</a> used notation in <a href="https://leanprover-community.github.io/mathlib_docs/find/list.cons_union">docs#list.cons_union</a>. Is this a mathport bug?</p>



<a name="320456955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320456955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320456955">(Jan 10 2023 at 14:00)</a>:</h4>
<p>It looks like a Std bug.</p>



<a name="320457030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320457030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320457030">(Jan 10 2023 at 14:00)</a>:</h4>
<p>This is in <code>Std/Data/List/Lemmas</code> and it's not using any notation.</p>



<a name="320487723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320487723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320487723">(Jan 10 2023 at 16:13)</a>:</h4>
<p>I'm currently just passing the instance to <code>simp</code>. I don't think mathlib uses it too much anyway.</p>



<a name="320504660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320504660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320504660">(Jan 10 2023 at 17:30)</a>:</h4>
<p>I'm not sure I would call it a bug, but we need versions of these theorems that use the notation as well. I'm not even sure the notation is available in that file</p>



<a name="320505269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320505269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320505269">(Jan 10 2023 at 17:33)</a>:</h4>
<p>I'd argue we don't need versions that use the <code>.union</code> spelling, as long as we have a lemma to refold <code>union</code> to the notation</p>



<a name="320506037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320506037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320506037">(Jan 10 2023 at 17:37)</a>:</h4>
<p>I mean the notation might not be imported, or even if it is it might not be desirable. This is std we're talking about, programmers won't reach for the funny cup operator when they can call <code>list.union</code></p>



<a name="320506815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320506815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320506815">(Jan 10 2023 at 17:41)</a>:</h4>
<p>The notation <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.instUnionList#doc">docs4#List.instUnionList</a> is also in Std</p>



<a name="320508578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320508578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320508578">(Jan 10 2023 at 17:49)</a>:</h4>
<p>it is, but not all of Std imports every other part</p>



<a name="320509100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509100">(Jan 10 2023 at 17:51)</a>:</h4>
<p>I don't think it would be a huge deal to have it imported if it isn't already though</p>



<a name="320509488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509488">(Jan 10 2023 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I personally don't really care about what Std looks like. But we'll have a naming clash if we want both versions.</p>



<a name="320509616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509616">(Jan 10 2023 at 17:54)</a>:</h4>
<p>Why do we want <code>∪</code> notation for <code>List</code>?</p>



<a name="320509796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509796">(Jan 10 2023 at 17:55)</a>:</h4>
<p>'cause it's called <code>union</code> I guess?</p>



<a name="320509910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509910">(Jan 10 2023 at 17:55)</a>:</h4>
<p>I'm neutral on the notation. There are a lot of weird lemmas about list.union that don't really make sense if you think about it like a set union</p>



<a name="320509971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320509971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320509971">(Jan 10 2023 at 17:56)</a>:</h4>
<p>like the fact that the left list is a prefix and the right list is a <del>sublist</del> subperm</p>



<a name="320510577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320510577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320510577">(Jan 10 2023 at 17:58)</a>:</h4>
<p>I'm okay with eric's suggestion as well, of having a simp lemma to fold the notation and state all the lemmas with the notation</p>



<a name="320510859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320510859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320510859">(Jan 10 2023 at 18:00)</a>:</h4>
<p>I'm also fine with removing the notation; I just think having two ways to spell exactly the same thing is a disaster when building a library of theorems.</p>



<a name="320515375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320515375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320515375">(Jan 10 2023 at 18:22)</a>:</h4>
<p>I vote for removing the notation. Unless Std wants to use the notation everywhere.</p>



<a name="320573513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320573513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320573513">(Jan 11 2023 at 00:55)</a>:</h4>
<p>I would never use this notation in programming-stuff. too confusing.</p>



<a name="320675043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675043">(Jan 11 2023 at 11:31)</a>:</h4>
<p>We have the same problem for <code>List.insert</code></p>



<a name="320675279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675279">(Jan 11 2023 at 11:32)</a>:</h4>
<p>Just <code>simp only [instInsertList]</code></p>



<a name="320675317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675317">(Jan 11 2023 at 11:32)</a>:</h4>
<p>After that, everything works.</p>



<a name="320675374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675374">(Jan 11 2023 at 11:32)</a>:</h4>
<p>But which is the notation we should be using?</p>



<a name="320675511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675511">(Jan 11 2023 at 11:33)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HasInsert.Insert#doc">docs4#HasInsert.Insert</a> ?</p>



<a name="320675570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675570">(Jan 11 2023 at 11:33)</a>:</h4>
<p>Hmm, that doesn't exist</p>



<a name="320675655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675655">(Jan 11 2023 at 11:34)</a>:</h4>
<p>It's <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Insert.insert#doc">docs4#Insert.insert</a></p>



<a name="320675847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320675847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320675847">(Jan 11 2023 at 11:34)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Insert#doc">docs4#Insert</a></p>



<a name="320677888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320677888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320677888">(Jan 11 2023 at 11:40)</a>:</h4>
<p>Why did we even introduce <code>has_insert.insert</code>? It's a notation typeclass for something we don't even have notation for</p>



<a name="320678842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320678842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320678842">(Jan 11 2023 at 11:43)</a>:</h4>
<p>Yes it is. The notation is <code>{a, b, c}</code></p>



<a name="320685817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320685817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320685817">(Jan 11 2023 at 12:05)</a>:</h4>
<p>So we need to refactor <code>Std</code> to get rid of all mention of <code>List.insert</code>?</p>



<a name="320687929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320687929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320687929">(Jan 11 2023 at 12:16)</a>:</h4>
<p>I think it's not clear whether Std wants to use notation for Lists or avoid it. But it shouldn't try to do both.</p>



<a name="320688029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320688029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320688029">(Jan 11 2023 at 12:17)</a>:</h4>
<p>Is this blocking the port of <code>Data.List.Perm</code> in a nasty way? Or can you work around it?</p>



<a name="320688263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320688263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320688263">(Jan 11 2023 at 12:18)</a>:</h4>
<p>Using set notation for lists seems misleading at best</p>



<a name="320688461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320688461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320688461">(Jan 11 2023 at 12:19)</a>:</h4>
<p>although I think it won't activate unless you use a bunch of <code>insert</code>s on <code>empty</code>, while the simp normal form for the empty list is of course <code>[]</code></p>



<a name="320688802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320688802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320688802">(Jan 11 2023 at 12:20)</a>:</h4>
<p>so in the case of insert I'm inclined to rewrite from <code>Insert.insert</code> to <code>List.insert</code></p>



<a name="320688970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320688970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320688970">(Jan 11 2023 at 12:21)</a>:</h4>
<p>What about just deleting the <code>Insert</code> instance for list then?</p>



<a name="320689007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689007">(Jan 11 2023 at 12:22)</a>:</h4>
<p>or that</p>



<a name="320689116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689116">(Jan 11 2023 at 12:22)</a>:</h4>
<p>maybe it would be best to try these refactors out in mathlib3 first though</p>



<a name="320689143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689143">(Jan 11 2023 at 12:22)</a>:</h4>
<p>That's different from the mathlib3 convention where we use <code>has_insert.insert</code> everywhere for lists</p>



<a name="320689252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689252">(Jan 11 2023 at 12:23)</a>:</h4>
<p>That's going to be another speedbump for the port.</p>



<a name="320689344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689344">(Jan 11 2023 at 12:23)</a>:</h4>
<p>I would rather just <code>simp [instInsertList]</code> and continue.</p>



<a name="320689487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689487">(Jan 11 2023 at 12:24)</a>:</h4>
<p>Once <code>Std</code> figures out which of the two options it prefers, we can adjust mathlib</p>



<a name="320689757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689757">(Jan 11 2023 at 12:25)</a>:</h4>
<p>Is there a need to make an immediate ruling? I think you can add simp lemmas to work around any impedance mismatch if you want to have a particular behavior for the port</p>



<a name="320689883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689883">(Jan 11 2023 at 12:26)</a>:</h4>
<p>Right, that's basically what I'm suggesting, I think</p>



<a name="320689938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320689938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320689938">(Jan 11 2023 at 12:26)</a>:</h4>
<p>For the port we'll use <code>List.insert</code> because that's what the lemmas in <code>Std</code> already use. I'll make a PR changing everything I can find</p>



<a name="320692612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320692612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320692612">(Jan 11 2023 at 12:39)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/1487">https://github.com/leanprover-community/mathlib4/pull/1487</a></p>



<a name="320700824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320700824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320700824">(Jan 11 2023 at 13:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110044">Chris Hughes</span> <a href="#narrow/stream/287929-mathlib4/topic/List.2Eunion/near/320689143">said</a>:</p>
<blockquote>
<p>That's different from the mathlib3 convention where we use <code>has_insert.insert</code> everywhere for lists</p>
</blockquote>
<p>Do you have an example? I've never seen <code>insert</code> used on lists before.</p>



<a name="320701099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320701099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320701099">(Jan 11 2023 at 13:22)</a>:</h4>
<p>Seems pretty random; <a href="https://leanprover-community.github.io/mathlib_docs/find/list.suffix_insert">docs#list.suffix_insert</a> vs <a href="https://leanprover-community.github.io/mathlib_docs/find/list.sublist_insert">docs#list.sublist_insert</a> are right next to each other and use different choices.</p>



<a name="320701218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/List.union/near/320701218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/List.2Eunion.html#320701218">(Jan 11 2023 at 13:23)</a>:</h4>
<p>It looks to me like this is entirely accidental, and the author didn't realize that <code>list.insert</code> was protected so <code>insert x l</code> and <code>l.insert x</code> are not syntactically identical</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>