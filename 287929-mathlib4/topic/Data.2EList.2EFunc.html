---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Data.2EList.2EFunc.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html">Data.List.Func</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="315990441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315990441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315990441">(Dec 15 2022 at 09:24)</a>:</h4>
<p>I'm giving a go at porting <code>Data.List.Func</code> (not claiming the file), and came upon two things which I'm wondering about:</p>
<ul>
<li>mathport translated a <code>mem_cons_iff</code> to <code>mem_cons_iff</code> which doesn't exist anymore, but now <code>mem_cons</code> replaces it. Is that a sign of a missing <code>#align</code> or not at all?</li>
<li>The signature of <a href="https://leanprover-community.github.io/mathlib_docs/data/list/func.html#list.func.eq_get_of_mem"><code>eq_get_of_mem</code></a> looks wrong to me: I think this random <code>d</code> is meant to be interpreted as the "default value", but shouldn't <code>get</code> be called like <code>@get _ \&lt;d\&gt;</code> for this to make sense?</li>
</ul>



<a name="315994003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315994003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315994003">(Dec 15 2022 at 09:44)</a>:</h4>
<p><code>eq_get_of_mem</code> was broken in <a href="https://github.com/leanprover-community/mathlib/pull/827/commits/3826b52128110b8fdf7a89c41075bd3d8d797f32">https://github.com/leanprover-community/mathlib/pull/827/commits/3826b52128110b8fdf7a89c41075bd3d8d797f32</a></p>



<a name="315994081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315994081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315994081">(Dec 15 2022 at 09:44)</a>:</h4>
<p>The <code>forall d</code> should just be removed</p>



<a name="315994861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315994861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315994861">(Dec 15 2022 at 09:48)</a>:</h4>
<p>and the align kept? or is changing the function's signature not cause for dropping an align?</p>



<a name="315997835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315997835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315997835">(Dec 15 2022 at 10:01)</a>:</h4>
<p>OK, just sharing my progress <a href="https://github.com/bottine/mathlib4/tree/bottine/Data.List.Func.aba57d4d3dae35460225919dcd82fe91355162f9">here</a> in case someone wants to have a stab at it before I finish my port.</p>



<a name="315997872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315997872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315997872">(Dec 15 2022 at 10:01)</a>:</h4>
<p>Mm, probably <code>#noalign</code> it - I would suggest fixing in mathlib3, but it's literally only used once in the same file</p>



<a name="315997968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315997968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315997968">(Dec 15 2022 at 10:01)</a>:</h4>
<p>So not worth spending time on, I think</p>



<a name="315998178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/315998178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#315998178">(Dec 15 2022 at 10:02)</a>:</h4>
<p>I'm not sure if people would prefer fixing it in the port or leave it with the weird signature and a note in a comment</p>



<a name="316011348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/316011348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#316011348">(Dec 15 2022 at 11:06)</a>:</h4>
<p>OK, I've got it typechecking in its entirety, but <code>#lint</code> is unhappy.</p>
<p>The main cause for errors was that I had to provide instances of <code>Inhabited \alpha</code> manually when working, say, with <code>AdditiveMonoid \alpha</code>. What's the cause for that?</p>



<a name="316011767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/316011767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#316011767">(Dec 15 2022 at 11:09)</a>:</h4>
<p>Mmh, that seemed to be a problem with the mathlib 3 code already:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">get_neg</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">as</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">get</span> <span class="n">α</span> <span class="o">⟨</span><span class="mi">0</span><span class="o">⟩</span> <span class="n">k</span> <span class="o">(</span><span class="n">neg</span> <span class="n">as</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="o">(</span><span class="bp">@</span><span class="n">get</span> <span class="n">α</span> <span class="o">⟨</span><span class="mi">0</span><span class="o">⟩</span> <span class="n">k</span> <span class="n">as</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span><span class="n">unfold</span> <span class="n">neg</span><span class="o">,</span> <span class="n">rw</span> <span class="o">(</span><span class="bp">@</span><span class="n">get_map'</span> <span class="n">α</span> <span class="n">α</span> <span class="o">⟨</span><span class="mi">0</span><span class="o">⟩),</span> <span class="n">apply</span> <span class="n">neg_zero</span><span class="o">}</span>
</code></pre></div>
<p>Why doesn't <code>[inhabited α]</code> follow here?</p>



<a name="316044961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/316044961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#316044961">(Dec 15 2022 at 13:47)</a>:</h4>
<p>PR here: <a href="https://github.com/leanprover-community/mathlib4/pull/1048">https://github.com/leanprover-community/mathlib4/pull/1048</a></p>



<a name="316045994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/316045994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#316045994">(Dec 15 2022 at 13:52)</a>:</h4>
<p>I was wondering: when porting, are we encouraged to simplify/bikeshed/golf proofs down, or should we stick to being as close to the mathport source as possible?</p>



<a name="316067533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/316067533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#316067533">(Dec 15 2022 at 15:23)</a>:</h4>
<p>I think it's worth flagging if a proof doesn't work and needs to be expanded, with a porting note. If you just feel like golfing and your new proof is definitely not something which takes 10x as long to compile, then why not go for it. I'm not sure it's _encouraged_ though! What's encouraged is that we get through this job ASAP :-)</p>



<a name="320410400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/320410400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#320410400">(Jan 10 2023 at 09:44)</a>:</h4>
<p><strong>Rémi Bottinelli|461830</strong> <a href="#narrow/stream/287929-mathlib4/topic/Data.2EList.2EFunc/near/315990441">said</a>:</p>
<blockquote>
<ul>
<li>mathport translated a <code>mem_cons_iff</code> to <code>mem_cons_iff</code> which doesn't exist anymore, but now <code>mem_cons</code> replaces it. Is that a sign of a missing <code>#align</code> or not at all?</li>
</ul>
</blockquote>
<p>The <code>mem_cons_iff</code> missing align strikes again, this time in <code>Data.List.Permutation</code> :)</p>
<p>It was previously declared in <code>init</code>: <a href="https://github.com/leanprover-community/lean/blob/master/library/init/data/list/lemmas.lean#L100">https://github.com/leanprover-community/lean/blob/master/library/init/data/list/lemmas.lean#L100</a></p>
<p>Where should I put an <code>#align</code>?</p>



<a name="320410469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Data.List.Func/near/320410469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Data.2EList.2EFunc.html#320410469">(Jan 10 2023 at 09:45)</a>:</h4>
<p><code>Mathlib.Init.Data.List.Lemmas</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>