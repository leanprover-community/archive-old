---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html">Syntax for unpacking structures</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316074906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316074906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316074906">(Dec 15 2022 at 15:52)</a>:</h4>
<p>What's the correct syntax to unpack a structure in Lean4/Mathlib4?<br>
For instance, the lean3 code</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">monoid</span> <span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">add_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">add_monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">distrib_mul_action</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">distrib_mul_action</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span> <span class="o">:</span> <span class="n">distrib_mul_action</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span> <span class="bp">×</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span><span class="n">prod.distrib_smul</span> <span class="o">}</span>
</code></pre></div>
<p>is converted by mathlib3port into</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">Monoid</span> <span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">AddMonoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">AddMonoid</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">DistribMulAction</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>
    <span class="o">[</span><span class="n">DistribMulAction</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span> <span class="o">:</span> <span class="n">DistribMulAction</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span> <span class="bp">×</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">Prod.distribSmul</span> <span class="k">with</span> <span class="o">}</span>
</code></pre></div>
<p>which doesn't work.</p>



<a name="316075403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316075403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316075403">(Dec 15 2022 at 15:54)</a>:</h4>
<p>Is it possible that the instance name has changed? That syntax should work otherwise.</p>



<a name="316075560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316075560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316075560">(Dec 15 2022 at 15:55)</a>:</h4>
<p>oh, that's probably it...</p>



<a name="316075863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316075863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316075863">(Dec 15 2022 at 15:56)</a>:</h4>
<p>the auto-generated name is <code>instDistribSMulProdInstAddZeroClassSum</code> <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="316075997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316075997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316075997">(Dec 15 2022 at 15:57)</a>:</h4>
<p>This reminds me of German lessons</p>



<a name="316076084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076084">(Dec 15 2022 at 15:57)</a>:</h4>
<p>I'd suggest you go back and give the instance an explicit name</p>



<a name="316076324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076324">(Dec 15 2022 at 15:58)</a>:</h4>
<p>I asked this before re porting this file (group_theory/group_action/prod) and the answer was to keep the auto-generated name (which is how it's currently done in lean3)</p>



<a name="316076347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076347">(Dec 15 2022 at 15:58)</a>:</h4>
<p>Or replacing the name by <code>inferInstanceAs (...)</code>, but I think we didn't like that?</p>



<a name="316076401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076401">(Dec 15 2022 at 15:58)</a>:</h4>
<p>I think this is a real issue. <br>
These names get exponentially long, since they include other instance names occurring in the type. I'm worried that automatically generated instance names will get literally thousands of characters long...</p>



<a name="316076416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076416">(Dec 15 2022 at 15:58)</a>:</h4>
<p>People have definitely been renaming instances as per Ruben's first suggestion, in other ported files.</p>



<a name="316076492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076492">(Dec 15 2022 at 15:59)</a>:</h4>
<p>Is there a consistent naming convention for instances in mathlib4?</p>



<a name="316076494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076494">(Dec 15 2022 at 15:59)</a>:</h4>
<p>I think we've been doing all possible options :)</p>



<a name="316076550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076550">(Dec 15 2022 at 15:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures/near/316076492">said</a>:</p>
<blockquote>
<p>Is there a consistent naming convention for instances in mathlib4?</p>
</blockquote>
<p>I'm quite sure that is a no</p>



<a name="316076975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316076975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316076975">(Dec 15 2022 at 16:00)</a>:</h4>
<p>Also <code>{ ‹DivisionRing α›, (inferInstance : Semiring α) with }</code></p>



<a name="316082719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316082719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316082719">(Dec 15 2022 at 16:25)</a>:</h4>
<p>what's the naming convention for terms of prop-y typeclasses? E.g. <code>distribMulAction : DistribMulAction</code> seems natural to me, but is this correct?</p>



<a name="316084217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316084217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316084217">(Dec 15 2022 at 16:31)</a>:</h4>
<p>BTW, <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> if you don't mind, could you take a look at <a href="https://github.com/leanprover-community/mathlib4/pull/1056">mathlib4#1056</a> to make sure I ported all the <code>to_additive</code> stuff properly?</p>



<a name="316087838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316087838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316087838">(Dec 15 2022 at 16:46)</a>:</h4>
<p>Yes, it looks good, besides current limitations of the <code>to_additive</code> attribute. Note that for most declarations you can even do something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp, to_additive (reorder := 6)]</span>
<span class="kd">theorem</span> <span class="n">pow_fst</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">p.fst</span> <span class="bp">^</span> <span class="n">c</span> <span class="o">:=</span>
  <span class="n">rfl</span>
<span class="kn">attribute</span> <span class="o">[</span><span class="n">to_additive</span><span class="o">]</span> <span class="n">smul_fst</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.pow_fst</span> <span class="n">Prod.pow_fst</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.smul_fst</span> <span class="n">Prod.smul_fst</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.vadd_fst</span> <span class="n">Prod.vadd_fst</span>

<span class="kd">@[simp, to_additive (reorder := 6)]</span>
<span class="kd">theorem</span> <span class="n">pow_snd</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">p.snd</span> <span class="bp">^</span> <span class="n">c</span> <span class="o">:=</span>
  <span class="n">rfl</span>
<span class="kn">attribute</span> <span class="o">[</span><span class="n">to_additive</span><span class="o">]</span> <span class="n">smul_snd</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.pow_snd</span> <span class="n">Prod.pow_snd</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.smul_snd</span> <span class="n">Prod.smul_snd</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">prod.vadd_snd</span> <span class="n">Prod.vadd_snd</span>
</code></pre></div>
<p>then <code>to_additive</code> generates both the <code>smul</code> and the <code>vadd</code> lemma. It doesn't work for everything though, as discussed before. And the output of <code>to_additive?</code> is very misleading, since it only prints the proof term without the type of the lemma.</p>
<p>I'll try to support the more general reordering of arguments, so that we can properly translate <code>pow_mk</code> and other lemmas.</p>



<a name="316088057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316088057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316088057">(Dec 15 2022 at 16:47)</a>:</h4>
<p>Yes I know I can cut things down, but I wanted to stay as close as possible to the mathlib3 file. I'll add a porting note note in the module doctring</p>



<a name="316115141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316115141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316115141">(Dec 15 2022 at 18:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures/near/316082719">said</a>:</p>
<blockquote>
<p>what's the naming convention for terms of prop-y typeclasses? E.g. <code>distribMulAction : DistribMulAction</code> seems natural to me, but is this correct?</p>
</blockquote>
<p>I think that since <code>DistribMulAction M A : Type</code> is a structure at the end of the day, it makes sense to use <code>lowerCamelCase</code> for its terms/structure instances, in keeping with all other structure instances. The individual field projections (which have return types which are <code>Prop</code>s) are the things that will get named with <code>snake_case</code>. At least, that’s how it is under current naming conventions… :)</p>



<a name="316116096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316116096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316116096">(Dec 15 2022 at 18:55)</a>:</h4>
<p>Also, as it happens, I had <a href="#narrow/stream/270676-lean4/topic/.E2.9C.94.20How.20do.20you.20refer.20to.20instances.20in.20Lean4.3F">this same issue with references to explicit instances</a> while porting!</p>
<p>I wonder how widespread this issue will be during the port. It might be worth coming up with a standard way to rename instances (by at least making them shorter).</p>



<a name="316116122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316116122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316116122">(Dec 15 2022 at 18:55)</a>:</h4>
<p>How have people who have renamed instances renamed them so far?</p>



<a name="316116574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316116574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316116574">(Dec 15 2022 at 18:57)</a>:</h4>
<p>okay, maybe distrib_mul_action was a bad example since it's not actually prop-y (I thought it was a mixin on top of <code>mul_action</code>, but it's not as it extends it). A better example is something like <a href="https://leanprover-community.github.io/mathlib_docs/find/local_ring">docs#local_ring</a></p>



<a name="316116752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316116752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316116752">(Dec 15 2022 at 18:58)</a>:</h4>
<p>The class will be called <code>LocalRing</code>, and it takes values in <code>Prop</code>, but it's still a class. Would terms be named <code>localRing</code> or <code>local_ring</code>?</p>



<a name="316116864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316116864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316116864">(Dec 15 2022 at 18:59)</a>:</h4>
<p>With Lean4 it seems like we use every single naming convention that exists. It's confusing.</p>



<a name="316117165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316117165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316117165">(Dec 15 2022 at 19:00)</a>:</h4>
<p>My vote is for <code>localRing</code> as opposed to <code>local_ring</code> in this case.</p>



<a name="316117174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316117174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316117174">(Dec 15 2022 at 19:00)</a>:</h4>
<p>They would be named <code>local_ring</code> according to current conventions! Terms of things which are <code>Prop</code>s are always <code>lower_snake_case</code>. I was a bit overeager saying “like all other structure instances”—for a second I assumed all structures were <code>Type</code>s 😅</p>



<a name="316117373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316117373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316117373">(Dec 15 2022 at 19:01)</a>:</h4>
<p>(Of course, we <em>could</em> change the conventions—I’m just reporting how they work as written right now.)</p>



<a name="316117706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316117706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316117706">(Dec 15 2022 at 19:02)</a>:</h4>
<p>I don't recall seeing anything about naming terms of structures all of whose fields are props.</p>



<a name="316117950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316117950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316117950">(Dec 15 2022 at 19:04)</a>:</h4>
<p>Right; but this doesn’t use that, does it? It just refers to the fact that <code>LocalRing … : Prop</code></p>



<a name="316118244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316118244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316118244">(Dec 15 2022 at 19:05)</a>:</h4>
<p>It does. Classes are structures, and if all the fields of a structure are props, then the structure will take values in <code>Prop</code> as well</p>



<a name="316118577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316118577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316118577">(Dec 15 2022 at 19:07)</a>:</h4>
<p>The naming convention listed on the porting wiki mentions that theorem names are snake-case. Yes in some sense the fact that a given ring is local is a theorem, but in practice we declare these as instances.</p>



<a name="316119144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316119144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316119144">(Dec 15 2022 at 19:10)</a>:</h4>
<p>I see—I am indeed thinking of conversations I’ve had about this, not the naming convention per se! In those conversations it was said that all that matters is whether the type of something’s type is <code>Prop</code> or not, however it gets there. You’re right, this is not in fact clear from the naming conventions as written as I thought.</p>



<a name="316119471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316119471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316119471">(Dec 15 2022 at 19:12)</a>:</h4>
<p><a href="#narrow/stream/287929-mathlib4/topic/.60Prop.60-valued.20field.20names">This</a> is the conversation I’m thinking of</p>



<a name="316119484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316119484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316119484">(Dec 15 2022 at 19:12)</a>:</h4>
<p>yup, I agree with <span class="user-mention silent" data-user-id="548935">Thomas Murrills</span> as far as my current understanding of the naming convention. Instance or no, if it's a proof it is snake cased</p>



<a name="316119622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316119622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316119622">(Dec 15 2022 at 19:13)</a>:</h4>
<p>If you are going to be at the meeting we can also bring it up for discussion though</p>



<a name="316120912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316120912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316120912">(Dec 15 2022 at 19:20)</a>:</h4>
<p>Actually, reading it explicitly, this <em>is</em> intended to be covered by the naming convention, but I see the confusion. In the following</p>
<blockquote>
<ol>
<li>Terms of <code>Prop</code>s (proofs, theorem names) are in snake_case.</li>
</ol>
</blockquote>
<p>we could afford an “e.g.” in the parenthetical (since terms of things which are <code>Prop</code>s aren’t always thought of primarily as proofs, even if they technically are). I’ll put it there now…</p>



<a name="316123383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316123383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316123383">(Dec 15 2022 at 19:33)</a>:</h4>
<p>Hmmm.... I think according to the naming conventions, the class should be called <code>LocalRing</code> (by 2 on the wiki), and terms of this class are terms of  som <code>Prop</code>, so they get snake_case by (1). <em>However</em>, by (5) this would lead to names like: <code>Field.to_localRing</code>, not <code>Field.to_local_ring</code>, or <code>i_am_a_localRing</code>, not <code>i_am_a_local_ring</code>.  (maybe this was already said above, but if it was I didn't parse it correctly.)</p>



<a name="316125934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316125934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316125934">(Dec 15 2022 at 19:47)</a>:</h4>
<p>I thought instances always matched defs</p>



<a name="316165486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Syntax%20for%20unpacking%20structures/near/316165486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Syntax.20for.20unpacking.20structures.html#316165486">(Dec 16 2022 at 00:01)</a>:</h4>
<p>I wish this was called IsLocalRing because it's a Prop</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>