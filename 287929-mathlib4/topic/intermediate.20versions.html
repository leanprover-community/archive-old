---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/intermediate.20versions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html">intermediate versions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313610064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610064">(Dec 02 2022 at 23:53)</a>:</h4>
<p>A public service announcement about Lean 4 versions.</p>
<p>You may see in mathlib4 master (and some branches), <code>lean-toolchain</code> points to <code>semorrison/lean4:fix-1907</code> right now. We have not forked Lean 4! :-)</p>
<p>The lean4-nightly repository generates releases ... nightly! When we have a critical fix to Lean 4 that affects mathlib4, it is easy for us to generate an unofficial release. All you do is clone the lean4 repo, create a tag (e.g. <code>git tag ABC</code>) and then push it to some fork of the repo (<code>git push fork ABC</code>). CI will then automatically kick in, and produce a release that <code>elan</code> knows how to handle simply by putting the repo and tag in <code>lean-toolchain</code> as above.</p>
<p>One gotcha is that elan/github seems unhappy if the tag name is numeric (it prepends a <code>v</code> when looking for a file, and fails).</p>
<p>It's completely fine to bump Lean 4 back to a nightly version as long as a day has passed and the tagged commit has been incorporated in a lean4-nightly release. Hopefully this will be the exceptional case, and this won't come up very often.</p>
<p>If it would make people happier we could do this at a leanprover-community fork, rather than an individual's; but as this is intended as a very temporary measure hopefully this is fine. (And makes clear we are not forking!!! :-)</p>



<a name="313610551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610551">(Dec 02 2022 at 23:58)</a>:</h4>
<p>rn I'm getting the error <code>error: toolchain 'semorrison/lean4:fix-1907' does not have the binary </code>/Users/arienmalec/.elan/toolchains/semorrison--lean4---fix-1907/bin/lake`</p>



<a name="313610766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610766">(Dec 03 2022 at 00:00)</a>:</h4>
<p>Oh dear...</p>



<a name="313610887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610887">(Dec 03 2022 at 00:01)</a>:</h4>
<p>I overrode with the latest nightly....</p>



<a name="313610943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610943">(Dec 03 2022 at 00:01)</a>:</h4>
<p>Can you try deleting that toolchain (or possibly even <code>~/.elan</code>) and trying again, just in case it is a transient issue?</p>



<a name="313610960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313610960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313610960">(Dec 03 2022 at 00:01)</a>:</h4>
<p>But it does seem suspicious. Could anyone confirm it is working for them?</p>



<a name="313611368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313611368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313611368">(Dec 03 2022 at 00:05)</a>:</h4>
<p>Works for me on Linux.</p>



<a name="313611826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313611826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313611826">(Dec 03 2022 at 00:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/intermediate.20versions/near/313610064">said</a>:</p>
<blockquote>
<p>You may see in mathlib4 master (and some branches), <code>lean-toolchain</code> points to <code>semorrison/lean4:fix-1907</code> right now. We have not forked Lean 4! :-)</p>
</blockquote>
<p>Well, it <em>is</em> a fork of the repo, so...</p>



<a name="313612164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313612164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313612164">(Dec 03 2022 at 00:13)</a>:</h4>
<p>I'm pretty borked. I'll wipe &amp; re-clone.</p>



<a name="313612647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313612647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313612647">(Dec 03 2022 at 00:18)</a>:</h4>
<p>ugh -- still borked -- how do I force lean to retry download?</p>



<a name="313613055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/intermediate%20versions/near/313613055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/intermediate.20versions.html#313613055">(Dec 03 2022 at 00:22)</a>:</h4>
<p>OK, wiped <code>elan</code>  and all good.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>