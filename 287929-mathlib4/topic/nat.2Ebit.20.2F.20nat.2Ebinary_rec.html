---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html">nat.bit / nat.binary_rec</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="312649038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/312649038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#312649038">(Nov 28 2022 at 15:07)</a>:</h4>
<p><code>data.nat.basic</code> (<a href="https://github.com/leanprover-community/mathlib4/pull/729">mathlib4#729</a>) uses <code>nat.bit</code> and <code>nat.binary_rec</code> which depend on <code>bit0</code>/<code>bit1</code>, which are deprecated. Thoughts?</p>



<a name="312649526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/312649526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#312649526">(Nov 28 2022 at 15:09)</a>:</h4>
<p>The consensus is that we could reintroduce them. They are just less central as before.</p>



<a name="312649826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/312649826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#312649826">(Nov 28 2022 at 15:10)</a>:</h4>
<p>The annoying bit (<em>ahem</em>) is that they exist but give deprecation warnings</p>



<a name="312650452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/312650452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#312650452">(Nov 28 2022 at 15:14)</a>:</h4>
<p>I have encountered (two?) places that used <code>nat.binary_rec</code> and in each place I have just reimplemented it from scratch. See for intance <code>Data.Num.Basic</code>.</p>



<a name="312650712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/312650712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#312650712">(Nov 28 2022 at 15:15)</a>:</h4>
<p>For things which explicitly use <code>bit0</code> and <code>bit1</code>, I have been marking those declarations as deprecated but turning off the deprecation linter for those declarations.</p>



<a name="317983013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/317983013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#317983013">(Dec 26 2022 at 16:56)</a>:</h4>
<p>I've just encountered this problem while porting <code>Logic/Equiv/Nat</code> (and in particular <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.nat_sum_nat_equiv_nat_apply">docs#equiv.nat_sum_nat_equiv_nat_apply</a>). So while we definitely don't need this anymore from a technical point of view, maybe there is still a mathematical point in having operations for manipulating natural numbers in binary. What should we do?</p>



<a name="317983084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/317983084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#317983084">(Dec 26 2022 at 16:57)</a>:</h4>
<p>In particular, wouldn't these come up again in the <code>computability</code> library?</p>



<a name="317985651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/317985651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#317985651">(Dec 26 2022 at 17:23)</a>:</h4>
<p>yes, the concept of decomposition into binary isn't going anywhere</p>



<a name="317985728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/317985728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#317985728">(Dec 26 2022 at 17:24)</a>:</h4>
<p>it's just the specific functions bit0 and bit1 that may be reconsidered</p>



<a name="317985828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/317985828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#317985828">(Dec 26 2022 at 17:25)</a>:</h4>
<p>On <code>Nat</code> there is a much more sensible way to write those functions, namely <code>2*n</code> and <code>2*n + 1</code></p>



<a name="318301766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318301766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318301766">(Dec 28 2022 at 17:58)</a>:</h4>
<p>Okay so I decided to use <code>bit false</code> and <code>bit true</code> instead because <code>bit</code> is not tagged as deprectated. I realize this is a bit stupid because <code>bit</code> is defined in terms of <code>bit0</code> and <code>bit1</code>, but I figured it would be best to "stop" the deprecation-zone at the definition of <code>bit</code>. That way, when we want to get rid of them definitively, we only have to provide the definition of <code>bit</code>, which seems like it would be useful anyway to write <code>2*n + (b : Nat)</code>. Does that sound right?</p>



<a name="318306702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318306702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318306702">(Dec 28 2022 at 18:34)</a>:</h4>
<p>I'd be inclined to make changes like that after the port</p>



<a name="318308793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318308793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318308793">(Dec 28 2022 at 18:50)</a>:</h4>
<p>yes, I think we aren't ready to do a bit0/bit1 refactor yet</p>



<a name="318308840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318308840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318308840">(Dec 28 2022 at 18:51)</a>:</h4>
<p>let's wait until we have all the dependent code available so that we can assess what kind of refactor makes sense</p>



<a name="318308889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318308889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318308889">(Dec 28 2022 at 18:51)</a>:</h4>
<p>for now it's just deprecation-tagging to find all the dependents</p>



<a name="318310410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318310410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318310410">(Dec 28 2022 at 19:03)</a>:</h4>
<p>Okay so I'll stay with <code>bit0</code> and <code>bit1</code> then</p>



<a name="318892596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318892596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318892596">(Jan 01 2023 at 18:28)</a>:</h4>
<p>Just to confirm, <code>bit</code> is not being deprecated right?<br>
Just asking because <span class="user-mention" data-user-id="110044">@Chris Hughes</span> marked the statement</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">test_bit_zero</span> <span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">testBit</span> <span class="o">(</span><span class="n">bit</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">b</span>
</code></pre></div>
<p>as deprecated in <a href="https://github.com/leanprover-community/mathlib4/pull/1159">mathlib4#1159</a>, but I don't understand why.</p>



<a name="318892686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318892686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318892686">(Jan 01 2023 at 18:29)</a>:</h4>
<p>I don't think it was me, I think it was someone else working on the PR. There are a whole bunch of deprecated attributes in that file to satisfy the linter</p>



<a name="318892767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318892767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318892767">(Jan 01 2023 at 18:30)</a>:</h4>
<p>Hmm, I checked <code>git blame</code> on the PR branch for that line</p>



<a name="318893082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318893082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318893082">(Jan 01 2023 at 18:34)</a>:</h4>
<p>It probably was me then. The only reason I would have done it was to satisfy the linter. If the linter doesn't complain about that lemma then it was a mistake.</p>



<a name="318893425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/nat.bit%20/%20nat.binary_rec/near/318893425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/nat.2Ebit.20.2F.20nat.2Ebinary_rec.html#318893425">(Jan 01 2023 at 18:37)</a>:</h4>
<p>OK, thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>