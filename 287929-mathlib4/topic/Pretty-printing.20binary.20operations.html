---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html">Pretty-printing binary operations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313721088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721088">(Dec 03 2022 at 18:27)</a>:</h4>
<p>Can we make <code>(·*·)</code> pretty-print to <code>(*)</code> rather than the current <code>(fun x x_1 ↦ x * x_1)</code>?</p>



<a name="313721286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721286">(Dec 03 2022 at 18:29)</a>:</h4>
<p>Well, we would want it to pretty print back to <code>(·*·)</code>.</p>



<a name="313721422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721422">(Dec 03 2022 at 18:30)</a>:</h4>
<p>Am with anything that doesn't involve disambiguated auto-generated names!</p>



<a name="313721439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721439">(Dec 03 2022 at 18:30)</a>:</h4>
<p>Certainly we could hard code that for a few values of <code>*</code>. I'm not sure what criteria you would use generally.</p>



<a name="313721474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721474">(Dec 03 2022 at 18:31)</a>:</h4>
<p>How does Lean 3 do it?</p>



<a name="313721676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721676">(Dec 03 2022 at 18:33)</a>:</h4>
<p>In lean 3, <code>(*)</code> is <code>has_mul.mul</code></p>



<a name="313721702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721702">(Dec 03 2022 at 18:33)</a>:</h4>
<p><code>(·*·)</code> is syntax for the version that isn't delta-reduced</p>



<a name="313721797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313721797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313721797">(Dec 03 2022 at 18:34)</a>:</h4>
<p>Do we want syntax for the delta-reduced version, then?</p>



<a name="313722229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313722229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313722229">(Dec 03 2022 at 18:39)</a>:</h4>
<p>How does it currently print?</p>



<a name="313722399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313722399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313722399">(Dec 03 2022 at 18:41)</a>:</h4>
<p>Do you mean eta reduced?</p>



<a name="313722768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313722768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313722768">(Dec 03 2022 at 18:46)</a>:</h4>
<p>I remember there's a page in some lean documentation that clearly lists what each name means, but I can never remember where to find it</p>



<a name="313756797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313756797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313756797">(Dec 04 2022 at 02:44)</a>:</h4>
<p>I've been thinking about that for a while - I expect that the fact that <code>(.*.)</code> isn't eta-reduced is going to bite us at some point since it is being recommended by mathport in places where lean 3 would have used <code>(*)</code> which is eta-reduced. The way I've been thinking of fixing the issue is to make <code>(bla bla · bla ·)</code> get converted to essentially <code>eta_reduce_fun% x y =&gt; bla bla x bla y</code>where <code>eta_reduce_fun%</code> is a macro which is like <code>fun</code> but eta reduces the resulting lambda if possible.</p>



<a name="313757136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313757136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313757136">(Dec 04 2022 at 02:50)</a>:</h4>
<p>There are a small handful of cases where eta-reducing is undesirable, such as when working with finset.sum and wanting to rewrite under the binder; so I can see us potentially wanting a spelling for both the eta-reduced and non-reduced versions</p>



<a name="313757890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313757890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313757890">(Dec 04 2022 at 03:01)</a>:</h4>
<p>Assuming that the above is implemented, if you don't want to get it eta reduced you just shouldn't write it with the dot/paren notation. So <code>fun x =&gt; foo x</code> is not eta reduced but <code>(foo .)</code> is</p>



<a name="313757949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313757949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313757949">(Dec 04 2022 at 03:02)</a>:</h4>
<p><code>(foo . x)</code> is of course not eta-reduced since it is not an eta redex</p>



<a name="313758059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313758059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313758059">(Dec 04 2022 at 03:04)</a>:</h4>
<p>As I see it, the lambdas were never really there in the source, and they are only being introduced as a desugaring. In the case of <code>(.*.)</code> we are clearly just using the syntax to be able to parse the infix operator <code>*</code> without adding much weirder things into the term grammar</p>



<a name="313758158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313758158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313758158">(Dec 04 2022 at 03:06)</a>:</h4>
<p>On that reading, we should be within our rights to not introduce the lambdas if we don't need them to express the function</p>



<a name="313820103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313820103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313820103">(Dec 04 2022 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations/near/313722768">said</a>:</p>
<blockquote>
<p>I remember there's a page in some lean documentation that clearly lists what each name means, but I can never remember where to find it</p>
</blockquote>
<p>It's here in the <a href="https://leanprover.github.io/reference/expressions.html#computation">Lean 3 reference manual</a></p>



<a name="313826883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Pretty-printing%20binary%20operations/near/313826883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Pretty-printing.20binary.20operations.html#313826883">(Dec 04 2022 at 15:59)</a>:</h4>
<p>Ah, my problem was that I was searching for the ascii spellings of the greek letters, not the letters themselves!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>