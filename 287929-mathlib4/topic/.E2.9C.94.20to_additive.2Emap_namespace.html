---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html">âœ” to_additive.map_namespace</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="322980311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/322980311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#322980311">(Jan 23 2023 at 10:10)</a>:</h4>
<p>What is the Lean4 of the following line found in <a href="https://github.com/leanprover-community/mathlib4/pull/1777">mathlib4#1777</a>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">run_cmd</span>  <span class="n">to_additive.map_namespace</span> <span class="bp">`</span><span class="n">Localization</span> <span class="bp">`</span><span class="n">addlocalization</span>
</code></pre></div>
<p>Lean complains that <code>map_namespace</code> is an invalid field: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">field</span> <span class="bp">'</span><span class="n">map_namespace'</span><span class="o">,</span> <span class="n">the</span> <span class="n">environment</span> <span class="n">does</span> <span class="n">not</span> <span class="n">contain</span> <span class="bp">'</span><span class="n">Lean.ParserDescr.map_namespace'</span>
  <span class="n">to_additive</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">Lean.ParserDescr</span>
</code></pre></div>



<a name="323001734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323001734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323001734">(Jan 23 2023 at 11:58)</a>:</h4>
<p>It's </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">run_cmd</span> <span class="n">Elab.Command.liftCoreM</span> <span class="bp">&lt;|</span> <span class="n">ToAdditive.insertTranslation</span> <span class="bp">`</span><span class="n">Localization</span> <span class="bp">`</span><span class="n">addLocalization</span>
</code></pre></div>
<p>However, that will currently lead to an error in the <code>to_additive</code> attribute when actually defining <code>Localization</code>. That error is fixed in <a href="https://github.com/leanprover-community/mathlib4/pull/1779">mathlib4#1779</a></p>



<a name="323004724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323004724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323004724">(Jan 23 2023 at 12:14)</a>:</h4>
<p>Thanks for the answer.  In the meantime, should I just do the translation manually?</p>



<a name="323011698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323011698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323011698">(Jan 23 2023 at 12:50)</a>:</h4>
<p>Yeah, you can do that if you want.</p>



<a name="323011984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323011984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323011984">(Jan 23 2023 at 12:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="488648">Xavier Roblot</span> has marked this topic as resolved.</p>



<a name="323012130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323012130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323012130">(Jan 23 2023 at 12:53)</a>:</h4>
<p>Not sure if that will have repercussions by not having equation lemmas <code>to_additive</code>-ized.<br>
The safest option might be to remove the <code>map_namespace</code> line and manually name the additive declarations in the <code>Localization</code> namespace (e.g. <code>@[to_additive addLocalization.r ...]</code>) until you have defined <code>Localization</code></p>



<a name="323012185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%E2%9C%94%20to_additive.map_namespace/near/323012185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.E2.9C.94.20to_additive.2Emap_namespace.html#323012185">(Jan 23 2023 at 12:53)</a>:</h4>
<p>Ok. Thanks. I'll try that</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>