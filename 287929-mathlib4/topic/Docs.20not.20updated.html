---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Docs.20not.20updated.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html">Docs not updated</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="317377581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317377581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317377581">(Dec 22 2022 at 14:24)</a>:</h4>
<p>How often is the Mathlib4 Documentation supposed to auto-update itself? It looks like it's currently using a ~1 weel old commit</p>



<a name="317377956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317377956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317377956">(Dec 22 2022 at 14:26)</a>:</h4>
<p>cf</p>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/287929-mathlib4/topic/Online.20docs/near/316245844">said</a>:</p>
<blockquote>
<p>I also noticed that recent "build and deploy docs" actions on doc-gen4 seem to have failed:<br>
<a href="https://github.com/leanprover/doc-gen4/actions">https://github.com/leanprover/doc-gen4/actions</a><br>
Is this expected or does something need to be fixed?</p>
</blockquote>



<a name="317379518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317379518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317379518">(Dec 22 2022 at 14:32)</a>:</h4>
<p>Indeed doc-gen4 is on an older toolchain (I cannot use it somewhere else for the same reason).</p>



<a name="317379695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317379695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317379695">(Dec 22 2022 at 14:32)</a>:</h4>
<p>Oh sorry I missed <a href="#narrow/stream/287929-mathlib4/topic/Online.20docs">https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Online.20docs</a><br>
Is there anyone to ping about that? (And is it urgent enough to ping them during the Christmas holiday?)</p>



<a name="317381021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317381021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317381021">(Dec 22 2022 at 14:38)</a>:</h4>
<p>I hope <span class="user-mention" data-user-id="395550">@Henrik Böving</span> won't mind our alerting him to this, in case he had not noticed. Though the lack of <code>lean-toolchain</code> update seems to be upstream in leanink.</p>



<a name="317381186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317381186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317381186">(Dec 22 2022 at 14:39)</a>:</h4>
<p>Hah and I was thinking its currently broken because latest std4 doesnt build with latest mathlib4 right now. But I can push a toolchain update of course.</p>



<a name="317381440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317381440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317381440">(Dec 22 2022 at 14:41)</a>:</h4>
<p><a href="https://github.com/leanprover/doc-gen4/actions/runs/3758689853/jobs/6387328659">https://github.com/leanprover/doc-gen4/actions/runs/3758689853/jobs/6387328659</a> we shall see in half an hour or so then.</p>



<a name="317383709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317383709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317383709">(Dec 22 2022 at 14:51)</a>:</h4>
<p>I did try updating on a fork and leanink failed. The toolchain in leanink seems antique</p>



<a name="317384289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317384289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317384289">(Dec 22 2022 at 14:53)</a>:</h4>
<p>Yeah I don't touch LeanInk. But that doesn't matter, lake will use the tool chain of your project to compile everything including your dependencies.</p>



<a name="317385671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317385671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317385671">(Dec 22 2022 at 14:59)</a>:</h4>
<p>What I mean is that some change in lean has broken leanink.</p>



<a name="317385751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317385751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317385751">(Dec 22 2022 at 14:59)</a>:</h4>
<p>Specifically the infoview</p>



<a name="317385868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317385868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317385868">(Dec 22 2022 at 15:00)</a>:</h4>
<p>This has now become more structured where leanink expects a pair</p>



<a name="317386909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317386909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317386909">(Dec 22 2022 at 15:04)</a>:</h4>
<p>Here is the error I am getting after pull</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">CMark</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">lake</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Cli</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanInk</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Unicode</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span> <span class="n">LD_LIBRARY_PATH</span><span class="bp">=/</span><span class="n">home</span><span class="bp">/</span><span class="n">gadgil</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-16/lib:/home/gadgil/software/z3/build::./build/lib /home/gadgil/.elan/toolchains/leanprover--lean4---nightly-2022-12-16/bin/lean ./././DocGen4/Process/Base.lean -R ././. -o ./build/lib/DocGen4/Process/Base.olean -i ./build/lib/DocGen4/Process/Base.ilean -c ./build/ir/DocGen4/Process/Base.c</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stdout</span><span class="o">:</span>
<span class="bp">./././</span><span class="n">DocGen4</span><span class="bp">/</span><span class="n">Process</span><span class="bp">/</span><span class="n">Base.lean</span><span class="o">:</span><span class="mi">169</span><span class="o">:</span><span class="mi">6</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span>
  <span class="o">(</span><span class="n">fmt</span><span class="o">,</span> <span class="n">infos</span><span class="o">)</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m.9943</span> <span class="bp">×</span> <span class="bp">?</span><span class="n">m.9946</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="bp">?</span><span class="n">u.9949</span> <span class="bp">?</span><span class="n">u.9948</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">FormatWithInfos</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`/</span><span class="n">home</span><span class="bp">/</span><span class="n">gadgil</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-16/bin/lean` exited with code 1</span>
</code></pre></div>



<a name="317387472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317387472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317387472">(Dec 22 2022 at 15:07)</a>:</h4>
<p>Oh indeed, that gets swallowed by the rest of the compiler output for me, lets see</p>



<a name="317390014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317390014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317390014">(Dec 22 2022 at 15:19)</a>:</h4>
<p>Fixed.</p>



<a name="317390412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317390412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317390412">(Dec 22 2022 at 15:21)</a>:</h4>
<p><a href="https://github.com/leanprover/doc-gen4/actions/runs/3758972373/jobs/6387964570">https://github.com/leanprover/doc-gen4/actions/runs/3758972373/jobs/6387964570</a> and wait again!</p>



<a name="317392523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317392523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317392523">(Dec 22 2022 at 15:31)</a>:</h4>
<p>It worked locally for me.</p>



<a name="317392724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317392724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317392724">(Dec 22 2022 at 15:32)</a>:</h4>
<p>More precisely, it built. I didn't check with another project as there are multiple dependencies all to be updated.</p>



<a name="317392765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317392765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317392765">(Dec 22 2022 at 15:32)</a>:</h4>
<p>Thanks a lot for the fix though.</p>



<a name="317394985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317394985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317394985">(Dec 22 2022 at 15:43)</a>:</h4>
<p>When I try to build docs in a project I am getting a similar error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Building</span> <span class="n">LeanInk.Analysis.InfoTreeTraversal</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">CMark</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">lake</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">doc</span><span class="bp">-</span><span class="n">gen4</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Cli</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Qq</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">aesop</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanInk</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Unicode</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">std</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanaide</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span> <span class="n">LD_LIBRARY_PATH</span><span class="bp">=/</span><span class="n">home</span><span class="bp">/</span><span class="n">gadgil</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-16/lib:/home/gadgil/software/z3/build::././lake-packages/leanInk/build/lib /home/gadgil/.elan/toolchains/leanprover--lean4---nightly-2022-12-16/bin/lean ././lake-packages/leanInk/././LeanInk/Analysis/InfoTreeTraversal.lean -R ././lake-packages/leanInk/./. -o ././lake-packages/leanInk/build/lib/LeanInk/Analysis/InfoTreeTraversal.olean -i ././lake-packages/leanInk/build/lib/LeanInk/Analysis/InfoTreeTraversal.ilean -c ././lake-packages/leanInk/build/ir/LeanInk/Analysis/InfoTreeTraversal.c</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stdout</span><span class="o">:</span>
<span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanInk</span><span class="bp">/././</span><span class="n">LeanInk</span><span class="bp">/</span><span class="n">Analysis</span><span class="bp">/</span><span class="n">InfoTreeTraversal.lean</span><span class="o">:</span><span class="mi">69</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span>
  <span class="o">(</span><span class="n">fmt</span><span class="o">,</span> <span class="n">infos</span><span class="o">)</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m.6795</span> <span class="bp">×</span> <span class="bp">?</span><span class="n">m.6798</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="bp">?</span><span class="n">u.6801</span> <span class="bp">?</span><span class="n">u.6800</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">FormatWithInfos</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanInk</span><span class="bp">/././</span><span class="n">LeanInk</span><span class="bp">/</span><span class="n">Analysis</span><span class="bp">/</span><span class="n">InfoTreeTraversal.lean</span><span class="o">:</span><span class="mi">298</span><span class="o">:</span><span class="mi">31</span><span class="o">:</span> <span class="n">warning</span><span class="o">:</span> <span class="n">unused</span> <span class="kd">variable</span> <span class="bp">`</span><span class="n">contextInfo</span><span class="bp">`</span> <span class="o">[</span><span class="n">linter.unusedVariables</span><span class="o">]</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`/</span><span class="n">home</span><span class="bp">/</span><span class="n">gadgil</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-16/bin/lean` exited with code 1</span>
</code></pre></div>



<a name="317395117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317395117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317395117">(Dec 22 2022 at 15:44)</a>:</h4>
<p>Seems the same change is needed upstream in LeanInk</p>



<a name="317395614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317395614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317395614">(Dec 22 2022 at 15:47)</a>:</h4>
<p>Yeah upstream ink uses the same mechanism and needs the same patch.</p>



<a name="317395803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317395803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317395803">(Dec 22 2022 at 15:48)</a>:</h4>
<p>I'm gonna look into merging my fork upstream in the coming days so that should fix it.</p>



<a name="317478158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317478158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317478158">(Dec 23 2022 at 01:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317377581">said</a>:</p>
<blockquote>
<p>How often is the Mathlib4 Documentation supposed to auto-update itself? It looks like it's currently using a ~1 weel old commit</p>
</blockquote>
<p>Oh also to answer this question, right now CI checks every 6 hours since the build is at like, 60~ min by now and updating more frequent just seems like a waste of computing power to me. And I will probably make it longer and longer (at max 24 h though) as build times increase. That is until the cache that is being worked on eventually comes into effect.</p>



<a name="317482140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317482140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317482140">(Dec 23 2022 at 01:57)</a>:</h4>
<p>I think doc-gen should stop building mathlib4 in its CI as an integration test, and instead use something like std which does not have the goal of increasing compile times indefinitely</p>



<a name="317482160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317482160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317482160">(Dec 23 2022 at 01:57)</a>:</h4>
<p>Mathlib4 CI should be building doc-gen for mathlib4</p>



<a name="317484108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317484108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317484108">(Dec 23 2022 at 02:29)</a>:</h4>
<p>"goal of increasing compile times indefinitely" <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> </p>
<p>Currently doc-gen is broken for use in other projects as I reported above.</p>



<a name="317549791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317549791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317549791">(Dec 23 2022 at 11:57)</a>:</h4>
<p>How? I mean it compiles std4 perfectly fine so thats another project thats just working out. I fixes the lean ink stuff you just have to upgrade.</p>



<a name="317550054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317550054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317550054">(Dec 23 2022 at 11:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317482160">said</a>:</p>
<blockquote>
<p>Mathlib4 CI should be building doc-gen for mathlib4</p>
</blockquote>
<p>We can do this but the idea was to leave the burden of "doc-gen broke omg" to me so your CI isn't always red when I'm doing other stuff.</p>



<a name="317557602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317557602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317557602">(Dec 23 2022 at 12:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317549791">said</a>:</p>
<blockquote>
<p>How? I mean it compiles std4 perfectly fine so thats another project thats just working out. I fixes the lean ink stuff you just have to upgrade.</p>
</blockquote>
<p>Thanks. I will try to narrow my error.</p>



<a name="317558923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317558923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317558923">(Dec 23 2022 at 12:44)</a>:</h4>
<p>For some reason my lake-manifest is pointing at an old version of leanInk even after updating. I will fix this and see.</p>



<a name="317574641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317574641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317574641">(Dec 23 2022 at 14:07)</a>:</h4>
<p>Yes, the fix works fine. For some reason lake was adding an older commit to my manifest so things were not working. When I updated the lake-manifest file everything is fine.</p>



<a name="317610594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317610594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317610594">(Dec 23 2022 at 17:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317550054">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317482160">said</a>:</p>
<blockquote>
<p>Mathlib4 CI should be building doc-gen for mathlib4</p>
</blockquote>
<p>We can do this but the idea was to leave the burden of "doc-gen broke omg" to me so your CI isn't always red when I'm doing other stuff.</p>
</blockquote>
<p>Well ideally it wouldn't be breaking all the time. I would prefer we fix our processes so it can be always-green</p>



<a name="317611898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317611898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317611898">(Dec 23 2022 at 17:23)</a>:</h4>
<p>I mean, it almost always breaks because one of the following:</p>
<ul>
<li>Mac changed something up in Lake again</li>
<li>There was actually a breaking change in a Lean API itself (let it be type or semantic based)</li>
<li>std4 master is not compatible with mathlib4 master (that usually resolves itself)</li>
</ul>
<p>I don't see how to "fix" the first two, itw ill just happen.</p>



<a name="317612242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317612242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317612242">(Dec 23 2022 at 17:25)</a>:</h4>
<p>they are fixed by having doc-gen get bumped as a group with std4 and mathlib4</p>



<a name="317616219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317616219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317616219">(Dec 23 2022 at 17:51)</a>:</h4>
<p>Sure if you want that I can give you the private key to push to the mathlib4_docs repo so you can set that up as a secret in the mathlib4 CI and I can make a PR to build docs there.</p>



<a name="317619974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317619974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317619974">(Dec 23 2022 at 18:16)</a>:</h4>
<p>When I run doc-gen4 on mathlib right now I get quite a weird error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Documenting</span> <span class="n">module</span><span class="o">:</span> <span class="n">Mathlib.Util.Export</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">CMark</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">lake</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">doc</span><span class="bp">-</span><span class="n">gen4</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Cli</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">./</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Qq</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">aesop</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">leanInk</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">Unicode</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span><span class="o">:</span><span class="bp">././</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">std</span><span class="bp">/</span><span class="n">build</span><span class="bp">/</span><span class="n">lib</span> <span class="n">LD_LIBRARY_PATH</span><span class="bp">=/</span><span class="n">home</span><span class="bp">/</span><span class="n">nix</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-22/lib:./build/lib /home/nix/.elan/toolchains/leanprover--lean4---nightly-2022-12-22/bin/lean -DwarningAsError=true ./././Mathlib/Data/Int/Basic.lean -R ././. -o ./build/lib/Mathlib/Data/Int/Basic.olean -i ./build/lib/Mathlib/Data/Int/Basic.ilean -c ./build/ir/Mathlib/Data/Int/Basic.c</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stdout</span><span class="o">:</span>
<span class="bp">./././</span><span class="n">Mathlib</span><span class="bp">/</span><span class="n">Data</span><span class="bp">/</span><span class="n">Int</span><span class="bp">/</span><span class="n">Basic.lean</span><span class="o">:</span><span class="mi">278</span><span class="o">:</span><span class="mi">44</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">Declaration</span> <span class="n">Int.toNat_add_toNat_neg_eq_nat_abs</span> <span class="n">not</span> <span class="n">found.</span>
<span class="o">(</span><span class="n">add</span> <span class="bp">`</span><span class="kd">set_option</span> <span class="n">align.precheck</span> <span class="n">false</span><span class="bp">`</span> <span class="n">to</span> <span class="n">suppress</span> <span class="n">this</span> <span class="n">message</span><span class="o">)</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`/</span><span class="n">home</span><span class="bp">/</span><span class="n">nix</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-22/bin/lean` exited with code 1</span>
</code></pre></div>
<p>Is this expected? Will it just clear itself up with time?</p>



<a name="317624623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317624623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317624623">(Dec 23 2022 at 18:50)</a>:</h4>
<blockquote>
<p>Is this expected?</p>
</blockquote>
<p>This is because of the std4 update.</p>



<a name="317625170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317625170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317625170">(Dec 23 2022 at 18:54)</a>:</h4>
<p>Shouldn't the build be using compatible versions of std4 and mathlib4?</p>



<a name="317625256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317625256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317625256">(Dec 23 2022 at 18:55)</a>:</h4>
<p>building std4:master against mathlib4:master is likely to be frequently broken</p>



<a name="317625450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317625450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317625450">(Dec 23 2022 at 18:56)</a>:</h4>
<p>I think Henrik just did a <code>lake update -Kdoc=on</code> to pick up the new doc-gen4 version and hoped for the best.</p>



<a name="317625560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317625560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317625560">(Dec 23 2022 at 18:57)</a>:</h4>
<p>But this is going to be fixed real soon now: <a href="https://github.com/leanprover-community/mathlib4/pull/1191">mathlib4#1191</a></p>



<a name="317626524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317626524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317626524">(Dec 23 2022 at 19:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/287929-mathlib4/topic/Docs.20not.20updated/near/317625450">said</a>:</p>
<blockquote>
<p>I think Henrik just did a <code>lake update -Kdoc=on</code> to pick up the new doc-gen4 version and hoped for the best.</p>
</blockquote>
<p>Exactly this /o\</p>



<a name="317626548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Docs%20not%20updated/near/317626548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Docs.20not.20updated.html#317626548">(Dec 23 2022 at 19:03)</a>:</h4>
<p>It would be cool if lake provided an option only to update a certain dependency (and its transitive dependencies)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>