---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html">`swap` semantics tactics names</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270761336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270761336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270761336">(Feb 04 2022 at 19:26)</a>:</h4>
<p>/poll Name for a tactic that moves the first goal to the back<br>
rotate<br>
rotate_goals<br>
roll<br>
roll_goals</p>



<a name="270763055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270763055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270763055">(Feb 04 2022 at 19:41)</a>:</h4>
<p>/poll Name for a tactic that moves the n-th goal to the top<br>
pop_goal<br>
lift_goal<br>
pick_goal<br>
raise_goal<br>
pop<br>
lift<br>
pick<br>
raise</p>



<a name="270763746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270763746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270763746">(Feb 04 2022 at 19:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#lift">tactic#lift</a> is already a thing, so it shouldn't be that!</p>



<a name="270776484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270776484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270776484">(Feb 04 2022 at 21:37)</a>:</h4>
<p>I really like the version involving the word goal. Otherwise there are simply too many conflicts with mathematical operations.</p>



<a name="270777904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270777904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270777904">(Feb 04 2022 at 21:52)</a>:</h4>
<p>I second that. I would even suggest that it starts with the word goal</p>



<a name="270782350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270782350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270782350">(Feb 04 2022 at 22:34)</a>:</h4>
<p>Consensus is <del>impossible</del> really hard <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> <br>
I hope the next tactics go more smoothly</p>



<a name="270782402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270782402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270782402">(Feb 04 2022 at 22:35)</a>:</h4>
<p>/poll Which one do you prefer?<br>
rotate, swap<br>
rotate_goals, swap_goals</p>



<a name="270782415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270782415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270782415">(Feb 04 2022 at 22:35)</a>:</h4>
<p>/poll Which one do you prefer?<br>
rotate, swap<br>
rotate_goals, swap_goals</p>



<a name="270783479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270783479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270783479">(Feb 04 2022 at 22:47)</a>:</h4>
<p>Actually nevermind. I think there's enough data to move forward. Thanks everyone for the inputs!</p>



<a name="270784259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270784259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270784259">(Feb 04 2022 at 22:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/178">This is the PR</a> in case anyone wants to review it further.</p>



<a name="270789014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789014">(Feb 04 2022 at 23:54)</a>:</h4>
<p>I think the majority of uses of <code>swap</code> in mathlib are to close a goal not listed first. For this purpose, you really don't want to reorder the remaining goals: a literal <code>swap</code> is a useless tactic that I don't see any reason to have. I wonder if we should instead have a tactic like <code>case</code> but with ordinal goals. (In fact maybe it can even be <code>case</code>? Like <code>case 1 =&gt; ...</code>)</p>



<a name="270789175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789175">(Feb 04 2022 at 23:56)</a>:</h4>
<p>It's awkward to do indentation around <code>swap</code> because it doesn't follow the usual goal structuring behavior: the previous tactic produced two goals so we would normally use braces afterward but we want to solve the goals in reverse order so it ends up looking like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
<span class="n">swap</span><span class="o">,</span> <span class="o">{</span> <span class="n">prove</span> <span class="n">goal</span> <span class="mi">2</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">prove</span> <span class="n">goal</span> <span class="mi">1</span> <span class="o">}</span>
</code></pre></div>



<a name="270789313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789313">(Feb 04 2022 at 23:58)</a>:</h4>
<p>I think in this case (which is syntactically fairly easy to detect in mathport) we should translate it to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">induction</span> <span class="n">n</span>
<span class="n">case</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="n">prove</span> <span class="n">goal</span> <span class="mi">2</span>
<span class="n">prove</span> <span class="n">goal</span> <span class="mi">1</span>
</code></pre></div>
<p>unless someone has a better idea for the name</p>



<a name="270789730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789730">(Feb 05 2022 at 00:02)</a>:</h4>
<p>Isn't that <code>pick_goal 2</code>?</p>



<a name="270789771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789771">(Feb 05 2022 at 00:02)</a>:</h4>
<p>no, <code>pick_goal 2</code> isn't a combinator</p>



<a name="270789810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789810">(Feb 05 2022 at 00:03)</a>:</h4>
<p>this is <code>pick_goal 2; { ... }</code></p>



<a name="270789844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789844">(Feb 05 2022 at 00:03)</a>:</h4>
<p>but the point is that these are actually connected operations, the swapping isn't the point, it's focusing on a non-first goal</p>



<a name="270789927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789927">(Feb 05 2022 at 00:04)</a>:</h4>
<p>and in particular we are adding the constraint of closing the goal at the end of the block</p>



<a name="270789942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789942">(Feb 05 2022 at 00:04)</a>:</h4>
<p>although I think you can opt out of that with many lean 4 tactics if you use <code>?_</code> as the tactic</p>



<a name="270789954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270789954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270789954">(Feb 05 2022 at 00:05)</a>:</h4>
<p>so that <code>case 2 =&gt; ?_</code> would be equivalent to <code>pick_goal 2</code></p>



<a name="270790085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790085">(Feb 05 2022 at 00:06)</a>:</h4>
<p>I dislike the new names for being too verbose for a structural operation, but if I can avoid the need for them then it's fine</p>



<a name="270790152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790152">(Feb 05 2022 at 00:07)</a>:</h4>
<p>lean 4 tactic mode is all about finding better ways to structure proofs, so I don't mind discouraging these tactics that manipulate the goals in a low level way</p>



<a name="270790301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790301">(Feb 05 2022 at 00:09)</a>:</h4>
<p>while we're in the renaming mood, I would suggest <code>work_on_goal n tacs</code> -&gt; <code>on_goal n =&gt; tacs</code></p>



<a name="270790317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790317">(Feb 05 2022 at 00:10)</a>:</h4>
<p>so it's just the same as <code>case</code> but it doesn't close the goal at the end</p>



<a name="270790554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790554">(Feb 05 2022 at 00:13)</a>:</h4>
<p><code>focusn</code></p>



<a name="270790699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790699">(Feb 05 2022 at 00:15)</a>:</h4>
<p>you mean for <code>case</code>?</p>



<a name="270790714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790714">(Feb 05 2022 at 00:15)</a>:</h4>
<p><code>case</code> already exists and has exactly the right semantics so if possible I would just reuse that name</p>



<a name="270790772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270790772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270790772">(Feb 05 2022 at 00:16)</a>:</h4>
<p>that is, either overload the syntax to accept a numeral or modify the syntax in lean 4 core to allow <code>case 2 =&gt; ...</code></p>



<a name="270791106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791106">(Feb 05 2022 at 00:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> something is wrong in my code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">syntax</span> <span class="o">(</span><span class="n">name</span> <span class="o">:=</span> <span class="n">on_goal</span><span class="o">)</span> <span class="s2">"on_goal"</span> <span class="n">ppSpace</span> <span class="s2">"-"</span><span class="bp">?</span> <span class="n">num</span> <span class="n">ppSpace</span> <span class="n">tacticSeq</span> <span class="n">ppSpace</span> <span class="s2">"=&gt;"</span> <span class="o">:</span> <span class="n">tactic</span>
<span class="kd">@[tactic on_goal]</span> <span class="kd">def</span> <span class="n">evalOnGoal</span> <span class="o">:</span> <span class="n">Tactic</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">stx</span> <span class="bp">=&gt;</span> <span class="k">do</span>
<span class="k">match</span> <span class="n">stx</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="n">tactic</span><span class="bp">|</span><span class="n">on_goal</span> <span class="bp">$</span><span class="n">n</span> <span class="bp">$</span><span class="n">seq</span><span class="o">:</span><span class="n">tacticSeq</span> <span class="bp">=&gt;</span><span class="o">)</span>  <span class="bp">=&gt;</span> <span class="n">onGoal</span> <span class="n">n.toNat</span> <span class="n">seq</span> <span class="n">false</span>
  <span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="n">tactic</span><span class="bp">|</span><span class="n">on_goal</span> <span class="bp">-$</span><span class="n">n</span> <span class="bp">$</span><span class="n">seq</span><span class="o">:</span><span class="n">tacticSeq</span> <span class="bp">=&gt;</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">onGoal</span> <span class="n">n.toNat</span> <span class="n">seq</span> <span class="n">true</span>
  <span class="bp">|</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="n">throwUnsupportedSyntax</span>
<span class="n">where</span>
  <span class="n">onGoal</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">seq</span> <span class="o">:</span> <span class="n">Syntax</span><span class="o">)</span> <span class="o">(</span><span class="n">reverse</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">TacticM</span> <span class="n">Unit</span> <span class="o">:=</span> <span class="k">do</span>
    <span class="k">let</span> <span class="o">(</span><span class="n">nth</span><span class="o">,</span> <span class="n">goals</span><span class="o">)</span> <span class="bp">←</span> <span class="n">roundTripNth</span> <span class="n">n</span> <span class="n">reverse</span>
    <span class="k">match</span> <span class="n">nth</span> <span class="k">with</span>
      <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="n">throwError</span> <span class="s2">"goals are 1-indexed"</span>
      <span class="bp">|</span> <span class="n">n'</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span>
        <span class="k">match</span> <span class="n">goals.splitAt</span> <span class="n">n'</span> <span class="k">with</span>
          <span class="bp">|</span> <span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="o">[])</span> <span class="bp">=&gt;</span> <span class="n">throwError</span> <span class="s2">"not enough goals"</span>
          <span class="bp">|</span> <span class="o">(</span><span class="n">gls</span><span class="o">,</span> <span class="n">g</span> <span class="o">::</span> <span class="n">grs</span><span class="o">)</span> <span class="bp">=&gt;</span>
            <span class="n">setGoals</span> <span class="o">[</span><span class="n">g</span><span class="o">]</span>
            <span class="n">evalTactic</span> <span class="n">seq</span>
            <span class="n">setGoals</span> <span class="bp">$</span> <span class="n">gls</span> <span class="bp">++</span> <span class="o">(</span><span class="bp">←</span> <span class="n">getUnsolvedGoals</span><span class="o">)</span> <span class="bp">++</span> <span class="n">grs</span>
</code></pre></div>



<a name="270791133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791133">(Feb 05 2022 at 00:22)</a>:</h4>
<p>How to make the syntax for <code>on_goal n =&gt;</code>?</p>



<a name="270791221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791221">(Feb 05 2022 at 00:23)</a>:</h4>
<p>Ah, wait</p>



<a name="270791297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791297">(Feb 05 2022 at 00:24)</a>:</h4>
<p><code>syntax (name := on_goal) "on_goal" ppSpace "-"? num ppSpace "=&gt;" ppSpace tacticSeq : tactic</code> works <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="270791464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791464">(Feb 05 2022 at 00:27)</a>:</h4>
<p>PR updated</p>



<a name="270791774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791774">(Feb 05 2022 at 00:31)</a>:</h4>
<p>you can actually put spaces in the tokens if you need <code>ppSpace</code> around them</p>



<a name="270791787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791787">(Feb 05 2022 at 00:31)</a>:</h4>
<p>like<br>
<code>syntax (name := on_goal) "on_goal " "-"? num " =&gt; " tacticSeq : tactic</code></p>



<a name="270791927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270791927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270791927">(Feb 05 2022 at 00:33)</a>:</h4>
<p>Alright. While I'm at it, do you know a simple toy example that both <code>simp</code> and <code>rw</code> fail but <code>simp_rw</code> closes it? I'm also opening a PR with your code</p>



<a name="270792001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270792001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270792001">(Feb 05 2022 at 00:34)</a>:</h4>
<p>does <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#simp_rw">tactic#simp_rw</a> have anything?</p>



<a name="270792020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270792020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270792020">(Feb 05 2022 at 00:35)</a>:</h4>
<p>it does</p>



<a name="270792112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270792112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270792112">(Feb 05 2022 at 00:36)</a>:</h4>
<p>Yeah but can we state that one in Mathlib4? I tried it and it but I didn't know what to import to make it work</p>



<a name="270792245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270792245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270792245">(Feb 05 2022 at 00:39)</a>:</h4>
<p>it looks pretty basic, something like data.set.basic should suffice although I don't know if we have much of that</p>



<a name="270792431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270792431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270792431">(Feb 05 2022 at 00:42)</a>:</h4>
<p>We don't have <code>Data.Set</code> yet</p>



<a name="270793305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270793305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270793305">(Feb 05 2022 at 00:57)</a>:</h4>
<p>Here's a standalone version of the example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">,</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">c</span><span class="o">,</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">∀</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">,</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">]</span>
</code></pre></div>



<a name="270793734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270793734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270793734">(Feb 05 2022 at 01:02)</a>:</h4>
<p>What about copyrights? I'm copying a lot of stuff from mathlib repo, like tests and docstrings. I'm unsure how to proceed.<br>
Do I mark the copyright with my name since I'm creating the file, but then list the original authors?</p>



<a name="270795119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/%60swap%60%20semantics%20tactics%20names/near/270795119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/.60swap.60.20semantics.20tactics.20names.html#270795119">(Feb 05 2022 at 01:23)</a>:</h4>
<p>The copyright header on ported files should be copied from the original, although you can add your own name</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>