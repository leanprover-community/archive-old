---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html">data.sigma.default</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="310511029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310511029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310511029">(Nov 16 2022 at 22:11)</a>:</h4>
<p>On the list of "ready to port" is <code>data.sigma.default</code>, which is a one-line file <code>import data.sigma.basic</code>. Are <code>default</code> files still a thing in Lean 4?</p>



<a name="310513432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513432">(Nov 16 2022 at 22:30)</a>:</h4>
<p>I'm inclined to suggest that we just remove all our <code>.default</code> files from mathlib3 anyway.</p>



<a name="310513524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513524">(Nov 16 2022 at 22:31)</a>:</h4>
<p>To reduce unnecessary imports?</p>



<a name="310513544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513544">(Nov 16 2022 at 22:31)</a>:</h4>
<p>Yes, and because they are abused.</p>



<a name="310513633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513633">(Nov 16 2022 at 22:32)</a>:</h4>
<p>For example in the category theory library, <code>.default</code> files are used as normal files, to avoid writing <code>.basic</code>in the imports.</p>



<a name="310513727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513727">(Nov 16 2022 at 22:33)</a>:</h4>
<p>They also mess up doc-gen, as doc-gen only records files with declarations, meaning that dependencies that go through a <code>.default</code> file get forgotten.</p>



<a name="310513796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513796">(Nov 16 2022 at 22:33)</a>:</h4>
<p>Scott, is there any chance these <code>.default</code> imports were abolished (except when they contain something besides imports) by your giant import refactor?</p>



<a name="310513982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310513982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310513982">(Nov 16 2022 at 22:35)</a>:</h4>
<p>Haha, probably. :-)</p>



<a name="310514020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310514020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310514020">(Nov 16 2022 at 22:35)</a>:</h4>
<p>I know we have a bunch of <code>import tactic.linarith</code> (which is really tactic.linarith.default).</p>



<a name="310514146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310514146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310514146">(Nov 16 2022 at 22:36)</a>:</h4>
<p>I would very happily endorse someone renaming all the <code>.default</code> files in category theory!</p>



<a name="310529527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310529527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310529527">(Nov 17 2022 at 01:03)</a>:</h4>
<p>The equivalent of <code>.default</code> files in lean 4 is to have e.g. <code>Data/Sigma/Basic.lean</code> and <code>Data/Sigma.lean</code></p>



<a name="310530943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310530943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310530943">(Nov 17 2022 at 01:21)</a>:</h4>
<p>I agree to some extent with Scott's desire to remove and/or discourage these imports which only serve to group things together because they cause spurious dependencies by design, but for tactics I think we might actually want the opposite: it is better to have fewer entry points to the tactics for <code>precompileModules</code> to be efficient, and also we don't want people importing just one subpart of a tactic, for example you can import <code>Mathlib.Tactic.NormNum.Core</code> and you will get a tactic called <code>norm_num</code> but it is basically unable to solve anything because you didn't import <code>Mathlib.Tactic.NormNum.Basic</code> which has handling for evaluating basic things like <code>+</code> and numbers.</p>



<a name="310581705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310581705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310581705">(Nov 17 2022 at 10:30)</a>:</h4>
<p>I think it makes sense to apply to apply different heuristics to <code>tactic.</code> vs everything else.</p>



<a name="310581856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310581856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310581856">(Nov 17 2022 at 10:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Esigma.2Edefault/near/310529527">said</a>:</p>
<blockquote>
<p>The equivalent of <code>.default</code> files in lean 4 is to have e.g. <code>Data/Sigma/Basic.lean</code> and <code>Data/Sigma.lean</code></p>
</blockquote>
<p>Note that this also works in Lean3; is it worth renaming all our <code>default.lean</code>s accordingly to make the transition easier?</p>



<a name="310582897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310582897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310582897">(Nov 17 2022 at 10:38)</a>:</h4>
<p>If nobody objects, I will delete/rename all <code>.default</code> to <code>.basic</code> later today.</p>



<a name="310583018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310583018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310583018">(Nov 17 2022 at 10:39)</a>:</h4>
<p>I think this is preferable to the <code>data.sigma</code>/<code>data.sigma.something_else</code> situation where a file is out of the folder it belongs to.</p>



<a name="310585747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310585747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310585747">(Nov 17 2022 at 10:57)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span>; Mario's point is that <code>foo/basic.lean</code> + <code>foo/default.lean</code> become <code>Foo/Basic.lean</code> and <code>Foo.lean</code> in Lean 4</p>



<a name="310615943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310615943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310615943">(Nov 17 2022 at 14:06)</a>:</h4>
<p>Right, but I thought we agreed we should just not have any <code>default</code> files in Lean 3, and hence none of the latter pattern in Lean 4. So Yaël's suggestion makes sense to me.</p>



<a name="310621202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310621202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jon Eugster <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310621202">(Nov 17 2022 at 14:34)</a>:</h4>
<p>I have to say I really like the default files (i.e. the ones with just a few imports) for projects depending on mathlib, like just <code>import LinearAlgebra</code> and have everything ready one would usually need to get started instead of figuring out whether I need to import <code>LinearAlgebra.Basic</code> or <code>LinearAlgebra.Basis</code> or something else.<br>
But not sure if any mathlib file should import any default file instead of the explicit imports.</p>



<a name="310678250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.sigma.default/near/310678250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Esigma.2Edefault.html#310678250">(Nov 17 2022 at 19:01)</a>:</h4>
<p>Yeah that's the trick. Maybe there's a way to make shortcuts separate enough from the rest that it would be impossible for mathlib to use them.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>