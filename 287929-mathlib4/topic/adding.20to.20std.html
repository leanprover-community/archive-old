---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/adding.20to.20std.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html">adding to std</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272550260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272550260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272550260">(Feb 19 2022 at 23:32)</a>:</h4>
<p>Im currently working on a package that is meant to expand on lean's current std for lists, but I started considering whether I should add them to lean's std directly. I would like some input. Thank in advance, and also, here is the current <a href="https://github.com/crabbo-rave/lean4-Itertools">repo</a></p>



<a name="272550463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272550463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272550463">(Feb 19 2022 at 23:36)</a>:</h4>
<p>My suggestion is to add to mathlib4, for example here -&gt; <a href="https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Data/List/Defs.lean">https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Data/List/Defs.lean</a></p>



<a name="272550566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272550566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272550566">(Feb 19 2022 at 23:38)</a>:</h4>
<p>Ok, will do</p>



<a name="272550777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272550777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272550777">(Feb 19 2022 at 23:43)</a>:</h4>
<p>But there are some I think would be important in the core std</p>



<a name="272551014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272551014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272551014">(Feb 19 2022 at 23:48)</a>:</h4>
<p>the compiler <code>Std</code>'s purpose is to contain everything that the compiler needs to build itself that doesn't fit in other packages, everything else goes to mathlib 4 for now and will probably find a new home in some "std-ext" or whatever at some point.</p>



<a name="272556973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272556973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272556973">(Feb 20 2022 at 01:45)</a>:</h4>
<p>Ok cool</p>



<a name="272561257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272561257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272561257">(Feb 20 2022 at 03:08)</a>:</h4>
<p>Im pretty new to this, so I want to ask. Is this an ok docstring?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/--</span>
<span class="sd">`List.choose` filters list `l` of type `List α` with `chooser` which is of type `α → Option β`</span>
<span class="sd">It keeps the elements where `chooser x` is `some _` and discards the ones that are `none`</span>

<span class="sd">Example:</span>
<span class="sd">```</span>
<span class="sd">def oneTwo? : Nat → Option Nat</span>
<span class="sd">  | 1 =&gt; some 1</span>
<span class="sd">  | 2 =&gt; some 2</span>
<span class="sd">  | _ =&gt; none</span>

<span class="sd">[1, 2, 3, 5, 1, 4, 2] |&gt; choose oneTwo? = [1, 2, 1, 2]</span>
<span class="sd">```</span>
<span class="sd">-/</span>
</code></pre></div>



<a name="272562321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272562321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272562321">(Feb 20 2022 at 03:32)</a>:</h4>
<p>Can you explain what the beta type does? Does it map to it or ignore the beta value? Your oneTwo? is a version of id, so it's hard to tell.</p>



<a name="272563199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272563199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272563199">(Feb 20 2022 at 03:51)</a>:</h4>
<p><code>l.choose f = l.filter (f · |&gt;.isSome)</code>, so I'm not sure it's a really worthwhile function</p>



<a name="272563272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272563272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272563272">(Feb 20 2022 at 03:52)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="113488" href="/#narrow/stream/113488-general/topic/adding.20to.20std">#general &gt; adding to std</a> by <span class="user-mention silent" data-user-id="110049">Mario Carneiro</span>.</p>



<a name="272563396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272563396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272563396">(Feb 20 2022 at 03:55)</a>:</h4>
<p>the name is also easily confused with other uses of "choose" or "choice" in mathlib, like <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.choose">docs#fintype.choose</a> or <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.choose">docs#nat.choose</a></p>



<a name="272581887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272581887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272581887">(Feb 20 2022 at 10:13)</a>:</h4>
<p>From the example the behavior could also be <code>filter_map</code>.</p>



<a name="272588936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272588936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272588936">(Feb 20 2022 at 12:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/adding.20to.20std/near/272563199">said</a>:</p>
<blockquote>
<p><code>l.choose f = l.filter (f · |&gt;.isSome)</code>, so I'm not sure it's a really worthwhile function</p>
</blockquote>
<p>I guess you are right</p>



<a name="272588975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272588975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272588975">(Feb 20 2022 at 12:23)</a>:</h4>
<p>I have found it useful once or twice, when filtering does out a list with a function that returns option</p>



<a name="272589079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272589079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272589079">(Feb 20 2022 at 12:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/287929-mathlib4/topic/adding.20to.20std/near/272562321">said</a>:</p>
<blockquote>
<p>Can you explain what the beta type does? Does it map to it or ignore the beta value? Your oneTwo? is a version of id, so it's hard to tell.</p>
</blockquote>
<p>I would say that it is ignored</p>



<a name="272589557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272589557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272589557">(Feb 20 2022 at 12:34)</a>:</h4>
<p>That detail is probably good to include in your docstring. Think of the docstring as the specification for your code. Of course, there's always the source code itself, but that might change over time as you discover you have to deal ith certain implementation details. But the docstring, especially for such an API function, would likely remain constant.</p>



<a name="272591913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272591913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272591913">(Feb 20 2022 at 13:19)</a>:</h4>
<p>Ok, thanks</p>



<a name="272592119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272592119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272592119">(Feb 20 2022 at 13:23)</a>:</h4>
<p>Do you think this is better?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/--</span>
<span class="sd">`List.choose` filters list `l` of type `List α` with `chooser` which is of type `α → Option β`,</span>
<span class="sd">yet `β` is ignored.</span>
<span class="sd">It keeps the elements where `chooser x` is `some _` and discards the ones that are `none`</span>
</code></pre></div>



<a name="272592198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272592198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272592198">(Feb 20 2022 at 13:24)</a>:</h4>
<p>And also, is it just me or does docgen-4 have support for docstrings now?</p>



<a name="272593517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/adding%20to%20std/near/272593517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/adding.20to.20std.html#272593517">(Feb 20 2022 at 13:50)</a>:</h4>
<p>Yes it does</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>