---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/OfNat.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html">OfNat</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313845162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313845162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313845162">(Dec 04 2022 at 18:52)</a>:</h4>
<p>I'm currently porting <code>Algebra.Order.Monoid.WithZero</code>. There are a few lemmas like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_le_two</span> <span class="o">[</span><span class="n">Preorder</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">One</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">AddZeroClass</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ZeroLEOneClass</span> <span class="n">α</span><span class="o">]</span>
    <span class="o">[</span><span class="n">CovariantClass</span> <span class="n">α</span> <span class="n">α</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">+</span> <span class="bp">·</span><span class="o">)</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">≤</span> <span class="bp">·</span><span class="o">)]</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="o">:=</span>
  <span class="n">add_nonneg</span> <span class="n">zero_le_one</span> <span class="n">zero_le_one</span>
</code></pre></div>
<p>Inserting the <code>[OfNat α 2]</code> assumption clears up the type error, but the proof doesn't type check because Lean doesn't know if the <code>OfNat</code> implementation of <code>2</code> agrees with <code>1 + 1</code>. What's the correct Lean 4 way of fixing this? I heard some talk a while back about a <code>Numeric</code> typeclass or <code>LawfulOfNat</code>, but I can't see them in mathlib4 currently.</p>



<a name="313854292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313854292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313854292">(Dec 04 2022 at 20:45)</a>:</h4>
<p>Yeah, numerals are only supported for structures extending <code>AddMonoidWithOne</code>.  Separate <code>One α</code> and <code>AddZeroClass α</code> hypotheses won't do it anymore.  One possibility would be to change <code>[One α] [AddZeroClass α]</code> to <code>[AddMonoidWithOne α]</code>.</p>



<a name="313854370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313854370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313854370">(Dec 04 2022 at 20:46)</a>:</h4>
<p>But really, I think that's a gratuitously general definition in mathlib3.  My knee-jerk reaction is usually to specialize these to a sensible algebraic structure, i.e., ordered semirings.  This doesn't seem to break much (I've just started the build): <a href="https://github.com/leanprover-community/mathlib/compare/zeroletwospec?expand=1">https://github.com/leanprover-community/mathlib/compare/zeroletwospec?expand=1</a></p>



<a name="313854568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313854568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313854568">(Dec 04 2022 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="455791">@Yuyang Zhao</span> literally just generalised those lemmas.</p>



<a name="313855443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313855443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313855443">(Dec 04 2022 at 21:02)</a>:</h4>
<p>There's a couple of PRs in that direction, from what I can tell it began with <a href="https://github.com/leanprover-community/mathlib/pull/14510">#14510</a> (for zero_le_two and co.), then <a href="https://github.com/leanprover-community/mathlib/pull/17477">#17477</a> and <a href="https://github.com/leanprover-community/mathlib/pull/17465">#17465</a>.</p>



<a name="313855802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313855802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313855802">(Dec 04 2022 at 21:08)</a>:</h4>
<p>None of the PRs come with a good explanation what the generality is actually useful for.  I fully share Floris' feelings in <a href="https://github.com/leanprover-community/mathlib/pull/14510">#14510</a>:</p>
<blockquote>
<p>I'm worried that every time we add a class like this, we do actually increase the compilation time (and timeout risk) of many files.<br>
<em>Does this class actually solve a problem</em>, except proving that <code>0 &lt;= 2</code> a couple times? [emphasis mine]</p>
</blockquote>



<a name="313856809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313856809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313856809">(Dec 04 2022 at 21:24)</a>:</h4>
<p>I fully agree. There are a few more types that the lemmas apply to, but they are barely used afaict.</p>



<a name="313857289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313857289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313857289">(Dec 04 2022 at 21:30)</a>:</h4>
<p>In my experience, <a href="https://github.com/leanprover-community/mathlib/pull/14510">#14510</a> only brought pain (through elaboration issues).</p>



<a name="313862051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313862051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313862051">(Dec 04 2022 at 22:39)</a>:</h4>
<p>What would you recommend I do in my PR for mathlib4 then?</p>



<a name="313862208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313862208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313862208">(Dec 04 2022 at 22:40)</a>:</h4>
<p>Perhaps the easiest thing to do is remove the lemmas for now, but add a TODO to come back to them later. This file is on the hot path towards <code>algebra.order.field.defs</code>, so I think it'd be preferable to merge <em>something</em> and fix it later.</p>



<a name="313883614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313883614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313883614">(Dec 05 2022 at 04:02)</a>:</h4>
<p>I'll try to make a PR to solve this problem.</p>



<a name="313901401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313901401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313901401">(Dec 05 2022 at 07:17)</a>:</h4>
<p>Why not just assume you have an <code>AddMonoidWithOne</code> and make a porting note? It's hard to imagine that this will cause problems down the line.</p>



<a name="313913120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313913120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313913120">(Dec 05 2022 at 08:42)</a>:</h4>
<p>I made PR <a href="https://github.com/leanprover-community/mathlib/pull/17820">#17820</a> because <code>zero_le_one_class</code> seems should not be put in <code>algebra.order.monoid.with_zero.defs</code></p>



<a name="313917515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/313917515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#313917515">(Dec 05 2022 at 09:09)</a>:</h4>
<p>Can't we just get rid of <code>zero_le_one_class</code>?</p>



<a name="314161826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314161826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314161826">(Dec 06 2022 at 02:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/287929-mathlib4/topic/OfNat/near/313854370">said</a>:</p>
<blockquote>
<p>But really, I think that's a gratuitously general definition in mathlib3.  My knee-jerk reaction is usually to specialize these to a sensible algebraic structure, i.e., ordered semirings.  This doesn't seem to break much (I've just started the build): <a href="https://github.com/leanprover-community/mathlib/compare/zeroletwospec?expand=1">https://github.com/leanprover-community/mathlib/compare/zeroletwospec?expand=1</a></p>
</blockquote>
<p>Let's merge this one. It has the great advantage that it makes life for Sky porting <code>Algebra.Order.Monoid.WithZero.Defs</code> strictly easier, as it is just moving content out of the way.</p>



<a name="314213562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314213562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314213562">(Dec 06 2022 at 11:08)</a>:</h4>
<p>Thanks for your help, the PR <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> is now building.</p>



<a name="314355973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314355973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314355973">(Dec 07 2022 at 00:38)</a>:</h4>
<p>Okay, porting <a href="https://github.com/leanprover-community/mathlib/pull/17820">#17820</a> to mathlib4 was unpleasant (I am frankly embarrassed and disgusted that I wrote and used a lemma that says 3+1=4), but done in <a href="https://github.com/leanprover-community/mathlib4/pull/893">https://github.com/leanprover-community/mathlib4/pull/893</a>. Hopefully thing means we can finally define an ordered ring.</p>
<p>These files aren't in mathlib3port yet, so they were just ported by hand.</p>



<a name="314356355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356355">(Dec 07 2022 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span> just pinging you on this as you had claimed algebra.order.zero_le_one, which I've done in this file.</p>



<a name="314356410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356410">(Dec 07 2022 at 00:43)</a>:</h4>
<p>I saw that I had proofs for some of the stupidly obvious lemmas?</p>



<a name="314356587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356587">(Dec 07 2022 at 00:45)</a>:</h4>
<p>Did you have a PR? I didn't see anything. Please feel free to edit my PR directly (or comment / approve, etc)</p>



<a name="314356741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356741">(Dec 07 2022 at 00:46)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/664">mathlib4#664</a> and you closed it <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">one_add_one</span> <span class="o">[</span><span class="n">One</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">AddZeroClass</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">unaryCast</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">change</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">zero_add</span> <span class="mi">1</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">one_le_two</span> <span class="o">[</span><span class="n">LE</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">One</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">AddZeroClass</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ZeroLEOneClass</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">CovariantClass</span> <span class="n">α</span> <span class="n">α</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">+</span> <span class="bp">·</span><span class="o">)</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">≤</span> <span class="bp">·</span><span class="o">)]</span> <span class="o">:</span>
    <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">unaryCast</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">add_zero</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">←</span> <span class="n">one_add_one</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">add_le_add_left</span> <span class="n">zero_le_one</span> <span class="n">_</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">one_le_two</span> <span class="n">one_le_two</span>

<span class="kd">theorem</span> <span class="n">one_le_two'</span> <span class="o">[</span><span class="n">LE</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">One</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">AddZeroClass</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ZeroLEOneClass</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">CovariantClass</span> <span class="n">α</span> <span class="n">α</span> <span class="o">(</span><span class="n">swap</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">+</span> <span class="bp">·</span><span class="o">))</span> <span class="o">(</span><span class="bp">·</span> <span class="bp">≤</span> <span class="bp">·</span><span class="o">)]</span> <span class="o">:</span>
    <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">unaryCast</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">zero_add</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">←</span> <span class="n">one_add_one</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">add_le_add_right</span> <span class="n">zero_le_one</span> <span class="n">_</span>
<span class="bp">#</span><span class="n">align</span> <span class="n">one_le_two'</span> <span class="n">one_le_two'</span>
</code></pre></div>



<a name="314356769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356769">(Dec 07 2022 at 00:47)</a>:</h4>
<p>I think this was the part which did not come from mathport</p>



<a name="314356882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314356882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314356882">(Dec 07 2022 at 00:48)</a>:</h4>
<p>I have to do informal math now, but I can take look at it in the evening</p>



<a name="314357138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314357138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314357138">(Dec 07 2022 at 00:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/OfNat/near/314355973">said</a>:</p>
<blockquote>
<p>Okay, porting <a href="https://github.com/leanprover-community/mathlib/pull/17820">#17820</a> to mathlib4 was unpleasant (I am frankly embarrassed and disgusted that I wrote and used a lemma that says 3+1=4), but done in <a href="https://github.com/leanprover-community/mathlib4/pull/893">https://github.com/leanprover-community/mathlib4/pull/893</a>. Hopefully thing means we can finally define an ordered ring.</p>
<p>These files aren't in mathlib3port yet, so they were just ported by hand.</p>
</blockquote>
<p>Does the encoding of numerals in <code>AddMonoidWithOne</code> are not the same as lean3 numerals?</p>



<a name="314357253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314357253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314357253">(Dec 07 2022 at 00:52)</a>:</h4>
<p>no, it is slightly different</p>



<a name="314357718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314357718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314357718">(Dec 07 2022 at 00:57)</a>:</h4>
<p>oops</p>



<a name="314357897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314357897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314357897">(Dec 07 2022 at 00:59)</a>:</h4>
<p>It's okay, we can clean it up later.</p>



<a name="314664339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314664339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314664339">(Dec 08 2022 at 12:27)</a>:</h4>
<p>There was some discussion upstream about reorganizing <code>zero_le_one_class</code> (possibly in fact reorganizing it out of existence).  Where did this land?  We currently have a discrepancy between <br>
<a href="https://github.com/leanprover-community/mathlib/blob/master/src/algebra/order/monoid/with_zero/defs.lean">Lean 3 algebra/order/monoid/with_zero/defs</a> and <a href="https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Algebra/Order/Monoid/WithZero/Defs.lean">Lean 4 algebra/order/monoid/with_zero/defs</a>, the former including <code>zero_le_one_class</code> instances and the latter not.</p>
<p>I hit this in <a href="https://github.com/leanprover-community/mathlib4/pull/903">mathlib4#903</a>.</p>



<a name="314679778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314679778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314679778">(Dec 08 2022 at 13:49)</a>:</h4>
<p>I think it's just because we merged <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> before <a href="https://github.com/leanprover-community/mathlib4/pull/893">mathlib4#893</a>.</p>



<a name="314694846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314694846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314694846">(Dec 08 2022 at 15:00)</a>:</h4>
<p>In that case, shouldn't there be an alert somewhere saying "this file has been modified since the last verified commit"?  I wonder if something is broken in the tooling.</p>
<p>We have that</p>
<ol>
<li><code>Algebra/Order/Monoid/WithZero</code> was ported in <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> modelled on <time datetime="2022-12-03T22:52:00Z">2022-12-03T23:52:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/tree/dad7ecf9a1feae63e6e49f07619b7087403fb8d4">dad7ecf9a1feae63e6e49f07619b7087403fb8d4</a> </li>
<li><time datetime="2022-12-04T17:00:00Z">2022-12-04T18:00:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/pull/17465">#17465</a> modified the file in mathlib3</li>
<li><time datetime="2022-12-06T04:12:00Z">2022-12-06T5:12:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/pull/17820">#17820</a> modified the file again in mathlib3</li>
<li><time datetime="2022-12-06T13:59:00Z">2022-12-06T14:59:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> was merged into mathlib4</li>
<li><time datetime="2022-12-07T05:18:00Z">2022-12-07T06:18:00+01:00</time> the file was marked in mathlib3 as frozen.</li>
</ol>



<a name="314695412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314695412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314695412">(Dec 08 2022 at 15:02)</a>:</h4>
<p>The bot is supposed to check that the file hasn't been modified in mathlib3 since the porting basis commit, right?</p>



<a name="314708433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314708433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314708433">(Dec 08 2022 at 16:02)</a>:</h4>
<p>There's no bot that checks for differences in files (so far, but I think there was talk about it), it has to be done manually, but the port status script should tell you which files have changes since the last commit at which they were verified</p>



<a name="314708586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314708586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314708586">(Dec 08 2022 at 16:02)</a>:</h4>
<p>The port status script is not complaining about this file, though!</p>



<a name="314708594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314708594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314708594">(Dec 08 2022 at 16:02)</a>:</h4>
<p>Admittedly, this file doesn't show up on the port status script though.</p>



<a name="314709145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314709145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314709145">(Dec 08 2022 at 16:05)</a>:</h4>
<p>Actually, it <em>does</em>, it's just not on <span class="user-mention" data-user-id="112680">@Johan Commelin</span>'s website. Johan, can you fix this problem?</p>



<a name="314709313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314709313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314709313">(Dec 08 2022 at 16:05)</a>:</h4>
<p>Running <code>port_status.py</code> locally gave me: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">#</span> <span class="n">The</span> <span class="n">following</span> <span class="n">files</span> <span class="k">have</span> <span class="n">been</span> <span class="n">modified</span> <span class="n">since</span> <span class="n">the</span> <span class="n">commit</span> <span class="n">at</span> <span class="n">which</span> <span class="n">they</span> <span class="n">were</span> <span class="n">verified.</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">subquiver.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">path.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">connected_component.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">9</span><span class="n">b2660e1b25419042c8da10bf411aa3c67f14383..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">push.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">isomorphism.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">afad8e438d03f9d89da2914aa06cb4964ba87a18..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">thin.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">6</span><span class="n">eb334bd8f3433d5b08ba156b8ec3e6af47e1904..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">natural_isomorphism.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">natural_transformation.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">functor</span><span class="bp">/</span><span class="n">category.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">afad8e438d03f9d89da2914aa06cb4964ba87a18..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">functor</span><span class="bp">/</span><span class="n">functorial.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">functor</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">afad8e438d03f9d89da2914aa06cb4964ba87a18..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">category</span><span class="bp">/</span><span class="n">Rel.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8350</span><span class="n">c34a64b9bc3fc64335df8006bffcadc7baa6..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">category</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">a148d797a1094ab554ad4183a4ad6f130358ef64..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ring</span><span class="bp">/</span><span class="n">units.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ring</span><span class="bp">/</span><span class="n">regular.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ring</span><span class="bp">/</span><span class="n">divisibility.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ring</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">9</span><span class="n">b2660e1b25419042c8da10bf411aa3c67f14383..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group_power</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">euclidean_domain</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">76171581280</span><span class="n">d5b5d1e2d1f4f37e5420357bdc636..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">units.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">8</span><span class="n">c53048add6ffacdda0b36c4917bfe37e209b0ba..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">group.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">6</span><span class="n">eb334bd8f3433d5b08ba156b8ec3e6af47e1904..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">commute.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">76171581280</span><span class="n">d5b5d1e2d1f4f37e5420357bdc636..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">a95b16cbade0f938fc24abd05412bde1e84bab9b..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">units</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">655994</span><span class="n">e298904d7e5bbd1e18c95defd7b543eb94..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">units</span><span class="bp">/</span><span class="n">group_with_zero.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">e574b1a4e891376b0ef974b926da39e05da12a06..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">ext.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">6</span><span class="n">eb334bd8f3433d5b08ba156b8ec3e6af47e1904..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">type_tags.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">e574b1a4e891376b0ef974b926da39e05da12a06..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">with_one</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">07</span><span class="n">fee0ca54c320250c98bacf31ca5f288b2bcbe2..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">zero_le_one.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">sub</span><span class="bp">/</span><span class="n">canonical.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">units.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">type_tags.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">99</span><span class="n">e8971dc62f1f7ecf693d75e75fbbabd55849de..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">lemmas.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">07</span><span class="n">fee0ca54c320250c98bacf31ca5f288b2bcbe2..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">nat_cast.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">9</span><span class="n">b2660e1b25419042c8da10bf411aa3c67f14383..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">dad7ecf9a1feae63e6e49f07619b7087403fb8d4..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">with_zero</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">dad7ecf9a1feae63e6e49f07619b7087403fb8d4..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">with_zero</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monoid</span><span class="bp">/</span><span class="n">cancel</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">a95b16cbade0f938fc24abd05412bde1e84bab9b..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">units.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">a95b16cbade0f938fc24abd05412bde1e84bab9b..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">order_iso.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">a95b16cbade0f938fc24abd05412bde1e84bab9b..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">instances.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group_with_zero</span><span class="bp">/</span><span class="n">divisibility.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">e574b1a4e891376b0ef974b926da39e05da12a06..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">divisibility</span><span class="bp">/</span><span class="n">units.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">divisibility</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">39</span><span class="n">af7d3bf61a98e928812dbc3e16f4ea8b795ca3..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">boolean_algebra.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">6</span><span class="n">eb334bd8f3433d5b08ba156b8ec3e6af47e1904..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">symm_diff.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">c4658a649d216f57e99621708b09dcb3dcccbd23..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">monotone.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">antisymmetrization.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">rel_iso</span><span class="bp">/</span><span class="n">group.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">76171581280</span><span class="n">d5b5d1e2d1f4f37e5420357bdc636..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">rel_iso</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">heyting</span><span class="bp">/</span><span class="n">boundary.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">4</span><span class="n">e42a9d0a79d151ee359c270e498b1a00cc6fa4e..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">heyting</span><span class="bp">/</span><span class="n">basic.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">1</span><span class="n">fc36cc9c8264e6e81253f88be7fb2cb6c92d76a..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">sigma</span><span class="bp">/</span><span class="n">order.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">psigma</span><span class="bp">/</span><span class="n">order.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">1</span><span class="n">fc36cc9c8264e6e81253f88be7fb2cb6c92d76a..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">d6aae1bcbd04b8de2022b9b83a5b5b10e10c777d..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">option</span><span class="bp">/</span><span class="n">n_ary.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="mi">39</span><span class="n">af7d3bf61a98e928812dbc3e16f4ea8b795ca3..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">stream</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">group_theory</span><span class="bp">/</span><span class="n">group_action</span><span class="bp">/</span><span class="n">option.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">group_theory</span><span class="bp">/</span><span class="n">group_action</span><span class="bp">/</span><span class="n">sum.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">f1a2caaf51ef593799107fe9a8d5e411599f3996..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">group_theory</span><span class="bp">/</span><span class="n">group_action</span><span class="bp">/</span><span class="n">sigma.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">dad7ecf9a1feae63e6e49f07619b7087403fb8d4..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">group_theory</span><span class="bp">/</span><span class="n">group_action</span><span class="bp">/</span><span class="n">defs.lean</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">d6aae1bcbd04b8de2022b9b83a5b5b10e10c777d..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">logic</span><span class="bp">/</span><span class="n">basic.lean</span>
</code></pre></div>



<a name="314710222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314710222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314710222">(Dec 08 2022 at 16:10)</a>:</h4>
<p>Note: most of these are probably just the mathlib4 synchronization label, but I haven't checked.</p>



<a name="314710924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314710924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314710924">(Dec 08 2022 at 16:13)</a>:</h4>
<p>Probably Johan suppressed this output because there was so much noise, and now it's biting us.</p>



<a name="314711099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711099">(Dec 08 2022 at 16:14)</a>:</h4>
<p>The port status script already ignores changes due to the synchronization label</p>



<a name="314711241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711241">(Dec 08 2022 at 16:15)</a>:</h4>
<p>Or at least, it was supposed to...</p>



<a name="314711318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711318">(Dec 08 2022 at 16:15)</a>:</h4>
<p>Jireh, are you running the latest version of the port status script?</p>



<a name="314711411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711411">(Dec 08 2022 at 16:15)</a>:</h4>
<p>The latest version is just tracked in mathlib right? Or did it get folded into mathlib-tools sometime?</p>



<a name="314711429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711429">(Dec 08 2022 at 16:15)</a>:</h4>
<p>It's in mathlib</p>



<a name="314711524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314711524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314711524">(Dec 08 2022 at 16:16)</a>:</h4>
<p>Then yes, I have the latest version because I was on the latest master.</p>



<a name="314712115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314712115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314712115">(Dec 08 2022 at 16:19)</a>:</h4>
<p>Seems like the port status script is not ignoring sync labels (at least not always) because some of these changes are only the sync label.</p>



<a name="314712181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314712181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314712181">(Dec 08 2022 at 16:19)</a>:</h4>
<p>I will look into this issue asap</p>



<a name="314712185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314712185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314712185">(Dec 08 2022 at 16:19)</a>:</h4>
<p>I tried the first couple, </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">git</span> <span class="n">diff</span> <span class="mi">70</span><span class="n">d50ecfd4900dd6d328da39ab7ebd516abe4025..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">subquiver.lean</span>
</code></pre></div>
<p>is just the freezing message but</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">git</span> <span class="n">diff</span> <span class="mi">62</span><span class="n">a5626868683c104774de8d85b9855234ac807c..HEAD</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">quiver</span><span class="bp">/</span><span class="n">path.lean</span>
</code></pre></div>
<p>has a substantive change.</p>



<a name="314712546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314712546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314712546">(Dec 08 2022 at 16:21)</a>:</h4>
<p>The output of the script is not the command it runs internally</p>



<a name="314712592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314712592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314712592">(Dec 08 2022 at 16:21)</a>:</h4>
<p>I'll make a fix</p>



<a name="314716257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314716257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314716257">(Dec 08 2022 at 16:38)</a>:</h4>
<p>I think every line of output of <code>port_status.py</code> has an accompanying line in my html page.</p>



<a name="314716443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314716443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314716443">(Dec 08 2022 at 16:39)</a>:</h4>
<p>I'm walking home atm... I can probably debug in 2hrs or so</p>



<a name="314717402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314717402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314717402">(Dec 08 2022 at 16:43)</a>:</h4>
<p>Ugh, I think there is a bug in git (edit: <a href="https://stackoverflow.com/q/74733674/102441">https://stackoverflow.com/q/74733674/102441</a>)</p>



<a name="314717539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314717539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314717539">(Dec 08 2022 at 16:43)</a>:</h4>
<p><code>git diff --ignore-matching-lines='^$'</code> ignores everything even though I asked it to only ignore blank lines</p>



<a name="314717752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314717752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314717752">(Dec 08 2022 at 16:44)</a>:</h4>
<p>ouch</p>



<a name="314720822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314720822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314720822">(Dec 08 2022 at 16:59)</a>:</h4>
<p><a href="https://www.sjoerdlangkemper.nl/2021/08/13/how-does-git-diff-ignore-matching-lines-work/">https://www.sjoerdlangkemper.nl/2021/08/13/how-does-git-diff-ignore-matching-lines-work/</a> provides <code>git diff -I $'\\`\n\\\''</code> as an alternative, but I haven't tested it</p>



<a name="314722636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314722636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuyang Zhao <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314722636">(Dec 08 2022 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/287929-mathlib4/topic/OfNat/near/314694846">said</a>:</p>
<blockquote>
<p>In that case, shouldn't there be an alert somewhere saying "this file has been modified since the last verified commit"?  I wonder if something is broken in the tooling.</p>
<p>We have that</p>
<ol>
<li><code>Algebra/Order/Monoid/WithZero/Defs</code> was ported in <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> modelled on <time datetime="2022-12-03T22:52:00Z">2022-12-03T23:52:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/tree/dad7ecf9a1feae63e6e49f07619b7087403fb8d4">dad7ecf9a1feae63e6e49f07619b7087403fb8d4</a> </li>
<li><time datetime="2022-12-04T17:00:00Z">2022-12-04T18:00:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/pull/17465">#17465</a> modified the file in mathlib3</li>
<li><time datetime="2022-12-06T04:12:00Z">2022-12-06T5:12:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib/pull/17820">#17820</a> modified the file again in mathlib3</li>
<li><time datetime="2022-12-06T13:59:00Z">2022-12-06T14:59:00+01:00</time> <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a> was merged into mathlib4</li>
<li><time datetime="2022-12-07T05:18:00Z">2022-12-07T06:18:00+01:00</time> the bot marked the file in mathlib3 as frozen.</li>
</ol>
</blockquote>
<p>Also note that <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_ordered_comm_monoid_with_zero.to_zero_le_one_class">docs#linear_ordered_comm_monoid_with_zero.to_zero_le_one_class</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/canonically_ordered_add_monoid.to_zero_le_one_class">docs#canonically_ordered_add_monoid.to_zero_le_one_class</a> were already in <code>algebra/order/monoid/with_zero/def</code> before <a href="https://github.com/leanprover-community/mathlib/tree/dad7ecf9a1feae63e6e49f07619b7087403fb8d4">dad7ecf9a1feae63e6e49f07619b7087403fb8d4</a>.</p>



<a name="314723675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314723675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314723675">(Dec 08 2022 at 17:13)</a>:</h4>
<p>I see.  So in fact both <code>dad7ecf9a1feae63e6e49f07619b7087403fb8d4</code> mathlib3 and current mathlib3 have the two <code>zero_le_one_class</code> instances in that file.  But the people reviewing <a href="https://github.com/leanprover-community/mathlib4/pull/851">mathlib4#851</a>, aware of the general chaos around <code>zero_le_one_class</code>, incorrectly assumed that their deletion was deliberate and supposed to match a mathlib3 change.</p>



<a name="314724135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314724135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314724135">(Dec 08 2022 at 17:16)</a>:</h4>
<p>One more reason not to refactor right when the port hits!</p>



<a name="314736254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314736254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314736254">(Dec 08 2022 at 17:59)</a>:</h4>
<p>Do I need to take any particular action? Or will everything be fixed on the python side?</p>



<a name="314744425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/OfNat/near/314744425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/OfNat.html#314744425">(Dec 08 2022 at 18:37)</a>:</h4>
<p>32 messages were moved from this topic to <a class="stream-topic" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4/topic/.23port-status.20not.20showing.20modified.20files">#mathlib4 &gt; #port-status not showing modified files</a> by <span class="user-mention silent" data-user-id="310045">Eric Wieser</span>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>