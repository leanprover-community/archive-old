---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html">Int.coe_natAbs misnomer</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316151830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316151830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316151830">(Dec 15 2022 at 22:14)</a>:</h4>
<p>I imagine this is very, very low priority, but thought I'd mention: I think <code>Int.coe_natAbs</code> should be <code>Int.coe_nat_abs</code>. Currently <code>coe_natAbs (n : ℕ) : |(n : ℤ)| = n</code>, which involves <code>abs</code>, not <code>natAbs</code>. By the name, I'd expect <code>coe_natAbs</code> to be what <code>Int.natAbs_cast</code> is (<code>natAbs_cast (n : ℕ) : natAbs ↑n = n</code>).</p>



<a name="316152534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316152534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316152534">(Dec 15 2022 at 22:19)</a>:</h4>
<p>nice find! I expect that was an overzealous search+replace of <code>nat_abs</code> to <code>natAbs</code>. If we fix it, our naming scheme pays off my distinguishing the two :-)</p>



<a name="316178308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316178308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316178308">(Dec 16 2022 at 02:27)</a>:</h4>
<p>Please PR! :-)</p>



<a name="316243932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316243932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316243932">(Dec 16 2022 at 11:39)</a>:</h4>
<p><code>coe_natAbs</code> would rather be <code>coe_natAbs (n : ℤ) : (n.nat_abs : ℤ) = |n|</code>.</p>



<a name="316244208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316244208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316244208">(Dec 16 2022 at 11:40)</a>:</h4>
<p>And <code>coe_nat_abs</code> should be <code>abs_coe_nat</code>, so the new naming convention still hasn't helped <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="316245239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316245239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316245239">(Dec 16 2022 at 11:46)</a>:</h4>
<p>Good find, I remember being mislead by this theorem name in mathlib3!</p>



<a name="316303236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316303236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316303236">(Dec 16 2022 at 16:08)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/17967">#17967</a>, <a href="https://github.com/leanprover-community/mathlib4/pull/1080">mathlib4#1080</a></p>



<a name="316319835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316319835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316319835">(Dec 16 2022 at 17:24)</a>:</h4>
<p>I guess this might be a good time to ask: what exactly is the naming scheme that tells us that e.g. <code>abs</code> should come before <code>coe</code>? I sort of get it, but is “how to name a lemma in mathlib4” (in general) written down anywhere? (This would also help me guess the names of lemmas!)</p>



<a name="316320257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316320257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316320257">(Dec 16 2022 at 17:26)</a>:</h4>
<p>It's outermost to innermost application from left to right (with the occasional exception of predicates, which might come last, eg <a href="https://leanprover-community.github.io/mathlib_docs/find/set.nonempty">docs#set.nonempty</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/function.injective">docs#function.injective</a>). In <code>(n.nat_abs : ℤ)</code>, <code>int.coe_nat</code> is outermost, and <code>nat_abs</code> is innermost.</p>



<a name="316321055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321055">(Dec 16 2022 at 17:30)</a>:</h4>
<p>I see…it also seems like we omit <code>eq_&lt;rhs&gt;</code> when the rhs is “obvious” somehow?</p>



<a name="316321206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321206">(Dec 16 2022 at 17:30)</a>:</h4>
<p>Yes. And we omit <code>_eq</code>/<code>_iff</code> when it's clear it's gonna be an equality/equivalence.</p>



<a name="316321399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321399">(Dec 16 2022 at 17:31)</a>:</h4>
<p>Do we still write outermost first even when infix notation is standard? Or is it just <code>eq</code>/<code>iff</code> that get written “in the middle”?</p>



<a name="316321671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321671">(Dec 16 2022 at 17:32)</a>:</h4>
<p>No, infix notation takes over the precedence convention. But there's a bit of a grey area on whether dot notation is infix.</p>



<a name="316321734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321734">(Dec 16 2022 at 17:33)</a>:</h4>
<p>If there is no <code>notation</code> attached to it, I tend to say no.</p>



<a name="316321737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321737">(Dec 16 2022 at 17:33)</a>:</h4>
<p>Neat, ok, thanks! :)</p>



<a name="316321971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316321971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316321971">(Dec 16 2022 at 17:34)</a>:</h4>
<p>But even when there's infix notation, we sometimes act as it if were a regular two arguments function and instead precise the argument using <code>_left</code>/<code>_right</code>.</p>



<a name="316322147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316322147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316322147">(Dec 16 2022 at 17:35)</a>:</h4>
<p>This is particularly useful when several infix notations are mixed and do not associate (we unfortunately don't allow brackets in lemma names <span aria-label="pensive" class="emoji emoji-1f614" role="img" title="pensive">:pensive:</span>).</p>



<a name="316323073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316323073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316323073">(Dec 16 2022 at 17:40)</a>:</h4>
<p>Another source of confusion is that <code>x.foo.bar</code> should be called <code>bar_foo</code>/<code>bar_foo_x</code> according to the inner/outermost rule, but <code>foo_bar</code> visually.</p>



<a name="316323152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Int.coe_natAbs%20misnomer/near/316323152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Int.2Ecoe_natAbs.20misnomer.html#316323152">(Dec 16 2022 at 17:40)</a>:</h4>
<p>I strongly prefer the first convention because it does not depend on whether you use dot notation or not.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>