---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html">data.set.basic</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313616888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313616888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313616888">(Dec 03 2022 at 01:05)</a>:</h4>
<p>Please can people not port <code>data.set.basic</code>? I am working on splitting it up (part of the motivation is previous discussions here and the other part is in <a href="https://github.com/leanprover-community/mathlib/pull/17801">#17801</a>).</p>



<a name="313617015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313617015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313617015">(Dec 03 2022 at 01:07)</a>:</h4>
<p>It's very much on the porting radar so I would recommend prioritising it, doing nothing in the PR other than splitting it, and asking for a speedy merge when you're ready.</p>



<a name="313617172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313617172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313617172">(Dec 03 2022 at 01:08)</a>:</h4>
<p>Yeah, I know and I will try, but I need some <span aria-label="zzz" class="emoji emoji-1f4a4" role="img" title="zzz">:zzz:</span> first</p>



<a name="313617178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313617178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313617178">(Dec 03 2022 at 01:08)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span>, how soon do you think you can have your PR in by?</p>



<a name="313617203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313617203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313617203">(Dec 03 2022 at 01:09)</a>:</h4>
<p>Sleep first. :-)</p>



<a name="313617214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313617214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313617214">(Dec 03 2022 at 01:09)</a>:</h4>
<p>In 24±ε hours</p>



<a name="313736909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313736909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313736909">(Dec 03 2022 at 21:50)</a>:</h4>
<p>Update: I'm waiting for <a href="https://github.com/leanprover-community/mathlib/pull/17805">#17805</a> (some cleanup that's easier to do once than twice) before performing the actual split. I already tried a prototype split in local and it seems to go down well.</p>



<a name="313738163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313738163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313738163">(Dec 03 2022 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> build seems to be failing in 17805</p>



<a name="313738707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313738707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313738707">(Dec 03 2022 at 22:12)</a>:</h4>
<p>Feel free to fix. I'm off for the next couple of hours</p>



<a name="313930846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313930846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313930846">(Dec 05 2022 at 10:26)</a>:</h4>
<p>/me is starting the actual split</p>



<a name="313981153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313981153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313981153">(Dec 05 2022 at 14:04)</a>:</h4>
<p>Here's the PR: <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a>. Beware it's a complete mess still. I'm gonna do something else for the next few hours because I exhausted my productivity.</p>



<a name="313981277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/313981277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#313981277">(Dec 05 2022 at 14:05)</a>:</h4>
<p>I'm happy to take comments but please don't touch it yet. I have enough to wrangle with myself.</p>



<a name="314075691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314075691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314075691">(Dec 05 2022 at 16:42)</a>:</h4>
<p>I am working on data.set.basic. What would you suggest?</p>



<a name="314075830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314075830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314075830">(Dec 05 2022 at 16:42)</a>:</h4>
<p>I am actually waiting for <code>data.order.symm_diff</code></p>



<a name="314075938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314075938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314075938">(Dec 05 2022 at 16:43)</a>:</h4>
<p>This file probably can't be ported just yet, we need to wait for <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a> to land.</p>



<a name="314076199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314076199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314076199">(Dec 05 2022 at 16:44)</a>:</h4>
<p>but symm_diff only depends on boolean_algebra</p>



<a name="314076265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314076265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314076265">(Dec 05 2022 at 16:44)</a>:</h4>
<p>and that has been ported as of two or three days ago.</p>



<a name="314076581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314076581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314076581">(Dec 05 2022 at 16:46)</a>:</h4>
<p>If you want to contribute to the port, may I suggest you first try porting a file that's less critical?</p>



<a name="314076671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314076671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314076671">(Dec 05 2022 at 16:46)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/pull/842">mathlib4#842</a> has been approved to merge <code>data.order.symm_diff</code>, but bors is a bit broken so it hasn't been merged yet.</p>



<a name="314076796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314076796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314076796">(Dec 05 2022 at 16:47)</a>:</h4>
<p>At any rate, please nobody port <code>data.set.basic</code> yet.</p>



<a name="314078024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078024">(Dec 05 2022 at 16:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314076581">said</a>:</p>
<blockquote>
<p>If you want to contribute to the port, may I suggest you first try porting a file that's less critical?</p>
</blockquote>
<p>Okay. Could you suggest where I might begin? I am a CS theorist in training (i.e. doing my PhD). My interests go towards combinatorics, graphs theory, computability etc, and at least some of the relevant files rely on data.set</p>



<a name="314078143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078143">(Dec 05 2022 at 16:53)</a>:</h4>
<p>Have you looked at what files are currently available?</p>



<a name="314078499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078499">(Dec 05 2022 at 16:54)</a>:</h4>
<p>I checked <a href="https://math.commelin.net/files/port_status.html">https://math.commelin.net/files/port_status.html</a> <br>
Of the files that have had their immediate dependencies ported, it appears all are taken. Before reading this conversation, I was waiting for order.symm_diff to go through before porting data.set.basic</p>



<a name="314078560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078560">(Dec 05 2022 at 16:55)</a>:</h4>
<p>Here's a more up to date one:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">#</span> <span class="n">The</span> <span class="n">following</span> <span class="n">files</span> <span class="k">have</span> <span class="n">all</span> <span class="n">dependencies</span> <span class="n">ported</span> <span class="n">already</span><span class="o">,</span> <span class="n">and</span> <span class="n">should</span> <span class="n">be</span> <span class="n">ready</span> <span class="n">to</span> <span class="n">port</span><span class="o">:</span>
<span class="bp">#</span> <span class="n">Earlier</span> <span class="n">items</span> <span class="k">in</span> <span class="n">the</span> <span class="n">list</span> <span class="n">are</span> <span class="n">required</span> <span class="k">in</span> <span class="n">more</span> <span class="n">places</span> <span class="k">in</span> <span class="n">mathlib.</span>
<span class="n">control.traversable.basic</span>    <span class="c1">-- mathlib4#788 @kbuzzard 1fc36cc9c8264e6e81253f88be7fb2cb6c92d76a</span>
<span class="n">algebra.divisibility.basic</span>    <span class="c1">-- mathlib4#833 70d50ecfd4900dd6d328da39ab7ebd516abe4025</span>
<span class="n">lean_core.data.vector</span>    <span class="c1">-- mathlib4#834 e574b1a4e891376b0ef974b926da39e05da12a06</span>
<span class="n">data.string.basic</span>    <span class="c1">-- WIP @javra</span>
<span class="n">data.nat.bits</span>
<span class="n">control.bifunctor</span>    <span class="c1">-- mathlib4#809 62a5626868683c104774de8d85b9855234ac807c</span>
<span class="n">category_theory.functor.fully_faithful</span>    <span class="c1">-- WIP mathlib4#846 70d50ecfd4900dd6d328da39ab7ebd516abe4025</span>
<span class="n">category_theory.bicategory.basic</span>    <span class="c1">-- Depending on slice tactic</span>
<span class="n">algebra.group.ext</span>    <span class="c1">-- mathlib4#850 e574b1a4e891376b0ef974b926da39e05da12a06</span>
<span class="n">data.stream.init</span>    <span class="c1">-- mathlib4#849 e574b1a4e891376b0ef974b926da39e05da12a06</span>
<span class="n">data.rbtree.init</span>    <span class="c1">-- WIP @digama</span>
<span class="n">data.typevec</span>    <span class="c1">-- WIP j-loreaux</span>
<span class="n">control.monad.writer</span>
<span class="n">data.rbtree.default_lt</span>    <span class="c1">-- WIP @digama</span>
<span class="n">category_theory.category.Kleisli</span>    <span class="c1">-- WIP mathlib4#843 70d50ecfd4900dd6d328da39ab7ebd516abe4025</span>
<span class="n">lean_core.data.buffer.parser</span>
<span class="n">data.two_pointing</span>    <span class="c1">-- WIP Yaël</span>
<span class="n">data.vector3</span>    <span class="c1">-- WIP Thomas mathlib4#633 fd47bdf09e90f553519c712378e651975fe8c829</span>
<span class="n">lean_core.data.dlist</span>
<span class="n">data.erased</span>
<span class="n">data.json</span>
<span class="n">data.mllist</span>    <span class="c1">-- probably not needed</span>
<span class="n">data.nat.even_odd_rec</span>
<span class="n">data.sigma.default</span>    <span class="c1">-- do not port default files</span>
<span class="n">algebra.group_with_zero.default</span>    <span class="c1">-- do not port default files</span>
<span class="n">algebra.ring.default</span>    <span class="c1">-- do not port default files</span>
<span class="n">combinatorics.quiver.push</span>
<span class="n">lean_core.algebraic_geometry.EllipticCurve</span>

<span class="bp">#</span> <span class="n">The</span> <span class="n">following</span> <span class="n">files</span> <span class="k">have</span> <span class="n">their</span> <span class="n">immediate</span> <span class="n">dependencies</span> <span class="n">ported</span> <span class="n">already</span><span class="o">,</span> <span class="n">and</span> <span class="n">may</span> <span class="n">be</span> <span class="n">ready</span> <span class="n">to</span> <span class="n">port</span><span class="o">:</span>
<span class="n">order.hom.basic</span>    <span class="c1">-- please adopt mathlib4#804 62a5626868683c104774de8d85b9855234ac807c</span>
<span class="n">order.symm_diff</span>    <span class="c1">-- mathlib4#842 6eb334bd8f3433d5b08ba156b8ec3e6af47e1904</span>
<span class="n">algebra.group.type_tags</span>    <span class="c1">-- mathlib4#832 6eb334bd8f3433d5b08ba156b8ec3e6af47e1904</span>
<span class="n">algebra.order.monoid.with_zero.defs</span>    <span class="c1">-- mathlib4#851 dad7ecf9a1feae63e6e49f07619b7087403fb8d4</span>
<span class="n">algebra.hom.equiv.basic</span>    <span class="c1">-- mathlib4#835 76171581280d5b5d1e2d1f4f37e5420357bdc636</span>
<span class="n">data.sigma.order</span>    <span class="c1">-- WIP j-loreaux</span>
<span class="n">order.heyting.boundary</span>    <span class="c1">-- mathlib4#844 70d50ecfd4900dd6d328da39ab7ebd516abe4025</span>
</code></pre></div>



<a name="314078605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078605">(Dec 05 2022 at 16:55)</a>:</h4>
<p>Yaël, I'm not seeing the mathlib4 companion pr to  <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a> yet, when do you think you'll have it ready?</p>



<a name="314078686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078686">(Dec 05 2022 at 16:55)</a>:</h4>
<p>Given you have a CS background, maybe the things in <code>data</code> or <code>control</code> might be more accessible to you.</p>



<a name="314078762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314078762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314078762">(Dec 05 2022 at 16:56)</a>:</h4>
<p>I will open it once I got <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a> to compile. I'm not a great fan of work duplication!</p>



<a name="314079225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314079225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314079225">(Dec 05 2022 at 16:58)</a>:</h4>
<p>... also because I will need to port some of <code>data.set.basic</code> while doing so.</p>



<a name="314080182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314080182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314080182">(Dec 05 2022 at 17:02)</a>:</h4>
<p>Just to be clear: are you going to expand the scope of your block further after this?</p>



<a name="314080329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314080329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314080329">(Dec 05 2022 at 17:02)</a>:</h4>
<p>I am not planning to, no.</p>



<a name="314080579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314080579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314080579">(Dec 05 2022 at 17:04)</a>:</h4>
<p>If data.set.basic is t<br>
<span class="user-mention silent" data-user-id="492774">Sky Wilshaw</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314078686">said</a>:</p>
<blockquote>
<p>Given you have a CS background, maybe the things in <code>data</code> or <code>control</code> might be more accessible to you.</p>
</blockquote>
<p>I think I will take up <code>data.nat.bits</code> then. I'd be happy to help with files under <code>data.set</code> too because from a theorist's point of view, these appear to be the most important for graph theory and combinatorics.</p>



<a name="314080738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314080738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314080738">(Dec 05 2022 at 17:04)</a>:</h4>
<p>I can tell you that the most important files for combinatorics are rather the ones involving <a href="https://leanprover-community.github.io/mathlib_docs/find/finset">docs#finset</a>, but we're far from it still!</p>



<a name="314081134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314081134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314081134">(Dec 05 2022 at 17:06)</a>:</h4>
<p>As far as I'm aware, there are some changes from Lean 3 to Lean 4 involving <code>bit0</code> and <code>bit1</code> - I'd ask some others for advice on this.</p>



<a name="314082804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314082804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314082804">(Dec 05 2022 at 17:14)</a>:</h4>
<p>okay, in that case I'd like to remove the WIP for data.set.basic in the port status file. But I don't seem to have the permission to edit the wiki. What's the process to get this?</p>



<a name="314082909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314082909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shreyas Srinivas <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314082909">(Dec 05 2022 at 17:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="492774">Sky Wilshaw</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314081134">said</a>:</p>
<blockquote>
<p>As far as I'm aware, there are some changes from Lean 3 to Lean 4 involving <code>bit0</code> and <code>bit1</code> - I'd ask some others for advice on this.</p>
</blockquote>
<p>Thanks, I will open a separate thread for this.</p>



<a name="314114627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314114627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314114627">(Dec 05 2022 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="466334">@Shreyas Srinivas</span> I'm really sorry that it's difficult for you to find something to do. There is a lot of stuff going on which those "in the know" know about (e.g. the complications with <code>data.set.basic</code> and the fact that <code>data.nat.bits</code> is kind of being ignored because we don't know exactly what form we want it to be in in Lean 4). If you want some advice about where to find files to port, here's the algorithm I'm using.</p>
<p>1) Look at the pdfs being generated by a bot in the "port progress" thread in this <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a> stream.<br>
2) Choose a goal which we're making progress on, or a goal you're interested in.<br>
3) Take a look at the linked pdf and see where the boundary is (green files are done, blue files are being worked on, white files are not done) and then check in the port-status wiki page and perhaps also glance through the open PRs in mathlib4 and also perhaps search this site for the name of the file just to check there are no problems with it.<br>
4) Claim that file by editing the wiki page, making a branch in mathlib4, copying the autoported effort from mathlib3port, pushing to github and stating the mathlib3 commit (taken from the mathlib3port readme) in your first message on github about the file. <br>
5) Get stuck in, and if you get stuck then create a new thread here in the mathlib4 stream with questions (questions are answered more quickly on Zulip than on github). </p>
<p>Good luck! You'll need push access to non-master branches in both mathlib3 and mathlib4; to do that you'll need to ask a maintainer for push rights to non-master branches of these repos and they'll need to know your github userid.</p>



<a name="314127538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314127538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314127538">(Dec 05 2022 at 21:26)</a>:</h4>
<p>I think the biggest current difficulty (at least, from my limited perspective!) is the small number of available files. Because we're so early on in the port, I managed to port loads of files at the end of last week but since have found it really hard to make progress after I'd finished the easy ones.</p>



<a name="314127997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314127997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314127997">(Dec 05 2022 at 21:28)</a>:</h4>
<p>My hope is that after we finish data.set.basic and algebra.order.field.defs, the amount of free files should start increasing.</p>



<a name="314146476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314146476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314146476">(Dec 05 2022 at 23:40)</a>:</h4>
<p>I'm pretty concerned that this PR is going to hold everything up, at the worst possible time. (People are waiting to port this file, and it is on the critical path for the targets that we need to have done in the next two weeks so people preparing courses using Lean4 can do their course prep!)</p>



<a name="314146631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314146631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314146631">(Dec 05 2022 at 23:41)</a>:</h4>
<p>I think we need to get this PR compiling and linting asap, and to prepare the mathlib4 port, which may require considerable work. I'll try to come back to this later today, but if anyone wants to fix the linting issues and downstream problems with missing imports, that would be great.</p>



<a name="314157938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314157938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314157938">(Dec 06 2022 at 01:45)</a>:</h4>
<p>Yeah I'm putting as much time as I can into it. Hopefully the split will be ready by  this evening and compiling by the end of tomorrow.</p>



<a name="314300860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314300860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314300860">(Dec 06 2022 at 18:46)</a>:</h4>
<p>Just to give <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> a sense of urgency. There are only six files in mathlib4 right now that are ready to be ported (i.e. all dependencies are ported) and aren't currently part of an open PR. There isn't really very much left to do that does not depend on <code>data.set.basic</code>.</p>



<a name="314301178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314301178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314301178">(Dec 06 2022 at 18:47)</a>:</h4>
<p>I've been trying for the past two hours to work on it from the Eurostar, but alas it just never loaded <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="314301712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314301712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314301712">(Dec 06 2022 at 18:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/313617015">said</a>:</p>
<blockquote>
<p>It's very much on the porting radar so I would recommend prioritising it, doing nothing in the PR other than splitting it, and asking for a speedy merge when you're ready.</p>
</blockquote>
<p>Maybe you could switch to a more modest PR, along the lines of Kevin's advice.  If I understand correctly you are currently doing a refactor (of <code>order/monotone</code>) as well as a split.</p>



<a name="314304126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314304126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314304126">(Dec 06 2022 at 19:01)</a>:</h4>
<p>Yes, this is needed to insert the coe to sort coercion before <code>order.monotone</code></p>



<a name="314304492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314304492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314304492">(Dec 06 2022 at 19:03)</a>:</h4>
<p>There are already available subplits in the form of <code>data.set.image</code>, but they won't help with the port because those will be new files <em>after</em> <code>data.set.basic</code></p>



<a name="314304937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314304937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314304937">(Dec 06 2022 at 19:05)</a>:</h4>
<p>If somebody wants to PR those subsplits independently, please do so! They are basically ready (just need module docs) and will fluidify the rest of the split (by having less downstream imports that need fixing).</p>



<a name="314306198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314306198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314306198">(Dec 06 2022 at 19:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314304492">said</a>:</p>
<blockquote>
<p>There are already available subplits in the form of <code>data.set.image</code> and <code>data.set.n_ary</code>, but they won't help with the port because those will be new files <em>after</em> <code>data.set.basic</code></p>
</blockquote>
<p>I imagine that it won't be long before <code>data.set.image</code> blocks something. There's not much that depends on sets but not images.</p>



<a name="314306295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314306295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314306295">(Dec 06 2022 at 19:11)</a>:</h4>
<p>What needs to be done on the set file? Is it just fixing the build?</p>



<a name="314308376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314308376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314308376">(Dec 06 2022 at 19:21)</a>:</h4>
<p>I think this PR will cause a bottleneck in Mathlib4 and prevent anyone from working on the port for a few days, particularly given that it changes already ported files. I'm leaning towards being much more firm about the idea of not changing already ported files in mathlib and generating much more work in the port and not merging this refactor unless it is done in Mathlib4.</p>



<a name="314332242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314332242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314332242">(Dec 06 2022 at 21:45)</a>:</h4>
<p>What is bothering you exactly? That there's no corresponding mathlib4 PR? Writing it will be much easier than writing the mathlib PR, so I've decided to do it once I managed to stabilise <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a>.</p>



<a name="314335597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314335597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314335597">(Dec 06 2022 at 22:07)</a>:</h4>
<p>Yael, the problem is that most of the porting effort is now held up by this PR. Other people can't work on the port because of your PR.</p>



<a name="314339968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314339968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314339968">(Dec 06 2022 at 22:36)</a>:</h4>
<p>I feel like <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a> is trying to do so much at once that there's no way it's getting finished in a reasonable time - so many changes to argument order, proofs, ...</p>
<p>As an alternative, I pushed <a href="https://github.com/leanprover-community/mathlib/pull/17835">#17835</a>, which should be easily reviewable commit-by-commit and highly unlikely to contain unintended changes. It doesn't do everything <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a> wants to do, but it creates a <code>data.set.defs</code> which doesn't import <code>order.monotone</code>, so should be a lot easier to build on top if if we decide to go forward.</p>
<p>I'd also be fine just not making any sweeping changes in mathlib3, of course</p>



<a name="314340134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314340134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314340134">(Dec 06 2022 at 22:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314304937">said</a>:</p>
<blockquote>
<p>If somebody wants to PR those subsplits independently, please do so! They are basically ready (just need module docs) and will fluidify the rest of the split (by having less downstream imports that need fixing).</p>
</blockquote>
<p>I did <code>set.n_ary</code> in <a href="https://github.com/leanprover-community/mathlib/pull/17836">#17836</a></p>



<a name="314340136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314340136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314340136">(Dec 06 2022 at 22:37)</a>:</h4>
<p>That's it for me today - feel free to pick it up from here</p>



<a name="314343130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314343130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314343130">(Dec 06 2022 at 22:59)</a>:</h4>
<p>I have a family emergency. I won't be able to do anything today, maybe tomorrow as well. Please do whatever and sorry for the terrible timing.</p>



<a name="314343293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314343293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314343293">(Dec 06 2022 at 23:00)</a>:</h4>
<p>No problem. I hope everything works out okay.</p>



<a name="314343328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314343328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314343328">(Dec 06 2022 at 23:00)</a>:</h4>
<p>I think in this case we will just delay refactoring data.set.basic until after it has been ported.</p>



<a name="314344501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314344501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314344501">(Dec 06 2022 at 23:09)</a>:</h4>
<p>The PR builds, though (modulo linting failures)</p>



<a name="314346165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346165">(Dec 06 2022 at 23:22)</a>:</h4>
<p>Which PR?</p>



<a name="314346188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346188">(Dec 06 2022 at 23:22)</a>:</h4>
<p>Oh! <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a>.</p>



<a name="314346206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346206">(Dec 06 2022 at 23:23)</a>:</h4>
<p>Okay, let's see if we can get it done, then.</p>



<a name="314346251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346251">(Dec 06 2022 at 23:23)</a>:</h4>
<p>I just had a look a porting data.set.basic as is. It's not too bad. There are a lot of broken proofs (and some that use tauto or cc, which we don't have for now.)</p>



<a name="314346400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346400">(Dec 06 2022 at 23:25)</a>:</h4>
<p>I'm not immediately sure how to fix the notation:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">infixl</span><span class="o">:</span><span class="mi">80</span> <span class="s2">" '' "</span> <span class="bp">=&gt;</span> <span class="n">image</span>

<span class="kd">theorem</span> <span class="n">mem_image_iff_bex</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
    <span class="n">y</span> <span class="bp">∈</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">s</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">_</span><span class="o">)(</span><span class="n">_</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
  <span class="n">bex_def.symm</span>
</code></pre></div>
<p>Fails at <code>f '' s</code> with <code>missing end of character literal</code>.</p>



<a name="314346425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314346425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314346425">(Dec 06 2022 at 23:25)</a>:</h4>
<p>(If anyone wants to have a look, this is on the branch data_set_basic.)</p>



<a name="314349081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314349081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314349081">(Dec 06 2022 at 23:46)</a>:</h4>
<p>I think I fixed the last linting errors on <a href="https://github.com/leanprover-community/mathlib/pull/17825">#17825</a>.</p>



<a name="314351438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314351438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314351438">(Dec 07 2022 at 00:05)</a>:</h4>
<p>That sounds like a lexer issue, it should be fixable in core</p>



<a name="314356641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314356641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314356641">(Dec 07 2022 at 00:45)</a>:</h4>
<p>Okay, we better <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> it. I can hopefully do that later today, but if anyone is keen, please go ahead. :-)</p>



<a name="314366225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314366225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314366225">(Dec 07 2022 at 02:35)</a>:</h4>
<p>Reported as <a href="https://github.com/leanprover/lean4/issues/1922">https://github.com/leanprover/lean4/issues/1922</a></p>



<a name="314366965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314366965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314366965">(Dec 07 2022 at 02:44)</a>:</h4>
<p>Hm, since <code>''</code> doesn't work maybe you should use <code>'</code> to disambiguate it: <code>f ''' s</code></p>



<a name="314369838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314369838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314369838">(Dec 07 2022 at 03:18)</a>:</h4>
<p>I've temporarily gone with <code>!!</code>. Hopefully we won't forget to change it back. :-)</p>



<a name="314567221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314567221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314567221">(Dec 07 2022 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314304937">said</a>:</p>
<blockquote>
<p>If somebody wants to PR those subsplits independently, please do so! They are basically ready (just need module docs) and will fluidify the rest of the split (by having less downstream imports that need fixing).</p>
</blockquote>
<p><code>set.image</code> is in <a href="https://github.com/leanprover-community/mathlib/pull/17842">#17842</a></p>



<a name="314569904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314569904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314569904">(Dec 07 2022 at 22:23)</a>:</h4>
<p>Re <code>''</code>: I think it's worth remarking that although <code>''</code> is standard mathlib notation, it's not actually standard mathematical notation (despite Mario's claims that he saw it in a book once), so perhaps our instinct "please let us keep our nonstandard notation which we're used to" could be turned into "maybe we can fall in love with a new notation" if this issue is actually problematic. If you could make standard maths notation <code>f(S)</code> work (here <code>f : X-&gt;Y</code> and <code>S : set Y</code>) that would be even better ;-) Maybe even a weird unicode bracket? We use a weird unicode symbol for divides, after all, and nobody complains about that, because it was always there.</p>



<a name="314570264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314570264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314570264">(Dec 07 2022 at 22:25)</a>:</h4>
<p>All I can contribute to this is that from my perspective (a math person new to lean), <code>''</code> does indeed look pretty strange and unfriendly!</p>



<a name="314570403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314570403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314570403">(Dec 07 2022 at 22:26)</a>:</h4>
<p><code>''</code> is standard in the set theory literature afaiu.</p>



<a name="314570598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314570598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314570598">(Dec 07 2022 at 22:28)</a>:</h4>
<blockquote>
<p>If you could make standard maths notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span> work </p>
</blockquote>
<p>sometimes you can write <code> f • s</code>...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.group_action.basic</span>
<span class="n">open_locale</span> <span class="n">pointwise</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">function.End</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">•</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="314570673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314570673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314570673">(Dec 07 2022 at 22:29)</a>:</h4>
<p>If anyone wants to propose some alternatives in case we can't keep <code>''</code>, we can use that in the interim instead of <code>!!</code>.</p>



<a name="314570840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314570840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314570840">(Dec 07 2022 at 22:30)</a>:</h4>
<p><code>&lt;$&gt;</code> also already works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universes</span> <span class="n">u</span>  <span class="c1">-- doesn't work over different universes</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&lt;$&gt;</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="314571517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571517">(Dec 07 2022 at 22:35)</a>:</h4>
<p>How about <code>f ″ s</code>? (<code>″</code> is "double prime")</p>



<a name="314571558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571558">(Dec 07 2022 at 22:35)</a>:</h4>
<p>Here are some round Unicode brackets reminiscent of the standard (outside of actual set theory :) ) image notation—not sure if they’re visually distinct enough from ascii though.</p>



<a name="314571620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571620">(Dec 07 2022 at 22:35)</a>:</h4>
<p><code>f ❨ S ❩</code></p>



<a name="314571728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571728">(Dec 07 2022 at 22:36)</a>:</h4>
<p><code>f ❪ S ❫</code></p>



<a name="314571785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571785">(Dec 07 2022 at 22:37)</a>:</h4>
<p><code>f ⟮ S ⟯</code></p>



<a name="314571810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571810">(Dec 07 2022 at 22:37)</a>:</h4>
<p>I think brackets would be a bad idea, especially while simultaneously trying to teach newcomers that in lean functions are written without brackets</p>



<a name="314571813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571813">(Dec 07 2022 at 22:37)</a>:</h4>
<p>Personally I would prefer infix</p>



<a name="314571939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314571939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314571939">(Dec 07 2022 at 22:38)</a>:</h4>
<p>I'd really like if we could make <code>&lt;$&gt;</code> work (by rewriting the monad framework to be universe polymorphic), because then we could use the same notation for <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.map">docs#finset.map</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/subgroup.map">docs#subgroup.map</a>, ... as well. But that's probably not a viable thing to try until after the port.</p>



<a name="314572343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314572343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314572343">(Dec 07 2022 at 22:41)</a>:</h4>
<p>I don’t think there’s a standard infix notation for the image recognizable by most mathematicians, so I suppose that opens it up to anything with the right vibes! (Other brackets I found included turtle shell, if not used for anything else: <code>f ❲ S ❳</code>)</p>



<a name="314573093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314573093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314573093">(Dec 07 2022 at 22:47)</a>:</h4>
<p>Though…I might gently caution against <code>&lt;$&gt;</code> if the goal is “make mathlib notation friendly to mathematicians”. That seems complicated and programmer-y to me, whereas at least <code>''</code> is visually simple and has precedent in a niche area of math (well, they’re all niche, ultimately, but you know what I mean :) )</p>
<p>But on the other hand…maybe it would open up mathematicians to the joys of monads and unify the concept of image with other <code>map</code> operations in math…? Maybe programmer notation has something to add here? :) Just some thoughts.</p>



<a name="314573571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314573571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314573571">(Dec 07 2022 at 22:51)</a>:</h4>
<p>I agree <code>''</code> is much better than <code>&lt;$&gt;</code>, for the purpose of not making mathematicians' eyes glaze over.</p>



<a name="314577573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314577573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Osborn <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314577573">(Dec 07 2022 at 23:22)</a>:</h4>
<p>Would a unicode double quote work? Not sure which one would best</p>



<a name="314579769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314579769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314579769">(Dec 07 2022 at 23:44)</a>:</h4>
<p>Eric Wieser has mentioned one such (presumably interim?) option—just for fun I wanted to see what others I could find on shapecatcher.<br>
Two characters: <code>Ꞌ Ꞌ</code> <code>ˈ ˈ</code><br>
One character: <code>ᐦ</code> (<code>ʺ</code>)<br>
(Though I imagine <code>!!</code> is more convenient to use as a placeholder, so I’m guessing this would only be useful if the parsing issue is somehow insurmountable…)</p>



<a name="314580062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580062">(Dec 07 2022 at 23:47)</a>:</h4>
<p>Though, actually, the one-character nature of <code>f ᐦ S</code> is kind of visually nice regardless, if it can be entered easily…!</p>



<a name="314580169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580169">(Dec 07 2022 at 23:48)</a>:</h4>
<p>Symmetry with <code>preimage</code> is something else to consider</p>



<a name="314580219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580219">(Dec 07 2022 at 23:48)</a>:</h4>
<p>Good point! What’s that syntax like?</p>



<a name="314580228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580228">(Dec 07 2022 at 23:48)</a>:</h4>
<p>Note also that as of the commit to mathlib3 just now (which won't be in mathport yet), notation for <code>''</code> is no longer a decision that needs to be made to port <code>data.set.basic</code> (it now lives in <code>data.set.image</code>)</p>



<a name="314580249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580249">(Dec 07 2022 at 23:49)</a>:</h4>
<p>Is it just <code>⁻¹</code>?</p>



<a name="314580386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580386">(Dec 07 2022 at 23:50)</a>:</h4>
<p><code>f ⁻¹' s</code>, rather</p>



<a name="314580413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Murrills <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580413">(Dec 07 2022 at 23:51)</a>:</h4>
<p>ah, I see</p>



<a name="314580594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580594">(Dec 07 2022 at 23:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/287929-mathlib4/topic/data.2Eset.2Ebasic/near/314570403">said</a>:</p>
<blockquote>
<p><code>''</code> is standard in the set theory literature afaiu.</p>
</blockquote>
<p>It's kind of <code>f “ S</code>. Sorry if too late for this comment.</p>



<a name="314580760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314580760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314580760">(Dec 07 2022 at 23:55)</a>:</h4>
<p>Yes, I know. I guess I meant "is the ascii equivalent of..."</p>



<a name="314583029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314583029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314583029">(Dec 08 2022 at 00:18)</a>:</h4>
<p>Can we get <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mo>∗</mo></msub><mi>S</mi></mrow><annotation encoding="application/x-tex">f_*S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1757em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> to work with any <code>map</code> operation? I know it wasn't possible in Lean 3 for universe reasons, but maybe we can have a specific elaborator in Lean 4.</p>



<a name="314583374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314583374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314583374">(Dec 08 2022 at 00:23)</a>:</h4>
<p>I think it was already possible in lean3, we'd just have to reinvent all the monad typeclasses in a polymorphic way</p>



<a name="314583489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314583489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314583489">(Dec 08 2022 at 00:24)</a>:</h4>
<p>Maybe there's a universe elaboration issue I'm not aware of; I thought the limitation was just the way the typeclasses in core were designed.</p>



<a name="314613322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314613322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314613322">(Dec 08 2022 at 06:46)</a>:</h4>
<p>Like Patrick suggests, having some version of <code>_*</code> as notation for <code>map</code> would be really nice.</p>



<a name="314613352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314613352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314613352">(Dec 08 2022 at 06:46)</a>:</h4>
<p>I don't think we necessarily need to rewrite all the monad infrastructure.</p>



<a name="314613549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314613549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314613549">(Dec 08 2022 at 06:48)</a>:</h4>
<p>Something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">has_map</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="c1">-- probably `Z` should be out_param</span>
<span class="o">(</span><span class="n">map</span> <span class="o">:=</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="n">Y</span> <span class="bp">-&gt;</span> <span class="n">Z</span><span class="o">)</span>
</code></pre></div>
<p>which can have instances for <code>X = A -&gt; B</code>, <code>Y = set A</code>, <code>Z = set B</code>. But also for <code>X = A -&gt;+* B</code>, <code>Y = ideal A</code>, <code>Z = ideal B</code>, etc...</p>



<a name="314625142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314625142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314625142">(Dec 08 2022 at 08:19)</a>:</h4>
<p>I've manually updated <a href="https://github.com/leanprover-community/mathlib4/pull/892">https://github.com/leanprover-community/mathlib4/pull/892</a> to remove the material that was moved out in <a href="https://github.com/leanprover-community/mathlib/pull/17842">https://github.com/leanprover-community/mathlib/pull/17842</a>.</p>



<a name="314626030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314626030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314626030">(Dec 08 2022 at 08:25)</a>:</h4>
<p>Are we going to go through this chaos several more times? This is not a good use of your time Scott. What other big files need a mathlib3 refactor before porting? If there are any then it would make sense to do them ASAP rather than just as the tide hits them. But maybe this is the last big example?</p>



<a name="314626496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314626496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314626496">(Dec 08 2022 at 08:29)</a>:</h4>
<p>Top 50 long files (<code>data/set/basic</code> is now almost at the bottom):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>    <span class="mi">4194</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">4012</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">measure_space.lean</span>
    <span class="mi">3494</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">cont_diff.lean</span>
    <span class="mi">3193</span> <span class="n">src</span><span class="bp">/</span><span class="n">group_theory</span><span class="bp">/</span><span class="n">subgroup</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">3132</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">fderiv.lean</span>
    <span class="mi">3086</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">metric_space</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">3061</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">3032</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">lebesgue.lean</span>
    <span class="mi">2956</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space.lean</span>
    <span class="mi">2711</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral.lean</span>
    <span class="mi">2678</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2676</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">buffer</span><span class="bp">/</span><span class="n">parser</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2602</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2489</span> <span class="n">src</span><span class="bp">/</span><span class="n">tactic</span><span class="bp">/</span><span class="n">core.lean</span>
    <span class="mi">2449</span> <span class="n">src</span><span class="bp">/</span><span class="n">computability</span><span class="bp">/</span><span class="n">turing_machine.lean</span>
    <span class="mi">2429</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">inner_product_space</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2378</span> <span class="n">src</span><span class="bp">/</span><span class="n">set_theory</span><span class="bp">/</span><span class="n">ordinal</span><span class="bp">/</span><span class="n">arithmetic.lean</span>
    <span class="mi">2369</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2355</span> <span class="n">src</span><span class="bp">/</span><span class="n">ring_theory</span><span class="bp">/</span><span class="n">ideal</span><span class="bp">/</span><span class="n">operations.lean</span>
    <span class="mi">2273</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">conditional_expectation</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2248</span> <span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">limits</span><span class="bp">/</span><span class="n">shapes</span><span class="bp">/</span><span class="n">pullbacks.lean</span>
    <span class="mi">2229</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow.lean</span>
    <span class="mi">2209</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">deriv.lean</span>
    <span class="mi">2176</span> <span class="n">src</span><span class="bp">/</span><span class="n">linear_algebra</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2122</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">borel_space.lean</span>
    <span class="mi">2118</span> <span class="n">docs</span><span class="bp">/</span><span class="n">references.bib</span>
    <span class="mi">2106</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebraic_geometry</span><span class="bp">/</span><span class="n">open_immersion.lean</span>
    <span class="mi">2101</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">module</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2079</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">matrix</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2049</span> <span class="n">src</span><span class="bp">/</span><span class="n">ring_theory</span><span class="bp">/</span><span class="n">power_series</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">2014</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">real</span><span class="bp">/</span><span class="n">ennreal.lean</span>
    <span class="mi">1988</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">dfinsupp</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1987</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">operator_norm.lean</span>
    <span class="mi">1937</span> <span class="n">src</span><span class="bp">/</span><span class="n">ring_theory</span><span class="bp">/</span><span class="n">unique_factorization_domain.lean</span>
    <span class="mi">1932</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">separation.lean</span>
    <span class="mi">1907</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">strongly_measurable</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1898</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">big_operators</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1896</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">subset_properties.lean</span>
    <span class="mi">1886</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1.lean</span>
    <span class="mi">1874</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">fin</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1872</span> <span class="n">src</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1851</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">lattice.lean</span>
    <span class="mi">1792</span> <span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">uniform_space</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1763</span> <span class="n">src</span><span class="bp">/</span><span class="n">combinatorics</span><span class="bp">/</span><span class="n">simple_graph</span><span class="bp">/</span><span class="n">connectivity.lean</span>
    <span class="mi">1750</span> <span class="n">src</span><span class="bp">/</span><span class="n">geometry</span><span class="bp">/</span><span class="n">manifold</span><span class="bp">/</span><span class="n">mfderiv.lean</span>
    <span class="mi">1731</span> <span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">at_top_bot.lean</span>
    <span class="mi">1728</span> <span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1728</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">normed</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">basic.lean</span>
    <span class="mi">1725</span> <span class="n">src</span><span class="bp">/</span><span class="n">analysis</span><span class="bp">/</span><span class="n">asymptotics</span><span class="bp">/</span><span class="n">asymptotics.lean</span>
    <span class="mi">1691</span> <span class="n">src</span><span class="bp">/</span><span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner.lean</span>
</code></pre></div>



<a name="314626647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314626647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314626647">(Dec 08 2022 at 08:30)</a>:</h4>
<p>Okay, and which of those are closest to being available for porting? :)</p>



<a name="314626973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314626973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314626973">(Dec 08 2022 at 08:33)</a>:</h4>
<p>Seems like <code>data.list.basic</code> only depends on <code>algebra.order.ring.canonical</code> (unported) and <code>data.nat.order.basic</code> (ported in a pr), so we probably shouldn't touch it</p>



<a name="314627206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314627206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314627206">(Dec 08 2022 at 08:35)</a>:</h4>
<p>Otoh, why would <code>data.list.basic</code> depend on <code>algebra.order.ring.canonical</code>...</p>



<a name="314627448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314627448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314627448">(Dec 08 2022 at 08:37)</a>:</h4>
<p>Is there ever a good reason for letting files become more than 1000 lines long?</p>



<a name="314627568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314627568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314627568">(Dec 08 2022 at 08:38)</a>:</h4>
<p>I'm not aware of any such reason</p>



<a name="314627597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314627597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314627597">(Dec 08 2022 at 08:38)</a>:</h4>
<p>Just <code>docs/references.bib</code>, maybe</p>



<a name="314627686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314627686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314627686">(Dec 08 2022 at 08:39)</a>:</h4>
<p>There are currently 186 lean files that are &gt; 1000 lines long</p>



<a name="314628633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314628633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314628633">(Dec 08 2022 at 08:47)</a>:</h4>
<p>Okay, <code>data.set.basic</code> is almost ready to go.</p>



<a name="314628648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314628648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314628648">(Dec 08 2022 at 08:47)</a>:</h4>
<p>One or two broken proofs, if someone wants to take over.</p>



<a name="314628774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314628774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314628774">(Dec 08 2022 at 08:48)</a>:</h4>
<p>Yes, these refactors should have been done a while back, I guess. It's accumulated technical debt...</p>



<a name="314629104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314629104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314629104">(Dec 08 2022 at 08:50)</a>:</h4>
<p>Maybe we need a 1000 line linter. :-)</p>



<a name="314629248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314629248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314629248">(Dec 08 2022 at 08:51)</a>:</h4>
<p>All that is left on <code>data.set.basic</code> is a proof by <code>itauto</code> that has to be written out by hand, and a complicated simp that is failing, I don't quickly see how to reproduce it.</p>



<a name="314629308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314629308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314629308">(Dec 08 2022 at 08:52)</a>:</h4>
<p>I'll take a look</p>



<a name="314629342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314629342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314629342">(Dec 08 2022 at 08:52)</a>:</h4>
<p>I better go make dinner here. :-)</p>



<a name="314635529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314635529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314635529">(Dec 08 2022 at 09:31)</a>:</h4>
<p>Hmmm, I'm struggling to get the newest Lean version working with VScode. I guess I need to go through a huge update fest.</p>



<a name="314637521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314637521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314637521">(Dec 08 2022 at 09:44)</a>:</h4>
<p>It's working now</p>



<a name="314639172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639172">(Dec 08 2022 at 09:55)</a>:</h4>
<p>I replaced the <code>itauto</code> with the term mode proof from <code>show_term {itauto}</code> in mathlib3...</p>



<a name="314639308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639308">(Dec 08 2022 at 09:56)</a>:</h4>
<p>Ok, let me try to fix the other one</p>



<a name="314639421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639421">(Dec 08 2022 at 09:56)</a>:</h4>
<p>oh, <code>simp</code> closes the goal</p>



<a name="314639432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639432">(Dec 08 2022 at 09:56)</a>:</h4>
<p>We're done!</p>



<a name="314639462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639462">(Dec 08 2022 at 09:57)</a>:</h4>
<p>Great!</p>



<a name="314639551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639551">(Dec 08 2022 at 09:57)</a>:</h4>
<p>I'm never sure how much effort to put into working out why <code>simp</code> has changed.</p>



<a name="314639688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639688">(Dec 08 2022 at 09:58)</a>:</h4>
<p>Some fraction of the <code>simp</code> failures are worth diagnosing and fixing, as they'll make life easier later.</p>



<a name="314639728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639728">(Dec 08 2022 at 09:58)</a>:</h4>
<p>But it's very hard to guess how big that fraction is, or whether you're in it...</p>



<a name="314639866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314639866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314639866">(Dec 08 2022 at 09:59)</a>:</h4>
<p>Oof, it definitely doesn't #lint...</p>



<a name="314647774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314647774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314647774">(Dec 08 2022 at 10:44)</a>:</h4>
<p>I'm taking a look at <code>src/group_theory/subgroup/basic.lean</code>, fwiw</p>



<a name="314648129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314648129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314648129">(Dec 08 2022 at 10:46)</a>:</h4>
<p>That file was a personal goal for me in the porting process, because I felt that by the time we'd got to subgroups it would be possible to start marketing the port to young mathematicians. I got a bunch of people at Xena to write a lot of those files (bundled subgroups, subrings,.sub-other things) the first time around and it was a really good learning experience for them.</p>



<a name="314650876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314650876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314650876">(Dec 08 2022 at 11:04)</a>:</h4>
<p>I made <a href="https://github.com/leanprover-community/mathlib/pull/17852">#17852</a> to push <code>data.finset.basic</code> a bit towards the bottom of that list</p>



<a name="314656558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314656558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314656558">(Dec 08 2022 at 11:40)</a>:</h4>
<p>And <a href="https://github.com/leanprover-community/mathlib/pull/17853">#17853</a> for <code>algebra.algebra.basic</code></p>



<a name="314669654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314669654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314669654">(Dec 08 2022 at 12:55)</a>:</h4>
<p>86 messages were moved from this topic to <a class="stream-topic" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4/topic/set.20image.20notation">#mathlib4 &gt; set image notation</a> by <span class="user-mention silent" data-user-id="310045">Eric Wieser</span>.</p>



<a name="314785089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785089">(Dec 08 2022 at 22:34)</a>:</h4>
<p>The remaining lint lemmas for <code>data.set.basic</code> warrant some discussion:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="bp">@</span><span class="n">nonempty_coe_sort</span> <span class="c">/-</span><span class="cm"> Left-hand side simplifies from</span>
<span class="cm">  Nonempty ↑s</span>
<span class="cm">to</span>
<span class="cm">  Exists fun a ↦ a ∈ s</span>
<span class="cm">using</span>
<span class="cm">  simp only [nonempty_subtype]</span>
<span class="cm">Try to change the left-hand side to the simplified term!</span>
<span class="cm"> -/</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">is_empty_coe_sort</span> <span class="c">/-</span><span class="cm"> Left-hand side simplifies from</span>
<span class="cm">  IsEmpty ↑s</span>
<span class="cm">to</span>
<span class="cm">  ∀ (x : α), ¬x ∈ s</span>
<span class="cm">using</span>
<span class="cm">  simp only [isEmpty_subtype]</span>
<span class="cm">Try to change the left-hand side to the simplified term!</span>
<span class="cm"> -/</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">sep_union</span> <span class="c">/-</span><span class="cm"> Left-hand side simplifies from</span>
<span class="cm">  { x | x ∈ s ∪ t ∧ p x }</span>
<span class="cm">to</span>
<span class="cm">  { x | (x ∈ s ∨ x ∈ t) ∧ p x }</span>
<span class="cm">using</span>
<span class="cm">  simp only [Set.mem_union]</span>
<span class="cm">Try to change the left-hand side to the simplified term!</span>
<span class="cm"> -/</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">sep_inter</span> <span class="c">/-</span><span class="cm"> Left-hand side simplifies from</span>
<span class="cm">  { x | x ∈ s ∩ t ∧ p x }</span>
<span class="cm">to</span>
<span class="cm">  { x | (x ∈ s ∧ x ∈ t) ∧ p x }</span>
<span class="cm">using</span>
<span class="cm">  simp only [Set.mem_inter_iff]</span>
<span class="cm">Try to change the left-hand side to the simplified term!</span>
</code></pre></div>



<a name="314785330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785330">(Dec 08 2022 at 22:36)</a>:</h4>
<p>They are all examples where <code>simp</code> having become a little bit stronger, we now have divergences in simp "normal form".</p>



<a name="314785424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785424">(Dec 08 2022 at 22:37)</a>:</h4>
<p>What is the coe function from <code>Set A</code> to <code>Type</code>?</p>



<a name="314785468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785468">(Dec 08 2022 at 22:37)</a>:</h4>
<p>This is itself a hack:</p>



<a name="314785533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785533">(Dec 08 2022 at 22:38)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- Porting note: I've introduced this abbreviation, with the `@[coe]` attribute,</span>
<span class="c1">-- so that `norm_cast` has something to index on.</span>
<span class="sd">/-- Given the set `s`, `type_of_Set s` is the `Type` of element of `s`. -/</span>
<span class="kd">@[coe]</span> <span class="n">abbrev</span> <span class="n">type_of_Set</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">//</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">}</span>

<span class="sd">/-- Coercion from a set to the corresponding subtype. -/</span>
<span class="kd">instance</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="n">CoeSort</span> <span class="o">(</span><span class="n">Set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="n">type_of_Set</span><span class="o">⟩</span>
</code></pre></div>



<a name="314785571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785571">(Dec 08 2022 at 22:38)</a>:</h4>
<p>why is it an abbrev?</p>



<a name="314785585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785585">(Dec 08 2022 at 22:38)</a>:</h4>
<p>it should be a regular declaration</p>



<a name="314785608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785608">(Dec 08 2022 at 22:38)</a>:</h4>
<p>I'm not sure I would call it a hack</p>



<a name="314785634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785634">(Dec 08 2022 at 22:38)</a>:</h4>
<p>we already had such a function, it was called coe before</p>



<a name="314785635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785635">(Dec 08 2022 at 22:38)</a>:</h4>
<p>Okay, good. Making it regular caused a few more things to break, but they all look fixable.</p>



<a name="314785857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785857">(Dec 08 2022 at 22:40)</a>:</h4>
<p>It looks like <code>sep_union</code> and friends are because <code>sep</code> is not a thing anymore</p>



<a name="314785925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314785925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314785925">(Dec 08 2022 at 22:41)</a>:</h4>
<p>I'm not sure, should it be?</p>



<a name="314786917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314786917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314786917">(Dec 08 2022 at 22:48)</a>:</h4>
<p>Have to run. I've pushed making <code>type_of_Set</code> a <code>def</code> again, and fixed some of the probles.</p>



<a name="314786960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314786960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314786960">(Dec 08 2022 at 22:48)</a>:</h4>
<p>There's one broken proof, and we're now missing the <code>Preorder ↑s</code> instance.</p>



<a name="314849611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314849611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314849611">(Dec 09 2022 at 09:21)</a>:</h4>
<p>Drive-by comment: this should be <code>TypeOfSet</code>, no? Or maybe <code>Set.AsType</code>?</p>



<a name="314854409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314854409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314854409">(Dec 09 2022 at 09:47)</a>:</h4>
<p>Yes on the casing convention. How about <code>Set.Elems</code>?</p>



<a name="314854614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314854614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314854614">(Dec 09 2022 at 09:48)</a>:</h4>
<p>or should it be <code>Set.Elem</code> since we don't pluralize types</p>



<a name="314864158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/314864158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#314864158">(Dec 09 2022 at 10:40)</a>:</h4>
<p><code>nonempty_subtype</code> and <code>nonempty_coe_sort</code> are duplicates</p>



<a name="315272101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315272101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315272101">(Dec 12 2022 at 00:51)</a>:</h4>
<p><code>data.set.basic</code> is still waiting to be merged and holding lots up. The last problem had been the missing <code>Preorder ↑s</code> instance. Winston had committed a fix that just wrote the relevant instance from <code>Subtype</code> in by hand, but this isn't very satisfactory.</p>
<p>For now I've gone back to making <code>Set.Elem</code> <code>reducible</code> (no need to go so far as <code>abbrev</code>) so that the instances from <code>Subtype</code> come along for free. I'm dubious that this is really the right answer, but since so much is waiting on <code>data.set.basic</code> at the moment, I propose merging as is and then fixing later.</p>



<a name="315298466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298466">(Dec 12 2022 at 06:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Could you please chime in on this decision?</p>



<a name="315298730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298730">(Dec 12 2022 at 06:49)</a>:</h4>
<p>Seems like we will want them to be distinct eventually if not already</p>



<a name="315298769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298769">(Dec 12 2022 at 06:49)</a>:</h4>
<p>I thought that instances on <code>\u s</code> didn't apply to <code>{x // x \in s}</code> already in mathlib</p>



<a name="315298855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298855">(Dec 12 2022 at 06:50)</a>:</h4>
<p>But I'm fine with doing whatever for now and refactoring later</p>



<a name="315298927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298927">(Dec 12 2022 at 06:51)</a>:</h4>
<p>Ok, let's get this merged</p>



<a name="315298971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/data.set.basic/near/315298971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/data.2Eset.2Ebasic.html#315298971">(Dec 12 2022 at 06:51)</a>:</h4>
<p>Ooh, Scott already did (-;</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>