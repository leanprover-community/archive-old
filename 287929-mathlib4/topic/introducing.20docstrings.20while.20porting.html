---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html">introducing docstrings while porting</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="323227958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323227958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323227958">(Jan 24 2023 at 11:38)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I noticed that you asked to not add docstrings while porting. I don't see why it should be a problem to add them. It's not going to break any tooling right?</p>
<p>I agree we shouldn't randomly refactor code. Even though that is still happening due to various factors.</p>
<p>Can you please explain why you wouldn't want docstring fixes while porting?</p>



<a name="323228236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228236">(Jan 24 2023 at 11:39)</a>:</h4>
<p>I think my objection was primarily "don't do it in a porting PR", not "don't do it at all until the port is done"</p>



<a name="323228443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228443">(Jan 24 2023 at 11:40)</a>:</h4>
<p>But even in a porting PR, I don't see why it is problematic.</p>



<a name="323228604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228604">(Jan 24 2023 at 11:41)</a>:</h4>
<p>Because when reviewing a porting PR, the assumption is that all the docstrings are inherited from mathlib3 and therefore out of scope for suggestions beyond name corrections</p>



<a name="323228676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228676">(Jan 24 2023 at 11:42)</a>:</h4>
<p>The more that becomes in scope for a porting PR, the harder reviewing them becomes</p>



<a name="323228931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228931">(Jan 24 2023 at 11:43)</a>:</h4>
<p>Well, I've not found it hard in practice. During the port, several typos in docstrings have been fixed. And I think that's a good thing.</p>



<a name="323228971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323228971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323228971">(Jan 24 2023 at 11:44)</a>:</h4>
<p>It's not realistic to expect people to make separate PRs for such tiny typos. Then it will just not happen.</p>



<a name="323229368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323229368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323229368">(Jan 24 2023 at 11:45)</a>:</h4>
<p>The PR I'm thinking of added some new docstrings that IMO weren't great, and then I had to spend time working out whether the docstrings were the same as what we used to have in mathlib3, or if the not-greatness was introduced in the PR.</p>



<a name="323229601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323229601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323229601">(Jan 24 2023 at 11:46)</a>:</h4>
<p>You should review the <code>commits[3:]</code> when reviewing porting PRs. Then it is immediate that they are new.</p>



<a name="323229811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323229811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323229811">(Jan 24 2023 at 11:47)</a>:</h4>
<p>I've seen the "new docstrings that are not great" behavior too. I think it's due to a hyperactive docBlame linter.<br>
I agree that fixing typos in docstrings is fine.</p>



<a name="323229995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323229995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323229995">(Jan 24 2023 at 11:48)</a>:</h4>
<p>I think during the port we should just disable the docBlame linter entirely</p>



<a name="323230190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323230190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323230190">(Jan 24 2023 at 11:50)</a>:</h4>
<p>From what I remember, reviewing <code>commits[:3]</code> stops working as soon as a merge from master happens</p>



<a name="323230331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323230331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323230331">(Jan 24 2023 at 11:50)</a>:</h4>
<p>So we should <code>git rebase</code> and <code>git push -f</code>.</p>



<a name="323230400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/introducing%20docstrings%20while%20porting/near/323230400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/introducing.20docstrings.20while.20porting.html#323230400">(Jan 24 2023 at 11:51)</a>:</h4>
<p>Without <code>commits[3:]</code> working, the reviews indeed become terrifying.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>