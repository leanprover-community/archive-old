---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/Update.20lean.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html">Update lean?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="254775407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/254775407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#254775407">(Sep 24 2021 at 21:28)</a>:</h4>
<p>I was about to try to get the mathport binaries to import Mathlib4 so the tactics would work, but I see that Mathlib4 is using a lean4-nightly that is a month old now. Are there any plans to update the lean4 version?</p>



<a name="254797086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/254797086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#254797086">(Sep 25 2021 at 01:43)</a>:</h4>
<p>Wasn't too hard: <a href="https://github.com/leanprover-community/mathlib4/pull/50">https://github.com/leanprover-community/mathlib4/pull/50</a></p>



<a name="255045445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255045445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255045445">(Sep 27 2021 at 13:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/Update.20lean.3F/near/254797086">said</a>:</p>
<blockquote>
<p>Wasn't too hard: <a href="https://github.com/leanprover-community/mathlib4/pull/50">https://github.com/leanprover-community/mathlib4/pull/50</a></p>
</blockquote>
<p>Excellent, thanks. I will try to connect it to mathport today.</p>



<a name="255065616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255065616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255065616">(Sep 27 2021 at 15:15)</a>:</h4>
<p>Exciting! Thanks so much for doing this!</p>



<a name="255815804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255815804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255815804">(Oct 01 2021 at 22:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> fyi, the nightly you updated to (09-24) doesn't have a Windows release. Thus, all the projects tied to that release (<code>mathlib4</code>, <code>mathport</code>, <code>test-mathport</code>, etc.) are broken on Windows without manually changing the Lean version.</p>



<a name="255815877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255815877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255815877">(Oct 01 2021 at 22:22)</a>:</h4>
<p>Oh! Was that a one off? How are the release OSes determined?</p>



<a name="255815890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255815890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255815890">(Oct 01 2021 at 22:23)</a>:</h4>
<p>I'll look into updating again.</p>



<a name="255816153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255816153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255816153">(Oct 01 2021 at 22:25)</a>:</h4>
<p>The nightly CI builds a release for all 3 platforms (Windows, MacOS, Linux) via separate jobs and if one of those fails the nightly doesn't get a release for that platform. One of the Lean 4 tests fails non-deterministically on Windows resulting in some nightlies not getting a Windows release. </p>
<p>Thus, you pretty much have to check the release page manually to see if there are actually binaries for all platforms for a given release. And if some else deeper went wrong, even that may not be sufficient (like with the recent <code>leanc</code> issue).</p>



<a name="255816259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255816259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255816259">(Oct 01 2021 at 22:26)</a>:</h4>
<p>Ideally, it would be a good idea for any major project to have a CI that test their build on all 3 platforms.</p>



<a name="255816445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255816445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255816445">(Oct 01 2021 at 22:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/Update.20lean.3F/near/255815890">said</a>:</p>
<blockquote>
<p>I'll look into updating again.</p>
</blockquote>
<p>I'd wait until tonight's nightly is released (i.e., the 10-02 nightly) because all the nightlies from 09-025 to 10-01 where broken on Linux (without Nix) due to the <code>leanc</code> issue I mentioned. That is, assuming tonight's nightly does successfully release on all platforms. XD</p>



<a name="255818054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255818054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255818054">(Oct 01 2021 at 22:45)</a>:</h4>
<p>Okay, <a href="https://github.com/leanprover-community/mathlib4/pull/54">https://github.com/leanprover-community/mathlib4/pull/54</a> gets us up to 10-01, and I'll wait for the next one!</p>



<a name="255830449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255830449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255830449">(Oct 02 2021 at 01:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> fyi, 10-02 does appear to work properly on all platforms! <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="255830648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255830648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255830648">(Oct 02 2021 at 01:41)</a>:</h4>
<p>Updated the PR!</p>



<a name="255893225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255893225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255893225">(Oct 02 2021 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span> could you update <code>mathport</code> to 10-02 as well? I am testing a fix for the bug <span class="user-mention" data-user-id="110087">@Scott Morrison</span> found and currently the build is failing from what appears to be an error in <code>mathport</code> due to the change in well founded relations sin the Lean core since 09-24. Thus, that makes hit hard to verify my fix actual works for <code>mathport</code>.</p>



<a name="255894544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255894544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255894544">(Oct 02 2021 at 20:00)</a>:</h4>
<p>I pushed <code>mathport</code>, updated to 10-02. Running it now and will update the release (~30m).</p>



<a name="255896963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255896963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255896963">(Oct 02 2021 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> updated the mathport release</p>



<a name="255897199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255897199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255897199">(Oct 02 2021 at 20:43)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span> a minor note: it would be nice if you could hyperlink the commits in the release info to their respective GitHub URL (like is done for mathport itself)</p>



<a name="255897311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255897311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255897311">(Oct 02 2021 at 20:45)</a>:</h4>
<p>In fact, if I am not mistaken, you can just stick the GitHub link to the commit directly in the release Markdown and GitHub will magically pretty print it</p>



<a name="255900968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255900968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255900968">(Oct 02 2021 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span> question: why is there a <code>lakefile.lean~</code> in <code>liquidbin</code>?</p>



<a name="255917452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255917452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255917452">(Oct 03 2021 at 02:56)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span>, I made a PR with two fixes to your update, <a href="https://github.com/leanprover/mathport/pull/27">https://github.com/leanprover/mathport/pull/27</a>.</p>
<ul>
<li><code>lake</code> now expects <code>dependencies</code> to be an <code>Array</code>, not a <code>List</code>.</li>
<li>the <code>lean-toolchain</code> files in the <code>Lib/</code> subdirectories were still pointing at 09-24, so I've bumped those to 10-02.</li>
</ul>



<a name="255917461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255917461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255917461">(Oct 03 2021 at 02:56)</a>:</h4>
<p>(Oh, and I deleted the <code>liquidbin/lakefile.lean~</code>.)</p>



<a name="255917704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/255917704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#255917704">(Oct 03 2021 at 03:01)</a>:</h4>
<p>(You'll need to regenerate the release artefact after merging, because I've changed files in <code>Lib/</code>.)</p>



<a name="256066816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256066816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256066816">(Oct 04 2021 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Thanks. I merged and am regenerating now.</p>



<a name="256347588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256347588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256347588">(Oct 06 2021 at 02:11)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span>, sorry, another request to rebuild the artifact: <a href="https://github.com/leanprover/mathport/pull/28">https://github.com/leanprover/mathport/pull/28</a></p>



<a name="256347654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256347654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256347654">(Oct 06 2021 at 02:12)</a>:</h4>
<p>I'm working on the Makefile for <code>mathport</code> now, to try to get something that builds without external copies of lean/mathlib/lean-liquid. I'd like to be able to build the artifact myself.</p>



<a name="256347687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256347687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256347687">(Oct 06 2021 at 02:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> My computer's power supply broke randomly today :( I am on an 8-year-old laptop. I will look into cloud processes.</p>



<a name="256347771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256347771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256347771">(Oct 06 2021 at 02:14)</a>:</h4>
<p>In fact, just merging that PR may be enough for me.</p>



<a name="256347892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256347892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256347892">(Oct 06 2021 at 02:16)</a>:</h4>
<p>Oh, no, it's the mathlib4 <code>lakefile.lean</code> that I need to update as well.</p>



<a name="256348290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256348290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256348290">(Oct 06 2021 at 02:23)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span>, could you merge <a href="https://github.com/dselsam/mathlib4/pull/1">https://github.com/dselsam/mathlib4/pull/1</a>?</p>



<a name="256348472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256348472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256348472">(Oct 06 2021 at 02:26)</a>:</h4>
<p>Merged both (but didn't get to sanity-check either).</p>



<a name="256348764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Update%20lean%3F/near/256348764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/Update.20lean.3F.html#256348764">(Oct 06 2021 at 02:31)</a>:</h4>
<p>Sorry, missed one of the four lakefiles, there's another PR for the last: <a href="https://github.com/leanprover/mathport/pull/29">https://github.com/leanprover/mathport/pull/29</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>