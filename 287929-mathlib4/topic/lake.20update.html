---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/lake.20update.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html">lake update</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="319825845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319825845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319825845">(Jan 06 2023 at 17:26)</a>:</h4>
<p>I often get a prompt from Lean and from <code>lake</code> to run <code>lake update</code>. However, my understanding is that the only occasion where one should run this command is when bumping mathlib. Can we turn off those warnings for mathlib to avoid many people accidentally running <code>lake update</code>?</p>



<a name="319825931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319825931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319825931">(Jan 06 2023 at 17:27)</a>:</h4>
<p>Or is the consensus that these warnings will appear way less once Lean 4 has stabilised?</p>



<a name="319833880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319833880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319833880">(Jan 06 2023 at 18:10)</a>:</h4>
<p>It's not really about stability of Lean 4 but of mathlib4 dependencies. Which of course should get more stable as well. It would also be possible to suppress this by making Lake more like Nix' <code>--override-input</code>, storing both the original and current source of a dependency in the manifest so that it can detect whether someone changed the lakefile or manifest and warn only in the former case.</p>



<a name="319834281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319834281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319834281">(Jan 06 2023 at 18:12)</a>:</h4>
<p>In fact Nix auto-updates the lockfile when it detects that the equivalent of the lakefile has changed, which I think is the right call</p>



<a name="319835891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319835891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319835891">(Jan 06 2023 at 18:21)</a>:</h4>
<p>(deleted)</p>



<a name="319836190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319836190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319836190">(Jan 06 2023 at 18:23)</a>:</h4>
<blockquote>
<p>storing both the original and current source of a dependency in the manifest so that it can detect whether someone changed the lakefile or manifest and warn only in the former case.</p>
</blockquote>
<p>Ah, I didn't realize that this was for --override-input, clever.</p>



<a name="319836496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319836496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319836496">(Jan 06 2023 at 18:25)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> The current warning is a windows-only bug.  The <code>lake-manifest.json</code> says the packages directory is <code>./lake-packages</code>, while on windows we get <code>.\lake-packages</code>.</p>



<a name="319840566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/lake%20update/near/319840566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/lake.20update.html#319840566">(Jan 06 2023 at 18:47)</a>:</h4>
<p>Ahah. So I assume this will eventually get fixed.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>