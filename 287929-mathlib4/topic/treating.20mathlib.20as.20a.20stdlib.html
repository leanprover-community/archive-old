---
layout: archive
title: Zulip Chat Archive
permalink: /stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/index.html">mathlib4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html">treating mathlib as a stdlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="239317769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239317769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239317769">(May 18 2021 at 20:08)</a>:</h4>
<blockquote>
<p>I feel like this is directly opposed to the stated goal of making Lean 4 a general purpose programming language. I highly doubt anyone is going to think of it that way if the "stdlib" of the library is called "mathlib" and the vast majority of the discussion on the forums is from people deep in mathematics. </p>
</blockquote>
<p>I don't think it's a bad thing that lots of mathematicians are involved. It's sad that there aren't more computer scientists, but there are at least a dozen people who are relatively active here and quite good at writing metaprogramming tools for mathlib or otherwise. But I don't think that the number of people involved has anything to do with the stated focus of the (mathlib) project. It's certainly not anything I have any control over, so I don't worry about it so much. As you say, lean 4 is more focused on being a general purpose programming language, but it's already quite clear that it will not have a large built in standard library, there just isn't the manpower, so having a good std++ library is more important than ever.</p>



<a name="239318245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318245">(May 18 2021 at 20:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239317769">said</a>:</p>
<blockquote>
<p>I don't think it's a bad thing that lots of mathematicians are involved.</p>
</blockquote>
<p>Sorry, It wasn't my intent to criticize that. As I said, I quite enjoy many of the deep math discussions here (and by "on the forums" I meant here on Zullip). I have no qualms with the people involved. I just think it may help to also have computer science targeted std++ as well. I am not saying this should be part of the Lean core, but that there should be some sore of a separate package from mathlib that incorporates the more general additions and targets a more general audience.</p>



<a name="239318338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318338">(May 18 2021 at 20:12)</a>:</h4>
<blockquote>
<p>I just think it may help to also have computer science targeted std++ as well.</p>
</blockquote>
<p>I don't know how to put this any more plainly: <em>mathlib is a computer science targeted std++ library</em>. It is other things too.</p>



<a name="239318449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318449">(May 18 2021 at 20:13)</a>:</h4>
<p>yeah the name's weird, please look past it</p>



<a name="239318591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318591">(May 18 2021 at 20:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239318449">said</a>:</p>
<blockquote>
<p>yeah the name's weird, please look past it</p>
</blockquote>
<p>Is it fair to state here the one of the most important aspects of marketing is branding? <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="239318690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318690">(May 18 2021 at 20:15)</a>:</h4>
<p>Again, I will point out that the name itself was chosen by leo, who isn't really involved with the project and I think misunderstands the focus to some extent</p>



<a name="239318724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318724">(May 18 2021 at 20:15)</a>:</h4>
<p>you aren't the only one who thinks mathlib is only about math</p>



<a name="239318876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318876">(May 18 2021 at 20:16)</a>:</h4>
<p>But that's not a hill I want to die on. I'm not a PR guy</p>



<a name="239318926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318926">(May 18 2021 at 20:17)</a>:</h4>
<p>The point I am trying to make is that while some of the content of mathlib is, in fact, for a general audience, the branding and the community around it would give most people a different first impression which may cause <strong><em>them</em></strong> (newbies) to discount it and thus, possibly, since it is touted as the basic library of lean (ala old boost in C++), Lean as a whole.</p>



<a name="239318969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239318969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239318969">(May 18 2021 at 20:17)</a>:</h4>
<p>So in that case we should just be clear and upfront in our messaging that it's about more than that</p>



<a name="239319075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319075">(May 18 2021 at 20:18)</a>:</h4>
<p>boost is a pretty good analogue</p>



<a name="239319333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319333">(May 18 2021 at 20:20)</a>:</h4>
<p>In any case, <em>I</em> have messaged to <em>you</em> about this fact, so unless you have some PR suggestions for the leanprover-community webpage or other places about it I think we can drop the topic</p>



<a name="239319487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319487">(May 18 2021 at 20:21)</a>:</h4>
<p>I also think the mathematically oriented programming community has a unfortunate love for the concept of monorepos (ex. numpy) that is not shared by (and is, in fact, often diametrically opposed to the view of) the computer science oriented programming community.</p>



<a name="239319641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319641">(May 18 2021 at 20:22)</a>:</h4>
<p>Admittedly, the web dev community seems split between the two (both monorepos and tiny one feature repos are popular there).</p>



<a name="239319662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319662">(May 18 2021 at 20:22)</a>:</h4>
<p>Maybe take it to <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a> , that's a whole long discussion we don't need to have here</p>



<a name="239319746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239319746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239319746">(May 18 2021 at 20:23)</a>:</h4>
<p>true, this has gotten rather off topic XD</p>



<a name="239320235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239320235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239320235">(May 18 2021 at 20:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239318724">said</a>:</p>
<blockquote>
<p>you aren't the only one who thinks mathlib is only about math</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239318690">said</a>:</p>
<blockquote>
<p>Again, I will point out that the name itself was chosen by leo, who isn't really involved with the project and I think misunderstands the focus to some extent</p>
</blockquote>
<p>I one last word on this topic though. I do think mathlib's PR problem is somewhat crystallized by the fact that the primary developer of <strong>Lean itself</strong> thinks it is math focused. With that, I rest my case for now.</p>



<a name="239320510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239320510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239320510">(May 18 2021 at 20:28)</a>:</h4>
<p>yes, it's a whole bunch of self fulfilling prophecies. Not much to do about it at this point</p>



<a name="239321464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239321464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239321464">(May 18 2021 at 20:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239320510">said</a>:</p>
<blockquote>
<p>Not much to do about it at this point</p>
</blockquote>
<p>Really? I would think the advent of the Lean 4 is the perfect time to restructure, refocus, and rebrand. I would suggest keeping the math parts in mathlib and the other parts in some other library <code>stdlib/corelib/metalib/boost</code>  or whatever. But, that is just my opinion.</p>
<p>Also how did you migrate part of thread to another stream? I feel like the tail end of this discussion should probably be in <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a> .</p>



<a name="239321735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239321735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239321735">(May 18 2021 at 20:37)</a>:</h4>
<p>admin powers. point me to what and where to move</p>



<a name="239321994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239321994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239321994">(May 18 2021 at 20:38)</a>:</h4>
<p>I would say from <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239317769">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239317769</a> the discussion is definitely mathlib-focused. Though it really needs the second half your comment here: <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239313689">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239313689</a> for context. It could also use the first half of my comment here: <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239315530">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239315530</a></p>



<a name="239322096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239322096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239322096">(May 18 2021 at 20:39)</a>:</h4>
<p>I don't really know what the topic is :P</p>



<a name="239322219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239322219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239322219">(May 18 2021 at 20:40)</a>:</h4>
<p>"treating mathlib as a stdlib" or something thereabouts?</p>



<a name="239322340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239322340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239322340">(May 18 2021 at 20:41)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="270676" href="/#narrow/stream/270676-lean4/topic/.02klzzwxh.3A0000.03.2F.02klzzwxh.3A0001.03.20id.2Fnon-id.20solution.20.5BRFC.5D">#lean4 &gt; <code>quote</code>/<code>toExpr</code> id/non-id solution [RFC]</a> by <span class="user-mention silent" data-user-id="110049">Mario Carneiro</span></p>



<a name="239322552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239322552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239322552">(May 18 2021 at 20:42)</a>:</h4>
<p>I can't move half a comment so I'll just leave it</p>



<a name="239322722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239322722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239322722">(May 18 2021 at 20:43)</a>:</h4>
<p>makes sense</p>



<a name="239323022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239323022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239323022">(May 18 2021 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239319333">said</a>:</p>
<blockquote>
<p>In any case, <em>I</em> have messaged to <em>you</em> about this fact, so unless you have some PR suggestions for the leanprover-community webpage or other places about it I think we can drop the topic</p>
</blockquote>
<p>I just noticed this comment (I kind of focused on the back and forth and missed it) what do you mean you messaged me? Do you mean a PM, because I haven't got one.</p>



<a name="239323037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239323037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239323037">(May 18 2021 at 20:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239321464">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/.60quote.60.2F.60toExpr.60.20id.2Fnon-id.20solution.20.5BRFC.5D/near/239320510">said</a>:</p>
<blockquote>
<p>Not much to do about it at this point</p>
</blockquote>
<p>Really? I would think the advent of the Lean 4 is the perfect time to restructure, refocus, and rebrand. I would suggest keeping the math parts in mathlib and the other parts in some other library <code>stdlib/corelib/metalib/boost</code>  or whatever.</p>
</blockquote>
<p>This also touches on the point about why mathlib is a monorepo. The basic issue is that maintenance requires coordinating across several things that might look like separate projects to end users, and we know from experience that this is significantly harder when multiple repos are in use.</p>



<a name="239323479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239323479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239323479">(May 18 2021 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239323022">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239319333">said</a>:</p>
<blockquote>
<p>In any case, <em>I</em> have messaged to <em>you</em> about this fact, so unless you have some PR suggestions for the leanprover-community webpage or other places about it I think we can drop the topic</p>
</blockquote>
<p>I just noticed this comment (I kind of focused on the back and forth and missed it) what do you mean you messaged me? Do you mean a PM, because I haven't got one.</p>
</blockquote>
<p>I mean that I have explained the situation to you in comments here so that you are no longer confused/mislead like the newbies you referenced. If you want to make life better for them too then this conversation or something similar needs to exist in relevant documentation, but if it's just us talking then there is no reason to continue to play the newbie role.</p>



<a name="239323911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239323911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239323911">(May 18 2021 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239323037">said</a>:</p>
<blockquote>
<p>This also touches on the point about why mathlib is a monorepo. The basic issue is that maintenance requires coordinating across several things that might look like separate projects to end users, and we know from experience that this is significantly harder when multiple repos are in use.</p>
</blockquote>
<p>I certainly can understand that and sympathize heavily (I tend to through everything  in one repo/package myself when developing on large projects). However, unfortunately, what is convenient for development is often not convenient for the end-user.  When it comes to Git repo itself, some of this can be solved through submodules. For the Lean package though, a do think a split is necessary. But as I am not the one with either the control or the maintenance burden, this is only a recommendation, but one I would suggest heavily considering.</p>



<a name="239324220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239324220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239324220">(May 18 2021 at 20:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239323479">said</a>:</p>
<blockquote>
<p>then there is no reason to continue to play the newbie role.</p>
</blockquote>
<p>Ah. Makes sense.</p>



<a name="239324369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239324369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239324369">(May 18 2021 at 20:54)</a>:</h4>
<p>The packaging situation in lean 4 still needs time to mature. I don't think that we know what that will look like ultimately, and it has come up a few times now that mathlib certainly needs the ability to be packaged in a more fine grained way. But that need not entail that the project itself be atomized, and for maintenance reasons as I mentioned this is something I would certainly like to avoid.</p>



<a name="239324834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239324834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239324834">(May 18 2021 at 20:57)</a>:</h4>
<p>Maybe we could try having a zillion separately compiled mini-projects in the mathlib4 repo, but right now I think that would mean a suboptimal module structure and file organization, and it might also be more expensive overall, although this requires testing to be sure.</p>



<a name="239325873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239325873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239325873">(May 18 2021 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239324369">said</a>:</p>
<blockquote>
<p>The packaging situation in lean 4 still needs time to mature. I don't think that we know what that will look like ultimately, and it has come up a few times now that mathlib certainly needs the ability to be packaged in a more fine grained way. But that need not entail that the project itself be atomized, and for maintenance reasons as I mentioned this is something I would certainly like to avoid.</p>
</blockquote>
<p>I understand and that sounds fine. My only additional suggestion would be to split up the subpackages into Git submodules, so that while all the work can be done, on the developer side, in a single mathlib monorepo, consumers can encounter it (and depend on it) through different lenses.</p>
<p>This may already be compatible with <code>leanpkg</code>.  A directory structure like so might work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">mathlib4</span><span class="bp">/</span>
  <span class="bp">.</span><span class="n">git</span>
  <span class="n">stdlib4</span><span class="bp">\</span>
   <span class="bp">.</span><span class="n">git</span>
    <span class="n">Stdlib</span><span class="bp">\</span>
      <span class="bp">&lt;</span><span class="n">sources</span><span class="bp">&gt;</span>
    <span class="n">Stdlib.lean</span>
    <span class="n">leanpkg.toml</span>
  <span class="n">Mathlib</span><span class="bp">\</span>
     <span class="bp">&lt;</span><span class="n">sources</span><span class="bp">&gt;</span>
  <span class="n">Mathlib.lean</span>
  <span class="n">leanpkg.toml</span>
</code></pre></div>
<p>If I am not mistaken, <code>Stdlib</code> can be a submodule and the top-level <code>leanpkg.toml</code> can depend on it with <code>local</code>. It can then be used in mathlib with <code>Stdlib.*</code> and consumers can depend on either <code>mathlib</code> as a whole (through its collective git repo) or <code>stdlib</code> only (through its own git repo). This might also resolve some of the compile boundaries that where discussed earlier (though not all of them).</p>



<a name="239325994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239325994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239325994">(May 18 2021 at 21:05)</a>:</h4>
<blockquote>
<p>I understand and that sounds fine. My only additional suggestion would be to split up the subpackages into Git submodules, so that while all the work can be done, on the developer side in a single mathlib repo, consumers can encounter it (and depend on it) through different lenses.</p>
</blockquote>
<p>Submodules are literally different repos though. They go through separate PR processes and everything</p>



<a name="239326211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326211">(May 18 2021 at 21:07)</a>:</h4>
<p>That directory structure looks very confusing, you have two <code>Mathlib/Mathlib/</code> directories, and what is in <code>Mathlib/Stdlib/Stdlib/</code>?</p>



<a name="239326257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326257">(May 18 2021 at 21:07)</a>:</h4>
<p>True, though that is somewhat of the goal? Though I can see how PRs for multiple repos could get annoying. I doubt you would need that many different repos though.</p>



<a name="239326381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326381">(May 18 2021 at 21:08)</a>:</h4>
<p>the "from experience" I mentioned earlier is referring to leanprover-community/lean and leanprover-community/mathlib</p>



<a name="239326451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326451">(May 18 2021 at 21:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239326211">said</a>:</p>
<blockquote>
<p>That directory structure looks very confusing, you have two <code>Mathlib/Mathlib/</code> directories, and what is in <code>Mathlib/Stdlib/Stdlib/</code>?</p>
</blockquote>
<p>That is how <code>leanpkg</code> works, yes? You have the out repo directory and then leanpkg demands the sources go in a directory with the same name as the package hence <code>Mathlib/Mathlib</code>. Or maybe I missed something.</p>



<a name="239326493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326493">(May 18 2021 at 21:09)</a>:</h4>
<p>I don't know any filesystem that lets you have two directories with the same name in the same directory</p>



<a name="239326495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326495">(May 18 2021 at 21:09)</a>:</h4>
<p>That's how is currently structured on the repo: <a href="https://github.com/leanprover-community/mathlib4">https://github.com/leanprover-community/mathlib4</a></p>



<a name="239326623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326623">(May 18 2021 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239326493">said</a>:</p>
<blockquote>
<p>I don't know any filesystem that lets you have two directories with the same name in the same directory</p>
</blockquote>
<p>Oops! That second <code>Mathlib\</code> was supposed to be <code>Mathlib.lean</code>. Fixed it.</p>



<a name="239326638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326638">(May 18 2021 at 21:10)</a>:</h4>
<p>If mathlib could compile on multiple versions of lean it wouldn't be as bad, but lean 3 at least did not make this easy at all, so the upgrades have to proceed in lock step and that is much easier when everything is in one repo and you can simultaneously change multiple projects in one PR.</p>



<a name="239326830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326830">(May 18 2021 at 21:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239326638">said</a>:</p>
<blockquote>
<p>If mathlib could compile on multiple versions of lean it wouldn't be as bad</p>
</blockquote>
<p>I don't know what you mean here / what you are getting at.</p>



<a name="239326890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239326890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239326890">(May 18 2021 at 21:13)</a>:</h4>
<p>Mathlib generally only compiles on one version of lean</p>



<a name="239327032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327032">(May 18 2021 at 21:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239319487">said</a>:</p>
<blockquote>
<p>I also think the mathematically oriented programming community has a unfortunate love for the concept of monorepos (ex. numpy) that is not shared by (and is, in fact, often diametrically opposed to the view of) the computer science oriented programming community.</p>
</blockquote>
<p>Some comments with my numpy maintainer hat on: I wouldn't consider it a mono-repo, but numpy is admittedly large. Some things worth noting about it:</p>
<ul>
<li>It was deemed hard to manage as part of the Python standard library (presumably for exactly the same reason as mathlib is separate from lean 3), even though many language features were introduced specifically for numpy-like usage</li>
<li>From what I remember, it actually used to be part of scipy, and was split out aeons ago, long before I earned my hat.</li>
<li>Now that the repos are separate, scipy now lags four releases (around 2 years!) behind numpy. At this point cross-project refactors are almost impossible.</li>
<li>Numpy has accumulated a handful of submodules (<code>np.lib.rec_functions</code>, <code>np.char</code>, <code>np.matrixlib</code>) which are somewhere between hacks and a bad idea, and definitely would have been better as a standalone package; but it's decades too late to remove them now without breaking old research code.</li>
</ul>



<a name="239327040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327040">(May 18 2021 at 21:13)</a>:</h4>
<p>because it's very difficult to polyglot over the existence of a definition in lean core, say</p>



<a name="239327374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327374">(May 18 2021 at 21:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239326890">said</a>:</p>
<blockquote>
<p>Mathlib generally only compiles on one version of lean</p>
</blockquote>
<p>Yes, okay. What does that have to do with anything?</p>



<a name="239327553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327553">(May 18 2021 at 21:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239327032">said</a>:</p>
<blockquote>
<ul>
<li>Numpy has accumulated a handful of submodules (<code>np.lib.rec_functions</code>, <code>np.char</code>, <code>np.matrixlib</code>) which are somewhere between hacks and a bad idea, and definitely would have been better as a standalone package; but it's decades too late to remove them now without breaking old research code.</li>
</ul>
</blockquote>
<p>I would argue that this  largely supports my point. Parts of mathlib that are clearly separate from doing math (though doing math may rely on them) should be in separate packages.</p>



<a name="239327588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327588">(May 18 2021 at 21:17)</a>:</h4>
<p>If the projects weren't so tightly coupled making a PR to the upstream and downstream libraries separately wouldn't be as much of a pain</p>



<a name="239327745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327745">(May 18 2021 at 21:18)</a>:</h4>
<p>But given that they are, it makes sense to retain the ability to change them simultaneously</p>



<a name="239327844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239327844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239327844">(May 18 2021 at 21:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239327588">said</a>:</p>
<blockquote>
<p>If the projects weren't so tightly coupled making a PR to the upstream and downstream libraries separately wouldn't be as much of a pain</p>
</blockquote>
<p>I am confused though, when using submodules the downstream library doesn't have to reflect the public upstream library. You could do a PR to the mathlib repo that updates mathlib and its fork of stdlib. And then make a separate PR from that fork that updates stdlib (after the mathlib one is merged).</p>



<a name="239328184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328184">(May 18 2021 at 21:22)</a>:</h4>
<p>Workflow:<br>
Update my fork of mathlib w/ forked stdlib -&gt; push it -&gt; make PR to mathlib w/ forked -&gt; merged -&gt; make PR from forked stdlib to main stdlib -&gt; merged.</p>



<a name="239328192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328192">(May 18 2021 at 21:22)</a>:</h4>
<p>Yes, solutions exist. They are higher friction for contributors.</p>



<a name="239328306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328306">(May 18 2021 at 21:23)</a>:</h4>
<p>We could do that, but I think that right now getting a usable project structure is more important than solving the packaging situation for end users because there are still many open questions there</p>



<a name="239328309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328309">(May 18 2021 at 21:23)</a>:</h4>
<p>How? it is the same amount of friction as exist currently:<br>
mathlib (w/ forked stdlib) -&gt; push it -&gt; make PR to mathlib (w/ forked stdlib)</p>
<p>The maintainers of mathlib could periodically make PRs to stdlib and not burden the contributors with that.</p>



<a name="239328334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328334">(May 18 2021 at 21:23)</a>:</h4>
<p>Just as the Lean core does with updated stage0. The developers do that periodically after incorporating many changes, it is not a burden of the contributor.</p>



<a name="239328449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328449">(May 18 2021 at 21:24)</a>:</h4>
<p>The lean devs will be the first ones to say that stage0 is a huge pain and makes external contributions delicate</p>



<a name="239328517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328517">(May 18 2021 at 21:25)</a>:</h4>
<p>True, but stage0  (and staging in general) also as many more complexities than submodules</p>



<a name="239328524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328524">(May 18 2021 at 21:25)</a>:</h4>
<p>Mathlib has a lot of contributors so we want the contributor experience to be simple and easy where possible</p>



<a name="239328615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328615">(May 18 2021 at 21:26)</a>:</h4>
<p>I really don't think a submodule introduces that much more complexity. Though, I will admit, it  does introduce some.</p>



<a name="239328617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328617">(May 18 2021 at 21:26)</a>:</h4>
<p>This is not optimal for end users perhaps but I think that we will have technical solutions to the end user experience in time</p>



<a name="239328655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328655">(May 18 2021 at 21:26)</a>:</h4>
<p>What are you optimizing for by splitting out the submodule? Certainly not ease of contributing or refactoring. "Dependency size" seems like a somewhat artificial metric.</p>



<a name="239328886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328886">(May 18 2021 at 21:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239328655">said</a>:</p>
<blockquote>
<p>What are you optimizing for by splitting out the submodule?</p>
</blockquote>
<p>End-users.</p>



<a name="239328905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328905">(May 18 2021 at 21:28)</a>:</h4>
<p>specifically?</p>



<a name="239328910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328910">(May 18 2021 at 21:28)</a>:</h4>
<p>Why is having multiple dependencies easier for end users than depending on the mono-repo?</p>



<a name="239328913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328913">(May 18 2021 at 21:28)</a>:</h4>
<p>The goal is to not bog them down with all the math stuff when that is not what they are looking for.</p>



<a name="239328927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328927">(May 18 2021 at 21:29)</a>:</h4>
<p>so "dependency size" then</p>



<a name="239328933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328933">(May 18 2021 at 21:29)</a>:</h4>
<p>Then they can not look at it?</p>



<a name="239328979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328979">(May 18 2021 at 21:29)</a>:</h4>
<p>This is especially important now as Mathlib operates at global level and thus concepts can clash.</p>



<a name="239328981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239328981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239328981">(May 18 2021 at 21:29)</a>:</h4>
<p>I see a path forward for solving the dependency size problem without splitting mathlib</p>



<a name="239329013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329013">(May 18 2021 at 21:29)</a>:</h4>
<p>so I don't think we should assume these are irreconcilable</p>



<a name="239329061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329061">(May 18 2021 at 21:30)</a>:</h4>
<p>Clashing concepts don't matter if you never import the mathlib one</p>



<a name="239329089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329089">(May 18 2021 at 21:30)</a>:</h4>
<p>Just because you depend on a git repo doesn't mean you import every file within it</p>



<a name="239329356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329356">(May 18 2021 at 21:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239329089">said</a>:</p>
<blockquote>
<p>Just because you depend on a git repo doesn't mean you import every file within it</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239329061">said</a>:</p>
<blockquote>
<p>Clashing concepts don't matter if you never import the mathlib one</p>
</blockquote>
<p>Transitive imports make it highly unlikely for the end-user to this level of fine-grain control over imports (especially considering the tight coupling between aspects of mathlib).</p>



<a name="239329502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329502">(May 18 2021 at 21:33)</a>:</h4>
<blockquote>
<p>Transitive imports make it highly unlikely for the end-user to this level of fine-grain control over imports (especially considering the tight coupling between aspects of mathlib).</p>
</blockquote>
<p>This is a problem that can be solved by more fine grained imports in mathlib</p>



<a name="239329509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329509">(May 18 2021 at 21:33)</a>:</h4>
<p>If a "non-mathsy" file depends on a "mathsy" one, then either:</p>
<ul>
<li>We should just fix it to not be the case</li>
<li>Your definition of "mathsy" isn't consistent with the maintainers' / the constraints imposed by lean</li>
</ul>



<a name="239329512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329512">(May 18 2021 at 21:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239328927">said</a>:</p>
<blockquote>
<p>so "dependency size" then</p>
</blockquote>
<p>Modularity  and separation of concerns has nothing to with "size".</p>



<a name="239329748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329748">(May 18 2021 at 21:35)</a>:</h4>
<p>Why does modularity matter at a dependency level though? The usual answer would be to allow development to be parallelized, but frankly mathlib doesn't yet have a high enough rate of conflicting contributions (or conflicting maintainer opinions) for that to matter.</p>



<a name="239329768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329768">(May 18 2021 at 21:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239329509">said</a>:</p>
<blockquote>
<p>If a "non-mathsy" file depends on a "mathsy" one, then either:</p>
<ul>
<li>We should just fix it to not be the case</li>
<li>Your definition of "mathsy" isn't consistent with the maintainers' / the constraints imposed by lean</li>
</ul>
</blockquote>
<p>This violates the principle of encapsulation. Just because some non-mathsy concept (in implementation) depends on a mathsy one, does not mean that it should pollute the user's namespace with mathsy concept if the user just wants the non-mathsy one.</p>



<a name="239329815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329815">(May 18 2021 at 21:36)</a>:</h4>
<p>This feels like an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> problem where the X is namespace pollution and the Y is make the dependencies smaller</p>



<a name="239329957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329957">(May 18 2021 at 21:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239329815">said</a>:</p>
<blockquote>
<p>This feels like an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> problem where the X is namespace pollution and the Y is make the dependencies smaller</p>
</blockquote>
<p>I never said the issue <em>was</em> Y (make dependencies smaller). In fact, I just stated it <em>wasn't</em>.</p>



<a name="239329960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239329960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239329960">(May 18 2021 at 21:37)</a>:</h4>
<p>Note that mathlib is designed so that you still get a usable lean setup even if you import every file simultaneously. We only make global notations / unnamespaced definitions for things that can reasonably be expected not to conflict with something the end user wants</p>



<a name="239330140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330140">(May 18 2021 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239329960">said</a>:</p>
<blockquote>
<p>We only make global notations / unnamespaced definitions for things that can reasonably be expected not to conflict with something the end user wants</p>
</blockquote>
<p>I think you will find that different end-users have different ideas what they want. This is why the principles of modularity, encapsulation, and separation of concerns are key concepts in computer science.</p>



<a name="239330171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330171">(May 18 2021 at 21:39)</a>:</h4>
<p>maybe, but then those users should speak up</p>



<a name="239330189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330189">(May 18 2021 at 21:39)</a>:</h4>
<p>I am!</p>



<a name="239330202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330202">(May 18 2021 at 21:39)</a>:</h4>
<p>I mean more specifically about problematic global definitions</p>



<a name="239330365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330365">(May 18 2021 at 21:40)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span>, are you arguing for something like either a C++-style approach where even most of the stdlib is namespaced with <code>std::</code> (aka, introduce a <code>mathlib.</code> or <code>std.</code> namespace), or a python-style approach where the "global namespace" only exists per file?</p>



<a name="239330371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330371">(May 18 2021 at 21:40)</a>:</h4>
<p>Well <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  hightlighted the problems he had will teaching various concepts (such a groups) with mathlib as he wants his students to define Groups but mathlib has already stolen that object.</p>



<a name="239330447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330447">(May 18 2021 at 21:41)</a>:</h4>
<p>I have previously highlighted my many problems with namespace clashes due to my own interests of wanting to construct alternative logic/metaprogramming systems in Lean.</p>



<a name="239330463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330463">(May 18 2021 at 21:41)</a>:</h4>
<p>Some parts of this can/should be solved with better conflict resolution on lean's part, but a lot of it is simply us deciding that it is okay to name a definition "topology" because if you have a topology it should be isomorphic to our topology definition and if not your definition is the more niche one and should be namespaced</p>



<a name="239330562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330562">(May 18 2021 at 21:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239330365">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="315577">Mac</span>, are you arguing for something like either a C++-style approach where even most of the stdlib is namespaced with <code>std::</code> (aka, introduce a <code>mathlib.</code> or <code>std.</code> namespace), or a python-style approach where the "global namespace" only exists per file?</p>
</blockquote>
<p>Either works. I would suggest the former in Lean as the later would require radically altering the way the Lean core functions.</p>



<a name="239330619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330619">(May 18 2021 at 21:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239330463">said</a>:</p>
<blockquote>
<p>Some parts of this can/should be solved with better conflict resolution on lean's part, but a lot of it is simply us deciding that it is okay to name a definition "topology" because if you have a topology it should be isomorphic to our topology definition and if not your definition is the more niche one and should be namespaced</p>
</blockquote>
<p>Again I would like to remind everyone that namespacing things does not resolve global clashes in Lean.</p>



<a name="239330638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330638">(May 18 2021 at 21:43)</a>:</h4>
<blockquote>
<p>Some parts of this can/should be solved with better conflict resolution on lean's part</p>
</blockquote>



<a name="239330667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330667">(May 18 2021 at 21:43)</a>:</h4>
<p>If we did add a <code>mathlib.</code> prefix, what problems would remain that dividing mathlib into submodules would solve?</p>



<a name="239330755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330755">(May 18 2021 at 21:44)</a>:</h4>
<p>I think throwing the burden on Lean to vastly alter its conflict resolution when some this could be resolved with a simple namespace is kind silly.</p>



<a name="239330786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330786">(May 18 2021 at 21:44)</a>:</h4>
<p>the namespace solution causes a <em>lot</em> of knock on effects</p>



<a name="239330840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330840">(May 18 2021 at 21:45)</a>:</h4>
<p>it would require a similarly radical change to lean to actually be practical</p>



<a name="239330872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330872">(May 18 2021 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239330463">said</a>:</p>
<blockquote>
<p>Some parts of this can/should be solved with better conflict resolution on lean's part, but a lot of it is simply us deciding that it is okay to name a definition "topology" because if you have a topology it should be isomorphic to our topology definition and if not your definition is the more niche one and should be namespaced</p>
</blockquote>
<p>Also, what happens when then end-user depends on two libraries with different implementations of "topology" that both felt their definition was worthy of the global treatment?</p>



<a name="239330878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330878">(May 18 2021 at 21:45)</a>:</h4>
<p>(to be clear, I'm not saying "let's just add <code>mathlib.</code>", I want to check whether that would address all of <span class="user-mention silent" data-user-id="315577">Mac</span>'s concerns)</p>



<a name="239330940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330940">(May 18 2021 at 21:46)</a>:</h4>
<blockquote>
<p>What happens when then end-user depends on two libraries with different implementations of "topology" that both felt their definition was worthy of the global treatment?</p>
</blockquote>
<p>That's exactly why mathlib exists, so that you don't have those kinds of conflicts</p>



<a name="239330968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239330968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239330968">(May 18 2021 at 21:46)</a>:</h4>
<p>Just to restate the problem I had: if you decide to redefine groups for teaching purposes but want to <code>import tactic</code> for simplicity then you need to work in a namespace and then you have to be a little careful with everything. But it wasn't a deal-breaker and furthermore this was in some sense rather an odd project -- it was the development of a <em>substantial</em> body of theory which was already in the library, something which is vanishingly rare amongst projects I've supervised. And once we had the hang of it things progressed fine -- we just had to learn the tricks like what to open.</p>



<a name="239331036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331036">(May 18 2021 at 21:47)</a>:</h4>
<p>Coq did this kind of thing and the result is a huge fragmentation of the community</p>



<a name="239331038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331038">(May 18 2021 at 21:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239330872">said</a>:</p>
<blockquote>
<p>Also, what happens when then end-user depends on two libraries with different implementations of "topology" that both felt their definition was worthy of the global treatment?</p>
</blockquote>
<p>This is also not just a theoretical concern. There have been many different suggestions for how to structure the algebraic hierarchy -- different libraries could easily form over different definitions and boom the problem arises.</p>



<a name="239331152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331152">(May 18 2021 at 21:48)</a>:</h4>
<p>While we're on namespaces and tactics; at least in lean3, <code>tactic.interactive</code> is a special namespace, and putting tactics from mathlib in <code>mathlib.tactic.interactive</code> wouldn't work</p>



<a name="239331156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331156">(May 18 2021 at 21:48)</a>:</h4>
<p>The idea is for us to decide on <em>one</em> solution and implement it globally across mathlib. Multiple competing hierarchies would be a nightmare</p>



<a name="239331184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331184">(May 18 2021 at 21:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239330940">said</a>:</p>
<blockquote>
<p>That's exactly why mathlib exists, so that you don't have those kinds of conflicts</p>
</blockquote>
<p>Everyone is not going to agree on one approach, that just is not how people (or programmers) work.</p>



<a name="239331265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331265">(May 18 2021 at 21:49)</a>:</h4>
<p>Yes, this is centralization. Decentralized libraries suffer greatly from bitrot</p>



<a name="239331314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331314">(May 18 2021 at 21:49)</a>:</h4>
<p>That has never worked in any programming language ever.</p>



<a name="239331384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331384">(May 18 2021 at 21:50)</a>:</h4>
<p>In fact, languages which tend to force to much users in one way tend to die out and be replaced by more versatile ones.</p>



<a name="239331429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331429">(May 18 2021 at 21:50)</a>:</h4>
<p>Same is true for libaries.</p>



<a name="239331497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331497">(May 18 2021 at 21:51)</a>:</h4>
<p>In fact, as I have argued before, this is the main reason for Lean's extension metaprogramming capabilities to enforce very little style on the end-user.</p>



<a name="239331511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331511">(May 18 2021 at 21:51)</a>:</h4>
<p>All I can say is, it's worked pretty well for mathlib so far (frankly, a lot better than people initially expected)</p>



<a name="239331550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331550">(May 18 2021 at 21:51)</a>:</h4>
<p>Also, there is also <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> example, which even comes up if people <em>do</em> agree on the definitions. They may want to redefine them for teaching purposes.</p>



<a name="239331605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331605">(May 18 2021 at 21:52)</a>:</h4>
<p>Sure, and we should have mechanisms for that</p>



<a name="239331656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331656">(May 18 2021 at 21:52)</a>:</h4>
<p>the current recommendation is to put your whole project in a namespace and it works pretty well</p>



<a name="239331744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331744">(May 18 2021 at 21:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239331656">said</a>:</p>
<blockquote>
<p>the current recommendation is to put your whole project in a namespace and it works pretty well</p>
</blockquote>
<p>That doesn't work if your library also has subnamespaces and you need to open one into the other, then a clash emerges.</p>



<a name="239331782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331782">(May 18 2021 at 21:53)</a>:</h4>
<p>and that's a problem that should be solved by better control over conflict resolution in lean</p>



<a name="239331918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239331918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239331918">(May 18 2021 at 21:55)</a>:</h4>
<p>I just don't understand why you are so against sticking mathlib in a namespace.</p>



<a name="239332020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332020">(May 18 2021 at 21:55)</a>:</h4>
<p>It seems like an rather easy resolution to a lot of potential problems.</p>



<a name="239332115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332115">(May 18 2021 at 21:56)</a>:</h4>
<p>Though, the "dependency size" and presentation problem still remains.</p>



<a name="239332162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332162">(May 18 2021 at 21:56)</a>:</h4>
<p>If it were possible to put one line at the top of every file and it would have that effect I would consider it, but if you actually try it you will find out that there are many practical problems that arise</p>



<a name="239332232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332232">(May 18 2021 at 21:57)</a>:</h4>
<p>Here's an example problem: should mathlib define <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.prod">docs#multiset.prod</a>, or is multiset "not mathsy"?</p>
<p>Because to do so, it needs bits of the algebraic heirarchy, and that's incompatible with a library that defines algebra differently</p>



<a name="239332254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332254">(May 18 2021 at 21:57)</a>:</h4>
<p>for example, if mathlib defines <code>Mathlib.List.foobar</code> and you have <code>l : List A</code> then <code>l.foobar</code> won't work</p>



<a name="239332846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332846">(May 18 2021 at 22:02)</a>:</h4>
<p>On a more general note, I think goes back to my point about a very large gap between what mathematics focused programmers and computer science focused programmers think is proper in software development. Decentralization, modularity, encapsulation, separation of concerns are all fundamental principles in general computer science that are heavily strived for in design (take the ES module system, Rust's module system, and the many efforts at create a C++ module system as examples). Mathlib seems to take the opposite approach (which is also somewhat shared by things like Python/numpy -- which is why I think this seems to be a trend among the mathematically focused).</p>



<a name="239332944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332944">(May 18 2021 at 22:03)</a>:</h4>
<p>I don't think this has anything to do with mathematics focus</p>



<a name="239332954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239332954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239332954">(May 18 2021 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> speaking now with my professional number theory hat on: number theory has existed for over 2000 years and as a subject it is like a parasite. When new areas of mathematics are developed like topology or algebraic geometry or analysis or category theory, number theorists tend to find a way to use these tools to push their own ideas further. For me one of the reasons mathlib has been so successful is that it is a monorepo, relying on nothing more than core lean. Beyond some point mathematics can be regarded as surprisingly interconnected. Massot, Commelin and I tried breaking off and making a dependent perfectoid space repo but we simply didn't have the energy to keep it up to date and then it rotted.</p>



<a name="239333229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333229">(May 18 2021 at 22:05)</a>:</h4>
<p>The fact that everything was there for us all at once (topology, geometry, analysis, number theory, algebra) has been essential for the rapid progress of the Scholze project and Commelin has been working very hard to keep our repo up to date with mathlib master -- we have learnt from our mistakes. The perfectoid space repo is worth nothing any more because nobody can use it with a modern mathlib.</p>



<a name="239333340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333340">(May 18 2021 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239332944">said</a>:</p>
<blockquote>
<p>I don't think this has anything to do with mathematics focus</p>
</blockquote>
<p>That may be entirely true. My only point is that it is odds with the fundamentals of computer science. Such violations also seem more common among the more mathematically-included, but that my just be a false perception on my part (or it may have to do with interconnectedness of mathematics that <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> mentioned).</p>



<a name="239333345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333345">(May 18 2021 at 22:06)</a>:</h4>
<p>One other major difference between the big programming languages you mention and mathlib is that the number of contributors is larger by a few orders of magnitude. Mathlib structure would have to phase change if it had 100 times more PRs per day</p>



<a name="239333559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333559">(May 18 2021 at 22:08)</a>:</h4>
<p>With more contributors comes more manpower to support more elaborate and multiply-centric maintenance structures</p>



<a name="239333699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333699">(May 18 2021 at 22:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239332254">said</a>:</p>
<blockquote>
<p>for example, if mathlib defines <code>Mathlib.List.foobar</code> and you have <code>l : List A</code> then <code>l.foobar</code> won't work</p>
</blockquote>
<p>Yes, this is certainly a concern (and a place I can see an argument for using the global namespace). </p>
<p>I would note, though, that adding fields to existing classes is still a violation of the principles I mentioned before and other languages (like Ruby with its "refinements") have figured out ways to do this without sacrificing encapsulation. For Lean, though, yes adding it to global List is probably the way to go for now.</p>



<a name="239333800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333800">(May 18 2021 at 22:10)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> it _is_ possible to develop your own stuff in a namespace, there are tricks to help you avoid problems with things in the global namespace -- you work in your own namespace, you define your versions there, and lean chooses them by default. It was only very rarely we had to explicitly disambiguate. As far as I can see this is a reasonable solution to your root namespace issue. As for breaking mathlib up, why mess with something which is working?</p>



<a name="239333889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333889">(May 18 2021 at 22:11)</a>:</h4>
<p>This namespace issue seems to come up (and be mischaracterized) repeatedly; can we record a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> somewhere less transient than Zulip? Would a issue against lean4 be appropriate? A wiki page somewhere?</p>



<a name="239333955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239333955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239333955">(May 18 2021 at 22:12)</a>:</h4>
<p>We tried to break off perfectoid spaces and in some sense the only thing we learnt was that the project enhanced mathlib because of all the stuff that ended up in it as a result of the project</p>



<a name="239334025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334025">(May 18 2021 at 22:12)</a>:</h4>
<p>How about a documentation folder in mathlib4 on implementation notes?</p>



<a name="239334068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334068">(May 18 2021 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="243312">@Jason KY.</span> Can you remember an explicit problem we had when trying to define <a href="http://Xena.group">Xena.group</a> when <a href="http://_root_.group">_root_.group</a> existed?</p>



<a name="239334284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334284">(May 18 2021 at 22:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239333800">said</a>:</p>
<blockquote>
<p>As far as I can see this is a reasonable solution to your root namespace issue.</p>
</blockquote>
<p>This does not work in the following pattern, which crops up in my use case:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">foo</span> <span class="o">:=</span> <span class="bp">..</span>
<span class="kd">def</span> <span class="n">bar</span> <span class="o">:=</span> <span class="bp">..</span>

<span class="kn">namespace</span> <span class="n">MyStuff</span>

<span class="kn">namespace</span> <span class="n">ImpA</span>
<span class="kd">def</span> <span class="n">foo</span> <span class="o">:=</span> <span class="bp">..</span>
<span class="kd">def</span> <span class="n">bar</span> <span class="o">:=</span> <span class="bp">..</span>
<span class="kd">end</span>

<span class="kn">namespace</span> <span class="n">ImpB</span>
<span class="kd">def</span> <span class="n">foo</span> <span class="o">:=</span> <span class="bp">..</span>
<span class="kd">def</span> <span class="n">bar</span> <span class="o">:=</span> <span class="bp">..</span>
<span class="kd">end</span>

<span class="kn">namespace</span> <span class="n">ConcernA</span>
<span class="kn">open</span> <span class="n">ImpA</span> <span class="o">(</span><span class="n">foo</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">ImpB</span> <span class="o">(</span><span class="n">bar</span><span class="o">)</span>
<span class="c1">-- ImpA.foo and ImpB.bar now clashes with global foo/bar</span>
<span class="kd">end</span>

<span class="kn">namespace</span> <span class="n">ConcernB</span>
<span class="kn">open</span> <span class="n">ImpA</span> <span class="o">(</span><span class="n">bar</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">ImpB</span> <span class="o">(</span><span class="n">foo</span><span class="o">)</span>
<span class="c1">-- ImpA.bar and ImpB.foo now clashes with global foo/bar</span>
<span class="kd">end</span>

<span class="kd">end</span>
</code></pre></div>



<a name="239334420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334420">(May 18 2021 at 22:17)</a>:</h4>
<p><code>open (priority := high) ImpA (foo)</code>?</p>



<a name="239334438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334438">(May 18 2021 at 22:17)</a>:</h4>
<p>I don't think that exists but it would solve the problem</p>



<a name="239334569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334569">(May 18 2021 at 22:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239333345">said</a>:</p>
<blockquote>
<p>One other major difference between the big programming languages you mention and mathlib is that the number of contributors is larger by a few orders of magnitude. Mathlib structure would have to phase change if it had 100 times more PRs per day</p>
</blockquote>
<p>This may also be though why you have encountered so few difficulties with your centralized approach. Your small user-base makes it possible for most people to agree on things. There is not currently a significant enough number of people who disagree to create an alternative and maintain it. In languages with big userbases, this happens all the time so the centralized approach is often quickly abandoned.</p>



<a name="239334578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334578">(May 18 2021 at 22:18)</a>:</h4>
<p>arguably, an open of a particular name should normally be high priority</p>



<a name="239334667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334667">(May 18 2021 at 22:19)</a>:</h4>
<blockquote>
<p>In languages with big userbases, this happens all the time so the centralized approach is often quickly abandoned.</p>
</blockquote>
<p>Note that even here there is a desire for centralization when multiple libraries need to communicate or interoperate</p>



<a name="239334737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334737">(May 18 2021 at 22:20)</a>:</h4>
<p>having a centralized standard library to provide the "vocabulary" for other libraries is considered valuable</p>



<a name="239334785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334785">(May 18 2021 at 22:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239334068">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> Can you remember an explicit problem we had when trying to define <a href="http://Xena.group">Xena.group</a> when <a href="http://_root_.group">_root_.group</a> existed?</p>
</blockquote>
<p>I think we had a similar problem to the example Mac gave. We had groups in the <code>mygroup</code> namespace and so can't open anything without ambiguity.  We just ignored it by not opening anything and prefixing everything with <code>mygroup.</code>.  What Mario suggested would be great for this I think!</p>



<a name="239334840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334840">(May 18 2021 at 22:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239334578">said</a>:</p>
<blockquote>
<p>arguably, an open of a particular name should normally be high priority</p>
</blockquote>
<p>Sure, and I have taken up the issue with Lean as well. However, as you yourself stated, the Lean developers have a lot on there plate and don't have time for such changes, so concerns should instead be addressed to mathlib. So, here I am! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="239334895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334895">(May 18 2021 at 22:21)</a>:</h4>
<p>If we can fix this in mathlib, we probably should</p>



<a name="239334910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334910">(May 18 2021 at 22:21)</a>:</h4>
<p>for example, by overriding the <code>open</code> command</p>



<a name="239334934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334934">(May 18 2021 at 22:21)</a>:</h4>
<p>as long as the behavior is compatible I don't see any reason not to override various bits of core syntax</p>



<a name="239334962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239334962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239334962">(May 18 2021 at 22:22)</a>:</h4>
<p>although it is more overall code than if we were to just modify lean</p>



<a name="239335109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239335109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239335109">(May 18 2021 at 22:23)</a>:</h4>
<p>still, it lets us test out changes and PR it to lean only once we are reasonably sure that it's worth it</p>



<a name="239335304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239335304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239335304">(May 18 2021 at 22:25)</a>:</h4>
<p>well, priority in the <code>open</code> command needs more than a cosmetic change, it needs <code>OpenDecl</code> to track priority and the priority to get used in conflict resolution; I doubt those things can be accomplished by mathlib overrides</p>



<a name="239340396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239340396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239340396">(May 18 2021 at 23:18)</a>:</h4>
<p>(Coming to this all a bit late.)</p>
<p>I'm very sympathetic to the idea that the current structure and "branding" of mathlib is scaring off computer scientists, to the detriment of the everyone.</p>
<p>That said, I am a huge fan of the monorepo style for doing mathematics. You only have to look at the fundamentally unique successes Lean has had relative to other theorem provers (perfectoid and LTE, I'm looking at you) --- what is going on is that they are doing real modern mathematics, relying on a surprising variety of mathematical topics that don't obviously belong together. Mathlib provides a guarantee that if if two bits of mathematics exist in the library, you can use them together.</p>
<p>In other theorem provers, this is woefully far from the case. You can ask "do you have X?" and "do you have Y?" and receive enthusiastic responses, but when you ask "how do I import X and Y at the same time?" you tend to get a lot of explanation of why that just isn't a reasonable thing to do...</p>
<p>This is only possible because it's practical to do library-wide refactors, and having to synchronize commits across different repos would completely kill this.</p>



<a name="239341845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239341845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239341845">(May 18 2021 at 23:32)</a>:</h4>
<p>Perhaps we could try a concrete experiment in Lean3. There is an obvious segmentation point in the current library: basically <code>tactic.basic</code>. A while back we put in a lot of work to minimise the imports of <code>tactic.basic</code>, and it's still pretty clean. There's no other division in the library that comes close.</p>
<p>What could making a sharper division here look like? Is there a setup that would allow someone to just depend on stuff below <code>tactic.basic</code>, but not make the PR process more painful?</p>



<a name="239342114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239342114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239342114">(May 18 2021 at 23:35)</a>:</h4>
<p>In a lot of ways this segmentation is easier in lean 3 than lean 4, because you can have multiple projects with overlapping module names. So we could move <code>tactic.basic</code> and its dependents to some other subfolder of mathlib with its own leanpkg.toml, tweak the toml files a bit, and no lean files have to change textually</p>



<a name="239342383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239342383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239342383">(May 18 2021 at 23:38)</a>:</h4>
<p>In lean 4, module names start with the package name, so moving things from one package to another means at least changing the import references and folder organization. Moving to another repo is not required, however; leanpkg does support multiple projects in one repository.</p>



<a name="239342575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239342575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239342575">(May 18 2021 at 23:40)</a>:</h4>
<p>The way leanproject works, however, you still have to check out the mathlib repository (shallowly) in order to depend on a subfolder, so you would still have the "big dependency" problem as an end user if you want to depend on the "<code>tactic.basic</code> + deps" project without mathlib</p>



<a name="239343061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343061">(May 18 2021 at 23:46)</a>:</h4>
<p>An architecture that would support fine grained dependencies even to the extent of not pulling in unnecessary things via some <code>cargo</code>-like package manager designed to work with mathlib might look like this: Mathlib compiles its dependency graph into a <code>mathlib.deps</code> file that is served by some server. <code>leanpkg</code> downloads this file, computes the up-set of the files imported by the current project, and requests the <code>.olean</code> or <code>.o</code> files corresponding to these from the server and puts them in the local <code>build/</code> directory. Then it compiles the project as normal.</p>
<p>That would allow users to freely <code>import Mathlib.Whatever</code>, and <code>leanpkg</code> will just download built files as needed, so there is no "big dependency" problem and mathlib can grow arbitrarily in any direction while still keeping the monorepo design.</p>



<a name="239343387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343387">(May 18 2021 at 23:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239340396">said</a>:</p>
<blockquote>
<p>That said, I am a huge fan of the monorepo style for doing mathematics. You only have to look at the fundamentally unique successes Lean has had relative to other theorem provers (perfectoid and LTE, I'm looking at you) --- what is going on is that they are doing real modern mathematics, relying on a surprising variety of mathematical topics that don't obviously belong together. Mathlib provides a guarantee that if if two bits of mathematics exist in the library, you can use them together.</p>
</blockquote>
<p>In spite of all that has been said, I actually agree with this. Since all of the mathematics in mathlib is done using the same base theory (by a very feneral notion of thoery) it makes sense that all the results of said theory would be in the same repo. I would still adovocate its contents be placed in a <code>Mathlib</code> namespace so that end-users could perform analysis between different axiomatizations of mathematics. But I can understand that the burden to do so may be considered to great to appeal to such niche interests (at this time). </p>
<p>My problem is really only with the non-math std++ part of mathlib, which I feel should take the more standard CS approach (of modularity and separation of concerns) in is structure as that is the audience it is (hopefully) targeting in Lean 4.</p>



<a name="239343604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343604">(May 18 2021 at 23:53)</a>:</h4>
<p>Personally I don't think lean 4 (or lean 3) is a good place for exploring alternative mathematical foundations, reverse mathematics, and other things like that. Lean has progressively taken steps <em>away</em> from this since lean 2 which supported HoTT and had a number of kernel flags to allow for impredicativity or not, proof irrelevance or not, inductive types or not etc</p>



<a name="239343673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343673">(May 18 2021 at 23:54)</a>:</h4>
<p>If you want to do other logics they are all basically deeply embedded second class citizens</p>



<a name="239343841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343841">(May 18 2021 at 23:56)</a>:</h4>
<p>I think it's okay if lean doesn't do everything, that doesn't have to be a design goal</p>



<a name="239343890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343890">(May 18 2021 at 23:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239343604">said</a>:</p>
<blockquote>
<p>Personally I don't think lean 4 (or lean 3) is a good place for exploring alternative mathematical foundations, reverse mathematics, and other things like that.</p>
</blockquote>
<p>You are assuming one has to explore them within Lean 4's current logical framework. With Lean 4's new metaprogramming framework, you can define entire custom DSLs and rebuild the logic from the ground up in them. I love Lean for its metaprogramming power, not really its internal logic.</p>



<a name="239343909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343909">(May 18 2021 at 23:57)</a>:</h4>
<p>Lean doesn't separate them though</p>



<a name="239343934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343934">(May 18 2021 at 23:57)</a>:</h4>
<p>Lean has one builtin kernel and doesn't let you swap it out for something else</p>



<a name="239343944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239343944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239343944">(May 18 2021 at 23:57)</a>:</h4>
<p>You can force it to separate them. You don't actually need to reduce <code>Syntax</code> to <code>Exor</code> or real terms for example.</p>



<a name="239344051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344051">(May 18 2021 at 23:59)</a>:</h4>
<p>I would like to see a "full conversion" proof of concept for that. I am extremely dubious that you can actually do that without having to rebuild half of lean</p>



<a name="239344069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344069">(May 18 2021 at 23:59)</a>:</h4>
<p>You can do all the computation at the meta level and theorem proving at the meta level. Just as you can write a kernel in C++, you can write a new kernel in Lean. You don't have to appeal to Lean's kernel</p>



<a name="239344475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344475">(May 19 2021 at 00:02)</a>:</h4>
<p>i.e. you could use Lean to as an interpreter to check a DSL or use write a compiler in Lean for the DSL in Lean that you could use an external check for. Or you can could your own checker in lean which you compile and use. There are many ways to do logic in Lean that don't require grounding the logic on Lean's logic system.</p>



<a name="239344497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344497">(May 19 2021 at 00:02)</a>:</h4>
<p>without <code>Expr</code> that means that you need to rewrite all <code>elab</code>s, <code>def</code> and <code>theorem</code>, and an environment extension that calls your kernel. I am honestly curious if this is possible, because it would probably beat the pants off my MM1 proof assistant, but it sounds like a tremendous amount of work and I'm not even sure all the hooks to do so are available in user space</p>



<a name="239344578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344578">(May 19 2021 at 00:03)</a>:</h4>
<p>Environment extension are available that's what the initialize attribute is for</p>



<a name="239344596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344596">(May 19 2021 at 00:03)</a>:</h4>
<p>I've had issues trying to employ it in the past</p>



<a name="239344689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344689">(May 19 2021 at 00:04)</a>:</h4>
<p>Nothing I said sounds impossible from what I know, but there may be unforeseen issues which is why I mention a POC</p>



<a name="239344744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239344744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239344744">(May 19 2021 at 00:05)</a>:</h4>
<p>I don't doubt it. But I am excited to look into the possibility. It's what I'll probably work on the next time I have a lot of free time.</p>



<a name="239345172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345172">(May 19 2021 at 00:10)</a>:</h4>
<p>I think not readily supporting alternative axiomatizations is a feature, not a bug. I love computer scientists, but remain dubious about constructivists. :-) (That is of course a joke --- but I think for acceptance by mathematicians, we've already seen that being bog-standard-classical has been a huge success.)</p>



<a name="239345248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345248">(May 19 2021 at 00:12)</a>:</h4>
<p>(Although when we meet alien mathematicians, I for one welcome our new constructivists overlords.)</p>



<a name="239345318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345318">(May 19 2021 at 00:12)</a>:</h4>
<p>I think it a bit unfortunate that "constructivist" is what most people around here think of / are exposed to when talking about alternate axiomatizations. I would like to see more stuff like modal logic, linear logic, exponential function arithmetic, ACA0, that kind of stuff</p>



<a name="239345322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345322">(May 19 2021 at 00:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239345172">said</a>:</p>
<blockquote>
<p>That is of course a joke --- but I think for acceptance by mathematicians, we've already seen that being bog-standard-classical has been a huge success.</p>
</blockquote>
<p>Hence why I am a computer scientist, not a mathematician! ;)</p>



<a name="239345388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345388">(May 19 2021 at 00:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239345318">said</a>:</p>
<blockquote>
<p>I think it a bit unfortunate that "constructivist" is what most people around here think of / are exposed to when talking about alternate axiomatizations. I would like to see more stuff like modal logic, linear logic, exponential function arithmetic, ACA0, that kind of stuff</p>
</blockquote>
<p>There is also nonstandard analysis, which I am quite fond of.</p>



<a name="239345433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345433">(May 19 2021 at 00:14)</a>:</h4>
<p>You can do nonstandard analysis without changing axioms though, there is even a definition of hyperreals in mathlib</p>



<a name="239345611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345611">(May 19 2021 at 00:16)</a>:</h4>
<p>True (though I would not qualify it as bog-standard). There are also ways of doing it with different axiomizations though.</p>



<a name="239345769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345769">(May 19 2021 at 00:19)</a>:</h4>
<p>I think the most useful application of nonstandard analysis is using nonstandard analysis methods to construct theorems in regular analysis; for this you actually want to be working in some kind of facade or deep embedding translation over a standard mathematical setup, and the key is to have a nice input method that hides all that</p>



<a name="239345879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345879">(May 19 2021 at 00:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239345172">said</a>:</p>
<blockquote>
<p>I think not readily supporting alternative axiomatizations is a feature, not a bug. I love computer scientists, but remain dubious about constructivists. :-) (That is of course a joke --- but I think for acceptance by mathematicians, we've already seen that being bog-standard-classical has been a huge success.)</p>
</blockquote>
<p>This also touches on the point I was getting at early. I think  people who fall firmly in computer scientist camp tend to like (and desire) a million different ways of doing things (hence the plethora of programming languages and frameworks), whereas those more mathematically oriented are much fonder of working off a tried and true base/standard (hence the continuing survival of classical logic).</p>



<a name="239345957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239345957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239345957">(May 19 2021 at 00:21)</a>:</h4>
<p>Then again, I may just be asserting patterns where there are none.</p>



<a name="239346066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346066">(May 19 2021 at 00:23)</a>:</h4>
<blockquote>
<p>I think people who fall firmly in computer scientist camp tend to like (and desire) a million different ways of doing things (hence the plethora of programming languages and frameworks)</p>
</blockquote>
<p>I think a plethora of <em>frameworks</em> indicates that lots of people want one way to do things but they all disagree on what that one way is</p>



<a name="239346086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346086">(May 19 2021 at 00:23)</a>:</h4>
<p>same diff?</p>



<a name="239346160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346160">(May 19 2021 at 00:24)</a>:</h4>
<p>Every individual framework is unified in vision and generally has take-over-the-world ambitions</p>



<a name="239346169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346169">(May 19 2021 at 00:24)</a>:</h4>
<p>Mathlib is one such framework</p>



<a name="239346226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346226">(May 19 2021 at 00:25)</a>:</h4>
<p>If you want to do your own thing, okay, but don't mind us while we take over the rest of the world</p>



<a name="239346256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346256">(May 19 2021 at 00:25)</a>:</h4>
<p>Yes, true, computer scientists tend to think they have the one answer but they have worked with so many other people also have think they have the one answer (and that answer is different than theirs) tends to result  in a few deciding to build systems that support as many different one answers as they can. XD</p>



<a name="239346387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346387">(May 19 2021 at 00:27)</a>:</h4>
<p>Once several competing libraries exist, of course you want to be able to mediate between them and this leads to increasing abstraction. But this is a suboptimal situation for a number of reasons, and we're trying to keep things unified where possible</p>



<a name="239346397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346397">(May 19 2021 at 00:27)</a>:</h4>
<p>I am a participant in both these camps. I have what I think to be my one answer, but I also try to encourage and create systems that support many possible (including my own). ;)</p>



<a name="239346438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346438">(May 19 2021 at 00:28)</a>:</h4>
<p>When there are good reasons to have multiple versions of a thing, mathlib has multiple versions of the thing and relates them</p>



<a name="239346485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346485">(May 19 2021 at 00:29)</a>:</h4>
<p>when multiple versions of a thing are done in independent libraries, the "relating" part gets lost in transmission</p>



<a name="239346619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346619">(May 19 2021 at 00:30)</a>:</h4>
<p>For me, math/logic (and computer science) is a creative enterprise, my goal is express what I want to express using the tools given to me (and creating new tools if the current tools are insufficient).</p>



<a name="239346623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346623">(May 19 2021 at 00:30)</a>:</h4>
<p>My position here is to try to understand your problem to see whether mathlib can accomodate a solution to it so that we don't need to have multiple libraries and the aforementioned abstraction</p>



<a name="239346657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346657">(May 19 2021 at 00:31)</a>:</h4>
<blockquote>
<p>For me, math/logic (and computer science) is a creative enterprise, my goal is express what I want to express using the tools given to me (and creating new tools if the current tools are insufficient).</p>
</blockquote>
<p>I don't think anyone will disagree with that</p>



<a name="239346867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346867">(May 19 2021 at 00:33)</a>:</h4>
<p>Again, my interest, in particular, at the moment is mostly in the stdlib rather than mathlib part of mathlib, i.e. can I get some tools to help out with my metaprogramming  and metalogic explorations without cluttering my namespace with names and syntax clashing with concepts for which  I wish to explore alternate definitions.</p>



<a name="239346919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346919">(May 19 2021 at 00:34)</a>:</h4>
<p>I already get enough clashes from Lean itself, I would kind of like to avoid more.</p>



<a name="239346969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346969">(May 19 2021 at 00:34)</a>:</h4>
<p>You could just not put things in the global namespace unprotected; mathlib has microcosms of this issue all over the place</p>



<a name="239346997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239346997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239346997">(May 19 2021 at 00:35)</a>:</h4>
<p>just don't call your fancy and <code>_root_.And</code> and it's fine</p>



<a name="239347031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347031">(May 19 2021 at 00:35)</a>:</h4>
<p>you can use typeclasses to abstract over syntax too</p>



<a name="239347091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347091">(May 19 2021 at 00:36)</a>:</h4>
<p>lots of mathlib types define their own + or whatever, see the surreals for example</p>



<a name="239347098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347098">(May 19 2021 at 00:36)</a>:</h4>
<p>but if I call it <code>And</code> I get clashes unless I wish to write out <code>MyStuff.And</code> which I find aesthetically (and typing-wise) burdensome.</p>



<a name="239347118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347118">(May 19 2021 at 00:36)</a>:</h4>
<p>Then don't call it <code>And</code></p>



<a name="239347127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347127">(May 19 2021 at 00:36)</a>:</h4>
<p>Bur it <em>is</em> And!</p>



<a name="239347167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347167">(May 19 2021 at 00:37)</a>:</h4>
<p>I could also make the same argument for mathlib, i.e., don't call it <code>And</code> call it <code>MAnd</code>.</p>



<a name="239347169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347169">(May 19 2021 at 00:37)</a>:</h4>
<p>No, <code>And</code> already exists and means the one that comes with lean. Even if you could solve the naming clash issue, it's confusing for readers to not make them distinct</p>



<a name="239347222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347222">(May 19 2021 at 00:38)</a>:</h4>
<p>Mathlib doesn't define a competing <code>And</code> for exactly this reason</p>



<a name="239347245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347245">(May 19 2021 at 00:38)</a>:</h4>
<p>for other types it either uses typeclasses for syntax overloading or namespaced names</p>



<a name="239347247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347247">(May 19 2021 at 00:38)</a>:</h4>
<p>I think the namespace argument is a happy medium: you get <code>Mathlib.And</code> which you and I can refer to as <code>And</code> when <code>Mathlib</code> is open and I get <code>MyStuff.And</code> which I can refer to as <code>And</code> when <code>MyStuff</code> is open.</p>



<a name="239347269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347269">(May 19 2021 at 00:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239347169">said</a>:</p>
<blockquote>
<p>No, <code>And</code> already exists and means the one that comes with lean. Even if you could solve the naming clash issue, it's confusing for readers to not make them distinct</p>
</blockquote>
<p>I was using <code>And</code> as an example, not the actual case in point.</p>



<a name="239347355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347355">(May 19 2021 at 00:40)</a>:</h4>
<p>So was I</p>



<a name="239347379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347379">(May 19 2021 at 00:40)</a>:</h4>
<p>So how does this also apply to <code>Semigroup</code>?</p>



<a name="239347416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347416">(May 19 2021 at 00:41)</a>:</h4>
<p><code>Semigroup</code> extends <code>Mul</code> which supplies the notation <code>*</code>, so you can write <code>x * y</code> for <code>x y : A</code> where <code>Semigroup A</code></p>



<a name="239347426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347426">(May 19 2021 at 00:41)</a>:</h4>
<p>that's what I mean by "typeclasses for syntax overloading"</p>



<a name="239347431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347431">(May 19 2021 at 00:41)</a>:</h4>
<p>Let's say I want to define an algebra hierarchy like Kyle's and Mathlib currently has its own notion, I want to stop clashes. What are you proposing?</p>



<a name="239347489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347489">(May 19 2021 at 00:42)</a>:</h4>
<p>suppose you are doing this as part of mathlib</p>



<a name="239347528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347528">(May 19 2021 at 00:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239347416">said</a>:</p>
<blockquote>
<p><code>Semigroup</code> extends <code>Mul</code> which supplies the notation <code>*</code>, so you can write <code>x * y</code> for <code>x y : A</code> where <code>Semigroup A</code></p>
</blockquote>
<p>This assumes I want <code>Semigroup</code> to extend <code>Mul</code> and not use a different symbol like <code>&lt;&gt;</code> (which Haskell uses).</p>



<a name="239347552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347552">(May 19 2021 at 00:43)</a>:</h4>
<p>That's a whole digression</p>



<a name="239347564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347564">(May 19 2021 at 00:43)</a>:</h4>
<p>Suffice it to say, you extend a notation typeclass for the operator you want to use</p>



<a name="239347758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347758">(May 19 2021 at 00:46)</a>:</h4>
<p>I will admit that at this point I have also confused myself. </p>
<p>The simple point I was trying to make is a might want to define my own version (or, in fact, multiple different versions) of a mathlib concept like <code>Semigroup</code> and I want to call  them all <code>Semigroup</code> (as they all different formulations of the concept). In fact, Mathlib itself has some problems with the difference between bundled and unbundled notions of <code>Semigroup</code>. I think a reasonable solution is to use namespaces (as that is what they are for) and I do not see the problem with this generally. Yes, there are some situations where this is not feasible (so don't do it there), but every it is, I see no problem.</p>



<a name="239347808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347808">(May 19 2021 at 00:47)</a>:</h4>
<p>Different things get different names, the same thing gets the same name</p>



<a name="239347842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347842">(May 19 2021 at 00:47)</a>:</h4>
<p>So who gets the name of <code>Semigroup</code>? Or do none of them?</p>



<a name="239347847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347847">(May 19 2021 at 00:47)</a>:</h4>
<p>Competing definitions for the same concept is studiously avoided in mathlib</p>



<a name="239347853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347853">(May 19 2021 at 00:47)</a>:</h4>
<p>there is only one <code>Semigroup</code></p>



<a name="239347903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347903">(May 19 2021 at 00:48)</a>:</h4>
<p>for bundled / unbundled, there is <code>semigroup</code> and <code>is_semigroup</code></p>



<a name="239347929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347929">(May 19 2021 at 00:48)</a>:</h4>
<p>the category is <code>Semigroup</code> I guess</p>



<a name="239347942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347942">(May 19 2021 at 00:48)</a>:</h4>
<p>the main one is <code>semigroup</code></p>



<a name="239347996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239347996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239347996">(May 19 2021 at 00:49)</a>:</h4>
<p>So there are 3 semigroups in Mathlib, and one of those will need a new name in Lean4 since all types are now upper case.</p>



<a name="239348003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348003">(May 19 2021 at 00:49)</a>:</h4>
<p>But if there was another semigroup definition that was equivalent to one of the above, it would be deleted and references would go instead to the existing concept</p>



<a name="239348057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348057">(May 19 2021 at 00:50)</a>:</h4>
<p>We still need to figure out how to make the lean 4 naming convention work with stuff like categories</p>



<a name="239348059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348059">(May 19 2021 at 00:50)</a>:</h4>
<p>Probably <code>SemigroupCat</code></p>



<a name="239348121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348121">(May 19 2021 at 00:51)</a>:</h4>
<p>I'm not sure those all exist btw, but that's what they would be called if they did</p>



<a name="239348186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348186">(May 19 2021 at 00:52)</a>:</h4>
<p>My point is this name clashing is even a problem within mathlib. Outside of mathlib, people, like me, may disagree with what you have choosen to be the canonical semigroup definition (or just, like me, wish to explore alternatives)  and want to define their own while still using bits and pieces of mathlib (as it is Lean's defacto standard lib), I don't see why they have to lose access to the right of the name of <code>Semigroup</code>.</p>



<a name="239348234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348234">(May 19 2021 at 00:53)</a>:</h4>
<p>Why not build from within mathlib? Then that issue goes away</p>



<a name="239348254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348254">(May 19 2021 at 00:53)</a>:</h4>
<p>What do you mean?</p>



<a name="239348263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348263">(May 19 2021 at 00:54)</a>:</h4>
<p>You want to extend semigroups with some theorem that we don't have? Use the one that exists</p>



<a name="239348321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348321">(May 19 2021 at 00:54)</a>:</h4>
<p>You want to experiment with alternative definitions for semigroup? Refactor the library</p>



<a name="239348369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348369">(May 19 2021 at 00:55)</a>:</h4>
<p>You don't want to refactor the library but define your own semigroup anyway? Use a namespace (and don't PR it to mathlib because we will certainly remove the duplication during review)</p>



<a name="239348432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348432">(May 19 2021 at 00:56)</a>:</h4>
<p>I don't understand why consumers are obligated to use a namespace but mathlib itself isn't.</p>



<a name="239348458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348458">(May 19 2021 at 00:56)</a>:</h4>
<p>If you can define something compatible with mathlib's definitions you don't need a namespace</p>



<a name="239348476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348476">(May 19 2021 at 00:57)</a>:</h4>
<p>Why is mathlib the end-all-and be all of how things should be canonical defined?</p>



<a name="239348479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348479">(May 19 2021 at 00:57)</a>:</h4>
<p>Only recalcitrant mathlib users need the namespace</p>



<a name="239348481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348481">(May 19 2021 at 00:57)</a>:</h4>
<p>Lol</p>



<a name="239348490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348490">(May 19 2021 at 00:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239348476">said</a>:</p>
<blockquote>
<p>Why is mathlib the end-all-and be all of how things should be canonical defined?</p>
</blockquote>
<p>That's the point</p>



<a name="239348504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348504">(May 19 2021 at 00:57)</a>:</h4>
<p>without canonical definitions you don't get interop</p>



<a name="239348574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348574">(May 19 2021 at 00:58)</a>:</h4>
<p>and all the success stories mentioned earlier are a direct consequence of this interop</p>



<a name="239348626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348626">(May 19 2021 at 00:59)</a>:</h4>
<p>Interop/canonicity within mathlib is fine, why does mathlib also require end-users to also concur with those canonical definitions.</p>



<a name="239348638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348638">(May 19 2021 at 00:59)</a>:</h4>
<p>End users are expected to also be working on something mathlib compatible</p>



<a name="239348645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348645">(May 19 2021 at 00:59)</a>:</h4>
<p>Why?</p>



<a name="239348699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348699">(May 19 2021 at 01:00)</a>:</h4>
<p>because otherwise they wouldn't be depending on mathlib?</p>



<a name="239348734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239348734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239348734">(May 19 2021 at 01:00)</a>:</h4>
<p>This is mathlib's value proposition</p>



<a name="239349028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349028">(May 19 2021 at 01:03)</a>:</h4>
<p>For example all the mathematical projects like LTE, sphere-eversion, perfectoid-spaces, flypitch all <em>build</em> on mathlib, they don't try to redefine it (although they almost always have a "mathlib addendum" section containing work that probably should be PR'd to mathlib)</p>



<a name="239349031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349031">(May 19 2021 at 01:03)</a>:</h4>
<p>For one, since mathlib is the de facto standard lib, I may want mathlib for parts of the stdlib and not all want to depend on the math part at all, but am forced to anyway due to it currently being one monolith package, Second, I may be using mathlib along with many other alternative "mathlib"s and/or my own custom "mathlib" that all feel the same way, so It would be nice if they worked together without clashing.</p>



<a name="239349169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349169">(May 19 2021 at 01:05)</a>:</h4>
<p>However, I feel like this discussion is going nowhere, it is clear to me that you (and its seems like a decent bit of the mathlib community) and I have difference of opinion in how libraries show be presented to end-users that is not going to be resolved any time soon. I think I have my opinion and the reasons for it clear and so have you, so I don't think there is really much else to discuss on this matter.</p>



<a name="239349258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349258">(May 19 2021 at 01:07)</a>:</h4>
<blockquote>
<p>For one, since mathlib is the de facto standard lib, I may want mathlib for the stdlib and not all want to depend on the rest of it, but am forced to anyway due to it currently being one monolith package,</p>
</blockquote>
<p>You can depend on only part of it as mentioned earlier. If the part you want is already too opinionated, well tough. (Or bring it up to the maintainers and try to make mathlib not clash with your usage.)</p>
<blockquote>
<p>Second, I may be using mathlib along with many other alternative "mathlib"s that all feel the same way</p>
</blockquote>
<p>Let's try to keep these to a minimum, because as you point out there is a significant issue with interop when they exist. We were successfully able to redirect all such effort in lean 3 into mathlib itself and I'm glad. Hopefully we can keep it up in mathlib4.</p>



<a name="239349382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349382">(May 19 2021 at 01:08)</a>:</h4>
<p>Discussions at this level of abstraction are unlikely to lead to any meaningful changes. Try to come up with a more specific issue where just using mathlib without fighting the design decisions causes problems for you.</p>



<a name="239349576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349576">(May 19 2021 at 01:11)</a>:</h4>
<p>We can chalk it up to a difference of opinion, but I see a user who could potentially be a mathlib contributor (and probably would be if you were working in lean 3) whose needs are not being met by mathlib (or at least seems to think so), and I would like to suss out exactly what mathlib needs to do to satisfy this use case, because I don't think your general target area is out of scope</p>



<a name="239349653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239349653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239349653">(May 19 2021 at 01:12)</a>:</h4>
<p>Talking about our respective opinions is unlikely to go anywhere, but talking about concrete pain points might</p>



<a name="239353783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239353783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239353783">(May 19 2021 at 02:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239349576">said</a>:</p>
<blockquote>
<p>We can chalk it up to a difference of opinion, but I see a user who could potentially be a mathlib contributor (and probably would be if you were working in lean 3) whose needs are not being met by mathlib (or at least seems to think so), and I would like to suss out exactly what mathlib needs to do to satisfy this use case, because I don't think your general target area is out of scope</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239349653">said</a>:</p>
<blockquote>
<p>Talking about our respective opinions is unlikely to go anywhere, but talking about concrete pain points might</p>
</blockquote>
<p>I appreciate the sentiment. When/if I come up with specific cases where I really want to use part of mathlib and am encountering problems, I will mention them in the channel. Regardless, thank you all for taking the time to discuss this with me. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="239391066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239391066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239391066">(May 19 2021 at 09:16)</a>:</h4>
<p>Would it be reasonable from mathlib's perspective to have some data structures and algorithm libraries separated out?</p>
<p>Think: List, Array, RBMap, topological sort, etc.</p>
<p>Especially if those are not verified, you probably can make them work well for programming and proving independently and you could prove lemmas about those in the larger mathlib, keeping the raw data structures and algorithms separate.</p>



<a name="239392368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239392368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239392368">(May 19 2021 at 09:28)</a>:</h4>
<p>That's already the way things are set up</p>



<a name="239392391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239392391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239392391">(May 19 2021 at 09:28)</a>:</h4>
<p>for the most part the raw data structures are separate from the proofs</p>



<a name="239392430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239392430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239392430">(May 19 2021 at 09:29)</a>:</h4>
<p>and they are in different files so that you can depend on one without the other</p>



<a name="239392480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239392480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239392480">(May 19 2021 at 09:29)</a>:</h4>
<p>In particular, this is necessary for <code>data.list.defs</code> vs <code>data.list.basic</code> because the proofs in <code>data.list.basic</code> use tactics that use definitions in <code>data.list.defs</code></p>



<a name="239392796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239392796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239392796">(May 19 2021 at 09:32)</a>:</h4>
<p>However, that's probably not what you mean by "separated out". I would like lean 4 packaging to improve to the point that this setup, where the files are intermingled on disk and in module naming, is not penalized compared to having those files in a separate project</p>



<a name="239397089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239397089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239397089">(May 19 2021 at 10:06)</a>:</h4>
<p>You did get the point, yes. I was asking if we can turn them into separate packages. Or is your question deeper, asking if you can create a package ad-hoc by just what you import?</p>



<a name="239399207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239399207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239399207">(May 19 2021 at 10:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> also, are you aware of another programming language having a module / package system in line with what you're envisioning?</p>



<a name="239477926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239477926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239477926">(May 19 2021 at 18:54)</a>:</h4>
<p>C doesn't really have a module system, but if you use make in the usual way to produce multiple executables I think this comes for free</p>



<a name="239478366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239478366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239478366">(May 19 2021 at 18:57)</a>:</h4>
<blockquote>
<p>Or is your question deeper, asking if you can create a package ad-hoc by just what you import?</p>
</blockquote>
<p>Yes, this is basically what I'm getting at. Lean files are separately compiled anyway so the package boundary is mostly a leanpkg concept.</p>



<a name="239479473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239479473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239479473">(May 19 2021 at 19:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239477926">said</a>:</p>
<blockquote>
<p>C doesn't really have a module system, but if you use make in the usual way to produce multiple executables I think this comes for free</p>
</blockquote>
<p>You do realize that C's packaging system is generally not considered something to emulate? The whole point of the invention of modern module systems was to get away from C's system (and, in fact, there are many efforts within the standards committee to add/impose a modern module system on C/C++).  Could it be that you are not really a big fan of the modern design? I don't mean this as a criticism, everyone can like what the like, but I am beginning to suspect this may be the case.</p>



<a name="239482109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239482109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239482109">(May 19 2021 at 19:25)</a>:</h4>
<p>I am not trying to imply that. But I feel that the question is coming from the wrong direction. We should try to solve the problems that arise, and borrow solutions from elsewhere where they fit, not start from some other language's model and try to map them onto our circumstances</p>



<a name="239482382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239482382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239482382">(May 19 2021 at 19:27)</a>:</h4>
<p>I'm a big fan of the rust model for packaging and compilation, but lean already significantly diverges from it by using per-file compilation, and furthermore the rust model is obviously not a good fit for mathlib.</p>



<a name="239482578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239482578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239482578">(May 19 2021 at 19:28)</a>:</h4>
<p>Haskell is also separately compiled, maybe there is something similar there</p>



<a name="239482947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239482947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239482947">(May 19 2021 at 19:31)</a>:</h4>
<p>I wasn't really considering C++ modules but they don't really differ from the C situation in the dimension I've been talking about. There are no file placement or naming restrictions regarding the use of C++ modules</p>



<a name="239483167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239483167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239483167">(May 19 2021 at 19:32)</a>:</h4>
<p>I don't dislike C++ modules at all, although I haven't seen them in production so it remains to be seen how effective they are. But C++ header files have been stupidly inefficient for years and I'm glad they finally found a workable solution</p>



<a name="239483799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239483799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239483799">(May 19 2021 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239482109">said</a>:</p>
<blockquote>
<p>We should try to solve the problems that arise, and borrow solutions from elsewhere where they fit, not start from some other language's model and try to map them onto our circumstances</p>
</blockquote>
<p>However, it is clean that part of the future roadmap of Lean 4 is to completely overhaul its module and packaging system, as can be seen from the <a href="https://github.com/leanprover/lean4/projects">Projects</a>.</p>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239482382">said</a>:</p>
<blockquote>
<p>I'm a big fan of the rust model for packaging and compilation, but lean already significantly diverges from it by using per-file compilation, and furthermore the rust model is obviously not a good fit for mathlib.</p>
</blockquote>
<p>Currently, the plan seems to be to follow in Rust footsteps and mirror Cargo based both on the <code>leanpkg++</code> project and this issue: <a href="https://github.com/leanprover/lean4/issues/397">#397</a>. So I think you may want to open a dialogue with the Lean  developers about this.</p>



<a name="239483993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239483993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239483993">(May 19 2021 at 19:38)</a>:</h4>
<p>I actually intend to post my  own slight alternative to this plan in the <a class="stream" data-stream-id="270676" href="/#narrow/stream/270676-lean4">#lean4</a> forum soon.</p>



<a name="239483996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239483996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239483996">(May 19 2021 at 19:38)</a>:</h4>
<p>By the way, it's possible to still mostly follow the footsteps of cargo here with mathlib having to set some fancy options to get what it needs. It's obviously not a normal project in several ways</p>



<a name="239484374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239484374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239484374">(May 19 2021 at 19:41)</a>:</h4>
<p>If we consider the rust analogy, rustc has a lot of options that are used specifically for the <code>std</code> crate: bootstrap stuff, stability markers, unstable macros, feature gates starting <code>rustc_</code></p>



<a name="239484448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239484448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239484448">(May 19 2021 at 19:41)</a>:</h4>
<p>I don't think they even can use cargo and use a custom <code>x.py</code> wrapper around cargo</p>



<a name="239484609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239484609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239484609">(May 19 2021 at 19:42)</a>:</h4>
<p>I can imagine that mathlib will be in a similar situation, requiring some additional features from the package manager that aren't normally exercised by "regular" packages, and also having to wrap the package manager to do other mathlib-specific bookkeeping</p>



<a name="239484863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239484863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239484863">(May 19 2021 at 19:45)</a>:</h4>
<p>The module system and package system are very much up for debate. It is clear we want a better story than we have today but it's not quite clear what the target is yet. There are also multiple implementation strategies. What would certainly be helpful would be to gather some of the requirements you folks see</p>



<a name="239485886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239485886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239485886">(May 19 2021 at 19:52)</a>:</h4>
<p>The main requirement that I see at the moment for mathlib would be the leanpkg-side support for <a href="#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239343061">https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib/near/239343061</a> . Since the dependencies here are implicit, the manifest itself only has to declare the location of mathlib4 as normal, but perhaps should include an extra option to download/build only files that are imported, unless that becomes the default option (building on demand by default is probably more reasonable than download on demand for a normal package)</p>



<a name="239486503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239486503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239486503">(May 19 2021 at 19:56)</a>:</h4>
<p>Also, cargo works with <a href="http://crates.io">crates.io</a> (and haskell stack works with stackage). Assuming we're going to continue using github as our "package registry", mathlib becomes special in another way, namely it's the only package to deliver pre-built object files in addition to sources. Right now we have <code>leanproject</code> for this, but maybe the necessary features can be bundled into <code>leanpkg</code></p>



<a name="239487989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/239487989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#239487989">(May 19 2021 at 20:06)</a>:</h4>
<p>I'm quite opposed to another package registry because maintaining a service is a non-trivial amount of effort. So ideally we can somehow leverage github, cachix (nix), <a href="http://crates.io">crates.io</a> or nuget.</p>



<a name="242241369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241369">(Jun 10 2021 at 17:24)</a>:</h4>
<p>Hmm... I understand the amount of work involved in maintaining a separate service. But how can you leverage existing services for package management? I'm genuinely curious.</p>



<a name="242241489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241489">(Jun 10 2021 at 17:24)</a>:</h4>
<p>GitHub and Cachix sound plausible because they are language agnostic but I'm not sure about Cargo.</p>



<a name="242241537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241537">(Jun 10 2021 at 17:24)</a>:</h4>
<p>Ah I mean <a href="http://crates.io">crates.io</a>.</p>



<a name="242241603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241603">(Jun 10 2021 at 17:25)</a>:</h4>
<p>the <a href="http://crates.io">crates.io</a> idea was from when we thought the lean build system would be a fork of cargo.</p>



<a name="242241724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241724">(Jun 10 2021 at 17:26)</a>:</h4>
<p>And how you leverage them... well, at the fundamental level, they are storage containers for packages. And those packages are usually uploaded as blobs.</p>



<a name="242241831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241831">(Jun 10 2021 at 17:27)</a>:</h4>
<p>I read that discussion already. But I couldn't really imagine how such a system would work without annoying the people involved with the Rust programming language. Like... are they fine with Lean using the <a href="http://crates.io">crates.io</a> registry for something completely unrelated to Rust? npm already bans packages that are not actually JavaScript packages.</p>



<a name="242241844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242241844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242241844">(Jun 10 2021 at 17:27)</a>:</h4>
<p>I should also qualify, that maintaining just a dumb storage layer would be quite easy using, say an azure storage account. It's the whole pretty UI, package search, etc. that's a lot of work.</p>



<a name="242242026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242242026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242242026">(Jun 10 2021 at 17:28)</a>:</h4>
<p>(retracted—invalidated by next message)</p>



<a name="242242034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242242034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242242034">(Jun 10 2021 at 17:29)</a>:</h4>
<p>well, the crates idea was really more of a story for when you'd align quite closely with rust interop. Nuget on the other hand is language agnostic</p>



<a name="242242039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242242039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242242039">(Jun 10 2021 at 17:29)</a>:</h4>
<p>(albeit .net)</p>



<a name="242242114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242242114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242242114">(Jun 10 2021 at 17:29)</a>:</h4>
<p>I am not aware that we had in-depth conversations beyond just brainstorming options.</p>



<a name="242270641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/treating%20mathlib%20as%20a%20stdlib/near/242270641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/287929-mathlib4/topic/treating.20mathlib.20as.20a.20stdlib.html#242270641">(Jun 10 2021 at 21:03)</a>:</h4>
<p>I've been working on various experiments on Lean/Rust integration <a href="https://github.com/joehendrix/rustlean">here</a> in my free time (which isn't a lot at the moment).</p>
<p>I have a fork of cargo that is working to support "external build systems".  The idea is that Cargo will delegate to an external agent  how to compute various build steps such as building, fingerprinting, producing documentation, etc.  It's going fairly smooth on a technical level.  I think there's a lot of work that can be done to integrate the two languages if others are interested.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>