---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html">more picard_lindelof</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="296431842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296431842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296431842">(Aug 31 2022 at 19:10)</a>:</h4>
<p>There's <code>docs#exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous</code> in analysis.ODE.picard_lindelof, which of course is very nice. It seems to me that we need a bunch of weaker variants of these, e.g. for time-independent ODEs, equation being cont_diff, etc. Do these exist or should I make a couple of these?</p>



<a name="296434337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296434337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296434337">(Aug 31 2022 at 19:26)</a>:</h4>
<p>For example, I have already written one for time-independent <code>cont_diff</code> ODEs:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">exists_forall_deriv_within_Ioo_eq_of_cont_diff</span>
  <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">proper_space</span> <span class="n">E</span><span class="o">]</span>
  <span class="o">{</span><span class="n">v</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">(</span><span class="n">hv</span> <span class="o">:</span> <span class="n">cont_diff</span> <span class="n">ℝ</span> <span class="mi">1</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">t₀</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">x₀</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">ε</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hε</span> <span class="o">:</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">E</span><span class="o">),</span> <span class="n">f</span> <span class="n">t₀</span> <span class="bp">=</span> <span class="n">x₀</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">t</span> <span class="bp">∈</span> <span class="n">metric.ball</span> <span class="n">t₀</span> <span class="n">ε</span><span class="o">,</span> <span class="n">has_deriv_at</span> <span class="n">f</span> <span class="o">(</span><span class="n">v</span> <span class="o">(</span><span class="n">f</span> <span class="n">t</span><span class="o">))</span> <span class="n">t</span> <span class="o">:=</span>
</code></pre></div>



<a name="296702561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296702561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296702561">(Sep 01 2022 at 21:26)</a>:</h4>
<p>I've made a PR (<a href="https://github.com/leanprover-community/mathlib/pull/16348">#16348</a>) for some corollaries to the existence theorem of ODE solutions. It seems easier to me to write the very long hypotheses of the theorem as a single existential <code>is_picard_lindelof</code>. Using the corollaries, it is shown that time-independent cont_diff ODEs have solutions in an open interval. Comments welcome!</p>



<a name="296708515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296708515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296708515">(Sep 01 2022 at 22:17)</a>:</h4>
<p>You might as well make <code>is_picard_lindelof</code> a structure; it will not be a Prop but you can wrap a <code>nonempty</code> around it. The main advantage would be that when filling in the <code>is_picard_lindelof</code> hypothesis, people can be clear about which condition they're proving by using the <code>{ field := proof, ... }</code> syntax.</p>



<a name="296709725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296709725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296709725">(Sep 01 2022 at 22:28)</a>:</h4>
<p>Such a structure already exists, i.e. <a href="https://leanprover-community.github.io/mathlib_docs/find/picard_lindelof">docs#picard_lindelof</a>. Are you suggesting that the hypothesis <code>(h : is_picard_lindelof ...)</code> be replaced by <code>(h : nonempty (picard_lindelof E))</code>?</p>



<a name="296711358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296711358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296711358">(Sep 01 2022 at 22:47)</a>:</h4>
<p>Oh it exists. But you can't wrap picard_lindelof inside nonempty because your conclusions use some data fields of picard_lindelof. So maybe define is_picard_lindelof as a structure and <del>have picard_lindelof extend it</del>?</p>



<a name="296711952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296711952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296711952">(Sep 01 2022 at 22:53)</a>:</h4>
<p>No, <code>extends</code> is not correct way to do it, you need to state that <code>to_fun, t_min, t₀, t_max, x₀</code> satisfy the <code>nonempty (is_picard_lindelof _ _ _ _ _)</code> predicate. Also beware that <code> t₀, C, R</code> have different types in <a href="https://leanprover-community.github.io/mathlib_docs/find/exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous">docs#exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous</a> than in <a href="https://leanprover-community.github.io/mathlib_docs/find/picard_lindelof">docs#picard_lindelof</a>.</p>



<a name="296715933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296715933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296715933">(Sep 01 2022 at 23:41)</a>:</h4>
<blockquote>
<p>Also beware that  t₀, C, R have different types in <a href="https://leanprover-community.github.io/mathlib_docs/find/exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous">docs#exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous</a> than in <a href="https://leanprover-community.github.io/mathlib_docs/find/picard_lindelof">docs#picard_lindelof</a>.</p>
</blockquote>
<p>Yes, for <code>is_picard_lindelof</code> I've followed the typing in <code>docs#exists_forall_deriv_within_Icc_eq_of_lipschitz_of_continuous</code>.</p>



<a name="296716324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296716324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296716324">(Sep 01 2022 at 23:47)</a>:</h4>
<p><code>is_picard_lindelof</code> as a structure would include fields <code>L, C, R</code>, yes? Don't we run into the same problem that we cannot satisfy the <code>L</code> field by <code>obtain</code>ing a Lipschitz constant <code>L</code> from some <code>∃ L</code>?</p>



<a name="296716597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296716597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296716597">(Sep 01 2022 at 23:50)</a>:</h4>
<p>What I mean is, when the goal is <code>ℝ</code> for, say, the Lipschitz constant, we want to get it from a theorem like <code>cont_diff_at.exists_lipschitz_on_with</code>, but Lean wouldn't allow me to do <code>obtain ⟨L, ...⟩ := cont_diff_at.exists_lipschitz_on_with</code> because the goal is not a <code>Prop</code>.</p>



<a name="296718795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/296718795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#296718795">(Sep 02 2022 at 00:22)</a>:</h4>
<p>So in terms of user experience, when I see a goal like <code>nonempty (is_picard_lindelof ...)</code>, I'd be first tempted to do:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">⟨{</span> <span class="n">L</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="bp">...</span> <span class="kd">end</span><span class="o">,</span>
  <span class="n">R</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="bp">...</span> <span class="kd">end</span><span class="o">,</span>
  <span class="n">C</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="bp">...</span> <span class="kd">end</span><span class="o">,</span>
  <span class="n">etc</span> <span class="o">}⟩</span>
</code></pre></div>
<p>and I'd run into the problem with <code>Exists.elim</code> into a non-<code>Prop</code> goal. On the other hand, if I state <code>is_picard_lindelof</code> as one predicate, I'd be more inclined to construct the <code>L, C, R</code> first, then do <code>refine ⟨L, C, R, _⟩</code>, naturally avoiding this problem.</p>



<a name="299870024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/299870024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#299870024">(Sep 21 2022 at 01:02)</a>:</h4>
<p>Would somebody be interested to review this PR (<a href="https://github.com/leanprover-community/mathlib/pull/16348">#16348</a>)? It's got some review on the style but still needs comments on the maths.</p>



<a name="299876899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/299876899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#299876899">(Sep 21 2022 at 02:50)</a>:</h4>
<p>I'll try to find some time to look into it. Fyi there is a dedicated <code>PR reviews</code> stream which is better suited for pinging PRs</p>



<a name="299877932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/more%20picard_lindelof/near/299877932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/more.20picard_lindelof.html#299877932">(Sep 21 2022 at 03:09)</a>:</h4>
<p>I didn’t know that! Thanks</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>