---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html">is_closed.graph</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="233317487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233317487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233317487">(Apr 06 2021 at 13:23)</a>:</h4>
<p>Suppose <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">f : X \to Y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span> is a continuous function between sufficiently nice topological spaces (I think t2 suffices). Do we know that the graph of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>, as a subset of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>×</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \times Y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span>, is a closed subset?</p>



<a name="233317675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233317675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233317675">(Apr 06 2021 at 13:25)</a>:</h4>
<p>Do we even have <a href="https://leanprover-community.github.io/mathlib_docs/find/function.graph">docs#function.graph</a>?</p>



<a name="233317736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233317736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233317736">(Apr 06 2021 at 13:25)</a>:</h4>
<p>Apparently "yes", but as a <code>rel</code> <span aria-label="question" class="emoji emoji-2753" role="img" title="question">:question:</span></p>



<a name="233318010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233318010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233318010">(Apr 06 2021 at 13:27)</a>:</h4>
<p>Yeah, it's as a rel. So one would need an uncurried variant. But it's still possible to have <code>is_closed { x | f x.1 = x.2}</code> or something like that</p>



<a name="233318193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233318193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233318193">(Apr 06 2021 at 13:28)</a>:</h4>
<p>I guess this actually has a name? <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> <br>
<a href="https://en.wikipedia.org/wiki/Closed_graph_theorem">https://en.wikipedia.org/wiki/Closed_graph_theorem</a></p>



<a name="233327565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233327565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233327565">(Apr 06 2021 at 14:26)</a>:</h4>
<p>Golfing challenge!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">closed_graph</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">[</span><span class="n">t2_space</span> <span class="n">Y</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.1</span> <span class="bp">=</span> <span class="n">x.2</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">closure_subset_iff_is_closed</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_closure_iff_ultrafilter</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">hx</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">U</span><span class="o">,</span><span class="n">h1</span><span class="o">,</span><span class="n">h2</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">t2_space</span> <span class="n">Y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">apply_instance</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">t2_iff_ultrafilter</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h</span> <span class="o">(</span><span class="n">ultrafilter.map</span> <span class="n">prod.snd</span> <span class="n">U</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">A</span> <span class="n">hA</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_nhds_sets_iff</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">le_nhds_iff</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">hA</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">T</span><span class="o">,</span><span class="n">hT</span><span class="o">,</span><span class="n">hT1</span><span class="o">,</span><span class="n">hT2</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">is_open</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">∈</span> <span class="n">T</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">∈</span> <span class="n">T</span><span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">f</span> <span class="n">t.fst</span><span class="o">)</span> <span class="bp">⁻¹'</span> <span class="n">T</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">is_open.preimage</span> <span class="n">_</span> <span class="n">hT1</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">continuous.comp</span> <span class="n">hf</span> <span class="n">continuous_fst</span> <span class="o">},</span>
    <span class="n">specialize</span> <span class="n">h2</span> <span class="n">_</span> <span class="n">hT2</span> <span class="n">this</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hh</span> <span class="o">:</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">∈</span> <span class="n">T</span> <span class="o">}</span> <span class="bp">∩</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">=</span> <span class="n">x.snd</span><span class="o">}</span> <span class="bp">∈</span> <span class="n">U</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">filter.inter_sets</span> <span class="n">_</span> <span class="n">h2</span> <span class="n">h1</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">∈</span> <span class="n">T</span> <span class="o">}</span> <span class="bp">∩</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.fst</span> <span class="bp">=</span> <span class="n">x.snd</span><span class="o">}</span> <span class="bp">⊆</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">x.snd</span> <span class="bp">∈</span> <span class="n">A</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="n">t</span> <span class="o">⟨</span><span class="n">hh1</span><span class="o">,</span><span class="n">hh2</span><span class="o">⟩,</span>
      <span class="n">dsimp</span> <span class="n">at</span> <span class="n">hh1</span> <span class="n">hh2</span><span class="o">,</span>
      <span class="n">dsimp</span><span class="o">,</span>
      <span class="n">rw</span> <span class="bp">←</span> <span class="n">hh2</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">hT</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">hh1</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">filter.sets_of_superset</span> <span class="n">_</span> <span class="n">hh</span> <span class="n">this</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">hh</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">prod.snd</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">continuous_snd</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">continuous_iff_ultrafilter</span> <span class="n">at</span> <span class="n">hh</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">hh</span> <span class="n">_</span> <span class="n">_</span> <span class="n">h2</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233333085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233333085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233333085">(Apr 06 2021 at 15:00)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">closed_graph</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">[</span><span class="n">t2_space</span> <span class="n">Y</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x.1</span> <span class="bp">=</span> <span class="n">x.2</span> <span class="o">}</span> <span class="o">:=</span>
<span class="n">is_closed_eq</span> <span class="o">(</span><span class="kd">by</span> <span class="n">continuity</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="n">continuity</span><span class="o">)</span>
</code></pre></div>



<a name="233333154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233333154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233333154">(Apr 06 2021 at 15:00)</a>:</h4>
<p>is_closed_eq!</p>



<a name="233333291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233333291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233333291">(Apr 06 2021 at 15:01)</a>:</h4>
<p>Yes, I knew this one, so it was a little bit like cheating.</p>



<a name="233333534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233333534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233333534">(Apr 06 2021 at 15:01)</a>:</h4>
<p>I also didn't really know about the continuity tactic</p>



<a name="233333861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233333861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233333861">(Apr 06 2021 at 15:02)</a>:</h4>
<p>In this case, it's a little bit overkill (direct proofs are easy with dot notation), but it's nicer like that!</p>



<a name="233334097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_closed.graph/near/233334097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_closed.2Egraph.html#233334097">(Apr 06 2021 at 15:02)</a>:</h4>
<p>And in any case the ridiculous proof I had above was a good reminder for me about (ultra)filters :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>