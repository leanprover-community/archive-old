---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html">nat subtraction hurts</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198583329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583329">(May 24 2020 at 13:25)</a>:</h4>
<p>I just wrote a eight line proof of</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>


<p>Can someone put me out of my misery?</p>



<a name="198583450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583450">(May 24 2020 at 13:28)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[(</span><span class="k">show</span> <span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">omega</span><span class="o">),</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_two</span><span class="o">]</span>
</code></pre></div>



<a name="198583550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583550">(May 24 2020 at 13:31)</a>:</h4>
<p>Or working in the other direction you can golf it a bit more</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">mul_two</span><span class="o">,</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">],</span> <span class="n">congr</span><span class="o">,</span> <span class="n">omega</span> <span class="o">}</span>
</code></pre></div>



<a name="198583597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583597">(May 24 2020 at 13:32)</a>:</h4>
<p>without <code>omega</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">mul_two</span><span class="o">,</span> <span class="err">←</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="k">show</span> <span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span> <span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_pred_eq_of_pos</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">pred_le_pred</span> <span class="n">w</span><span class="o">)]</span>
</code></pre></div>



<a name="198583615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583615">(May 24 2020 at 13:33)</a>:</h4>
<p>Okay, I will agree these are all shorter than my proof. I feel like all of these solutions still take more effort than this problem deserves!</p>



<a name="198583621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583621">(May 24 2020 at 13:33)</a>:</h4>
<p>Alternate without <code>omega</code></p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">mul_two</span><span class="o">,</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="err">←</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_sub</span> <span class="n">w</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_sub_succ_eq_sub</span><span class="o">]</span>
</code></pre></div>



<a name="198583625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583625">(May 24 2020 at 13:33)</a>:</h4>
<p>Reid's solution was essentially the same as mine, except that I case bashed for another few lines instead of using <code>omega</code>.</p>



<a name="198583669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583669">(May 24 2020 at 13:34)</a>:</h4>
<p>If you're using nat subtraction you might be doing it wrong</p>



<a name="198583675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583675">(May 24 2020 at 13:34)</a>:</h4>
<p>If you are going for high powered:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="k">show</span> <span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">omega</span><span class="o">,</span> <span class="n">ring_exp</span> <span class="o">}</span>
</code></pre></div>



<a name="198583711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583711">(May 24 2020 at 13:35)</a>:</h4>
<p>Now we're cooking with gas!</p>



<a name="198583759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583759">(May 24 2020 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, when the PR is ready, I'd love to have someone have a good look at the nat/int choices we made here.</p>



<a name="198583831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583831">(May 24 2020 at 13:39)</a>:</h4>
<p>I guess actually there is a good solution here, and Kevin is right. I could do all my internal working with <code>p' = p - 2</code>, and then avoid most of the nat subtraction.</p>



<a name="198583874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198583874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198583874">(May 24 2020 at 13:40)</a>:</h4>
<p>There would just be one nat subtraction in the translation between the external theorems and the internal stuff.</p>



<a name="198585290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198585290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198585290">(May 24 2020 at 14:20)</a>:</h4>
<p>Another easy low-powered solution:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">),</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="n">w</span> <span class="o">:=</span> <span class="o">(</span><span class="n">lt_irrefl</span> <span class="mi">1</span> <span class="n">w</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mul_succ</span><span class="o">]</span>
</code></pre></div>



<a name="198587085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198587085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198587085">(May 24 2020 at 15:10)</a>:</h4>
<p>I always forget to use the pattern matcher on inequality arguments. I think part of it is that I'm not confident ahead of time which patterns will be required: e.g. that you can omit <code>p = 0</code> here, but still have to handle <code>p = 1</code>.</p>



<a name="198588180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198588180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198588180">(May 24 2020 at 15:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">h</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>Yeah, the equation compiler isn't trying hard enough.</p>



<a name="198588194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198588194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198588194">(May 24 2020 at 15:41)</a>:</h4>
<p>On the other hand, it does tell you:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">lemma</span> <span class="n">foo&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">),</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mul_succ</span><span class="o">]</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">non-exhaustive match, the following cases are missing:</span>
<span class="cm">foo&#39; 1 _</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="198588263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198588263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198588263">(May 24 2020 at 15:42)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="bp">.</span>
</code></pre></div>



<a name="198588568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198588568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198588568">(May 24 2020 at 15:50)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rintros</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">|</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="bp">⟨⟩⟩</span><span class="o">)</span>
</code></pre></div>


<p>Does this just mean the equation compiler isn't trying hard enough? There really are no cases.</p>



<a name="198596144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/nat%20subtraction%20hurts/near/198596144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/nat.20subtraction.20hurts.html#198596144">(May 24 2020 at 19:23)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">),</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="n">p</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">1</span>     <span class="n">H</span> <span class="o">:=</span> <span class="n">absurd</span> <span class="n">H</span> <span class="err">$</span> <span class="n">lt_irrefl</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">mul_two</span> <span class="bp">_</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>