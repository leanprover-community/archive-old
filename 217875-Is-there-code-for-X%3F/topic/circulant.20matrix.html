---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html">circulant matrix</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247465129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247465129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247465129">(Jul 28 2021 at 14:19)</a>:</h4>
<p>Is any version of the notion "circulant matrix" defined in mathlib?</p>



<a name="247465715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247465715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247465715">(Jul 28 2021 at 14:23)</a>:</h4>
<p>I've never heard of it. I don't think it's in mathlib.</p>



<a name="247469701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247469701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247469701">(Jul 28 2021 at 14:52)</a>:</h4>
<p>I assume the definition you're looking for is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">circulant</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">c</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span>
</code></pre></div>



<a name="247469983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247469983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247469983">(Jul 28 2021 at 14:54)</a>:</h4>
<p>Or <code>((∘) c) ∘ has_sub.sub</code> if you're feeling masochistic / point-free</p>



<a name="247470220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247470220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247470220">(Jul 28 2021 at 14:56)</a>:</h4>
<p>Is "point-free" a euphemism of "pointless"?</p>



<a name="247472646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247472646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247472646">(Jul 28 2021 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> what is the benefit of using the equation compiler over a lambda expression?</p>



<a name="247472763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247472763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247472763">(Jul 28 2021 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247470220">said</a>:</p>
<blockquote>
<p>Is "point-free" a euphemism of "pointless"?</p>
</blockquote>
<p>c.f. with "pointless topology",  "Pointless Celebrities" and "abstract nonsense" ;b I think some FP purists really like not using λs when unnecessary</p>



<a name="247473651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247473651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247473651">(Jul 28 2021 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Doesn't that definition hit against the issue with <code>fin n</code> saturating subtraction?</p>



<a name="247473666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247473666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247473666">(Jul 28 2021 at 15:23)</a>:</h4>
<p>We use pointfree implicitly when we consider addition of terms of "C_infty", for example. With the right abstractions, it's easier to prove things about things without having to use extensionality.</p>



<a name="247474080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247474080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247474080">(Jul 28 2021 at 15:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247473651">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> Doesn't that definition hit against the issue with <code>fin n</code> saturating subtraction?</p>
</blockquote>
<p>The issue with fin n saturating subtraction is that everyone thinks that fin n has saturating subtraction. It does not : <a href="https://leanprover-community.github.io/mathlib_docs/find/fin.sub/src">src#fin.sub</a>.</p>



<a name="247474210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247474210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247474210">(Jul 28 2021 at 15:28)</a>:</h4>
<p>Ah, that's probably just me and other old hands then</p>



<a name="247474265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247474265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247474265">(Jul 28 2021 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247472646">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> what is the benefit of using the equation compiler over a lambda expression?</p>
</blockquote>
<p>It seems to be the pattern in the matrix library. It means that <code>simp [circulant]</code> refuses to make progress on a goal of <code>X = circulant c</code>, and will only unfold circulant if the goal state is <code>X i j = circulant c i j</code>. I don't know if that's a good thing, but it's certainly a measurable difference.</p>



<a name="247474841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247474841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247474841">(Jul 28 2021 at 15:32)</a>:</h4>
<p>I don't know if it's a good thing either, but it is certainly a very reasonable thing.<br>
Thanks for explaining! I'll probably make use of this in the future.</p>



<a name="247475176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247475176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247475176">(Jul 28 2021 at 15:35)</a>:</h4>
<p>You normally get the same behavior by moving the arguments left of the colon, but here that would be undesirable because it would prevent you from using the <code>matrix</code> abbreviation</p>



<a name="247482445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247482445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247482445">(Jul 28 2021 at 16:32)</a>:</h4>
<p>How can I prolong the time for <code>#eval</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">test2</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="o">(</span><span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">ℚ</span><span class="o">)</span>
<span class="k">#eval</span> <span class="n">test2</span>
</code></pre></div>
<p><code>fin 19</code> may be fine, but <code>fin 20</code> will time out for a nontrivial example.</p>



<a name="247484682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247484682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247484682">(Jul 28 2021 at 16:49)</a>:</h4>
<p>You can try changing the setting lean.timeLimit in the vscode settings (once you open settings you should be able to search for this).<br>
Why would you want to eval that though?</p>



<a name="247485806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247485806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247485806">(Jul 28 2021 at 16:58)</a>:</h4>
<p>I am just exploring things here.</p>



<a name="247486314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486314">(Jul 28 2021 at 17:01)</a>:</h4>
<p>You can't use <code>#eval</code> in proofs, and if you just want to do computations you might be better off using a computer algebra package.</p>



<a name="247486443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486443">(Jul 28 2021 at 17:02)</a>:</h4>
<p>Is <code>norm_num</code> kind of equivalent to <code>#eval</code>?</p>



<a name="247486486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486486">(Jul 28 2021 at 17:02)</a>:</h4>
<p>no, not at all! <code>norm_num</code> is checked by the kernel!</p>



<a name="247486507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486507">(Jul 28 2021 at 17:03)</a>:</h4>
<p>You can certainly use <code>norm_num</code> in proofs.</p>



<a name="247486536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486536">(Jul 28 2021 at 17:03)</a>:</h4>
<p>you could say that <code>norm_num</code> aspires to be <code>#eval</code></p>



<a name="247486558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486558">(Jul 28 2021 at 17:03)</a>:</h4>
<p>but with proofs</p>



<a name="247486595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486595">(Jul 28 2021 at 17:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247486536">said</a>:</p>
<blockquote>
<p>you could say that <code>norm_num</code> aspires to be <code>#eval</code></p>
</blockquote>
<p>I would say vice versa</p>



<a name="247486729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486729">(Jul 28 2021 at 17:04)</a>:</h4>
<p>What do you hope to get when you evaluate a matrix? A 19x19 table representing the coefficients given the standard basis?</p>



<a name="247486778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486778">(Jul 28 2021 at 17:04)</a>:</h4>
<p>seems reasonable</p>



<a name="247486836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486836">(Jul 28 2021 at 17:05)</a>:</h4>
<p>i.e. <code>![![1, 2], ![3, 4]]</code></p>



<a name="247486846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486846">(Jul 28 2021 at 17:05)</a>:</h4>
<p>Probably not the best representation for sparse matrices though.</p>



<a name="247486990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247486990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247486990">(Jul 28 2021 at 17:06)</a>:</h4>
<p>But yeah makes sense for a matrix of arbitrary small size</p>



<a name="247487012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247487012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247487012">(Jul 28 2021 at 17:06)</a>:</h4>
<p>I haven't gone  into a proof. I am just exploring things here.<br>
<span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247486729">said</a>:</p>
<blockquote>
<p>What do you hope to get when you evaluate a matrix? A 19x19 table representing the coefficients given the standard basis?</p>
</blockquote>



<a name="247487219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247487219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247487219">(Jul 28 2021 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247486486">said</a>:</p>
<blockquote>
<p>no, not at all! <code>norm_num</code> is checked by the kernel!</p>
</blockquote>
<p>Could anyone say a bit more about the difference between <code>norm_num</code> and <code>#eval</code> when applied to an expression?</p>



<a name="247487718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247487718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247487718">(Jul 28 2021 at 17:12)</a>:</h4>
<p><code>#eval</code> compiles your lean expression into VM bytecode and then runs it in the interpreter. As long as the interpreter is correct this should work, but there are no associated proofs, it's just running code</p>



<a name="247487771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247487771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247487771">(Jul 28 2021 at 17:12)</a>:</h4>
<p>#eval takes a term for a particular type, and attempts to evaluate the term. If it is normal form already, it will display it using its representation, given by the has_repr instance. If it is not in normal form, for example, a function applied to a term, it will try to evaluate the applied function, then do the thing described above to the resulting term.</p>



<a name="247487967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247487967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247487967">(Jul 28 2021 at 17:14)</a>:</h4>
<p><code>norm_num</code> pattern matches on the expression to produce a proof that the expression is equal to the normalized value, using lemmas for each step. As a result everything is proven correct, and it uses <code>#eval</code> under the hood as an oracle in places (for example, when proving that something is prime or not, it first checks whether the number is actually prime or composite in order to determine how the proof is going to go)</p>



<a name="247488296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247488296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247488296">(Jul 28 2021 at 17:16)</a>:</h4>
<p>In principle, anything that can be <code>#eval</code>'d can also be evaluated in a proof producing way, but the key tactic for this is missing (it is called the <code>cbv</code> tactic in coq). Maybe we can finally have this in lean 4</p>



<a name="247488897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247488897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247488897">(Jul 28 2021 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/circulant.20matrix/near/247488296">said</a>:</p>
<blockquote>
<p>In principle, anything that can be <code>#eval</code>'d can also be evaluated in a proof producing way, but the key tactic for this is missing (it is called the <code>cbv</code> tactic in coq). Maybe we can finally have this in lean 4</p>
</blockquote>
<p>Why isn't <code>norm_num</code> the key tactic for this purpose? <span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>



<a name="247489257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247489257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247489257">(Jul 28 2021 at 17:23)</a>:</h4>
<p>It doesn't handle general CIC reduction, it only knows about integer functions for the most part, and every function has to have a manual implementation, it does not look at the definition at all</p>



<a name="247489357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247489357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247489357">(Jul 28 2021 at 17:24)</a>:</h4>
<p>it calls <code>simp</code>, which can sometimes make it over little hurdles, but it's not enough to evaluate arbitrary functions on lists and such</p>



<a name="247489599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247489599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247489599">(Jul 28 2021 at 17:26)</a>:</h4>
<p>The fact that functions are all reimplemented is more of a strength than a weakness, because following lean's actual implementation of <code>nat.add</code> et al would lead to exponential time performance</p>



<a name="247489631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/circulant%20matrix/near/247489631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/circulant.20matrix.html#247489631">(Jul 28 2021 at 17:26)</a>:</h4>
<p>but it's not what <code>#eval</code> would do</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>