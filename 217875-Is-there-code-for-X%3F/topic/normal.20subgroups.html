---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html">normal subgroups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216396023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216396023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216396023">(Nov 11 2020 at 20:38)</a>:</h4>
<p>What's the idiomatic way to speak about the type of all normal subgroups of a group? We have <code>subgroup G</code> for the type of (bundled) subgroups of <code>G</code>, and <code>subgroup.normal</code> which is a Prop-valued class. There is also a deprecated <code>normal_subgroup</code>. It's unclear to me what the best way to speak about the type of all normal subgroups should be.</p>



<a name="216396240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216396240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216396240">(Nov 11 2020 at 20:41)</a>:</h4>
<p>I guess what I'm looking for is something similar to the following structure: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="kd">structure</span> <span class="n">normal_subgroup</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">to_subgroup</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span>
<span class="o">[</span><span class="n">is_normal</span> <span class="o">:</span> <span class="n">subgroup.normal</span> <span class="n">to_subgroup</span><span class="o">]</span>
</code></pre></div>



<a name="216396275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216396275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216396275">(Nov 11 2020 at 20:41)</a>:</h4>
<p>maybe <code>subtype (subgroup.normal)</code> (or something like that)?</p>



<a name="216397105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216397105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216397105">(Nov 11 2020 at 20:48)</a>:</h4>
<p>Sure, that subtype would work, but I want something that plays well with the group theory API</p>



<a name="216397148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216397148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216397148">(Nov 11 2020 at 20:49)</a>:</h4>
<p>I guess it doesn't exist? I want to be able to write </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">normal_subgroup</span> <span class="n">G</span><span class="o">)</span>
<span class="k">#check</span> <span class="n">H.quotient</span>
</code></pre></div>



<a name="216397281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216397281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216397281">(Nov 11 2020 at 20:50)</a>:</h4>
<p>Similar to </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.ideal.basic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">A</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">I.quotient</span>
</code></pre></div>



<a name="216402890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216402890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216402890">(Nov 11 2020 at 21:49)</a>:</h4>
<p>Can't you just make H a subgroup with a [normal] hypothesis?</p>



<a name="216403717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216403717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216403717">(Nov 11 2020 at 21:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'd like to construct the profinite completion of a group.</p>



<a name="216403768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216403768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216403768">(Nov 11 2020 at 21:58)</a>:</h4>
<p>So I need the full diagram of finite quotients of a group (and take its limit to be the profinite completion)</p>



<a name="216403781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216403781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216403781">(Nov 11 2020 at 21:59)</a>:</h4>
<p>And I need some way to write down the indexing set of this limit</p>



<a name="216405163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216405163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216405163">(Nov 11 2020 at 22:14)</a>:</h4>
<p>I guess I'd just with the subtype. Somehow the typeclass system gets you into these situations. Someone somewhere decreed that <code>semiring</code> and <code>ring</code> and <code>integral_domain</code> were somehow "basic" and everything else like DVR is Prop-valued and goes on top. Similarly subsets and subgroups have been deemed basic and are bundled, and normal subgroups are a prop on top. It's not clear that there's a good answer for all this.</p>



<a name="216406633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216406633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216406633">(Nov 11 2020 at 22:31)</a>:</h4>
<p>Well.... this is discouraging:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">subgroup.normal</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- FAILS</span>
</code></pre></div>



<a name="216408488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216408488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216408488">(Nov 11 2020 at 22:57)</a>:</h4>
<p>I had this same problem recently trying to show that <code>subgroup.normal_closure</code> forms a galois insertion together with the forgetful functor from normal subgroups to subsets.</p>



<a name="216408712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216408712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216408712">(Nov 11 2020 at 23:00)</a>:</h4>
<p>I mean... <code>by tidy</code> solves this, so it's not a big deal.</p>



<a name="216408761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216408761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216408761">(Nov 11 2020 at 23:01)</a>:</h4>
<p>I meant the problem that <code>subgroup.normal</code> is <code>Prop</code> valued</p>



<a name="216408821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216408821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216408821">(Nov 11 2020 at 23:02)</a>:</h4>
<p>and I wasn't sure how I should state what I wanted to prove given that</p>



<a name="216410660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216410660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216410660">(Nov 11 2020 at 23:31)</a>:</h4>
<p>This is just  a missing instance right, what's discouraging about it? I made <a href="https://github.com/leanprover-community/mathlib/issues/4982">#4982</a></p>



<a name="216411311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411311">(Nov 11 2020 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span> Like I said, it's not a big deal. <span class="user-mention" data-user-id="298851">@Patrick Lutz</span> It's not so much a problem that <code>normal</code>is Prop valued, but rather that mathlib doesn't currently have "the type of normal subgroups". And if you want to define the normal_closure, that's certainly the natural target for that.</p>



<a name="216411433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411433">(Nov 11 2020 at 23:44)</a>:</h4>
<p>Yeah it seems this just got lost in the transition to bundled subgroups, there is a lemma univ_subgroup in deprecated/subgroup.lean anyways</p>



<a name="216411556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411556">(Nov 11 2020 at 23:45)</a>:</h4>
<p>The following is slightly more serious :)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.quotient_group</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">subgroup.normal</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="kd">by</span> <span class="n">tauto</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">blah</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">quotient_group.quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="216411635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411635">(Nov 11 2020 at 23:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/normal.20subgroups/near/216411311">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> Like I said, it's not a big deal. <span class="user-mention silent" data-user-id="298851">Patrick Lutz</span> It's not so much a problem that <code>normal</code>is Prop valued, but rather that mathlib doesn't currently have "the type of normal subgroups". And if you want to define the normal_closure, that's certainly the natural target for that.</p>
</blockquote>
<p><code>mathlib</code> already has a normal closure but it takes values in <code>subgroup G</code>. I wanted to prove some basic properties about it which would follow immediately from the <code>galois_insertion</code> fact. Instead I just proved those properties directly.</p>



<a name="216411656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411656">(Nov 11 2020 at 23:46)</a>:</h4>
<p>Oh, I see.</p>



<a name="216411677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411677">(Nov 11 2020 at 23:47)</a>:</h4>
<p>but I don't fully understand why bundled normal subgroups are bad. Kevin said that he tried it a while ago and his students told him it made things harder so idk</p>



<a name="216411785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411785">(Nov 11 2020 at 23:49)</a>:</h4>
<p>Hmmm.... I can't see immediately why bundled normal subgroups would be bad. It seems perfectly natural to have this, or alternatively "the type of all quotients of a group G".</p>



<a name="216411800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216411800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216411800">(Nov 11 2020 at 23:49)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> can tell us what the issues were?</p>



<a name="216413758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216413758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216413758">(Nov 12 2020 at 00:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.quotient_group</span>
<span class="kn">import</span> <span class="n">algebra.punit_instances</span>
<span class="kn">open</span> <span class="n">quotient_group</span>
<span class="kd">noncomputable theory</span>
<span class="kd">lemma</span> <span class="n">quotient_top_equiv_unit</span> <span class="o">:</span> <span class="n">quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">≃*</span> <span class="n">unit</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="k">have</span> <span class="n">phi</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→*</span> <span class="n">unit</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">phi.ker</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mem_ker</span><span class="o">]},</span>
  <span class="n">convert</span> <span class="n">quotient_ker_equiv_of_surjective</span> <span class="n">phi</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">all_goals</span> <span class="o">{</span><span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">this</span><span class="o">}},</span>
  <span class="n">intro</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
<span class="kd">end</span>
<span class="kd">instance</span> <span class="n">blah</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span> <span class="n">fintype.of_equiv</span> <span class="n">_</span> <span class="n">quotient_top_equiv_unit.to_equiv.symm</span>
</code></pre></div>



<a name="216414075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216414075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216414075">(Nov 12 2020 at 00:27)</a>:</h4>
<p>Nice! I was going this way:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.quotient_group</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">subgroup.normal</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="kd">by</span> <span class="n">tauto</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="o">(</span><span class="n">quotient_group.quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">constructor</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="o">⟨⟩</span> <span class="o">⟨⟩,</span>
  <span class="n">apply</span> <span class="n">quot.sound</span><span class="o">,</span>
  <span class="n">tauto</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">instance</span> <span class="n">blah</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">quotient_group.quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- FAILS for some reason...</span>
</code></pre></div>
<p>but it looks like there might be another missing instance?</p>



<a name="216414078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216414078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216414078">(Nov 12 2020 at 00:27)</a>:</h4>
<p>Or maybe I'm missing an import?</p>



<a name="216415666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216415666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216415666">(Nov 12 2020 at 00:52)</a>:</h4>
<p>Hmm fintype.of_subsingleton requires a term of that type, so you can do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">blaha</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">quotient_group.quotient</span> <span class="o">(</span><span class="bp">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span> <span class="n">fintype.of_subsingleton</span> <span class="mi">1</span>
</code></pre></div>
<p>note its a def not an instance</p>



<a name="216415683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216415683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216415683">(Nov 12 2020 at 00:52)</a>:</h4>
<p>If you prove <code>unique (quotient...</code> instead of subsingleton it should work as an instance.</p>



<a name="216432233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216432233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216432233">(Nov 12 2020 at 06:26)</a>:</h4>
<p><span class="user-mention" data-user-id="243312">@Jason KY.</span> Why did you unbundle bundled normal subgroups in our independent from-scratch implementation of group theory?</p>



<a name="216433723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216433723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216433723">(Nov 12 2020 at 06:59)</a>:</h4>
<p>I did not do that in the end after playing around with prop valued normal subgroups. I originally had problems with normal subgroups because I had to rewrite a lot of code but the prop valued version was even more difficult to work with I had found.</p>



<a name="216434386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216434386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216434386">(Nov 12 2020 at 07:12)</a>:</h4>
<p>Jason, Guilia Carfora and I redeveloped all of group theory in Lean starting from a new definition of group and I regard Jason as one of the experts in the area. If he thinks bundling normal subgroups is better than not bundling them then I don't have any objections to bundling them. I don't think it would be a big refactor. There's a ton of stuff one could do with solvable groups which is not in Lean yet but easily could be, but we should make a decision about normal subgroups before launching in.</p>



<a name="216434617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216434617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216434617">(Nov 12 2020 at 07:16)</a>:</h4>
<p>I'm inclined to say, yes, let's bundle</p>



<a name="216434656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216434656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216434656">(Nov 12 2020 at 07:17)</a>:</h4>
<p>Also profinite groups will be useful for all sorts of things eg Galois theory</p>



<a name="216434661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216434661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216434661">(Nov 12 2020 at 07:17)</a>:</h4>
<p>Because we're not only interested in a normal subgroup on its own, but also in the lattice of all normal subgroups. There are (interesting) things to be said about it: Adam mentioned using it as indexing diagram, and of course there is Galois theory</p>



<a name="216435800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216435800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216435800">(Nov 12 2020 at 07:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/normal.20subgroups/near/216434386">said</a>:</p>
<blockquote>
<p>Jason, Guilia Carfora and I redeveloped all of group theory in Lean starting from a new definition of group and I regard Jason as one of the experts in the area. If he thinks bundling normal subgroups is better than not bundling them then I don't have any objections to bundling them. I don't think it would be a big refactor. There's a ton of stuff one could do with solvable groups which is not in Lean yet but easily could be, but we should make a decision about normal subgroups before launching in.</p>
</blockquote>
<p><span class="user-mention" data-user-id="298851">@Patrick Lutz</span> <span class="user-mention" data-user-id="306638">@Jordan Brown</span> We'll need to discuss this at Friday's meeting</p>



<a name="216436079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216436079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216436079">(Nov 12 2020 at 07:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/normal.20subgroups/near/216434386">said</a>:</p>
<blockquote>
<p>Jason, Guilia Carfora and I redeveloped all of group theory in Lean starting from a new definition of group and I regard Jason as one of the experts in the area. If he thinks bundling normal subgroups is better than not bundling them then I don't have any objections to bundling them. I don't think it would be a big refactor. There's a ton of stuff one could do with solvable groups which is not in Lean yet but easily could be, but we should make a decision about normal subgroups before launching in.</p>
</blockquote>
<p><span class="user-mention" data-user-id="253861">@Thomas Browning</span>, <span class="user-mention" data-user-id="306638">@Jordan Brown</span> and I have been proving some stuff about commutators and solvable groups recently, which we will eventually need for the abel-ruffini theorem</p>



<a name="216436095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216436095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216436095">(Nov 12 2020 at 07:43)</a>:</h4>
<p>I would love to help with the refactor if you guys end up deciding with bundling</p>



<a name="216436133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216436133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216436133">(Nov 12 2020 at 07:44)</a>:</h4>
<p>yeah, that would be great</p>



<a name="216436165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216436165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216436165">(Nov 12 2020 at 07:44)</a>:</h4>
<p>As Thomas said, we'll probably talk about it a bit more at our weekly meeting on Friday</p>



<a name="216436704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216436704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216436704">(Nov 12 2020 at 07:53)</a>:</h4>
<p>Also, would it make sense to keep a <code>is_normal_subgroup</code> sort of thing (from which you could construct a bundled normal subgroup)? There are some things that might be better to phrase in terms of <code>is_normal_subgroup</code>. For example in the Galois correspondence you have "this extension is Galois if and only if this subgroup is normal".</p>



<a name="216445880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/216445880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#216445880">(Nov 12 2020 at 09:37)</a>:</h4>
<p>I think thats a great idea. When I worked with bundled normal subgroups I often found myself needing the normal statement as a proposition. I worked around it by simply not writing iff statements and instead make everything into functions but I think having the prop version around is a good idea.</p>



<a name="217271371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217271371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217271371">(Nov 19 2020 at 13:52)</a>:</h4>
<p>Hi, is there any update on the normal subgroups? I'm experimenting a bit with composition series right now which works much better with bundled normals subgroups. (Sorry if there exists another Zulip thread on this that I missed)</p>



<a name="217286175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217286175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217286175">(Nov 19 2020 at 15:37)</a>:</h4>
<p>I certainly haven't done anything, and I'm too busy right now to do anything serious in lean for the near future. But if I recall correctly some Berkeley people were planning to take this on? <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="217594844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217594844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217594844">(Nov 23 2020 at 07:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/normal.20subgroups/near/217271371">said</a>:</p>
<blockquote>
<p>Hi, is there any update on the normal subgroups? I'm experimenting a bit with composition series right now which works much better with bundled normals subgroups. (Sorry if there exists another Zulip thread on this that I missed)</p>
</blockquote>
<p>I'm interested in doing this. I've started a mathlib branch (<code>normal_subgroup</code>) to work on this. So far I've defined a bundled version of <code>normal_subgroup</code> and proven some basic stuff about it (mostly copied from other bundled things in mathlib). I haven't yet even fixed all the problems in <code>subgroup.lean</code> that the new definition causes though.</p>



<a name="217594850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217594850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217594850">(Nov 23 2020 at 07:14)</a>:</h4>
<p>I don't really know what I'm doing btw</p>



<a name="217594853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217594853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217594853">(Nov 23 2020 at 07:14)</a>:</h4>
<p>but it would be great if you also make changes to this mathlib branch</p>



<a name="217594939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/normal%20subgroups/near/217594939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/normal.20subgroups.html#217594939">(Nov 23 2020 at 07:16)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/441ab212216e1956f38ea1594ce1fcfbf1078337/src/group_theory/subgroup.lean#L752">https://github.com/leanprover-community/mathlib/blob/441ab212216e1956f38ea1594ce1fcfbf1078337/src/group_theory/subgroup.lean#L752</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>