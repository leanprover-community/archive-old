---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html">Kaminski's Equation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282404222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282404222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282404222">(May 15 2022 at 11:10)</a>:</h4>
<p>Hi, I would like to add the following identity to the mathlib, but I'm unsure what to call it.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">kaminski</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="n">bool</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">h₁</span> <span class="o">:</span> <span class="n">f</span> <span class="n">tt</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">f</span> <span class="n">ff</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">]</span>
</code></pre></div>
<p>I guess by <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a>, it should be <code>bool.f_f_f_eq_f</code> or <code>bool.f_of_f_f_f</code> or maybe just <code>bool.f_f_f</code>?</p>



<a name="282404471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282404471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282404471">(May 15 2022 at 11:16)</a>:</h4>
<p>... except that <code>f</code> is the name of a free variable. I would rather call it <code>bool.apply_apply_apply</code> or <code>bool.apply_apply_apply_eq_apply</code></p>



<a name="282404815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282404815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282404815">(May 15 2022 at 11:25)</a>:</h4>
<p>Yeah, naming things after a free variable is generally not so good</p>



<a name="282404954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282404954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282404954">(May 15 2022 at 11:29)</a>:</h4>
<p>Fair point, <code>bool.apply_apply_apply</code> it is</p>



<a name="282405174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282405174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282405174">(May 15 2022 at 11:35)</a>:</h4>
<p>An alternative proof using <code>fin_cases</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="n">bool</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">bool</span><span class="o">}</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">fin_cases</span> <span class="n">f</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">refl</span>
</code></pre></div>



<a name="282407174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407174">(May 15 2022 at 12:26)</a>:</h4>
<p>Note that this can't be a <code>@[simp]</code> lemma, as the head of the LHS is a metavariable.</p>



<a name="282407177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407177">(May 15 2022 at 12:27)</a>:</h4>
<p>Wow, I'm happy that <code>fin_cases</code> works here. :-)</p>



<a name="282407275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407275">(May 15 2022 at 12:30)</a>:</h4>
<p>I'm curious, is this identity actually "good for anything"? Is it "true for any reason" besides case bashing? I want (being highly prejudiced) to say that because it isn't "true for any reason" it can't be "good for anything". Convince me I'm wrong. :-)</p>



<a name="282407333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407333">(May 15 2022 at 12:30)</a>:</h4>
<p>Is there an analogous statement for endomorphisms of finite types? Hmm, I guess by pure thought there exist smallest numbers a(n) &lt; b(n) such that f^a = f^b for all f:fin n -&gt; fin n and this proof above shows a(2)=1, b(2)=3.</p>



<a name="282407396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407396">(May 15 2022 at 12:33)</a>:</h4>
<p>Okay, I guess that general fact is more or less good for something. But since it was true by pure thought, that's okay. (I think we've exhausted this line of thought, sorry. :-)</p>



<a name="282407444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407444">(May 15 2022 at 12:34)</a>:</h4>
<p>Quick let's call it the Buzzard-Morrison Equation in case it's useful for something.</p>



<a name="282407460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407460">(May 15 2022 at 12:34)</a>:</h4>
<p>My guess is that a(n)=O(n) and b(n)=O(n!)</p>



<a name="282407542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407542">(May 15 2022 at 12:37)</a>:</h4>
<p>To me, it's because functions bool -&gt; bool are involutive, constant, or identity, and only because of the constant functions does f(f(x)) = x not hold. I guess this means b(n) = lcm(1...n) which surely has a nice value</p>



<a name="282407557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407557">(May 15 2022 at 12:37)</a>:</h4>
<p>... it is asymptotically <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">e^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></p>



<a name="282407608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407608">(May 15 2022 at 12:38)</a>:</h4>
<p>Wow, according to oeis: "An assertion equivalent to the Riemann hypothesis is: | log(a(n)) - n | &lt; sqrt(n) * log(n)^2. " (for a(n) our b(n))</p>



<a name="282407618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407618">(May 15 2022 at 12:39)</a>:</h4>
<p>Whoops <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="282407808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407808">(May 15 2022 at 12:42)</a>:</h4>
<p>Maybe you just solved RH, Yaël ;b</p>



<a name="282407871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407871">(May 15 2022 at 12:44)</a>:</h4>
<p>Who's going to PR it?</p>



<a name="282407885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282407885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282407885">(May 15 2022 at 12:44)</a>:</h4>
<p>RH? I skip my turn <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="282408829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282408829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282408829">(May 15 2022 at 13:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456794">Patrick Johnson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282405174">said</a>:</p>
<blockquote>
<p>An alternative proof using <code>fin_cases</code>:</p>
</blockquote>
<p>Here's an even easier proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="n">bool</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">bool</span><span class="o">},</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">dec_trivial</span>
</code></pre></div>



<a name="282408970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282408970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282408970">(May 15 2022 at 13:10)</a>:</h4>
<p>The issue is not about the growth (which is equivalent to the prime number theorem), it's about the error bounds (which is equivalent to the Riemann Hypothesis).</p>



<a name="282409256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282409256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282409256">(May 15 2022 at 13:19)</a>:</h4>
<p>Damn this thread exploded while I was doing the dishes</p>



<a name="282409257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282409257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282409257">(May 15 2022 at 13:19)</a>:</h4>
<p>My PR for this is <a href="https://github.com/leanprover-community/mathlib/pull/14159">#14159</a></p>



<a name="282409957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282409957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282409957">(May 15 2022 at 13:38)</a>:</h4>
<p>Where did you find this name for this equation, Aaron? I can't seem to find kaminski's equation on Google...</p>



<a name="282410393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282410393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282410393">(May 15 2022 at 13:50)</a>:</h4>
<p>It was taught to me by Gert Smolka; He also mentions it in <a href="https://www.ps.uni-saarland.de/courses/cl-ss14/script/icl.pdf">his script</a> in chapter 3.8</p>



<a name="282410575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282410575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282410575">(May 15 2022 at 13:55)</a>:</h4>
<p>It says there:</p>
<blockquote>
<p>The equation was brought up as a proof challenge by Mark Kaminski in 2005 when he wrote<br>
his Bachelor’s thesis on classical higher-order logic.</p>
</blockquote>



<a name="282410708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282410708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282410708">(May 15 2022 at 13:58)</a>:</h4>
<p>The thesis at at <a href="https://www.ps.uni-saarland.de/Publications/documents/kaminski-bthesis.pdf">https://www.ps.uni-saarland.de/Publications/documents/kaminski-bthesis.pdf</a>, but I can't find the thing being referenced</p>



<a name="282411261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282411261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282411261">(May 15 2022 at 14:11)</a>:</h4>
<p>hmm, I guess it came up while he was writing his thesis, but it didn't actually make it into the thesis</p>



<a name="282411413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282411413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282411413">(May 15 2022 at 14:15)</a>:</h4>
<p>The thesis does reason about functions on booleans a lot, so it makes sense he'd stumble across this identity</p>



<a name="282491573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282491573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282491573">(May 16 2022 at 13:04)</a>:</h4>
<p>It's entirely possible it's in there, just not in a form that's easy to spot</p>



<a name="282506267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282506267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282506267">(May 16 2022 at 14:47)</a>:</h4>
<p>It would have been funny if</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">))</span> <span class="bp">↔</span> <span class="n">f</span> <span class="n">p</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>were constructively true, since then <a href="https://leanprover-community.github.io/mathlib_docs/find/not_of_not_not_not">docs#not_of_not_not_not</a> would just be a consequence.</p>
<p>It's not constructively true though. Using the Heyting algebra of open sets of the real line, f could be a translation one unit to the right, and that translation turns out not to have finite order.</p>



<a name="282519104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282519104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282519104">(May 16 2022 at 16:16)</a>:</h4>
<p>so you can even prove that there's no distinct a and b with f^a=f^b :-(</p>



<a name="282531571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282531571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282531571">(May 16 2022 at 17:29)</a>:</h4>
<p>Something seems fishy about that argument; you can give the same counterexample for the boolean algebra of sets on the real line</p>



<a name="282532023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282532023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282532023">(May 16 2022 at 17:32)</a>:</h4>
<p>Well, I think that shows</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">boolean_algebra</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>is false.</p>



<a name="282533742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282533742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282533742">(May 16 2022 at 17:44)</a>:</h4>
<p>I think I found a definable counterexample:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.itauto</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">¬</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">p</span>
<span class="kd">theorem</span> <span class="n">T</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">))</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">unfold</span> <span class="n">f</span><span class="bp">;</span> <span class="n">itauto</span> <span class="c1">-- fail</span>
</code></pre></div>
<p><code>itauto</code> is super useful here for being a complete decision procedure for intuitionistic logic</p>



<a name="282534825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282534825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282534825">(May 16 2022 at 17:50)</a>:</h4>
<p>here's a more comprehensible explanation of why it fails:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">T</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">))</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">itauto</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="k">show</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">p</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">false</span><span class="o">,</span> <span class="kd">by</span> <span class="n">itauto</span><span class="o">,</span> <span class="n">false_or</span><span class="o">,</span> <span class="n">not_false_iff</span><span class="o">,</span> <span class="n">not_true</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="c1">-- the hypothesis was useless, the goal is now</span>
    <span class="c1">-- h: true ⊢ ¬p ∨ ¬¬p</span>
    <span class="n">itauto</span><span class="o">,</span> <span class="o">}</span> <span class="c1">-- fails</span>
<span class="kd">end</span>
</code></pre></div>



<a name="282535198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282535198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282535198">(May 16 2022 at 17:53)</a>:</h4>
<p>alternatively:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.itauto</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">¬</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">p</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">))</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬¬</span><span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">unfold</span> <span class="n">f</span> <span class="n">at</span> <span class="n">h</span><span class="bp">;</span> <span class="n">itauto</span> <span class="c1">-- ok</span>
</code></pre></div>



<a name="282545310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282545310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282545310">(May 16 2022 at 19:01)</a>:</h4>
<p>Related to the generalized case, how does one arrive at the conclusion that <a href="https://oeis.org/A065500">A0665500</a> is equivalent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>c</mi><mi>m</mi><mo stretchy="false">(</mo><mn>1...</mn><mi>n</mi><mo stretchy="false">)</mo><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">lcm(1...n)+n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">c</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord">1...</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>?</p>



<a name="282549517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282549517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282549517">(May 16 2022 at 19:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282531571">said</a>:</p>
<blockquote>
<p>Something seems fishy about that argument; you can give the same counterexample for the boolean algebra of sets on the real line</p>
</blockquote>
<p>I was wondering about that -- I guess it comes down to what <code>Prop -&gt; Prop</code> is supposed to mean? The translation example is at least an isomorphism of Heyting algebras induced by a symmetric of the underlying space, but, beyond that, it seems like you might not want to allow arbitrary functions on a Heyting algebra...</p>



<a name="282549826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282549826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282549826">(May 16 2022 at 19:39)</a>:</h4>
<p>That's cool that you can prove the weak law of the excluded middle with this.</p>



<a name="282556624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282556624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282556624">(May 16 2022 at 20:33)</a>:</h4>
<p>I've had this question for a while, apologies for jumping in with a slightly off-topic question: In intuitionistic logic, is the weak law of the excluded middle both unprovable and strictly weaker than actual excluded middle? It feels like that's the case but I've never seen a proof.</p>



<a name="282557162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282557162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282557162">(May 16 2022 at 20:37)</a>:</h4>
<p>I don't know the answer, but at least <code>itauto</code> can't prove it, and it can't prove <code>em</code> from the weak <code>em</code> applied to the same <code>p</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬¬</span><span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">itauto</span> <span class="c1">-- not ok</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬¬</span><span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">itauto</span> <span class="c1">-- ok</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬¬</span><span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">itauto</span> <span class="c1">-- not ok</span>
</code></pre></div>



<a name="282557832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282557832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282557832">(May 16 2022 at 20:43)</a>:</h4>
<p>I guess the interesting alternative would be "weak EM =&gt; EM"  being unprovable.</p>



<a name="282558224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282558224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282558224">(May 16 2022 at 20:46)</a>:</h4>
<p>Afair, there's a hierarchy of Em's, but this isn't it. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> sent me the link before.</p>



<a name="282558883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282558883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282558883">(May 16 2022 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span>Are you referring to this? <a href="#narrow/stream/113488-general/topic/.E2.9C.94.20How.20to.20prove.20.22.C2.AC.28p.20.E2.86.94.20.C2.ACp.29.22.20without.20classical.20reasoning.3F/near/252024545">mario's post</a></p>
<p><a href="https://en.wikipedia.org/wiki/Intuitionistic_logic#/media/File:Rieger-Nishimura.svg">Direct link</a> to an illustration of the Rieger-Nishimura lattice</p>



<a name="282559134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282559134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282559134">(May 16 2022 at 20:54)</a>:</h4>
<p>Yea, that's the one!!!</p>



<a name="282561197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282561197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282561197">(May 16 2022 at 21:10)</a>:</h4>
<p>Yep exactly. This is also the free lattice on three elements.</p>



<a name="282561698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282561698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282561698">(May 16 2022 at 21:15)</a>:</h4>
<p>This is very interesting! It seems to suggest that "weak EM =&gt; EM"  is really unprovable, but I am not 100% sure this is the same question. In the lattice, it looks like everything is specialized to a particular proposition.</p>



<a name="282563602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282563602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282563602">(May 16 2022 at 21:32)</a>:</h4>
<p>yes, weak EM =&gt; EM is unprovable, but it's true that the distinctness of the relevant points in the Rieger-Nishimura lattice does not prove this, only that <code>weak_EM(p) -&gt; EM(p)</code> is unprovable (it could be that <code>weak_EM(f(p)) -&gt; EM(p)</code> for some <code>f</code>)</p>



<a name="282577823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282577823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282577823">(May 17 2022 at 00:19)</a>:</h4>
<p>In fact, weak EM is the <em>only</em> thing you can deduce from kaminski's equation (on definable formulas <code>f</code>). More precisely, if <code>f</code> is a univariate function on propositions built from <code>[p, ⊤, ⊥, →, ¬, ∧, ∨]</code>, then <code>¬p ∨ ¬¬p → f (f (f p)) ↔ f p</code> holds.</p>
<p>Proof: By cases on <code>¬p ∨ ¬¬p</code>.</p>
<ul>
<li>If <code>¬p</code> is true, then <code>p &lt;-&gt; false</code> so we are in the <code>bool</code> subset of the logic and therefore <code>f (f (f p)) ↔ f p</code> by evaluating it to true or false and observing that this is a classical theorem.</li>
<li>If <code>¬¬p</code>, we end up in a three-valued logic, because <code>¬p &lt;-&gt; false</code> and all the other operators are closed in the set <code>[p, ⊤, ⊥]</code>. There are only six reachable functions in this logic: <code>⊥, ⊤, x, ¬x, ¬¬x, x ∨ ¬x</code>, and for all of these functions Kaminski's theorem holds:</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[derive [decidable_eq, fintype]</span><span class="o">]</span> <span class="kd">inductive</span> <span class="n">val</span> <span class="bp">|</span> <span class="n">true</span> <span class="bp">|</span> <span class="n">false</span> <span class="bp">|</span> <span class="n">p</span>

<span class="kd">def</span> <span class="n">val.not</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">val.true</span> <span class="o">:=</span> <span class="n">val.false</span>
<span class="bp">|</span> <span class="n">val.false</span> <span class="o">:=</span> <span class="n">val.true</span>
<span class="bp">|</span> <span class="n">val.p</span> <span class="o">:=</span> <span class="n">val.false</span>

<span class="kd">def</span> <span class="n">val.and</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">val.true</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">p</span> <span class="n">val.true</span> <span class="o">:=</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">val.false</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">val.false</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">val.false</span> <span class="o">:=</span> <span class="n">val.false</span>
<span class="bp">|</span> <span class="n">val.p</span> <span class="n">val.p</span> <span class="o">:=</span> <span class="n">val.p</span>

<span class="kd">def</span> <span class="n">val.or</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">val.false</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">p</span> <span class="n">val.false</span> <span class="o">:=</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">val.true</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">val.true</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">val.true</span> <span class="o">:=</span> <span class="n">val.true</span>
<span class="bp">|</span> <span class="n">val.p</span> <span class="n">val.p</span> <span class="o">:=</span> <span class="n">val.p</span>

<span class="kd">def</span> <span class="n">val.imp</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">val.false</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">val.true</span>
<span class="bp">|</span> <span class="n">p</span> <span class="n">val.false</span> <span class="o">:=</span> <span class="n">val.not</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">val.true</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">p</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">val.true</span> <span class="o">:=</span> <span class="n">val.true</span>
<span class="bp">|</span> <span class="n">val.p</span> <span class="n">val.p</span> <span class="o">:=</span> <span class="n">val.true</span>

<span class="kd">@[derive decidable]</span> <span class="kd">def</span> <span class="n">is_valid</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">v</span><span class="o">,</span> <span class="n">f</span> <span class="n">v</span> <span class="bp">=</span> <span class="n">val.p</span> <span class="bp">→</span> <span class="n">v</span> <span class="bp">=</span> <span class="n">val.p</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="n">f</span> <span class="bp">=</span> <span class="n">id</span> <span class="bp">∨</span> <span class="n">f</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">i.or</span> <span class="n">i.not</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">f</span> <span class="n">val.true</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">val.p</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">true.is_valid</span> <span class="o">:</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">val.true</span><span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">false.is_valid</span> <span class="o">:</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">val.false</span><span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">id.is_valid</span> <span class="o">:</span> <span class="n">is_valid</span> <span class="n">id</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">not.is_valid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">),</span>
  <span class="n">is_valid</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">not</span><span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">and.is_valid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">),</span>
  <span class="n">is_valid</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">and</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">))</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">or.is_valid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">),</span>
  <span class="n">is_valid</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">or</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">))</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="kd">theorem</span> <span class="n">imp.is_valid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">),</span>
  <span class="n">is_valid</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">is_valid</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">))</span> <span class="o">:=</span> <span class="n">dec_trivial</span>

<span class="kd">theorem</span> <span class="n">kaminski</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span><span class="o">),</span>
  <span class="n">is_valid</span> <span class="n">f</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">v</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">v</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="282606895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282606895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282606895">(May 17 2022 at 08:24)</a>:</h4>
<p>ha ha this is funny because abstractly the answer for f : fin 3 -&gt; fin 3 is: if it's a 3-cycles then f^3=f^0 and if it's not then the image has size &lt;= 2 so Kaminski kicks in after one application and we deduce f^4=f^2, so always f^8=f^2 (in particular strictly worse).</p>



<a name="282634923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282634923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282634923">(May 17 2022 at 12:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282407333">said</a>:</p>
<blockquote>
<p>Is there an analogous statement for endomorphisms of finite types? Hmm, I guess by pure thought there exist smallest numbers a(n) &lt; b(n) such that f^a = f^b for all f:fin n -&gt; fin n and this proof above shows a(2)=1, b(2)=3.</p>
</blockquote>
<p>Do we actually have this (or similar) in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">},</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">a</span><span class="o">])</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">b</span><span class="o">])</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="282641902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282641902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282641902">(May 17 2022 at 13:43)</a>:</h4>
<p>I actually looked into a more generalised version of kaminski for my own practice and <a href="https://gist.github.com/slerpyyy/b7f98d9c50adba97f7609f1b94628ba9">this</a> is how far I got</p>



<a name="282642645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282642645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282642645">(May 17 2022 at 13:48)</a>:</h4>
<p>(Also, if anyone here has an idea on how to prove the last statement, please let me know)</p>



<a name="282642746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282642746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282642746">(May 17 2022 at 13:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456794">Patrick Johnson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282634923">said</a>:</p>
<blockquote>
<p>Do we actually have this (or similar) in mathlib?</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">},</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">a</span><span class="o">])</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">b</span><span class="o">])</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>It's basically <a href="https://leanprover-community.github.io/mathlib_docs/find/not_injective_infinite_fintype">docs#not_injective_infinite_fintype</a> applied to <code>(fin n → fin n) → (fin n → fin n)</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>

<span class="kn">open</span> <span class="n">function</span>
<span class="kd">lemma</span> <span class="n">linear_order.injective_iff</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">injective</span> <span class="n">f</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">f</span> <span class="n">b</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">h</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hab</span> <span class="n">hfab</span><span class="o">,</span> <span class="n">hab.ne</span> <span class="bp">$</span> <span class="n">h</span> <span class="n">hfab</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hfab</span><span class="o">,</span> <span class="n">by_contra</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">hab.lt_or_lt.elim</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hab</span><span class="o">,</span> <span class="n">h</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hab</span> <span class="n">hfab</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hba</span><span class="o">,</span> <span class="n">h</span> <span class="n">b</span> <span class="n">a</span> <span class="n">hba</span> <span class="n">hfab.symm</span><span class="o">)⟩</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">},</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">a</span><span class="o">])</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">b</span><span class="o">])</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">),</span> <span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">k</span><span class="o">])</span> <span class="o">:=</span>
  <span class="n">not_injective_infinite_fintype</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">linear_order.injective_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">funext_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span> <span class="o">{</span><span class="n">single_pass</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
  <span class="n">exact</span> <span class="n">this</span>
<span class="kd">end</span>
</code></pre></div>



<a name="282642820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282642820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282642820">(May 17 2022 at 13:50)</a>:</h4>
<p>Or <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.exists_ne_map_eq_of_infinite">docs#fintype.exists_ne_map_eq_of_infinite</a></p>



<a name="282642929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282642929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282642929">(May 17 2022 at 13:50)</a>:</h4>
<p>Oh, that one is a little closer indeed (with the negation of <code>injective</code> unfolded).</p>



<a name="282644288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282644288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282644288">(May 17 2022 at 14:00)</a>:</h4>
<p>Reminds me of <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20f.5E.5Bn.5D.20x.20.3D.20x/near/266557825">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20f.5E.5Bn.5D.20x.20.3D.20x/near/266557825</a>, so I ended up with:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>
<span class="kn">import</span> <span class="n">group_theory.exponent</span>
<span class="kn">import</span> <span class="n">algebra.hom.iterate</span>
<span class="kn">import</span> <span class="n">group_theory.group_action.defs</span>
<span class="kn">import</span> <span class="n">data.set.finite</span>
<span class="bp">.</span>

<span class="kd">lemma</span> <span class="n">key</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">id</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">a</span><span class="o">])</span> <span class="o">:</span> <span class="n">function.End</span> <span class="n">M</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">^</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="n">simpa</span> <span class="o">[</span><span class="n">a_ih</span><span class="o">,</span> <span class="n">pow_succ'</span><span class="o">],</span>
<span class="kd">end</span>
<span class="kn">open</span> <span class="n">monoid</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kd">noncomputable theory</span>
<span class="kd">instance</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">function.End</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta_instance</span> <span class="n">function.End</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">},</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">a</span><span class="o">])</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span><span class="bp">^</span><span class="o">[</span><span class="n">b</span><span class="o">])</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="n">function.End</span> <span class="n">M</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="n">function.End</span> <span class="n">M</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span> <span class="bp">^</span> <span class="n">b</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">Exists₂.imp</span> <span class="n">_</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rintros</span> <span class="n">a</span> <span class="n">b</span> <span class="o">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">⟩,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h₁</span><span class="o">,</span> <span class="n">true_and</span><span class="o">],</span>
    <span class="n">intro</span> <span class="n">f</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">congr_fun</span> <span class="n">h₂</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="o">[</span><span class="n">pi.pow_apply</span><span class="o">,</span> <span class="n">pi.pow_apply</span><span class="o">,</span> <span class="bp">←</span> <span class="n">key</span><span class="o">,</span> <span class="bp">←</span> <span class="n">key</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">simpa</span> <span class="n">using</span> <span class="n">set.infinite_univ.exists_lt_map_eq_of_maps_to</span> <span class="o">(</span><span class="n">set.maps_to_univ</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="n">function.End</span> <span class="n">M</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="n">_</span><span class="o">)</span> <span class="n">set.finite_univ</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Floris's is much cleaner!</p>



<a name="282644570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282644570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282644570">(May 17 2022 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="456794">@Patrick Johnson</span> That reminded me that a while back <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20f.5E.5Bn.5D.20x.20.3D.20x/near/266650589">I built out some theory</a> as an exercise, and it could be used to prove this. The core idea is that for a fintype, there's some positive n such that <code>f^[n]</code> is a bijection when restricted to its image, and then you can take the order <code>k</code> of that permutation to get that <code>f^[n] = f^[n+k]</code>.</p>



<a name="282644718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282644718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282644718">(May 17 2022 at 14:02)</a>:</h4>
<p>Oh, that's in the same thread Alex just linked to.</p>



<a name="282662124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282662124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282662124">(May 17 2022 at 15:53)</a>:</h4>
<p>I think the "Kaminski-Buzzard-Morrison" numbers can be found the following way:</p>
<p>Supposing a &lt; b and f^a = f^b, then f restricted to f^a is a bijection. Hence b-a &lt;= g(|im f^a|), where g(n) is the <a href="https://en.wikipedia.org/wiki/Landau%27s_function">Landau function</a> (the largest order of an element of the symmetric group).</p>
<p>Given any finite set X, subset S, and permutation p of S, then that permutation can be extended to be a function f : X -&gt; X such that the image of some power of f is S. There is such an f such that the least such power is |X - S|, and this is the maximal least power over all f. In this case, a=|X-S| and b=a+order(p). So, one can maximize b by taking p with maximal order, getting a=|X-S| and b=a+g(|S|).</p>
<p>Hence, the set of all Kaminski-Buzzard-Morrison numbers for a particular set X of cardinality n is {(n-k, n-k+g(k)) | k in 1..n}.  I'm defining the numbers to be pairs (a,b) from those equations f^a=f^b with a&lt;b such that there is no smaller a for the given f and, for that a, no other f that can make b larger.</p>



<a name="282662428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282662428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282662428">(May 17 2022 at 15:55)</a>:</h4>
<p>I just realized I made a mistake there -- these aren't the universal numbers since you do need to take the lcm of all the orders.</p>



<a name="282663520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282663520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282663520">(May 17 2022 at 16:01)</a>:</h4>
<p>Anyway, you need a(n) = n-1 since <code>f</code> could be <code>pred</code> on <code>fin n</code>, and then b(n) = lcm(1,2,...,n) + n - 1.  That matches what Kevin said for the n=3 case (f^8 = f^2).</p>



<a name="282664957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282664957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282664957">(May 17 2022 at 16:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373970">Aaron Bies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282545310">said</a>:</p>
<blockquote>
<p>Related to the generalized case, how does one arrive at the conclusion that <a href="https://oeis.org/A065500">A0665500</a> is equivalent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>c</mi><mi>m</mi><mo stretchy="false">(</mo><mn>1...</mn><mi>n</mi><mo stretchy="false">)</mo><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">lcm(1...n)+n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">c</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord">1...</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>?</p>
</blockquote>
<p>I see you already mentioned this formula. I think what's going on is that the only functions you can really define using the typed lambda calculus are iterates, so 1, f, f^1, f^2, ..., f^(b-1) are the only functions.</p>



<a name="282697157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282697157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282697157">(May 17 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282606895">said</a>:</p>
<blockquote>
<p>ha ha this is funny because abstractly the answer for f : fin 3 -&gt; fin 3 is: if it's a 3-cycles then f^3=f^0 and if it's not then the image has size &lt;= 2 so Kaminski kicks in after one application and we deduce f^4=f^2, so always f^8=f^2 (in particular strictly worse).</p>
</blockquote>
<p>Note that it's not really <code>fin 3 -&gt; fin 3</code>; although there are three values in the domain the third element is rather special since you can't just map it arbitrarily, and <code>true</code> and <code>false</code> can never map to <code>p</code>. I ended up with the list of conditions in <code>is_valid</code> more or less by seeing what things were preserved by the operations.</p>



<a name="282699667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/282699667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#282699667">(May 17 2022 at 20:06)</a>:</h4>
<p>Yes exactly, the weird logic stuff saves you; the fin 3 argument is what you get for free but you teased more out of it</p>



<a name="301682542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Kaminski%27s%20Equation/near/301682542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Kaminski's.20Equation.html#301682542">(Sep 30 2022 at 16:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373970">Aaron Bies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Kaminski's.20Equation/near/282641902">said</a>:</p>
<blockquote>
<p>I actually looked into a more generalised version of kaminski for my own practice and <a href="https://gist.github.com/slerpyyy/b7f98d9c50adba97f7609f1b94628ba9">this</a> is how far I got<br>
(Also, if anyone here has an idea on how to prove the last statement, please let me know)</p>
</blockquote>
<p>I proved it for <code>a = n</code> and <code>b = n + n.factorial</code> (<a href="https://github.com/user7230724/lean-projects/blob/master/src/other/func_iter_eq.lean">proof</a>).   It's probably easy to reduce it to <code>b = list.foldr nat.lcm 1 (list.iota n) + n</code>, but the problem is <code>-1</code> both in <code>a</code> and <code>b</code>, which I didn't manage to prove.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>