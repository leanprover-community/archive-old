---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html">A ≃ (set.univ A)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="243776789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243776789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243776789">(Jun 24 2021 at 12:24)</a>:</h4>
<p>I can't find any of these:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">set.univ</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃</span> <span class="n">subtype</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">true</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>



<a name="243780332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243780332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243780332">(Jun 24 2021 at 12:50)</a>:</h4>
<p>They all fall out as something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">)</span> <span class="bp">≃</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">{</span>
      <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">coe</span><span class="o">,</span>
      <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">finset.mem_univ</span> <span class="n">_</span><span class="o">⟩,</span>
      <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">subtype.ext</span> <span class="n">rfl</span><span class="o">,</span>
      <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">}</span>
</code></pre></div>



<a name="243780668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243780668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243780668">(Jun 24 2021 at 12:53)</a>:</h4>
<p>Did you see <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.subtype_univ_equiv">docs#equiv.subtype_univ_equiv</a> ?</p>



<a name="243780759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243780759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243780759">(Jun 24 2021 at 12:53)</a>:</h4>
<p>Or even better, <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.set.univ">docs#equiv.set.univ</a></p>



<a name="243781611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243781611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243781611">(Jun 24 2021 at 13:00)</a>:</h4>
<p>That's exactly what I wanted, thanks</p>



<a name="243781644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243781644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243781644">(Jun 24 2021 at 13:00)</a>:</h4>
<p>Unfortunately the definition doesn't work in my proof unless I make it reducible...</p>



<a name="243782871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20%E2%89%83%20%28set.univ%20A%29/near/243782871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20.E2.89.83.20(set.2Euniv.20A).html#243782871">(Jun 24 2021 at 13:10)</a>:</h4>
<p>Ah, the reason was because I needed the equiv to unfold to coe during typeclass search, which only happens if its reducible. The fix was easy - add a <code>letI</code> that does that unfolding. Thanks again, that let me tie up <a href="https://github.com/leanprover-community/mathlib/issues/8070">#8070</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>