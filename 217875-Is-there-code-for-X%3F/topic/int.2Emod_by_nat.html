---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html">int.mod_by_nat</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="300463106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300463106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300463106">(Sep 23 2022 at 22:56)</a>:</h4>
<p>I was a bit surprised to see the type signature of <a href="https://leanprover-community.github.io/mathlib_docs/find/int.nat_mod">docs#int.nat_mod</a> is <code>Z -&gt; Z -&gt; N</code>. Do we have an int/nat modulus operation of the form <code>Z -&gt; N -&gt; N</code>?</p>



<a name="300463614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300463614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300463614">(Sep 23 2022 at 23:03)</a>:</h4>
<p>Maybe just do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span>
</code></pre></div>
<p>If b = 0 it would give you the absolute value of a.</p>



<a name="300463890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300463890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300463890">(Sep 23 2022 at 23:06)</a>:</h4>
<p>what would you expect <code>(-3) % 0</code> to be?</p>



<a name="300463981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300463981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300463981">(Sep 23 2022 at 23:07)</a>:</h4>
<p>python gives me a division by zero error, but lean is happy to say that <code>(-3) % 0</code> is <code>-3</code> (which is the only reasonable answer IMO)</p>



<a name="300467024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467024">(Sep 23 2022 at 23:49)</a>:</h4>
<p>I would expect <code>(-3) % 0</code> to be 0 probably, but I wouldn't really care. What would you expect <code>(-3).nat_mod 0</code> to be?</p>



<a name="300467189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467189">(Sep 23 2022 at 23:51)</a>:</h4>
<p>I don't think <code>nat_mod</code> should exist in the first place <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="300467309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467309">(Sep 23 2022 at 23:53)</a>:</h4>
<p>Well, it's used a few times in mathlib. As far as I can tell each time the second argument is a nat cast to an int.</p>



<a name="300467413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467413">(Sep 23 2022 at 23:54)</a>:</h4>
<p>Seems perfectly normal to me, I just want to extend <code>%</code> on naturals to also work when the first argument is an integer.</p>



<a name="300467446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467446">(Sep 23 2022 at 23:55)</a>:</h4>
<p>But <code>%</code> does work on ints</p>



<a name="300467662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467662">(Sep 23 2022 at 23:57)</a>:</h4>
<p>I don't want to see a bunch of casts when my second argument is a nat, but fair enough.</p>



<a name="300467750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467750">(Sep 23 2022 at 23:58)</a>:</h4>
<p>Actually wait no, it's important to me that the return type is a nat too.</p>



<a name="300467951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467951">(Sep 24 2022 at 00:01)</a>:</h4>
<p>So you can compose with <a href="https://leanprover-community.github.io/mathlib_docs/find/int.nat_abs">docs#int.nat_abs</a></p>



<a name="300467972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300467972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300467972">(Sep 24 2022 at 00:01)</a>:</h4>
<p>Or with <a href="https://leanprover-community.github.io/mathlib_docs/find/int.to_nat">docs#int.to_nat</a></p>



<a name="300468032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468032">(Sep 24 2022 at 00:02)</a>:</h4>
<p>Depending on the behavior you want for negative integers</p>



<a name="300468061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468061">(Sep 24 2022 at 00:02)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/int.has_mod">docs#int.has_mod</a> (since I'm on mobile)</p>



<a name="300468168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468168">(Sep 24 2022 at 00:03)</a>:</h4>
<p>This is exactly what <a href="https://leanprover-community.github.io/mathlib_docs/find/int.nat_mod">docs#int.nat_mod</a> does</p>



<a name="300468464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468464">(Sep 24 2022 at 00:07)</a>:</h4>
<p>Aha okay. Well hopefully one little cast in the second variable isn't that bad?</p>



<a name="300468720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468720">(Sep 24 2022 at 00:11)</a>:</h4>
<p>I guess not. I agree that <code>nat_mod</code> shouldn't exist, but I think if only one of <code>nat_mod</code> and <code>mod_by_nat</code> were to exist, it should be the latter.</p>



<a name="300468979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300468979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300468979">(Sep 24 2022 at 00:15)</a>:</h4>
<p>The point is that the <code>%</code> of int calls <code>nat_abs</code> on its second argument anyway, so better to write <code>x.mod_by_nat |y|</code> less often than <code>x.nat_mod (y : \Z)</code> more often. But also <code>nat_mod</code> is in core, so I can't get rid of the old way.</p>



<a name="300469052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/int.mod_by_nat/near/300469052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/int.2Emod_by_nat.html#300469052">(Sep 24 2022 at 00:16)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/int.mod">docs#int.mod</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>