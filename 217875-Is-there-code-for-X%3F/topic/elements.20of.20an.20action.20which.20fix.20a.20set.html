---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html">elements of an action which fix a set</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="271327878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271327878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271327878">(Feb 09 2022 at 18:44)</a>:</h4>
<p>Do we have a name for the following?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The set of actions that leave elements in `s` unchanged -/</span>
<span class="kd">def</span> <span class="n">what_am_i</span> <span class="o">(</span><span class="n">M</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">m</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">|</span> <span class="bp">∀</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">m</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">}</span>
</code></pre></div>
<p>The closest I can find is <a href="https://leanprover-community.github.io/mathlib_docs/find/intermediate_field.fixing_subgroup">docs#intermediate_field.fixing_subgroup</a> which is an extremely special case with <code>M = E ≃ₐ[F] E</code> and unused requirements on <code>s</code></p>



<a name="271328143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271328143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271328143">(Feb 09 2022 at 18:46)</a>:</h4>
<p>It should be called something like the pointwise stabilizer of <code>s</code></p>



<a name="271328169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271328169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271328169">(Feb 09 2022 at 18:46)</a>:</h4>
<p>For a single element, it would be the stabilizer</p>



<a name="271328428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271328428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271328428">(Feb 09 2022 at 18:48)</a>:</h4>
<p>sUnion of stabilizer?</p>



<a name="271328823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271328823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271328823">(Feb 09 2022 at 18:51)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11938">#11938</a> adds the above as <code>fixing_submonoid</code> and <code>fixing_subgroup</code> but only because that matches the one I found already</p>



<a name="271329146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271329146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271329146">(Feb 09 2022 at 18:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set/near/271328428">said</a>:</p>
<blockquote>
<p>sUnion of stabilizer?</p>
</blockquote>
<p>More like <code>bInter</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">what_am_i_eq</span> <span class="o">(</span><span class="n">M</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">↑</span><span class="o">(</span><span class="bp">⨅</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">mul_action.stabilizer</span> <span class="n">M</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">what_am_i</span> <span class="n">M</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_Inter</span><span class="o">],</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="271329191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271329191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271329191">(Feb 09 2022 at 18:53)</a>:</h4>
<p>Right! Turn that smile upside down.</p>



<a name="271329195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271329195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271329195">(Feb 09 2022 at 18:53)</a>:</h4>
<p>Perhaps this doesn't need a name</p>



<a name="271348545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271348545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271348545">(Feb 09 2022 at 21:15)</a>:</h4>
<p>The downside of the <code>⋂</code> approach is that <a href="https://leanprover-community.github.io/mathlib_docs/find/set.Inter">docs#set.Inter</a> (aka <a href="https://leanprover-community.github.io/mathlib_docs/find/set.has_Inf">docs#set.has_Inf</a>) is definitionally not as nice as the original</p>



<a name="271348722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271348722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271348722">(Feb 09 2022 at 21:17)</a>:</h4>
<p>That makes me definitionally unhappy.</p>



<a name="271354554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271354554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271354554">(Feb 09 2022 at 22:07)</a>:</h4>
<p>oh yeah I think I've been caught out by this before--is there a reason we couldn't change the <code>complete_lattice</code> instance or whatever to use the right-hand side of <a href="https://leanprover-community.github.io/mathlib_docs/find/set.mem_Inter">docs#set.mem_Inter</a> as the definition?</p>



<a name="271354755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271354755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271354755">(Feb 09 2022 at 22:09)</a>:</h4>
<p>Yes, we get caught up in universe problems if we try to replace the <code>Inf</code> field of <code>complete_lattice</code> with <code>infi</code></p>



<a name="271354826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271354826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271354826">(Feb 09 2022 at 22:09)</a>:</h4>
<p>ah</p>



<a name="271354961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271354961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271354961">(Feb 09 2022 at 22:10)</a>:</h4>
<p>We could treat set as a special case since it has special notation anyway, but that's probably stillnot worth it</p>



<a name="271355086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271355086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271355086">(Feb 09 2022 at 22:11)</a>:</h4>
<p>There might be a middle ground where we have a <code>has_lawful_infi.{u} α</code> typeclass that provides infi in a particular universe and proves it's consistent with Inf</p>



<a name="271355195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271355195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271355195">(Feb 09 2022 at 22:12)</a>:</h4>
<p>And then if we end up in a universe mess somewhere we can just conjure an instance built from the Inf.</p>



<a name="271355330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271355330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271355330">(Feb 09 2022 at 22:13)</a>:</h4>
<p>But you could also argue that tweaking definitional equality isn't worth that trouble</p>



<a name="271355525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271355525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271355525">(Feb 09 2022 at 22:15)</a>:</h4>
<p>Wait no I don't understand now--<code>set.Inter</code> is a standalone top-level definition so we could just change it, right?</p>



<a name="271355561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271355561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271355561">(Feb 09 2022 at 22:15)</a>:</h4>
<p>I see what I said above was wrong but it's a slightly different thing.</p>



<a name="271356955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271356955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271356955">(Feb 09 2022 at 22:26)</a>:</h4>
<p>Yes, we could change <code>set.Inter</code> but then <code>⨅</code> and <code>⋂</code> would no longer be two notations for the same thing</p>



<a name="271356999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271356999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271356999">(Feb 09 2022 at 22:27)</a>:</h4>
<p>Which is useful because it encourages us to generalize set lemmas to lattices</p>



<a name="271404598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/elements%20of%20an%20action%20which%20fix%20a%20set/near/271404598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/elements.20of.20an.20action.20which.20fix.20a.20set.html#271404598">(Feb 10 2022 at 09:18)</a>:</h4>
<p>The downside of the <code>⋂</code> approach is that <a href="https://leanprover-community.github.io/mathlib_docs/find/set.Inter">docs#set.Inter</a> (aka <a href="https://leanprover-community.github.io/mathlib_docs/find/set.has_Inf">docs#set.has_Inf</a>) is definitionally not as nice as the original (<a href="#narrow/stream/113488-general/topic/Unpleasant.20definition.20for.20set.2EInter.20.2F.20infi/near/271348545">new Zulip thread</a>)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>