---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html">eq_neg_iff_neg_eq?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="309195127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309195127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309195127">(Nov 11 2022 at 13:43)</a>:</h4>
<p>we have <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_neg_iff_eq_neg">docs#eq_neg_iff_eq_neg</a> (<code>a = -b ↔ b = -a</code>) and <a href="https://leanprover-community.github.io/mathlib_docs/find/neg_eq_iff_neg_eq">docs#neg_eq_iff_neg_eq</a> (<code>-a = b ↔ -b = a</code>), but I can't seem to find a statement that says <code>a = -b ↔ -a = b</code>. In fact, <code>library_search</code> on</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
</code></pre></div>
<p>comes up with <code>neg_eq_iff_neg_eq.mp (eq.symm h)</code>, which seems to indicate that something like <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_neg_iff_neg_eq">docs#eq_neg_iff_neg_eq</a> does not exist.<br>
I find this a bit annoying when rewriting equalities (<code>eq.symm</code> is not an <code>iff</code> statement, so cannot be used for rewriting).</p>
<p>Is there a reason that this is missing (or am I just to stupid to find it)?</p>



<a name="309195263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309195263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309195263">(Nov 11 2022 at 13:44)</a>:</h4>
<p>You can use <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_comm">docs#eq_comm</a> for rewriting</p>



<a name="309199544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309199544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309199544">(Nov 11 2022 at 14:10)</a>:</h4>
<p>This one has bitten me too; i feel like we shouldn't have eq_neg_iff_eq_neg  and should have eq_neg_iff_neg_eq instead</p>



<a name="309199931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309199931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309199931">(Nov 11 2022 at 14:12)</a>:</h4>
<p>I don't think it hurts to have <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_neg_iff_eq_neg">docs#eq_neg_iff_eq_neg</a>, but I do think it hurts to not have eq_neg_iff_neg_eq.</p>



<a name="309200395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309200395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309200395">(Nov 11 2022 at 14:15)</a>:</h4>
<p>Unfortunately, <code>algebra.group.basic</code> has already been ported to mathlib4, so adding it there would require making the corresponding change in mathlib4, which I'm not yet able to do (I have to learn lean 4 first...). Otherwise I'd submit a PR.</p>



<a name="309200573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309200573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309200573">(Nov 11 2022 at 14:16)</a>:</h4>
<p>You may as well submit the PR anyway, but put a warning on it noting that it needs an upstream port</p>



<a name="309200601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309200601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309200601">(Nov 11 2022 at 14:16)</a>:</h4>
<p>Then either someone else can help you with that, or do it for you</p>



<a name="309202655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309202655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309202655">(Nov 11 2022 at 14:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/eq_neg_iff_neg_eq.3F/near/309195263">said</a>:</p>
<blockquote>
<p>You can use <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_comm">docs#eq_comm</a> for rewriting</p>
</blockquote>
<p>OK, thanks for the reminder -- I tend to forget that there is <code>symm</code> <em>and</em> <code>comm</code> here...</p>



<a name="309202712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309202712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309202712">(Nov 11 2022 at 14:28)</a>:</h4>
<p><code>eq_comm</code> is also annoying because you often have to use it as <code>@eq_comm _ a</code></p>



<a name="309203065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309203065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309203065">(Nov 11 2022 at 14:30)</a>:</h4>
<p>Looking at <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_comm">docs#eq_comm</a> and around, I notice</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="kd">theorem</span> <span class="n">eq_comm</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span>
 <span class="kd">theorem</span> <span class="n">and.comm</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">a</span>
 <span class="kd">theorem</span> <span class="n">and_comm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">a</span>
</code></pre></div>
<p>which does not look terribly consistent...</p>



<a name="309205615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309205615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309205615">(Nov 11 2022 at 14:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/eq_neg_iff_neg_eq.3F/near/309200601">said</a>:</p>
<blockquote>
<p>Then either someone else can help you with that, or do it for you</p>
</blockquote>
<p>If I'd want to find out how to do that, where would I look? (On the main "Lean community" page there seem to be no links referring to lean4 or mathlib4.)</p>



<a name="309206800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309206800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309206800">(Nov 11 2022 at 14:51)</a>:</h4>
<p>Honestly, Lean 4 is pretty much the same as Lean 3, and if it's just one lemma then for someone like me who has taken the plunge and ported a couple of Lean 4 files it will hopefully be pretty easy to create the Lean 4 PR. If you make the PR and somehow tag it "waiting for Lean 4 PR" then this might be a way to proceed.</p>
<p>I learnt at the porting meeting yesterday that there's even a program you can run your Lean 3 lemma through and it will quickly give you hopefully working Lean 4 code. Before you could only really run this program on e.g. all of mathlib, but now you can run it "oneshot" on just one file.</p>



<a name="309208346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309208346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309208346">(Nov 11 2022 at 14:59)</a>:</h4>
<p>What is the analogue of <code>leanproject get -b mathlib:blah</code> for mathlib4 (plus everything one has to do beforehand if one hasn't touched lean4 yet)?</p>



<a name="309209685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309209685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309209685">(Nov 11 2022 at 15:06)</a>:</h4>
<p>There is no <code>leanproject</code> for Lean 4 yet, but something like the following should be sufficient to get Lean 4 up and running.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">elan</span> <span class="n">self</span> <span class="n">update</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="bp">@</span><span class="n">github.com</span><span class="o">:</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib4.git</span>
<span class="n">cd</span> <span class="n">mathlib4</span>
<span class="n">lake</span> <span class="n">build</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="bp">-</span><span class="n">b</span> <span class="n">blah</span>
</code></pre></div>



<a name="309209989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309209989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309209989">(Nov 11 2022 at 15:08)</a>:</h4>
<p>See also the build instructions here: <a href="https://github.com/leanprover-community/mathlib4">https://github.com/leanprover-community/mathlib4</a></p>



<a name="309211244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309211244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309211244">(Nov 11 2022 at 15:15)</a>:</h4>
<p>OK, thanks! I'll try it out if I have time over the weekend...</p>



<a name="309214578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309214578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309214578">(Nov 11 2022 at 15:32)</a>:</h4>
<p>In any case, looking at the file in both versions near the relevant place, it looks identical except for spacing and replacing <code>$</code> by <code>&lt;|</code>, so I assume it would not be a big deal to make the corresponding change in the mathlib4 file.<br>
I assume this woul be two distinct PRs, one for mathlib3 and one four mathlib4?<br>
Can I submit PRs for mathlib4 if I can do it for mathlib3, or do I need separate access?</p>



<a name="309216588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309216588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309216588">(Nov 11 2022 at 15:44)</a>:</h4>
<p>I'm not sure if you're given automatic access if you have push access to mathlib...</p>



<a name="309220209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309220209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309220209">(Nov 11 2022 at 16:02)</a>:</h4>
<p>Pretty sure access isn't automatic</p>



<a name="309223860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309223860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309223860">(Nov 11 2022 at 16:23)</a>:</h4>
<p>I was looking in the wrong place. <span class="user-mention" data-user-id="479359">@Michael Stoll</span>, I have invited you to mathlib4.</p>



<a name="309223941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309223941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309223941">(Nov 11 2022 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Thanks!</p>



<a name="309244928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309244928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309244928">(Nov 11 2022 at 18:46)</a>:</h4>
<p>I've now made the mathlib3 PR:  <a href="https://github.com/leanprover-community/mathlib/pull/17483">#17483</a><br>
If somebody wants to do it for mathlib4, please go ahead! Otherwise, I'll try to have a go at it later.<br>
BTW, is there a mechanism for synchronizing PRs between mathlib3 and mathlib4?</p>



<a name="309267198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/eq_neg_iff_neg_eq%3F/near/309267198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/eq_neg_iff_neg_eq.3F.html#309267198">(Nov 11 2022 at 22:14)</a>:</h4>
<p>No mechanism beyond putting links in both directions.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>