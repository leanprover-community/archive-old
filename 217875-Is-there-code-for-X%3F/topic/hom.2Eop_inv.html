---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html">hom.op_inv</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276998010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276998010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276998010">(Mar 29 2022 at 12:35)</a>:</h4>
<p>Dear All,</p>
<p>is a definition similar to the one below available already?</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.group.opposite</span>

<span class="kn">open</span> <span class="n">mul_opposite</span>

<span class="kd">@[to_additive]</span>
<span class="kd">def</span> <span class="n">hom.op_inv</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→*</span> <span class="n">α</span><span class="bp">ᵐᵒᵖ</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">op</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩</span>
</code></pre></div>



<a name="276998447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276998447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276998447">(Mar 29 2022 at 12:39)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="398581">@Mantas Baksys</span></p>



<a name="276998690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276998690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276998690">(Mar 29 2022 at 12:41)</a>:</h4>
<p>You probably want to name it <code>monoid_hom.op_inv</code> and have all other options, like <code>mul_hom.op_inv</code>, <code>monoid_with_zero_hom.op_inv</code>, the additive versions...</p>



<a name="276998913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276998913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276998913">(Mar 29 2022 at 12:43)</a>:</h4>
<p>Ok, thanks!  At least, it was not simply a matter of adding <code>docs#</code> in front of my name and finding it!</p>



<a name="276998946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276998946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276998946">(Mar 29 2022 at 12:43)</a>:</h4>
<p>I think that I would even prefer to have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[to_additive]</span>
<span class="kd">def</span> <span class="n">mul_opposite.op_inv_equiv</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃*</span> <span class="n">α</span><span class="bp">ᵐᵒᵖ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span>    <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">op</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">inv_fun</span>   <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="bp">ᵐᵒᵖ</span><span class="o">,</span> <span class="n">unop</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">left_inv</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">map_mul'</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">}</span>
</code></pre></div>



<a name="276999314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276999314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mantas Baksys <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276999314">(Mar 29 2022 at 12:46)</a>:</h4>
<p>I've added some new instances to <code>op</code> in my PR <a href="https://github.com/leanprover-community/mathlib/pull/12931">#12931</a> but your definition was out of scope, so I didn't touch it <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="276999415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276999415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mantas Baksys <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276999415">(Mar 29 2022 at 12:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/hom.2Eop_inv/near/276998946">said</a>:</p>
<blockquote>
<p>I think that I would even prefer to have</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[to_additive]</span>
<span class="kd">def</span> <span class="n">equiv.op_inv</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃*</span> <span class="n">α</span><span class="bp">ᵐᵒᵖ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span>    <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">op</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">inv_fun</span>   <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="bp">ᵐᵒᵖ</span><span class="o">,</span> <span class="n">unop</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">left_inv</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">map_mul'</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">}</span>
</code></pre></div><br>
</p>
</blockquote>
<p>How about <code>mul_opposite.op_inv_equiv</code> for the name?</p>



<a name="276999690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/276999690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#276999690">(Mar 29 2022 at 12:49)</a>:</h4>
<p>Mantas, thanks for the input!  I updated the name!</p>



<a name="277001713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277001713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277001713">(Mar 29 2022 at 13:07)</a>:</h4>
<p>While we are at it, where should this definition go?</p>



<a name="277001928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277001928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277001928">(Mar 29 2022 at 13:09)</a>:</h4>
<p>(Note: I would like to keep the PR small, simply containing this definition and maybe a couple of <code>simp/rfl</code> lemmas that go with it!  I would rather not also do climb the <code>has_mul/mul_one_class/.../field</code> class-ladder!)</p>



<a name="277006701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277006701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277006701">(Mar 29 2022 at 13:46)</a>:</h4>
<p>I would do <code>αᵐᵒᵖ ≃* α</code> to have the more complicated stuff on the LHS.</p>



<a name="277008423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277008423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277008423">(Mar 29 2022 at 13:59)</a>:</h4>
<p>Found it!  I think that it is <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv'">docs#mul_equiv.inv'</a>.  The direction is the opposite to the one that Yaël suggests.</p>



<a name="277009086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277009086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277009086">(Mar 29 2022 at 14:03)</a>:</h4>
<p>Can you unify <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv">docs#mul_equiv.inv</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv'">docs#mul_equiv.inv'</a> by working over a <code>div_inv_monoid</code>?</p>



<a name="277024418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277024418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277024418">(Mar 29 2022 at 15:43)</a>:</h4>
<p>Probably not, because a div_inv_monoid tells you nothing about how inv behaves</p>



<a name="277024612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277024612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277024612">(Mar 29 2022 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/hom.2Eop_inv/near/277009086">said</a>:</p>
<blockquote>
<p>Can you unify <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv">docs#mul_equiv.inv</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv'">docs#mul_equiv.inv'</a> by working over a <code>div_inv_monoid</code>?</p>
</blockquote>
<p>I think you're muddling things, one of these is for <code>group</code> and the other for <code>comm_group</code>. Did you mean <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_equiv.inv%E2%82%80">docs#mul_equiv.inv₀</a>?</p>



<a name="277024745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277024745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277024745">(Mar 29 2022 at 15:45)</a>:</h4>
<p>We seem not to have mul_equiv.inv₀' for <code>group_with_zero</code></p>



<a name="277024943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277024943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277024943">(Mar 29 2022 at 15:46)</a>:</h4>
<p>Ah it's still the same problem that we have no typeclass stronger than <code>has_involutive_inv</code> and <code>monoid</code> and weaker than <code>group</code> and <code>group_with_zero</code>.</p>



<a name="277054091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277054091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277054091">(Mar 29 2022 at 19:28)</a>:</h4>
<p>What would be this intermediate typeclass?  Something where the inverse of a product is the (reversed) product of the inverses?</p>



<a name="277056134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277056134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277056134">(Mar 29 2022 at 19:47)</a>:</h4>
<p>Is that enough for <code>inv</code> to be involutive? In any case, it should be stronger than <code>div_inv_monoid</code>.</p>



<a name="277056212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/hom.op_inv/near/277056212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/hom.2Eop_inv.html#277056212">(Mar 29 2022 at 19:48)</a>:</h4>
<p>For the record, such a typeclass would allow us to deduplicate <a href="https://leanprover-community.github.io/mathlib_docs/find/set.div_inv_monoid">docs#set.div_inv_monoid</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/set.div_inv_monoid'">docs#set.div_inv_monoid'</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>