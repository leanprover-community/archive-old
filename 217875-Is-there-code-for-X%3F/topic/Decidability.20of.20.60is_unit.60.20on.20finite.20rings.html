---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html">Decidability of `is_unit` on finite rings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="286533053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286533053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286533053">(Jun 17 2022 at 19:27)</a>:</h4>
<p>The following works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">),</span> <span class="n">a.val</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>
<p>but this does not:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">),</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span>

<span class="bp">==&gt;</span>

<span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="bp">⊢</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">),</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
</code></pre></div>
<p>Shouldn't there be a decidability instance catching basically any predicate on a finite structure like <code>zmod 8</code>?</p>



<a name="286533554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286533554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286533554">(Jun 17 2022 at 19:32)</a>:</h4>
<p>Does it work for <code>fin 8</code>?</p>



<a name="286535163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286535163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286535163">(Jun 17 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286533554">said</a>:</p>
<blockquote>
<p>Does it work for <code>fin 8</code>?</p>
</blockquote>
<p>No, it gives the same error.</p>



<a name="286535847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286535847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286535847">(Jun 17 2022 at 19:57)</a>:</h4>
<p>The following does work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="o">(</span><span class="n">zmod</span> <span class="mi">8</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">),</span> <span class="n">a.val</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h₂</span> <span class="n">a</span> <span class="o">(</span><span class="n">h₁</span> <span class="n">ha.unit</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>
<p>I'm a bit confused now...</p>



<a name="286536095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536095">(Jun 17 2022 at 19:59)</a>:</h4>
<p>one way</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">),</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">unfold</span> <span class="n">is_unit</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span> <span class="o">}</span>
</code></pre></div>



<a name="286536245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536245">(Jun 17 2022 at 20:00)</a>:</h4>
<p>Probably a better way would be to write an instance for <code>decidable (is_unit x)</code> on a finite type, but where to put it?</p>



<a name="286536363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536363">(Jun 17 2022 at 20:02)</a>:</h4>
<p>What I actually need is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">number_theory.legendre_symbol.zmod_char</span>

<span class="kn">open</span> <span class="n">zmod</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">χ₈</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>for which your suggestion to use <code>unfold is_unit</code> does not seem to work.</p>



<a name="286536434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536434">(Jun 17 2022 at 20:02)</a>:</h4>
<p>It does with <code>dec_trivial!</code>, though.</p>



<a name="286536477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536477">(Jun 17 2022 at 20:03)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">8</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">χ₈</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">is_unit</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">dec_trivial</span><span class="bp">!</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="286536490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536490">(Jun 17 2022 at 20:03)</a>:</h4>
<p>Off-topic fun fact: did you know that <code>zmod_char</code> is a substring of <code> category_theory.limits.multiequalizer.category_theory.limits.multicospan_index.snd_pi_map.category_theory.limits.has_equalizer</code>?</p>



<a name="286536582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536582">(Jun 17 2022 at 20:04)</a>:</h4>
<p>The search window is always good for surprises...</p>



<a name="286536967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286536967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286536967">(Jun 17 2022 at 20:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286536245">said</a>:</p>
<blockquote>
<p>Probably a better way would be to write an instance for <code>decidable (is_unit x)</code> on a finite type, but where to put it?</p>
</blockquote>
<p>In <code>algebra.group.units</code> near the definition of <code>is_unit</code>?</p>



<a name="286537550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286537550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286537550">(Jun 17 2022 at 20:15)</a>:</h4>
<p>(deleted)</p>



<a name="286538071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286538071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286538071">(Jun 17 2022 at 20:20)</a>:</h4>
<p>I'm trying to write this decidability instance for <code>is_unit</code>. But I'm running into the problem that I cannot get <code>[fintype Mˣ]</code> from <code>[monoid M] [fintype M]</code> automatically. Is this a gap in mathlib?</p>



<a name="286538168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286538168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286538168">(Jun 17 2022 at 20:20)</a>:</h4>
<p>You will also need <code>decidable_eq M</code></p>



<a name="286538308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286538308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286538308">(Jun 17 2022 at 20:22)</a>:</h4>
<p>It works with that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>
<span class="kn">import</span> <span class="n">algebra.group.units</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">M</span><span class="bp">ˣ</span> <span class="o">:=</span> <span class="n">infer_instance</span>
</code></pre></div>



<a name="286538708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286538708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286538708">(Jun 17 2022 at 20:26)</a>:</h4>
<p>OK, so</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.group.units</span>
<span class="kn">import</span> <span class="n">data.fintype.basic</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_unit</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">is_unit</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">fintype.decidable_exists_fintype</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>In which file should this go? <code> algebra.group.units</code> does not know about <code>fintype</code>s.<br>
But <code>data.fintype.basic</code> knows about units, so perhaps this would be a good location.</p>



<a name="286538799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286538799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286538799">(Jun 17 2022 at 20:26)</a>:</h4>
<p>Perhaps near <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.card_units">docs#fintype.card_units</a> ?</p>



<a name="286543268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286543268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286543268">(Jun 17 2022 at 21:08)</a>:</h4>
<p>.</p>



<a name="286543269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286543269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286543269">(Jun 17 2022 at 21:08)</a>:</h4>
<p>It might be worth changing that to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">u</span> <span class="o">:</span> <span class="n">M</span><span class="bp">ˣ</span><span class="o">,</span> <span class="bp">↑</span><span class="n">u</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)],</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_unit</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">id</span>
</code></pre></div>
<p>Which both applies more generally, and can go in an earlier file.</p>



<a name="286558358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286558358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286558358">(Jun 18 2022 at 00:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286536490">said</a>:</p>
<blockquote>
<p>Off-topic fun fact: did you know that <code>zmod_char</code> is a substring of <code> category_theory.limits.multiequalizer.category_theory.limits.multicospan_index.snd_pi_map.category_theory.limits.has_equalizer</code>?</p>
</blockquote>
<p>So is <code>zero_le_three</code> :P</p>



<a name="286558361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286558361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286558361">(Jun 18 2022 at 00:40)</a>:</h4>
<p>Someone really needs to rename those instances</p>



<a name="286640556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286640556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286640556">(Jun 18 2022 at 09:13)</a>:</h4>
<p>I think the long names are funny but it's not clear to me that they need to be renamed. Bytes are cheap and the names are descriptive.</p>



<a name="286640618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286640618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286640618">(Jun 18 2022 at 09:14)</a>:</h4>
<p>I don't think of putting <code>category_theory</code> three times in the name as very descriptive, Kevin.</p>



<a name="286640722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286640722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286640722">(Jun 18 2022 at 09:17)</a>:</h4>
<p>The problem is that autogenerated names apply the namespace to every atom rather than just once at the end. I guess this is a conservative behavior to avoid mixing up different namespaces, but empirically most declarations use stuff from a single namespace, and people think of namespaces as, well... spaces, not as a step you keep jumping on and off from.</p>



<a name="286640789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286640789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286640789">(Jun 18 2022 at 09:19)</a>:</h4>
<p>I see, you're right in that it can be trimmed a bit ;-)</p>



<a name="286642325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286642325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286642325">(Jun 18 2022 at 09:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286640556">said</a>:</p>
<blockquote>
<p>I think the long names are funny but it's not clear to me that they need to be renamed. Bytes are cheap and the names are descriptive.</p>
</blockquote>
<p>At some point we're also going to run into names &gt;100 chars long, making them unusable because of the liner. I think the cosine rule is close already</p>



<a name="286644166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286644166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286644166">(Jun 18 2022 at 10:39)</a>:</h4>
<p>We can also teach the linter to ignore lines with &lt;= 2 spaces in or something like that, it already ignores lines containing a <code>http</code>.</p>



<a name="286645346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286645346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286645346">(Jun 18 2022 at 11:05)</a>:</h4>
<p>Names of instances don't really matter, it's just funny when they pop up in the documentation search for totally unrelated things.</p>



<a name="286926978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286926978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286926978">(Jun 21 2022 at 15:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286543269">said</a>:</p>
<blockquote>
<p>It might be worth changing that to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">u</span> <span class="o">:</span> <span class="n">M</span><span class="bp">ˣ</span><span class="o">,</span> <span class="bp">↑</span><span class="n">u</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)],</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_unit</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">id</span>
</code></pre></div>
<p>Which both applies more generally, and can go in an earlier file.</p>
</blockquote>
<p>I have now added this in <code>algebra.group.units</code>:  <a href="https://github.com/leanprover-community/mathlib/pull/14873">#14873</a>. <span class="user-mention" data-user-id="310045">@Eric Wieser</span></p>



<a name="286971797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286971797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286971797">(Jun 21 2022 at 20:41)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14873">#14873</a> is now green. Would it make sense to label this as <code>easy</code>?</p>



<a name="286994281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/286994281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#286994281">(Jun 22 2022 at 01:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286645346">said</a>:</p>
<blockquote>
<p>Names of instances don't really matter, it's just funny when they pop up in the documentation search for totally unrelated things.</p>
</blockquote>
<p>They do matter at times, particularly when you want to use said instances to define other instances</p>



<a name="287248963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/287248963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#287248963">(Jun 23 2022 at 21:04)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Can <a href="https://github.com/leanprover-community/mathlib/pull/14873">#14873</a> be merged now, or is there more to be done?</p>



<a name="287511826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/287511826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#287511826">(Jun 26 2022 at 20:14)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Can you push this onto the merge queue?</p>



<a name="287511868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Decidability%20of%20%60is_unit%60%20on%20finite%20rings/near/287511868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings.html#287511868">(Jun 26 2022 at 20:15)</a>:</h4>
<p>I'll let <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> make the call; it looks fine to me</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>