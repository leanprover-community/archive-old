---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html">factors lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247368065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ines Wright <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368065">(Jul 27 2021 at 17:58)</a>:</h4>
<p>Is there a lemma that says the list of factors of a prime to a power is the prime, n times?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">[</span><span class="n">p.prime</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">factors</span> <span class="bp">=</span> <span class="n">list.repeat</span> <span class="n">p</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247368149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368149">(Jul 27 2021 at 17:59)</a>:</h4>
<p>this should be in another thread - Zulip can be confusing! but no, should be pretty straightforward though</p>



<a name="247368178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368178">(Jul 27 2021 at 17:59)</a>:</h4>
<p>this is <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.factors">docs#nat.factors</a>, right?</p>



<a name="247368180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368180">(Jul 27 2021 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="424746">@Ines Wright</span> Hi! Would you mind editing your message to change it's topic to a new thread name?</p>



<a name="247368493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368493">(Jul 27 2021 at 18:01)</a>:</h4>
<p>There is <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.factors_prime">docs#nat.factors_prime</a>, but I couldn't find <code>nat.factors_mul</code>.</p>



<a name="247368704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368704">(Jul 27 2021 at 18:03)</a>:</h4>
<p>The problem with <code>nat.factors_mul</code> is that <code>nat.factors</code> is a <em>list</em> not a multiset, presumably for CS reasons.</p>



<a name="247368924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247368924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247368924">(Jul 27 2021 at 18:04)</a>:</h4>
<p>So you'd have to state it with <code>~</code> rather than <code>=</code>. I could imagine trying to use FTA to prove it by saying "list.repeat p y has the property that its <code>prod</code> is p^y so done by FTA" but then you have to prove that if <code>list.repeat p y ~ L</code> then <code>list.repeat p y = L</code>. Is this in mathlib?</p>



<a name="247369184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247369184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247369184">(Jul 27 2021 at 18:06)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.factors_unique">docs#nat.factors_unique</a></p>



<a name="247369602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247369602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247369602">(Jul 27 2021 at 18:09)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/list.repeat_perm">docs#list.repeat_perm</a></p>



<a name="247369836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247369836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247369836">(Jul 27 2021 at 18:10)</a>:</h4>
<p>Kevin, nat.factors is a list gives you the additional nice property that it is in increasing order.</p>



<a name="247370457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247370457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247370457">(Jul 27 2021 at 18:15)</a>:</h4>
<p>yeah but given a multiset I'm sure any CS person can put it into increasing order if they _want_...</p>



<a name="247370536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247370536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247370536">(Jul 27 2021 at 18:16)</a>:</h4>
<p>and you can see that it screws up <code>nat.factors_mul</code> ;-)</p>



<a name="247370715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247370715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247370715">(Jul 27 2021 at 18:17)</a>:</h4>
<p>More seriously, to a mathematician the "canonical" way of expressing the factors of a natural is as a multiset, because this is precisely the kind of data which can be canonically associated to the natural. When thinking of the factors there's no conceptual reason to include the ordering.</p>



<a name="247372984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247372984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247372984">(Jul 27 2021 at 18:36)</a>:</h4>
<p>There's also <a href="https://leanprover-community.github.io/mathlib_docs/find/pnat.factor_multiset">docs#pnat.factor_multiset</a></p>



<a name="247373139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247373139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247373139">(Jul 27 2021 at 18:37)</a>:</h4>
<p>Which also fixes the weirdness where <code>factors 1 = factors 0</code> despite it not being the case that <code>1 = 0</code></p>



<a name="247373816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247373816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247373816">(Jul 27 2021 at 18:43)</a>:</h4>
<p>pnat factor multiset is a PITA</p>



<a name="247374399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247374399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247374399">(Jul 27 2021 at 18:47)</a>:</h4>
<p>from having looked at this bit of mathlib lately the best rn is definitely <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.factors_subset_right">docs#nat.factors_subset_right</a>, but that's miles off</p>



<a name="247375866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247375866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247375866">(Jul 27 2021 at 18:58)</a>:</h4>
<p>All this <code>pnat</code> part of mathlib has been written a few years and is never used anywhere. Parts of it are poorly written and others are redundant with more general stuff. That's my take. But yeah I guess you can use it and give it some love.</p>



<a name="247376128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247376128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247376128">(Jul 27 2021 at 19:00)</a>:</h4>
<p>See <a href="https://github.com/leanprover-community/mathlib/issues/7960">#7960</a> for a more thorough explanation of mine.</p>



<a name="247378211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247378211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247378211">(Jul 27 2021 at 19:17)</a>:</h4>
<p>We can redefine factors as the multiset via <a href="http://quotient.mk">quotient.mk</a>, and retain the original as factors_list</p>



<a name="247378291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247378291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247378291">(Jul 27 2021 at 19:18)</a>:</h4>
<p>We don't have a multiset.repeat?</p>



<a name="247379011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247379011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247379011">(Jul 27 2021 at 19:24)</a>:</h4>
<p>i think the <code>smul</code> is repeat, basically</p>



<a name="247379074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247379074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247379074">(Jul 27 2021 at 19:24)</a>:</h4>
<p>no clue where it's defined, though</p>



<a name="247379458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247379458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247379458">(Jul 27 2021 at 19:28)</a>:</h4>
<p>yep: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.multiset</span>
<span class="kd">def</span> <span class="n">asdg</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="mi">4</span> <span class="bp">•</span> <span class="o">(</span><span class="n">quotient.mk</span> <span class="bp">$</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">])</span>
<span class="k">#reduce</span> <span class="n">asdg</span>
<span class="c1">-- quot.mk list.perm [1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4]</span>
</code></pre></div>



<a name="247380437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247380437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247380437">(Jul 27 2021 at 19:36)</a>:</h4>
<p>it's just the default smul, which makes a lot of sense as add is just appending two multisets</p>



<a name="247381341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247381341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247381341">(Jul 27 2021 at 19:44)</a>:</h4>
<p>There's also <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.repeat">docs#multiset.repeat</a></p>



<a name="247382800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247382800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247382800">(Jul 27 2021 at 19:56)</a>:</h4>
<p>sadly they're not defeq, but probably a lemma that should be in <code>mathlib</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">asda</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">multiset.repeat</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">•</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">asda</span> <span class="n">n</span><span class="o">,</span> <span class="n">succ_nsmul</span><span class="o">]</span>
</code></pre></div>



<a name="247742278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247742278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247742278">(Jul 30 2021 at 18:02)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">p</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">]</span> <span class="o">:</span>   <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">factors</span> <span class="bp">=</span> <span class="n">list.repeat</span> <span class="n">p</span> <span class="n">y</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>I have a proof -- but did we yet decide on whether this lemmas is called <code>factors_pow_prime</code> or <code>prime_pow_factors</code> or what?</p>



<a name="247745989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247745989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247745989">(Jul 30 2021 at 18:35)</a>:</h4>
<p><code>prime_pow_factors</code> sounds good to me!</p>



<a name="247746100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/factors%20lemma/near/247746100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/factors.20lemma.html#247746100">(Jul 30 2021 at 18:36)</a>:</h4>
<p>I would go with <code>prime.factors_pow</code> where <code>hp</code> is explicit</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>