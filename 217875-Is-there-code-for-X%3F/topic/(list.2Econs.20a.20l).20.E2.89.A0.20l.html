---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html">(list.cons a l) ≠ l</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205107723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205107723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205107723">(Jul 27 2020 at 11:57)</a>:</h4>
<p>The statement appears trivial, but I was surprised that <code>simp</code> couldn't solve it for me</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">l</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">induction</span> <span class="n">l</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_and</span><span class="o">,</span> <span class="n">ne</span><span class="bp">.</span><span class="n">def</span><span class="o">],</span>
  <span class="n">rintro</span> <span class="bp">⟨⟩</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">l_ih</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>Does this belong in mathlib, or is it too trivial? I note that <code>nat.succ_ne_self</code> exists, but isn't tagged as <code>@[simp]</code>...</p>



<a name="205112981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205112981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205112981">(Jul 27 2020 at 12:56)</a>:</h4>
<p>Does <code>simp</code> work for ≠? I've only seen it for <code>=</code> and <code>&lt;-&gt;</code></p>



<a name="205113142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113142">(Jul 27 2020 at 12:58)</a>:</h4>
<p>no</p>



<a name="205113178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113178">(Jul 27 2020 at 12:58)</a>:</h4>
<p>however you can mark any theorem <code>T</code> as a simp lemma and it will treat it as a proof of <code>T = true</code></p>



<a name="205113530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113530">(Jul 27 2020 at 13:01)</a>:</h4>
<p>Does that mean that almost all non-equality / iff lemmas with no implications should be marked simp?</p>



<a name="205113612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113612">(Jul 27 2020 at 13:02)</a>:</h4>
<p>almost all lemmas <em>could</em> be marked simp, that doesn't make it a good idea</p>



<a name="205113666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113666">(Jul 27 2020 at 13:03)</a>:</h4>
<p>In this case, I'm not sure why you thought simp would solve the theorem</p>



<a name="205113705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113705">(Jul 27 2020 at 13:03)</a>:</h4>
<p>unless this exact lemma already exists with <code>@[simp]</code></p>



<a name="205113806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205113806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205113806">(Jul 27 2020 at 13:04)</a>:</h4>
<p>I was expecting that this lemma might already exist.</p>



<a name="205114134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205114134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205114134">(Jul 27 2020 at 13:07)</a>:</h4>
<p>This doesn't feel <code>simp</code>. But I did try other automatic tactics and none kills it in one line.</p>



<a name="205116158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205116158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205116158">(Jul 27 2020 at 13:25)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span> <span class="bp">≠</span> <span class="n">l</span> <span class="o">:=</span>
<span class="n">mt</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">list</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="err">$</span> <span class="n">ne_of_gt</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_self</span> <span class="bp">_</span>
</code></pre></div>



<a name="205117143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205117143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205117143">(Jul 27 2020 at 13:34)</a>:</h4>
<p>Can <code>list.no_confusion</code> be used here?</p>



<a name="205117700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205117700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205117700">(Jul 27 2020 at 13:38)</a>:</h4>
<p>I don't think so - <code>l</code> could be a <code>list.cons</code></p>



<a name="205119970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205119970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205119970">(Jul 27 2020 at 13:58)</a>:</h4>
<p>Can also get it with</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">l</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">nil</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons_ne_nil</span> <span class="n">a</span> <span class="n">list</span><span class="bp">.</span><span class="n">nil</span>
<span class="bp">|</span> <span class="n">a</span> <span class="o">(</span><span class="n">h</span> <span class="bp">::</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">hyp</span><span class="o">,</span> <span class="n">cons_ne_self</span> <span class="n">h</span> <span class="n">t</span> <span class="err">$</span> <span class="o">(</span><span class="n">cons</span><span class="bp">.</span><span class="n">inj</span> <span class="n">hyp</span><span class="o">)</span><span class="bp">.</span><span class="n">right</span>
</code></pre></div>


<p>which doesn't rely on <code>list.length</code></p>



<a name="205120909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205120909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205120909">(Jul 27 2020 at 14:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">open</span> <span class="n">list</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">l</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">nil</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="n">a</span> <span class="o">(</span><span class="n">cons</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">solve_by_elim</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>Weird, this closes the goals but </p>
<div class="codehilite"><pre><span></span><code><span class="n">equation</span> <span class="n">compiler</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">create</span> <span class="n">auxiliary</span> <span class="n">declaration</span> <span class="err">&#39;</span><span class="bp">_</span><span class="n">example</span><span class="bp">._</span><span class="n">main</span><span class="bp">._</span><span class="n">pack</span><span class="bp">.</span><span class="n">equations</span><span class="bp">._</span><span class="n">eqn_2&#39;</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">invalid</span> <span class="n">equation</span> <span class="kn">lemma</span><span class="o">,</span> <span class="n">unexpected</span> <span class="n">form</span>
</code></pre></div>



<a name="205120946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205120946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205120946">(Jul 27 2020 at 14:06)</a>:</h4>
<p>maybe try not using <code>example</code>?</p>



<a name="205121134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205121134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205121134">(Jul 27 2020 at 14:08)</a>:</h4>
<p>Wow, I never realized you could have recursive examples.</p>



<a name="205121649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205121649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205121649">(Jul 27 2020 at 14:12)</a>:</h4>
<p>Oh then Lean demands a <code>using_well_founded</code>.</p>



<a name="205122298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205122298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205122298">(Jul 27 2020 at 14:18)</a>:</h4>
<p>Pr'd as <a href="https://github.com/leanprover-community/mathlib/issues/3584">#3584</a></p>



<a name="205124416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205124416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205124416">(Jul 27 2020 at 14:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"></span>
<span class="cm">failed to prove recursive application is decreasing, well founded relation</span>
<span class="cm">  @has_well_founded.r (Σ&#39; (a : α), list α)</span>
<span class="cm">    (@psigma.has_well_founded α (λ (a : α), list α) (@has_well_founded_of_has_sizeof α (default_has_sizeof α))</span>
<span class="cm">       (λ (a : α), @has_well_founded_of_has_sizeof (list α) (@list.has_sizeof α (default_has_sizeof α))))</span>
<span class="cm">The nested exception contains the failure state for the decreasing tactic.</span>
<span class="cm">nested exception message:</span>
<span class="cm">invalid apply tactic, failed to unify</span>
<span class="cm">  0 &lt; 0</span>
<span class="cm">with</span>
<span class="cm">  ?m_1 &lt; ?m_1 + ?m_2</span>
<span class="cm">state:</span>
<span class="cm">α : Type u,</span>
<span class="cm">cons_ne_self : ∀ (_p : Σ&#39; (a : α), list α), _p.fst :: _p.snd ≠ _p.snd,</span>
<span class="cm">a h : α,</span>
<span class="cm">t : list α,</span>
<span class="cm">a : α,</span>
<span class="cm">l : list α</span>
<span class="cm">⊢ 0 &lt; 0</span>
<span class="cm">-/</span>
<span class="kn">lemma</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">l</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">nil</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="n">a</span> <span class="o">(</span><span class="n">cons</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cons_ne_self</span><span class="o">]</span>
<span class="n">using_well_founded</span> <span class="o">{</span>
  <span class="n">dec_tac</span> <span class="o">:=</span> <span class="n">well_founded_tactics</span><span class="bp">.</span><span class="n">default_dec_tac</span>
<span class="o">}</span>
</code></pre></div>



<a name="205124446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205124446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205124446">(Jul 27 2020 at 14:34)</a>:</h4>
<p>Why would this lead to <code>0 &lt; 0</code>?</p>



<a name="205124742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205124742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205124742">(Jul 27 2020 at 14:37)</a>:</h4>
<p><code>simp</code> probably just used the lemma to prove itself directly, and then obviously wasn't able to prove that the call was on something smaller</p>



<a name="205124815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205124815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205124815">(Jul 27 2020 at 14:37)</a>:</h4>
<p>This is a common annoyance when using "apply anything" tactics in conjunction with the equation compiler.</p>



<a name="205125099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205125099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205125099">(Jul 27 2020 at 14:39)</a>:</h4>
<p>try <code>simp [cons_ne_self h t]</code></p>



<a name="205125617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205125617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205125617">(Jul 27 2020 at 14:43)</a>:</h4>
<p>Beautiful, it works!</p>
<p>(Lean is right to complain, without the proper hint (i.e. <code>h t</code>), this is really not "decreasing")</p>



<a name="205129713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205129713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205129713">(Jul 27 2020 at 15:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l/near/205116158">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span> <span class="bp">≠</span> <span class="n">l</span> <span class="o">:=</span>
<span class="n">mt</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">list</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="err">$</span> <span class="n">ne_of_gt</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_self</span> <span class="bp">_</span>
</code></pre></div>


</blockquote>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">cons_ne_self</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span> <span class="n">a</span> <span class="n">l</span> <span class="bp">≠</span> <span class="n">l</span> <span class="o">:=</span>
<span class="n">mt</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">list</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ_ne_self</span> <span class="bp">_</span><span class="o">)</span>
</code></pre></div>


<p>is better than that proof, if we really want the proof to depend on <code>list.length</code></p>



<a name="205130706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205130706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205130706">(Jul 27 2020 at 15:19)</a>:</h4>
<p>list and nat are two faces of the same coin</p>



<a name="205130707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205130707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205130707">(Jul 27 2020 at 15:19)</a>:</h4>
<p>such a basic theorem probably should not depend on length or nat</p>



<a name="205130879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205130879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205130879">(Jul 27 2020 at 15:20)</a>:</h4>
<p>I don't see why, this is what libraries are for - you don't have to prove everything from the axioms</p>



<a name="205131106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205131106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205131106">(Jul 27 2020 at 15:22)</a>:</h4>
<p>Turns out I'm wrong anyway, <code>list.length</code> is defined within <code>lean</code> itself, not within mathlib where our lemmas are</p>



<a name="205131167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205131167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205131167">(Jul 27 2020 at 15:22)</a>:</h4>
<p>I like the proof in another context because it's the most intuitive proof for me.</p>



<a name="205131237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205131237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205131237">(Jul 27 2020 at 15:23)</a>:</h4>
<p>Not so sure in the library itself though</p>



<a name="205131254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205131254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205131254">(Jul 27 2020 at 15:23)</a>:</h4>
<p>In isolation, sure</p>



<a name="205131381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205131381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205131381">(Jul 27 2020 at 15:24)</a>:</h4>
<p>but when it comes to minimizing the sum of the sizes of all proofs through reordering, this looks like an improvement</p>



<a name="205156537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%28list.cons%20a%20l%29%20%E2%89%A0%20l/near/205156537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/(list.2Econs.20a.20l).20.E2.89.A0.20l.html#205156537">(Jul 27 2020 at 19:11)</a>:</h4>
<p>Note my claim about reordering in the PR was actually wrong anyway.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>