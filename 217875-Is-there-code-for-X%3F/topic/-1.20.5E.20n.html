---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html">-1 ^ n</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="266087085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087085">(Dec 26 2021 at 02:37)</a>:</h4>
<p>Is this function defined anywhere in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.int.parity</span>
<span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">even</span> <span class="n">n</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="bp">-</span><span class="mi">1</span>
</code></pre></div>



<a name="266087368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087368">(Dec 26 2021 at 02:47)</a>:</h4>
<p>Does <code>(-1)^(n % 2)</code> work? Does <code>a % b</code> even exist?</p>



<a name="266087435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087435">(Dec 26 2021 at 02:49)</a>:</h4>
<p>Is the <code>if .. then .. else ..</code> form any better than just <code>(-1)^n</code>?</p>



<a name="266087439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087439">(Dec 26 2021 at 02:49)</a>:</h4>
<p>There doesn't seem to be a general <code>has_pow ℤ ℤ</code> since zero breaks things.<br>
Or is there a type of nonzero integers?</p>



<a name="266087442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087442">(Dec 26 2021 at 02:50)</a>:</h4>
<p>hmm it doesn't have the support I thought; for <code>\N</code> you could easily swap between them both with <a href="https://leanprover-community.github.io/mathlib_docs/find/pow_eq_mod_order_of">docs#pow_eq_mod_order_of</a></p>



<a name="266087486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087486">(Dec 26 2021 at 02:50)</a>:</h4>
<p>Well, that would be has pow with Nat exponents.</p>



<a name="266087488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087488">(Dec 26 2021 at 02:50)</a>:</h4>
<p>you'd need Q for Z-powers?</p>



<a name="266087491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087491">(Dec 26 2021 at 02:50)</a>:</h4>
<p>If you take the remainder, that is.</p>



<a name="266087499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087499">(Dec 26 2021 at 02:51)</a>:</h4>
<p>And if you consider <code>-1</code> as a <code>unit Int</code>, then you would be able to take integer powers</p>



<a name="266087548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087548">(Dec 26 2021 at 02:52)</a>:</h4>
<p>The type of <code>%</code> seems to be <code>has_mod.mod : Π {α : Type} [self : has_mod α], α → α → α</code>, so it still gives an <code>int</code>.<br>
If there is also a proof that it is nonnegative, I might be able to cast it into a nat, but I'm not sure if it is easy to work with</p>



<a name="266087565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087565">(Dec 26 2021 at 02:54)</a>:</h4>
<p>I think the <code>unit int</code> idea may be a fruitful one</p>



<a name="266087609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087609">(Dec 26 2021 at 02:54)</a>:</h4>
<p>Yeah, you can take the power of the unit <code>-1</code>, then coerce back to an int</p>



<a name="266087713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087713">(Dec 26 2021 at 02:59)</a>:</h4>
<p>That works great. Thanks!<br>
Is this map worthy of being added to mathlib?</p>



<a name="266087761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087761">(Dec 26 2021 at 03:00)</a>:</h4>
<p>fwiw, the only few instances I can find of a similar pattern in the library:</p>
<p>(I wrote this):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">neg_one_geom_sum</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">geom_sum</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="k">if</span> <span class="n">even</span> <span class="n">n</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span> <span class="o">:=</span>
</code></pre></div>
<p>\+ it's also used in the definition of cos/sin. Meanwhile, I can't seem to find a single use of (-1)^(x : Z) anywhere</p>



<a name="266087817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/-1%20%5E%20n/near/266087817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/-1.20.5E.20n.html#266087817">(Dec 26 2021 at 03:00)</a>:</h4>
<p>I think it'd be nice to have a few lemmas; but also, tbf, <code>(-1) ^ nat_abs n</code> works; maybe it's just worth adding that as a simp lemma</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>