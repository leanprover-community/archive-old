---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html">✔ `ennreal.mul_div_mul_left`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="319214618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319214618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319214618">(Jan 03 2023 at 15:06)</a>:</h4>
<p>If you already have a proof you would like to simplify, you should show us the proof including all necessary imports.</p>



<a name="319215997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319215997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319215997">(Jan 03 2023 at 15:13)</a>:</h4>
<p>I actually gave up on the proof!</p>



<a name="319216138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319216138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319216138">(Jan 03 2023 at 15:13)</a>:</h4>
<p>Show us what you have.</p>



<a name="319216363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319216363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319216363">(Jan 03 2023 at 15:14)</a>:</h4>
<p>huh, let me dig my history then</p>



<a name="319217503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319217503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319217503">(Jan 03 2023 at 15:19)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.ennreal</span>

<span class="n">open_locale</span> <span class="n">ennreal</span>

<span class="kd">lemma</span> <span class="n">_root_.ennreal.mul_div_mul_left</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">ha'</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="bp">⊤</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">;</span> <span class="n">by_cases</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mul_zero</span><span class="o">],</span>  <span class="o">},</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mul_zero</span><span class="o">,</span> <span class="n">ennreal.zero_div</span><span class="o">],</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mul_zero</span><span class="o">,</span> <span class="n">ennreal.div_zero</span> <span class="n">hb</span><span class="o">,</span> <span class="n">ennreal.div_zero</span> <span class="o">(</span><span class="n">mul_ne_zero</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">)],</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">by_cases</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="bp">⊤;</span> <span class="n">by_cases</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="319218400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319218400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319218400">(Jan 03 2023 at 15:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.ennreal</span>

<span class="n">open_locale</span> <span class="n">ennreal</span>

<span class="kd">lemma</span> <span class="n">ennreal.mul_div_mul_left</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">ha'</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="bp">⊤</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">div_eq_mul_inv</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">ennreal.mul_inv</span> <span class="o">(</span><span class="n">or.inl</span> <span class="n">ha</span><span class="o">)</span> <span class="o">(</span><span class="n">or.inl</span> <span class="n">ha'</span><span class="o">),</span> <span class="n">mul_mul_mul_comm</span><span class="o">,</span> <span class="n">ennreal.mul_inv_cancel</span> <span class="n">ha</span> <span class="n">ha'</span><span class="o">,</span>
    <span class="n">one_mul</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="319218488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319218488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319218488">(Jan 03 2023 at 15:24)</a>:</h4>
<p>wow, neat, thanks!</p>



<a name="319218501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319218501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319218501">(Jan 03 2023 at 15:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



<a name="319219021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319219021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319219021">(Jan 03 2023 at 15:27)</a>:</h4>
<p>So, it seems the correct path is via <code>inv</code>. I never really understood the relation between <code>inv</code> and <code>div</code> in practice, and when to prefer which.</p>



<a name="319219133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319219133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319219133">(Jan 03 2023 at 15:28)</a>:</h4>
<p>I have the same gap in my understanding.</p>



<a name="319219775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319219775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319219775">(Jan 03 2023 at 15:31)</a>:</h4>
<p>I'm not sure if that is the lesson here. In this case the lemma <code>ennreal.mul_inv</code> already exists and does most of the work.<br>
Since <code>inv</code> is a simpler function, when library building I generally recommend proving lemmas first for <code>inv</code> and then for <code>div</code>. In this case, <code>ennreal.mul_div_mul_left</code> is a lemma that should be added to the library</p>



<a name="319220449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319220449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319220449">(Jan 03 2023 at 15:34)</a>:</h4>
<p>OK, I will PR it. It hasn't been ported to mathlib4 yet.</p>



<a name="319225121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319225121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319225121">(Jan 03 2023 at 15:57)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/18051">https://github.com/leanprover-community/mathlib/pull/18051</a></p>



<a name="319226788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319226788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319226788">(Jan 03 2023 at 16:04)</a>:</h4>
<p>Note that <code>nnreal</code> (as well as <code>ℝ</code>) has it already provided via <code>comm_group_with_zero</code> which takes it from <code>division_comm_monoid</code>.<br>
In all three cases, the lemma is called <code>mul_div_mul_left</code>.</p>



<a name="319227477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60ennreal.mul_div_mul_left%60/near/319227477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60ennreal.2Emul_div_mul_left.60.html#319227477">(Jan 03 2023 at 16:07)</a>:</h4>
<p>Thanks for the PR!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>