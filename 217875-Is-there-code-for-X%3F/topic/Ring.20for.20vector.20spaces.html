---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html">Ring for vector spaces</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="266631242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266631242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266631242">(Jan 02 2022 at 20:21)</a>:</h4>
<p>I use ring a lot as in</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
        <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span>
        <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>But if I try </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">:</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">10</span><span class="o">))</span>
        <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span>
        <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>ring fails. Is there a way to get ring to work for Euclidean space vectors?</p>



<a name="266631593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266631593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266631593">(Jan 02 2022 at 20:31)</a>:</h4>
<p>Does <code>abel</code>work?</p>



<a name="266631651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266631651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266631651">(Jan 02 2022 at 20:32)</a>:</h4>
<p>What ring structure would you want on the euclidean space? I doubt that instance is defined in mathlib.</p>



<a name="266631821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266631821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266631821">(Jan 02 2022 at 20:37)</a>:</h4>
<p>Maybe you just want pointwise addition/multiplication? In that case, you should use <code>fin 10 → ℝ</code>.</p>



<a name="266632399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266632399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266632399">(Jan 02 2022 at 20:52)</a>:</h4>
<p><code>abel</code> works thanks</p>



<a name="266634903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266634903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266634903">(Jan 02 2022 at 21:56)</a>:</h4>
<p>OK next question (related). How about linarith?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="bp">=</span><span class="n">z</span><span class="bp">+</span><span class="n">w</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">z</span><span class="bp">-</span><span class="n">x</span><span class="bp">=</span><span class="n">y</span><span class="bp">-</span><span class="n">w</span>
  <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span>
</code></pre></div>
<p>Works.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">10</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="bp">=</span><span class="n">z</span><span class="bp">+</span><span class="n">w</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">z</span><span class="bp">-</span><span class="n">x</span><span class="bp">=</span><span class="n">y</span><span class="bp">-</span><span class="n">w</span>
  <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span>
</code></pre></div>
<p>Fails.</p>



<a name="266634988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266634988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266634988">(Jan 02 2022 at 21:59)</a>:</h4>
<p>See a message I just wrote in <a href="#narrow/stream/113489-new-members/topic/.60ring.60.20using.20hypothesis/near/266634413">another stream</a>, replacing <code>ring</code> with <code>abel</code></p>



<a name="266635260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266635260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266635260">(Jan 02 2022 at 22:04)</a>:</h4>
<p>Essentially, figure out for yourself the coefficients <code>linarith</code> would have used:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.inner_product_space.pi_L2</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">10</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">+</span> <span class="n">w</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">z</span> <span class="bp">-</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">w</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">sub_eq_zero</span> <span class="n">at</span> <span class="n">h</span> <span class="bp">⊢</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h'</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">h'</span><span class="bp">;</span>
  <span class="n">abel</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="266635302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266635302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266635302">(Jan 02 2022 at 22:06)</a>:</h4>
<p>By the way, do you really need to be working with <code>euclidean_space</code>?  You might find you have fewer distracting details if you assume <code>{x y z w : V}</code> where</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="n">ℝ</span> <span class="n">V</span><span class="o">]</span>
</code></pre></div>



<a name="266636058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636058">(Jan 02 2022 at 22:23)</a>:</h4>
<p>That's OK but seems more low-level than I was hoping for. Does Linarith just not work unless it's basically the reals or some similar "ordered field"?</p>



<a name="266636062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636062">(Jan 02 2022 at 22:23)</a>:</h4>
<p>Also why do you need to use ";" after convert?</p>



<a name="266636127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636127">(Jan 02 2022 at 22:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="441939">Patrick Johnstone</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Ring.20for.20vector.20spaces/near/266636062">said</a>:</p>
<blockquote>
<p>Also why do you need to use ";" after convert?</p>
</blockquote>
<p>In this case you probably don't, but it makes the technique more general (it allows it to work for a system of 10 equations rather than just one).</p>



<a name="266636137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636137">(Jan 02 2022 at 22:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="441939">Patrick Johnstone</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Ring.20for.20vector.20spaces/near/266636058">said</a>:</p>
<blockquote>
<p>Does Linarith just not work unless it's basically the reals or some similar "ordered field"?</p>
</blockquote>
<p>Right, I think it's ordered commutative semirings.</p>



<a name="266636276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636276">(Jan 02 2022 at 22:28)</a>:</h4>
<p>Is the problem with <code>eucliean_space \R (fin 10)</code> for linarith that it is not "totally ordered"?</p>



<a name="266636278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636278">(Jan 02 2022 at 22:28)</a>:</h4>
<p>It sure isn't!</p>



<a name="266636416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnstone <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636416">(Jan 02 2022 at 22:32)</a>:</h4>
<p>Ok and there isn't a linarith for equalities only? That doesn't need the commutative semiring to be ordered? That would seem to simplify things only trying to prove equalities.</p>



<a name="266636450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Ring%20for%20vector%20spaces/near/266636450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Ring.20for.20vector.20spaces.html#266636450">(Jan 02 2022 at 22:33)</a>:</h4>
<p>Please read the thread I linked above.  Basically you're asking a for a "Grobner basis tactic", which doesn't exist currently in Lean, but which you can approximate by providing the coefficients yourself -- I indicated an efficient syntax for doing this.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>