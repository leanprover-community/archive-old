---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html">p divides x-x^p</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="211381968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211381968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211381968">(Sep 26 2020 at 20:45)</a>:</h4>
<p>Does mathlib have the following example?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>
<span class="kn">open</span> <span class="n">nat</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">primes</span><span class="o">)</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">^</span><span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="211382346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211382346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211382346">(Sep 26 2020 at 20:55)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.pow_card">docs#zmod.pow_card</a> ?</p>



<a name="211382467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211382467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211382467">(Sep 26 2020 at 20:58)</a>:</h4>
<p>Yeah the proof would follow easily from this and the fact that zmod p is the quotient of Z by the ideal generated by p, and the fact that the equivalence relation for a principal ideal is given by divisibility of the difference by the generator of the ideal. All of these things are presumably in mathlib, and I was hoping someone put them together into such a lemma.</p>



<a name="211382881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211382881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211382881">(Sep 26 2020 at 21:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.finite</span>
<span class="kn">open</span> <span class="n">nat</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">primes</span><span class="o">)</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">^</span><span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">int.modeq.modeq_iff_dvd</span><span class="o">],</span>
  <span class="k">show</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">≡</span> <span class="n">x</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">zmod.int_coe_eq_int_coe_iff</span><span class="o">],</span>
  <span class="n">exact_mod_cast</span> <span class="n">zmod.pow_card</span> <span class="n">x</span><span class="o">,</span> <span class="n">exact</span> <span class="n">p.2</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211384316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211384316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211384316">(Sep 26 2020 at 21:55)</a>:</h4>
<p>Nice! I wonder if it makes sense to add an <code>elementary_number_theory</code> file/folder for small facts like this?</p>



<a name="211384624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211384624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211384624">(Sep 26 2020 at 22:04)</a>:</h4>
<p>That might be good. <br>
However, I'm not sure what the "normal form" of these lemmas should be. If you formulate the lemma slightly differently, the proof becomes a little shorter:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.finite</span>
<span class="kn">open</span> <span class="n">nat</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="n">p.prime</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">int.modeq.modeq_iff_dvd</span><span class="o">,</span> <span class="bp">←</span> <span class="n">zmod.int_coe_eq_int_coe_iff</span><span class="o">],</span> <span class="n">exact_mod_cast</span> <span class="bp">@</span><span class="n">zmod.pow_card</span> <span class="n">p</span> <span class="n">_</span> <span class="n">x</span> <span class="o">}</span>
</code></pre></div>

<p>(yes, it's mostly shorter because I put everything on 1 line, but there is also 1-2 fewer steps)</p>



<a name="211384705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211384705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211384705">(Sep 26 2020 at 22:07)</a>:</h4>
<p>I still don't know what is mathlib's preferred way to speak about primes. It seems the <code>[fact p.prime]</code> is more common than using the type <code>primes</code></p>



<a name="211384950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211384950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211384950">(Sep 26 2020 at 22:14)</a>:</h4>
<p>I have not done much with primes in mathlib, so I also don't know. A general strategy is to follow the conventions of the lemmas you're using (or the majority of the lemmas, if mathlib is not consistent itself). That also makes them easier to apply.</p>



<a name="211385975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/p%20divides%20x-x%5Ep/near/211385975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/p.20divides.20x-x.5Ep.html#211385975">(Sep 26 2020 at 22:45)</a>:</h4>
<p>The divisibility/zmod/ZMOD stuff seems more difficult than it has to be whenever I have to use it, though that could just be wishful thinking.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>