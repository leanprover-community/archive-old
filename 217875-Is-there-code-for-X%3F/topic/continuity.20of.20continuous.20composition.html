---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html">continuity of continuous composition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="287987181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287987181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287987181">(Jun 30 2022 at 07:37)</a>:</h4>
<p>Hi everyone,</p>
<p>I'm trying to write a term  like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span><span class="n">Y</span><span class="o">)</span> <span class="o">,</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">Y</span><span class="o">,</span><span class="n">Z</span><span class="o">),</span>  <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Z</span><span class="o">)))</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span>  <span class="n">g.comp</span> <span class="n">f</span><span class="o">,</span> <span class="kd">by</span> <span class="gr">sorry</span><span class="o">⟩</span>
</code></pre></div>
<p>How do I show the continuity of <a href="https://leanprover-community.github.io/mathlib_docs/topology/continuous_function/basic.html#continuous_map.comp"><code>continuous_map.comp</code></a>?</p>



<a name="287989440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287989440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287989440">(Jun 30 2022 at 08:01)</a>:</h4>
<p>What's the topology on C(X,Y)? Is it the compact open topology? Do you know the maths proof of what you want?</p>



<a name="287989882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287989882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287989882">(Jun 30 2022 at 08:06)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.continuous_comp">docs#continuous_map.continuous_comp</a>, maybe? I think that only helps with continuity in one argument though.</p>



<a name="287990397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287990397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287990397">(Jun 30 2022 at 08:12)</a>:</h4>
<p>I suggested using the compact-open topology to define the group structure on homotopy groups, but I thought  <a href="https://leanprover-community.github.io/mathlib_docs/find/homeomorph.curry">docs#homeomorph.curry</a> would be enough (not even the homeomorphism, just the equiv). I'm surprised to learn <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.continuous_comp">docs#continuous_map.continuous_comp</a> holds unconditionally!</p>



<a name="287990667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287990667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287990667">(Jun 30 2022 at 08:14)</a>:</h4>
<p>Note that as written I don't think <code>⟨λ f g,  g.comp f, by sorry⟩</code> is even correctly typed, it needs to be more like <code>⟨λ f, ⟨λ g, g.comp f, sorry⟩, sorry⟩</code> as you have two continuity obligations</p>



<a name="287990700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287990700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287990700">(Jun 30 2022 at 08:15)</a>:</h4>
<blockquote>
<p>What's the topology on C(X,Y)? </p>
</blockquote>
<p>It is indeed the compact open topology,</p>



<a name="287990963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287990963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287990963">(Jun 30 2022 at 08:17)</a>:</h4>
<blockquote>
<p>I don't think ⟨λ f g,  g.comp f, by sorry⟩ is even correctly typed</p>
</blockquote>
<p>You're correct, what I actually need is like <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.continuous_comp">docs#continuous_map.continuous_comp</a> but for each argument<br>
I might be able to write the other proof from the source.</p>



<a name="287994619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287994619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287994619">(Jun 30 2022 at 08:50)</a>:</h4>
<p>Looking quickly, it looks like you've identified a small gap in the library. For the sake of giving a MWE, I'll post:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Z</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span><span class="n">Y</span><span class="o">)</span> <span class="o">,</span> <span class="n">C</span><span class="o">(</span><span class="n">C</span><span class="o">(</span><span class="n">Y</span><span class="o">,</span><span class="n">Z</span><span class="o">),</span>  <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Z</span><span class="o">)))</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="n">g.comp</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">continuous_to_fun</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="o">{</span> <span class="c1">-- Functorality of `C(-, Z)`: looks like it's missing.</span>
      <span class="gr">sorry</span><span class="o">,</span> <span class="o">},</span> <span class="o">},</span>
  <span class="n">continuous_to_fun</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="o">}</span>
</code></pre></div>



<a name="287994807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287994807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287994807">(Jun 30 2022 at 08:52)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map.compL">docs#continuous_linear_map.compL</a> looks relevant, but is obviously linear too, which you didn't ask for</p>



<a name="287994911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287994911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287994911">(Jun 30 2022 at 08:53)</a>:</h4>
<p>Good point. Mathematically this should be a special case of the gap (maybe modulo linear maps being a closed subset of continuous maps).</p>



<a name="287995429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287995429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287995429">(Jun 30 2022 at 08:58)</a>:</h4>
<p>Oh wait, <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map.compL">docs#continuous_linear_map.compL</a> is the <em>covariant</em> functor analogous to <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.comp">docs#continuous_map.comp</a> (which we have).</p>



<a name="287995493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287995493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287995493">(Jun 30 2022 at 08:58)</a>:</h4>
<blockquote>
<p>it looks like you've identified a small gap in the library</p>
</blockquote>
<p>I have the version of the continuity argument I need now, should this be in the library?</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>code</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">section</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">γ</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">α</span><span class="o">,</span> <span class="n">β</span><span class="o">))</span>

<span class="kn">private</span> <span class="kd">lemma</span> <span class="n">preimage_gen</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="n">set</span> <span class="n">γ</span><span class="o">}</span> <span class="o">(</span><span class="n">hu</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">β</span><span class="o">,</span> <span class="n">γ</span><span class="o">)),</span> <span class="n">g.comp</span> <span class="n">f</span><span class="o">)</span> <span class="bp">⁻¹'</span> <span class="o">(</span><span class="n">continuous_map.compact_open.gen</span> <span class="n">s</span> <span class="n">u</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">continuous_map.compact_open.gen</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span> <span class="n">unfold</span> <span class="n">continuous_map.compact_open.gen</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.image_subset_iff</span><span class="o">,</span> <span class="n">set.preimage_set_of_eq</span><span class="o">,</span> <span class="n">continuous_map.coe_comp</span><span class="o">,</span>
    <span class="n">set.mem_set_of_eq</span><span class="o">,</span> <span class="n">continuous_map.coe_mk</span><span class="o">],</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">set.preimage_comp</span><span class="o">,</span>
<span class="kd">end</span>

<span class="sd">/-- C(-, γ) is a functor. -/</span>
<span class="kd">lemma</span> <span class="n">continuous_comp'</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="n">g.comp</span> <span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">β</span><span class="o">,</span> <span class="n">γ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">C</span><span class="o">(</span><span class="n">α</span><span class="o">,</span> <span class="n">γ</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">continuous_generated_from</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">m</span> <span class="o">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">u</span><span class="o">,</span> <span class="n">hu</span><span class="o">,</span> <span class="n">hm</span><span class="o">⟩,</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hm</span><span class="o">,</span> <span class="n">preimage_gen</span> <span class="n">f</span> <span class="n">hs</span> <span class="n">hu</span><span class="o">],</span> <span class="n">exact</span> <span class="n">continuous_map.is_open_gen</span> <span class="o">(</span><span class="n">hs.image</span> <span class="n">f.2</span><span class="o">)</span> <span class="n">hu</span> <span class="o">}</span>

<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="287995564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287995564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287995564">(Jun 30 2022 at 08:59)</a>:</h4>
<p>Awesome, I'm afraid I have to run to a meeting now but I expect yes: this would be a great addition!</p>



<a name="287995634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287995634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287995634">(Jun 30 2022 at 09:00)</a>:</h4>
<p>(Disclaimer: I've only really glanced at this thread.)</p>



<a name="287999987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/287999987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#287999987">(Jun 30 2022 at 09:37)</a>:</h4>
<p>I've opened a <a href="https://github.com/leanprover-community/mathlib/pull/15068">PR</a>, the proofs need golfing</p>



<a name="288001290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288001290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288001290">(Jun 30 2022 at 09:48)</a>:</h4>
<p>Thanks!</p>



<a name="288002920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288002920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288002920">(Jun 30 2022 at 10:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="455547">Roberto Alvarez</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/287987181">said</a>:</p>
<blockquote>
<p>Hi everyone,</p>
<p>I'm trying to write a term  like</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span><span class="n">Y</span><span class="o">)</span> <span class="o">,</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">Y</span><span class="o">,</span><span class="n">Z</span><span class="o">),</span>  <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Z</span><span class="o">)))</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span>  <span class="n">g.comp</span> <span class="n">f</span><span class="o">,</span> <span class="kd">by</span> <span class="gr">sorry</span><span class="o">⟩</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Is this true in general? I thought you would need at least one of the spaces to be locally compact</p>



<a name="288002952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288002952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288002952">(Jun 30 2022 at 10:00)</a>:</h4>
<p>I was wondering the same thing!</p>



<a name="288003523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288003523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288003523">(Jun 30 2022 at 10:06)</a>:</h4>
<p>oh I guess I was uncurrying it in my head, I don't know about this version.</p>



<a name="288008649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288008649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288008649">(Jun 30 2022 at 10:53)</a>:</h4>
<p>Oh I guess it’s easy to see that we don’t need finite-dimensionality in the continuous linear case so presumably we don’t need locally compact in the continuous case.</p>



<a name="288023074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288023074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288023074">(Jun 30 2022 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/288002952">said</a>:</p>
<blockquote>
<p>I was wondering the same thing!</p>
</blockquote>
<p>Yes me too, that was why I explicitly asked the OP if they had a math proof.</p>



<a name="288241975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/288241975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#288241975">(Jul 02 2022 at 02:15)</a>:</h4>
<p>This <a href="https://math.stackexchange.com/a/3005770/12932">StackExchange answer</a> shows that there is such a term of type <code>C(C(X,Y) × C(Y,Z), C(X,Z))</code> assuming just <code>locally_compact_space Y</code> (it's an exercise on Munkres). Once we have this, we also get <code>C(C(X,Y), C(C(Y,Z), C(X,Z)))</code> and <code>C(C(Y,Z), C(C(X,Y), C(X,Z)))</code> unconditionally using <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.curry">docs#continuous_map.curry</a>.</p>
<p>(The answer has a Hausdorff assumption on Y but a comment shows the Hausdorff assumption is unnecessary, if we take "locally compact" to mean that every neighborhood of a point contains a compact neighborhood of the point, as is the case in mathlib. If we take the Wikipedia definition (every point has a compact neighborhood), <a href="https://en.wikipedia.org/wiki/Compact-open_topology#Properties">Wikipedia says</a> we need at least preregularity (weaker than Hausdorff and doesn't seem to exist in mathlib). There is also a more general notion of <a href="https://ncatlab.org/toddtrimble/published/core-compact+spaces+are+exponentiable">core-compactness</a> that I can't find in mathlib.)</p>
<p>As for whether <code>C(C(X,Y), C(C(Y,Z), C(X,Z)))</code> and <code>C(C(Y,Z), C(C(X,Y), C(X,Z)))</code> could be constructed under other conditions, I am convinced that <code>C(C(Y,Z), C(C(X,Y), C(X,Z)))</code> can be constructed assuming <code>t2_space X</code> and <code>locally_compact_space X</code>. <code>t2_space</code> is for the following to work: "If X is Hausdorff and S is a subbase for Y (i.e. the topology on Y is <code>generate_from S</code>), then the collection {V(K, U) : U ∈ S, K compact} is a subbase for the compact-open topology on C(X, Y)." (cf. Wikipedia link above) (<strong>Update</strong>: upon seeing the proof,  the mathlib <code>locally_compact_space</code> is also sufficient for this subbase condition to hold.) and <code>locally_compact_space</code> is for the evaluation <code>C(X,Y) × X → Y</code> to be continuous. I am unable to find a weaker or alternative condition for the original question of constructing <code>C(C(X,Y), C(C(Y,Z), C(X,Z)))</code>.</p>



<a name="290790283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290790283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290790283">(Jul 25 2022 at 17:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/287990397">said</a>:</p>
<blockquote>
<p>I suggested using the compact-open topology to define the group structure on homotopy groups, but I thought  <a href="https://leanprover-community.github.io/mathlib_docs/find/homeomorph.curry">docs#homeomorph.curry</a> would be enough (not even the homeomorphism, just the equiv). I'm surprised to learn <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.continuous_comp">docs#continuous_map.continuous_comp</a> holds unconditionally!</p>
</blockquote>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span>  Are you making progress in the direction of defining this group structure on the homotopy groups? Because as part of a project for the Lean for Curious Mathematicians, with <span class="user-mention" data-user-id="513671">@Ángel González Prieto</span>  and <span class="user-mention" data-user-id="513540">@Flo (Florent Schaffhauser)</span>  we are working on something similar, and I would like to avoid overlapping.</p>



<a name="290790958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290790958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290790958">(Jul 25 2022 at 17:17)</a>:</h4>
<p>More generally, is there any progress towards constructing this proof? What I have in mind is Bourbaki's <em>Topologie Générale</em> Chap. X, n. 4, Prop 9 saying that given topological spaces <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X,Y,Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span> locally compact, the composition map</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>×</mo><mi>C</mi><mo stretchy="false">(</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo><mo>⟶</mo><mi>C</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C(X,Y) \times C(Y,Z)\longrightarrow C(X,Z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟶</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span></span></p>
<p>is continuous. What we have so far in <a href="https://github.com/leanprover-community/mathlib/pull/15068">#15068</a> is continuity in the second variable for a given <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>C</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f : C(X,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span> (and this without the loc. compact assumption on Y).</p>



<a name="290791017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791017">(Jul 25 2022 at 17:18)</a>:</h4>
<p>I am happy to open a PR if nobody is working on it.</p>



<a name="290791110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791110">(Jul 25 2022 at 17:19)</a>:</h4>
<p>I only came up with the idea and <span class="user-mention" data-user-id="455547">@Roberto Alvarez</span> is the one who's actually working on it. <a href="https://github.com/leanprover-community/mathlib/pull/14724">#14724</a> was recently merged, giving the underlying type of the homotopy groups but not the group structure. It seems he's making some progress but <a href="https://github.com/leanprover-community/mathlib/search?q=author%3Aralvrz+is%3Apr&amp;type=issues">no PR was opened in the last 20 days</a>.</p>



<a name="290791315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791315">(Jul 25 2022 at 17:21)</a>:</h4>
<p>In particular, I have not constructed the term of type <code>C(C(X,Y) × C(Y,Z), C(X,Z))</code> in Lean, but I don't know about <span class="user-mention" data-user-id="455547">@Roberto Alvarez</span>. Do you need it for homotopy groups?</p>



<a name="290791462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791462">(Jul 25 2022 at 17:22)</a>:</h4>
<p>No, I need it for the proof that the path space is a H-space (so I need multiplication=composition of paths is continuous). I wrote a full proof but have sorried this statement, and now I am wondering what to do.</p>



<a name="290791567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791567">(Jul 25 2022 at 17:23)</a>:</h4>
<p>Opening a PR with the definition and basic properties of H-spaces might be a first step, and then once we will have the above <em>Bourbaki</em> statement we can add the fact that the path space is an example of an H-space.</p>



<a name="290791753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791753">(Jul 25 2022 at 17:24)</a>:</h4>
<p>I can also simply prove it myself and then add it to the first PR, I simply wanted to avoid overlapping. I might wait a bit to see if <span class="user-mention" data-user-id="455547">@Roberto Alvarez</span> has news.</p>



<a name="290791793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290791793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290791793">(Jul 25 2022 at 17:25)</a>:</h4>
<p>Thanks for the update, at any rate.</p>



<a name="290821888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290821888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290821888">(Jul 25 2022 at 21:38)</a>:</h4>
<p>Hi!, I have the group instance and  I've recently shown commutativity (I haven't PR it because I was working on making the proofs more legible, the proof of commutativity itself is almost 40 loc).<br>
I will open a PR as it is now to make public the intermediate steps I made.</p>



<a name="290822687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290822687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290822687">(Jul 25 2022 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/290791315">said</a>:</p>
<blockquote>
<p>In particular, I have not constructed the term of type <code>C(C(X,Y) × C(Y,Z), C(X,Z))</code> in Lean, but I don't know about <span class="user-mention silent" data-user-id="455547">Roberto Alvarez</span>. Do you need it for homotopy groups?</p>
</blockquote>
<p>In addition to the definition here <a href="https://github.com/leanprover-community/mathlib/pull/15068">#15068</a> I also needed some specifics, e.g. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Composition with insert as a continuous map.-/</span>
<span class="kd">abbreviation</span> <span class="n">c_comp_insert</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">I</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>  <span class="n">X</span> <span class="o">),</span> <span class="n">C</span><span class="o">(</span> <span class="n">I</span><span class="bp">×</span><span class="n">I</span><span class="bp">^</span><span class="n">n</span><span class="o">,</span>  <span class="n">X</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f.comp</span> <span class="o">(</span><span class="n">cube.insert</span> <span class="n">i</span><span class="o">),</span> <span class="o">(</span><span class="n">cube.insert</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">continuous_comp_left</span><span class="o">⟩</span>
</code></pre></div>
<p>which might be a corollary.</p>



<a name="290823765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290823765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290823765">(Jul 25 2022 at 21:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300245">Filippo A. E. Nuccio</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/290790958">said</a>:</p>
<blockquote>
<p>More generally, is there any progress towards constructing this proof?</p>
</blockquote>
<p>I gave an equivalence to paths for each component so that the group structure is easily shown from what is already defined on transitivity of paths. The additional operation needed to define commutativity is also easy to define, and the proof  uses <a href="https://leanprover-community.github.io/mathlib_docs/group_theory/eckmann_hilton.html#eckmann_hilton.comm_group">eckmann_hilton.comm_group</a> by which I only need to show distributivity.</p>



<a name="290827197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290827197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290827197">(Jul 25 2022 at 22:29)</a>:</h4>
<p>The PR with the <code>group</code> and <code>comm_group</code> instances is open: <a href="https://github.com/leanprover-community/mathlib/pull/15681">#15681</a></p>



<a name="290884287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290884287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290884287">(Jul 26 2022 at 12:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="455547">Roberto Alvarez</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/290822687">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/290791315">said</a>:</p>
<blockquote>
<p>In particular, I have not constructed the term of type <code>C(C(X,Y) × C(Y,Z), C(X,Z))</code> in Lean, but I don't know about <span class="user-mention silent" data-user-id="455547">Roberto Alvarez</span>. Do you need it for homotopy groups?</p>
</blockquote>
<p>In addition to the definition here <a href="https://github.com/leanprover-community/mathlib/pull/15068">#15068</a> I also needed some specifics, e.g. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Composition with insert as a continuous map.-/</span>
<span class="kd">abbreviation</span> <span class="n">c_comp_insert</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span> <span class="n">C</span><span class="o">(</span><span class="n">I</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>  <span class="n">X</span> <span class="o">),</span> <span class="n">C</span><span class="o">(</span> <span class="n">I</span><span class="bp">×</span><span class="n">I</span><span class="bp">^</span><span class="n">n</span><span class="o">,</span>  <span class="n">X</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f.comp</span> <span class="o">(</span><span class="n">cube.insert</span> <span class="n">i</span><span class="o">),</span> <span class="o">(</span><span class="n">cube.insert</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">continuous_comp_left</span><span class="o">⟩</span>
</code></pre></div>
<p>which might be a corollary.</p>
</blockquote>
<p>Yes, I agree this might be a corollary. I hope to PR a construction of the term by tonight, and I will update you if this gets merged. Thanks for the update and congratulations for your work!</p>



<a name="290934811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290934811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290934811">(Jul 26 2022 at 18:16)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="455547">@Roberto Alvarez</span>, congratulations and thanks for your amazing work! I have reviewed the code and was able to make some simplifications and golf many proofs <a href="https://github.com/leanprover-community/mathlib/compare/pi_n...pi_n_unordered?expand=1">in this branch</a>.</p>
<p>The main thing that was unnecessarily complicated is about inserting a coordinate into a point in the n-cube to get a point in the (n+1)-cube, and you need to take care of the order of the inserted coordinate relative to other coordinates. However, this really has nothing to do with the order, and works for arbitrary (possibly infinite) unordered type, and you can simply use <code>{j : fin (n+1) // j ≠ i}</code> instead of <code>fin n</code> as the indexing type, once the definition of <code>cube</code> is generalized to allow an arbitrary type in place of <code>fin n</code>. The insertion-extraction homeomorph is now called <code>merge_split</code> in my code. (To be cleaned up: docstrings that refers to <code>n</code> remain unchanged; some <code>insert/contract</code> lemmas haven't been renamed.)</p>
<p>The second thing is that I defined</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">homotopy_group_equiv_fundamental_group</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">N</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">homotopy_group</span> <span class="n">N</span> <span class="n">x</span> <span class="bp">≃</span> <span class="n">fundamental_group</span> <span class="o">(</span><span class="n">gen_loop</span> <span class="o">{</span><span class="n">j</span> <span class="bp">//</span> <span class="n">j</span> <span class="bp">≠</span> <span class="n">i</span><span class="o">}</span> <span class="n">x</span><span class="o">)</span> <span class="n">gen_loop.const</span>
</code></pre></div>
<p>and use it to transfer the group instance from the RHS to the LHS. I'm not sure the definitions <code>concat</code>, <code>reverse</code> etc. are still necessary, as they are almost defeq with the transferred instance:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">concat_eq</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">π_</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">concat</span> <span class="mi">0</span> <span class="n">q</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">q</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rcases</span> <span class="n">p</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">q</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
</code></pre></div>
<p>The switched order of <code>p</code> and <code>q</code> is due to the <a href="https://github.com/leanprover-community/mathlib/blob/8edffc250c25db5a7bada5472dd02a166f7f8bfc/src/category_theory/endomorphism.lean#L112">definition</a> of <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.Aut.group">docs#category_theory.Aut.group</a>. I have no idea why people decided to insert the <code>flip</code>! In any case our definition should agree with fundamental_group.</p>



<a name="290935727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290935727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290935727">(Jul 26 2022 at 18:22)</a>:</h4>
<p>Another to-do is to make an add_comm_group instance on <code>π_(n+2) x</code>; <a href="https://leanprover-community.github.io/mathlib_docs/find/additive">docs#additive</a> should work but it might be possible to avoid it.</p>



<a name="290962408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290962408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290962408">(Jul 26 2022 at 22:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/continuity.20of.20continuous.20composition/near/290934811">said</a>:</p>
<blockquote>
<p>I have reviewed the code and was able to make some simplifications and golf many proofs <a href="https://github.com/leanprover-community/mathlib/compare/pi_n...pi_n_unordered?expand=1">in this branch</a>.</p>
</blockquote>
<p>Excellent! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> I'll be merging the changes shortly, thanks a lot!</p>



<a name="290983967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290983967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290983967">(Jul 27 2022 at 03:38)</a>:</h4>
<p><span class="user-mention" data-user-id="455547">@Roberto Alvarez</span>  Glad to hear that! I have now supplied the proof that an arbitrary product of compact, locally compact spaces is locally compact. I also added many comments about which file each definition should go into, and I'd appreciate everyone's help to PR those into mathlib.</p>



<a name="290996208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/290996208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Roberto Alvarez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#290996208">(Jul 27 2022 at 07:00)</a>:</h4>
<p>I've PR'd two of your suggestions; <a href="https://github.com/leanprover-community/mathlib/pull/15707">#15707</a> and <a href="https://github.com/leanprover-community/mathlib/pull/15708">#15708</a></p>



<a name="291100374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/291100374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#291100374">(Jul 27 2022 at 19:42)</a>:</h4>
<p>I've created <a href="https://github.com/leanprover-community/mathlib/pull/15721">#15721</a> with the proof that when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span> is locally compact, the composition induces a continuous map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>×</mo><mi>C</mi><mo stretchy="false">(</mo><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo><mo>→</mo><mi>C</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C(X,Y) \times C(Y,Z)\rightarrow C(X,Z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mclose">)</span></span></span></span>.</p>



<a name="291161266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/291161266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#291161266">(Jul 28 2022 at 09:46)</a>:</h4>
<p>Thanks to <span class="user-mention" data-user-id="224323">@Junyan Xu</span>  for very useful comments and improvements to the PR!</p>



<a name="293099267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuity%20of%20continuous%20composition/near/293099267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuity.20of.20continuous.20composition.html#293099267">(Aug 12 2022 at 12:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/16029">#16029</a> contains the definition of H-space and the proof that the path space is an H-space but it is blocked by <a href="https://github.com/leanprover-community/mathlib/pull/15721">#15721</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>