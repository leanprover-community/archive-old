---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html">Splitting a  finset.sum over an involutive function</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="218159067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159067">(Nov 28 2020 at 10:56)</a>:</h4>
<p>If I have an involutive function <code>f : A -&gt; A</code> where there is no <code>a</code> st <code>f a = a</code>, then I can argue that  <code>sum a \in finset.univ A, g a</code> can be rewritten into <code>sum a \in half_of_univ, g a + g (f a)</code>. How would I begin to formalize this?</p>



<a name="218159536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159536">(Nov 28 2020 at 11:09)</a>:</h4>
<p>I ran into this problem in 2018 and I think there ended up being a lemma in mathlib which could help.</p>



<a name="218159618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159618">(Nov 28 2020 at 11:11)</a>:</h4>
<p>I'm thinking of <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.prod_involution">docs#finset.prod_involution</a> which probably isn't much help for you. It's related, but probably not enough.</p>



<a name="218159721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159721">(Nov 28 2020 at 11:15)</a>:</h4>
<p>Now that I have vs code to hand to type stuff, I think an auxiliary lemma that would be enough is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">function.involutive</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hf'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∪</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∩</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="218159727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159727">(Nov 28 2020 at 11:15)</a>:</h4>
<p>As a mathematician my immediate instinct would be to be summing over equivalence classes. <code>half_of_univ</code> could be the noncomputable <code>out</code> or whatever it's called. You'll have to do something to choose the x.</p>



<a name="218159777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159777">(Nov 28 2020 at 11:16)</a>:</h4>
<p>Right, that set is the image of the noncomputable injection that you get from the surjection from alpha to alpha/~</p>



<a name="218159796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159796">(Nov 28 2020 at 11:17)</a>:</h4>
<p>the noncomputable injection gives you an isomorphism alpha = q x bool where q is the quotient.</p>



<a name="218159835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159835">(Nov 28 2020 at 11:18)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_involution">docs#finset.sum_involution</a>  looks like it has everything I need</p>



<a name="218159840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159840">(Nov 28 2020 at 11:18)</a>:</h4>
<p>the definition of the equivalence associated to an involution is in TPIL near the end</p>



<a name="218159853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159853">(Nov 28 2020 at 11:19)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/search.html?q=involution">https://leanprover.github.io/theorem_proving_in_lean/search.html?q=involution</a> gives nothing</p>



<a name="218159861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159861">(Nov 28 2020 at 11:19)</a>:</h4>
<p>it's in the bit about quotients at the very end</p>



<a name="218159918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218159918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218159918">(Nov 28 2020 at 11:20)</a>:</h4>
<p>oh I misremembered, it's making unordered pairs from ordered pairs. Section 11.4.</p>



<a name="218160224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Splitting%20a%20%20finset.sum%20over%20an%20involutive%20function/near/218160224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Splitting.20a.20.20finset.2Esum.20over.20an.20involutive.20function.html#218160224">(Nov 28 2020 at 11:30)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_cancels_of_partition_cancels">docs#finset.sum_cancels_of_partition_cancels</a> is also close to what I want</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>