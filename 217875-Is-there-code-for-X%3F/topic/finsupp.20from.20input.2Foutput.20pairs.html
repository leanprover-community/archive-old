---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html">finsupp from input/output pairs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288990545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288990545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288990545">(Jul 08 2022 at 20:40)</a>:</h4>
<p>Do we happen to have code for the obvious map from <code>list (α × β)</code> to <code>α →₀ β</code>? I need it in a certain cardinality proof</p>



<a name="288990764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288990764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288990764">(Jul 08 2022 at 20:42)</a>:</h4>
<p>(yeah, I'm aware that there's subtleties with duplicate entries and such, I just want a surjective function like this)</p>



<a name="288991545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288991545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288991545">(Jul 08 2022 at 20:49)</a>:</h4>
<p>Actually, now that I recall, I actually want to use this exact same function elsewhere in the code</p>



<a name="288993266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288993266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288993266">(Jul 08 2022 at 21:05)</a>:</h4>
<p>What is the obvious map?? What does it take [(a,b1),(a,b2)] to? What does it take [(a,0),(a,b)] to?</p>



<a name="288994439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994439">(Jul 08 2022 at 21:19)</a>:</h4>
<p>I really just need any implementation of this concept that's surjective for my proof to work</p>



<a name="288994557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994557">(Jul 08 2022 at 21:20)</a>:</h4>
<p>The obvious (?) implementation would be </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">finsupp_of_pairs</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">M</span><span class="o">)</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→₀</span> <span class="n">M</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">c</span> <span class="o">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">finsupp_of_pairs</span> <span class="n">l</span><span class="o">)</span><span class="bp">.</span><span class="n">update</span> <span class="n">c.1</span> <span class="n">c.2</span>
</code></pre></div>
<p>which would give answers <code>b1</code> and <code>0</code> to your questions, though of course it could be defined differently</p>



<a name="288994650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994650">(Jul 08 2022 at 21:22)</a>:</h4>
<p>There's what looks to me like an obvious injective map from  the finsupp to <code>finset (alpha x beta)</code> which might be more natural. And then there's a surjection from list to finset and you can split the injection.</p>



<a name="288994744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994744">(Jul 08 2022 at 21:22)</a>:</h4>
<p>Oh you're right</p>



<a name="288994752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994752">(Jul 08 2022 at 21:22)</a>:</h4>
<p>The injection probably suits me better</p>



<a name="288994836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288994836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288994836">(Jul 08 2022 at 21:23)</a>:</h4>
<p>Guess this was just an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a></p>



<a name="288995071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288995071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288995071">(Jul 08 2022 at 21:26)</a>:</h4>
<p>I guess I now have to change the question</p>



<a name="288995123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288995123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288995123">(Jul 08 2022 at 21:27)</a>:</h4>
<p>Is there code to get the "graph" of a <code>finsupp</code> as a <code>finset</code>?</p>



<a name="288995139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288995139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288995139">(Jul 08 2022 at 21:27)</a>:</h4>
<p>Or however you'd call the <code>finset</code> of input and output pairs</p>



<a name="288995991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288995991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288995991">(Jul 08 2022 at 21:36)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→₀</span> <span class="n">β</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">graph</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)]</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">f.support.image</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">))</span>
</code></pre></div>



<a name="288996087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288996087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288996087">(Jul 08 2022 at 21:37)</a>:</h4>
<p>It's certainly easy enough to code</p>



<a name="288996151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288996151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288996151">(Jul 08 2022 at 21:38)</a>:</h4>
<p>We can ditch decidable equality, actually</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">graph</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→₀</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">f.support.map</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">prod.mk</span> <span class="n">a</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">),</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span> <span class="o">(</span><span class="n">prod.mk.inj</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">⟩</span>
</code></pre></div>



<a name="288996237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288996237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288996237">(Jul 08 2022 at 21:39)</a>:</h4>
<p>Better:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→₀</span> <span class="n">β</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">prod.graph</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">↪</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">),</span>
  <span class="n">inj'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">}</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">prod.graph_apply</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod.graph</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">def</span> <span class="n">graph</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">f.support.map</span> <span class="o">(</span><span class="n">prod.graph</span> <span class="n">f</span><span class="o">)</span>
</code></pre></div>



<a name="288996252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288996252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288996252">(Jul 08 2022 at 21:39)</a>:</h4>
<p>Ah, you just did that too.</p>



<a name="288999595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/288999595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#288999595">(Jul 08 2022 at 22:16)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15196">#15196</a></p>



<a name="289025268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/289025268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#289025268">(Jul 09 2022 at 06:52)</a>:</h4>
<p>Is there a link to <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_pmap.graph">docs#linear_pmap.graph</a> or linear_map.graph here?</p>



<a name="289025292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/289025292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#289025292">(Jul 09 2022 at 06:53)</a>:</h4>
<p>Violeta, did you mean to link to one of your own PRs instead of that one?</p>



<a name="289049042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/finsupp%20from%20input/output%20pairs/near/289049042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/finsupp.20from.20input.2Foutput.20pairs.html#289049042">(Jul 09 2022 at 15:59)</a>:</h4>
<p>Oops, off by one error</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>