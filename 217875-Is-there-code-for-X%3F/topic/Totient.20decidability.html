---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html">Totient decidability</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="312381384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312381384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Will Midwood <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312381384">(Nov 26 2022 at 18:09)</a>:</h4>
<p>Hi everyone,</p>
<p>I was wondering if <code>nat.totient</code> is decidable, and if not is there a way to make it? Thanks.</p>



<a name="312382656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312382656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312382656">(Nov 26 2022 at 18:22)</a>:</h4>
<p>Do you mean computable?</p>



<a name="312382692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312382692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312382692">(Nov 26 2022 at 18:22)</a>:</h4>
<p>The file where <code>nat.totient</code> is defined does not contain the word <code>noncomputable</code>. So you should be good to go.</p>



<a name="312479818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312479818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Will Midwood <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312479818">(Nov 27 2022 at 14:51)</a>:</h4>
<p>How does one compute it then? Say <code>nat.totient 9</code></p>



<a name="312480655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312480655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312480655">(Nov 27 2022 at 14:57)</a>:</h4>
<p>Are you confusing Lean with a computer algebra package? Lean is designed to prove theorems about nat.totient, not compute it! </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.totient</span>

<span class="k">#eval</span> <span class="n">nat.totient</span> <span class="mi">9</span>
</code></pre></div>
<p>works, but don't expect to go much higher; this is just evaluating the definition, which was written to be useful for proving, not optimal for computing.</p>



<a name="312482174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312482174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312482174">(Nov 27 2022 at 15:09)</a>:</h4>
<p>Is there a norm_num plugin?</p>



<a name="312482785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312482785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312482785">(Nov 27 2022 at 15:14)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.totient</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">nat.totient</span> <span class="mi">1000</span> <span class="bp">=</span> <span class="mi">37</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">norm_num</span><span class="o">,</span> <span class="c1">-- failed to simplify</span>
<span class="kd">end</span>
</code></pre></div>
<p>doesn't look like it</p>



<a name="312488626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312488626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312488626">(Nov 27 2022 at 16:02)</a>:</h4>
<p>Lean could/should be a computer algebra system, as well as a theorem prover, it just needs "some work".</p>



<a name="312492512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312492512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312492512">(Nov 27 2022 at 16:38)</a>:</h4>
<p>I have never really understood how one would go about this work. Let's stick to Lean 4, because that's presumably where it will happen if it happens. If the definition of <code>nat.totient</code> is "the number of units in Z/nZ", which it probably should be if one wants to prove theorems about it, then where does the more efficient <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϕ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi><msub><mo>∏</mo><mrow><mi>p</mi><mo>∣</mo><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mi>p</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\phi(n)=n\prod_{p\mid n}(1-p^{-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ϕ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2247em;vertical-align:-0.4747em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2253em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mrel mtight">∣</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4747em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> fit in? This will be a theorem, but it's probably the thing one would want to use for efficient computations.</p>



<a name="312492792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312492792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312492792">(Nov 27 2022 at 16:41)</a>:</h4>
<p>IIRC, in Lean4 you can provide alternative efficient implementations for functions.</p>



<a name="312492907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312492907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312492907">(Nov 27 2022 at 16:42)</a>:</h4>
<p>Does anyone know of an example where this is done?</p>



<a name="312495060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312495060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312495060">(Nov 27 2022 at 17:03)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.set_eq_setTR#doc">docs4#List.set_eq_setTR</a> is an example tagged with the <code>csimp</code> attribute. There are good deal more in Std.Data.List.Basic</p>



<a name="312497108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312497108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312497108">(Nov 27 2022 at 17:22)</a>:</h4>
<p>I'm more thinking of this <code>implementedBy</code> (I think) attribute... maybe I'm misremembering</p>



<a name="312497839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312497839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312497839">(Nov 27 2022 at 17:29)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib4/blob/5230db6df2ef97710db9e1c217513ec17566814c/Mathlib/Init/Logic.lean#L530">https://github.com/leanprover-community/mathlib4/blob/5230db6df2ef97710db9e1c217513ec17566814c/Mathlib/Init/Logic.lean#L530</a></p>



<a name="312498924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312498924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312498924">(Nov 27 2022 at 17:39)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> But then the efficient implementation can't be reasoned about right?</p>



<a name="312499152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312499152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312499152">(Nov 27 2022 at 17:41)</a>:</h4>
<p>I thought there was a way to reason about the alt def (assuming lean has a proof that the implementation is correct), but I can't seem to find any examples of this</p>



<a name="312500939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312500939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312500939">(Nov 27 2022 at 17:59)</a>:</h4>
<p>Yeah. Outside of test files I cannot find any use that does not involve unsafe.</p>



<a name="312505901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Totient%20decidability/near/312505901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Totient.20decidability.html#312505901">(Nov 27 2022 at 18:45)</a>:</h4>
<p>From the example at the bottom of <a href="https://leanprover.github.io/lean4/doc/int.html">this page</a> it seems at least GMP isn't considered <code>unsafe</code>... but it seems Lean 4 does offer an option to build Lean without GMP <a href="https://github.com/leanprover/lean4/pull/827">lean4#827</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>