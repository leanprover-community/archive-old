---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html">induction on n where n ≠ 0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224417016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224417016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224417016">(Jan 29 2021 at 00:42)</a>:</h4>
<p>Is there a tactic like <code>induction</code> but that takes into account the existence of an assumption <code>n ≠ 0</code>?</p>



<a name="224417201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224417201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224417201">(Jan 29 2021 at 00:44)</a>:</h4>
<p>Why not</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
<span class="o">{</span> <span class="n">contradiction</span> <span class="o">},</span>
<span class="bp">...</span>
</code></pre></div>



<a name="224417290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224417290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224417290">(Jan 29 2021 at 00:45)</a>:</h4>
<p>That's what I did but I am wondering if there's a built-in alternative</p>



<a name="224454084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224454084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224454084">(Jan 29 2021 at 10:40)</a>:</h4>
<p>I don't expect that this specific version of induction is avalable in mathlib, the closest equivalent I know is <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.le_induction">docs#nat.le_induction</a>. You might be able to call that with <code>induction n using nat.le_induction</code>.</p>



<a name="224454172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224454172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224454172">(Jan 29 2021 at 10:41)</a>:</h4>
<p>But <code>induction</code> is pretty picky about the induction principles you can be <code>using</code>.</p>



<a name="224456337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224456337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224456337">(Jan 29 2021 at 11:02)</a>:</h4>
<p>What does <code>induction'</code> do? Of course you can just make your own induction principle and then <code>apply</code> it.</p>



<a name="224457759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224457759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224457759">(Jan 29 2021 at 11:18)</a>:</h4>
<p>You need to watch Jannis' CPP talk.</p>



<a name="224489540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224489540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224489540">(Jan 29 2021 at 15:47)</a>:</h4>
<p>I looked for this but couldn't find the link :-(</p>



<a name="224493689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224493689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224493689">(Jan 29 2021 at 16:08)</a>:</h4>
<p>There is <code>pnat.strong_induction_on</code> but you have to convert your statement to use <code>pnat</code>.</p>



<a name="224570802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224570802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224570802">(Jan 30 2021 at 07:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200/near/224454084">said</a>:</p>
<blockquote>
<p>I don't expect that this specific version of induction is avalable in mathlib, the closest equivalent I know is <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.le_induction">docs#nat.le_induction</a>. You might be able to call that with <code>induction n using nat.le_induction</code>.</p>
</blockquote>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> This seems to be what I want, but <code>induction n using nat.le_induction</code> doesn't work. Do you know how else I can invoke that lemma?</p>



<a name="224573731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224573731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224573731">(Jan 30 2021 at 08:45)</a>:</h4>
<p>Are you looking for <code>obtain ⟨k, rfl⟩ := nat.exists_eq_succ_of_ne_zero hn</code>? <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.exists_eq_succ_of_ne_zero">docs#nat.exists_eq_succ_of_ne_zero</a></p>



<a name="224603376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224603376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224603376">(Jan 30 2021 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Followed by <code>induction k</code>? I think that would accomplish what I'm looking for. However, the downside is that later I would need to use something like <code>Exists.intro (succ k) rfl</code> so that I won't have to deal with <code>k.succ.succ</code> everywhere (please correct me if that's not true or there's a better way to deal with that).</p>



<a name="224603742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224603742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224603742">(Jan 30 2021 at 20:34)</a>:</h4>
<p>(I know I can leave everything in terms of <code>k.succ.succ</code> but that would make my proof very messy)</p>



<a name="224608168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224608168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224608168">(Jan 30 2021 at 22:05)</a>:</h4>
<p>I don't really understand what you're asking for</p>



<a name="224614827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224614827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224614827">(Jan 31 2021 at 01:03)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.exists_eq_succ_of_ne_zero">docs#nat.exists_eq_succ_of_ne_zero</a> allows me to work with a base case of <code>n=1</code>, which is what I am looking for. However, using it also means that my inductive step will be in terms of <code>k.succ.succ</code> instead of <code>n.succ</code>. I know that <code>k.succ.succ</code> is equal to <code>n.succ</code>, so technically this isn't a problem, but for stylistic reasons it is preferable to me to have things in terms of <code>n.succ</code> and not <code>k.succ.succ</code>. This means that I will essentially have to "undo" what <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.exists_eq_succ_of_ne_zero">docs#nat.exists_eq_succ_of_ne_zero</a> does, which seems silly. I'm asking if there's a way to avoid the mess with <code>k.succ.succ</code> entirely.<br>
Sorry if things are still unclear. I can try to put together an MWE if you think that will help.</p>



<a name="224620483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224620483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224620483">(Jan 31 2021 at 03:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200/near/224493689">said</a>:</p>
<blockquote>
<p>There is <code>pnat.strong_induction_on</code> but you have to convert your statement to use <code>pnat</code>.</p>
</blockquote>
<p>Seems like nat -&gt; pnat can lift instances were missing to make this easier to do in a tactic block, so I've added <a href="https://github.com/leanprover-community/mathlib/issues/5977">#5977</a></p>



<a name="224622118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224622118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224622118">(Jan 31 2021 at 04:41)</a>:</h4>
<p>Are you looking for <code>obtain ⟨k, hk⟩ := nat.exists_eq_succ_of_ne_zero hn</code> (note: hk instead of rfl)?</p>



<a name="224622338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224622338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224622338">(Jan 31 2021 at 04:46)</a>:</h4>
<p>I had tried that but it causes problems: I need the assumption <code>n = k.succ</code> in order to use the inductive hypothesis when really <code>n = k.succ.succ</code> is true.</p>



<a name="224622660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224622660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224622660">(Jan 31 2021 at 04:54)</a>:</h4>
<p>Then I still don't understand your problem. If your mathematical statement isn't "given n is not 0, P n can be proven by showing P 1 and P    (k + 1) -&gt; P (k + 2)", then what is it?</p>



<a name="224624930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224624930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224624930">(Jan 31 2021 at 05:44)</a>:</h4>
<p>That is what I'm trying to prove, what I'm running into with that is more of a technical problem. I've put together an mwe:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">nat.exists_eq_succ_of_ne_zero</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  case nat.succ</span>
<span class="cm">  p : ℕ → Prop,</span>
<span class="cm">  n : ℕ,</span>
<span class="cm">  hn : n ≠ 0,</span>
<span class="cm">  k : ℕ,</span>
<span class="cm">  ih : n = k.succ → p n,</span>
<span class="cm">  hk : n = k.succ.succ</span>
<span class="cm">  ⊢ p n</span>
<span class="cm">  -/</span>
<span class="kd">end</span>
</code></pre></div>
<p>Obviously the very thing I am trying to prove is  "since it is true for <code>k.succ</code> it is true for <code>k.succ.succ</code>," but I'm not sure how I can call <code>ih</code> in its above state.</p>
<p>Interestingly, I've found that I can do as follows:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">nat.exists_eq_succ_of_ne_zero</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">k.succ</span><span class="o">,</span>
  <span class="bp">...</span>
<span class="kd">end</span>
</code></pre></div>
<p>and then complete the proof in terms of <code>m</code>.</p>



<a name="224625125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625125">(Jan 31 2021 at 05:49)</a>:</h4>
<p>What's your base case?</p>



<a name="224625193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625193">(Jan 31 2021 at 05:51)</a>:</h4>
<p>It might help to state a mwe that is actually provable, by adding appropriate hypotheses about <code>p n</code></p>



<a name="224625268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625268">(Jan 31 2021 at 05:52)</a>:</h4>
<p>Sure. I'll post the actual proof I'm working on. I was trying to demonstrate with something more general.</p>



<a name="224625275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625275">(Jan 31 2021 at 05:53)</a>:</h4>
<p>I mean a general induction lemma</p>



<a name="224625296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625296">(Jan 31 2021 at 05:53)</a>:</h4>
<p>Your first example should work if you use <code>induction k generalizing n</code></p>



<a name="224625298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625298">(Jan 31 2021 at 05:53)</a>:</h4>
<p>for example</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">H1</span> <span class="o">:</span> <span class="n">p</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span><span class="o">,</span> <span class="n">p</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
   <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">n</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="224625350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224625350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224625350">(Jan 31 2021 at 05:54)</a>:</h4>
<p>adjust the statements of <code>H1</code> and <code>H2</code> until they match the assumptions you want</p>



<a name="224626440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224626440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224626440">(Jan 31 2021 at 06:22)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">p</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">m</span><span class="o">},</span> <span class="n">p</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">p</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">nat.exists_eq_succ_of_ne_zero</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">hk</span><span class="o">]</span> <span class="o">},</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  case nat.succ</span>
<span class="cm">  p : ℕ → Prop,</span>
<span class="cm">  n : ℕ,</span>
<span class="cm">  hn : n ≠ 0,</span>
<span class="cm">  h1 : p 1,</span>
<span class="cm">  h2 : ∀ {m : ℕ}, p m → p (m + 1),</span>
<span class="cm">  k : ℕ,</span>
<span class="cm">  ih : n = k.succ → p n,</span>
<span class="cm">  hk : n = k.succ.succ</span>
<span class="cm">  ⊢ p n</span>
<span class="cm">  -/</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">p</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">m</span><span class="o">},</span> <span class="n">p</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">p</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">nat.exists_eq_succ_of_ne_zero</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">h1</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">let</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">k.succ</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h2</span> <span class="o">(</span><span class="n">ih</span> <span class="o">(</span><span class="n">nat.succ_ne_zero</span> <span class="n">k</span><span class="o">))</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
<p>Note that in the second example the <code>let</code> line is not necessary. In my proof, however, it is, since  working with <code>k.succ.succ</code> everywhere will be messy.</p>



<a name="224627034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224627034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224627034">(Jan 31 2021 at 06:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200/near/224625296">said</a>:</p>
<blockquote>
<p>Your first example should work if you use <code>induction k generalizing n</code></p>
</blockquote>
<p>This works! But it also causes things to get messy in my particular proof.</p>



<a name="224637739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224637739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224637739">(Jan 31 2021 at 10:50)</a>:</h4>
<p>I think the <code>let</code> version is a totally reasonable thing to do here</p>



<a name="224689839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224689839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224689839">(Feb 01 2021 at 06:30)</a>:</h4>
<p>That is pretty much the conclusion I came to as well. I suppose that there are always going to be finicky cases like my own that require an extra line or two, but it seems like your suggestion of <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.exists_eq_succ_of_ne_zero">docs#nat.exists_eq_succ_of_ne_zero</a> is the most convenient option here.</p>



<a name="224689843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/induction%20on%20n%20where%20n%20%E2%89%A0%200/near/224689843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/induction.20on.20n.20where.20n.20.E2.89.A0.200.html#224689843">(Feb 01 2021 at 06:30)</a>:</h4>
<p>Thank you all for your help!!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>