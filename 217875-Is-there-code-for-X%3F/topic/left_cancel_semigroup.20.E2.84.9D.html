---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html">left_cancel_semigroup ℝ</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236741263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236741263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236741263">(Apr 29 2021 at 20:38)</a>:</h4>
<p>Hello! I wanna prove a simple algebra exercise like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.gptf</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.real.nnreal</span>
<span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">import</span> <span class="n">data.complex.basic</span>
<span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">6</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">54</span><span class="bp">/</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">9</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">key</span><span class="o">:</span> <span class="o">(</span><span class="mi">6</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="o">(</span><span class="mi">54</span><span class="bp">/</span><span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">b</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_right_inj</span> <span class="n">b</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
<p>and my first attemp is to multiply b at both end, but obviously lean is not happy and it requires</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h₂</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">54</span> <span class="bp">/</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">left_cancel_semigroup</span> <span class="n">ℝ</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h₂</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">54</span> <span class="bp">/</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="mi">6</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">54</span> <span class="bp">/</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span>
</code></pre></div>
<p>do you have any hint of that? Thank you a lot!</p>



<a name="236742596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236742596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236742596">(Apr 29 2021 at 20:48)</a>:</h4>
<p>Your problem is that <code>mul_right_inj</code> is a theorem about groups (or more precisely about a structure which is slightly weaker than a group) and it says that you can always cancel anything.</p>



<a name="236742643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236742643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236742643">(Apr 29 2021 at 20:49)</a>:</h4>
<p>You will need a lemma about fields (or maybe integral domains or something) saying that you can cancel anything as long as it's nonzero.</p>



<a name="236742713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236742713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236742713">(Apr 29 2021 at 20:49)</a>:</h4>
<p>I <em>think</em> it might be <code>mul_right_inj'</code> that you want</p>



<a name="236742842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236742842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236742842">(Apr 29 2021 at 20:50)</a>:</h4>
<p>but actually it would be easier just to work backwards and rewrite h2 on the goal -- often in Lean it's easier to go backwards than forwards.</p>



<a name="236743379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236743379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236743379">(Apr 29 2021 at 20:54)</a>:</h4>
<p><code>have key : whatyouhave := congr_fun (* b) h</code> should also produce <code>key</code></p>



<a name="236743503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236743503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236743503">(Apr 29 2021 at 20:55)</a>:</h4>
<p>A style issue: in Lean we prefer <code>&lt;</code> always instead of <code>&gt;</code> -- otherwise we have to write every lemma about inequalities twice. Your hypothesis <code>h₁</code> should be <code>0 &lt; b</code>, it will be easier to use than <code>b &gt; 0</code>.</p>



<a name="236799147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236799147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236799147">(Apr 30 2021 at 07:58)</a>:</h4>
<p>Thank you for your help and advice! I finally managed to get it work like this,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.real.nnreal</span>
<span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">import</span> <span class="n">data.complex.basic</span>
<span class="kn">import</span> <span class="n">algebra.algebra.basic</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">6</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">54</span><span class="bp">/</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">9</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">key₁</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_of_gt</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">key₃</span> <span class="o">:</span>  <span class="mi">6</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">54</span> <span class="o">:=</span> <span class="o">(</span><span class="n">eq_div_iff</span> <span class="n">key₁</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="236799544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236799544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236799544">(Apr 30 2021 at 08:01)</a>:</h4>
<p>Here's my solution:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">6</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">54</span><span class="bp">/</span><span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="bp">=</span><span class="mi">9</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">eq_div_iff</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">h₁</span><span class="o">)</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="236799673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236799673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236799673">(Apr 30 2021 at 08:02)</a>:</h4>
<p>(generated independently but I now realise it's exactly the same!). My instinct is not to make new <code>key</code> variables because they just clutter things up.</p>



<a name="236800127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/left_cancel_semigroup%20%E2%84%9D/near/236800127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/left_cancel_semigroup.20.E2.84.9D.html#236800127">(Apr 30 2021 at 08:06)</a>:</h4>
<p>that looks good! learnt a lot</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>