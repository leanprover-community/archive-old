---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html">✔ Set Systems?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="317122674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317122674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jihoon Hyun <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317122674">(Dec 21 2022 at 10:12)</a>:</h4>
<p>This makes me to bet interested in porting <code>finset</code>.</p>
<p>How should I participate in porting, or has the porting not started yet?</p>
<p>In any case, I'll use this as an opportunity to contribute something to mathlib4.</p>



<a name="317122806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317122806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317122806">(Dec 21 2022 at 10:13)</a>:</h4>
<p><span aria-label="point right" class="emoji emoji-1f449" role="img" title="point right">:point_right:</span> <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a></p>



<a name="317122989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317122989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317122989">(Dec 21 2022 at 10:14)</a>:</h4>
<p>But let me tell you that <code>finset</code> is considered critical so it will be hard for you to keep up with the port towards it (I expect it be fast). If you want to help with the port, probably pick something less commonplace</p>



<a name="317123379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317123379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317123379">(Dec 21 2022 at 10:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="574112">Jihoon Hyun</span> has marked this topic as resolved.</p>



<a name="317125171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317125171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317125171">(Dec 21 2022 at 10:26)</a>:</h4>
<p>I don't understand this advice. <span class="user-mention" data-user-id="574112">@Jihoon Hyun</span> feel free to direct your attention towards porting anything! You should make a graph of the path to your target using the tools and then get started on the files which are ready for porting.</p>



<a name="317130872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317130872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317130872">(Dec 21 2022 at 10:59)</a>:</h4>
<p>In fact here is today's pdf: <a href="https://tqft.net/mathlib4/2022-12-21/data.fintype.basic.pdf">https://tqft.net/mathlib4/2022-12-21/data.fintype.basic.pdf</a> . Please feel free to try and port anything on the path to data.finset.basic as long as its predecessors have been ported!</p>



<a name="317191594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317191594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317191594">(Dec 21 2022 at 15:58)</a>:</h4>
<p>I just think porting the files you need to do combinatorics and then do the combinatorics you want is MUCH harder than doing the combinatorics you want directly.</p>



<a name="317191805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317191805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317191805">(Dec 21 2022 at 15:59)</a>:</h4>
<p>That also because we have a shared immaterial database of knowledge on how to formalise things in Lean 3, and doing that in Lean 4 basically means you cut yourself off all that.</p>



<a name="317192324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317192324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317192324">(Dec 21 2022 at 16:01)</a>:</h4>
<p>well there is another shared immaterial database of knowledge on how to formalize things in lean 4</p>



<a name="317192470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317192470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317192470">(Dec 21 2022 at 16:02)</a>:</h4>
<p>if you don't know how to formalize in lean 3 then it wouldn't seem to make much difference which database you want to tap</p>



<a name="317192798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317192798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317192798">(Dec 21 2022 at 16:03)</a>:</h4>
<p>Jihoon wants to do set family combinatorics, which is something I have extensive experience with in Lean 3 and no idea how to do in Lean 4 (albeit I expect it be quite similar).</p>



<a name="317193116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317193116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317193116">(Dec 21 2022 at 16:05)</a>:</h4>
<p>okay but that's a much more limited claim, that you personally have less experience in lean 4 and cannot help as much for that reason</p>



<a name="317194394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317194394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317194394">(Dec 21 2022 at 16:10)</a>:</h4>
<p>I mean, this question is about set family combinatorics <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="317194882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/317194882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#317194882">(Dec 21 2022 at 16:13)</a>:</h4>
<p>Looking up at the discussion, it seems that the question was about lean4 from the start. I'm sure there is a lot of combinatorics in isabelle too but it's not necessarily helpful to point that out</p>



<a name="319209423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319209423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319209423">(Jan 03 2023 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/317007435">said</a>:</p>
<blockquote>
<p>I think so. The paper "Formalizing Hall’s Marriage Theorem in Lean" worked with them and it became a part of mathlib.<br>
<a href="https://arxiv.org/abs/2101.00127">https://arxiv.org/abs/2101.00127</a></p>
</blockquote>
<p>I am a bit frustrated now. I thought that paper "Formalizing Hall’s Marriage Theorem in Lean" was a good reference. However, I cannot find the version of the repository that precisely corresponds to the code snippets in the paper.</p>



<a name="319231741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319231741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319231741">(Jan 03 2023 at 16:27)</a>:</h4>
<p>I was about asking essentially same question of this thread. This comment is particularly relevant:<br>
<span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/317026233">said</a>:</p>
<blockquote>
<p>There are also set systems in topology and measure theory in the form of <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_space">docs#topological_space</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_theory.measurable_space">docs#measure_theory.measurable_space</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_theory.d_system">docs#measure_theory.d_system</a>.</p>
</blockquote>
<p>The context is <a href="https://github.com/leanprover-community/mathlib/pull/17972">#17972</a>, where I'm defining the <a href="#narrow/stream/144837-PR-reviews/topic/.2317972.20Borel.20hierarchy">Borel hierarchy</a>. To  smooth out some base cases (and also in order to be able to refactor some results), the construction starts from a <em>generating set</em> of a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>-algebra, which in the case of the Borel space of a second countable space, it should be a countable basis. </p>
<p>Now the point is that in order to apply the general definitions to the second countable topology case, it seems that I would need a typeclass consisting of a “set system” as spelled out above, to avoid repeating code. My question is,</p>
<ul>
<li>Is the typeclass approach the sensible one to take? (It would involved to define the “set system” class).</li>
</ul>



<a name="319273048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319273048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319273048">(Jan 03 2023 at 20:18)</a>:</h4>
<p>Have you seen how <code>topological_space</code> is defined? Unless I'm mistaken, you can copy-paste the definition and change the axioms as suits your needs.</p>



<a name="319273188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319273188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319273188">(Jan 03 2023 at 20:19)</a>:</h4>
<p>I don't understand your final sentences. Surely you don't want</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">set_system</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">carrier</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)))</span>
</code></pre></div>



<a name="319282131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319282131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319282131">(Jan 03 2023 at 21:21)</a>:</h4>
<p>With your suggestion of looking at topological spaces, it would be plain this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">set_system</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
  <span class="o">(</span><span class="n">is_good</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
</code></pre></div>
<p>I'm sorry I can't figure if what you put is essentially the same thing, but it's just that---a set with a family of its subsets. I think there are really no axioms satisfied by a “generating set of a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>-algebra”. </p>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/319273188">said</a>:</p>
<blockquote>
<p>I don't understand your final sentences.</p>
</blockquote>
<p>I was also not careful in the level of detail of my question. I'll try to be brief and clear:<br>
In <a href="https://github.com/leanprover-community/mathlib/pull/17972">#17972</a>, we have an</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">sigma0_pi0_rec</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="n">ordinal.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="bp">→</span> <span class="n">bool</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
</code></pre></div>
<p>which encodes the recursive generation of a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span>-algebra, starting from <code>s</code>. Then two families of subsets of <code>α</code> are defined:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sigma0</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sigma0_pi0_rec</span> <span class="n">s</span> <span class="n">i</span> <span class="n">ff</span>
<span class="kd">def</span> <span class="n">pi0</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sigma0_pi0_rec</span> <span class="n">s</span> <span class="n">i</span> <span class="n">tt</span>
</code></pre></div>
<p>and some lemmas are proved. This has two applications:</p>
<ol>
<li>Reproving the theorems from <a href="https://leanprover-community.github.io/mathlib_docs/measure_theory/card_measurable_space.html">measure_theory.card_measurable_space</a> (in which <code>s</code> is completely arbitrary); and</li>
<li>The detailed study of Borel sets in second countable metric spaces (where <code>s</code> is a countable basis for the topology).</li>
</ol>
<p>When I tried to start with applications for second item, my first try was to start a new namespace and get new versions with <code>s</code> evaluated to the countable basis:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">second_countable_topology</span> <span class="n">α</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">sigma0_pi0_rec</span> <span class="o">:</span> <span class="n">ordinal</span> <span class="bp">→</span> <span class="n">bool</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="n">pointclasses.sigma0_pi0_rec</span> <span class="o">(</span><span class="n">countable_basis</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">sigma0</span> <span class="o">:</span> <span class="n">ordinal</span> <span class="bp">→</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">pointclasses.sigma0</span> <span class="o">(</span><span class="n">countable_basis</span> <span class="n">α</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">pi0</span> <span class="o">:</span> <span class="n">ordinal</span> <span class="bp">→</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">pointclasses.pi0</span> <span class="o">(</span><span class="n">countable_basis</span> <span class="n">α</span><span class="o">)</span>
</code></pre></div>
<p>but then I would have to unfold defs all the time to recover the original results. Then it hit me that this <code>s</code> should be inferred from the context, and that I should have used typeclasses. But I'm not completely sure, and there is no typeclass as the one above. </p>
<p>Does it make more sense now?</p>



<a name="319287205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319287205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319287205">(Jan 03 2023 at 22:01)</a>:</h4>
<p>Sure, but do you understand the difference between the following two?</p>
<ul>
<li>a <code>set_family</code> structure</li>
<li>an <code>important_canonical_set_family</code> typeclass</li>
</ul>



<a name="319287386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319287386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319287386">(Jan 03 2023 at 22:02)</a>:</h4>
<p>There are fundamentally the same. The difference is the meaning. We don't want a <code>set_family</code> structure, but if you need to tag a canonical set family using typeclass inference, that's fine.</p>



<a name="319287520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319287520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319287520">(Jan 03 2023 at 22:03)</a>:</h4>
<p>After, all <a href="https://leanprover-community.github.io/mathlib_docs/find/has_add">docs#has_add</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/has_one">docs#has_one</a>... are all typeclasses that wrap very simple types to tag a canonical element.</p>



<a name="319339523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319339523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319339523">(Jan 04 2023 at 08:09)</a>:</h4>
<p>I don't think you want a typeclass here. Maybe you are looking for <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_space.is_topological_basis">docs#topological_space.is_topological_basis</a> or just the last line of this definition (<code>t = topological_space.generate_from s</code>), that you could include as assumptions in the relevant lemmas. But I think your approach to consider the sigma-algebra generated by an arbitrary subset <code>s</code> is the right one -- then if you want to deduce statements about the Borel sigma-algebra in a second-countable space, just apply your general statement to a countable topological basis.</p>



<a name="319391442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319391442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319391442">(Jan 04 2023 at 13:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/319339523">said</a>:</p>
<blockquote>
<p>your approach to consider the sigma-algebra generated by an arbitrary subset <code>s</code> is the right one -- then if you want to deduce statements about the Borel sigma-algebra in a second-countable space, just apply your general statement to a countable topological basis.</p>
</blockquote>
<p>Thank you very much; I'll keep it like that (and set the  <code>awaiting-review</code> label again).</p>



<a name="319393454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319393454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319393454">(Jan 04 2023 at 13:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/319287205">said</a>:</p>
<blockquote>
<p>Sure, but do you understand the difference between the following two?</p>
<ul>
<li>a <code>set_family</code> structure</li>
<li>an <code>important_canonical_set_family</code> typeclass</li>
</ul>
</blockquote>
<p>I wish I could say "yes". In my example above, where I drew from <code>topological_space</code>, I didn't include the <code>[@class]</code> attribute (I remember seeing that <code>class</code> is the same as <code>[@class] structure</code>). <br>
What I believe I understand is that in the typeclass case, you instantiate the structure defined in some (expected?) way. E.g., <code>has_add</code> as a structure is just "having some binary operation"; thinking of it as a class allows Lean to infer which is the correct “+” in the context.</p>
<p>Anyway, I don't even know if the above makes sense. If you <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> might point me to the documentation in order to fully understand your example, I'd be grateful.</p>



<a name="319395480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319395480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319395480">(Jan 04 2023 at 14:04)</a>:</h4>
<p>The difference between <code>class</code> and <code>structure</code> is that <code>class</code> is a pact you make with Lean not to ever declare two instances of the same class with the same parameters, and in return Lean feeds in the instances for you. In contrast, <code>structure</code> is a much freer contract: you get to instantiate the structure as much as you want, and in return you need to feed them manually. It is possible (and useful, eg to compare topologies on a fixed type) to break the contract to never instantiate the same class twice, but Lean will make your life miserable unless you know what you're doing.</p>



<a name="319395946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319395946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319395946">(Jan 04 2023 at 14:07)</a>:</h4>
<p>This is why a <code>set_system</code> class is not wanted, but a <code>my_very_own_kind_of_set_system_for_the_borel_hierarchy</code> is, because one is general purpose and will unavoidably be instantiated more than once (<code>empty</code> and <code>univ</code> already are two different set systems...), while the other is meant to be used in a precise context with a well-defined use case.</p>



<a name="319396435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319396435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319396435">(Jan 04 2023 at 14:09)</a>:</h4>
<p>(this is a general comment, and most likely Sébastien above is right that you don't even want <code>my_very_own_kind_of_set_system_for_the_borel_hierarchy</code>)</p>



<a name="319396855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Set%20Systems%3F/near/319396855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Set.20Systems.3F.html#319396855">(Jan 04 2023 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Set.20Systems.3F/near/319396435">said</a>:</p>
<blockquote>
<p>(this is a general comment, and most likely Sébastien above is right that you don't even want <code>my_very_own_kind_of_set_system_for_the_borel_hierarchy</code>)</p>
</blockquote>
<p>I understand it as such but anyway is of much help <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>