---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html">A Different `finset.fold`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222974315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20Different%20%60finset.fold%60/near/222974315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html#222974315">(Jan 16 2021 at 10:42)</a>:</h4>
<p>The definition of <a href="https://leanprover-community.github.io/mathlib_docs/data/finset/fold.html#finset.fold"><code>finset.fold</code></a> is explained as follows:</p>
<blockquote>
<p><code>fold op b f s</code> folds the commutative associative operation <code>op</code> over the <code>f</code>-image of <code>s</code>, <br>
i.e. <code>fold (+) b f {1,2,3} = f 1 + f 2 + f 3 + b</code>.</p>
</blockquote>
<p>The consequence of this is that the types of <code>b</code> and <code>f x</code> have to match.<br>
Is there someway to perform a fold over a <code>finset</code>, where <code>b</code> can have a different type than <code>f x</code>?<br>
And e.g. the requirement could be that ... </p>
<p><code>∀ (x y : α) (b : β), op (op b (f x)) (f y) = op (op b (f y)) (f x)</code></p>



<a name="222974942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20Different%20%60finset.fold%60/near/222974942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html#222974942">(Jan 16 2021 at 11:00)</a>:</h4>
<p>I suspect the issue is that the typeclasses used to express the current <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.fold">docs#finset.fold</a> don't exist to express what you suggest</p>



<a name="222975149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20Different%20%60finset.fold%60/near/222975149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html#222975149">(Jan 16 2021 at 11:03)</a>:</h4>
<p>(I guess this applies to <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.fold">docs#multiset.fold</a> too)</p>



<a name="222975402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20Different%20%60finset.fold%60/near/222975402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html#222975402">(Jan 16 2021 at 11:08)</a>:</h4>
<p>Ah, I think you want <code>(s.1.map f).foldr op b</code> (<a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.foldr">docs#multiset.foldr</a>)</p>



<a name="222978188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/A%20Different%20%60finset.fold%60/near/222978188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/A.20Different.20.60finset.2Efold.60.html#222978188">(Jan 16 2021 at 12:10)</a>:</h4>
<p>Ahhh that's exactly it. Thanks for always being so helpful <span class="user-mention" data-user-id="310045">@Eric Wieser</span>!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>