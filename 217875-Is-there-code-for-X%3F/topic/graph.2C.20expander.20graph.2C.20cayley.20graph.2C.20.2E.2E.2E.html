---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html">graph, expander graph, cayley graph, ...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="248461272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248461272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> david <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248461272">(Aug 05 2021 at 10:44)</a>:</h4>
<p>Hi, I am currently writing a paper that contains ideas including expander graph, Cayley graph, expander codes ... So I would like to use this opportunity to develop some lean code along this direction. Is there any suggested code related to graphs, such as expander graph, Cayley graph?</p>
<p>Also, since the proof in this context often contains 2 parts. One part on construction, the other part on proof. Is there some "template" (i.e. some other problem with similar 2 part format) I could refer to?</p>



<a name="248464359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248464359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248464359">(Aug 05 2021 at 11:26)</a>:</h4>
<p>Graph theory is at baby stage in mathlib right now. Some of us are doing stuff related to them, but no Cayley or expander graph as far as I know.<br>
The 2 parts proofs you are talking about are ubiquitous, so I don't really know what to point you to.</p>



<a name="248473566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248473566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> david <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248473566">(Aug 05 2021 at 13:02)</a>:</h4>
<p>Thank you! Sorry, I am a beginner, so I'm still navigating. Can you point to any example that you wrote or any example you found easy for a beginner to digest?</p>



<a name="248473829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248473829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248473829">(Aug 05 2021 at 13:04)</a>:</h4>
<p>Can you expand a little on what you mean by "a two part proof", perhaps with an example?</p>



<a name="248475861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248475861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> david <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248475861">(Aug 05 2021 at 13:22)</a>:</h4>
<p>I was originally thinking about some combinatorial construction, but while writing, I realized maybe <a href="https://leanprover-community.github.io/mathlib_docs/find/list.sorted_merge_sort">docs#list.sorted_merge_sort</a> would serve as an example, where part1 = construct the algorithm and part2 = proof the algorithm actually sort correctly. I will first try to understand it. Thanks!</p>



<a name="248562022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248562022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248562022">(Aug 06 2021 at 03:06)</a>:</h4>
<p><span class="user-mention" data-user-id="423824">@david</span> Here's a quick attempt at formalizing the definitions of Schreier graphs and Cayley graphs:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.group</span>
<span class="kn">import</span> <span class="n">group_theory.group_action.basic</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">structure</span> <span class="n">digraph</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">edges</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">symmetric_subset</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="bp">∈</span> <span class="n">S</span>

<span class="kd">def</span> <span class="n">schreier_graph</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">digraph</span> <span class="n">X</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">edges</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">|</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">∧</span> <span class="n">g</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">}</span> <span class="o">}</span>

<span class="kn">namespace</span> <span class="n">schreier_graph</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">edge_mem</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">schreier_graph</span> <span class="n">G</span> <span class="n">S</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">h.1</span>

<span class="kd">lemma</span> <span class="n">edge_gen</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">schreier_graph</span> <span class="n">G</span> <span class="n">S</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">h.2</span>

<span class="kd">lemma</span> <span class="n">edge_comm</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">sym</span> <span class="o">:</span> <span class="n">symmetric_subset</span> <span class="n">G</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">schreier_graph</span> <span class="n">G</span> <span class="n">S</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">↔</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">schreier_graph</span> <span class="n">G</span> <span class="n">S</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">y</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">schreier_graph</span><span class="o">,</span> <span class="n">set.mem_set_of_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="bp">;</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">sym</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="n">using</span> <span class="n">this</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">schreier_graph</span>

<span class="kd">def</span> <span class="n">cayley_graph</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">digraph</span> <span class="n">G</span> <span class="n">G</span> <span class="o">:=</span> <span class="n">schreier_graph</span> <span class="n">G</span> <span class="n">S</span> <span class="n">G</span>

<span class="kn">namespace</span> <span class="n">cayley_graph</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">edge_mem</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">cayley_graph</span> <span class="n">G</span> <span class="n">S</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">v</span> <span class="n">w</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">h.1</span>

<span class="kd">lemma</span> <span class="n">mem_iff</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">cayley_graph</span> <span class="n">G</span> <span class="n">S</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">∧</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">v</span> <span class="bp">=</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">iff.rfl</span>

<span class="kd">lemma</span> <span class="n">apply</span> <span class="o">(</span><span class="n">v</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">cayley_graph</span> <span class="n">G</span> <span class="n">S</span><span class="o">)</span><span class="bp">.</span><span class="n">edges</span> <span class="n">v</span> <span class="o">(</span><span class="n">g</span> <span class="bp">*</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">mem_iff</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">cayley_graph</span>
</code></pre></div>



<a name="248562127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248562127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248562127">(Aug 06 2021 at 03:08)</a>:</h4>
<p>They're directed graphs (with a definition similar to <a href="https://leanprover-community.github.io/mathlib_docs/find/quiver">docs#quiver</a>) with edges labeled by group elements from a generating set.</p>



<a name="248576647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248576647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> david <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248576647">(Aug 06 2021 at 06:41)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> Thank you that was extremely helpful!</p>



<a name="248577951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248577951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248577951">(Aug 06 2021 at 07:01)</a>:</h4>
<p><span class="user-mention" data-user-id="430458">@David</span> your description of an argument being a construction and a proof just looks like a definition and a proof in Lean. The way to learn this software is to dive in and formalise some mathematics. See if you can prove some basic lemmas from your paper using the definitions which Kyle haa provided and feel free to ask in <a class="stream" data-stream-id="113489" href="/#narrow/stream/113489-new-members">#new members</a>  if you have any problems</p>



<a name="248617528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/graph%2C%20expander%20graph%2C%20cayley%20graph%2C%20.../near/248617528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/graph.2C.20expander.20graph.2C.20cayley.20graph.2C.20.2E.2E.2E.html#248617528">(Aug 06 2021 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="303889">@Alena Gusakov</span> was also interested in Cayley graphs, perhaps she has some things too?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>