---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html">∀ a₁ a₂ : A, f a₁ a₂ = f a₂ a₁</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220677925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220677925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220677925">(Dec 22 2020 at 10:51)</a>:</h4>
<p>Does the predicate in the title on <code>A → A → B</code> with <code>(A B : Type)</code> have a name? How am I supposed to look that up?</p>



<a name="220678061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220678061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220678061">(Dec 22 2020 at 10:53)</a>:</h4>
<p>Something like <a href="https://leanprover-community.github.io/mathlib_docs/find/is_commutative">docs#is_commutative</a> (but this is only for A = B)</p>



<a name="220678067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220678067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220678067">(Dec 22 2020 at 10:53)</a>:</h4>
<p><a href="https://hoogle.haskell.org/?hoogle=(a%20-%3E%20a%20-%3E%20b)%20-%3E%20Prop">I can't hoogle</a></p>



<a name="220678134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220678134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220678134">(Dec 22 2020 at 10:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81/near/220678061">said</a>:</p>
<blockquote>
<p>Something like <a href="https://leanprover-community.github.io/mathlib_docs/find/is_commutative">docs#is_commutative</a> (but this is only for A = B)</p>
</blockquote>
<p>oh lol in use case A = B</p>



<a name="220678273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220678273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220678273">(Dec 22 2020 at 10:56)</a>:</h4>
<p>great</p>



<a name="220679968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220679968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220679968">(Dec 22 2020 at 11:22)</a>:</h4>
<p>aah, still not over. What is this called?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">magic</span> <span class="o">{</span><span class="n">P</span><span class="o">}</span> <span class="o">:=</span> <span class="n">classical.prop_decidable</span> <span class="n">P</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="bp">@</span><span class="n">ite</span> <span class="n">P</span> <span class="n">magic</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">ite</span> <span class="n">Q</span> <span class="n">magic</span>
<span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>The statement that mathematicians can construct data from equivalent props</p>



<a name="220679981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220679981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220679981">(Dec 22 2020 at 11:22)</a>:</h4>
<p><code>ite_congr</code> maybe?</p>



<a name="220679982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220679982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220679982">(Dec 22 2020 at 11:22)</a>:</h4>
<p>The proof I made has an <code>eq.rec</code> in</p>



<a name="220679988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220679988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220679988">(Dec 22 2020 at 11:22)</a>:</h4>
<p>does <code>congr'</code> work?</p>



<a name="220680038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220680038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220680038">(Dec 22 2020 at 11:23)</a>:</h4>
<p>it's possible to prove this without an eq.rec, you case on the two <code>magic</code>s</p>



<a name="220680100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220680100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220680100">(Dec 22 2020 at 11:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">there</span> <span class="n">are</span> <span class="n">unsolved</span> <span class="n">goals</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span>
<span class="bp">⊢</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">Q</span>
</code></pre></div>
<p>for congr'</p>



<a name="220680113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220680113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220680113">(Dec 22 2020 at 11:24)</a>:</h4>
<p><code>propext</code> finishes that</p>



<a name="220680135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220680135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220680135">(Dec 22 2020 at 11:25)</a>:</h4>
<p>if you go the route of casing on the magics then you don't need propext either</p>



<a name="220680794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220680794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220680794">(Dec 22 2020 at 11:37)</a>:</h4>
<p>I'll un-xy. I was discussing with Ashvni the relative merits of the function </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">delta_function</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div>
<p>We were discussing an API and one thing that came up was what an API for it might look like.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ite_congr</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">P</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">Q</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">ite</span> <span class="n">P</span> <span class="n">_</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">ite</span> <span class="n">Q</span> <span class="n">_</span><span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">congr'</span><span class="o">,</span> <span class="n">exact</span> <span class="n">propext</span> <span class="n">h</span><span class="o">}</span>
</code></pre></div>
<p>Should that be a thing in mathlib? Where should it go? I have no interest in the decidability stuff, I just want to make it so that Lean never bothers me with any such questions.</p>



<a name="220681028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220681028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220681028">(Dec 22 2020 at 11:41)</a>:</h4>
<p>Wooah this is even computable. Is this not a completely standard thing?</p>



<a name="220681146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220681146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220681146">(Dec 22 2020 at 11:43)</a>:</h4>
<p>I could imagine some equation compiler proof but somehow i don't want to go any more down this rabbithole, I'll take <code>ite_congr</code> and be grateful.</p>



<a name="220681290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220681290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220681290">(Dec 22 2020 at 11:45)</a>:</h4>
<p>I'm confused how xy lead you here. What's wrong with just using <code>congr'</code>?</p>



<a name="220681391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220681391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220681391">(Dec 22 2020 at 11:46)</a>:</h4>
<p>also note that <code>ite_congr</code> would normally also have arguments for the true and false cases, it's a bit weird to be working with the unapplied constant like this</p>



<a name="220682531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682531">(Dec 22 2020 at 12:04)</a>:</h4>
<p>Why can't I solve this in term mode?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kd">def</span> <span class="n">delta_function</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>

<span class="kd">theorem</span> <span class="n">ite_congr</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">P</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">Q</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">ite</span> <span class="n">P</span> <span class="n">_</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">ite</span> <span class="n">Q</span> <span class="n">_</span><span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">congr'</span><span class="o">,</span> <span class="n">exact</span> <span class="n">propext</span> <span class="n">h</span><span class="o">}</span>

<span class="kd">instance</span> <span class="n">delta_function_comm</span> <span class="o">:</span> <span class="n">is_commutative</span> <span class="n">ℕ</span> <span class="n">delta_function</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="c1">-- comment out next line to break</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">unfold</span> <span class="n">delta_function</span><span class="o">,</span> <span class="n">exact</span>
<span class="n">congr_fun</span>
         <span class="o">(</span><span class="n">congr_fun</span>
           <span class="o">(</span><span class="n">congr_fun</span>
             <span class="o">(</span><span class="n">ite_congr</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span> <span class="n">eq_comm</span><span class="o">)</span>
              <span class="n">ℕ</span><span class="o">)</span>
           <span class="mi">1</span><span class="o">)</span>
          <span class="mi">0</span>
<span class="c1">-- comment this out too</span>
<span class="o">}</span>
<span class="o">⟩</span>
</code></pre></div>



<a name="220682708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682708">(Dec 22 2020 at 12:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">delta_function_comm</span> <span class="o">:</span> <span class="n">is_commutative</span> <span class="n">ℕ</span> <span class="n">delta_function</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="kd">begin</span>
  <span class="n">congr'</span><span class="o">,</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  a b: ℕ</span>
<span class="cm">  ⊢ a = b</span>
<span class="cm">  a b: ℕ</span>
<span class="cm">  ⊢ b = a</span>
<span class="cm">  -/</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220682743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682743">(Dec 22 2020 at 12:07)</a>:</h4>
<p>I want to apply <code>congr'</code> to <code>eq_comm</code>? Is this what the <code>congr</code> tactic does?</p>



<a name="220682810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682810">(Dec 22 2020 at 12:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#congr'">tactic#congr'</a></p>



<a name="220682850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682850">(Dec 22 2020 at 12:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">delta_function_comm</span> <span class="o">:</span> <span class="n">is_commutative</span> <span class="n">ℕ</span> <span class="n">delta_function</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span>
    <span class="o">(</span><span class="n">ite_congr</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span> <span class="n">eq_comm</span><span class="o">)</span>
    <span class="n">ℕ</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">_</span><span class="o">)⟩</span>
</code></pre></div>



<a name="220682864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682864">(Dec 22 2020 at 12:09)</a>:</h4>
<p>the key addition being <code>: _</code></p>



<a name="220682992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682992">(Dec 22 2020 at 12:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">begin</span>
  <span class="n">congr'</span> <span class="mi">1</span><span class="o">,</span> <span class="c1">-- ⊢ a = b</span>
  <span class="c1">-- congr' 0 fails, it doesn't even unfold.</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220682993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220682993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220682993">(Dec 22 2020 at 12:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">delta_function_comm</span> <span class="o">:</span> <span class="n">is_commutative</span> <span class="n">ℕ</span> <span class="n">delta_function</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">delta_function</span><span class="o">,</span>
  <span class="n">congr'</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">propext</span> <span class="n">eq_comm</span>
<span class="kd">end</span><span class="o">⟩</span>
</code></pre></div>



<a name="220683007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683007">(Dec 22 2020 at 12:11)</a>:</h4>
<p><code>congr'</code> never unfolds</p>



<a name="220683020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683020">(Dec 22 2020 at 12:11)</a>:</h4>
<p>it uses the literal written version to decide what to focus on</p>



<a name="220683098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683098">(Dec 22 2020 at 12:12)</a>:</h4>
<p>Why is there so much going on under the hood here for this mathematical triviality that delta_function is symmetric? It follows immediately from commutativity of <code>eq</code>.</p>



<a name="220683113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683113">(Dec 22 2020 at 12:12)</a>:</h4>
<p>so there is no way to prove <code>delta_function x y = delta_function y x</code> without unfolding it; a pure congr' proof is going to treat <code>delta_function</code> as an uninterpreted constant and in that case the theorem is false</p>



<a name="220683118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683118">(Dec 22 2020 at 12:12)</a>:</h4>
<p>This is some sort of computational junk that I have no interest in. Why can't I just switch it all off?</p>



<a name="220683149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683149">(Dec 22 2020 at 12:13)</a>:</h4>
<p>the latter proof is the one I think you should go with</p>



<a name="220683164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683164">(Dec 22 2020 at 12:13)</a>:</h4>
<p>the tactic proof you posted? unfold then congr?</p>



<a name="220683167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683167">(Dec 22 2020 at 12:13)</a>:</h4>
<p>yeah</p>



<a name="220683224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683224">(Dec 22 2020 at 12:14)</a>:</h4>
<p>did we ever add that <code>boole</code> function? That might also help here, abstracting away the <code>then 1 else 0</code> part</p>



<a name="220683274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683274">(Dec 22 2020 at 12:15)</a>:</h4>
<p>there are 74 hits in mathlib for <code>then 1 else 0</code> so it seems like it deserves a definition</p>



<a name="220683374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683374">(Dec 22 2020 at 12:16)</a>:</h4>
<p>oh right, I think it got renamed to <code>indicator</code> but then it ended up getting specialized to the function case</p>



<a name="220683398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683398">(Dec 22 2020 at 12:17)</a>:</h4>
<p>which seems silly to me since the extra domain parameter does nothing</p>



<a name="220683986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220683986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220683986">(Dec 22 2020 at 12:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81/near/220682864">said</a>:</p>
<blockquote>
<p>the key addition being <code>: _</code></p>
</blockquote>
<p>Oh when will I ever learn. This is a lot deeper than I usually go nowadays.</p>



<a name="220687473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220687473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220687473">(Dec 22 2020 at 13:14)</a>:</h4>
<p>Would you have an easier time if you defined <code>delta_function (i j) := function.update 0 i 1 j</code>? We already have a bunch of api for <code>function.update</code></p>



<a name="220734983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220734983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220734983">(Dec 22 2020 at 21:15)</a>:</h4>
<p>I am still not at all sure this function should exist but I've been sidetracked</p>



<a name="220736649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20a%E2%82%81%20a%E2%82%82%20%3A%20A%2C%20f%20a%E2%82%81%20a%E2%82%82%20%3D%20f%20a%E2%82%82%20a%E2%82%81/near/220736649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20a.E2.82.81.20a.E2.82.82.20.3A.20A.2C.20f.20a.E2.82.81.20a.E2.82.82.20.3D.20f.20a.E2.82.82.20a.E2.82.81.html#220736649">(Dec 22 2020 at 21:35)</a>:</h4>
<p>I'm sure more spellings are not what you're after, but <a href="https://leanprover-community.github.io/mathlib_docs/find/set.indicator">docs#set.indicator</a> is also close, as <code>indicator (= i) 1 j</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>