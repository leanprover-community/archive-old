---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html">forall₂ nth_le</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="293141583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293141583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293141583">(Aug 12 2022 at 15:57)</a>:</h4>
<p>MWE:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">private</span> <span class="kd">lemma</span> <span class="n">forall₂_nth_le</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">i_lt_len_x</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">x.length</span><span class="o">)</span> <span class="o">(</span><span class="n">i_lt_len_y</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">y.length</span><span class="o">)</span>
  <span class="o">(</span><span class="n">ass</span> <span class="o">:</span> <span class="n">list.forall₂</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">R</span> <span class="o">(</span><span class="n">x.nth_le</span> <span class="n">i</span> <span class="n">i_lt_len_x</span><span class="o">)</span> <span class="o">(</span><span class="n">y.nth_le</span> <span class="n">i</span> <span class="n">i_lt_len_y</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293144909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293144909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293144909">(Aug 12 2022 at 16:14)</a>:</h4>
<p>I don't think <a href="https://leanprover-community.github.io/mathlib_docs/find/list.forall%E2%82%82">docs#list.forall₂</a> has much API</p>



<a name="293155853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293155853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293155853">(Aug 12 2022 at 17:14)</a>:</h4>
<p>Do you think it is a lemma that I should prove and then add to mathlib?</p>



<a name="293164510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293164510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293164510">(Aug 12 2022 at 18:01)</a>:</h4>
<p>Can you state it as an iff and prove that instead?</p>



<a name="293165738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293165738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293165738">(Aug 12 2022 at 18:08)</a>:</h4>
<p>Either <code>i_lt_len_x</code> or <code>i_lt_len_y</code> is redundant, since <code>forall₂</code> implies <code>x.length = y.length</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">list.forall₂</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">R</span> <span class="o">(</span><span class="n">x.nth_le</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">y.nth_le</span> <span class="n">i</span> <span class="n">h₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293171049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293171049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293171049">(Aug 12 2022 at 18:39)</a>:</h4>
<p>I'll give it a try on Monday. Thanks for the suggestion!</p>



<a name="293177850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293177850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293177850">(Aug 12 2022 at 19:18)</a>:</h4>
<p>The <code>exists</code> in that statement is probably sufficient justification to have the original non-iff version too, since I imagine it's more convenient for the forwards direction</p>



<a name="293489209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293489209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293489209">(Aug 15 2022 at 09:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456794">Patrick Johnson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/forall.E2.82.82.20nth_le/near/293165738">said</a>:</p>
<blockquote>
<p>Either <code>i_lt_len_x</code> or <code>i_lt_len_y</code> is redundant, since <code>forall₂</code> implies <code>x.length = y.length</code></p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">list.forall₂</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">R</span> <span class="o">(</span><span class="n">x.nth_le</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">y.nth_le</span> <span class="n">i</span> <span class="n">h₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I don't think the formulation is correct.</p>



<a name="293489296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293489296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293489296">(Aug 15 2022 at 09:24)</a>:</h4>
<p>Counterexample:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">y</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">,</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">R</span> <span class="o">(</span><span class="n">x.nth_le</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">y.nth_le</span> <span class="n">i</span> <span class="n">h₂</span><span class="o">))</span> <span class="bp">→</span> <span class="n">list.forall₂</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">push_neg</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[[],</span> <span class="o">[</span><span class="n">b</span><span class="o">]],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">intros</span> <span class="n">i</span> <span class="n">imposs</span><span class="o">,</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">list.length</span> <span class="n">at</span> <span class="n">imposs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat.not_lt_zero</span> <span class="n">i</span> <span class="n">imposs</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">finish</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293489465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293489465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293489465">(Aug 15 2022 at 09:25)</a>:</h4>
<p>Yeah, the <code>→</code> works, but not <code>←</code></p>



<a name="293490264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293490264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293490264">(Aug 15 2022 at 09:32)</a>:</h4>
<p>Do you have a preference on how the statement of the theorem should be changed?<br>
<a href="https://github.com/leanprover-community/mathlib/blob/21a7cf2220dd6167b3c077eb2c04e9db4538dc67/src/data/list/forall2.lean#L159">https://github.com/leanprover-community/mathlib/blob/21a7cf2220dd6167b3c077eb2c04e9db4538dc67/src/data/list/forall2.lean#L159</a></p>



<a name="293676003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293676003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293676003">(Aug 16 2022 at 08:45)</a>:</h4>
<p>Why not state it exactly as the docstring says?</p>
<blockquote>
<p><code>forall₂ R l₁ l₂</code> means that <code>l₁</code> and <code>l₂</code> have the same length, and whenever <code>a</code> is the nth element of <code>l₁</code>, and <code>b</code> is the nth element of <code>l₂</code>, then <code>R a b</code> is satisfied.</p>
</blockquote>
<p>Statement:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">list.forall₂_iff'</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">l₁</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">l₂</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">list.forall₂</span> <span class="n">R</span> <span class="n">l₁</span> <span class="n">l₂</span> <span class="bp">↔</span> <span class="n">l₁.length</span> <span class="bp">=</span> <span class="n">l₂.length</span> <span class="bp">∧</span>
  <span class="bp">∀</span> <span class="n">i</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">R</span> <span class="o">(</span><span class="n">l₁.nth_le</span> <span class="n">i</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">l₂.nth_le</span> <span class="n">i</span> <span class="n">h₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293694585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293694585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293694585">(Aug 16 2022 at 11:07)</a>:</h4>
<p>PR: <a href="https://github.com/leanprover-community/mathlib/pull/16073">https://github.com/leanprover-community/mathlib/pull/16073</a></p>



<a name="293699084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293699084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293699084">(Aug 16 2022 at 11:43)</a>:</h4>
<p>Can you split out all the variable renaming to its own PR?</p>



<a name="293699256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293699256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293699256">(Aug 16 2022 at 11:44)</a>:</h4>
<p>Or maybe, just make a PR that adds the new lemma; it's not clear to me whether the renaming is a net improvement</p>



<a name="293704827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293704827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293704827">(Aug 16 2022 at 12:23)</a>:</h4>
<p>I thought it would be OK to do it together. Patrick Johnson wanted me to rename <code>r</code> to <code>R</code>, so I wanted to include the change before PRing it, and it didn't look good when I renamed <code>r</code> to <code>R</code> only in my theorem.</p>



<a name="293705395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293705395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293705395">(Aug 16 2022 at 12:27)</a>:</h4>
<blockquote>
<p>Patrick Johnson wanted me to rename <code>r</code> to <code>R</code></p>
</blockquote>
<p>The snippet I posted is just an example. I'm not insisting on anything.</p>



<a name="293706850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293706850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293706850">(Aug 16 2022 at 12:36)</a>:</h4>
<p>OK, sorry.</p>



<a name="293707245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293707245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293707245">(Aug 16 2022 at 12:39)</a>:</h4>
<p>I suggest we first discuss whether we want <code>r</code> or <code>R</code> to be used throughout the file. Should I create a new thread for it, possibly in the "PR reviews" stream? If you agree on <code>R</code> in the end, I will strongly prefer to continue with reviewing the single PR as it is.</p>



<a name="293707555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293707555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293707555">(Aug 16 2022 at 12:41)</a>:</h4>
<p>I think we care more about not overediting files than variable name consistency.</p>



<a name="293708478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293708478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293708478">(Aug 16 2022 at 12:49)</a>:</h4>
<p>It's best not to mix high-effort, highly-opinionated, low-value changes (ie renaming everything) with simpler high-value changes (like your new lemmas)</p>



<a name="293708566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293708566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293708566">(Aug 16 2022 at 12:49)</a>:</h4>
<p>Because then everyone argues about the stuff that didn't need to change in the first place, and your new lemma ends up unecessarily being held hostage by the rest of the PR</p>



<a name="293708836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293708836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293708836">(Aug 16 2022 at 12:51)</a>:</h4>
<p>Should I revert the changes of the variable names and keep this PR on? Or should I create a new branch in the mathlib repository, copypaste the new lemmata to it (losing the edit history), and PR from there?</p>



<a name="293708969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293708969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293708969">(Aug 16 2022 at 12:52)</a>:</h4>
<p>I'd just revert the variable name changes; you can always recover them from the history later if you want to suggest appling them in a subsequent PR.</p>



<a name="293717870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/forall%E2%82%82%20nth_le/near/293717870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/forall.E2.82.82.20nth_le.html#293717870">(Aug 16 2022 at 13:25)</a>:</h4>
<p>Here's a much shorter proof for the forwards direction:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">forall₂.nth_le</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">list</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">forall₂</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">x.length</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">y.length</span><span class="o">),</span>
    <span class="n">R</span> <span class="o">(</span><span class="n">x.nth_le</span> <span class="n">i</span> <span class="n">hx</span><span class="o">)</span> <span class="o">(</span><span class="n">y.nth_le</span> <span class="n">i</span> <span class="n">hy</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a₁</span> <span class="o">::</span> <span class="n">l₁</span><span class="o">)</span> <span class="o">(</span><span class="n">a₂</span> <span class="o">::</span> <span class="n">l₂</span><span class="o">)</span> <span class="o">(</span><span class="n">forall₂.cons</span> <span class="n">ha</span> <span class="n">hl</span><span class="o">)</span> <span class="mi">0</span>        <span class="n">hx</span> <span class="n">hy</span> <span class="o">:=</span> <span class="n">ha</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a₁</span> <span class="o">::</span> <span class="n">l₁</span><span class="o">)</span> <span class="o">(</span><span class="n">a₂</span> <span class="o">::</span> <span class="n">l₂</span><span class="o">)</span> <span class="o">(</span><span class="n">forall₂.cons</span> <span class="n">ha</span> <span class="n">hl</span><span class="o">)</span> <span class="o">(</span><span class="n">succ</span> <span class="n">i</span><span class="o">)</span> <span class="n">hx</span> <span class="n">hy</span> <span class="o">:=</span> <span class="n">hl.nth_le</span> <span class="n">_</span> <span class="n">_</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>