---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html">Status of Spectral Theorem?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204140690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204140690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Shu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204140690">(Jul 16 2020 at 20:48)</a>:</h4>
<p>Hello, are there people working on the spectral theorem for finite dimensional Hilbert spaces (or anything of greater generality)?</p>



<a name="204142839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204142839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204142839">(Jul 16 2020 at 21:04)</a>:</h4>
<p>we just finished Cayley Hamilton, so defining eigenstuff is definitely in striking distance</p>



<a name="204142872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204142872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204142872">(Jul 16 2020 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="245078">@Apurva Nakade</span> was looking to start on a project like this</p>



<a name="204142909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204142909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204142909">(Jul 16 2020 at 21:05)</a>:</h4>
<p>Anne Baanen's recent linear algebra video is great, have you watched it yet?</p>



<a name="204142946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204142946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204142946">(Jul 16 2020 at 21:06)</a>:</h4>
<p><a href="https://www.youtube.com/watch?v=EnZvGCU_jpc&amp;feature=youtu.be">https://www.youtube.com/watch?v=EnZvGCU_jpc&amp;feature=youtu.be</a></p>
<div class="youtube-video message_inline_image"><a data-id="EnZvGCU_jpc" href="https://www.youtube.com/watch?v=EnZvGCU_jpc&amp;feature=youtu.be"><img src="https://i.ytimg.com/vi/EnZvGCU_jpc/default.jpg"></a></div>



<a name="204143070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143070">(Jul 16 2020 at 21:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Status.20of.20Spectral.20Theorem.3F/near/204142839">said</a>:</p>
<blockquote>
<p>we just finished Cayley Hamilton, so defining eigenstuff is definitely in striking distance</p>
</blockquote>
<p>I really don't understand why everybody keeps repeating that. Why would you need CH to defining eigenstuff?</p>



<a name="204143121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143121">(Jul 16 2020 at 21:07)</a>:</h4>
<p>This is totally insane.</p>



<a name="204143159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143159">(Jul 16 2020 at 21:07)</a>:</h4>
<p>in my head, the number of eigenvalues with multiplicity is equal to the degree of the characteristic polynomial</p>



<a name="204143172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143172">(Jul 16 2020 at 21:07)</a>:</h4>
<p>but maybe there's a much more efficient path</p>



<a name="204143222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143222">(Jul 16 2020 at 21:08)</a>:</h4>
<p>Even if you don't do "linear algebra done right", you can define eigenstuff and prove a lot about them with Cayley-Hamilton.</p>



<a name="204143257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143257">(Jul 16 2020 at 21:08)</a>:</h4>
<p>i agree you don't need all this for the definition of eignstuff</p>



<a name="204143271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143271">(Jul 16 2020 at 21:08)</a>:</h4>
<p>The degree of the characteristic polynomial is the size of the matrix.</p>



<a name="204143402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143402">(Jul 16 2020 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span> was also interested in eigenvalues</p>



<a name="204143410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143410">(Jul 16 2020 at 21:09)</a>:</h4>
<p>i should maybe pick up a book and read an efficient development of the theory before commenting further about the best past forward</p>



<a name="204143490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204143490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204143490">(Jul 16 2020 at 21:10)</a>:</h4>
<p>We need a #bourbaki, for Patrick's use only.</p>



<a name="204144508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204144508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204144508">(Jul 16 2020 at 21:18)</a>:</h4>
<p>Hey! I am very interested in trying to prove the spectral theorem, for normal operators maybe?<br>
Am still browsing the library and trying to figure out what is known about hilbert spaces...</p>



<a name="204145157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204145157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204145157">(Jul 16 2020 at 21:24)</a>:</h4>
<p>Looks like inner product spaces are defined under normed spaces but quadratic forms are defined under linear algebra. Hmm... Where would Hilbert spaces go?</p>



<a name="204145366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204145366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Shu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204145366">(Jul 16 2020 at 21:26)</a>:</h4>
<p>One observation is that the existence of eigenvalues for real symmetric matrices can be done using 'only' calculus, and observing that the corresponding quadratic form is minimized on the unit sphere, since it is compact. This is a relatively ugly proof, but I think it's just a computation once you know that the sphere is compact. Do we have that fact?</p>



<a name="204145808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204145808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204145808">(Jul 16 2020 at 21:30)</a>:</h4>
<p>Heather, I don't think the exposition style in "Linear algebra done right" is so close to Bourbaki's style...</p>



<a name="204145894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204145894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204145894">(Jul 16 2020 at 21:31)</a>:</h4>
<p>But the definition of eigenstuff is independent of determinant and Cayley-Hamilton in any case, even in determinant-centric expositions.</p>



<a name="204145943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204145943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204145943">(Jul 16 2020 at 21:31)</a>:</h4>
<p>Kevin, we know finite dimensional spheres are compact.</p>



<a name="204147329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204147329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204147329">(Jul 16 2020 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="296764">@Kevin Shu</span> I feel like proving spectral theorem the "standard way" will force us to build the theory of finite dim Hilbert spaces which will be useful on its own.</p>



<a name="204150037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204150037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Shu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204150037">(Jul 16 2020 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="245078">@Apurva Nakade</span> That is true, you probably want this standard proof in the end. That said, the proof I described might also be used to show the variational characterization of eigenvalues, which is useful in other places, and it might be thought of as a stopgap. I will give a shot at that version, though since I am new, how far I'll get is questionable :)</p>



<a name="204150252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204150252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204150252">(Jul 16 2020 at 22:15)</a>:</h4>
<p>kevin, if you post a link to a github project, i'll happy follow</p>



<a name="204157281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204157281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204157281">(Jul 16 2020 at 23:51)</a>:</h4>
<p>I tried defining eigenstuff a month ago (to be fair, I'm not experienced now, and I was REALLY new then). I found that defining what an eigenvalue/eigenvector is works just fine, but if you want to do anything that involves finsets in the finite-dimensional case, or prove any existence results, Cayley-Hamilton seemed by far the easiest place to start</p>



<a name="204163600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204163600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204163600">(Jul 17 2020 at 01:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>, I only had in mind the existence of eigenvalues for finite dimensional matrices over C, when I've been advertising Cayley-Hamilton.  (Pretty much as <span class="user-mention" data-user-id="302826">@Aaron Anderson</span> says.)</p>



<a name="204163635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204163635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204163635">(Jul 17 2020 at 01:45)</a>:</h4>
<p>I think it would be great if we just do Banach algebra / C*-algebras / functional calculus, and then derive finite dimensional stuff from that (it would fit with how the rest of mathlib goes ...).</p>



<a name="204163698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204163698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204163698">(Jul 17 2020 at 01:46)</a>:</h4>
<p>I'm not actually sure that that route helps at all for the "finite-dimensional-but-not-necessarily-normal" part of the theory. I guess I've only ever thought about the route to that via CH...</p>



<a name="204179167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204179167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204179167">(Jul 17 2020 at 07:49)</a>:</h4>
<p>I think that existence of eigenvalues for finite dimensional matrices over C is precisely where the path advocated by "Linear algebra done right" is better without any possible debate.</p>



<a name="204250630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204250630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204250630">(Jul 17 2020 at 19:50)</a>:</h4>
<p>As a start, would it make sense to prove that a normal matrix with complex entries can be written as <code>UDU*</code> where <code>U</code> is unitary and <code>D</code> is diagonal?</p>



<a name="204251268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204251268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204251268">(Jul 17 2020 at 19:57)</a>:</h4>
<p>And then one day when f.d. complex inner product spaces exist we can produce a more direct proof by proving the existence of an eigenbasis?</p>



<a name="204253783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204253783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204253783">(Jul 17 2020 at 20:19)</a>:</h4>
<p>mathematically, don't <code>U</code> and the eigenbasis have the same data? if you think know how to prove the first form, you should do it.</p>



<a name="204255074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204255074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204255074">(Jul 17 2020 at 20:28)</a>:</h4>
<p>Yes, theoretically it is the same information. But proving the existence of an eigenbasis for normal operators requires one to setup the theory of complex inner product spaces whereas I believe all the theory needed for proving the theorem for matrices already exists in mathlib.</p>



<a name="204255355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204255355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204255355">(Jul 17 2020 at 20:30)</a>:</h4>
<p>got it, so to move between the two forms of the theorem you need... a *-algebra isomorphism between <code>matrix n n R</code> and the linear endomorphisms of <code>(n \to R)</code>? I think we already have this as a linear isomorphism and maybe even an algebra isomorphism</p>



<a name="204255439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204255439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204255439">(Jul 17 2020 at 20:31)</a>:</h4>
<p>I think the strategy of "first prove any form of the theorem, then see what API you need to convert to other forms" is a good one</p>



<a name="204255535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/204255535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#204255535">(Jul 17 2020 at 20:32)</a>:</h4>
<p>once you've proven the first theorem, you reduce the problem from a maths + software engineering challenge to only a software engineering challenge :)</p>



<a name="206824740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206824740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206824740">(Aug 13 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="296764">@Kevin Shu</span> I had started working on the Spectral Theorem a year ago. I followed this document: <a href="https://www.maa.org/sites/default/files/pdf/awards/Axler-Ford-1996.pdf">https://www.maa.org/sites/default/files/pdf/awards/Axler-Ford-1996.pdf</a><br>
I guess this is the same approach as in "Linear algebra done right".</p>
<p>I formalized Theorem 2.1, Proposition 2.2, Lemma 3.1, and Proposition 3.4. I'll try to update the code to the latest version of mathlib and upload it somewhere.</p>
<p>Have you started working on this? Which approach are you taking?</p>



<a name="206931182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206931182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206931182">(Aug 14 2020 at 13:52)</a>:</h4>
<p>So this is what I currently have, now updated to the latest version of mathlib: <a href="https://github.com/abentkamp/spectral">https://github.com/abentkamp/spectral</a></p>



<a name="206959427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206959427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206959427">(Aug 14 2020 at 18:08)</a>:</h4>
<p>Oh wow, this is great. I have been trying to get to the spectral theorem in a more direct way:</p>
<ol>
<li>Show that an eigenvector + eigenvalue exists using Cayley-Hamilton</li>
<li>Construct a unitary matrix whose first column is this eigenvector</li>
<li>Reduce the problem to a lower dimensional matrix and induct.</li>
</ol>



<a name="206959449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206959449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206959449">(Aug 14 2020 at 18:09)</a>:</h4>
<p>Just posted my code here: <a href="https://github.com/apurvnakade/spectral-theorem">https://github.com/apurvnakade/spectral-theorem</a></p>



<a name="206959498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206959498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206959498">(Aug 14 2020 at 18:09)</a>:</h4>
<p>I will add a README.md and several comments to the code now that there seems to be multiple approaches to proving this</p>



<a name="206959993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206959993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206959993">(Aug 14 2020 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span>  since you already have done so much work on eigenvalues and eigenvectors, I will focus on theorems about unitary and normal matrices</p>



<a name="206960958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206960958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206960958">(Aug 14 2020 at 18:24)</a>:</h4>
<p>I see that you already have <code>lemma generalized_eigenvector_span</code> :D</p>



<a name="206960969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206960969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206960969">(Aug 14 2020 at 18:24)</a>:</h4>
<p>the spectral theorem should be a direct corollary of this</p>



<a name="206961074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206961074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206961074">(Aug 14 2020 at 18:25)</a>:</h4>
<p>Can you push this to mathlib?</p>



<a name="206979000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206979000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206979000">(Aug 14 2020 at 20:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129120">Alexander Bentkamp</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Status.20of.20Spectral.20Theorem.3F/near/206931182">said</a>:</p>
<blockquote>
<p>So this is what I currently have, now updated to the latest version of mathlib: <a href="https://github.com/abentkamp/spectral">https://github.com/abentkamp/spectral</a></p>
</blockquote>
<p>Alex, did you see that algebraically closed fields and existence of algebraic closures are now in mathlib?</p>



<a name="206979382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/206979382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#206979382">(Aug 14 2020 at 20:41)</a>:</h4>
<p>Why isn't all this in mathlib?</p>



<a name="207014431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207014431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207014431">(Aug 15 2020 at 09:52)</a>:</h4>
<blockquote>
<p>Apurva Nakade: the spectral theorem should be a direct corollary of this</p>
</blockquote>
<p>I think we first need a complex inner product, right?</p>



<a name="207014791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207014791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207014791">(Aug 15 2020 at 10:02)</a>:</h4>
<blockquote>
<p>Patrick Massot: Why isn't all this in mathlib?</p>
</blockquote>
<p>Yeah, I know I should have merged this earlier, but I have been a bit worried about finishing my main PhD project in time. Now it looks like it's easily doable and I'll have some time to merge it.</p>



<a name="207015751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207015751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207015751">(Aug 15 2020 at 10:31)</a>:</h4>
<blockquote>
<p>I think we first need a complex inner product, right?</p>
</blockquote>
<p>Oh, well, in your approach, you'll use the dot product instead, which I just discovered in your files. Then the spectral theorem shouldn't be far away indeed.</p>



<a name="207025034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207025034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207025034">(Aug 15 2020 at 14:53)</a>:</h4>
<p>Using your theorem you need two more steps:</p>
<ol>
<li>Gram-Schmidt orthogonalization </li>
<li>Proving that an upper triangular normal matrix is diagonal<br>
The second should be easy, the first one will need some work though. In any case, your theorems are great! I was daunted by having to prove the existence of an eigenvbasis and was trying a workaround using induction but now we don't need to do that anymore.</li>
</ol>



<a name="207025288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207025288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207025288">(Aug 15 2020 at 15:00)</a>:</h4>
<p>Actually, you don't even need Gram-Schmidt orthogonalization if you are only interested in the linear operator version of spectral theorem. All you need to show is that every generalized eigenvector of a normal operator is a genuine eigenvector. I don't remember the proof of the top of my head but it is the linear operator version of every upper triangular normal matrix is diagonal.</p>



<a name="207074404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207074404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207074404">(Aug 16 2020 at 14:48)</a>:</h4>
<p>I, <span class="user-mention" data-user-id="252300">@Jalex Stark</span> , and <span class="user-mention" data-user-id="296764">@Kevin Shu</span>  have been trying to brainstorm how to move toward the spectral theorem given that complex inner products seem <a href="#narrow/stream/116395-maths/topic/Complex.20inner.20product">controversial</a>. </p>
<p>We were thinking of doing this using complex <em>dot</em> products (that mimic the current dot product) and then prove the spectral theorem for normal matrices using <span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span> 's work. We want to write the code in such a way that one day when complex inner products exist the code can be easily upgraded with no extra effort. Does this sound reasonable? Or is it better to wait for complex inner products to exist on mathlib?</p>



<a name="207074604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207074604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207074604">(Aug 16 2020 at 14:55)</a>:</h4>
<p>My original plan was to prove the spectral theorem without choosing a basis (i.e., only linear maps, no matrices). I'd still find it elegant if we could do it that way. The dot product can only be defined with a basis, right?</p>



<a name="207074814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207074814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207074814">(Aug 16 2020 at 15:01)</a>:</h4>
<p>Mathematically, what you say is uncontroversially the best way to do it. But this requires the existence of a complex inner product, which might take a long time to make it to mathlib.</p>



<a name="207074911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207074911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207074911">(Aug 16 2020 at 15:03)</a>:</h4>
<p>Although, maybe this has changed recently. It would be really awesome if we could have some complex inner product on mathlib. That would just open up doors to so many more results.</p>



<a name="207075228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075228">(Aug 16 2020 at 15:11)</a>:</h4>
<p>I think we could at least try to push for it by creating a copy of <code>real_inner_product</code> and adapting it to complex numbers. Then create a pull request and try to get it merged. Do you think that would be rejected?</p>



<a name="207075239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075239">(Aug 16 2020 at 15:11)</a>:</h4>
<p>It could still be generalized later if that's what people want...</p>



<a name="207075256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075256">(Aug 16 2020 at 15:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> <span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> <span class="user-mention" data-user-id="284606">@Chris M</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="207075330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075330">(Aug 16 2020 at 15:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129120">Alexander Bentkamp</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Status.20of.20Spectral.20Theorem.3F/near/207075228">said</a>:</p>
<blockquote>
<p>I think we could at least try to push for it by creating a copy of <code>real_inner_product</code> and adapting it to complex numbers. Then create a pull request and try to get it merged. Do you think that would be rejected?</p>
</blockquote>
<p>This has already been done: <a href="#narrow/stream/116395-maths/topic/Complex.20inner.20product/near/200795959">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Complex.20inner.20product/near/200795959</a></p>



<a name="207075379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075379">(Aug 16 2020 at 15:14)</a>:</h4>
<p>but it was not PRed to mathlib. maybe with your work now there is enough motivation to have this is in the library</p>



<a name="207075472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075472">(Aug 16 2020 at 15:17)</a>:</h4>
<p>so let's add <span class="user-mention" data-user-id="311453">@Frédéric Dupuis</span> to the tag party :)</p>



<a name="207075688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075688">(Aug 16 2020 at 15:23)</a>:</h4>
<p>Personally, I wish there were some way to unify the real and Hermitian inner product (maybe along the lines I was brainstorming <a href="#narrow/stream/144837-PR-reviews/topic/.233658.20extend.20Hahn-Banach.20from.20.E2.84.9D.20to.20.E2.84.82">here</a>).  But it seems nobody knows a good way to do it, so maybe it is better to have parallel real and Hermitian files.</p>



<a name="207075754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207075754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207075754">(Aug 16 2020 at 15:25)</a>:</h4>
<p>How exactly does <code>to_additive</code> work?  Would it be possible to do something like that in this setting, to reduce duplication?</p>



<a name="207077018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207077018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207077018">(Aug 16 2020 at 16:00)</a>:</h4>
<p>I think it's not too hard to code something like <code>to_additive</code> and I'd like to see more meta-programming in this style, but I'm not sure the specification would be so easy to write. Actually we may need to first write everything by hand with as much duplication as possible before knowing exactly what we want the tactic to do.</p>



<a name="207082676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207082676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207082676">(Aug 16 2020 at 18:17)</a>:</h4>
<p>the machine learning folks say that what they need is lots of labeled examples. This is also true for "good old-fashioned AI", i.e. metaprogramming. If we write the library in such a way that it's easy to see how to use automation to make the presentation more compact / maintainable, then we'll get more people teaching themselves how to metaprogram.<br>
Maybe a second example of "things like <a href="https://leanprover-community.github.io/mathlib_docs/find/to_additive">docs#to_additive</a>" is <a href="https://leanprover-community.github.io/mathlib_docs/find/simps_attr">docs#simps_attr</a>, which I just learned has very detailed docstrings.<br>
I guess in addition to heaping praise on <code>to_additive</code>, we should also encourage theory-specific provers like <a href="https://leanprover-community.github.io/mathlib_docs/find/mfld_set_tac.">docs#mfld_set_tac.</a></p>



<a name="207083159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207083159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207083159">(Aug 16 2020 at 18:31)</a>:</h4>
<p>more on topic...<br>
I agree that the specification is not easy to write. I tried (on the <code>mathlib:complex_dot_product</code> branch) imitating the proof of one real inner product lemma for the complex numbers, and found that we were missing a lemma like</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">complex</span><span class="bp">.</span><span class="n">conj_sum</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">complex</span><span class="bp">.</span><span class="n">conj</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">complex</span><span class="bp">.</span><span class="n">conj</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span>  <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207083581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207083581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207083581">(Aug 16 2020 at 18:44)</a>:</h4>
<p>I'm not sure how one would make sure they've gotten all of the side lemmas like this without effectively doing the whole "manual translation" one declaration at a time</p>



<a name="207085457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207085457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207085457">(Aug 16 2020 at 19:19)</a>:</h4>
<p>This should follow immediately from the fact that complex.conj is an additive group hom. Presumably <code>complex.conj</code> is the "bare function"; the ring homomorphism will probably have nicer properties.</p>



<a name="207091561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207091561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207091561">(Aug 16 2020 at 21:46)</a>:</h4>
<p>sorry, I didn't mean to imply that the sorry was hard to fill. Just that it seems to be missing, and makes a good simp lemma. Unless there's a way to teach <code>simp</code> about the version for general additive homs?</p>



<a name="207096102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207096102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207096102">(Aug 16 2020 at 23:58)</a>:</h4>
<p>Doesn't <code>simp</code> already know the result for general additive homs? I don't know if this is impossible in your situation but I'm wondering if you can use the ring hom instead of the bare map all the way through. I don't know if this is more sensible than just training the simplifier on all the ring isom lemmas for complex.conj.</p>



<a name="207097530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207097530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207097530">(Aug 17 2020 at 00:40)</a>:</h4>
<p>I see. Right now, data.matrix.basic models a vector as a bare function type <code>n \to V</code>. I think you want to see a type <code>vector n</code> so that  </p>
<ul>
<li><code>vector n</code> has a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex"> \mathbb C </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">C</span></span></span></span>-module instance</li>
<li><code>vector.map</code>takes additive homs to additive homs</li>
<li><code>vector.conj</code> is defined as <code>vector.map complex.conj</code></li>
</ul>



<a name="207097732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207097732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207097732">(Aug 17 2020 at 00:47)</a>:</h4>
<p>maybe modelling off of data.matrix.basic doesn't make sense. Is it written with bare function types for computational reasons?</p>



<a name="207098121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207098121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207098121">(Aug 17 2020 at 00:59)</a>:</h4>
<p>Ah, I see Frederic bases it on real_inner_product.lean.</p>



<a name="207145955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207145955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207145955">(Aug 17 2020 at 13:50)</a>:</h4>
<p>Ah, I'm glad that this is coming up again -- I would also very much like to see complex inner products in mathlib, a lot of what I am interested in formalizing depends on this! I'm not convinced that duplicating the real inner product code (like I did a while back) is the best approach however, it would be much nicer to have a unified approach to both cases. I'm starting to think that the better way to do this would be to create this "ℝ or ℂ" typeclass that was mentioned in that other thread. I was thinking of something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">is_R_or_C</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">ℝ</span> <span class="n">K</span><span class="o">]</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">re</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">im</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">conj</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span>
</code></pre></div>


<p>and then giving that class the same API as the complex numbers, adding whatever it takes to the class definition along the way to make it happen. The result probably won't be very pretty, but then afterwards when using it, it should behave fairly nicely, with <code>re</code>, <code>im</code>, <code>conj</code>, etc, being defeq to the right things in both cases.</p>
<p>Does that sound like a reasonable plan?</p>



<a name="207146055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207146055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207146055">(Aug 17 2020 at 13:51)</a>:</h4>
<p>I fear this will make the real case much less pleasant to work with.</p>



<a name="207146097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207146097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207146097">(Aug 17 2020 at 13:51)</a>:</h4>
<p>why not just say "a finite extension of R"</p>



<a name="207146146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207146146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207146146">(Aug 17 2020 at 13:51)</a>:</h4>
<p>Unless you have meta-programming generating the right statements in the real and complex case from statements in this real_or_complex case.</p>



<a name="207146203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207146203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207146203">(Aug 17 2020 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span>  yeah I said that last time and it derailed the thread</p>



<a name="207146436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207146436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207146436">(Aug 17 2020 at 13:54)</a>:</h4>
<p>I was hoping that for the real case, you would end up with a bunch of <code>re</code> and <code>conj</code>, etc, being the identity and that it wouldn't be too much of an inconvenience but this might be a bit naive...</p>



<a name="207147080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207147080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207147080">(Aug 17 2020 at 14:00)</a>:</h4>
<p>You can only hope for definitional equality here, not syntactic one. But again meta-programming could help here. You would have something like:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">real_or_complex</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">inner_symm</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">inner</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">conj</span> <span class="o">(</span><span class="n">inner</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>


<p>that would generate two lemmas <code>real_inner_symm (x y : α) : inner x y = inner y x := </code> and <code>cplx_inner_symm (x y : α) : inner x y = conj (inner y x) := </code>. The proof would be the same, and the statement would simply remove <code>conj</code> and <code>re</code>, and do something smarter about <code>im</code>.</p>



<a name="207147463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207147463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207147463">(Aug 17 2020 at 14:03)</a>:</h4>
<p>Yes, that would be much nicer to use at the end. I'm guessing it wouldn't be too much harder to program than <code>to_additive</code> but then again I have zero experience with metaprogramming.</p>



<a name="207147806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207147806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207147806">(Aug 17 2020 at 14:06)</a>:</h4>
<p>I think the meta-programming part isn't the hardest part. If you want to see that happening, the hard work is to first do it by hand for a number of lemmas which illustrate as many situations as possible.</p>



<a name="207148234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207148234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207148234">(Aug 17 2020 at 14:10)</a>:</h4>
<p>Actually the code of <code>to_additive</code> even contain crucial bits that are ready to serve elsewhere, like <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.transform_decl_with_prefix_dict">docs#tactic.transform_decl_with_prefix_dict</a></p>



<a name="207149144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207149144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207149144">(Aug 17 2020 at 14:17)</a>:</h4>
<p>Actually I guess in practice that would be very similar to what I did by coding a complex version of <code>real_inner_product.lean</code>...</p>



<a name="207149395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207149395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207149395">(Aug 17 2020 at 14:20)</a>:</h4>
<p>I don't remember the status of sesquilinear forms actually. We do have something, right?</p>



<a name="207149865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207149865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207149865">(Aug 17 2020 at 14:24)</a>:</h4>
<p>It's there, yes, in <code>linear_algebra/sesquilinear_form.lean</code>. It involves a parameter <code>(I : R ≃+* Rᵒᵖ)</code> that plays the role of the complex conjugate -- maybe there's a way to use it to make this parameter go away somehow in the real and complex cases but I don't see how to do it.</p>



<a name="207150238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207150238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207150238">(Aug 17 2020 at 14:27)</a>:</h4>
<p>Maybe this <code>out_param</code> business would help here -- is this documented somewhere? I tried to follow the refactoring of affine spaces but I didn't understand anything.</p>



<a name="207159234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207159234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207159234">(Aug 17 2020 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> In your proposal, does that still require the <code>is_R_or_C</code> typeclass? What is the type of <code>inner_symm</code>?</p>



<a name="207165233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207165233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207165233">(Aug 17 2020 at 16:29)</a>:</h4>
<p>Yes, I was still thinking about using this type class. But it's not a very serious proposal until we actually see some code.</p>



<a name="207202690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207202690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207202690">(Aug 17 2020 at 22:10)</a>:</h4>
<p>I feel like the best way forward is to get something merged now which deals with the very basics of the complex, maximizing the code similarity between the real and complex cases as per one of Patrick's suggestions. Maybe this involves taking a file called <code>real_inner_product_space.lean</code>, changing it to a folder <code>inner_product_space</code> with two files <code>real.lean</code> and <code>complex.lean</code>.  A reviewer might choose to literally read the diff of the two files with each other as part of the review.</p>



<a name="207203022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207203022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207203022">(Aug 17 2020 at 22:14)</a>:</h4>
<p>Doing it this way creates the sort of well-defined and obviously-valuable metaprogramming problem which will cause people to invest effort to learn metaprogramming. The problem comes with a lower bound on how many lines of code you get to remove from mathlib, which sounds like a pretty fun metric to optimize for.</p>



<a name="207209598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207209598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207209598">(Aug 17 2020 at 23:41)</a>:</h4>
<p>This could be done pretty quickly, but the danger here is to drag our feet on the metaprogramming once this is done and get in too deep with the two separate cases. For instance, once we have complex inner products, it will be very tempting to get started on Hilbert spaces, where there is a lot of "ℝ or ℂ" stuff going on as well. Getting it right the first time could save us a lot of work done the line...</p>



<a name="207211447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207211447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207211447">(Aug 18 2020 at 00:11)</a>:</h4>
<p>I've got a probably daft idea for the <code>is_R_or_C</code> typeclass, from reading up on Artin-Schreier: <br>
<code>variables {K : Type*} [field K] [algebra ℝ K] [finite_dimensional ℝ K]</code> would define your <code>K</code> to be probably R or C enough, but then you'd still need a variable for the automorphism that'd either be the identity for R or conjugation for C</p>



<a name="207212145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207212145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207212145">(Aug 18 2020 at 00:24)</a>:</h4>
<p>Right -- the problem with this approach is that you'll surely end up needing that the norm from K down to the reals sends z to z*sigma(z) if K isn't R, i.e. that it's Galois with group of order at most 2. I do not know this area. In number theory (when dealing with infinite places of number fields) we are really happy with the squared norm |a+ib|=a^2+b^2 because this makes a bunch of stuff work out quite nicely. But in analysis I would imagine that you want to take the square root a fair amount of the time. Whilst it is true that there is a more general theory where you assume that the extension has degree 2, I'm finding it hard to unify the degree 1 and 2 cases. In number theory it's quite common to split into two different calculations for the real and the complex case.</p>



<a name="207218394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207218394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207218394">(Aug 18 2020 at 02:40)</a>:</h4>
<p>Also, I think Patrick's main point was that having this automorphism lying around all the time would get too annoying in the long run, even if it ends up being defeq to the identity or conjugation depending on the case.</p>



<a name="207218611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207218611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207218611">(Aug 18 2020 at 02:45)</a>:</h4>
<p>One possibility would be to have a general interface with the automorphism and then a specialized API for when the automorphism is the identity, though I don't really know whether there are enough other examples to make this worthwhile</p>



<a name="207218775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207218775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207218775">(Aug 18 2020 at 02:49)</a>:</h4>
<p>Yes, I think a specialized API is what we want in the end, and I guess the main question is whether we should write it by hand or if it's worth having a <code>to_additive</code>-style mechanism to generate it automatically.</p>



<a name="207241370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207241370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207241370">(Aug 18 2020 at 09:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="311453">Frédéric Dupuis</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Status.20of.20Spectral.20Theorem.3F/near/207209598">said</a>:</p>
<blockquote>
<p>This could be done pretty quickly, but the danger here is to drag our feet on the metaprogramming once this is done and get in too deep with the two separate cases. For instance, once we have complex inner products, it will be very tempting to get started on Hilbert spaces, where there is a lot of "ℝ or ℂ" stuff going on as well. Getting it right the first time could save us a lot of work done the line...</p>
</blockquote>
<p>I'm sure we can try the meta-programming before doing Hilbert spaces.</p>



<a name="207260077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207260077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207260077">(Aug 18 2020 at 13:39)</a>:</h4>
<p>I agree! Do you know of a reference for metaprogramming? I wouldn't mind giving it a shot, but I'm a total beginner on that front...</p>



<a name="207265241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207265241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207265241">(Aug 18 2020 at 14:23)</a>:</h4>
<p><a href="https://leanprover-community.github.io/learn.html#metaprogramming-and-tactic-writing">https://leanprover-community.github.io/learn.html#metaprogramming-and-tactic-writing</a> contains a link to a very nice introductory tutorial (written by Patrick in fact).</p>



<a name="207265718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207265718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207265718">(Aug 18 2020 at 14:26)</a>:</h4>
<p>Nice -- thanks!</p>



<a name="207275536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207275536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207275536">(Aug 18 2020 at 15:38)</a>:</h4>
<p>The tutorial videos from LFTCM2020 by Rob Lewis are great too: <a href="https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2">https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2</a></p>
<div class="youtube-video message_inline_image"><a data-id="o6oUjcE6Nz4" href="https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2"><img src="https://i.ytimg.com/vi/o6oUjcE6Nz4/default.jpg"></a></div>



<a name="207280998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207280998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207280998">(Aug 18 2020 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> Good point. Here's a PR that adds them to <code>learn.md</code>: <a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/115">https://github.com/leanprover-community/leanprover-community.github.io/pull/115</a></p>



<a name="207364745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207364745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207364745">(Aug 19 2020 at 02:39)</a>:</h4>
<p>I've given this some more thought, and I think it's probably better to write at least the statements of the specialized lemmas by hand, especially for the real case.  What we want is substantially fancier than <code>to_additive</code>: for instance, we don't just want to replace <code>im</code>'s by zeroes, we want to get rid of them completely. This means that if the lemmas are autogenerated, there will be a lot of guesswork involved in figuring out what statement the metaprogram actually produced, which sounds much more painful than having to write them all by hand. However, it might be useful to write a tactic that would turn the proofs of these specialized statements into one-liners, for example by hunting down subexpressions involving <code>im</code>, <code>re</code>, etc, and calling the simplifier on them with a cleverly chosen set of lemmas (i.e. <code>mul_zero</code> and friends).</p>



<a name="207366094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207366094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207366094">(Aug 19 2020 at 03:08)</a>:</h4>
<p>This might not need any actually metaprogramming, just an appropriate simp-set.</p>



<a name="207366342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207366342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207366342">(Aug 19 2020 at 03:15)</a>:</h4>
<p>Even better!</p>



<a name="207379891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207379891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207379891">(Aug 19 2020 at 08:00)</a>:</h4>
<p>That's why I wrote "and do something smarter about <code>im</code>".</p>



<a name="207902263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Status%20of%20Spectral%20Theorem%3F/near/207902263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Status.20of.20Spectral.20Theorem.3F.html#207902263">(Aug 24 2020 at 21:57)</a>:</h4>
<p>I've made some progress on the new typeclass, and I now have a first draft in PR <a href="https://github.com/leanprover-community/mathlib/issues/3934">#3934</a>, that I have marked as work in progress for now. Basically I've defined the typeclass and added enough axioms to be able to reproduce most of the API in <code>complex.lean</code>. Towards the end of the file most of the original proofs just went through unchanged, which seems to bode well.</p>
<p>I'd be very happy to have some feedback on this! In particular, if someone knows a good way to prove this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">thirty_seven</span> <span class="o">:</span> <span class="o">(</span><span class="mi">37</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">of_real</span> <span class="mi">37</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>