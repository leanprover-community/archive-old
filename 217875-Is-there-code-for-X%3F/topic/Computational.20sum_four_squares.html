---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html">Computational sum_four_squares</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265472926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265472926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trebor Huang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265472926">(Dec 19 2021 at 10:18)</a>:</h4>
<p>Do we have algorithms that decompose a number into the sum of four squares?</p>
<p>The current proof of that theorem seems to use classical logic, but since everything in the proof involves a finite range of objects, I think the classical axioms can be gotton rid of, right?</p>



<a name="265473101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265473101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265473101">(Dec 19 2021 at 10:22)</a>:</h4>
<p>It's a finite search, so it should be too hard to write a slow algorithm.</p>



<a name="265473648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265473648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265473648">(Dec 19 2021 at 10:36)</a>:</h4>
<p>Removing the classical axioms won't make it "computational" in any meaningful way - you need to convert it into a <code>def</code> for that</p>



<a name="265477508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265477508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265477508">(Dec 19 2021 at 12:20)</a>:</h4>
<p>What does the fact that a proof exists have to do with writing an algorithm to come up with these numbers? Aren't these two distinct questions?</p>



<a name="265478094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265478094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265478094">(Dec 19 2021 at 12:35)</a>:</h4>
<p>Well, a proof that the thing you're trying to calculate exists is a nice thing to have before wasting time on an algorithm to calculate something that doesn't</p>



<a name="265478611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265478611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265478611">(Dec 19 2021 at 12:49)</a>:</h4>
<p>Sure but you can get that proof from Wikipedia. Its formalisation doesn't help, it's an independent thing, is what I'm suggesting.</p>



<a name="265479532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265479532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265479532">(Dec 19 2021 at 13:10)</a>:</h4>
<p>Well, a constructive mathematician might expect a term of the type <code>∀ n : ℕ, ∃ a b c d : ℕ, a^2 + b^2 + c^2 + d^2 = n</code> to be a function that takes an <code>n : ℕ</code> as input and returns a quadruple <code>a b c d : ℕ</code> and a proof that they satisfy the equation.  So from that perspective a proof and an algorithm are just the same, and so you might guess that it's the use of classical reasoning that lets you say "I can prove that <code>a b c d : ℕ</code> exist without working out what they are".</p>



<a name="265479990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265479990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265479990">(Dec 19 2021 at 13:19)</a>:</h4>
<p>But that's not what <code> ∃ x, p x</code> means in lean, you want <code>{ x // p x}</code> for that</p>



<a name="265480137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265480137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265480137">(Dec 19 2021 at 13:23)</a>:</h4>
<p>Sure, but I suspect this distinction trips up newcomers a lot and may have been at play in this question</p>



<a name="265480716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265480716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265480716">(Dec 19 2021 at 13:39)</a>:</h4>
<p>The constructive mathematicians have gone off to use Coq and Agda a long time ago</p>



<a name="265484316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265484316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trebor Huang <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265484316">(Dec 19 2021 at 15:05)</a>:</h4>
<p>Generally proofs may not directly reveal a program. But given that here the search space is just the integers in [0, p-1]^4, we can easily write a program that enumerates them, and the non-computational proof can then be used to prove that the search always yields a value, I think?</p>



<a name="265484911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265484911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265484911">(Dec 19 2021 at 15:19)</a>:</h4>
<p>I don't think it's worth mathlib having the algorithm unless we have a less naive algorithm!</p>



<a name="265484919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265484919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265484919">(Dec 19 2021 at 15:19)</a>:</h4>
<p>Perhaps we should have a version of <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.find">docs#nat.find</a> for <a href="https://leanprover-community.github.io/mathlib_docs/find/enumerable">docs#enumerable</a> types like 4-tuples of nat</p>



<a name="265484965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265484965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265484965">(Dec 19 2021 at 15:20)</a>:</h4>
<p>Which would be the API for the dumb algorithm</p>



<a name="265485010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485010">(Dec 19 2021 at 15:21)</a>:</h4>
<p>You can just use <code>lex ℕ (lex ℕ (lex ℕ ℕ))</code>.</p>



<a name="265485469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485469">(Dec 19 2021 at 15:32)</a>:</h4>
<p>How does that help without the enumerable version of find?</p>



<a name="265485512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485512">(Dec 19 2021 at 15:33)</a>:</h4>
<p><code> ℕ × ℕ × ℕ × ℕ</code> already has an enumerable instance</p>



<a name="265485518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485518">(Dec 19 2021 at 15:33)</a>:</h4>
<p>Ah, that assumed an enumerablt version of <code>nat.find</code>, which is pretty easy to bodge together anyway.</p>



<a name="265485519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485519">(Dec 19 2021 at 15:33)</a>:</h4>
<p>Well yes, but the enumerating program will work regardless of the proof - you certainly don't need it to be constructive or even be formalized</p>



<a name="265485578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485578">(Dec 19 2021 at 15:34)</a>:</h4>
<p>My point is that if we had the tools to easily build such enumeration programs in a single line from an existential, then mathlib wouldn't need to provide the programs themselves</p>



<a name="265485677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265485677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265485677">(Dec 19 2021 at 15:36)</a>:</h4>
<p>Note that, unless we have bootstrapping problems, one possibility is to straight up generalize <code>nat.find</code> to take in an enumerable instance.</p>



<a name="265486055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265486055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265486055">(Dec 19 2021 at 15:47)</a>:</h4>
<p>It's in core so that's a bad option</p>



<a name="265486061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265486061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265486061">(Dec 19 2021 at 15:47)</a>:</h4>
<p>Better would be to just add <code>encodable.find</code> next to <a href="https://leanprover-community.github.io/mathlib_docs/find/encodable">docs#encodable</a></p>



<a name="265486125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265486125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265486125">(Dec 19 2021 at 15:48)</a>:</h4>
<p>But it might exist already</p>



<a name="265486803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265486803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265486803">(Dec 19 2021 at 16:05)</a>:</h4>
<p>The non-naive algorithms I know involve factoring, so if we want a non-naive algorithm then probably we first want a non-naive factoring algorithm. Fortunately we have tons of theorems about number fields :D</p>



<a name="265487315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265487315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265487315">(Dec 19 2021 at 16:17)</a>:</h4>
<p>gnfs in lean when? ;b</p>



<a name="265487557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Computational%20sum_four_squares/near/265487557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Computational.20sum_four_squares.html#265487557">(Dec 19 2021 at 16:23)</a>:</h4>
<p>The serious answer is to wait until Lean 4. Of course nothing needs verifying in this algorithm; who cares if it's bug-free, if it factors, it factors.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>