---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html">✔ Intersection of a chain of nonempty finsets is nonempty.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291426494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291426494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291426494">(Jul 30 2022 at 12:32)</a>:</h4>
<p>For the exercise, I'm trying to redo the lemma Kyle wrote above, and defined</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">bInter</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">))</span> <span class="o">(</span><span class="n">Snempty</span> <span class="o">:</span> <span class="n">S.nonempty</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">Snempty.some</span> <span class="bp">|</span> <span class="bp">∀</span> <span class="n">s</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">}</span>
</code></pre></div>
<p>and I'm now confused because I feel like using this <code>Snempty.some</code> like that is extracting a value from a Prop into a larger type which I understand to be illegal. Is lean doing some magic here?</p>



<a name="291426745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291426745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291426745">(Jul 30 2022 at 12:38)</a>:</h4>
<p>.some uses choice, I think</p>



<a name="291426869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291426869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291426869">(Jul 30 2022 at 12:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



<a name="291426925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291426925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291426925">(Jul 30 2022 at 12:41)</a>:</h4>
<p>Mmh, I wanted to provide an example where using <code>.some</code> would make lean complain about not eliminating to <code>Prop</code> but couldn't.<br>
There is something I'm misunderstanding but not sure what. Thanks!</p>



<a name="291427207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291427207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291427207">(Jul 30 2022 at 12:46)</a>:</h4>
<p>Is something like this what you had in mind?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">bInter</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">))</span> <span class="o">(</span><span class="n">Snempty</span> <span class="o">:</span> <span class="n">S.nonempty</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">nempty</span> <span class="o">:=</span> <span class="n">Snempty</span><span class="o">,</span>
  <span class="n">choose</span> <span class="n">x</span> <span class="n">using</span> <span class="n">nempty</span><span class="o">,</span>  <span class="c1">--works</span>
  <span class="n">cases</span> <span class="n">Snempty</span><span class="o">,</span>   <span class="c1">--fails with the elimination thing</span>
<span class="kd">end</span>
</code></pre></div>



<a name="291427502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291427502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291427502">(Jul 30 2022 at 12:53)</a>:</h4>
<p>Yeah, I'm not sure of the <code>choose</code> thing (I mean, I'm not familiar with this tactic), but your <code>case Snempty</code> is a typical example</p>



<a name="291427656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291427656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291427656">(Jul 30 2022 at 12:57)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> It should be <code>choose x h using nempty</code></p>



<a name="291429761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291429761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291429761">(Jul 30 2022 at 13:46)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">bInter_of_directed_nonempty</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">))</span> <span class="o">(</span><span class="n">Snempty</span> <span class="o">:</span> <span class="n">S.nonempty</span><span class="o">)</span>
  <span class="o">(</span><span class="n">allsnempty</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">finset.nonempty</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">dir</span> <span class="o">:</span> <span class="n">directed_on</span> <span class="o">(</span><span class="bp">⊇</span><span class="o">)</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset.nonempty</span> <span class="o">(</span><span class="n">bInter</span> <span class="n">S</span> <span class="n">Snempty</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>

  <span class="k">let</span> <span class="n">s₀</span> <span class="o">:=</span> <span class="n">function.argmin_on</span> <span class="o">(</span><span class="n">finset.card</span><span class="o">)</span> <span class="o">(</span><span class="n">nat.lt_wf</span><span class="o">)</span> <span class="n">S</span> <span class="n">Snempty</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">hs₀</span> <span class="o">:=</span> <span class="n">argmin_on_mem</span> <span class="o">(</span><span class="n">finset.card</span><span class="o">)</span> <span class="o">(</span><span class="n">nat.lt_wf</span><span class="o">)</span> <span class="n">S</span> <span class="n">Snempty</span><span class="o">,</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="n">s₀</span> <span class="bp">=</span> <span class="o">(</span><span class="n">bInter</span> <span class="n">S</span> <span class="n">Snempty</span><span class="o">),</span> <span class="o">{</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">this</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">allsnempty</span> <span class="n">s₀</span> <span class="n">hs₀</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">apply</span> <span class="n">finset.ext</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">xs₀</span><span class="o">,</span>
  <span class="n">apply</span> <span class="o">(</span><span class="n">mem_bInter_iff</span> <span class="n">S</span> <span class="n">Snempty</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span>
    <span class="n">rintro</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">dir</span> <span class="n">s₀</span> <span class="n">hs₀</span> <span class="n">s</span> <span class="n">hs</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span><span class="n">ht</span><span class="o">,</span><span class="n">ts₀</span><span class="o">,</span><span class="n">ts</span><span class="o">⟩,</span>
    <span class="k">suffices</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s₀</span><span class="o">,{</span>
      <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">ts</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">ts</span> <span class="n">xs₀</span><span class="o">,},</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="n">s₀</span> <span class="bp">≤</span> <span class="n">finset.card</span> <span class="n">t</span><span class="o">,</span> <span class="k">from</span> <span class="n">function.argmin_on_le</span> <span class="o">(</span><span class="n">finset.card</span><span class="o">)</span> <span class="o">(</span><span class="n">nat.lt_wf</span><span class="o">)</span> <span class="n">S</span> <span class="n">ht</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">finset.eq_of_subset_of_card_le</span> <span class="n">ts₀</span> <span class="n">this</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">xI</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">mem_bInter_iff</span> <span class="n">S</span> <span class="n">Snempty</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">xI</span> <span class="n">s₀</span> <span class="n">hs₀</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
<p>Happy enough with this. At first I wanted to argue by contradiction: assume that the inter is empty and fix some <code>s₀ \in S</code>, then there is for each x in s₀ some s_x not containing it, then we take an element of S below all s_x and this must be empty. I wonder if your proof is more constructive, or better in any sense.</p>



<a name="291448570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291448570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291448570">(Jul 30 2022 at 20:07)</a>:</h4>
<p>This is orthogonal to the discussion, but having propositions in data where it's not strictly needed to give an output is usually a bad idea. There's two main problems:</p>
<ul>
<li>Rewrite conflicts. Because some tactics like <code>rw</code> don't fully understand proof irrelevance, you sometimes need to write proofs in a more general way to take in the proof argument even when it could be built from what's given.</li>
<li>Proof duplication. For instance, every time you take the intersection of a singleton set, you need to give a proof that singletons are nonempty, instead of that being implicit in the results you prove.</li>
</ul>



<a name="291448620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291448620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291448620">(Jul 30 2022 at 20:08)</a>:</h4>
<p>If you really want to define this intersection of a set of finsets (which is really <code>sInter</code>), I recommend you do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sInter</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">hs</span> <span class="o">:</span> <span class="n">s.nonempty</span> <span class="k">then</span> <span class="o">{</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">hs.some</span> <span class="bp">|</span> <span class="bp">∀</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">y</span><span class="o">}</span> <span class="k">else</span> <span class="bp">∅</span>
</code></pre></div>



<a name="291489019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291489019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291489019">(Jul 31 2022 at 12:53)</a>:</h4>
<p>I'm having trouble parsing "having propositions in data where it's not strictly needed to give an output", can you expand on that?</p>



<a name="291490608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291490608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291490608">(Jul 31 2022 at 13:26)</a>:</h4>
<p>I'm confused, isn't <code>sInter</code> just <code>Inf</code>?</p>



<a name="291490703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291490703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291490703">(Jul 31 2022 at 13:28)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.conditionally_complete_lattice">docs#finset.conditionally_complete_lattice</a></p>



<a name="291490755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291490755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291490755">(Jul 31 2022 at 13:29)</a>:</h4>
<p>Yeah, that just needs a fintype.</p>



<a name="291490759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291490759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291490759">(Jul 31 2022 at 13:29)</a>:</h4>
<p>Huh, nevermind</p>



<a name="291490936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291490936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291490936">(Jul 31 2022 at 13:33)</a>:</h4>
<p>Why does it need a fintype?</p>



<a name="291491140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291491140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291491140">(Jul 31 2022 at 13:37)</a>:</h4>
<p>Because <code>Inf \empty = univ</code>, and you can't define both <code>conditionally_complete_lattice (finset \a)</code> without <code>fintype \a</code> and <code>complete_lattice (finset \a)</code> with <code>fintype \a</code> because that would form a non-defeq diamond.</p>



<a name="291491230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291491230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291491230">(Jul 31 2022 at 13:39)</a>:</h4>
<p>Maybe that's an argument for having separate <code>cInf</code> and <code>cSup</code> functions, for orders that are conditionally complete more generally than when they're complete.</p>



<a name="291491301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291491301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291491301">(Jul 31 2022 at 13:40)</a>:</h4>
<p>Can't they be made defeq?</p>



<a name="291491327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291491327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291491327">(Jul 31 2022 at 13:41)</a>:</h4>
<p>What makes the cInf version not work for both?</p>



<a name="291491508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291491508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291491508">(Jul 31 2022 at 13:45)</a>:</h4>
<p>For them to be defeq (or even just equal), we need to have <code>cInf \empty = Inf empty = univ</code>, so we need a fintype.</p>



<a name="291492668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291492668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291492668">(Jul 31 2022 at 14:11)</a>:</h4>
<p>We don't need that to be definitionally equal to univ though. I'll take a look at how <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.complete_lattice">docs#finset.complete_lattice</a> is defined</p>



<a name="291492675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291492675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291492675">(Jul 31 2022 at 14:11)</a>:</h4>
<p>Do we even have that?</p>



<a name="291493094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291493094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291493094">(Jul 31 2022 at 14:20)</a>:</h4>
<p>This is NOT about definitional equality, but about propositional equality.</p>



<a name="291493126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291493126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291493126">(Jul 31 2022 at 14:21)</a>:</h4>
<p>We seem to be missing <code>finset.complete_lattice</code>, but you can get it from <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.to_complete_lattice">docs#fintype.to_complete_lattice</a>.</p>



<a name="291493547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291493547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291493547">(Jul 31 2022 at 14:30)</a>:</h4>
<p>Wouldn't something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Inf</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="k">if</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="k">then</span> <span class="o">(</span><span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">finite</span> <span class="n">α</span> <span class="k">then</span> <span class="n">h.some.univ</span> <span class="k">else</span> <span class="bp">∅</span><span class="o">)</span> <span class="k">else</span> <span class="n">_</span>
</code></pre></div>
<p>work?</p>



<a name="291493581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291493581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291493581">(Jul 31 2022 at 14:31)</a>:</h4>
<p>Erhm... I guess, but that's not a scalable solution.</p>



<a name="291494331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291494331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291494331">(Jul 31 2022 at 14:49)</a>:</h4>
<p>What does it need to scale to?</p>



<a name="291494382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291494382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291494382">(Jul 31 2022 at 14:50)</a>:</h4>
<p>(also, what would the _ be there?)</p>



<a name="291495180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291495180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291495180">(Jul 31 2022 at 15:08)</a>:</h4>
<p>To "orders that are conditionally complete more generally than when they're complete".</p>



<a name="291495379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291495379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291495379">(Jul 31 2022 at 15:13)</a>:</h4>
<p>You can fill the <code>_</code> with <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.inf'">docs#finset.inf'</a>.</p>



<a name="291505362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291505362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291505362">(Jul 31 2022 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="461830">@Rémi Bottinelli</span> If you have a <code>def</code> taking in <code>Prop</code> arguments, but you can output some trash data without it, then you should prefer that. All theorems will have the same hypotheses but now you don't need to write these down when you build the data.</p>



<a name="291512550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20Intersection%20of%20a%20chain%20of%20nonempty%20finsets%20is%20nonempty./near/291512550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20Intersection.20of.20a.20chain.20of.20nonempty.20finsets.20is.20nonempty.2E.html#291512550">(Jul 31 2022 at 21:07)</a>:</h4>
<blockquote>
<p>You can fill the <code>_</code> with <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.inf'">docs#finset.inf'</a>.</p>
</blockquote>
<p>Not quite, but I guess you can if you start with checking if <code>s</code> is finite</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>