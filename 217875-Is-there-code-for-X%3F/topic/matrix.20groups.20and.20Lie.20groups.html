---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html">matrix groups and Lie groups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="290702410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290702410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290702410">(Jul 24 2022 at 22:08)</a>:</h4>
<p>I'm just itching to contribute something to mathlib. I can't find that <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.general_linear_group">docs#matrix.general_linear_group</a> is a Lie group, or the definitions of other common matrix Lie groups, or how to obtain a Lie algebra from a Lie group. Is somebody working on any of these, or should I try to tackle some of these? What would some missing prerequisites be?</p>



<a name="290702432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290702432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290702432">(Jul 24 2022 at 22:09)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="240862">@Oliver Nash</span></p>



<a name="290703175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290703175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290703175">(Jul 24 2022 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span>  You should see the stub at this file<br>
<a href="https://leanprover-community.github.io/mathlib_docs/geometry/manifold/instances/units_of_normed_algebra.html">https://leanprover-community.github.io/mathlib_docs/geometry/manifold/instances/units_of_normed_algebra.html</a></p>



<a name="290703237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290703237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290703237">(Jul 24 2022 at 22:28)</a>:</h4>
<p>Your timing is good actually, because one of the prerequisites mentioned in the TODO, </p>
<blockquote>
<p><code>cont_diff_mul</code> (needs to be generalized from field to algebra)</p>
</blockquote>
<p>was just completed last week, <a href="https://github.com/leanprover-community/mathlib/pull/15595">#15595</a></p>



<a name="290703249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290703249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290703249">(Jul 24 2022 at 22:29)</a>:</h4>
<p>So the main prerequisite is the other TODO mentioned,</p>
<blockquote>
<ul>
<li>for an open embedding <code>f</code>, whose domain is equipped with the induced manifold structure <code>f.singleton_smooth_manifold_with_corners</code>, characterization of smoothness of functions to/from this manifold in terms of smoothness in the target space.  See the pair of lemmas <code>cont_mdiff_coe_sphere</code> and <code>cont_mdiff.cod_restrict_sphere</code> for a model.</li>
</ul>
</blockquote>



<a name="290703373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290703373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290703373">(Jul 24 2022 at 22:32)</a>:</h4>
<p>After that, you should be well on the way to proving that GL(n) (in the form of the <a href="https://leanprover-community.github.io/mathlib_docs/find/units">docs#units</a> of <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map">docs#continuous_linear_map</a>, not the form <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.general_linear_group">docs#matrix.general_linear_group</a> you mentioned) is a Lie group.</p>



<a name="290703392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290703392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290703392">(Jul 24 2022 at 22:33)</a>:</h4>
<p>Thanks for the guide!</p>



<a name="290704507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290704507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290704507">(Jul 24 2022 at 23:00)</a>:</h4>
<p>In case you missed it we also have <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.general_linear_group">docs#linear_map.general_linear_group</a>, but that's not with continuity</p>



<a name="290704534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290704534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290704534">(Jul 24 2022 at 23:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> and I counted last week that there are at least five things in mathlib that could claim to be the general linear group.  "Sameness" is difficult in formalization!</p>



<a name="290705302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290705302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290705302">(Jul 24 2022 at 23:20)</a>:</h4>
<p>I'm curious what that list was, if you have it to hand</p>



<a name="290705332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290705332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290705332">(Jul 24 2022 at 23:21)</a>:</h4>
<p>I do, in fact:</p>
<ul>
<li><a href="https://leanprover-community.github.io/mathlib_docs/algebra/module/equiv.html#linear_equiv.automorphism_group">the group of automorphisms</a></li>
<li><a href="https://leanprover-community.github.io/mathlib_docs/linear_algebra/basic.html#linear_map.general_linear_group">units of the ring of endomorphisms</a></li>
<li><a href="https://leanprover-community.github.io/mathlib_docs/topology/algebra/module/basic.html#continuous_linear_equiv.automorphism_group">the group of bicontinuous automorphisms</a></li>
<li><a href="https://leanprover-community.github.io/mathlib_docs/topology/algebra/module/basic.html#continuous_linear_equiv.of_unit">units of the ring of continuous endomorphisms</a></li>
<li><a href="https://leanprover-community.github.io/mathlib_docs/linear_algebra/general_linear_group.html">matrix version</a></li>
</ul>



<a name="290705373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290705373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290705373">(Jul 24 2022 at 23:22)</a>:</h4>
<p>Number 4 is the one which will be made a Lie group by the above strategy.</p>



<a name="290705507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290705507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290705507">(Jul 24 2022 at 23:26)</a>:</h4>
<p>Oh of course, I forgot about the versions stated via equivs</p>



<a name="290717930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290717930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290717930">(Jul 25 2022 at 04:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416472">Winston Yin</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/matrix.20groups.20and.20Lie.20groups/near/290702410">said</a>:</p>
<blockquote>
<p>or how to obtain a Lie algebra from a Lie group</p>
</blockquote>
<p>I think we have something in this direction, but I forgot where to find it <span aria-label="oops" class="emoji emoji-1f643" role="img" title="oops">:oops:</span></p>



<a name="290732018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290732018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290732018">(Jul 25 2022 at 08:33)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/left_invariant_derivation.lie_algebra">docs#left_invariant_derivation.lie_algebra</a> which is one possible approach.</p>



<a name="290732139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290732139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290732139">(Jul 25 2022 at 08:34)</a>:</h4>
<p>I think a valuable addition would be to construct the Lie bracket on smooth sections of <a href="https://leanprover-community.github.io/mathlib_docs/find/tangent_bundle">docs#tangent_bundle</a> (for any manifold).</p>



<a name="290979022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/290979022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#290979022">(Jul 27 2022 at 02:05)</a>:</h4>
<p>(deleted)</p>



<a name="291383162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291383162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291383162">(Jul 29 2022 at 21:30)</a>:</h4>
<p>Lie group of ring units in PR <a href="https://github.com/leanprover-community/mathlib/pull/15763">#15763</a>. Still needs some cleanup</p>



<a name="291781106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291781106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291781106">(Aug 02 2022 at 23:09)</a>:</h4>
<p>Update: I've generalised the proofs so that <code>smooth_mul</code> and <code>smooth_inv</code> are now consequences of the theorem that the differentiability of a function <code>g : M → M'</code> between manifolds can be stated in terms of the differentiability of the corresponding function <code>f : E → E'</code> between the model vector spaces, given that there are open embeddings <code>e : M → E</code> and <code>e' : M' → E'</code>, and that the extended charts on <code>M</code> and <code>M'</code> coincide with <code>e</code> and <code>e'</code>, respectively.</p>



<a name="291781238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291781238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291781238">(Aug 02 2022 at 23:10)</a>:</h4>
<p>The actual file is still a mess. I'll need to wrestle with the type checker to find the least verbose arrangement of variables</p>



<a name="291781585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291781585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291781585">(Aug 02 2022 at 23:15)</a>:</h4>
<p>Because product manifolds are weird when formalised, there are two theorems, one more general (used to prove <code>smooth_mul</code>) but super verbose and the other only applying to manifolds made with <code>singleton_smooth_manifold_with_corners</code> (used to prove <code>smooth_inv</code>)</p>



<a name="291781838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291781838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291781838">(Aug 02 2022 at 23:18)</a>:</h4>
<p>Nice work!  I would recommend dividing into two separate lemmas, though.  One lemma should be just about when <code>M'</code>, the target, is made from an open embedding <code>e' : M' → E'</code>.  And the other lemma, which should cover everything you need about the domain, should be that when <code>M</code> is made from an open embedding <code>e : M → E</code>, then <code>e</code> itself is <code>cont_mdiff</code>.</p>



<a name="291781884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/291781884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#291781884">(Aug 02 2022 at 23:19)</a>:</h4>
<p>You can see what's done with <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_mdiff.cod_restrict_sphere">docs#cont_mdiff.cod_restrict_sphere</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_mdiff_coe_sphere">docs#cont_mdiff_coe_sphere</a> , respectively, as a model.</p>



<a name="292084083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292084083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292084083">(Aug 04 2022 at 23:37)</a>:</h4>
<p>I'm having some trouble using the sphere example as a model. What I'm trying to do is a generalisation of <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_diff_on.cont_mdiff_on">docs#cont_diff_on.cont_mdiff_on</a> that can be used to show both <code>smooth_mul</code> and <code>smooth_inv</code> for ring units. While the inverse is a map from <code>Rˣ</code> to <code>Rˣ</code>, which is made from <code>singleton_smooth_manifold_with_corners</code>, the multiplication is a map from the product manifold <code>Rˣ × Rˣ</code>, whose manifold structure isn't defeq to the one induced from a single open embedding <code>f : Rˣ × Rˣ → R × R</code>.</p>
<p>The way I've generalised the lemma to take care of this case is to assume the model with corners <code>I</code> for the domain <code>M</code> to be an open map, and to assume that the extended chart at every point on the codomain <code>M'</code> to cover the whole space <code>M'</code>. These two assumptions are obviously true in the case of manifolds made with <code>singleton_charted_space</code> and <code>model_with_corners_self</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">...</span>
<span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">E'</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M'</span><span class="o">}</span>
<span class="o">(</span><span class="n">hI</span> <span class="o">:</span> <span class="n">is_open_map</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">hI'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">M'</span><span class="o">,</span> <span class="o">(</span><span class="n">ext_chart_at</span> <span class="n">I'</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">source</span> <span class="bp">=</span> <span class="n">set.univ</span><span class="o">)</span>
<span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span> <span class="n">cont_diff_on</span> <span class="bp">𝕜</span> <span class="n">n</span> <span class="n">f</span> <span class="o">(</span><span class="n">ext_chart_at</span> <span class="n">I</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">target</span><span class="o">)</span>
<span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">ext_chart_at</span> <span class="n">I</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">ext_chart_at</span> <span class="n">I'</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∘</span> <span class="n">g</span> <span class="o">)</span> <span class="o">:</span>
<span class="n">cont_mdiff</span> <span class="n">I</span> <span class="n">I'</span> <span class="n">n</span> <span class="n">g</span>
</code></pre></div>
<p>If I'm understanding the suggestion correctly, we want the equivalent of <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_mdiff_coe_sphere">docs#cont_mdiff_coe_sphere</a> to show that the extended chart is smooth, and then the smoothness of <code>g</code> can be shown by first replacing it with <code>(ext_chart_at I' y).symm ∘ f ∘ (ext_chart_at I x)</code> and then using composition of smooth maps. However, the assumptions above appear to be too weak to show the smoothness of, say, <code>(ext_chart_at I x)</code> itself.</p>



<a name="292084723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292084723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292084723">(Aug 04 2022 at 23:44)</a>:</h4>
<p>I'd be happy to write some lemmas about the smoothness of open embeddings themselves, and they can certainly be used to show <code>smooth_inv</code>, but for the purpose of showing <code>smooth_mul</code>, the assumptions above seem to be relatively more general. Please let me know if I'm missing something!</p>



<a name="292084752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292084752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292084752">(Aug 04 2022 at 23:44)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15763">#15763</a> has a current version of the lemmas</p>



<a name="292086714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292086714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292086714">(Aug 05 2022 at 00:07)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span> Let's check we're on the same page.  Here are the two lemmas I was proposing you write.  The idea is that all manipulation of charts gets hidden inside them.  Did you try something along these lines?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">geometry.manifold.cont_mdiff</span>

<span class="kd">noncomputable theory</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="bp">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nontrivially_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
  <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span>
  <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">H</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="bp">𝕜</span> <span class="n">E</span> <span class="n">H</span><span class="o">)</span>
  <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">charted_space</span> <span class="n">H</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">topological_space.opens</span> <span class="n">M</span><span class="o">)</span>

<span class="c1">-- move this copy of `topological_space.opens.charted_space` to near the original lemma,</span>
<span class="c1">-- apparently need the variant because of the distinction between `↥s` and `↥↑s`</span>
<span class="kd">instance</span> <span class="n">topological_space.opens.charted_space'</span> <span class="o">:</span> <span class="n">charted_space</span> <span class="n">H</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">topological_space.opens.charted_space</span> <span class="n">s</span>

<span class="kd">lemma</span> <span class="n">cont_mdiff_coe_opens</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">cont_mdiff</span> <span class="n">I</span> <span class="n">I</span> <span class="n">m</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="n">E'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E'</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E'</span><span class="o">]</span>
  <span class="o">{</span><span class="n">H'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">H'</span><span class="o">]</span> <span class="o">{</span><span class="n">I'</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="bp">𝕜</span> <span class="n">E'</span> <span class="n">H'</span><span class="o">}</span>
  <span class="o">{</span><span class="n">M'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">charted_space</span> <span class="n">H'</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I'</span> <span class="n">M'</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">cont_mdiff.cod_restrict_opens</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">M'</span> <span class="bp">→</span> <span class="n">M</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">cont_mdiff</span> <span class="n">I'</span> <span class="n">I</span> <span class="n">m</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hf'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">cont_mdiff</span> <span class="n">I'</span> <span class="n">I</span> <span class="n">m</span> <span class="o">(</span><span class="n">set.cod_restrict</span> <span class="n">f</span> <span class="n">s</span> <span class="n">hf'</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="292086775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292086775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292086775">(Aug 05 2022 at 00:07)</a>:</h4>
<p>You can also look at <a href="https://leanprover-community.github.io/mathlib_docs/find/circle.lie_group">docs#circle.lie_group</a> to see how the analogues of these two lemmas turn up in the proof that the circle is a Lie group.</p>



<a name="292086999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292086999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292086999">(Aug 05 2022 at 00:10)</a>:</h4>
<p>If you hit problems in the with-boundary case (there are certainly subtleties there with products, and I haven't thought about whether the lemmas should still be true), you can drop the <code>H</code>'s and <code>I</code>'s and just work with <code>𝓘(𝕜, E)</code> or <code>𝓘(𝕜, E')</code> as needed.</p>



<a name="292089596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292089596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292089596">(Aug 05 2022 at 00:49)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span> PS Sorry, I just noticed that in your use case the units are not literally an open subset of the algebra, but rather are some type with a natural embedding to that algebra.  So you need the version of the above lemmas for an open embedding, rather than just subtype inclusion.  This should do it (again modulo caveats in the with-boundary case):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">geometry.manifold.cont_mdiff</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="bp">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nontrivially_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
  <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span>
  <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">H</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="bp">𝕜</span> <span class="n">E</span> <span class="n">H</span><span class="o">)</span>
  <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">nonempty</span> <span class="n">M</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">H</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">open_embedding</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">cont_mdiff_open_embedding</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">cont_mdiff</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">I</span> <span class="n">_</span> <span class="n">_</span> <span class="n">h.singleton_charted_space</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">I</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">m</span> <span class="n">f</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="n">E'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E'</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E'</span><span class="o">]</span>
  <span class="o">{</span><span class="n">H'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">H'</span><span class="o">]</span> <span class="o">{</span><span class="n">I'</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="bp">𝕜</span> <span class="n">E'</span> <span class="n">H'</span><span class="o">}</span>
  <span class="o">{</span><span class="n">M'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">charted_space</span> <span class="n">H'</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I'</span> <span class="n">M'</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">cont_mdiff.of_comp_open_embedding</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">φ</span> <span class="o">:</span> <span class="n">M'</span> <span class="bp">→</span> <span class="n">M</span><span class="o">}</span> <span class="o">(</span><span class="n">hφ</span> <span class="o">:</span> <span class="n">cont_mdiff</span> <span class="n">I'</span> <span class="n">I</span> <span class="n">m</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">φ</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">cont_mdiff</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">I'</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">I</span> <span class="n">_</span> <span class="n">_</span> <span class="n">h.singleton_charted_space</span> <span class="n">m</span> <span class="n">φ</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="292098781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292098781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292098781">(Aug 05 2022 at 02:34)</a>:</h4>
<p>Thanks for the detailed explanation. Suppose we have your <code>cont_mdiff.of_comp_open_embedding</code>. Is the strategy to then show <code>cont_mdiff I' I m (f ∘ φ)</code> by equivalently showing <code>cont_mdiff I' I m (φ' ∘ f')</code>, where <code>f' : M' → H'</code> is an open embedding and <code>φ'</code> is the "same" map as <code>φ</code> but on <code>E' → E</code>?</p>



<a name="292099440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292099440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292099440">(Aug 05 2022 at 02:36)</a>:</h4>
<p>Because the goal as I understand it is to express <code>cont_mdiff</code> on the manifolds in terms of the much simpler <code>cont_diff</code> on the model spaces, when there's an open embedding of the manifolds into the model space, on which a <code>cont_diff</code> lemma is already proven. A single theorem like <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_diff_on.cont_mdiff_on">docs#cont_diff_on.cont_mdiff_on</a> but more general</p>



<a name="292099690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292099690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292099690">(Aug 05 2022 at 02:37)</a>:</h4>
<p>I'm sorry if I'm fundamentally misunderstanding the intended use case of your suggested lemmas</p>



<a name="292100547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292100547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292100547">(Aug 05 2022 at 02:42)</a>:</h4>
<p>In particular for inversion of ring units, your <code>cont_mdiff.of_comp_open_embedding</code> would leave us with the goal <code>cont_mdiff 𝓘(𝕜, R) 𝓘(𝕜, R) ⊤ (coe ∘ λ (a : Rˣ), a⁻¹)</code>. A few more steps are still needed before <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_diff_at_ring_inverse">docs#cont_diff_at_ring_inverse</a> is applicable.</p>



<a name="292101726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292101726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292101726">(Aug 05 2022 at 03:03)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span> You can look at <a href="https://leanprover-community.github.io/mathlib_docs/find/circle.lie_group">docs#circle.lie_group</a> for a model.  So, e.g., to show that <code>inv : Rˣ → Rˣ</code> is m-smooth</p>
<ol>
<li>by <code>cont_mdiff.of_comp_open_embedding</code> it suffices to show that <code>coe ∘ inv : Rˣ → R</code> is m-smooth</li>
<li>the map <code>coe ∘ inv : Rˣ → R</code> is equal to <code>ring.inverse ∘ coe</code> (here <a href="https://leanprover-community.github.io/mathlib_docs/find/ring.inverse">docs#ring.inverse</a> is this extended-by-junk-values "inverse")</li>
<li>by <code>cont_mdiff_open_embedding</code> the map <code>coe : Rˣ → R</code> is m-smooth</li>
<li>by <a href="https://leanprover-community.github.io/mathlib_docs/find/cont_diff_at_ring_inverse">docs#cont_diff_at_ring_inverse</a> the map <code>ring.inverse : R → R</code> is smooth (on the needed domain) and therefore m-smooth</li>
<li>composition of m-smooth maps is m-smooth</li>
</ol>



<a name="292101821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292101821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292101821">(Aug 05 2022 at 03:05)</a>:</h4>
<p>That coincides with my understanding. Thank you.</p>



<a name="292101869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292101869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292101869">(Aug 05 2022 at 03:06)</a>:</h4>
<p>This 5 step process is what I initially imagined the generalised lemmas to be, hence the ones I wrote in the linked PR</p>



<a name="292101921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292101921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292101921">(Aug 05 2022 at 03:06)</a>:</h4>
<p>I will further break them down and rephrase them. Stay tuned :)</p>



<a name="292102001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292102001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292102001">(Aug 05 2022 at 03:08)</a>:</h4>
<p>By the way, I'll be on holiday next week, and not replying quite so fast!</p>



<a name="292104042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292104042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292104042">(Aug 05 2022 at 03:47)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span> One more suggestion.  The lemmas I suggested you route through are awkward, because of all the <code>_</code>.  When you <em>prove</em> them you can make it less awkward within the proofs by starting with a line like,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">letI</span> <span class="o">:=</span> <span class="n">h.singleton_charted_space</span><span class="o">,</span>
</code></pre></div>
<p>And afterwards, when you're <em>using</em> them, you can make it less awkward by restating them in the context when typeclass inference will be able to find the arguments:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span>
  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">{</span><span class="bp">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nontrivially_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_algebra</span> <span class="bp">𝕜</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">units.cont_mdiff_coe</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">cont_mdiff</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="n">m</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">R</span><span class="bp">ˣ</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">cont_mdiff_open_embedding</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="n">units.open_embedding_coe</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="n">E'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_add_comm_group</span> <span class="n">E'</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E'</span><span class="o">]</span>
  <span class="o">{</span><span class="n">H'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">H'</span><span class="o">]</span> <span class="o">{</span><span class="n">I'</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="bp">𝕜</span> <span class="n">E'</span> <span class="n">H'</span><span class="o">}</span>
  <span class="o">{</span><span class="n">M'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">charted_space</span> <span class="n">H'</span> <span class="n">M'</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I'</span> <span class="n">M'</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">cont_mdiff.of_comp_units_coe</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">φ</span> <span class="o">:</span> <span class="n">M'</span> <span class="bp">→</span> <span class="n">R</span><span class="bp">ˣ</span><span class="o">}</span> <span class="o">(</span><span class="n">hφ</span> <span class="o">:</span> <span class="n">cont_mdiff</span> <span class="n">I'</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="n">m</span> <span class="o">(</span><span class="n">coe</span> <span class="bp">∘</span> <span class="n">φ</span> <span class="o">:</span> <span class="n">M'</span> <span class="bp">→</span> <span class="n">R</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">cont_mdiff</span> <span class="n">I'</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="n">m</span> <span class="n">φ</span> <span class="o">:=</span>
<span class="n">cont_mdiff.of_comp_open_embedding</span> <span class="bp">𝓘</span><span class="o">(</span><span class="bp">𝕜</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span> <span class="n">units.open_embedding_coe</span> <span class="n">hφ</span>
</code></pre></div>



<a name="292106065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292106065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292106065">(Aug 05 2022 at 04:27)</a>:</h4>
<p>That’s good to know! Have a great holiday :)</p>



<a name="292217441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292217441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292217441">(Aug 05 2022 at 23:04)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> Your suggested lemma statements required no modification. I was able to prove them and use them to show <code>units.smooth_mul</code> and <code>units.smooth_inv</code>. These are pushed to the PR. I'll also do a little more cleanup.</p>



<a name="292218004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/matrix%20groups%20and%20Lie%20groups/near/292218004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/matrix.20groups.20and.20Lie.20groups.html#292218004">(Aug 05 2022 at 23:15)</a>:</h4>
<p>My initial approach was conceptually complicated because when showing <code>g : M → M'</code> is <code>cont_mdiff</code>, in the step <code>coe ∘ g = f ∘ coe'</code>, I was trying very hard to specify the factors on the RHS exactly, so that <code>coe'</code> must coincide with the manifold structure on <code>M'</code>. This requirement caused problems with product manifolds. I now see that one may freely choose the factorisation <code>f ∘ coe'</code> depending on what theorem already exists for <code>f</code> being <code>cont_mdiff</code>. So, thanks for clarifying this for me!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>