---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html">semidecidable</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="219710221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710221">(Dec 12 2020 at 14:02)</a>:</h4>
<p>I don't think semidecidable is quite the right word but I want the <code>decidable</code> equivalent of <code>option</code>: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">semidecidable</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span>  <span class="n">yes</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">semidecidable</span>
<span class="bp">|</span> <span class="n">idk</span> <span class="o">:</span> <span class="n">semidecidable</span>
</code></pre></div>



<a name="219710538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710538">(Dec 12 2020 at 14:11)</a>:</h4>
<p>I have proposed this before, with the same name, so I think that's evidence for its naturalness even though it's technically incorrect</p>



<a name="219710599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710599">(Dec 12 2020 at 14:12)</a>:</h4>
<p>ok, so I guess it's not in mathlib</p>



<a name="219710612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710612">(Dec 12 2020 at 14:13)</a>:</h4>
<p>nope, not unless you are happy with <code>option (plift p)</code></p>



<a name="219710616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710616">(Dec 12 2020 at 14:13)</a>:</h4>
<p>yeah that loses the semantics somewhat</p>



<a name="219710621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710621">(Dec 12 2020 at 14:13)</a>:</h4>
<p>ok cool I'll just add it at the top of my file</p>



<a name="219710812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710812">(Dec 12 2020 at 14:18)</a>:</h4>
<p>I wonder how you would define real semidecidable</p>



<a name="219710831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710831">(Dec 12 2020 at 14:19)</a>:</h4>
<p>I don't think synthetic semidecidability makes sense in lean</p>



<a name="219710837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710837">(Dec 12 2020 at 14:19)</a>:</h4>
<p>you can of course define it using <code>computability/</code> stuff</p>



<a name="219710886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710886">(Dec 12 2020 at 14:20)</a>:</h4>
<p>but this isn't going to reflect into a kernel decision procedure</p>



<a name="219710888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219710888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219710888">(Dec 12 2020 at 14:20)</a>:</h4>
<p>yeah I couldn't think what it would be without using computability</p>



<a name="219711072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711072">(Dec 12 2020 at 14:26)</a>:</h4>
<p>A simple example of a semidecision procedure is <code>nat.find</code>. It has the type <code>(\ex n : nat, p n) -&gt; {n | p n}</code> where <code>p</code> is a decidable proposition. The sense in which this is complete is that if the algorithm terminates, then <code>\ex n : nat, p n</code>; but we knew that already, it's a precondition. In the traditional definition we would say that if the property fails to hold then the algorithm does not terminate, but in lean's case there's no algorithm in that regime at all</p>



<a name="219711223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711223">(Dec 12 2020 at 14:30)</a>:</h4>
<p>nice</p>



<a name="219711324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711324">(Dec 12 2020 at 14:33)</a>:</h4>
<p>I was daydreaming that you could have a VM override for <code>semidecidable a = b</code> which checks if the VM objects are the same but the code as written in Lean always returns <code>idk</code>. Although that might just be confusing.</p>



<a name="219711377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711377">(Dec 12 2020 at 14:34)</a>:</h4>
<p>Also, this kind of object comes up in the pointer equality test in the lean 4 "pointer-based optimizations" paper</p>



<a name="219711490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711490">(Dec 12 2020 at 14:37)</a>:</h4>
<p>does this look familiar? (p.12 of <a href="https://arxiv.org/pdf/2003.01685.pdf">https://arxiv.org/pdf/2003.01685.pdf</a>)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">PtrEqResult</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">unknown</span>  <span class="o">:</span> <span class="n">PtrEqResult</span>
<span class="bp">|</span> <span class="n">yesEqual</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">PtrEqResult</span>
</code></pre></div>



<a name="219711509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711509">(Dec 12 2020 at 14:37)</a>:</h4>
<p>although in their case they are really returning a <code>trunc (semidecidable (x = y))</code></p>



<a name="219711562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711562">(Dec 12 2020 at 14:39)</a>:</h4>
<p>so actually I guess your daydream already exists in lean 4 by another name</p>



<a name="219711621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711621">(Dec 12 2020 at 14:40)</a>:</h4>
<p>Note that it is unsound to actually have the primitive return <code>semidecidable (x = y)</code>, because you can use it to detect if you are running in the logic or as compiled code, and do something evil in the second case</p>



<a name="219711850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711850">(Dec 12 2020 at 14:47)</a>:</h4>
<p>Yeah which is why they have the subsingleton β constraint</p>



<a name="219711893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711893">(Dec 12 2020 at 14:48)</a>:</h4>
<p>right</p>



<a name="219711899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711899">(Dec 12 2020 at 14:48)</a>:</h4>
<p>it's not necessary to write it in continuation passing style though, if you have <code>trunc</code> and <code>subsingleton</code></p>



<a name="219711910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711910">(Dec 12 2020 at 14:49)</a>:</h4>
<p>jolly good</p>



<a name="219711960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711960">(Dec 12 2020 at 14:50)</a>:</h4>
<p>I'm asking about it because I effectively sneak in a pointer-eq check in widgets (which is fine because it's all in meta mode anyway). But I was thinking about how to implement in Lean 4 but looks like they've got my case covered</p>



<a name="219711990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219711990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219711990">(Dec 12 2020 at 14:51)</a>:</h4>
<p>I think it's also useful for general decision procedures where you can't be bothered to prove the converse, for example equality in a random ring</p>



<a name="219712001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/semidecidable/near/219712001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/semidecidable.html#219712001">(Dec 12 2020 at 14:52)</a>:</h4>
<p>or type checking a term</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>