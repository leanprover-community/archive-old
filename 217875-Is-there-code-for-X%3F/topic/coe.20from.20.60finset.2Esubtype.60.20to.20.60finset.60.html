---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html">coe from `finset.subtype` to `finset`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="302654621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302654621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Youjack <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302654621">(Oct 06 2022 at 13:41)</a>:</h4>
<p>Is there such a coercion?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.finset.basic</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">finset</span> <span class="bp">$</span> <span class="n">subtype</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="302656406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302656406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302656406">(Oct 06 2022 at 13:49)</a>:</h4>
<p>No, you're meant to use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.image">docs#finset.image</a> or <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.map">docs#finset.map</a> explicitly.</p>



<a name="302658358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302658358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302658358">(Oct 06 2022 at 13:57)</a>:</h4>
<p>Given that there's <a href="https://leanprover-community.github.io/mathlib_docs/find/lift_fn_dom">docs#lift_fn_dom</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/coe_subtype">docs#coe_subtype</a>, it's a little surprising that there's not a <code>has_lift (set {(x : α) // p x}) (set α)</code> instance at least</p>



<a name="302658574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302658574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302658574">(Oct 06 2022 at 13:58)</a>:</h4>
<p>I'm going off the existence of <a href="https://leanprover-community.github.io/mathlib_docs/find/lift_list">docs#lift_list</a> for my mild surprise -- one would expect there were other container types (like <code>set</code> or <code>finset</code>) that have similar <code>has_lift</code> instances.</p>



<a name="302661825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302661825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Youjack <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302661825">(Oct 06 2022 at 14:11)</a>:</h4>
<p>I make it with <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.map">docs#finset.map</a></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.finset.basic</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">finset</span> <span class="bp">$</span> <span class="n">subtype</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="n">s.map</span> <span class="bp">$</span> <span class="n">function.embedding.subtype</span> <span class="n">p</span><span class="o">⟩</span>
</code></pre></div>



<a name="302692279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302692279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302692279">(Oct 06 2022 at 16:26)</a>:</h4>
<p>I agree with Kyle, a <code>has_lift</code> makes sense for "functor" like containers</p>



<a name="302692486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302692486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302692486">(Oct 06 2022 at 16:27)</a>:</h4>
<p>But then that will need a bunch more API, right?</p>



<a name="302692492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302692492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302692492">(Oct 06 2022 at 16:27)</a>:</h4>
<p><code>finset</code> isn't a lawful functor though</p>



<a name="302692599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302692599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302692599">(Oct 06 2022 at 16:28)</a>:</h4>
<p>I don't think we have any API for <code>lift_list</code> either</p>



<a name="302692726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302692726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302692726">(Oct 06 2022 at 16:28)</a>:</h4>
<p>What should be the coercion from <code>finset {a : α // p a}</code> to <code>set α</code> be?</p>



<a name="302693012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302693012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302693012">(Oct 06 2022 at 16:30)</a>:</h4>
<p>No default coercion, the same way a <code>has_lift</code> doesn't actually provide a coercion, you have to opt into it</p>



<a name="302694045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302694045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302694045">(Oct 06 2022 at 16:35)</a>:</h4>
<p>Ah, is this just for <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#lift">tactic#lift</a>?</p>



<a name="302698462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302698462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302698462">(Oct 06 2022 at 16:59)</a>:</h4>
<p>No, the coercion arrow looks for <code>has_lift</code> instances, and every <code>has_coe</code> instance gives a <code>has_lift</code> instance automatically</p>



<a name="302698628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302698628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302698628">(Oct 06 2022 at 17:00)</a>:</h4>
<p>The <code>lift</code> tactic is sort of for going the opposite direction of the coercion arrow, confusingly.</p>



<a name="302698667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302698667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302698667">(Oct 06 2022 at 17:00)</a>:</h4>
<p><code>can_lift</code> is the appropriate class for <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#lift">tactic#lift</a> <a href="https://github.com/leanprover-community/mathlib/blob/9cf494e0c4e277137e102249e0d098274ee23081/src/tactic/lift.lean#L22">https://github.com/leanprover-community/mathlib/blob/9cf494e0c4e277137e102249e0d098274ee23081/src/tactic/lift.lean#L22</a></p>



<a name="302778321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/coe%20from%20%60finset.subtype%60%20to%20%60finset%60/near/302778321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/coe.20from.20.60finset.2Esubtype.60.20to.20.60finset.60.html#302778321">(Oct 07 2022 at 04:15)</a>:</h4>
<p>I think it's reasonable for the API to just be "<code>↑</code> is not the simp-normal form, unfold it"</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>