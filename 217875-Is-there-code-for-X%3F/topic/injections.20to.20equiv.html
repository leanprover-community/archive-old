---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html">injections to equiv</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268030650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268030650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268030650">(Jan 14 2022 at 15:43)</a>:</h4>
<p>Where would I find <code>A ↪ B → B ↪ A → A ≃ B</code>?</p>



<a name="268030759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268030759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268030759">(Jan 14 2022 at 15:44)</a>:</h4>
<p>This would involve cardinals, so I would look in that part of mathlib.</p>



<a name="268030805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268030805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268030805">(Jan 14 2022 at 15:44)</a>:</h4>
<p>That's not going to be computable, right?</p>



<a name="268030850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268030850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268030850">(Jan 14 2022 at 15:44)</a>:</h4>
<p>No of course not.</p>



<a name="268030971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268030971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268030971">(Jan 14 2022 at 15:46)</a>:</h4>
<p>Hmm, should I try harder to think about computable proofs to have an easier time finding lemmas :-)</p>



<a name="268031035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031035">(Jan 14 2022 at 15:46)</a>:</h4>
<p>I would say that if your conclusion is an equiv that is obviously not computable, in general you should probably be looking for lemmas with the conclusion <code>#A = #B</code></p>



<a name="268031067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031067">(Jan 14 2022 at 15:46)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/cardinal.eq">docs#cardinal.eq</a></p>



<a name="268031079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031079">(Jan 14 2022 at 15:46)</a>:</h4>
<p>(or <code>fintype.card A = fintype.card B</code>)</p>



<a name="268031161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031161">(Jan 14 2022 at 15:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/function.embedding.cardinal_le">docs#function.embedding.cardinal_le</a> also seems helpful</p>



<a name="268031218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031218">(Jan 14 2022 at 15:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/cardinal.mk_le_of_injective">docs#cardinal.mk_le_of_injective</a></p>



<a name="268031490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031490">(Jan 14 2022 at 15:48)</a>:</h4>
<p>So <code>(cardinal.eq.1 (le_antisymm f.cardinal_le g.cardinal_le)).some</code>?</p>



<a name="268031691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031691">(Jan 14 2022 at 15:50)</a>:</h4>
<p>Ungolfed:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.cardinal</span>

<span class="n">open_locale</span> <span class="n">cardinal</span> <span class="n">classical</span>

<span class="kd">noncomputable</span> <span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">α</span> <span class="bp">↪</span> <span class="n">β</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">↪</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="bp">#</span><span class="n">α</span> <span class="bp">=</span> <span class="bp">#</span><span class="n">β</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">cardinal.eq</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">exact</span> <span class="n">this.some</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">cardinal.mk_le_of_injective</span> <span class="n">h1.2</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">cardinal.mk_le_of_injective</span> <span class="n">h2.2</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="268031786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031786">(Jan 14 2022 at 15:51)</a>:</h4>
<p>Oh yeah, nice trick with the embedding.cardinal_le</p>



<a name="268031815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031815">(Jan 14 2022 at 15:51)</a>:</h4>
<p>Good point, may be more natural via inequality on cardinals. I’ll try that.</p>



<a name="268031894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031894">(Jan 14 2022 at 15:51)</a>:</h4>
<p>Do I have to do something special  to get the <code>#</code> syntax? Is this the <code>open_local cardinal</code>? Can I do that within <code>begin</code>…<code>end</code>?</p>



<a name="268031951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031951">(Jan 14 2022 at 15:52)</a>:</h4>
<p><code>open_locale cardinal</code> should before the statement</p>



<a name="268031952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268031952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268031952">(Jan 14 2022 at 15:52)</a>:</h4>
<p>inequality on cardinals is just <code>le_antisymm f.cardinal_le g.cardinal_le</code>, so definitely more natural</p>



<a name="268032069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268032069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268032069">(Jan 14 2022 at 15:53)</a>:</h4>
<p>This is actually nearly the exact statement of <a href="https://leanprover-community.github.io/mathlib_docs/find/function.embedding.antisymm">docs#function.embedding.antisymm</a> which is what is used to prove <code>le_antisymm</code> for <code>cardinal</code> in the first place.</p>



<a name="268032111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268032111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268032111">(Jan 14 2022 at 15:53)</a>:</h4>
<p>Here is Eric's code, in mwe form:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.cardinal</span>

<span class="n">open_locale</span> <span class="n">cardinal</span>

<span class="kd">noncomputable</span> <span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">α</span> <span class="bp">↪</span> <span class="n">β</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">↪</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
<span class="o">(</span><span class="n">cardinal.eq.1</span> <span class="bp">$</span> <span class="n">le_antisymm</span> <span class="n">h1.cardinal_le</span> <span class="n">h2.cardinal_le</span><span class="o">)</span><span class="bp">.</span><span class="n">some</span>
</code></pre></div>



<a name="268032267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268032267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268032267">(Jan 14 2022 at 15:54)</a>:</h4>
<p>And Reid's proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">α</span> <span class="bp">↪</span> <span class="n">β</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">↪</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
<span class="o">(</span><span class="n">h1.antisymm</span> <span class="n">h2</span><span class="o">)</span><span class="bp">.</span><span class="n">some</span>
</code></pre></div>



<a name="268032466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268032466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268032466">(Jan 14 2022 at 15:55)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/function.embedding.schroeder_bernstein">docs#function.embedding.schroeder_bernstein</a> if you want the bare statements with injective hypotheses.</p>



<a name="268033567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268033567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268033567">(Jan 14 2022 at 16:03)</a>:</h4>
<p>Ok, beginner question, hope that's ok: how do I go from</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Hcard</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="o">(</span><span class="n">A</span> <span class="bp">≃</span> <span class="n">free_group</span> <span class="n">A</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">A</span> <span class="bp">≃</span> <span class="n">free_group</span> <span class="n">A</span>
</code></pre></div>
<p>(it’s all noncomputable anyways here.)</p>



<a name="268033617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268033617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268033617">(Jan 14 2022 at 16:03)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nonempty.some">docs#nonempty.some</a></p>



<a name="268033776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268033776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268033776">(Jan 14 2022 at 16:04)</a>:</h4>
<p>(Which is sugar for <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.choice">docs#classical.choice</a>, which is <em>the</em> axiom of choice in Lean)</p>



<a name="268033788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268033788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268033788">(Jan 14 2022 at 16:04)</a>:</h4>
<p>Thanks! :-)</p>



<a name="268034753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268034753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268034753">(Jan 14 2022 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="470149">@Joachim Breitner</span> Do I understand correctly that you're proving the fact that <code>free_group A</code> being isomorphic to <code>free_grroup B</code> implies that <code>A</code> is in bijection with <code>B</code>? If so, then I should mention that we have <a href="https://leanprover-community.github.io/mathlib_docs/find/basis">docs#basis</a> and it might be worthwhile to prove that the image of the canonical map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>F</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>→</mo><mi>F</mi><mo stretchy="false">(</mo><mi>X</mi><msup><mo stretchy="false">)</mo><mrow><mi>a</mi><mi>b</mi></mrow></msup></mrow><annotation encoding="application/x-tex">X \to F(X) \to F(X)^{ab}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ab</span></span></span></span></span></span></span></span></span></span></span></span> gives a basis for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>X</mi><msup><mo stretchy="false">)</mo><mrow><mi>a</mi><mi>b</mi></mrow></msup></mrow><annotation encoding="application/x-tex">F(X)^{ab}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ab</span></span></span></span></span></span></span></span></span></span></span></span> when considered as a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span>-module. I think that could be a useful construction anyway (if we don't already have it).</p>



<a name="268035001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035001">(Jan 14 2022 at 16:13)</a>:</h4>
<p>It looks like we don't have the statement in terms of a basis, but we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/free_abelian_group.equiv_finsupp">docs#free_abelian_group.equiv_finsupp</a></p>



<a name="268035038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035038">(Jan 14 2022 at 16:13)</a>:</h4>
<p>That’s my goal indeed. I guess I am  am unreasonably attached to the proof that I did in Isabelle before, arguing via cardinalities in the infinite case, and via <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>m</mi><mo stretchy="false">(</mo><msub><mi>F</mi><mi>X</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Hom(F_X, C_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> in the finite case.</p>



<a name="268035138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035138">(Jan 14 2022 at 16:14)</a>:</h4>
<p>The <code>basis</code> structure is a relatively recent addition to mathlib!</p>



<a name="268035238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035238">(Jan 14 2022 at 16:14)</a>:</h4>
<p>But I see it it’s hard to defend doing it that way (as much fun as it is) when an easier proof is possible…</p>



<a name="268035288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035288">(Jan 14 2022 at 16:15)</a>:</h4>
<p>I just think that the proof could be 1-2 lines long with the results we already have in mathlib.</p>



<a name="268035829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268035829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268035829">(Jan 14 2022 at 16:19)</a>:</h4>
<p>Fair enough. So I go from <code>free_group A</code> to <code>free_abelian_group X</code> (by def) then to <code>X →₀ ℤ</code>, and then find the lemma that shows that a basis of <code>X →₀ ℤ</code> is <code>X</code>, and that bases are in bijection.</p>



<a name="268036917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268036917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268036917">(Jan 14 2022 at 16:25)</a>:</h4>
<p>Do we have that all bases are the same size for free <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span>-modules?</p>



<a name="268036934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268036934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268036934">(Jan 14 2022 at 16:25)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/basis.index_equiv">docs#basis.index_equiv</a></p>



<a name="268037046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268037046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268037046">(Jan 14 2022 at 16:26)</a>:</h4>
<p>I started trying out some code, but it looks like we're missing some API for abelianizations:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.dimension</span>
<span class="kn">import</span> <span class="n">group_theory.free_abelian_group_finsupp</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">free_group</span> <span class="n">α</span> <span class="bp">≃*</span> <span class="n">free_group</span> <span class="n">β</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">free_abelian_group.basis</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">α</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">free_abelian_group</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨(</span><span class="n">free_abelian_group.equiv_finsupp</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">to_linear_equiv</span> <span class="bp">$</span> <span class="kd">by</span> <span class="n">tidy</span><span class="o">⟩</span>

<span class="kn">include</span> <span class="n">e</span>

<span class="kd">def</span> <span class="n">free_abelian_group.equiv_of_free_group</span> <span class="o">:</span> <span class="n">free_abelian_group</span> <span class="n">α</span> <span class="bp">≃+</span> <span class="n">free_abelian_group</span> <span class="n">β</span> <span class="o">:=</span>
<span class="n">mul_equiv.to_additive</span> <span class="bp">$</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="268037876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268037876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268037876">(Jan 14 2022 at 16:32)</a>:</h4>
<blockquote>
<p>Do we have that all bases are the same size for free Z\ZZ-modules?</p>
</blockquote>
<p>I’m looking for that, but I can’t find it (not that I have practice looking for stuff)</p>



<a name="268037987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268037987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268037987">(Jan 14 2022 at 16:33)</a>:</h4>
<p>It's <a href="https://leanprover-community.github.io/mathlib_docs/find/basis.index_equiv">docs#basis.index_equiv</a></p>



<a name="268038295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268038295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268038295">(Jan 14 2022 at 16:35)</a>:</h4>
<p>In particular, <a href="https://leanprover-community.github.io/mathlib_docs/find/invariant_basis_number_of_nontrivial_of_comm_ring">docs#invariant_basis_number_of_nontrivial_of_comm_ring</a></p>



<a name="268038591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268038591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268038591">(Jan 14 2022 at 16:38)</a>:</h4>
<p>Ah, different file. Thanks!</p>



<a name="268038978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268038978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268038978">(Jan 14 2022 at 16:40)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.dimension</span>
<span class="kn">import</span> <span class="n">group_theory.free_abelian_group_finsupp</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">free_group</span> <span class="n">α</span> <span class="bp">≃*</span> <span class="n">free_group</span> <span class="n">β</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">int_linear_equiv_of_add_equiv</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃+</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃ₗ</span><span class="o">[</span><span class="n">ℤ</span><span class="o">]</span> <span class="n">β</span> <span class="o">:=</span>
<span class="n">e.to_linear_equiv</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">c</span> <span class="n">a</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">erw</span> <span class="n">e.to_add_monoid_hom.map_zsmul</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">free_abelian_group.basis</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">α</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">free_abelian_group</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">int_linear_equiv_of_add_equiv</span> <span class="o">(</span><span class="n">free_abelian_group.equiv_finsupp</span> <span class="n">α</span><span class="o">)⟩</span>


<span class="kd">def</span> <span class="n">abelianization.equiv_of_equiv</span> <span class="o">{</span><span class="n">G</span> <span class="n">H</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">H</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">≃*</span> <span class="n">H</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">abelianization</span> <span class="n">G</span> <span class="bp">≃*</span> <span class="n">abelianization</span> <span class="n">H</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">abelianization.lift</span> <span class="bp">$</span> <span class="n">abelianization.of.comp</span> <span class="n">e.to_monoid_hom</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">abelianization.lift</span> <span class="bp">$</span> <span class="n">abelianization.of.comp</span> <span class="n">e.symm.to_monoid_hom</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintros</span> <span class="o">⟨</span><span class="n">a</span><span class="o">⟩,</span>
    <span class="c1">-- Missing dsimp lemma `quot.mk _ a = abelianization.of a`,</span>
    <span class="n">change</span> <span class="n">abelianization.lift</span> <span class="n">_</span> <span class="o">(</span><span class="n">abelianization.lift</span> <span class="n">_</span> <span class="o">(</span><span class="n">abelianization.of</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">abelianization.of</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintros</span> <span class="o">⟨</span><span class="n">a</span><span class="o">⟩,</span>
    <span class="c1">-- Missing dsimp lemma `quot.mk _ a = abelianization.of a`,</span>
    <span class="n">change</span> <span class="n">abelianization.lift</span> <span class="n">_</span> <span class="o">(</span><span class="n">abelianization.lift</span> <span class="n">_</span> <span class="o">(</span><span class="n">abelianization.of</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">abelianization.of</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">map_mul'</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">tidy</span> <span class="o">}</span>

<span class="kn">include</span> <span class="n">e</span>

<span class="kd">def</span> <span class="n">free_abelian_group.equiv_of_free_group</span> <span class="o">:</span> <span class="n">free_abelian_group</span> <span class="n">α</span> <span class="bp">≃+</span> <span class="n">free_abelian_group</span> <span class="n">β</span> <span class="o">:=</span>
<span class="n">mul_equiv.to_additive</span> <span class="bp">$</span> <span class="n">abelianization.equiv_of_equiv</span> <span class="n">e</span>

<span class="kd">def</span> <span class="n">free_abelian_group.linear_equiv_of_free_group</span> <span class="o">:</span> <span class="n">free_abelian_group</span> <span class="n">α</span> <span class="bp">≃ₗ</span><span class="o">[</span><span class="n">ℤ</span><span class="o">]</span> <span class="n">free_abelian_group</span> <span class="n">β</span> <span class="o">:=</span>
<span class="n">int_linear_equiv_of_add_equiv</span> <span class="o">(</span><span class="n">free_abelian_group.equiv_of_free_group</span> <span class="n">e</span><span class="o">)</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">equiv.of_free_group_equiv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃</span> <span class="n">β</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">t</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">α</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">free_abelian_group</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">free_abelian_group.basis</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="bp">$</span>
  <span class="n">free_abelian_group.linear_equiv_of_free_group</span> <span class="n">e</span> <span class="k">in</span> <span class="n">t.index_equiv</span> <span class="bp">$</span> <span class="n">free_abelian_group.basis</span> <span class="n">_</span>
</code></pre></div>



<a name="268039284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039284">(Jan 14 2022 at 16:42)</a>:</h4>
<p>I'm surprised that these various initial constructions are not in mathlib already (or maybe I missed them?).</p>



<a name="268039521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039521">(Jan 14 2022 at 16:44)</a>:</h4>
<p>I hope we can get <code>int_linear_equiv_of_add_equiv</code> for free by instead instantiating something like <code>[add_comm_group A] [add_comm_group B] : linear_equiv_class ℤ (A →+ B) A B</code>. But that will take a bit more development effort.</p>



<a name="268039565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039565">(Jan 14 2022 at 16:44)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_hom.to_int_linear_map">docs#add_monoid_hom.to_int_linear_map</a> but seemingly not the equiv version (which would live in <a href="https://tqft.net/mathlib/data/equiv/module">file#data/equiv/module</a>)</p>



<a name="268039582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039582">(Jan 14 2022 at 16:44)</a>:</h4>
<p>Nice. I’ll look for beginner-friendly low-hanging fruit elsewhere :-)</p>



<a name="268039640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039640">(Jan 14 2022 at 16:45)</a>:</h4>
<p>There is plenty of low hanging fruit in the proof above, since the first few constructions should have already been in mathlib.</p>



<a name="268039809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039809">(Jan 14 2022 at 16:46)</a>:</h4>
<p>And the related <code>nat</code> and <code>rat</code> versions of <code>to_int_linear_equiv</code> should also be added</p>



<a name="268039849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039849">(Jan 14 2022 at 16:46)</a>:</h4>
<p>I was hoping to just be able to write the last 4 lines :)</p>



<a name="268039857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268039857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268039857">(Jan 14 2022 at 16:46)</a>:</h4>
<p>Adding those three is definitely a beginner-friendly PR</p>



<a name="268040127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040127">(Jan 14 2022 at 16:48)</a>:</h4>
<p>I guess <code>abelianization.equiv_of_equiv</code> could be <code>mul_equiv.abelianization_congr</code> to match <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.finset_congr">docs#equiv.finset_congr</a> and enable dot notation?</p>



<a name="268040179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040179">(Jan 14 2022 at 16:49)</a>:</h4>
<p>I think we're pretty inconsistent about how to name those though (eg <a href="https://leanprover-community.github.io/mathlib_docs/find/free_group.free_group_congr">docs#free_group.free_group_congr</a>)</p>



<a name="268040394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040394">(Jan 14 2022 at 16:50)</a>:</h4>
<p>Shall I copy these lines into a PR and paste the link here, and you can comment there how to name them and where to put them? Or is that not faster than if one of you just puts them there?</p>



<a name="268040448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040448">(Jan 14 2022 at 16:51)</a>:</h4>
<p>I would probably make separate PRs for the unrelated content. Your build time will be shorter</p>



<a name="268040462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040462">(Jan 14 2022 at 16:51)</a>:</h4>
<p>(And your review time ;))</p>



<a name="268040494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040494">(Jan 14 2022 at 16:51)</a>:</h4>
<p>So one for each independent lemma?</p>



<a name="268040742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040742">(Jan 14 2022 at 16:53)</a>:</h4>
<p>Is the actual noncomputable bit in the example above <a href="https://leanprover-community.github.io/mathlib_docs/find/basis.index_equiv">docs#basis.index_equiv</a>?</p>



<a name="268040744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040744">(Jan 14 2022 at 16:53)</a>:</h4>
<p>I would say, one PR for the <code>int_linear_equiv_of_add_equiv</code> (or whatever other name we want), one for <code>free_abelian_group.basis</code>, one for <code>abelianization.equiv_of_equiv</code> (or whatever name we want) which should include the missing <code>dsimp</code> lemma, and one for the final result.</p>



<a name="268040797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040797">(Jan 14 2022 at 16:53)</a>:</h4>
<p>It annoys me that <code>basis</code> terms, which are in my mind a computable way to do linear algebra, are <code>noncomputable</code> by default due to the design of <code>finsupp</code>.</p>



<a name="268040907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268040907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268040907">(Jan 14 2022 at 16:54)</a>:</h4>
<p>Joachim, it's pretty common for new user to open mathlib PRs whose content was mostly written by other people here while answering questions. You still save work for Adam by putting those lemmas or definitions in their correct location and think a bit about possible generalization or a couple of extra helper lemma (for instance I see comments in Adam's code saying some lemmas are missing). And then you'll experience the PR process, which requires some time to get used to.</p>



<a name="268044244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268044244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268044244">(Jan 14 2022 at 17:19)</a>:</h4>
<p>Where would you expect <code>free_abelian_group.basis</code> to end up? It depends on <code>free_abelian_group_finsupp</code> and on wherever <code>int_linear_equiv_of_add_equiv</code> ends up (maybe <code>algebra/algebra/basic</code>), neither of which depend on each other so far.</p>



<a name="268046677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268046677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268046677">(Jan 14 2022 at 17:37)</a>:</h4>
<p>I think close to <code>free_abelian_group_finsupp</code> would make sense.</p>



<a name="268046769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/injections%20to%20equiv/near/268046769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/injections.20to.20equiv.html#268046769">(Jan 14 2022 at 17:38)</a>:</h4>
<p>That's in a leaf file of mathlib, I think. It's fine to add a dependency to it, so that <code>int_linear_equiv_of_add_equiv</code> is available there.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>