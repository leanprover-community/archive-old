---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html">Real as limit of sequence of rationals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="293924944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293924944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293924944">(Aug 17 2022 at 15:55)</a>:</h4>
<p>I am having a hard time working with limits in mathlib. For example, how would I write the fact that a real number <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> is a limit of a sequence of rationals?</p>



<a name="293926282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293926282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293926282">(Aug 17 2022 at 16:01)</a>:</h4>
<p>This is true by definition ;) </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℚ</span> <span class="n">abs</span><span class="o">,</span> <span class="n">real.mk</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">a</span> <span class="k">with</span> <span class="o">⟨⟨</span><span class="n">a</span><span class="o">⟩⟩,</span> <span class="n">use</span> <span class="n">a</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293926312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293926312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293926312">(Aug 17 2022 at 16:01)</a>:</h4>
<p>I don't know if we have such a lemma though</p>



<a name="293926400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293926400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293926400">(Aug 17 2022 at 16:01)</a>:</h4>
<p>Besides, one should probably use filters as opposed to sequences</p>



<a name="293928173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293928173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293928173">(Aug 17 2022 at 16:10)</a>:</h4>
<p>Yes, I realised that my question was a bit stupid since it is actually how the reals are defined in mathlib...</p>
<p>Ok, so what I have in mind is: how to prove the following lemma using the fact that reals are limits of sequence of rationals?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.metric_space.basic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="n">f</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="293931226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293931226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293931226">(Aug 17 2022 at 16:27)</a>:</h4>
<p>I found <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing.extend_unique">docs#dense_inducing.extend_unique</a> the other day</p>



<a name="293931849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293931849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293931849">(Aug 17 2022 at 16:30)</a>:</h4>
<p><del>Oh and we have <a href="https://leanprover-community.github.io/mathlib_docs/find/rational_cau_seq_pkg">docs#rational_cau_seq_pkg</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/abstract_completion.dense_inducing">docs#abstract_completion.dense_inducing</a> !</del> See below for a better solution using <a href="https://leanprover-community.github.io/mathlib_docs/find/rat.dense_embedding_coe_real">docs#rat.dense_embedding_coe_real</a> directly.</p>



<a name="293931970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293931970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293931970">(Aug 17 2022 at 16:30)</a>:</h4>
<p>There's also <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing.extend_eq">docs#dense_inducing.extend_eq</a> (for the first approach)</p>



<a name="293932648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293932648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293932648">(Aug 17 2022 at 16:34)</a>:</h4>
<p>But was your point that you want to do this explicitly via limits of sequences of rational for pedagogical reasons?</p>



<a name="293932679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293932679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293932679">(Aug 17 2022 at 16:34)</a>:</h4>
<p>Sorry? extend_eq seems just asserting the constructed <code>extend</code> is actually an extension. I can't see how it helps...</p>



<a name="293933015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293933015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293933015">(Aug 17 2022 at 16:36)</a>:</h4>
<p>These results looks great but still very powerful for the purpose. Surely, there is a way to use <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous.lim_eq">docs#continuous.lim_eq</a> and the fact that <code>x</code> is a limit a sequence of rationals? And, as suggested by <span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> , I certainly need to know more about using limits in mathlib so having a proof using limits would make me even more happy <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
<p>In fact, I don't know even how to simply state the fact that the real <code>x</code> is the limit of rational numbers using filters.</p>



<a name="293933284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293933284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293933284">(Aug 17 2022 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span>  If you use <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing.extend_unique">docs#dense_inducing.extend_unique</a> you get that extension of some function (in this case, the identity) on the rationals is equal to some other function (in our case, <code>f</code>), but then you need to know that the extension of the identity on rationals is the identity on the reals. Hence <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing.extend_eq">docs#dense_inducing.extend_eq</a>.</p>



<a name="293933576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293933576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293933576">(Aug 17 2022 at 16:39)</a>:</h4>
<p>The identity function on the reals is also a continuous function that is identity on the rationals. So both it and <code>f</code> equals <code>extend</code>, so they're equal.</p>



<a name="293933810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293933810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293933810">(Aug 17 2022 at 16:40)</a>:</h4>
<p>This says the real number <code>x</code> is the limit of some sequence of rational numbers.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">seq</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℚ</span><span class="o">),</span> <span class="n">filter.tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">seq</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="293933865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293933865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293933865">(Aug 17 2022 at 16:40)</a>:</h4>
<p>I admit I didn't think of this argument and thought something is missing when I saw <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing.extend_unique">docs#dense_inducing.extend_unique</a> the first time ...</p>



<a name="293934480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293934480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293934480">(Aug 17 2022 at 16:43)</a>:</h4>
<p>But do you need this for <em>pedagogical purposes</em>? That is, are you trying to teach something to students with this? If not, I would encourage going the abstract route; it's frequently the way to go.</p>



<a name="293934687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293934687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293934687">(Aug 17 2022 at 16:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals/near/293933810">said</a>:</p>
<blockquote>
<p>This says the real number <code>x</code> is the limit of some sequence of rational numbers.</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">seq</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℚ</span><span class="o">),</span> <span class="n">filter.tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">seq</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Thanks. Do you need some special code to make the <code>𝓝</code> works? I get <code>unknown identifier '𝓝'</code> on my side.</p>



<a name="293934758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293934758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293934758">(Aug 17 2022 at 16:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals/near/293934480">said</a>:</p>
<blockquote>
<p>But do you need this for <em>pedagogical purposes</em>? That is, are you trying to teach something to students with this? If not, I would encourage going the abstract route; it's frequently the way to go.</p>
</blockquote>
<p>Indeed. Let's say I'll do both <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="293934823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293934823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293934823">(Aug 17 2022 at 16:45)</a>:</h4>
<p>Guys, you should stop frightening Xavier now.</p>



<a name="293934846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293934846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293934846">(Aug 17 2022 at 16:45)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.instances.rat</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="n">f</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">rat.dense_embedding_coe_real.dense.equalizer</span> <span class="n">h1</span> <span class="n">continuous_id</span> <span class="o">(</span><span class="kd">by</span> <span class="n">ext</span> <span class="n">q</span> <span class="bp">;</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">h2</span> <span class="n">q</span><span class="o">)]</span>
</code></pre></div>



<a name="293935090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935090">(Aug 17 2022 at 16:47)</a>:</h4>
<p>For <code>𝓝</code>, use <code>open_locale topological_space</code></p>



<a name="293935135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935135">(Aug 17 2022 at 16:47)</a>:</h4>
<p>Well, I guess that answer the question but I am still going to need a little time to process that answer.</p>
<p>Anyway, thanks everybody. I think I have enough to produce three different proofs of the lemma now.</p>



<a name="293935441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935441">(Aug 17 2022 at 16:49)</a>:</h4>
<p>BTW, this fails for some reason...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.uniform_space.compare_reals</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="n">f</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">rational_cau_seq_pkg.induction_on</span> <span class="n">x</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="293935482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935482">(Aug 17 2022 at 16:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">synthesized</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">is</span> <span class="n">not</span> <span class="n">definitionally</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">expression</span> <span class="n">inferred</span> <span class="kd">by</span> <span class="n">typing</span> <span class="n">rules</span><span class="o">,</span> <span class="n">synthesized</span>
  <span class="n">pseudo_metric_space.to_uniform_space</span>
<span class="n">inferred</span>
  <span class="n">is_absolute_value.uniform_space</span> <span class="n">abs</span>
</code></pre></div>



<a name="293935586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935586">(Aug 17 2022 at 16:50)</a>:</h4>
<p>Xavier, you can make it easier to decipher by stating both the assumption and the conclusion in a more convenient way:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">id</span> <span class="bp">∘</span> <span class="n">coe</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">id</span> <span class="o">:=</span>
<span class="n">rat.dense_embedding_coe_real.dense.equalizer</span> <span class="n">h1</span> <span class="n">continuous_id</span> <span class="n">h2</span>
</code></pre></div>



<a name="293935678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935678">(Aug 17 2022 at 16:50)</a>:</h4>
<p>This means that <code>simp</code> and <code>simpa</code> in my first snippet are only used to bridge that gap.</p>



<a name="293935835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935835">(Aug 17 2022 at 16:51)</a>:</h4>
<p>Adam, this sounds pretty bad. It means then when we refactored to introduce <code>pseudo_metric_space</code> we created some bad diamond. But it should move to another thread.</p>



<a name="293935882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293935882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293935882">(Aug 17 2022 at 16:52)</a>:</h4>
<p>I'll repost in general</p>



<a name="293977203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293977203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293977203">(Aug 17 2022 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>, in <code> rat.dense_embedding_coe_real.dense.equalizer</code>, I think I see where the part <code>rat.dense_embedding_coe_real</code> comes from, but I cannot find to which function  the part <code>dense.equalizer</code>  relates to.</p>



<a name="293978113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293978113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293978113">(Aug 17 2022 at 21:21)</a>:</h4>
<p>It's <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_range.equalizer">docs#dense_range.equalizer</a></p>



<a name="293978194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293978194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293978194">(Aug 17 2022 at 21:22)</a>:</h4>
<p>If you have it open in VS Code, you should be able to hover over the pieces to see what the declaration is.</p>



<a name="293978518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293978518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293978518">(Aug 17 2022 at 21:24)</a>:</h4>
<p>It's also using the fact that <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_embedding">docs#dense_embedding</a> extends <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_inducing">docs#dense_inducing</a>, which has a field <code>dense</code> that says the map has <a href="https://leanprover-community.github.io/mathlib_docs/find/dense_range">docs#dense_range</a>. Do you know about dot notation in Lean, and how that works?</p>



<a name="293978990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293978990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293978990">(Aug 17 2022 at 21:28)</a>:</h4>
<p>Thanks for the explanation. </p>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals/near/293978518">said</a>:</p>
<blockquote>
<p>Do you know about dot notation in Lean, and how that works?</p>
</blockquote>
<p>Well, I thought I did. Maybe I'll have to think about it a bit more to understand what happens here.</p>



<a name="293979832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293979832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293979832">(Aug 17 2022 at 21:35)</a>:</h4>
<p>This is the dot notation unfolded:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">dense_range.equalizer</span> <span class="o">(</span><span class="n">dense_inducing.dense</span> <span class="o">(</span><span class="n">dense_embedding.to_dense_inducing</span> <span class="n">rat.dense_embedding_coe_real</span><span class="o">))</span> <span class="n">h1</span> <span class="n">continuous_id</span> <span class="n">h2</span>
</code></pre></div>
<p>Note that with dot notation, the explicit map <code>dense_embedding.to_dense_inducing</code> can be omitted because the structure <code>dense_embedding</code> extends <code>dense_inducing</code> and <code>dense_inducing.dense</code> is one of the fields of the latter.</p>



<a name="293980209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293980209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293980209">(Aug 17 2022 at 21:39)</a>:</h4>
<p>So, <code>rat.dense_embedding_coe_real</code> is a <code>dense_embedding</code> which we can plug into <code>dense_inducing.dense</code> (because Lean sees this <code>.dense</code> as a field of <code>dense_embedding</code> also, as described above). This results in <code>rat.dense_embedding_coe_real.dense : dense_range (coe : ℚ → ℝ)</code>, which we can then plug into <code>dense_range.equalizer</code>.</p>



<a name="293980216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293980216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293980216">(Aug 17 2022 at 21:39)</a>:</h4>
<p>Does that make sense?</p>



<a name="293980354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/293980354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#293980354">(Aug 17 2022 at 21:40)</a>:</h4>
<p>It does. Thanks a lot <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="294187362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20as%20limit%20of%20sequence%20of%20rationals/near/294187362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20as.20limit.20of.20sequence.20of.20rationals.html#294187362">(Aug 19 2022 at 00:00)</a>:</h4>
<p>FYI you can use <a href="https://leanprover-community.github.io/mathlib_docs/find/rat.dense_range_cast">docs#rat.dense_range_cast</a> to get your <code>dense_range</code> proof without needing to go through the embedding</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>