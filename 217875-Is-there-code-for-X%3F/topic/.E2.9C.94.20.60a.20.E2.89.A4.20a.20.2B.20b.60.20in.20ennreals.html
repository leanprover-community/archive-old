---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html">✔ `a ≤ a + b` in ennreals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316758957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316758957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316758957">(Dec 19 2022 at 14:40)</a>:</h4>
<p>Sorry, I feel like I'm spamming, but I'm stuck on another obvious thing it seems:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>



<a name="316759167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316759167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316759167">(Dec 19 2022 at 14:41)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/self_le_add_right">docs#self_le_add_right</a></p>



<a name="316759336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316759336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316759336">(Dec 19 2022 at 14:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



<a name="316759391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316759391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316759391">(Dec 19 2022 at 14:42)</a>:</h4>
<p>Ups, thanks! why is it it doesn't come up with <code>simp</code> and friends?</p>



<a name="316759629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316759629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316759629">(Dec 19 2022 at 14:43)</a>:</h4>
<p>I think it's rare that <code>simp</code> can solve inequalities. <del>Maybe <code>linarith</code>?</del> (doesn't work with <code>import data.real.ennreal</code>)</p>



<a name="316759792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316759792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316759792">(Dec 19 2022 at 14:44)</a>:</h4>
<p>Noted, thanks!</p>



<a name="316760575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316760575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316760575">(Dec 19 2022 at 14:48)</a>:</h4>
<p>I think the real question is why didn't <code>library_search</code> work!</p>



<a name="316761423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316761423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316761423">(Dec 19 2022 at 14:52)</a>:</h4>
<p>It is weird because <code>example {T : Type} (a b : T) [canonically_ordered_add_monoid T] := by library_search</code> succeeds and <code>example : canonically_ordered_add_monoid ennreal := by library_search</code> also succeeds at finding the instance.</p>



<a name="316779106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779106">(Dec 19 2022 at 16:14)</a>:</h4>
<p>Along the same line, I sometime must do <code>apply add_le_add_right _ _,</code> instead of simply <code>apply add_le_add_right</code> and I don't really get why.</p>



<a name="316779294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779294">(Dec 19 2022 at 16:14)</a>:</h4>
<p>mmh, wait, I don't think it even applies: it opens up a new goal.</p>



<a name="316779396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779396">(Dec 19 2022 at 16:15)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">covariant_class</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="o">(</span><span class="n">swap</span> <span class="n">has_add.add</span><span class="o">)</span> <span class="n">has_le.le</span>
</code></pre></div>



<a name="316779702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779702">(Dec 19 2022 at 16:16)</a>:</h4>
<p>Yeah, it's not the right lemma I think. <br>
So, where can I find a  <code>ennreal.add_le_add_right</code> ?</p>



<a name="316779804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779804">(Dec 19 2022 at 16:17)</a>:</h4>
<p>Do you mean a <code>self_le_add_right</code>?</p>



<a name="316779886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316779886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316779886">(Dec 19 2022 at 16:17)</a>:</h4>
<p>Oh, maybe not.</p>



<a name="316780033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780033">(Dec 19 2022 at 16:18)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ?</p>



<a name="316780042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780042">(Dec 19 2022 at 16:18)</a>:</h4>
<p>No, this time I mean <del><code>a ≤ b -&gt; a + c ≤ a + c</code></del> <code>a ≤ b -&gt; a + c ≤ b + c</code></p>



<a name="316780192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780192">(Dec 19 2022 at 16:19)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>
<p>(corrected)</p>



<a name="316780369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780369">(Dec 19 2022 at 16:20)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/real/ennreal.lean#L92">https://github.com/leanprover-community/mathlib/blob/master/src/data/real/ennreal.lean#L92</a></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- TODO: why are the two covariant instances necessary? why aren't they inferred?</span>
<span class="kd">instance</span> <span class="n">covariant_class_mul_le</span> <span class="o">:</span> <span class="n">covariant_class</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">canonically_ordered_comm_semiring.to_covariant_mul_le</span>

<span class="kd">instance</span> <span class="n">covariant_class_add_le</span> <span class="o">:</span> <span class="n">covariant_class</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span> <span class="o">(</span><span class="bp">+</span><span class="o">)</span> <span class="o">(</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">ordered_add_comm_monoid.to_covariant_class_left</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="bp">∞</span>
</code></pre></div>



<a name="316780470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780470">(Dec 19 2022 at 16:20)</a>:</h4>
<p>Surely you don't mean <code>a + c &lt;= a + c</code>?</p>



<a name="316780551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780551">(Dec 19 2022 at 16:21)</a>:</h4>
<p>I agree with the confusion expressed by this comment... but the one you need is<br>
<code>ordered_add_comm_monoid.to_covariant_class_right (M : Type u_1) [ordered_add_comm_monoid M] :
covariant_class M M (function.swap has_add.add) has_le.le</code><br>
so I guess that's why it doesn't work?</p>



<a name="316780582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780582">(Dec 19 2022 at 16:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.ennreal</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">-&gt;</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">add_le_add_right</span> <span class="n">h</span> <span class="n">c</span>
</code></pre></div>
<p>What is the question?</p>



<a name="316780776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316780776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316780776">(Dec 19 2022 at 16:22)</a>:</h4>
<p>sorry, that was very stupid of me</p>



<a name="316781280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316781280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316781280">(Dec 19 2022 at 16:25)</a>:</h4>
<p>mmh, but it still gets me trouble if I just <code>apply</code> it in a less minimal context<br>
<strong>edit</strong> but if I feed it the <code>c</code> parameter it's happy.</p>



<a name="316781499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316781499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316781499">(Dec 19 2022 at 16:26)</a>:</h4>
<p>Am I witnessing <code>ennreal</code> papercuts or just being a bit dense?</p>



<a name="316782437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316782437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316782437">(Dec 19 2022 at 16:31)</a>:</h4>
<p>I think you're just witnessing the <code>apply</code> bug. <code>refine</code> is better in this situation.</p>



<a name="316782955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/316782955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#316782955">(Dec 19 2022 at 16:33)</a>:</h4>
<p>And a <code>library_search</code> bug</p>



<a name="317092160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/317092160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#317092160">(Dec 21 2022 at 06:44)</a>:</h4>
<p>OK, I've got another one I can't figure out:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.ennreal</span>
<span class="kn">import</span> <span class="n">data.real.ereal</span>

<span class="kd">lemma</span> <span class="n">ennreal.neg_to_ereal_le_to_ereal</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ereal</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ereal</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>



<a name="317096220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/317096220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#317096220">(Dec 21 2022 at 07:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.ereal</span>

<span class="kd">lemma</span> <span class="n">ennreal.neg_to_ereal_le_to_ereal</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ennreal</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ereal</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ereal</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">le_trans</span> <span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ereal.neg_le</span><span class="o">,</span> <span class="n">neg_zero</span><span class="o">],</span> <span class="n">positivity</span> <span class="c">/-</span><span class="cm"> or ereal.coe_ennreal_nonneg a -/</span> <span class="o">})</span>
  <span class="o">(</span><span class="n">ereal.coe_ennreal_nonneg</span> <span class="n">b</span><span class="o">)</span>
</code></pre></div>



<a name="317097437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20%60a%20%E2%89%A4%20a%20%2B%20b%60%20in%20ennreals/near/317097437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20.60a.20.E2.89.A4.20a.20.2B.20b.60.20in.20ennreals.html#317097437">(Dec 21 2022 at 07:30)</a>:</h4>
<p>Thanks! I hadn't spotted <code>theorem ereal.coe_ennreal_nonneg</code> and didn't know about <code>positivity</code>!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>