---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html">tactic to eliminate double negation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212219014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212219014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212219014">(Oct 04 2020 at 11:29)</a>:</h4>
<p>Is there a tactic that does nothing except change <code>not not P</code> to <code>P</code> everywhere in an expression?</p>



<a name="212219253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212219253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212219253">(Oct 04 2020 at 11:35)</a>:</h4>
<p><code>simp only [not_not]</code></p>



<a name="212219317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212219317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212219317">(Oct 04 2020 at 11:37)</a>:</h4>
<p>Thank you.</p>



<a name="212219902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212219902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212219902">(Oct 04 2020 at 11:53)</a>:</h4>
<p>The simp lemma has to be of the form <code>l = r</code> or <code>l ↔ r</code>?</p>



<a name="212220649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212220649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212220649">(Oct 04 2020 at 12:15)</a>:</h4>
<p>Out of curiosity, is there a theoretical limitation preventing having a similar tactic that also works for <code>→</code>?</p>



<a name="212222059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212222059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212222059">(Oct 04 2020 at 12:51)</a>:</h4>
<p>Find the iff version using library search and simp on that instead</p>



<a name="212222145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212222145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212222145">(Oct 04 2020 at 12:53)</a>:</h4>
<p>I was just thinking it might be an interesting exercise to make one, but not if it is theoretically impossible.</p>



<a name="212222587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212222587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212222587">(Oct 04 2020 at 13:07)</a>:</h4>
<p>It's a rather different problem, because everything in Lean preserves <code>=</code>, while only some specific subset of things preserves <code>→</code>.</p>



<a name="212222799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212222799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212222799">(Oct 04 2020 at 13:12)</a>:</h4>
<p>For example if <code>p = q</code> then you can conclude <code>not p = not q</code> but from <code>p -&gt; q</code> you can't conclude <code>not p -&gt; not q</code>.</p>



<a name="212231750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212231750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212231750">(Oct 04 2020 at 17:16)</a>:</h4>
<p>You may also be interested in <code>push_neg</code></p>



<a name="212233073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212233073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212233073">(Oct 04 2020 at 17:45)</a>:</h4>
<p>How do you use <code>simp</code> to simplify a hypothesis, for example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="k">have</span> <span class="n">s1</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="c1">-- use a variation of simp only [not_not] here</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212233322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212233322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212233322">(Oct 04 2020 at 17:50)</a>:</h4>
<p><code>simp at s1</code></p>



<a name="212233385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212233385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212233385">(Oct 04 2020 at 17:52)</a>:</h4>
<p>Although it'd be better to use <code>simp only [...]</code>, as that hint says, so <code>simp only [not_not] at s1</code></p>



<a name="212233879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212233879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212233879">(Oct 04 2020 at 18:02)</a>:</h4>
<p>I may be doing something else wrong. This doesn't seem to work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">lemma</span> <span class="n">not_not_1</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">a1</span> <span class="o">:</span>  <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span><span class="o">,</span>
<span class="n">by_contradiction</span> <span class="o">(</span>
  <span class="k">assume</span> <span class="n">a2</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">P</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">a1</span> <span class="n">a2</span>
<span class="o">)</span>

<span class="kd">lemma</span> <span class="n">not_not_2</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">a1</span> <span class="o">:</span> <span class="n">P</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">a2</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">P</span><span class="o">,</span>
<span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">a2</span> <span class="n">a1</span>

<span class="kd">lemma</span> <span class="n">not_not'</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">P</span> <span class="o">:=</span>
<span class="n">iff.intro</span> <span class="n">not_not_1</span> <span class="n">not_not_2</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="k">have</span> <span class="n">s1</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
<span class="k">have</span> <span class="n">s2</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">),</span> <span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_not'</span><span class="o">]</span> <span class="n">at</span> <span class="n">s1</span><span class="o">,</span>
<span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212234038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234038">(Oct 04 2020 at 18:05)</a>:</h4>
<p><code>simp</code> changes the existing hypothesis; this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="n">s2</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">),</span> <span class="kd">by</span> <span class="o">{</span><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_not'</span><span class="o">]</span> <span class="n">at</span> <span class="n">s1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">s1</span><span class="o">},</span>
</code></pre></div>



<a name="212234323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234323">(Oct 04 2020 at 18:11)</a>:</h4>
<p>Oh. Can it be used to return the result instead?</p>



<a name="212234342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234342">(Oct 04 2020 at 18:11)</a>:</h4>
<p>That is, is there an option to it for that.</p>



<a name="212234405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234405">(Oct 04 2020 at 18:13)</a>:</h4>
<p>What do you mean by "return the result"?</p>



<a name="212234497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234497">(Oct 04 2020 at 18:15)</a>:</h4>
<p>Maybe add a new hypothesis with a user given name and leave s1 unchanged?</p>



<a name="212234514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234514">(Oct 04 2020 at 18:15)</a>:</h4>
<p>I guess it doesn't really matter.</p>



<a name="212234519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234519">(Oct 04 2020 at 18:15)</a>:</h4>
<p>That's what Ruben's code does. <code>s1</code> is the same before and after that line.</p>



<a name="212234521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234521">(Oct 04 2020 at 18:15)</a>:</h4>
<p>Nevermind, sorry.</p>



<a name="212234586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234586">(Oct 04 2020 at 18:16)</a>:</h4>
<p>Oh. Right. I was putting the cursor after the first part of it, I didn't expect it to change back.</p>



<a name="212234596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/tactic%20to%20eliminate%20double%20negation/near/212234596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/tactic.20to.20eliminate.20double.20negation.html#212234596">(Oct 04 2020 at 18:17)</a>:</h4>
<p>Thank you.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>