---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html">is_regular.inj</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="296144529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296144529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296144529">(Aug 30 2022 at 15:18)</a>:</h4>
<p>Dear All,</p>
<p>is something like the lemma below already in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.regular.basic</span>

<span class="kd">lemma</span> <span class="n">is_left_regular.inj</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">is_left_regular</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span><span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">↔</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">hx</span> <span class="n">h</span><span class="o">,</span> <span class="n">congr_arg</span> <span class="n">_</span><span class="o">⟩</span>
</code></pre></div>
<p>I know that I was the one who defined <code>regular</code> elements, but at the time, I had a much more limited understanding of Lean.</p>
<p>If the lemma above (and its various sided/additive forms) is not in mathlib, should I PR it?</p>
<p>Thanks!</p>



<a name="296145018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296145018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296145018">(Aug 30 2022 at 15:21)</a>:</h4>
<p>(Side comment: now that dot-notation works better, <code>is_left_regular</code> can be defined as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_left_regular</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="o">((</span><span class="bp">*</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">injective</span>
</code></pre></div>
<p><span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> )</p>



<a name="296150488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296150488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296150488">(Aug 30 2022 at 15:43)</a>:</h4>
<p>I PRed in the end.  The deciding factor was that I could not wait to shorten the definitions of <code>regular</code> using dot-notation!  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> </p>
<p><a href="https://github.com/leanprover-community/mathlib/pull/16312">#16312</a></p>



<a name="296176721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296176721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296176721">(Aug 30 2022 at 17:29)</a>:</h4>
<p>Since when did lean support that new dot notation?</p>



<a name="296178503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296178503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296178503">(Aug 30 2022 at 17:38)</a>:</h4>
<p>3.47 (5 days ago) I believe, thanks to <span class="user-mention" data-user-id="306601">@Kyle Miller</span></p>



<a name="296178981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296178981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296178981">(Aug 30 2022 at 17:40)</a>:</h4>
<p>And for mathlib, today!</p>
<p><a href="https://github.com/leanprover-community/mathlib/pull/16315">#16315</a> is a small PR to add dot notation for modus tollens (<code>function.mt</code> and <code>function.mtr</code>)</p>



<a name="296188947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296188947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296188947">(Aug 30 2022 at 18:30)</a>:</h4>
<p>What's the point of <code>function.mt</code> <del>given it could never save a character</del> (edit: see below for an example showing this is false)? And should <code>function.mtr</code> simply be <code>mtr</code> for consistency?</p>



<a name="296192204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296192204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296192204">(Aug 30 2022 at 18:48)</a>:</h4>
<p>It could save characters, if you avoid needing parentheses.</p>



<a name="296193969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296193969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296193969">(Aug 30 2022 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span> I don't think saving keystrokes should be a primary consideration in most cases, especially if the difference is only a handful of keystrokes, or in this case none at all.</p>
<p>Here are a few reasons that come to mind justifying <code>function.mt</code>:</p>
<ul>
<li>Perhaps <code>function.mt</code> should replace <code>mt</code> entirely, since a two-letter function name is polluting the global namespace (it's plausible <code>mt</code> could be a local).</li>
<li>Dot notation is familiar with <code>iff</code>, and this makes implications behave similarly (though <code>iff</code> uses <code>h.not.symm</code> or <code>h.not.mpr</code> for its modus tollens).</li>
<li><code>h1.mt h2</code> has different parsing rules from <code>mt h1 h2</code>, and one might like the aesthetics of dot notation more. I like it because I think of modus tollens as a transformation of the implication.</li>
</ul>



<a name="296194812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296194812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296194812">(Aug 30 2022 at 19:02)</a>:</h4>
<p>It would be cool if dot notation on <code>Prop → Prop</code> tried <a href="https://leanprover-community.github.io/mathlib_docs/find/implies">docs#implies</a> as the namespace first</p>



<a name="296194879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296194879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296194879">(Aug 30 2022 at 19:03)</a>:</h4>
<p><code>implies.mt</code> feels like a much less weird name</p>



<a name="296195628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296195628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296195628">(Aug 30 2022 at 19:07)</a>:</h4>
<p>I think the other two are good points, but I can't make sense of</p>
<blockquote>
<p>Dot notation is familiar with iff, and this makes implications behave similarly (though iff uses h.not.symm or h.not.mpr for its modus tollens).</p>
</blockquote>
<p>Can you explain? What does it have to do with <code>iff</code>?</p>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/is_regular.2Einj/near/296192204">said</a>:</p>
<blockquote>
<p>It could save characters, if you avoid needing parentheses.</p>
</blockquote>
<p>Can you give an example? If it's not a single name you'd need to enclose it in <code>()</code> to write <code>.mt</code> right?</p>



<a name="296195946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296195946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296195946">(Aug 30 2022 at 19:09)</a>:</h4>
<p>I meant something like <code>f (mt g)</code> can now be spelled <code>f g.mt</code>: 6 chars instead of 8!  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="296196244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296196244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296196244">(Aug 30 2022 at 19:11)</a>:</h4>
<p>Actually, more than decreased number of characters, I think that this can be slightly more readable.  At least, it is good to have the option!</p>



<a name="296196435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296196435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296196435">(Aug 30 2022 at 19:12)</a>:</h4>
<p>Nice! I think I never encountered unapplied <code>mt _</code> so I didn't realize that's a possibility.</p>



<a name="296197183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296197183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296197183">(Aug 30 2022 at 19:17)</a>:</h4>
<p>Regarding <code>iff</code>: I think it makes sense to introduce a coercion from <code>iff</code> to <code>implies</code> (maybe an equiv_like instance; I don't think we have these currently), analogous to the <code>equiv.to_fun</code> cocercion.</p>



<a name="296197296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296197296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296197296">(Aug 30 2022 at 19:17)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span> It has to do with <code>iff</code> since we already interact with <code>iff</code> using dot notation frequently, and so it makes things more consistent if implications can use dot notation for similar tasks.</p>



<a name="296197787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296197787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296197787">(Aug 30 2022 at 19:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/is_regular.2Einj/near/296197183">said</a>:</p>
<blockquote>
<p>Regarding <code>iff</code>: I think it makes sense to introduce a coercion from <code>iff</code> to <code>implies</code> (I don't think we have this currently), analogous to the <code>equiv.to_fun</code> cocercion.</p>
</blockquote>
<p>This idea comes up every once in a while (I think <span class="user-mention" data-user-id="310045">@Eric Wieser</span> and I were the last to propose it), but there is relatively strong opposition.</p>
<p>If I remember correctly, it would be acceptable (or rather, it wouldn't immediately be unacceptable) if it were hidden behind a locale, since then it wouldn't lead to students being confused about implications vs iffs.</p>



<a name="296198004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296198004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296198004">(Aug 30 2022 at 19:21)</a>:</h4>
<p>So IIUC, you mean that we use dot notations <code>.mp</code>, <code>.mpr</code> (which are, specifically, structure projections) to get <code>implies/function</code> from <code>iff</code>, so it's natural to concatenate dot notations after <code>.mp(r)</code> which necessitates more dot notations for <code>implies/function</code>. I agree this is also a good point!</p>



<a name="296201840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296201840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296201840">(Aug 30 2022 at 19:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/is_regular.2Einj/near/296194812">said</a>:</p>
<blockquote>
<p>It would be cool if dot notation on <code>Prop → Prop</code> tried <a href="https://leanprover-community.github.io/mathlib_docs/find/implies">docs#implies</a> as the namespace first</p>
</blockquote>
<p>Yes, it would be. This might have to wait until the mathlib port is complete to simplify coordinating changes to Lean 3 and 4, but if Lean 4 adopts this feature, I'll happily backport it to Lean 3.</p>
<p>Here's a general version I was thinking about before for namespaces:</p>
<ul>
<li>If it's a non-dependent <code>Prop</code>-valued pi, then <code>implies</code>, otherwise</li>
<li>If it's a dependent <code>Prop</code>-valued pi, then <code>forall</code>, otherwise</li>
<li>If it's a non-dependent pi, then <code>function</code>, otherwise</li>
<li>If it's a dependent pi, then <code>pi</code>.</li>
</ul>
<p>This also defines the search order if the name in that namespace does not exist. In particular, it's a diamond, and these are the possible search orders:</p>
<ul>
<li><code>implies</code>, <code>forall</code>, <code>function</code>, <code>pi</code></li>
<li><code>forall</code>, <code>pi</code></li>
<li><code>function</code>, <code>pi</code></li>
<li><code>pi</code></li>
</ul>



<a name="296204944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296204944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296204944">(Aug 30 2022 at 19:30)</a>:</h4>
<p>It might not be necessary to have all four. (For example, perhaps <code>forall</code> and <code>implies</code> could be merged.)</p>



<a name="296209087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/is_regular.inj/near/296209087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/is_regular.2Einj.html#296209087">(Aug 30 2022 at 19:43)</a>:</h4>
<p>I am torn between "this is a super-cool feature" and "this will be really confusing for newcomers"</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>