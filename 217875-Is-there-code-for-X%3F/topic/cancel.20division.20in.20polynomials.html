---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html">cancel division in polynomials</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273788140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273788140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273788140">(Mar 02 2022 at 10:56)</a>:</h4>
<p>I currently have this result:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">cyclotomic_dvd_geom_sum_of_dvd</span> <span class="o">{</span><span class="n">d</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hdn</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">∣</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">cyclotomic</span> <span class="n">d</span> <span class="n">ℤ</span> <span class="bp">∣</span> <span class="n">geom_sum</span> <span class="n">X</span> <span class="n">n</span> <span class="o">:=</span>
</code></pre></div>
<p>I'd like to be able to derive <code>(hd : d ∣ n) (hd0 : d ≠ 0) (hdn : d &lt; n) : (cyclotomic n ℤ).eval q ∣ (q ^ n - 1) / (q ^ d - 1)</code> (or well, the polynomial version) from this easily. However, I don't see any way to do this; <code>div_by_monic</code> doesn't seem to have any cancellation theorems at all! Is it just worth it to prove the appropriate result for <code>geom_sum</code> directly, instead?</p>



<a name="273790029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273790029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273790029">(Mar 02 2022 at 11:10)</a>:</h4>
<p>I would avoid using <code>/ₘ</code> at all, and just providing the quotient explicitly.</p>



<a name="273790171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273790171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273790171">(Mar 02 2022 at 11:11)</a>:</h4>
<p>By "explicitly" I mean using some other divisibility result, not the actual formula.</p>



<a name="273790399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273790399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273790399">(Mar 02 2022 at 11:13)</a>:</h4>
<p>We know that  <code>q ^ d - 1</code> divides  <code>q ^ n - 1</code>?</p>



<a name="273791475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273791475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273791475">(Mar 02 2022 at 11:23)</a>:</h4>
<p>amazingly, it seems not</p>



<a name="273791968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273791968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273791968">(Mar 02 2022 at 11:26)</a>:</h4>
<p>It's <a href="https://leanprover-community.github.io/mathlib_docs/find/commute.geom">docs#commute.geom</a>_sum₂_mul , isn't it? Take  <code>n = d</code>, <code>x = q ^(n/d)</code> and <code>y = 1</code> or something like that.</p>



<a name="273792576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273792576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273792576">(Mar 02 2022 at 11:31)</a>:</h4>
<p>Why docs# doesn't work?! <a href="https://leanprover-community.github.io/mathlib_docs/algebra/geom_sum.html#commute.geom_sum%E2%82%82_mul">This</a> theorem</p>



<a name="273855886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/cancel%20division%20in%20polynomials/near/273855886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/cancel.20division.20in.20polynomials.html#273855886">(Mar 02 2022 at 18:38)</a>:</h4>
<p>because of the <code>\_2</code> I believe</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>