---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html">Smoothness of `equiv.prod_assoc`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="260283502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260283502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260283502">(Nov 04 2021 at 15:09)</a>:</h4>
<p>Do we have the fact that the natural map <code>(E × F) × G → E × F × G</code> is smooth anywhere?</p>



<a name="260283685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260283685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260283685">(Nov 04 2021 at 15:10)</a>:</h4>
<p>If not, is the following reasonable:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.calculus.times_cont_diff</span>

<span class="kd">variables</span> <span class="o">(</span><span class="bp">𝕜</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">F</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">G</span><span class="o">]</span>

<span class="c1">-- Assumptions here can be relaxed of course</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">linear_isometry_equiv_prod_assoc</span> <span class="o">:</span> <span class="o">(</span><span class="n">E</span> <span class="bp">×</span> <span class="n">F</span><span class="o">)</span> <span class="bp">×</span> <span class="n">G</span> <span class="bp">≃ₗᵢ</span><span class="o">[</span><span class="bp">𝕜</span><span class="o">]</span> <span class="n">E</span> <span class="bp">×</span> <span class="n">F</span> <span class="bp">×</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span>    <span class="o">:=</span> <span class="n">equiv.prod_assoc</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span><span class="o">,</span>
  <span class="n">inv_fun</span>   <span class="o">:=</span> <span class="o">(</span><span class="n">equiv.prod_assoc</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">map_add'</span>  <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">map_smul'</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">norm_map'</span> <span class="o">:=</span>
    <span class="kd">begin</span>
      <span class="n">rintros</span> <span class="o">⟨⟨</span><span class="n">e</span><span class="o">,</span> <span class="n">f</span><span class="o">⟩,</span> <span class="n">g</span><span class="o">⟩,</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">linear_equiv.coe_mk</span><span class="o">,</span> <span class="n">equiv.prod_assoc_apply</span><span class="o">,</span> <span class="n">prod.norm_def</span><span class="o">,</span> <span class="n">max_assoc</span><span class="o">],</span>
    <span class="kd">end</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">equiv.prod_assoc</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span><span class="o">,</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">coe_linear_isometry_equiv_prod_assoc</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">linear_isometry_equiv_prod_assoc</span> <span class="bp">𝕜</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="o">:</span> <span class="o">(</span><span class="n">E</span> <span class="bp">×</span> <span class="n">F</span><span class="o">)</span> <span class="bp">×</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">E</span> <span class="bp">×</span> <span class="n">F</span> <span class="bp">×</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="n">equiv.prod_assoc</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="o">:=</span>
<span class="n">rfl</span>

<span class="kd">lemma</span> <span class="n">times_cont_diff_prod_assoc</span> <span class="o">:</span>
  <span class="n">times_cont_diff</span> <span class="bp">𝕜</span> <span class="bp">⊤</span> <span class="bp">$</span> <span class="n">equiv.prod_assoc</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">coe_linear_isometry_equiv_prod_assoc</span> <span class="bp">𝕜</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span> <span class="bp">▸</span>
<span class="o">(</span><span class="n">linear_isometry_equiv_prod_assoc</span> <span class="bp">𝕜</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span><span class="bp">.</span><span class="n">times_cont_diff</span>
</code></pre></div>



<a name="260284309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260284309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260284309">(Nov 04 2021 at 15:14)</a>:</h4>
<p>It looks good to me, but <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> or <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> can probably comment.</p>



<a name="260294279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260294279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260294279">(Nov 04 2021 at 16:14)</a>:</h4>
<p>This should be an easy consequence of <a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff.prod_mk">docs#times_cont_mdiff.prod_mk</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_diff_fst">docs#times_cont_diff_fst</a> and similar.<br>
However, if you need this property for something that is not <em>specifically</em> about reordering/reassociating arguments, I have <em>serious</em> concerns that you are taking an efficient route here.</p>



<a name="260294548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260294548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260294548">(Nov 04 2021 at 16:15)</a>:</h4>
<p>The note<br>
<a href="https://leanprover-community.github.io/mathlib_docs/notes.html#continuity%20lemma%20statement">https://leanprover-community.github.io/mathlib_docs/notes.html#continuity%20lemma%20statement</a><br>
ensures you usually don't have to worry about these issues for <code>continuous</code>, but it applies equally well to <code>times_cont_diff</code>.<br>
If you need this to apply some <code>times_cont_diff</code> lemma to your case, can you use the tips in that library note to generalize said lemma?</p>



<a name="260294926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260294926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260294926">(Nov 04 2021 at 16:18)</a>:</h4>
<p>Thanks for the remarks!</p>



<a name="260294945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260294945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260294945">(Nov 04 2021 at 16:18)</a>:</h4>
<p>Oh, I missed the <code>m</code> in <a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff.prod_mk">docs#times_cont_mdiff.prod_mk</a>. We need some analogue <code>times_cont_diff.prod_mk</code></p>



<a name="260295036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295036">(Nov 04 2021 at 16:18)</a>:</h4>
<p>I am aware of the proof avoiding the linear isometry, I just like my approach since I feel like it's more fundamental but I have no strong feelings.</p>



<a name="260295245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295245">(Nov 04 2021 at 16:20)</a>:</h4>
<p>Regarding the concern that I may be taking an inefficient route, all I want is to know that the evaluation map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>→</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">Hom_A(E, F) \times E \to F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> is smooth where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo separator="true">,</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">E, F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> are normed spaces and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Hom_A(E, F)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span></span></span></span> is the space of continuous affine maps.</p>



<a name="260295313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295313">(Nov 04 2021 at 16:20)</a>:</h4>
<p>I decided to obtain this by factoring this evaluation map as: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>≃</mo><mo stretchy="false">(</mo><mi>F</mi><mo>×</mo><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>≃</mo><mi>F</mi><mo>×</mo><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>→</mo><mi>F</mi><mo>×</mo><mi>F</mi><mo>→</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">Hom_A(E, F) × E ≃ (F × Hom_L(E, F)) × E ≃ F × Hom_L(E, F) × E → F × F → F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></p>



<a name="260295362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295362">(Nov 04 2021 at 16:20)</a>:</h4>
<p>where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Hom_L(E, F)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span></span></span></span> is the space of continuous linear maps, and the final arrow is addition.</p>



<a name="260295404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295404">(Nov 04 2021 at 16:21)</a>:</h4>
<p>Right in the middle you can see where I need smoothness of associativity. I'm open to suggestions!</p>



<a name="260295606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295606">(Nov 04 2021 at 16:22)</a>:</h4>
<p>In any case, I'll study your remarks and thank you for proving them.</p>



<a name="260295914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295914">(Nov 04 2021 at 16:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60/near/260294945">said</a>:</p>
<blockquote>
<p>Oh, I missed the <code>m</code> in <a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff.prod_mk">docs#times_cont_mdiff.prod_mk</a>. We need some analogue <code>times_cont_diff.prod_mk</code></p>
</blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_diff.prod_map">docs#times_cont_diff.prod_map</a></p>



<a name="260295960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260295960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260295960">(Nov 04 2021 at 16:24)</a>:</h4>
<p>that's not quite the same.</p>



<a name="260296019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296019">(Nov 04 2021 at 16:24)</a>:</h4>
<p>compare <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous.prod_mk">docs#continuous.prod_mk</a> vs <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous.prod_map">docs#continuous.prod_map</a></p>



<a name="260296092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296092">(Nov 04 2021 at 16:25)</a>:</h4>
<p>Right, I see.</p>



<a name="260296410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296410">(Nov 04 2021 at 16:27)</a>:</h4>
<p>I'm think that the library note applies to your situation, but I'm not sure. What is the lemma that <br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>→</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">Hom_L(E, F) × E → F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span><br>
is smooth? The library note probably applies to that lemma.</p>



<a name="260296647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296647">(Nov 04 2021 at 16:29)</a>:</h4>
<p>I'm actually really interested to learn about how this library note applies here so I'm delighted you're interested.</p>



<a name="260296731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296731">(Nov 04 2021 at 16:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60/near/260296410">said</a>:</p>
<blockquote>
<p>I'm think that the library note applies to your situation, but I'm not sure. What is the lemma that <br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>L</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo><mo>×</mo><mi>E</mi><mo>→</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">Hom_L(E, F) × E → F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ho</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span><br>
is smooth? The library note probably applies to that lemma.</p>
</blockquote>
<p>I don't think this literally exists in the library but it almost does. See here: <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Smoothness.20of.20linear.20evaluation.20map/near/259864674">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Smoothness.20of.20linear.20evaluation.20map/near/259864674</a></p>



<a name="260296777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296777">(Nov 04 2021 at 16:30)</a>:</h4>
<p>substitute every occurrence of <code>continuous</code> in my library note to <code>times_cont_diff</code>, and the advice is probably still good.</p>



<a name="260296832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296832">(Nov 04 2021 at 16:30)</a>:</h4>
<p>Understood, I note you even say this in the note itself.</p>



<a name="260296993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260296993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260296993">(Nov 04 2021 at 16:31)</a>:</h4>
<p>Yeah, that lemma should be formulated something like <code>times_cont_diff f -&gt; times_cont_diff g -&gt; times_cont_diff λ x, (f x) (g x)</code> where <code>f : X -&gt; (E →L[𝕜] F)</code> and <code>g : X -&gt; E</code></p>



<a name="260297184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260297184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260297184">(Nov 04 2021 at 16:32)</a>:</h4>
<p>Excellent, this is exactly the sort of example I needed to see. I will use this formalisation (and tag you on the relevant PR) in due course.</p>



<a name="260297239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260297239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260297239">(Nov 04 2021 at 16:33)</a>:</h4>
<p>From your version of the lemma, the proof of this version should be something like <code>times_cont_diff_continuous_linear_eval.comp $ hf.prod_mk hg</code> (using the non-existent <code>prod_mk</code>)</p>



<a name="260298241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Smoothness%20of%20%60equiv.prod_assoc%60/near/260298241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Smoothness.20of.20.60equiv.2Eprod_assoc.60.html#260298241">(Nov 04 2021 at 16:39)</a>:</h4>
<p>I have to go for a run now so I've proposed an approach here: <a href="https://github.com/leanprover-community/mathlib/issues/10165">#10165</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>