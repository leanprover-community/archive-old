---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html">set to list</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272555391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555391">(Feb 20 2022 at 01:13)</a>:</h4>
<p>Is there a function in mathlib to take a <code>set</code> to a <code>list</code>?</p>



<a name="272555443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555443">(Feb 20 2022 at 01:14)</a>:</h4>
<p>How would it do that? What if the set is infinite?</p>



<a name="272555466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555466">(Feb 20 2022 at 01:15)</a>:</h4>
<p>an infinite list?</p>



<a name="272555483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555483">(Feb 20 2022 at 01:15)</a>:</h4>
<p>Patrick, what do you want to do with the list you get?</p>



<a name="272555494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555494">(Feb 20 2022 at 01:15)</a>:</h4>
<p>So not <a href="https://leanprover-community.github.io/mathlib_docs/find/list">docs#list</a> but rather a function <code>ℕ → α</code>?</p>



<a name="272555577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555577">(Feb 20 2022 at 01:17)</a>:</h4>
<p>I have a function to extract the set of atoms from a prop formula, now I want to write one that determines if the formula is a tautology by iterating over its atoms.</p>



<a name="272555665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555665">(Feb 20 2022 at 01:19)</a>:</h4>
<p>I'm not sure if this is enough context, I can add the other definitions if it helps:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">update</span> <span class="o">{</span><span class="n">A</span> <span class="n">U</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">U</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">v</span> <span class="k">then</span> <span class="n">a</span> <span class="k">else</span> <span class="n">f</span> <span class="n">i</span>


<span class="kd">def</span> <span class="n">all_val</span> <span class="o">:</span> <span class="n">list</span> <span class="n">string</span> <span class="bp">-&gt;</span> <span class="n">formula</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="n">string</span> <span class="bp">-&gt;</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">fm</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">eval</span> <span class="n">fm</span> <span class="n">f</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">as</span><span class="o">)</span> <span class="n">fm</span> <span class="n">f</span> <span class="o">:=</span> <span class="o">(</span><span class="n">all_val</span> <span class="n">as</span> <span class="n">fm</span> <span class="o">(</span><span class="n">update</span> <span class="n">f</span> <span class="n">a</span> <span class="n">tt</span><span class="o">))</span> <span class="bp">&amp;&amp;</span> <span class="o">(</span><span class="n">all_val</span> <span class="n">as</span> <span class="n">fm</span> <span class="o">(</span><span class="n">update</span> <span class="n">f</span> <span class="n">a</span> <span class="n">ff</span><span class="o">))</span>


<span class="kd">def</span> <span class="n">is_tauto</span> <span class="o">(</span><span class="n">fm</span> <span class="o">:</span> <span class="n">formula</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span> <span class="n">all_val</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">fm</span><span class="o">)</span> <span class="n">fm</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span><span class="o">,</span> <span class="n">ff</span><span class="o">)</span>
</code></pre></div>



<a name="272555669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555669">(Feb 20 2022 at 01:19)</a>:</h4>
<p>If you have a proof that your set is finite, you can use <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.induction_on">docs#set.finite.induction_on</a></p>



<a name="272555729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555729">(Feb 20 2022 at 01:20)</a>:</h4>
<p>Oh. Ok. That might work.</p>



<a name="272555736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555736">(Feb 20 2022 at 01:20)</a>:</h4>
<p>Your update is <a href="https://leanprover-community.github.io/mathlib_docs/find/function.update">docs#function.update</a></p>



<a name="272555757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555757">(Feb 20 2022 at 01:21)</a>:</h4>
<p>Oh. Cool.</p>



<a name="272555958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272555958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272555958">(Feb 20 2022 at 01:25)</a>:</h4>
<p>Can I inductively prove the set is finite by saying that the empty list and singleton is finite, and if two sets are finite then their union is finite?</p>



<a name="272556053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272556053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272556053">(Feb 20 2022 at 01:27)</a>:</h4>
<p>I have this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">formula</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">bottom</span> <span class="o">:</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">top</span> <span class="o">:</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">atom</span> <span class="o">:</span> <span class="n">string</span> <span class="bp">→</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">not</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">and</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">or</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">imp</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">iff</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span> <span class="bp">→</span> <span class="n">formula</span>

<span class="kn">open</span> <span class="n">formula</span>

<span class="kd">def</span> <span class="n">atoms</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="o">(</span><span class="n">set</span> <span class="n">string</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">bottom</span> <span class="o">:=</span> <span class="o">{}</span>
<span class="bp">|</span> <span class="n">top</span> <span class="o">:=</span> <span class="o">{}</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">atom</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">v</span><span class="o">}</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">not</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">atoms</span> <span class="n">p</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">and</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">p</span><span class="o">)</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">or</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">p</span><span class="o">)</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">imp</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">p</span><span class="o">)</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">iff</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">p</span><span class="o">)</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">atoms</span> <span class="n">q</span><span class="o">)</span>
</code></pre></div>



<a name="272556184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272556184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272556184">(Feb 20 2022 at 01:29)</a>:</h4>
<p>You can. You can also use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset">docs#finset</a> too, you'll just need to add <code>@[derive decidable_eq]</code> above <code>inductive formula : Type</code></p>



<a name="272556248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272556248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272556248">(Feb 20 2022 at 01:30)</a>:</h4>
<p>For your specific question, check out <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.union">docs#set.finite.union</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite_empty">docs#set.finite_empty</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite_singleton">docs#set.finite_singleton</a></p>



<a name="272556374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/set%20to%20list/near/272556374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Thomas <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/set.20to.20list.html#272556374">(Feb 20 2022 at 01:32)</a>:</h4>
<p>Thank you!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>