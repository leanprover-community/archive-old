---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html">fin (s.card) finset equiv</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288020292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288020292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288020292">(Jun 30 2022 at 12:35)</a>:</h4>
<p>Do we already have this? (Should be an MWE.)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">finset</span>
<span class="kn">open</span> <span class="n">fintype</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">fin_equiv</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">s.card</span><span class="o">)</span> <span class="bp">≃</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">equiv_of_card_eq</span> <span class="o">((</span><span class="n">card_coe</span> <span class="n">s</span><span class="o">)</span> <span class="bp">▸</span> <span class="n">card_fin</span> <span class="n">_</span><span class="o">)</span>
<span class="kd">end</span> <span class="n">finset</span>
</code></pre></div>
<p>To be clear, I know about <code>fintype.fin_equiv</code>. But I specifically want fin (s.card) and not fin (fintype.card s). What I want is an injective function from fin (s.card) to s, and this seems the best way to get it.</p>



<a name="288020642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288020642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288020642">(Jun 30 2022 at 12:38)</a>:</h4>
<p>Alternatively you could have:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">finset</span>
<span class="kn">open</span> <span class="n">fintype</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">equiv_fin</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≃</span> <span class="n">fin</span> <span class="o">(</span><span class="n">s.card</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">equiv_of_card_eq</span> <span class="o">(</span><span class="n">eq.trans</span> <span class="o">(</span><span class="n">card_coe</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">card_fin</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">)</span>
<span class="kd">end</span> <span class="n">finset</span>
</code></pre></div>



<a name="288022122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022122">(Jun 30 2022 at 12:50)</a>:</h4>
<p>Would be nice to have MW imports too</p>



<a name="288022144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022144">(Jun 30 2022 at 12:50)</a>:</h4>
<p>oh, bother.</p>



<a name="288022185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022185">(Jun 30 2022 at 12:50)</a>:</h4>
<p>I've just closed my lean, I didn't think I was using any of my imports.</p>



<a name="288022274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022274">(Jun 30 2022 at 12:51)</a>:</h4>
<p>Doesn't work without imports, so I have to figure out what to import</p>



<a name="288022288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022288">(Jun 30 2022 at 12:51)</a>:</h4>
<p>Ah, <code>import data.fintype.card</code> does it</p>



<a name="288022316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022316">(Jun 30 2022 at 12:51)</a>:</h4>
<p>Right, yes.</p>



<a name="288022511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022511">(Jun 30 2022 at 12:53)</a>:</h4>
<p>This seems alright to me</p>



<a name="288022545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022545">(Jun 30 2022 at 12:53)</a>:</h4>
<p>I was expecting <code>fintype.card s</code> and <code>s.card</code> to be def-eq, but it doesn't seem to be the case</p>



<a name="288022618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022618">(Jun 30 2022 at 12:54)</a>:</h4>
<p>Yeah, that's the issue I was running into for why I wanted this for convenience.</p>



<a name="288022914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022914">(Jun 30 2022 at 12:56)</a>:</h4>
<p>If it doesn't exist already, which it doesn't seem to, then it should totally be PR'd</p>



<a name="288022977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288022977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288022977">(Jun 30 2022 at 12:56)</a>:</h4>
<p>Cool - I'm meant to give a presentation in two hours which I haven't written yet so I'm just doing that first. If you feel like it you can PR it in the meantime ;)</p>



<a name="288035357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288035357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288035357">(Jun 30 2022 at 14:23)</a>:</h4>
<p>Do you think my <code>fin_equiv</code> or <code>equiv_fin</code> is better? Even though it's <code>fin_equiv</code> I want more, I feel like in a PR <code>finset.equiv_fin</code> to match <code>fintype.equiv_fin</code> would be better.</p>



<a name="288035547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288035547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288035547">(Jun 30 2022 at 14:24)</a>:</h4>
<p>You could also have a <code>finset.equiv_of_card_eq</code>, I guess.</p>



<a name="288036629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036629">(Jun 30 2022 at 14:30)</a>:</h4>
<p>Why <em>isn't</em> <code>fintype.card s</code> and <code>s.card</code> defeq, I wonder.</p>



<a name="288036644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036644">(Jun 30 2022 at 14:30)</a>:</h4>
<p>I prefer <code>fin_equiv</code> out of the general principle of having a simpler RHS</p>



<a name="288036681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036681">(Jun 30 2022 at 14:31)</a>:</h4>
<p>Yes, that's how I feel.</p>



<a name="288036710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036710">(Jun 30 2022 at 14:31)</a>:</h4>
<p>Maybe we should flip <code>fintype.equiv_fin</code>.</p>



<a name="288036744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036744">(Jun 30 2022 at 14:31)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.equiv_fin">docs#fintype.equiv_fin</a></p>



<a name="288036794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036794">(Jun 30 2022 at 14:31)</a>:</h4>
<p>(Which is the corresponding theorem for fintypes.)</p>



<a name="288036878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036878">(Jun 30 2022 at 14:32)</a>:</h4>
<p>I guess there is one exception to that principle of a simpler RHS: when your lemma is meant to expand an expression rather than simplify it</p>



<a name="288036895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036895">(Jun 30 2022 at 14:32)</a>:</h4>
<p>I guess you can sort of argue that's happening here?</p>



<a name="288036995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288036995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288036995">(Jun 30 2022 at 14:32)</a>:</h4>
<p>Aye. I mean in my context what I want is embeddings from fin blah to the thing... because i'm sort of thinking of this as "labelling things with fin n".</p>



<a name="288037065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037065">(Jun 30 2022 at 14:33)</a>:</h4>
<p>Surely there's few circumstances when you'll want to turn <code>fin (fintype.card α)</code> into <code>α</code>, but many where you'll want to do the opposite</p>



<a name="288037097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037097">(Jun 30 2022 at 14:33)</a>:</h4>
<p>So yeah, on second thought, <code>equiv_fin</code> is the better one</p>



<a name="288037151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037151">(Jun 30 2022 at 14:33)</a>:</h4>
<p>Like what this correspond to, basically, is: "Let s be a finite set of size n. Suppose x_0, x_1, ..., x_(n-1) are the elements of s. Then..."</p>



<a name="288037255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037255">(Jun 30 2022 at 14:34)</a>:</h4>
<p>And that is implicitly taking <code>fin (card s)</code> to s.</p>



<a name="288037327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037327">(Jun 30 2022 at 14:35)</a>:</h4>
<p>I mean possibly the answer is "even though it would just be an application of symmetry, have both".</p>



<a name="288037392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037392">(Jun 30 2022 at 14:35)</a>:</h4>
<p>Ages ago, I wanted something like this. I think this was the thread</p>
<p><a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Enumerating.20a.20finite.20subset">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Enumerating.20a.20finite.20subset</a></p>



<a name="288037550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037550">(Jun 30 2022 at 14:36)</a>:</h4>
<p>I feel like there's little circumstances where you want names for both sides of an <code>equiv</code></p>



<a name="288037556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037556">(Jun 30 2022 at 14:36)</a>:</h4>
<p>Yes.</p>



<a name="288037612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037612">(Jun 30 2022 at 14:37)</a>:</h4>
<p>Because, unless that <code>equiv</code> is incredibly well-behaved (something like a cast between type synonyms), you lose easy access to a lot of theorems about an equivalence and its inverse</p>



<a name="288037680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037680">(Jun 30 2022 at 14:37)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> A similar situation to me. It is curious that we have <code>finset.order_iso_of_fin</code> but not the one that doesn't have a requirement for <code>linear_order</code>.</p>



<a name="288037836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037836">(Jun 30 2022 at 14:38)</a>:</h4>
<p><code>list.nodup.nth_le_equiv</code> has fin-first</p>



<a name="288037938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288037938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288037938">(Jun 30 2022 at 14:39)</a>:</h4>
<p>Indeed. I’m afraid I’m on a phone on plane at the moment so I can’t say much but I do recall that I persuaded myself that I didn’t really want what I thought I wanted.</p>



<a name="288038008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038008">(Jun 30 2022 at 14:39)</a>:</h4>
<p>Unfortunately I do want such an embedding, having tried my best to avoid it.</p>



<a name="288038012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038012">(Jun 30 2022 at 14:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/fin.20.28s.2Ecard.29.20finset.20equiv/near/288037680">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> A similar situation to me. It is curious that we have <code>finset.order_iso_of_fin</code> but not the one that doesn't have a requirement for <code>linear_order</code>.</p>
</blockquote>
<p>I feel like most people's mental model of an ordered relation is a partial order, or sometimes just a linear order haha</p>



<a name="288038132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038132">(Jun 30 2022 at 14:40)</a>:</h4>
<p>That would explain the odd missing generalizations you find now and then</p>



<a name="288038212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038212">(Jun 30 2022 at 14:40)</a>:</h4>
<p>Well ideally you don't want an order at all.</p>



<a name="288038242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038242">(Jun 30 2022 at 14:40)</a>:</h4>
<p>Like there is in some sense an order induced</p>



<a name="288038273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038273">(Jun 30 2022 at 14:41)</a>:</h4>
<p>But it is arbitrary, or at least should be.</p>



<a name="288038300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288038300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288038300">(Jun 30 2022 at 14:41)</a>:</h4>
<p>Sometimes you want to choose it though</p>



<a name="288042643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288042643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288042643">(Jun 30 2022 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="330967">@Wrenna Robson</span> A bit shorter:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">equiv_fin</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≃</span> <span class="n">fin</span> <span class="o">(</span><span class="n">s.card</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">fintype.equiv_fin_of_card_eq</span> <span class="o">(</span><span class="n">fintype.card_coe</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div>



<a name="288043128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288043128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288043128">(Jun 30 2022 at 15:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/fin.20.28s.2Ecard.29.20finset.20equiv/near/288036629">said</a>:</p>
<blockquote>
<p>Why <em>isn't</em> <code>fintype.card s</code> and <code>s.card</code> defeq, I wonder.</p>
</blockquote>
<p>That's a good question. I'm not sure if it can be made to be defeq -- to make a <code>fintype</code> instance you need a <code>finset</code> that enumerates all the elements of <code>s</code> coerced to a type, and currently it uses <code>s.attach</code> to do so:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">s.attach.card</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="288044379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044379">(Jun 30 2022 at 15:20)</a>:</h4>
<p>So really, this boils down to asking why <code>finset.univ : finset s</code> isn't def-eq to <code>s</code></p>



<a name="288044417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044417">(Jun 30 2022 at 15:21)</a>:</h4>
<p>That doesn't typecheck, right?</p>



<a name="288044590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044590">(Jun 30 2022 at 15:22)</a>:</h4>
<p>Oh, yeah</p>



<a name="288044695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044695">(Jun 30 2022 at 15:22)</a>:</h4>
<p>Well, there's the answer, isn't it?</p>



<a name="288044904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044904">(Jun 30 2022 at 15:24)</a>:</h4>
<p><code>fintype.card s</code> is defined as <code>(finset.univ : finset s).card</code> while <code>s.card</code> is just that</p>



<a name="288044928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288044928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288044928">(Jun 30 2022 at 15:24)</a>:</h4>
<p>Which makes sense I think</p>



<a name="288045203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045203">(Jun 30 2022 at 15:26)</a>:</h4>
<p>Still, I wonder if there's some trick where you can make <code>fintype.card s</code> reduce to <code>s.card</code>.  The problem right now is that <code>attach</code> is a <code>map</code> operation over the underlying <code>list</code>, and that doesn't preserve the length definitionally.</p>



<a name="288045345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045345">(Jun 30 2022 at 15:27)</a>:</h4>
<p>btw note <code>s.attach</code> is def-eq to <code>(finset.univ : finset s)</code></p>



<a name="288045445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045445">(Jun 30 2022 at 15:28)</a>:</h4>
<p>And <code>finset.univ</code> is def-eq to <code>fintype.elems</code></p>



<a name="288045581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045581">(Jun 30 2022 at 15:29)</a>:</h4>
<p>Yes, <code>finset.univ : finset s</code> is defeq to <code>s.attach</code> because of <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.fintype_coe_sort">docs#finset.fintype_coe_sort</a>, which defines the <code>fintype s</code> instance.</p>



<a name="288045792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045792">(Jun 30 2022 at 15:30)</a>:</h4>
<p>So really, I think the issue is that <code>fintype.elems s</code> isn't def-eq to <code>s</code>, which it can't reasonably be because they aren't of the same type</p>



<a name="288045921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288045921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288045921">(Jun 30 2022 at 15:31)</a>:</h4>
<p>It doesn't seem reasonable to define <code>fintype.card s</code> as anything other than <code>(fintype.elems s).card</code></p>



<a name="288046105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288046105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288046105">(Jun 30 2022 at 15:32)</a>:</h4>
<p>Sure, that's the proximal issue, but there still might be some trick so that <code>(fintype.elems s).card</code> reduces to <code>s.card</code> by using something other than <code>s.attach</code>. Neither of us can think of anything, but that doesn't mean that there isn't something that would work in place of <code>s.attach</code>.</p>



<a name="288046196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288046196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288046196">(Jun 30 2022 at 15:33)</a>:</h4>
<p>It seems unlikely, but I'm not willing to say it's impossible here.</p>



<a name="288047306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288047306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288047306">(Jun 30 2022 at 15:41)</a>:</h4>
<p>One solution would be to extend <code>fintype</code> to include a <code>card</code> field so you can get definitional control over it.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">tactic_rfl</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">rfl</span><span class="o">]</span>

<span class="kd">class</span> <span class="n">fintype'</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">elems</span> <span class="o">[]</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">complete</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">elems</span><span class="o">)</span>
<span class="o">(</span><span class="n">card</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">elems.card</span><span class="o">)</span>
<span class="o">(</span><span class="n">card_eq</span> <span class="o">:</span> <span class="n">card</span> <span class="bp">=</span> <span class="n">elems.card</span> <span class="bp">.</span> <span class="n">tactic_rfl</span><span class="o">)</span> <span class="c1">-- just so the default case automatically goes through</span>
</code></pre></div>



<a name="288048828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288048828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288048828">(Jun 30 2022 at 15:51)</a>:</h4>
<p>If you want to go down that route, you could also have <code>card</code> be a member of finsets, multisets, or even lists</p>



<a name="288049405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288049405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288049405">(Jun 30 2022 at 15:56)</a>:</h4>
<p>This seems it could easily lead to "fun." Imagine getting to use the <code>finset.reset_card</code> lemma to reset the internal <code>card</code> field to the <code>card</code> of its <code>multiset</code>, after spending some time wondering why you weren't able to rw with some other lemma.</p>



<a name="288053200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288053200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288053200">(Jun 30 2022 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/fin.20.28s.2Ecard.29.20finset.20equiv/near/288042643">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> A bit shorter:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">equiv_fin</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≃</span> <span class="n">fin</span> <span class="o">(</span><span class="n">s.card</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">fintype.equiv_fin_of_card_eq</span> <span class="o">(</span><span class="n">fintype.card_coe</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Very nice.</p>



<a name="288053327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288053327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288053327">(Jun 30 2022 at 16:26)</a>:</h4>
<p>Still not quite sure why all the lemmas like this for list e.g. <code>list.nodup.nth_le_equiv</code> have the <code>fin</code> on the left, but all these are on the right for <code>fintype</code>.</p>



<a name="288053341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288053341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288053341">(Jun 30 2022 at 16:26)</a>:</h4>
<p>Like you'd think they'd all be the same.</p>



<a name="288053549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288053549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288053549">(Jun 30 2022 at 16:28)</a>:</h4>
<p>Would you want a <code>finset.trunc_equiv_fin</code> as well? The computable version.</p>



<a name="288053722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288053722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288053722">(Jun 30 2022 at 16:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/fin.20.28s.2Ecard.29.20finset.20equiv/near/288045792">said</a>:</p>
<blockquote>
<p>So really, I think the issue is that <code>fintype.elems s</code> isn't def-eq to <code>s</code>, which it can't reasonably be because they aren't of the same type</p>
</blockquote>
<p>Oh, because one is a <code>finset s</code> and the other is <code>finset \alph</code> or whatever?</p>



<a name="288054990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288054990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288054990">(Jun 30 2022 at 16:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/fin.20.28s.2Ecard.29.20finset.20equiv/near/288053549">said</a>:</p>
<blockquote>
<p>Would you want a <code>finset.trunc_equiv_fin</code> as well? The computable version.</p>
</blockquote>
<p>I'd say "no" unless you're using it. How much would having <code>finset.equiv_fin</code> simplify your work, by the way? I'm wondering if <code>(equiv_fin_of_card_eq (card_coe _)).symm</code> (assuming <code>open fintype</code>) is already short enough of a name for what you're doing.</p>



<a name="288056941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288056941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288056941">(Jun 30 2022 at 16:53)</a>:</h4>
<p>(The <code>trunc_equiv_fin</code> definition is used extremely rarely in mathlib -- only 3 legitimate uses outside fintype/basic -- which is why I suggest not including <code>finset.trunc_equiv_fin</code>. I just made <a href="https://github.com/leanprover-community/mathlib/pull/15076">#15076</a>  and <a href="https://github.com/leanprover-community/mathlib/pull/15077">#15077</a> to remove the uses that were in a computation-free and classical context so don't need to be computable.)</p>



<a name="288069702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288069702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288069702">(Jun 30 2022 at 18:34)</a>:</h4>
<p>Yeah, I wasn't sure why it existed. <code>finset.equiv_fin</code> wouldn't simplify things a lot but it would make like one line less unwieldy.</p>



<a name="288080065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288080065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288080065">(Jun 30 2022 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="330967">@Wrenna Robson</span> I'm sort of ambivalent about <code>finset.equiv_fin</code>, but even though it's just a composition of two things, may as well add it since it makes it easier to find this particular equivalence.</p>
<p>I think new definitions usually need some sort of justification since there's a cognitive cost to adding definitions to mathlib, and these are some justifications that come to mind:</p>
<ul>
<li>It's a common expression and will save on repetition.</li>
<li>It chooses a canonical way of stating something (a nexus for a concept).</li>
<li>There is theory surrounding it.</li>
</ul>
<p>It's worth considering that not everything needs an explicit name, and sometimes the body of a definition might be about the same length as the name of the definition itself (so it can be its own name, so to speak).</p>
<p>However, for this equivalence, I suspect that anyone who uses it only really cares that the equivalence exists, and it's a more convenient writing it this way than having it be a lemma proving <code>nonempty (s ≃ fin s.card)</code>.</p>



<a name="288080801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288080801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288080801">(Jun 30 2022 at 20:07)</a>:</h4>
<p>By the way, here's one of the uses of <code>trunc_equiv_fin</code>: <a href="https://github.com/leanprover-community/mathlib/blob/eb852609e908d661c0e31c94fa3fff6d113b9d6e/src/group_theory/perm/sign.lean#L427">https://github.com/leanprover-community/mathlib/blob/eb852609e908d661c0e31c94fa3fff6d113b9d6e/src/group_theory/perm/sign.lean#L427</a></p>
<p>It's an auxiliary function for computing the sign of a permutation, and since it's computable you can <code>#eval</code> the sign function if you wanted to.</p>



<a name="288100616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288100616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288100616">(Jun 30 2022 at 23:18)</a>:</h4>
<p>I mean really I even only care that there's an <em>embedding</em> from fin n to s where s.card = n: it's literally just the "we can label the finset" concept.</p>



<a name="288128482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288128482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288128482">(Jul 01 2022 at 06:54)</a>:</h4>
<p>What file should this be in? Feels like I can't put it in the finset bit of <code>data.fintype.basic</code> because that is before the <code>fintype</code> version which it makes sense to use</p>



<a name="288131222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288131222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288131222">(Jul 01 2022 at 07:25)</a>:</h4>
<p>See <a href="https://github.com/leanprover-community/mathlib/pull/15080">#15080</a></p>



<a name="288131268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/fin%20%28s.card%29%20finset%20equiv/near/288131268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/fin.20(s.2Ecard).20finset.20equiv.html#288131268">(Jul 01 2022 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> fyi</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>