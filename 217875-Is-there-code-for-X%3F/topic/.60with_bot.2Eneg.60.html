---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html">`with_bot.neg`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289410516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410516">(Jul 13 2022 at 02:55)</a>:</h4>
<p>Dear All,</p>
<p>working with degrees on Laurent polynomials, I would like to have a negation on <code>with_bot ℤ</code>.</p>
<p>Is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.bounded_order</span>

<span class="sd">/--  If a Type `α` has a negation, then `with_bot α` inherits one as well. -/</span>
<span class="kd">def</span> <span class="n">with_bot.neg</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">has_neg</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">with_bot</span> <span class="n">α</span>
<span class="bp">|</span> <span class="bp">⊥</span> <span class="o">:=</span> <span class="bp">⊥</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">some</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">some</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span>

<span class="o">[</span><span class="n">add</span> <span class="n">standard</span> <span class="bp">`</span><span class="n">neg</span><span class="bp">`-</span><span class="n">hyerarchy</span> <span class="n">lemmas</span><span class="bp">/</span><span class="n">instances.</span><span class="o">]</span>
</code></pre></div>
<p>already in mathlib?  If not, is there some problem with adding it?</p>
<p>I can get by without this, but it starts to get annoying.</p>
<p>Thanks!</p>



<a name="289410578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410578">(Jul 13 2022 at 02:57)</a>:</h4>
<p>It doesn't send bot to top (if e.g. alpha had a top already?)</p>



<a name="289410649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410649">(Jul 13 2022 at 02:58)</a>:</h4>
<p>No, since bot is supposed to model <code>degree 0</code>...  It should really by <code>with_zero (multiplicative ℤ)</code>, but I have been resisting this, probably just for psychological reasons...  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="289410651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410651">(Jul 13 2022 at 02:58)</a>:</h4>
<p>Oh lol is it because the reciprocal of 0 is 0 instead of the "geometrically correct" infinity?</p>



<a name="289410665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410665">(Jul 13 2022 at 02:59)</a>:</h4>
<p>Oh but I think <span class="user-mention" data-user-id="406490">@María Inés de Frutos Fernández</span> has been using <code>with_zero (multiplicative ℤ)</code> and may even have an API for it?</p>



<a name="289410666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410666">(Jul 13 2022 at 02:59)</a>:</h4>
<p>Though I understand now why it may not be in mathlib: I was so focused on degrees, that I did not think about negation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">-\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">∞</span></span></span></span>!</p>



<a name="289410722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410722">(Jul 13 2022 at 03:00)</a>:</h4>
<p>If you use the with_zero (mult int) thing then what you want is just <code>inv</code>.</p>



<a name="289410747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410747">(Jul 13 2022 at 03:00)</a>:</h4>
<p>Maybe additively your instinct is to negate -infty to +infty -- we're all told at school "two minuses make a plus".</p>



<a name="289410756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410756">(Jul 13 2022 at 03:01)</a>:</h4>
<p>Ok, if there is some API for <code>with_zero (multiplicative ℤ)</code> I can probably use it.  Although I would not want the definition of degree on Laurent polynomials and on "usual" polynomials to diverge too much, since I want to use results about <code>polynomial.degree</code> for <code>laurent_polynomial.degree</code>.</p>



<a name="289410813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410813">(Jul 13 2022 at 03:02)</a>:</h4>
<p>It would be an interesting project to formalise the assertion that two minuses make a plus. Anyway, for addition it seems very weird to send -infty to -infty. But multiplicatively it now seems much more normal to me, it's not a good geometric definition but when it comes to arithmetic it's a very good choice to have 1/0=0.</p>



<a name="289410815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410815">(Jul 13 2022 at 03:02)</a>:</h4>
<p>Yes, is the conversion between add and mul that feels weird.  Somehow, I find it more natural that when I multiply polynomials, their degrees add.</p>



<a name="289410854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410854">(Jul 13 2022 at 03:03)</a>:</h4>
<p>I know that you have thought a lot about valuations: maybe we should use them more aggressively.  Degrees of polynomials are so last millennium...</p>



<a name="289410856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410856">(Jul 13 2022 at 03:03)</a>:</h4>
<p>Why do you want to change notation? This is what Leo taught us! You have to have a good reason to change notation, for example if you're linearising a nonlinear object such as exp and log between Lie groups and Lie algebras then you can do it, because you're passing through some notational phase space where * becomes + and + becomes Lie bracket or something.</p>



<a name="289410935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410935">(Jul 13 2022 at 03:05)</a>:</h4>
<p>or algebraic geometry becomes tropical geometry</p>



<a name="289410936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410936">(Jul 13 2022 at 03:05)</a>:</h4>
<p>Here the transition is <code>add</code> on polys becomes <code>max</code> on degrees and <code>mul</code> on polys becomes <code>add</code> on degrees.</p>



<a name="289410941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410941">(Jul 13 2022 at 03:05)</a>:</h4>
<p>right, that's very tropical.</p>



<a name="289410990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289410990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289410990">(Jul 13 2022 at 03:06)</a>:</h4>
<p>Yes, I have thought of using <code>tropical (with_bot ℤ)</code>, but this one is defined with min, so I would have to <code>order_dual</code> it as well. <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="289411104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289411104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289411104">(Jul 13 2022 at 03:09)</a>:</h4>
<p>Currently, I have a proof that the degree of the product of two Laurent polynomials is the sum of their degrees.  However, it feels very clunky and I think that it is because <code>with_bot ℤ</code> does not have too much structure.  I was hoping that I could make it smoother, but maybe it is messy and I have to live with it!</p>



<a name="289411289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289411289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289411289">(Jul 13 2022 at 03:13)</a>:</h4>
<p>For instance, I use this lemma at some point:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">with_bot.exists_eq_add</span> <span class="o">{</span><span class="n">A</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">a'</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="n">A</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a'</span> <span class="bp">+</span> <span class="n">b</span> <span class="o">:=</span>
</code></pre></div>
<p>and it would be somewhat easier if I could simply use <code>a-b</code> directly.</p>



<a name="289415070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415070">(Jul 13 2022 at 04:38)</a>:</h4>
<p>Damiano, we can change <code>tropical</code> to be using <code>max</code> instead. Some things state better with min, some with max. Since you have an actual use case, and I never pushed my tropical polynomial convex optimization code, seems like <code>max</code> should win.</p>



<a name="289415098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415098">(Jul 13 2022 at 04:39)</a>:</h4>
<p>Regarding a <code>with_bot.neg</code>, I had a doomed PR <a href="https://github.com/leanprover-community/mathlib/pull/8889">#8889</a> where I thought of something similar, but it really broke down</p>



<a name="289415137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415137">(Jul 13 2022 at 04:39)</a>:</h4>
<p>And Eric Wieser explored this too here: <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/with_zero.20.28multiplicative.20A.29.20.E2.89.83*.20multiplicative.20.28with_bot.20A.29/near/272981162">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/with_zero.20.28multiplicative.20A.29.20.E2.89.83*.20multiplicative.20.28with_bot.20A.29/near/272981162</a></p>



<a name="289415350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415350">(Jul 13 2022 at 04:44)</a>:</h4>
<p>For Laurent polynomials, the <code>int_degree</code> API in <a href="https://github.com/leanprover-community/mathlib/pull/12245">#12245</a> might be of use.</p>



<a name="289415353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415353">(Jul 13 2022 at 04:44)</a>:</h4>
<p>Yakov, thanks a lot for the information!</p>
<p>tropical with bot vs top: this seems another of these cases where there is the need for a <code>to_top/bot</code> tag, like <code>to_additive</code>.  I am using now <code>max-plus</code>, but <code>min-plus</code> is also natural.  In fact, if I end up implementing also <code>trailing_degree</code> for Laurent polynomials, then I'd want the other.</p>



<a name="289415376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415376">(Jul 13 2022 at 04:45)</a>:</h4>
<p>Your <code>with_bot.neg</code> is <code>with_bot.map (fun x, -x)</code>, which might be enough for what you need for now?</p>



<a name="289415463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415463">(Jul 13 2022 at 04:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.60with_bot.2Eneg.60/near/289415350">said</a>:</p>
<blockquote>
<p>For Laurent polynomials, the <code>int_degree</code> API in <a href="https://github.com/leanprover-community/mathlib/pull/12245">#12245</a> might be of use.</p>
</blockquote>
<p>Thanks!  I'll take a look.   I was planning to follow more closely the definition using supports, since Laurent polynomials are defined via <code>add_monoid_algebra int</code>, but if there is already work on <code>int_degree</code>, I might as well try to use it!</p>



<a name="289415551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415551">(Jul 13 2022 at 04:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.60with_bot.2Eneg.60/near/289415376">said</a>:</p>
<blockquote>
<p>Your <code>with_bot.neg</code> is <code>with_bot.map (fun x, -x)</code>, which might be enough for what you need for now?</p>
</blockquote>
<p>Ah, good point!  I just made PR <a href="https://github.com/leanprover-community/mathlib/pull/15294">#15294</a> with the lemmas that I am using so far.  If it stays like this, then it is not so bad.  I am slightly worried that it will creep, but we will see.</p>



<a name="289415563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415563">(Jul 13 2022 at 04:49)</a>:</h4>
<p>I am already aware that in the review process I will add the analogous <code>with_top</code> lemmas.  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="289415718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415718">(Jul 13 2022 at 04:53)</a>:</h4>
<p>Ah, yes, more "low-level" <code>int_degree</code> directly from the underlying support makes sense. But hopefully users never have to see that, and there is some lemma that says <code>(f : K[T;T^-]) = (p : K[X]) / (q : K[X])</code>, if I understand the theory correctly. Please let me know if I've made an error here.</p>



<a name="289415777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415777">(Jul 13 2022 at 04:54)</a>:</h4>
<p>Or I just confused that with rational functions.</p>



<a name="289415862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415862">(Jul 13 2022 at 04:56)</a>:</h4>
<p>I do not have that lemma yet, since I have not gotten to rational functions... yet!  Another issue that I see is that the current <code>int_degree</code> is defined for a base <em>field</em>, whereas the one that I am planning is on any semiring, since it only looks at the support.</p>



<a name="289415929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415929">(Jul 13 2022 at 04:58)</a>:</h4>
<p>Rephrasing of my lemma, <code>int_degree (f : K[T;T^-1) = (nat_degree ((my_pair f).1) : int) - (my_pair f).2</code>, where <code>my_pair f</code> is the <code>(p : K[X], n : nat)</code> such that <code>X ^ n * f = coe p</code>.</p>



<a name="289415998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289415998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289415998">(Jul 13 2022 at 05:00)</a>:</h4>
<p>In case you are curious, what I have so far is on <a href="https://github.com/leanprover-community/mathlib/tree/adomani_degs_lp">branch#adomani_degs_lp</a>, in <a href="https://github.com/leanprover-community/mathlib/blob/9fa4f59fef9667c134fbdd5bc04cc2e572466abd/src/data/polynomial/laurent.lean">data/polynomial/laurent</a>.</p>



<a name="289416006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289416006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289416006">(Jul 13 2022 at 05:00)</a>:</h4>
<p>Yeah, in the <code>ratfunc</code> file, most of the reasonable lemmas one can define require a <code>field</code>. But I meant that the "surface" of the API can look very similar, with similarly named/shaped lemmas. And then later, <code>ratfunc.int_degree</code> lemmas might go through easier proofs from the extension from Laurent polynomials (if that makes sense)</p>



<a name="289416114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289416114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289416114">(Jul 13 2022 at 05:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.60with_bot.2Eneg.60/near/289415929">said</a>:</p>
<blockquote>
<p>Rephrasing of my lemma, <code>int_degree (f : K[T;T^-1) = (nat_degree ((my_pair f).1) : int) - (my_pair f).2</code>, where <code>my_pair f</code> is the <code>(p : K[X], n : nat)</code> such that <code>X ^ n * f = coe p</code>.</p>
</blockquote>
<p>Ah, I see what you meant.  Yes, this would be a way.  Once you have <code>X ^ n * f = coe p</code>, then you can also define it directly as <code>pnat_degree - n</code>, appropriately coerced to int.</p>



<a name="289416179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%60with_bot.neg%60/near/289416179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.60with_bot.2Eneg.60.html#289416179">(Jul 13 2022 at 05:04)</a>:</h4>
<p>Defining directly is probably not desired because knowing what that <code>n</code> is is precisely what <code>int_degree</code> helps determine.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>