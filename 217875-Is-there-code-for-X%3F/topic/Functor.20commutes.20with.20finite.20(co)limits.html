---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html">Functor commutes with finite (co)limits</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220016805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220016805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220016805">(Dec 15 2020 at 17:55)</a>:</h4>
<p>What's the idiomatic way to say that a functor commutes with finite (co)limits?<br>
I would like to be able to formulate the following definition in lean:<br>
<a href="https://stacks.math.columbia.edu/tag/0034">https://stacks.math.columbia.edu/tag/0034</a></p>



<a name="220016809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220016809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220016809">(Dec 15 2020 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> any hints?</p>



<a name="220016959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220016959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220016959">(Dec 15 2020 at 17:56)</a>:</h4>
<p>My usual go-to is something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v₁</span><span class="o">)</span> <span class="o">[</span><span class="n">small_category</span> <span class="n">J</span><span class="o">]</span> <span class="o">[</span><span class="n">fin_category</span> <span class="n">J</span><span class="o">]</span> <span class="o">:</span>
<span class="n">preserves_limits_of_shape</span> <span class="n">J</span> <span class="n">F</span>
</code></pre></div>



<a name="220017011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017011">(Dec 15 2020 at 17:56)</a>:</h4>
<p>I should let you know that I'm trying to define flat functors as well</p>



<a name="220017030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017030">(Dec 15 2020 at 17:56)</a>:</h4>
<p>in this branch: <a href="https://github.com/leanprover-community/mathlib/tree/flat">https://github.com/leanprover-community/mathlib/tree/flat</a></p>



<a name="220017095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017095">(Dec 15 2020 at 17:57)</a>:</h4>
<p>I also suspect it might be nice to have abbreviations for <code>preserves_terminal</code>, <code>preserves_binary_products</code> etc</p>



<a name="220017173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017173">(Dec 15 2020 at 17:57)</a>:</h4>
<p>in particular if you want to assume that <code>F</code> preserves finite limits the assumption you need is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="o">[</span><span class="bp">∀</span> <span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v₁</span><span class="o">)</span> <span class="o">[</span><span class="bp">𝒥</span> <span class="o">:</span> <span class="n">small_category</span> <span class="n">J</span><span class="o">]</span> <span class="o">[</span><span class="bp">@</span><span class="n">fin_category</span> <span class="n">J</span> <span class="bp">𝒥</span><span class="o">],</span>
      <span class="bp">@</span><span class="n">preserves_limits_of_shape</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">J</span> <span class="bp">𝒥</span> <span class="n">F</span><span class="o">]</span>
</code></pre></div>



<a name="220017242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017242">(Dec 15 2020 at 17:58)</a>:</h4>
<p>which is ugly!</p>



<a name="220017255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017255">(Dec 15 2020 at 17:58)</a>:</h4>
<p>Yeah....</p>



<a name="220017393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017393">(Dec 15 2020 at 17:59)</a>:</h4>
<p>but the definition of having finite limits is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">has_finite_limits</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">Π</span> <span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="bp">𝒥</span> <span class="o">:</span> <span class="n">small_category</span> <span class="n">J</span><span class="o">]</span> <span class="o">[</span><span class="bp">@</span><span class="n">fin_category</span> <span class="n">J</span> <span class="bp">𝒥</span><span class="o">],</span> <span class="bp">@</span><span class="n">has_limits_of_shape</span> <span class="n">J</span> <span class="bp">𝒥</span> <span class="n">C</span> <span class="n">_</span>
</code></pre></div>



<a name="220017419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017419">(Dec 15 2020 at 17:59)</a>:</h4>
<p>so we could just hide this like that and not have to worry about the ugliness in practice</p>



<a name="220017521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017521">(Dec 15 2020 at 18:00)</a>:</h4>
<p>Why do we need to tell lean about the small_category instance explicitly?</p>



<a name="220017608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017608">(Dec 15 2020 at 18:01)</a>:</h4>
<p>I think it's a general thing about registering new instances inside binders</p>



<a name="220017630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017630">(Dec 15 2020 at 18:01)</a>:</h4>
<p>Oh ok.</p>



<a name="220017662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017662">(Dec 15 2020 at 18:01)</a>:</h4>
<p>Thanks. I'll play around with this for a bit.</p>



<a name="220017693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017693">(Dec 15 2020 at 18:01)</a>:</h4>
<p>As in, you could alternatively do <code>Π (J : Type v) [𝒥 : small_category J] , by exactI Π [fin_category J], ...</code></p>



<a name="220017699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017699">(Dec 15 2020 at 18:01)</a>:</h4>
<p>You might be able to sneak in a cunning <code>by exactI</code> after <code>[small_category J]</code></p>



<a name="220017734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017734">(Dec 15 2020 at 18:01)</a>:</h4>
<p>yeah that</p>



<a name="220017810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017810">(Dec 15 2020 at 18:02)</a>:</h4>
<p>I think they're both unfortunate though</p>



<a name="220017831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017831">(Dec 15 2020 at 18:02)</a>:</h4>
<p>Fair point</p>



<a name="220017833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Functor%20commutes%20with%20finite%20%28co%29limits/near/220017833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Functor.20commutes.20with.20finite.20(co)limits.html#220017833">(Dec 15 2020 at 18:02)</a>:</h4>
<p>Yeah I agree.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>