---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html">∀ (r : ℝ), ∥r∥^2 = r * r</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216994392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/216994392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#216994392">(Nov 17 2020 at 12:07)</a>:</h4>
<p><code>library_search</code> didn't seem to find anything, at least not before I got fed up of waiting:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.basic</span>
<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∥</span><span class="n">r</span><span class="bp">∥^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">*</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="216995208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/216995208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#216995208">(Nov 17 2020 at 12:17)</a>:</h4>
<p>Is this a sensible simp lemma? It's a more general form of <a href="https://leanprover-community.github.io/mathlib_docs/find/is_R_or_C.norm_sq_of_real">docs#is_R_or_C.norm_sq_of_real</a></p>



<a name="217003238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217003238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217003238">(Nov 17 2020 at 13:42)</a>:</h4>
<p>Added in <a href="https://github.com/leanprover-community/mathlib/issues/5017">#5017</a>, seemed not to break anything</p>



<a name="217003728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217003728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217003728">(Nov 17 2020 at 13:46)</a>:</h4>
<p>Is <code>r^2 = r * r</code> a simp lemma?</p>



<a name="217004294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217004294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217004294">(Nov 17 2020 at 13:51)</a>:</h4>
<p>If not then <code>r^2</code> is probably a better right hand side for this guy</p>



<a name="217005395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217005395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217005395">(Nov 17 2020 at 14:01)</a>:</h4>
<p>No, it's not</p>



<a name="217005762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217005762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217005762">(Nov 17 2020 at 14:05)</a>:</h4>
<p>I guess my question then becomes what to do with <code>norm_sq_of_real</code>, since with my other changes in that PR its LHS is no longer simp normal - so either:</p>
<ul>
<li>pow_two becomes a simp lemma, and I adjust the RHS of <code>real.norm_sq_eq</code> as you suggest</li>
<li>I leave the RHS of <code>real.norm_sq_eq</code> unchanged despite your argument</li>
<li>I remove <code>simp</code> from <code>norm_sq_of_real</code> without offering an alternate sequence of simp lemmas in its place</li>
</ul>



<a name="217009051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217009051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217009051">(Nov 17 2020 at 14:30)</a>:</h4>
<p>I think I'll go for option 3 there.</p>



<a name="217009279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217009279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217009279">(Nov 17 2020 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, do you think any or all of these should be in <code>analysis/normed_space/basic</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">real.norm_mul_norm_self</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∥</span><span class="n">r</span><span class="bp">∥*∥</span><span class="n">r</span><span class="bp">∥</span> <span class="bp">=</span> <span class="n">r</span><span class="bp">*</span><span class="n">r</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">abs_mul_abs_self</span><span class="o">]</span>
<span class="kd">lemma</span> <span class="n">real.norm_mul_self</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∥</span><span class="n">r</span><span class="bp">*</span><span class="n">r</span><span class="bp">∥</span> <span class="bp">=</span> <span class="n">r</span><span class="bp">*</span><span class="n">r</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">abs_mul_self</span><span class="o">]</span>
<span class="kd">lemma</span> <span class="n">real.norm_sq_eq</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∥</span><span class="n">r</span><span class="bp">∥^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">r</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">pow_two</span><span class="o">,</span> <span class="n">pow_two</span><span class="o">,</span> <span class="n">abs_mul_abs_self</span><span class="o">]</span>
</code></pre></div>



<a name="217009324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217009324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217009324">(Nov 17 2020 at 14:32)</a>:</h4>
<p>I don't really have an opinion beyond being suspicious of <code>simp</code> lemmas that duplicate subterms</p>



<a name="217009588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217009588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217009588">(Nov 17 2020 at 14:34)</a>:</h4>
<p>Well, <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_hom.map_add">docs#add_monoid_hom.map_add</a> is a simp lemma that duplicates subterms (the<code>⇑f</code>)</p>



<a name="217010773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%88%80%20%28r%20%3A%20%E2%84%9D%29%2C%20%E2%88%A5r%E2%88%A5%5E2%20%3D%20r%20%2A%20r/near/217010773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.88.80.20(r.20.3A.20.E2.84.9D).2C.20.E2.88.A5r.E2.88.A5.5E2.20.3D.20r.20*.20r.html#217010773">(Nov 17 2020 at 14:42)</a>:</h4>
<p>I wonder if over the reals (and the complexes?), a simp lemma turning the norm into the absolute value would be a good idea. And having these as simp lemmas for the absolute value would be nice.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>