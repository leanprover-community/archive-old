---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html">✔ pi subgroups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270686778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270686778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270686778">(Feb 04 2022 at 09:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="470149">Joachim Breitner</span> has marked this topic as resolved.</p>



<a name="270716317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270716317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270716317">(Feb 04 2022 at 13:46)</a>:</h4>
<p>Hmm, with this API it we have <code>pi ∅ H = ⊤</code> which is quite confusing and often not what I want. And trying to generalize</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">⁅</span><span class="n">H₁.prod</span> <span class="n">H₂</span><span class="o">,</span> <span class="n">K₁.prod</span> <span class="n">K₂</span><span class="bp">⁆</span> <span class="bp">=</span> <span class="bp">⁅</span><span class="n">H₁</span><span class="o">,</span> <span class="n">K₁</span><span class="bp">⁆.</span><span class="n">prod</span> <span class="bp">⁅</span><span class="n">H₂</span><span class="o">,</span> <span class="n">K₂</span><span class="bp">⁆</span>
</code></pre></div>
<p>to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="bp">⁅</span><span class="n">subgroup.pi</span> <span class="n">I</span> <span class="n">H</span><span class="o">,</span> <span class="n">subgroup.pi</span> <span class="n">I</span> <span class="n">K</span><span class="bp">⁆</span> <span class="bp">=</span> <span class="n">subgroup.pi</span> <span class="n">I</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="bp">⁅</span><span class="n">H</span> <span class="n">i</span><span class="o">,</span> <span class="n">K</span> <span class="n">i</span><span class="bp">⁆</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>turns out to be much more involved than it sounded. It seems it only holds for finite families (because in the infinite case, <code>subgroup.pi</code> is _not_ generated by the embedding of the subgroups). And even if I restrict to finite types it seems harder than it should be… but right now I have no better idea than to push through with force.</p>



<a name="270716458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270716458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270716458">(Feb 04 2022 at 13:47)</a>:</h4>
<p>Why is <code>pi ∅ H = ⊤</code> confusing? The smaller the set, the bigger the pi subgroup.</p>



<a name="270720613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270720613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270720613">(Feb 04 2022 at 14:17)</a>:</h4>
<p>Hmm, I have a hard time putting my finger on it.  Maybe because I’d expect induction on <code>I</code> grow the set, rather than shrink it? <br>
Anyways, I think I have been able to do the proof that I needed (for <code>I = univ</code> and <code>fintype</code> only, though)</p>



<a name="270720810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270720810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270720810">(Feb 04 2022 at 14:19)</a>:</h4>
<p>Hmmm, we have <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.pi_mono">docs#submodule.pi_mono</a>, but not the one with the other argument.</p>



<a name="270721051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270721051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270721051">(Feb 04 2022 at 14:21)</a>:</h4>
<p>When a dimension is not included in <code>s</code>, <code>whatever.pi</code> takes everything in that direction. <code>s</code> is a set of constraints, if that makes sense?</p>



<a name="270721416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270721416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270721416">(Feb 04 2022 at 14:23)</a>:</h4>
<p>Yes, it  makes sense as a generalization of <code>set.pi</code>. It just wasn’t very useful in my work so far.</p>



<a name="270721529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270721529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270721529">(Feb 04 2022 at 14:24)</a>:</h4>
<p>In the end I got this: <a href="https://github.com/leanprover-community/mathlib/pull/11825/files">https://github.com/leanprover-community/mathlib/pull/11825/files</a><br>
I had to define <code>pi.single1</code> as a variant of <code>pi.single</code> that defaults to <code>1</code>  (not <code>0</code>). I should probably break that out into a separate PR. What would be a good name for it?</p>



<a name="270721744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270721744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270721744">(Feb 04 2022 at 14:26)</a>:</h4>
<p>What seems reasonable to me is to rename <code>pi.single</code> to <code>pi.add_single</code> and <code>pi.single1</code> to <code>pi.single</code>, or to just rename <code>pi.single1</code> to <code>pi.mul_single</code>.</p>



<a name="270721847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270721847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270721847">(Feb 04 2022 at 14:27)</a>:</h4>
<p>Either way, you shouldn't have to write an entire new API. Instead, you should refactor the existing API to talk about multiplicative stuff and add <code>@[to_additive]</code> on all declarations to automatically generate the additive version.</p>



<a name="270722505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270722505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270722505">(Feb 04 2022 at 14:33)</a>:</h4>
<p>Fair point, I’ll tackle that later – today I’ll continue piling unpolished PRs on top of each other to finally close the finite nilpotent equivalence loop :-)</p>



<a name="270822520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270822520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270822520">(Feb 05 2022 at 11:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.E2.9C.94.20pi.20subgroups/near/270721744">said</a>:</p>
<blockquote>
<p>What seems reasonable to me is to rename <code>pi.single</code> to <code>pi.add_single</code></p>
</blockquote>
<p>hmm, not sure that would be a great name. There isn't anything additive about <code>pi.single</code> per se, and it actually is used with multiplication as well, e.g. in</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">pi.single_mul</span> <span class="o">[</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">mul_zero_class</span> <span class="bp">$</span> <span class="n">f</span> <span class="n">i</span><span class="o">]</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">single</span> <span class="n">i</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">single</span> <span class="n">i</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">single</span> <span class="n">i</span> <span class="n">y</span> <span class="o">:=</span>
</code></pre></div>
<p>So <code>zero_single</code> or <code>one_single</code>? But that's verbose. Maybe subscript <code>0</code> and subscript <code>1</code>?</p>
<p>Naming is hard :-)</p>



<a name="270822619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270822619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270822619">(Feb 05 2022 at 11:57)</a>:</h4>
<p>The point is that it would follow the parallelization of the multiplicative and additive stories. And <code>0</code> is the additive version of <code>1</code>!</p>



<a name="270822691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270822691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270822691">(Feb 05 2022 at 11:58)</a>:</h4>
<p>So you wouldn’t be bothered if that lemma would now read</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">pi.add_single_mul</span> <span class="o">[</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">mul_zero_class</span> <span class="bp">$</span> <span class="n">f</span> <span class="n">i</span><span class="o">]</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">add_single</span> <span class="n">i</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">add_single</span> <span class="n">i</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">add_single</span> <span class="n">i</span> <span class="n">y</span> <span class="o">:=</span>
</code></pre></div>



<a name="270823856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270823856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270823856">(Feb 05 2022 at 12:23)</a>:</h4>
<p>Eh, no I guess</p>



<a name="270826687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270826687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270826687">(Feb 05 2022 at 13:24)</a>:</h4>
<p>Ok, on it then :-)</p>



<a name="270826917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270826917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270826917">(Feb 05 2022 at 13:29)</a>:</h4>
<p>I think <code>single</code> and <code>mul_single</code> would be better</p>



<a name="270826963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270826963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270826963">(Feb 05 2022 at 13:30)</a>:</h4>
<p>Unless we also want to rename <a href="https://leanprover-community.github.io/mathlib_docs/find/function.support">docs#function.support</a> to add_support</p>



<a name="270826981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270826981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270826981">(Feb 05 2022 at 13:30)</a>:</h4>
<p><code>single₀</code> and <code>single₁</code> would be another option</p>



<a name="270827064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270827064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270827064">(Feb 05 2022 at 13:32)</a>:</h4>
<p>I'd encourage you to make a poll in <a class="stream" data-stream-id="113488" href="/#narrow/stream/113488-general">#general</a>  before actually doing any work</p>



<a name="270827458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270827458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270827458">(Feb 05 2022 at 13:42)</a>:</h4>
<p>Ok, some preliminary work in <a href="https://github.com/leanprover-community/mathlib/pull/11849/files">https://github.com/leanprover-community/mathlib/pull/11849/files</a> but I can rename based on the poll, and will better wait for the poll to conclude before updating all affected theories.</p>



<a name="270827875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20pi%20subgroups/near/270827875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20pi.20subgroups.html#270827875">(Feb 05 2022 at 13:48)</a>:</h4>
<p>Poll at <a href="#narrow/stream/113488-general/topic/quo.20vadis.20.60pi.2Esingle.60/near/270827818">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/quo.20vadis.20.60pi.2Esingle.60/near/270827818</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>