---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html">Running doc-gen against an external repository</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217176910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217176910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217176910">(Nov 18 2020 at 18:30)</a>:</h4>
<p>I'm trying to do this in a github action over at <a href="https://github.com/pygae/lean-ga/issues/16">pygae/lean-ga#16</a>, but running into <code>lean</code> failing with no diagnostic. Has anyone set this up successfully in a non-mathlib repo before?</p>



<a name="217187898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217187898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217187898">(Nov 18 2020 at 19:53)</a>:</h4>
<p>doc-gen is unfortunately still mathlib-specific; one of the goals is to make it more generic, but we haven't made much progress on that yet.</p>



<a name="217190792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217190792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217190792">(Nov 18 2020 at 20:16)</a>:</h4>
<p>Actually I sort of got it working</p>



<a name="217190864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217190864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217190864">(Nov 18 2020 at 20:17)</a>:</h4>
<p>At least, I can run doc_gen and generate a massive json file</p>



<a name="217190890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217190890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217190890">(Nov 18 2020 at 20:17)</a>:</h4>
<p>Although I think the json might be interspersed with errors from stdout...</p>



<a name="217191229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217191229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217191229">(Nov 18 2020 at 20:20)</a>:</h4>
<p>I'd be amazed if you got something useful without making changes to doc-gen, but maybe things have changed since I last looked at it. In any case, feel free to open issues at the doc-gen repo if there are specific things that can be fixed there to make it more usable for you.</p>



<a name="217191799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217191799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217191799">(Nov 18 2020 at 20:24)</a>:</h4>
<p>I think what I'll probably end up with is mathlib + my project in the HTML, but that's better than nothing</p>



<a name="217191930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217191930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217191930">(Nov 18 2020 at 20:25)</a>:</h4>
<p>As expected, the json file is prefaced with compiler output because doc-gen uses stdout to write json. Would it be straightforward to change it to write to a named file? Can lean read argv to obtain a filename?</p>



<a name="217192650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217192650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217192650">(Nov 18 2020 at 20:31)</a>:</h4>
<p>(this is the offending line: <a href="https://github.com/leanprover-community/doc-gen/blob/3f9aa62feecb66062091c3633cab08f2f64f8e24/src/export_json.lean#L396">https://github.com/leanprover-community/doc-gen/blob/3f9aa62feecb66062091c3633cab08f2f64f8e24/src/export_json.lean#L396</a>)</p>



<a name="217196139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217196139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217196139">(Nov 18 2020 at 21:01)</a>:</h4>
<p>Ah, sure enough, it's mathlib-specific: <a href="https://github.com/leanprover-community/doc-gen/blob/3f9aa62feecb66062091c3633cab08f2f64f8e24/print_docs.py#L46-L54">https://github.com/leanprover-community/doc-gen/blob/3f9aa62feecb66062091c3633cab08f2f64f8e24/print_docs.py#L46-L54</a></p>



<a name="217196767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217196767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217196767">(Nov 18 2020 at 21:06)</a>:</h4>
<p>Created <a href="https://github.com/leanprover-community/doc-gen/issues/100">leanprover-community/doc-gen#100</a> and <a href="https://github.com/leanprover-community/doc-gen/issues/99">leanprover-community/doc-gen#99</a> to fix those two issues</p>



<a name="217282802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217282802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217282802">(Nov 19 2020 at 15:15)</a>:</h4>
<p>Got it working: <a href="https://pygae.github.io/lean-ga/">https://pygae.github.io/lean-ga/</a> (using <a href="https://github.com/leanprover-community/doc-gen/issues/102">leanprover-community/doc-gen#102</a> + github action hacks)</p>



<a name="217284113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284113">(Nov 19 2020 at 15:24)</a>:</h4>
<p>The lean-ga links don't work: <a href="https://pygae.github.io/lean-ga/lean-ga/geometric_algebra/nursery/instances">https://pygae.github.io/lean-ga/lean-ga/geometric_algebra/nursery/instances</a></p>



<a name="217284146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284146">(Nov 19 2020 at 15:24)</a>:</h4>
<p>Yeah, I'm fixing that right now</p>



<a name="217284162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284162">(Nov 19 2020 at 15:24)</a>:</h4>
<p>Double <code>lean-ga</code> in the URL</p>



<a name="217284200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284200">(Nov 19 2020 at 15:24)</a>:</h4>
<p>Looks like module docstrings might be missing too</p>



<a name="217284208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284208">(Nov 19 2020 at 15:24)</a>:</h4>
<p>I like the core/mathlib separation though.</p>



<a name="217284254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284254">(Nov 19 2020 at 15:25)</a>:</h4>
<p>Hmmm, none of the links on the left work.</p>



<a name="217284275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284275">(Nov 19 2020 at 15:25)</a>:</h4>
<p>Yeah, all of them have the same problem</p>



<a name="217284305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284305">(Nov 19 2020 at 15:25)</a>:</h4>
<p><code>core</code> / <code>mathlib</code> was not supposed to be part of the url</p>



<a name="217284328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284328">(Nov 19 2020 at 15:25)</a>:</h4>
<p>Since it's not part of what you type after <code>import</code></p>



<a name="217284734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217284734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217284734">(Nov 19 2020 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Running.20doc-gen.20against.20an.20external.20repository/near/217284208">said</a>:</p>
<blockquote>
<p>I like the core/mathlib separation though.</p>
</blockquote>
<p>That's good, because it would probably be more work to remove it</p>



<a name="217285794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217285794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217285794">(Nov 19 2020 at 15:35)</a>:</h4>
<p>Links are fixed, <del>but the sidebar rendering is a bit worse</del></p>



<a name="217291064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217291064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217291064">(Nov 19 2020 at 16:08)</a>:</h4>
<p>Thanks for the improvements to doc-gen!</p>



<a name="217670088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217670088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217670088">(Nov 23 2020 at 19:13)</a>:</h4>
<p>New sidebar is live!</p>



<a name="217670218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Running%20doc-gen%20against%20an%20external%20repository/near/217670218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Running.20doc-gen.20against.20an.20external.20repository.html#217670218">(Nov 23 2020 at 19:13)</a>:</h4>
<p><a href="/user_uploads/3121/j1DkDAX9YWsFAYsefgit61CF/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/j1DkDAX9YWsFAYsefgit61CF/image.png" title="image.png"><img src="/user_uploads/3121/j1DkDAX9YWsFAYsefgit61CF/image.png"></a></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>