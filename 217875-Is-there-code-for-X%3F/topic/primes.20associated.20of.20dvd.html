---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html">primes associated of dvd</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225699772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225699772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225699772">(Feb 09 2021 at 14:46)</a>:</h4>
<p>I'm searching for a lemma with like this :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">associated_of_dvd</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_monoid_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span><span class="o">:</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">p_prime</span><span class="o">:</span> <span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">q_prime</span><span class="o">:</span> <span class="n">prime</span> <span class="n">q</span><span class="o">)</span> <span class="o">(</span><span class="n">dvd</span><span class="o">:</span> <span class="n">p</span> <span class="bp">∣</span> <span class="n">q</span><span class="o">):</span> <span class="n">associated</span> <span class="n">p</span> <span class="n">q</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>I did not find it in mathlib, and I was wondering what was the best way to prove it<br>
(maybe using <code>associated_of_dvd_dvd</code> and the definition of primes ?</p>



<a name="225704446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225704446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225704446">(Feb 09 2021 at 15:16)</a>:</h4>
<p><code>associated_of_dvd_dvd</code> needs something stronger than a comm_monoid_with_zero, it needs some cancellation property. I have no immediate feeling for whether what you're asking is true in the generality in which it can be stated :-)</p>



<a name="225704842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225704842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225704842">(Feb 09 2021 at 15:19)</a>:</h4>
<p>I have these vague nightmare memories from undergraduate times about p dividing q and q dividing p but p and q not being associated because the cofactors weren't units...</p>



<a name="225705761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225705761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225705761">(Feb 09 2021 at 15:25)</a>:</h4>
<p>Let X be the free comm monoid with 0 generated by four variables p q a b, subject to the relations p * a = q and q * b = p. Is this a counterexample?</p>



<a name="225706455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225706455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225706455">(Feb 09 2021 at 15:29)</a>:</h4>
<p>My memory from UG is that one can even do this with commutative rings. Consider <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">]</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>p</mi><mi>a</mi><mi>b</mi><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\R[a,b,p]/(pab-p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbb">R</span></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mclose">]</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span>. This is not an integral domain so nobody in their right mind would be trying to factor stuff, but it might be the case that p and pa are both prime. I might be wrong though, I'm just talking from a vague memory.</p>



<a name="225706716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225706716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225706716">(Feb 09 2021 at 15:31)</a>:</h4>
<p>One thing is for sure though -- Lean keeps you honest :-)</p>



<a name="225706815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225706815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225706815">(Feb 09 2021 at 15:31)</a>:</h4>
<p>I just stated the lemma in the largest class of structure that could hold the statement <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <br>
Actually I only need it in a principal ideal domain</p>



<a name="225707683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225707683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225707683">(Feb 09 2021 at 15:37)</a>:</h4>
<p>lol :-) It's true for <code>comm_cancel_monoid_with_zero</code>, which is "integral domain but without the addition".</p>



<a name="225707736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225707736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225707736">(Feb 09 2021 at 15:37)</a>:</h4>
<p>You should prove it and make a PR! Do you have a github userid?</p>



<a name="225707943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225707943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225707943">(Feb 09 2021 at 15:38)</a>:</h4>
<p>And you should construct a counterexample without the hypothesis of cancellation and add to the evidence that we should have a dictionary of counterexamples in mathlib (this came up in the ordered semiring fiasco).</p>



<a name="225707971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225707971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225707971">(Feb 09 2021 at 15:38)</a>:</h4>
<p>because my vague undergrad memory won't be around forever.</p>



<a name="225708082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225708082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225708082">(Feb 09 2021 at 15:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/primes.20associated.20of.20dvd/near/225707736">said</a>:</p>
<blockquote>
<p>You should prove it and make a PR! Do you have a github userid?</p>
</blockquote>
<p>Yes, I got one :)<br>
I was just wondering what was the most elegant way to prove this, I'll figure out something :)</p>



<a name="225708169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225708169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225708169">(Feb 09 2021 at 15:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/primes.20associated.20of.20dvd/near/225707943">said</a>:</p>
<blockquote>
<p>And you should construct a counterexample without the hypothesis of cancellation and add to the evidence that we should have a dictionary of counterexamples in mathlib (this came up in the ordered semiring fiasco).</p>
</blockquote>
<p>I'm searching for a counterexample :)</p>



<a name="225709816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225709816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225709816">(Feb 09 2021 at 15:50)</a>:</h4>
<p>Note that there is <code>exists_associated_mem_of_dvd_prod</code> that is a small generalization of what you want.</p>



<a name="225713889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225713889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225713889">(Feb 09 2021 at 16:15)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/exists_associated_mem_of_dvd_prod">docs#exists_associated_mem_of_dvd_prod</a></p>



<a name="225714120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225714120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225714120">(Feb 09 2021 at 16:17)</a>:</h4>
<p>I still think that there's an argument for putting in this special case, it's still a slight kerfuffle to get it from that</p>



<a name="225717167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225717167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225717167">(Feb 09 2021 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/primes.20associated.20of.20dvd/near/225705761">said</a>:</p>
<blockquote>
<p>Let X be the free comm monoid with 0 generated by four variables p q a b, subject to the relations p * a = q and q * b = p. Is this a counterexample?</p>
</blockquote>
<p>I thing have a counterexample but in the non-commutative case -- I might be mistaken, I do not know monoids very well.<br>
Let's consider finite and "left-infinite" words : a; b and p = ...ababab; q = ...bababa<br>
To compute u * v : if v is finite, then we just concatenate, else we say that u * v = v.<br>
We get then get a monoid where pa = q and qb = p, but p and w aren't associated (the only unit being the empty word).</p>



<a name="225718978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225718978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225718978">(Feb 09 2021 at 16:46)</a>:</h4>
<p>Who knows -- you'll have to check the axioms. It might well work though!</p>



<a name="225845661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225845661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225845661">(Feb 10 2021 at 14:42)</a>:</h4>
<p>Done.<br>
I took inspiration from <code>exists_associated_mem_of_dvd_prod</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.associated</span>

<span class="kd">lemma</span> <span class="n">associated_of_dvd</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_cancel_monoid_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span><span class="o">:</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">p_prime</span><span class="o">:</span> <span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">q_prime</span><span class="o">:</span> <span class="n">prime</span> <span class="n">q</span><span class="o">)</span> <span class="o">(</span><span class="n">dvd</span><span class="o">:</span> <span class="n">p</span> <span class="bp">∣</span> <span class="n">q</span><span class="o">):</span> <span class="n">associated</span> <span class="n">p</span> <span class="n">q</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">dvd</span> <span class="k">with</span> <span class="n">c</span> <span class="n">hc</span><span class="o">,</span>
  <span class="n">cases</span> <span class="o">((</span><span class="n">irreducible_of_prime</span> <span class="n">q_prime</span><span class="o">)</span><span class="bp">.</span><span class="n">is_unit_or_is_unit</span> <span class="n">hc</span><span class="o">)</span>
    <span class="bp">.</span><span class="n">resolve_left</span> <span class="n">p_prime.not_unit</span> <span class="k">with</span> <span class="n">u</span> <span class="n">hu</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">⟨</span> <span class="n">u</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hu</span><span class="o">,</span> <span class="n">hc</span><span class="o">]</span> <span class="o">⟩,</span>
<span class="kd">end</span>
</code></pre></div>
<p>I'll PR this to mathlib :)</p>



<a name="225894743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/primes%20associated%20of%20dvd/near/225894743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/primes.20associated.20of.20dvd.html#225894743">(Feb 10 2021 at 19:33)</a>:</h4>
<p>Nice proof! It's about half the length of the one I knocked up the other day. Yes definitely PR!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>