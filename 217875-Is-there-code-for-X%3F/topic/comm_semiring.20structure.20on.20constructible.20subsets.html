---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html">comm_semiring structure on constructible subsets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="218440324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218440324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218440324">(Dec 01 2020 at 15:53)</a>:</h4>
<p>Dear All,</p>
<p>I am wondering whether</p>
<ol>
<li>constructible subsets of a topological space are in Lean (I could not find them);</li>
<li>if they are, is there is a <code>comm_semiring</code> structure on them?</li>
</ol>
<p>In case you are wondering what I mean by constructible subsets, they are the subsets generated by open sets by iterations of<br>
a) taking unions,<br>
b) taking intersections,<br>
c) taking complements.</p>



<a name="218440726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218440726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218440726">(Dec 01 2020 at 15:56)</a>:</h4>
<p>The constructible topology should be easy to define using an inductive proposition. In fact, I remember seeing the construction at some point, but I can't remember where right now.</p>



<a name="218440825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218440825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218440825">(Dec 01 2020 at 15:56)</a>:</h4>
<p>I think Alex did it at LFTCM</p>



<a name="218441041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441041">(Dec 01 2020 at 15:57)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lftcm2020/blob/master/src/exercises_sources/wednesday/topological_spaces.lean">https://github.com/leanprover-community/lftcm2020/blob/master/src/exercises_sources/wednesday/topological_spaces.lean</a></p>



<a name="218441042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441042">(Dec 01 2020 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> your answer makes me think that I should have stressed that constructible sets are closed under <em>finitely many</em> of the operations written above.  Is the constructible topology this, or does it allow, for instance, infinite intersections of open sets?</p>



<a name="218441126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441126">(Dec 01 2020 at 15:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lftcm2020/blob/c07fa2bd7968e5d1faf32d59745d14d702e5548c/src/exercises_sources/wednesday/topological_spaces.lean#L117">https://github.com/leanprover-community/lftcm2020/blob/c07fa2bd7968e5d1faf32d59745d14d702e5548c/src/exercises_sources/wednesday/topological_spaces.lean#L117</a></p>



<a name="218441162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441162">(Dec 01 2020 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> and <span class="user-mention" data-user-id="243562">@Adam Topaz</span> <br>
Thank you for the pointer!  I will take a look at the link!</p>



<a name="218441261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441261">(Dec 01 2020 at 15:59)</a>:</h4>
<p>Take a look at the second one with the precise line...</p>



<a name="218441292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441292">(Dec 01 2020 at 15:59)</a>:</h4>
<p>But I don't think the ring structure is there.</p>



<a name="218441500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441500">(Dec 01 2020 at 16:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/218441261">said</a>:</p>
<blockquote>
<p>Take a look at the second one with the precise line...</p>
</blockquote>
<p>Indeed!  This is exactly the definition I had in mind, thanks!</p>



<a name="218441692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218441692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218441692">(Dec 01 2020 at 16:01)</a>:</h4>
<p>Ping <span class="user-mention" data-user-id="127136">@Alex J. Best</span>  just in case <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="218442210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218442210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218442210">(Dec 01 2020 at 16:04)</a>:</h4>
<p>So, it turns out that I unknowingly did quite a few of those steps and went on to prove the ring structure.  However, in quite a clumsy way.  Would anyone be interested in seeing what I did and help me get it into better shape?</p>



<a name="218442285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218442285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218442285">(Dec 01 2020 at 16:05)</a>:</h4>
<p>(Not only clumsy, but really getting my hands dirty and not using much of automation...)</p>



<a name="218442403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218442403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218442403">(Dec 01 2020 at 16:06)</a>:</h4>
<p>Sure!</p>



<a name="218442634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218442634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218442634">(Dec 01 2020 at 16:07)</a>:</h4>
<p>Great: should I link a gist?  Or do you prefer me to paste it here (I have ~250 lines of code)</p>



<a name="218442689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218442689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218442689">(Dec 01 2020 at 16:07)</a>:</h4>
<p>gist might be better</p>



<a name="218443255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218443255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218443255">(Dec 01 2020 at 16:11)</a>:</h4>
<p><a href="https://gist.github.com/adomani/9e2d64e34ccd627eb00cf1d13691a8de">Here</a> it is!</p>



<a name="218443328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218443328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218443328">(Dec 01 2020 at 16:11)</a>:</h4>
<p>I only did it for the exercise session, so all I wrote is what's there (i.e almost nothing). I think Antoine Chambert-Loir also said I should assume locally noetherian or something too to match the literature.</p>



<a name="218443602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218443602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218443602">(Dec 01 2020 at 16:12)</a>:</h4>
<p>I have never really used <code>instances</code>, I tried using them, but could not get them to work...</p>
<p>Also, I had a hard time getting the <code>const X</code> terms to print nicely, and they do not...</p>



<a name="218445948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218445948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218445948">(Dec 01 2020 at 16:27)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> I have a meeting in a few minutes, so I can't take a very close look right now, but here is one quick suggestion.<br>
I think the class <code>const</code> would make more sense in the following form:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">constr</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">is_constr</span> <span class="o">:</span> <span class="n">is_constructible</span> <span class="n">C</span><span class="o">)</span>
</code></pre></div>



<a name="218446072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218446072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218446072">(Dec 01 2020 at 16:28)</a>:</h4>
<p>The type of all constructible subsets can then be made using, e.g. <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.bundled">docs#category_theory.bundled</a> (or something like that)</p>



<a name="218446458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218446458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218446458">(Dec 01 2020 at 16:31)</a>:</h4>
<p>Ok, I will look into this!  I also think that I prefer to replace the <code>∧</code> by <code>→</code>, so I may do a few such cosmetic changes!  However, I may also not have a lot of time right now, since it is 5.30pm here, right now</p>



<a name="218446481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218446481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218446481">(Dec 01 2020 at 16:31)</a>:</h4>
<p>In any case, already thank you very much for the suggestions!</p>



<a name="218448388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218448388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218448388">(Dec 01 2020 at 16:43)</a>:</h4>
<p>On second thought, I'm not sure whether <code>constr</code> as above should be a class, only because <code>is_open</code> is not a class.</p>



<a name="218449247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218449247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218449247">(Dec 01 2020 at 16:48)</a>:</h4>
<p>To be honest, <code>class</code>, <code>structure</code>, <code>inductive</code> look all very similar to me...</p>



<a name="218451889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218451889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218451889">(Dec 01 2020 at 17:07)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> We had a session at LFTCM about structures and classes. By now, you might be able to get more out of it.</p>



<a name="218451931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218451931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218451931">(Dec 01 2020 at 17:07)</a>:</h4>
<p>Ah, thanks <span class="user-mention" data-user-id="112680">@Johan Commelin</span> : I will watch it!</p>



<a name="218451949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218451949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218451949">(Dec 01 2020 at 17:07)</a>:</h4>
<p>If you have questions, I'm happy to explain more (if you want, we can do a short video call at some point)</p>



<a name="218452092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218452092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218452092">(Dec 01 2020 at 17:08)</a>:</h4>
<p>Thanks for the offer!  I will give it a go on my own, but I may ask some lingering questions, once I am through with the video and tried it a little bit on my own!</p>



<a name="218452122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218452122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218452122">(Dec 01 2020 at 17:08)</a>:</h4>
<p><span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="218453862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218453862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218453862">(Dec 01 2020 at 17:21)</a>:</h4>
<p>Is the semiring structure you’re talking about essentially the Boolean algebra structure, or else one we could define from any Boolean algebra?</p>



<a name="218454331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454331">(Dec 01 2020 at 17:25)</a>:</h4>
<p>It is indeed the Boolean algebra: unions and intersections of sets, happen to map constructible sets to themselves.</p>



<a name="218454576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454576">(Dec 01 2020 at 17:27)</a>:</h4>
<p>Does mathlib have the boolean algebra structure on <code>set X</code> for any <code>X</code>?</p>



<a name="218454660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454660">(Dec 01 2020 at 17:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/218449247">said</a>:</p>
<blockquote>
<p>To be honest, <code>class</code>, <code>structure</code>, <code>inductive</code> look all very similar to me...</p>
</blockquote>
<p>There is also the Lean 4 documentation that was written a couple of days ago, which I found concise, clear, well-written, to the point.<br>
<a href="https://github.com/leanprover/lean4/blob/master/doc/typeclass.md">https://github.com/leanprover/lean4/blob/master/doc/typeclass.md</a></p>
<p>Of course the syntax differs a little bit from Lean 3, but I don't think that will be a big problem.</p>



<a name="218454855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454855">(Dec 01 2020 at 17:29)</a>:</h4>
<p>Great: I will take a look!  I actually prefer to have something to read through, before watching a video and trying it out on my example!</p>



<a name="218454907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454907">(Dec 01 2020 at 17:30)</a>:</h4>
<p><code>rg "comm_ring \(set"</code> doesn't give me any hits, so I think it's not there</p>



<a name="218454958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454958">(Dec 01 2020 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/218454576">said</a>:</p>
<blockquote>
<p>Does mathlib have the boolean algebra structure on <code>set X</code> for any <code>X</code>?</p>
</blockquote>
<p>I guess  it does. So maybe we should define constructible sets as the boolean subalgebra of <code>set X</code> generated by opens?</p>



<a name="218454973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218454973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218454973">(Dec 01 2020 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/218454576">said</a>:</p>
<blockquote>
<p>Does mathlib have the boolean algebra structure on <code>set X</code> for any <code>X</code>?</p>
</blockquote>
<p>This reminds me the Friday challenge with <code>37={37}</code>...</p>



<a name="218455052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455052">(Dec 01 2020 at 17:30)</a>:</h4>
<p>I am in the process of learning this stuff too, watching the videos. I spent something like 15 minutes trying to figure out what was the difference between the structure  <code>is_even_cube_above_100</code> and the proposition with the two <code>∧</code>... and of course he explains this 3 minutes later, so be sure to watch the whole video before starting to think that you do not understand something!</p>



<a name="218455113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455113">(Dec 01 2020 at 17:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/218454907">said</a>:</p>
<blockquote>
<p><code>rg "comm_ring \(set"</code> doesn't give me any hits, so I think it's not there</p>
</blockquote>
<p>I may be wrong, but <code>comm_ring</code> might assume the existence of opposites for <code>add</code>, so would not work with the Boolean algebra, I think</p>



<a name="218455237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455237">(Dec 01 2020 at 17:32)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.boolean_algebra</span>
<span class="kn">import</span> <span class="n">data.set</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">boolean_algebra</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
</code></pre></div>
<p>That works for me <span class="user-mention" data-user-id="112680">@Johan Commelin</span></p>



<a name="218455639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455639">(Dec 01 2020 at 17:35)</a>:</h4>
<p>I guess the <code>boolean_algebra</code> to <code>comm_semiring</code> instance is missing?</p>



<a name="218455662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455662">(Dec 01 2020 at 17:35)</a>:</h4>
<p>AFAIK mathlib doesn't have a definition of Boolean subalgebra, though</p>



<a name="218455847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455847">(Dec 01 2020 at 17:36)</a>:</h4>
<p><a href="https://github.com/rwbarton/lean-omin/blob/master/src/for_mathlib/boolean_subalgebra.lean">https://github.com/rwbarton/lean-omin/blob/master/src/for_mathlib/boolean_subalgebra.lean</a></p>



<a name="218455939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218455939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218455939">(Dec 01 2020 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> if you want to learn about structures, then I cannot recommend highly enough making a PR for boolean subalgebras. Several Imperial students have got a lot out of bundling various subobjects (submonoids, subgroups and subrings were all bundled by Imperial beginners-at-the-time).</p>



<a name="218456184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/218456184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#218456184">(Dec 01 2020 at 17:39)</a>:</h4>
<p>I will give it a try, although in this case, it seems that Reid already has done quite a bit of work on this!</p>



<a name="222562893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222562893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222562893">(Jan 13 2021 at 10:51)</a>:</h4>
<p>Dear All,</p>
<p>I found some time to work on this and my progress so far is in the gist below.  If anyone would like to chime in to give suggestions and improvements on how to work with the file below, I would be _really_ grateful!</p>
<p>My final goal is to define a boolean_algebra/comm_semiring structure generated by the open subsets of a topological space.  In particular, I am not so interested in having the singletons of X to be part of the boolean algebra.  Eventually, this would help with <code>constructible</code> subsets of a topological space.</p>
<p>Thanks!</p>
<hr>
<p>Gist:<br>
<a href="https://gist.github.com/adomani/a1228c1f9726a999c8460ebf445d8871">https://gist.github.com/adomani/a1228c1f9726a999c8460ebf445d8871</a></p>



<a name="222563102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222563102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222563102">(Jan 13 2021 at 10:53)</a>:</h4>
<p>Could you rename the gist to have a <code>.lean</code> extension so that it syntax-highlights?</p>



<a name="222563291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222563291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222563291">(Jan 13 2021 at 10:55)</a>:</h4>
<p>I just did: thanks for the suggestion!</p>



<a name="222688364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222688364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222688364">(Jan 14 2021 at 08:04)</a>:</h4>
<p>I am trying to make the arguments clearer and the linter wanted a <code>inhabited</code> instance.  I provided one, but I do not understand why it works: can someone give me a pointer as to why the code below compiles and pleases the linter?</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.lattice</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">fil</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span>

<span class="kd">inductive</span> <span class="n">uc_closure</span> <span class="o">(</span><span class="n">fil</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">uc_empty</span> <span class="o">:</span> <span class="n">uc_closure</span> <span class="bp">∅</span>
<span class="bp">|</span> <span class="n">uc_fil</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span><span class="o">},</span> <span class="n">fil</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">uc_closure</span> <span class="n">f</span>
<span class="bp">|</span> <span class="n">uc_union</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">C</span> <span class="n">D</span><span class="o">},</span> <span class="n">uc_closure</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">uc_closure</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">uc_closure</span> <span class="o">(</span><span class="n">C</span> <span class="bp">∪</span> <span class="n">D</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">uc_compl</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">C</span><span class="o">},</span> <span class="n">uc_closure</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">uc_closure</span> <span class="n">C</span><span class="bp">ᶜ</span>

<span class="sd">/--- `uc_type` is the SubType of `set X` consisting of the subsets</span>
<span class="sd">spelled out by `uc_closure fil`. -/</span>
<span class="kd">def</span> <span class="n">uc_type</span> <span class="o">(</span><span class="n">fil</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">uc_closure</span> <span class="n">fil</span> <span class="n">s</span><span class="o">}</span>

<span class="c1">--  I thought that, for all `R`and all choices of `fil : set X → Prop`,  I would have had to given an example of `uc_type fil`</span>
<span class="c1">-- but it seems that I did not.  Moreover, Lean is happy only with checking the axiom uc.empty?</span>
<span class="kd">instance</span> <span class="n">uc_type.inhabited</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="o">(</span><span class="n">uc_type</span> <span class="n">fil</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">uc_closure.uc_empty</span><span class="o">⟩⟩</span>
</code></pre></div>



<a name="222688962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222688962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222688962">(Jan 14 2021 at 08:13)</a>:</h4>
<p>The inhabited linter just wants to see an explicit example of a term of your type. If you've made a family of types it just wants to see a term of one of them. Is that your question?</p>



<a name="222688987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222688987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222688987">(Jan 14 2021 at 08:13)</a>:</h4>
<p>Your inhabited instance ignored the provided <code>fil</code>, so it says, no matter what <code>fil</code> I get, there's always the closure over the empty set.</p>



<a name="222689058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689058">(Jan 14 2021 at 08:14)</a>:</h4>
<p>Especially because <code>uc_closure.uc_empty</code> doesn't actually use a <code>fil</code> argument.</p>



<a name="222689174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689174">(Jan 14 2021 at 08:15)</a>:</h4>
<p>Ah, I see!  It is the first time that I work with <code>inhabited</code>, so my doubt was really basic.  So, <code>inhabited</code> just wants to know that there is one value of all the parameters of the construction that produces a non-empty type, correct?  What I have provided is the example on the empty type, if I understood correctly.</p>
<p>Thanks!</p>



<a name="222689289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689289">(Jan 14 2021 at 08:17)</a>:</h4>
<p>Kevin and Yakov, I think that indeed what confused me was that I had to specify <code>fil</code> to the instance, but then I proved something that did not work with an arbitrary <code>fil</code>.  Now it is clearer!</p>



<a name="222689296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689296">(Jan 14 2021 at 08:17)</a>:</h4>
<p>Yes it's really easy to please. You could probably even make it happy by telling it an explicit fil on nat and writing down an explicit term of uc_type for that fil</p>



<a name="222689324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689324">(Jan 14 2021 at 08:17)</a>:</h4>
<p>You actually want to prove that the type is inhabited for <em>all</em> settings of the parameters, in this case <code>fil</code></p>



<a name="222689382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689382">(Jan 14 2021 at 08:18)</a>:</h4>
<p>in your case this is easy because you have a constructor that says as much</p>



<a name="222689409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689409">(Jan 14 2021 at 08:18)</a>:</h4>
<p>Mario, I thought that this was the case, but I think that the proof only uses an "empty" <code>fil</code>.  I think that I am still missing something...</p>



<a name="222689428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689428">(Jan 14 2021 at 08:19)</a>:</h4>
<p>No, the proof shows that the empty set is in the closure of any <code>fil</code></p>



<a name="222689444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689444">(Jan 14 2021 at 08:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/comm_semiring.20structure.20on.20constructible.20subsets/near/222689174">said</a>:</p>
<blockquote>
<p>one value of all the parameters of the construction that produces a non-empty type</p>
</blockquote>
<p>Rather, no matter the value of the parameters, one can always produce a term of the type.</p>



<a name="222689463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689463">(Jan 14 2021 at 08:19)</a>:</h4>
<p>Ah, but what if the remaining axioms were contradictory?  Why did I not have to check that, then?</p>



<a name="222689477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689477">(Jan 14 2021 at 08:19)</a>:</h4>
<p>because these aren't axioms, they are constructors</p>



<a name="222689525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689525">(Jan 14 2021 at 08:20)</a>:</h4>
<p>it's an inductive type, so any constructor will do</p>



<a name="222689555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689555">(Jan 14 2021 at 08:20)</a>:</h4>
<p>if it was a structure then you would have to set all the fields to be something coherent, which might be harder</p>



<a name="222689590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689590">(Jan 14 2021 at 08:21)</a>:</h4>
<p>Ok, so, regardless of what <code>X</code> and <code>fil</code> are, the empty set is always a term of the resulting type.  Now this makes much more sense!  Thanks and sorry for the silly questions!</p>



<a name="222689604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689604">(Jan 14 2021 at 08:21)</a>:</h4>
<p>for example proving that <code>group A</code> is inhabited is not at all trivial</p>



<a name="222689655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689655">(Jan 14 2021 at 08:21)</a>:</h4>
<p>(actually it's only true if <code>A</code> is inhabited)</p>



<a name="222689716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689716">(Jan 14 2021 at 08:22)</a>:</h4>
<p>This seems to be clearing up a more fundamental confusion of mine on the distinction between inductive types and structures/classes.</p>



<a name="222689746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689746">(Jan 14 2021 at 08:22)</a>:</h4>
<p>a structure is sugar for an inductive type with one constructor and a bunch of arguments to that constructor</p>



<a name="222689858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689858">(Jan 14 2021 at 08:24)</a>:</h4>
<p>So this means that it is possible to eliminate all structures, if you have inductive types?</p>



<a name="222689871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689871">(Jan 14 2021 at 08:24)</a>:</h4>
<p>My experience with the inhabited linter is that it's happy even if you construct a term of a specialisation of your type family. Is this not the case?</p>



<a name="222689877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689877">(Jan 14 2021 at 08:24)</a>:</h4>
<p>Not just that, they are actually inductive types under the hood</p>



<a name="222689879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689879">(Jan 14 2021 at 08:24)</a>:</h4>
<p>(not that I would want to, but <code>structure</code> is just one special kind of inductive type?)</p>



<a name="222689905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689905">(Jan 14 2021 at 08:25)</a>:</h4>
<p>There is a <code>rec_on</code> and <code>no_confusion</code> and all the other things you find on inductive types</p>



<a name="222689909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689909">(Jan 14 2021 at 08:25)</a>:</h4>
<p>Ok, whereas a class is something like defining a mathematical object by generators and relations?</p>



<a name="222689920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689920">(Jan 14 2021 at 08:25)</a>:</h4>
<p>and I think if you ask lean if it's an inductive type it will say yes</p>



<a name="222689928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689928">(Jan 14 2021 at 08:25)</a>:</h4>
<p>A class is just a structure</p>



<a name="222689944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689944">(Jan 14 2021 at 08:25)</a>:</h4>
<p>The only extra thing is that it's tagged with an attribute</p>



<a name="222689950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689950">(Jan 14 2021 at 08:25)</a>:</h4>
<p>A class is a structure with an annotation on it, <code>class</code> = <code>@[class] structure</code></p>



<a name="222689998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222689998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222689998">(Jan 14 2021 at 08:26)</a>:</h4>
<p>So the type class system knows about it</p>



<a name="222690027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690027">(Jan 14 2021 at 08:26)</a>:</h4>
<p>the other part of that being <code>instance</code> = <code>@[instance] def</code></p>



<a name="222690041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690041">(Jan 14 2021 at 08:26)</a>:</h4>
<p>It's like a simp lemna is just a lemma tagged with the simp attribute</p>



<a name="222690062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690062">(Jan 14 2021 at 08:27)</a>:</h4>
<p>Mathematically a class and a structure are the same</p>



<a name="222690086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690086">(Jan 14 2021 at 08:27)</a>:</h4>
<p>Ok, I probably have to go back and read again classes/structures/inductive types and re-read Kevin's post on no-confusion!</p>



<a name="222690105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690105">(Jan 14 2021 at 08:27)</a>:</h4>
<p>Attributes just change the way some tactics or internals use the definition</p>



<a name="222690160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690160">(Jan 14 2021 at 08:28)</a>:</h4>
<p>Eg the type class inference square bracket machine will look for <code>class</code> tags</p>



<a name="222690177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690177">(Jan 14 2021 at 08:28)</a>:</h4>
<p>And the simplifier will look for <code>simp</code> tags</p>



<a name="222690199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690199">(Jan 14 2021 at 08:29)</a>:</h4>
<p>Ah, so the things that are in square brackets are structures labelled with a <code>class</code> tag, right?</p>



<a name="222690227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690227">(Jan 14 2021 at 08:29)</a>:</h4>
<p>yes, <code>[group A]</code> only does something because <code>group</code> is marked as <code>@[class]</code></p>



<a name="222690295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690295">(Jan 14 2021 at 08:30)</a>:</h4>
<p>if you did <code>[even n]</code> it wouldn't work</p>



<a name="222690341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690341">(Jan 14 2021 at 08:31)</a>:</h4>
<p>Thanks, this is now entering my mind: I believe that it bounced on it several times in the past...</p>



<a name="222690725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690725">(Jan 14 2021 at 08:36)</a>:</h4>
<p>the <code>inhabited</code>-linter is there to force us to do some basic checks that we are not making stupid definitions. So when you write an instance to make it happy, it's best to try to make the example as "canonical" as possible. In other words, even if you can give an example for just <code>X = nat</code>, we encourage you to make it for every <code>X</code>, just like you did.</p>



<a name="222690839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222690839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222690839">(Jan 14 2021 at 08:38)</a>:</h4>
<p>... in line with the aspiration that everything is mathlib should be as general as possible, including the specific examples!</p>



<a name="222691279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222691279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222691279">(Jan 14 2021 at 08:44)</a>:</h4>
<p>So, while we are talking about this, does this mean that maybe I should make <code>uc_closure</code> a <code>structure</code>?  Or even a <code>class</code>?</p>



<a name="222691842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222691842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222691842">(Jan 14 2021 at 08:51)</a>:</h4>
<p>A structure is nothing more than an inductive type with one constructor. There's no such thing as a structure in some sense, it's just a certain kind of inductive type with some syntax sugar. Your inductive type has four constructors.</p>



<a name="222692013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222692013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222692013">(Jan 14 2021 at 08:53)</a>:</h4>
<p>Ah, I see!  Thanks!</p>



<a name="222732126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222732126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222732126">(Jan 14 2021 at 15:24)</a>:</h4>
<p>Dear All,</p>
<p>to get some familiarity with these notions, I showed how you can construct a boolean subalgebra of a boolean algebra.  The gist is linked below.  If you have any comments, they are more than welcome, as usual!</p>
<p>I will create a PR with this later on, if people think that it might be useful.</p>
<p>Thanks!</p>
<p><a href="https://gist.github.com/adomani/2c60da5448abb9ef27769162eb3038a0">https://gist.github.com/adomani/2c60da5448abb9ef27769162eb3038a0</a></p>



<a name="222732730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222732730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222732730">(Jan 14 2021 at 15:29)</a>:</h4>
<p>It surprises me how different the approach you use there is to how things like <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra">docs#subalgebra</a> are defined, in that you build an inductive predicate instead of stating properties of a set</p>



<a name="222733195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222733195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222733195">(Jan 14 2021 at 15:32)</a>:</h4>
<p>Yes I agree. Did you look at how it's done for subgroups of groups?</p>



<a name="222733283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222733283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222733283">(Jan 14 2021 at 15:33)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">boolean_subalgebra</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">boolean_algebra</span> <span class="n">B</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">carrier</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">)</span>
<span class="o">(</span><span class="n">bot_mem</span> <span class="o">:</span> <span class="o">(</span><span class="bp">⊥</span> <span class="o">:</span> <span class="n">B</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
<span class="o">(</span><span class="n">sup_mem</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
<span class="o">(</span><span class="n">compl_mem</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">ᶜ</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
</code></pre></div>
<p>would normally be the start</p>



<a name="222733918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222733918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222733918">(Jan 14 2021 at 15:36)</a>:</h4>
<p>You want to make the type of subalgebras, and construct the Galois insertion from subsets to subalgebras. This gives you a complete lattice structure on subalgebras. I would strongly recommend looking at how it is done for submonoids, subgroups, subrings etc.</p>



<a name="222734203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734203">(Jan 14 2021 at 15:38)</a>:</h4>
<p>I have not looked at anything, other than the manual for seeing the syntax of inductive types...  I will take a look at subgroups/sub-other things!</p>



<a name="222734530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734530">(Jan 14 2021 at 15:40)</a>:</h4>
<p>I think your <code>is_bool_subalgebra fil x</code> would usually be spelt <code>x \in boolean_subalgebra.closure fil</code></p>



<a name="222734557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734557">(Jan 14 2021 at 15:40)</a>:</h4>
<p>As a general rule, I have embraced the "talking about types instead of sets" idea, which is why I did not think of using an "underlying set".  However, as I do not have any experience of how these definitions play out in the long run, I do not insist on maintaining it like this!</p>
<p>I was pleased to see that, when I start with the open subsets of a topological space, I do get the usual constructible sets!</p>



<a name="222734645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734645">(Jan 14 2021 at 15:41)</a>:</h4>
<p>Well, <code>B → Prop</code> is the same as <code>set B</code>, so your <code>is_bool_subalgebra fil</code> is simply a computation of that underlying set!</p>



<a name="222734701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734701">(Jan 14 2021 at 15:41)</a>:</h4>
<p>Sure, but I do not need to talk about elements...</p>



<a name="222734846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222734846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222734846">(Jan 14 2021 at 15:42)</a>:</h4>
<p>Arguably <code>is_bool_subalgebra fil a</code> is talking about elements because it's defeq to <code>a ∈ is_bool_subalgebra fil</code></p>



<a name="222735311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222735311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222735311">(Jan 14 2021 at 15:45)</a>:</h4>
<p>"Types instead of sets" is more about using <code>(b : B)</code> instead of <code>(a : A) (ha : a ∈ b)</code> - using <code>(a : A) (ha : p a)</code> isn't morally any different to the <code>set</code> spelling (although both are fine when its convenient!)</p>



<a name="222755938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222755938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222755938">(Jan 14 2021 at 17:56)</a>:</h4>
<p>Why "fil"?</p>



<a name="222781634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/comm_semiring%20structure%20on%20constructible%20subsets/near/222781634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/comm_semiring.20structure.20on.20constructible.20subsets.html#222781634">(Jan 14 2021 at 20:48)</a>:</h4>
<p>Because I was thinking of using the elements of a filter at some point...  Not a very good reason!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>