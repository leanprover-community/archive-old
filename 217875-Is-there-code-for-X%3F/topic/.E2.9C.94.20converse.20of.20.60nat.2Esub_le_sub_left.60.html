---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html">✔ converse of `nat.sub_le_sub_left`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="298275587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298275587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298275587">(Sep 11 2022 at 17:51)</a>:</h4>
<p>While we have <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.sub_le_sub_left">docs#nat.sub_le_sub_left</a>, I seem unable to find the converse</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.le_of_sub_le_sub_left</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span>
</code></pre></div>
<p>Is it really not in mathlib?</p>



<a name="298275721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298275721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298275721">(Sep 11 2022 at 17:53)</a>:</h4>
<p>OK, <code>library_search</code> came up with <code>(tsub_le_tsub_iff_left hn).mp h</code>. I had expected something in the <code>nat</code> namespace...</p>



<a name="298275724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298275724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298275724">(Sep 11 2022 at 17:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="479359">Michael Stoll</span> has marked this topic as resolved.</p>



<a name="298276030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276030">(Sep 11 2022 at 17:57)</a>:</h4>
<p>I guess "truncated subtraction" also works for things like the non-negative reals, maybe that's the logic?</p>



<a name="298276047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276047">(Sep 11 2022 at 17:57)</a>:</h4>
<p>Also, on <a href="https://github.com/leanprover-community/mathlib/tree/adomani_remove_subs_at">branch#adomani_remove_subs_at</a>, this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.remove_subs</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">remove_subs</span><span class="bp">!</span> <span class="n">at</span> <span class="n">h</span>
</code></pre></div>
<p><span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="298276195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276195">(Sep 11 2022 at 17:59)</a>:</h4>
<p>Probably, the tactic could be called <code>remove_tsubs</code>.  Or, even better, <code>RemoveTSubs</code>!</p>



<a name="298276374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276374">(Sep 11 2022 at 18:01)</a>:</h4>
<p>does it work for <code>tsub</code> in general or just for specifically nat's tsub?</p>



<a name="298276518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276518">(Sep 11 2022 at 18:03)</a>:</h4>
<p>I implemented it to specifically check that the terms have type <code>nat</code>, but this could easily be removed.  All that you need is a lemma that states that <code>a - b</code> is <code>0</code> if <code>a \le b</code> or an <code>exists_add_of_le</code> otherwise.</p>



<a name="298276551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276551">(Sep 11 2022 at 18:03)</a>:</h4>
<p>Once the case split is done, the tactic calls linarith to deal with the pieces, so there is not much more to do there.</p>



<a name="298276719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276719">(Sep 11 2022 at 18:05)</a>:</h4>
<p>With very little modifications, I think that the tactic could work for a linear, canonically ordered something.</p>



<a name="298276829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276829">(Sep 11 2022 at 18:06)</a>:</h4>
<p>(Though, to be honest, I do not know if there is much interest in a new Lean3 tactic, so close to the Lean4 transition.)</p>



<a name="298276851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276851">(Sep 11 2022 at 18:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60/near/298276829">said</a>:</p>
<blockquote>
<p>(Though, to be honest, I do not know if there is much interest in a new Lean3 tactic, so close to the Lean4 transition.)</p>
</blockquote>
<p>words said since 2019 :(</p>



<a name="298276975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%E2%9C%94%20converse%20of%20%60nat.sub_le_sub_left%60/near/298276975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.E2.9C.94.20converse.20of.20.60nat.2Esub_le_sub_left.60.html#298276975">(Sep 11 2022 at 18:08)</a>:</h4>
<p>Well, the tactic for nat is already PR <a href="https://github.com/leanprover-community/mathlib/pull/16443">#16443</a>.  Feel free to show support for it!  I'd be more than happy to clean it up, if it is desired!  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>