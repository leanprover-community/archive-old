---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html">Trivial ite lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="292319357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319357">(Aug 07 2022 at 13:17)</a>:</h4>
<p>How do I prove this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">R₁</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_6</span><span class="o">}</span>
  <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R₁</span><span class="o">]</span>
  <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">i</span> <span class="n">i'</span> <span class="o">:</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">ite</span> <span class="o">(</span><span class="n">i'</span> <span class="bp">=</span> <span class="n">i</span><span class="o">)</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">ite</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">i'</span><span class="o">)</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="292319533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319533">(Aug 07 2022 at 13:21)</a>:</h4>
<p>if_congr should be helpful, you could also just do congr', even simp could make progress</p>



<a name="292319538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319538">(Aug 07 2022 at 13:21)</a>:</h4>
<p><code>split_ifs ; tauto,</code></p>



<a name="292319604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319604">(Aug 07 2022 at 13:22)</a>:</h4>
<p>or <code>congr' 1,  simp</code></p>



<a name="292319793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319793">(Aug 07 2022 at 13:26)</a>:</h4>
<p>Does <code>rw eq_comm</code> work?</p>



<a name="292319878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319878">(Aug 07 2022 at 13:28)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> no it rewrites the equality itself</p>



<a name="292319898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292319898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292319898">(Aug 07 2022 at 13:29)</a>:</h4>
<p><code>@eq_comm n</code>?</p>



<a name="292320037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320037">(Aug 07 2022 at 13:31)</a>:</h4>
<p>thanks everyone, I used Patrick's first suggestion now</p>



<a name="292320042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320042">(Aug 07 2022 at 13:32)</a>:</h4>
<p>Eric: rewrite tactic failed, motive is not type correct<br>
  λ (_a : Prop), ite (i' = i) 1 0 = ite (i = i') 1 0 = (ite _a 1 0 = ite (i = i') 1 0)</p>



<a name="292320091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320091">(Aug 07 2022 at 13:32)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> <code>simp</code> didn't help, which surprised me</p>



<a name="292320107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320107">(Aug 07 2022 at 13:33)</a>:</h4>
<p><code>congr</code> was doing crazy things and I forgot that there is <code>congr'</code></p>



<a name="292320191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320191">(Aug 07 2022 at 13:35)</a>:</h4>
<p>Follow-up question: which of these lemmas (if any) should be in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">std_basis_apply'</span> <span class="o">(</span><span class="n">i</span> <span class="n">i'</span> <span class="o">:</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">std_basis</span> <span class="n">R₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="o">:</span> <span class="n">n</span><span class="o">),</span> <span class="n">R₁</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span> <span class="mi">1</span> <span class="n">i'</span> <span class="bp">=</span>
  <span class="n">ite</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">i'</span><span class="o">)</span> <span class="mi">1</span> <span class="mi">0</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">linear_map.std_basis_apply</span><span class="o">,</span> <span class="n">function.update_apply</span><span class="o">,</span> <span class="n">pi.zero_apply</span><span class="o">],</span>
  <span class="n">split_ifs</span><span class="bp">;</span>
  <span class="n">tauto</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">ring_hom_ite_zero_one</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="n">σ₁</span> <span class="o">(</span><span class="n">ite</span> <span class="n">p</span> <span class="mi">0</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ite</span> <span class="n">p</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">ring_hom_ite_one_zero</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="n">σ₁</span> <span class="o">(</span><span class="n">ite</span> <span class="n">p</span> <span class="mi">1</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ite</span> <span class="n">p</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">}</span>
</code></pre></div>



<a name="292320351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320351">(Aug 07 2022 at 13:38)</a>:</h4>
<p><code>σ₁</code> is obviously a <code>ring_hom</code></p>



<a name="292320481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320481">(Aug 07 2022 at 13:40)</a>:</h4>
<p>My second suggestion was morally more correct (closer to what you tried with <code>rw</code>)</p>



<a name="292320641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320641">(Aug 07 2022 at 13:44)</a>:</h4>
<p>but it was less Lean-correct. <code>congr' 1, rw [eq_iff_iff], exact eq_comm</code>works though</p>



<a name="292320662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320662">(Aug 07 2022 at 13:44)</a>:</h4>
<p>or better <code>congr' 1, rw [eq_iff_iff, eq_comm]</code></p>



<a name="292320703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320703">(Aug 07 2022 at 13:45)</a>:</h4>
<p>Eric's suggestion can be made to work, but Lean resists: <code>simp_rw (@eq_comm n i _)</code>.</p>



<a name="292320898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292320898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> FR <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292320898">(Aug 07 2022 at 13:49)</a>:</h4>
<p>What about <code>simp_rw eq_comm</code> or <code>simp only [eq_comm]</code>?</p>



<a name="292329867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Trivial%20ite%20lemma/near/292329867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Trivial.20ite.20lemma.html#292329867">(Aug 07 2022 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Trivial.20ite.20lemma/near/292319533">said</a>:</p>
<blockquote>
<p>if_congr should be helpful, you could also just do congr', even simp could make progress</p>
</blockquote>
<p>This works for me, a one line proof is <code>exact if_congr eq_comm rfl rfl</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>