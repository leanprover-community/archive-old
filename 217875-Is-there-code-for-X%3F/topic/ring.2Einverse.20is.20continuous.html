---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html">ring.inverse is continuous</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276918740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276918740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276918740">(Mar 28 2022 at 19:15)</a>:</h4>
<p>Is this true? Do we have it somewhere with stronger assumptions?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid_with_zero</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">has_continuous_mul</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">A</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">ring.inverse</span> <span class="n">A</span><span class="o">)</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">|</span> <span class="n">is_unit</span> <span class="n">A</span><span class="o">}</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>



<a name="276918815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276918815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276918815">(Mar 28 2022 at 19:15)</a>:</h4>
<p>It's true for the group of units of a complete normed ring.</p>



<a name="276918880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276918880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276918880">(Mar 28 2022 at 19:16)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/normed_ring.inverse_continuous_at">docs#normed_ring.inverse_continuous_at</a></p>



<a name="276919035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919035">(Mar 28 2022 at 19:17)</a>:</h4>
<p>Note also that <code>units R</code> is given a topology in <a href="https://leanprover-community.github.io/mathlib_docs/find/units.topological_space">docs#units.topological_space</a>, but it's not always the same as the subspace topology from <code>R</code></p>



<a name="276919209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919209">(Mar 28 2022 at 19:19)</a>:</h4>
<p>(Instead, it's precisely the topology which also makes inversion continuous.)</p>



<a name="276919343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919343">(Mar 28 2022 at 19:20)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/units.topological_group">docs#units.topological_group</a></p>



<a name="276919410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919410">(Mar 28 2022 at 19:21)</a>:</h4>
<p>I guess it's also true in a topological field too?</p>



<a name="276919802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919802">(Mar 28 2022 at 19:24)</a>:</h4>
<p>It would be worth stating both the <code>ring.inverse</code> lemma and the fact <code>is_open_map (coe : units k → k)</code> for a topological field.</p>



<a name="276919844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919844">(Mar 28 2022 at 19:24)</a>:</h4>
<p>By analogy with <a href="https://leanprover-community.github.io/mathlib_docs/find/normed_ring.inverse_continuous_at">docs#normed_ring.inverse_continuous_at</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/units.is_open_map_coe">docs#units.is_open_map_coe</a></p>



<a name="276919957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919957">(Mar 28 2022 at 19:25)</a>:</h4>
<p>I ask because I was trying to show that the matrix inverse is continuous around the units</p>



<a name="276919971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276919971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276919971">(Mar 28 2022 at 19:25)</a>:</h4>
<p>And I'm not sure what assumptions I should be taking</p>



<a name="276920052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920052">(Mar 28 2022 at 19:26)</a>:</h4>
<p>It sounds like I need multiple copies of the lemma for the topological_field vs normed_ring cases?</p>



<a name="276920084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920084">(Mar 28 2022 at 19:26)</a>:</h4>
<p>You can apply it to the normed ring of square matrices over a normed field directly.</p>



<a name="276920111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920111">(Mar 28 2022 at 19:27)</a>:</h4>
<p>Matrices aren't (yet) a normed ring</p>



<a name="276920124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920124">(Mar 28 2022 at 19:27)</a>:</h4>
<p>(in mathlib)</p>



<a name="276920218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920218">(Mar 28 2022 at 19:28)</a>:</h4>
<p>I think establishing that instance will be by far the fastest way to prove that fact.</p>



<a name="276920246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920246">(Mar 28 2022 at 19:28)</a>:</h4>
<p>I'm already 90% of the way there</p>



<a name="276920281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920281">(Mar 28 2022 at 19:28)</a>:</h4>
<p>It's the pesky <code>ring.inverse A.det</code> that's left</p>



<a name="276920310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920310">(Mar 28 2022 at 19:29)</a>:</h4>
<p>But the abstract proof is also the "right" one -- eg it's what I've used before to prove that the "inversion" map on endomorphisms is continuous.</p>



<a name="276920311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920311">(Mar 28 2022 at 19:29)</a>:</h4>
<p>Besides, going this way fills out missing API</p>



<a name="276920416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920416">(Mar 28 2022 at 19:30)</a>:</h4>
<p>Why do you need this?  Is it maybe a fact about endomorphisms in disguise?</p>



<a name="276920949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920949">(Mar 28 2022 at 19:34)</a>:</h4>
<p>Oh, I'm sure it is a statement about endomorphisms in disguise</p>



<a name="276920981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276920981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276920981">(Mar 28 2022 at 19:35)</a>:</h4>
<p>I was trying to state <a href="https://en.wikipedia.org/wiki/Jacobi%27s_formula">https://en.wikipedia.org/wiki/Jacobi%27s_formula</a>, and just filling out various API</p>



<a name="276921138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276921138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276921138">(Mar 28 2022 at 19:36)</a>:</h4>
<p>Yes, this is a fact about endomorphisms!</p>



<a name="276921387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276921387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276921387">(Mar 28 2022 at 19:38)</a>:</h4>
<p>Last time I tried that translation, I got stumped by trying to translate <code>matrix.adjugate</code> to endomorphisms</p>



<a name="276921733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276921733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276921733">(Mar 28 2022 at 19:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/ring.2Einverse.20is.20continuous/near/276920246">said</a>:</p>
<blockquote>
<p>I'm already 90% of the way there</p>
</blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13009">#13009</a> is the PR.</p>



<a name="276921961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276921961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276921961">(Mar 28 2022 at 19:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/ring.2Einverse.20is.20continuous/near/276921387">said</a>:</p>
<blockquote>
<p>Last time I tried that translation, I got stumped by trying to translate <code>matrix.adjugate</code> to endomorphisms</p>
</blockquote>
<p>If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>E</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">f : E \to E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> is your endomorphism, and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> has dimension <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>, then the adjugate is the induced map between exterior powers <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mrow><mo>∧</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo>:</mo><msup><mi>E</mi><mrow><mo>∧</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup><mo>→</mo><msup><mi>E</mi><mrow><mo>∧</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">f^{\wedge (n-1)}:E^{\wedge (n-1)}\to E^{\wedge (n-1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0824em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∧</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∧</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∧</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="276922022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276922022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276922022">(Mar 28 2022 at 19:45)</a>:</h4>
<p>Maybe I need to pick back up my tensor powers PR that got stalled on fin nonsense</p>



<a name="276922071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276922071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276922071">(Mar 28 2022 at 19:46)</a>:</h4>
<p>Although I guess <code>(exterior_algebra.\io R M).range ^ (n - 1)</code> could work there</p>



<a name="276928778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276928778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276928778">(Mar 28 2022 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.units</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.pi_Lp</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">nnreal</span>

<span class="kn">section</span>
<span class="kd">variables</span> <span class="o">(</span><span class="bp">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="bp">𝕜</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">m</span><span class="o">]</span>

<span class="c1">-- should add this instance</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span> <span class="k">Pi</span><span class="bp">.</span><span class="n">uniform_space</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">m</span> <span class="bp">→</span> <span class="bp">𝕜</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">[</span><span class="n">complete_space</span> <span class="bp">𝕜</span><span class="o">]</span> <span class="o">:</span> <span class="n">complete_space</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span> <span class="k">Pi</span><span class="bp">.</span><span class="n">complete</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">m</span> <span class="bp">→</span> <span class="bp">𝕜</span><span class="o">)</span>

<span class="kd">end</span>

<span class="kd">variables</span> <span class="o">(</span><span class="bp">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">m</span><span class="o">]</span>

<span class="c1">-- check that `L∞-L∞` normed group definition matches the standard uniform space instance.</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">matrix.normed_group</span> <span class="o">:</span> <span class="n">normed_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">𝕜</span><span class="o">))</span><span class="bp">.</span><span class="n">to_uniform_space</span>
  <span class="bp">=</span> <span class="n">matrix.uniform_space</span> <span class="bp">𝕜</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span>
<span class="n">rfl</span>

<span class="sd">/-- The `L1-L∞` norm on matrices. -/</span>
<span class="kd">def</span> <span class="n">matrix.normed_group'</span> <span class="o">:</span> <span class="n">normed_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">pi.normed_group</span> <span class="n">n</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">pi_Lp</span> <span class="mi">1</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">𝕜</span><span class="o">))</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">pi_Lp.normed_group</span> <span class="mi">1</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">𝕜</span><span class="o">))</span>

<span class="c1">-- check that `L1-L∞` normed group definition matches the standard uniform space instance.</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">matrix.normed_group'</span> <span class="bp">𝕜</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span><span class="bp">.</span><span class="n">to_uniform_space</span> <span class="bp">=</span> <span class="n">matrix.uniform_space</span> <span class="bp">𝕜</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="sd">/-- Matrices are a normed ring wrt the `L1-to-L∞` norm. -/</span>
<span class="kd">def</span> <span class="n">matrix.normed_ring</span> <span class="o">:</span> <span class="n">normed_ring</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_mul</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">matrix.ring</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">matrix.normed_group'</span> <span class="bp">𝕜</span> <span class="n">n</span> <span class="n">n</span> <span class="o">}</span>

<span class="kd">variables</span> <span class="o">[</span><span class="n">complete_space</span> <span class="bp">𝕜</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">))</span> <span class="o">:</span> <span class="n">continuous_at</span> <span class="n">ring.inverse</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">convert</span> <span class="bp">@</span><span class="n">normed_ring.inverse_continuous_at</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">(</span><span class="n">matrix.normed_ring</span> <span class="bp">𝕜</span> <span class="n">n</span><span class="o">)</span> <span class="n">_</span> <span class="n">A</span><span class="o">,</span>
  <span class="c1">-- apparently unrelated diamond:</span>
  <span class="c1">-- `pi.monoid_with_zero = semiring.to_monoid_with_zero (matrix n n 𝕜)`</span>
<span class="kd">end</span>
</code></pre></div>



<a name="276928991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276928991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276928991">(Mar 28 2022 at 20:46)</a>:</h4>
<p>That's a real diamond, it's telling you that you've mixed up elementwise and matrix multiplication somehow</p>



<a name="276929028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276929028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276929028">(Mar 28 2022 at 20:46)</a>:</h4>
<p>I can't see where though</p>



<a name="276929509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276929509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276929509">(Mar 28 2022 at 20:51)</a>:</h4>
<p>Ah, indeed.  This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">))</span> <span class="o">:</span> <span class="n">continuous_at</span> <span class="n">ring.inverse</span> <span class="o">(</span><span class="n">id</span> <span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">normed_ring.inverse_continuous_at</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="bp">𝕜</span><span class="o">)</span> <span class="o">(</span><span class="n">matrix.normed_ring</span> <span class="bp">𝕜</span> <span class="n">n</span><span class="o">)</span> <span class="n">_</span> <span class="n">A</span>
</code></pre></div>



<a name="276929621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276929621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276929621">(Mar 28 2022 at 20:52)</a>:</h4>
<p>The cast from <code>units (matrix n n 𝕜)</code> to <code>matrix n n 𝕜</code> went too far and turned it just to <code>n → n → 𝕜</code>.</p>



<a name="276931044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276931044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276931044">(Mar 28 2022 at 21:04)</a>:</h4>
<p>That coercion behavior has been causing trouble in some of the modular forms PRs too</p>



<a name="276931076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/276931076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#276931076">(Mar 28 2022 at 21:04)</a>:</h4>
<p>I think lean inserts a <code>coe_fn</code> too eagerly?</p>



<a name="279066565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/279066565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#279066565">(Apr 15 2022 at 10:00)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span>, is there any reason to pick the <code>L1-to-L∞</code> norm over say the operator norm or the frobenius norm? Do you have a feel for which will be easiest to show submulltiplicity of?</p>



<a name="279417918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/ring.inverse%20is%20continuous/near/279417918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/ring.2Einverse.20is.20continuous.html#279417918">(Apr 19 2022 at 14:40)</a>:</h4>
<p>Answer: Yes, the <code>L1-to-L∞</code> norm imposes much weaker typeclass requirements than the frobenius norm!</p>
<p>I've PR'd a proof of your <code>norm_mul := sorry</code> in <a href="https://github.com/leanprover-community/mathlib/pull/13518">#13518</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>