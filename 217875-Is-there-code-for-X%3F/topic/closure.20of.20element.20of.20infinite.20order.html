---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html">closure of element of infinite order</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276028546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276028546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276028546">(Mar 21 2022 at 10:10)</a>:</h4>
<p>If I have a group element with infinite order (<code>order_of a = 0</code>), where would I find lemmas about <code>subgroup.closure {a}</code>? In particular that it is isomorphic to Z?</p>



<a name="276029735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276029735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276029735">(Mar 21 2022 at 10:22)</a>:</h4>
<p>The only relevant theorem I've found is <a href="https://leanprover-community.github.io/mathlib_docs/find/subgroup.mem_closure_singleton">docs#subgroup.mem_closure_singleton</a></p>



<a name="276030209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276030209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276030209">(Mar 21 2022 at 10:27)</a>:</h4>
<p>Looks like I need to do some yak-shaving :-D</p>



<a name="276030282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276030282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276030282">(Mar 21 2022 at 10:28)</a>:</h4>
<p>The mathlib community truly in need of a :yak: emoji.</p>



<a name="276030901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276030901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276030901">(Mar 21 2022 at 10:34)</a>:</h4>
<p>I had never heard of yak-shaving before, it is very relatable!</p>



<a name="276031766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276031766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276031766">(Mar 21 2022 at 10:42)</a>:</h4>
<p>This wasn't my yak to shave, but I needed a little break from grading final exams:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.subgroup.basic</span>
<span class="kn">import</span> <span class="n">group_theory.order_of_element</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">zpow_inj_iff_of_order_of_eq_zero</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">order_of</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">m</span> <span class="bp">↔</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">n</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">m</span><span class="bp">;</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">pow_inj_iff_of_order_of_eq_zero</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">inf_cyclic</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">order_of</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">multiplicative</span> <span class="n">ℤ</span> <span class="bp">≃*</span> <span class="n">subgroup.closure</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">⟨</span><span class="n">x</span> <span class="bp">^</span> <span class="n">n.to_add</span><span class="o">,</span> <span class="kd">begin</span> <span class="n">rw</span> <span class="n">subgroup.mem_closure_singleton</span><span class="o">,</span> <span class="n">use</span> <span class="n">n</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="kd">end</span><span class="o">⟩,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">subgroup.mem_closure_singleton.mp</span> <span class="n">x.2</span><span class="o">)</span><span class="bp">.</span><span class="n">some</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="n">generalize_proofs</span> <span class="n">h'</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h'</span> <span class="o">:=</span> <span class="n">h'.some_spec</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="n">at</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="n">zpow_inj_iff_of_order_of_eq_zero</span> <span class="n">_</span> <span class="n">h</span> <span class="n">at</span> <span class="n">h'</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="n">generalize_proofs</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h'.some_spec</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">map_mul'</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">zpow_add</span><span class="o">],</span>
  <span class="kd">end</span> <span class="o">}</span>
</code></pre></div>



<a name="276032333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276032333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276032333">(Mar 21 2022 at 10:48)</a>:</h4>
<p>For your first lemma surely there should already be something about <code>x^m = x^n &lt;-&gt; order_of x \| m - n</code>?</p>



<a name="276032790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276032790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276032790">(Mar 21 2022 at 10:52)</a>:</h4>
<p><del>docs#pow_eq_pow_iff_modeq I think is the closest</del> nope</p>



<a name="276032993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276032993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276032993">(Mar 21 2022 at 10:54)</a>:</h4>
<p><del>docs#zpow_eq_mod_order_of is pretty close, it's for <code>zpow</code>.</del></p>



<a name="276033212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276033212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276033212">(Mar 21 2022 at 10:55)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/pow_inj_iff_of_order_of_eq_zero">docs#pow_inj_iff_of_order_of_eq_zero</a> seems the closest, but needs generalising to <code>zpow</code></p>



<a name="276034866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276034866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276034866">(Mar 21 2022 at 11:10)</a>:</h4>
<p>Why are there like a dozen lemmas about "finite cancellative monoids"? Isn't there a better-known name for these objects?</p>



<a name="276034881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276034881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276034881">(Mar 21 2022 at 11:11)</a>:</h4>
<p>Anyways it looks to me like <a href="https://leanprover-community.github.io/mathlib_docs/find/order_of_dvd_iff_zpow_eq_one">docs#order_of_dvd_iff_zpow_eq_one</a> is on the right track</p>



<a name="276036626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276036626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276036626">(Mar 21 2022 at 11:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/closure.20of.20element.20of.20infinite.20order/near/276034866">said</a>:</p>
<blockquote>
<p>Why are there like a dozen lemmas about "finite cancellative monoids"? Isn't there a better-known name for these objects?</p>
</blockquote>
<p>funnily enough we have <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.group_with_zero_of_cancel">docs#fintype.group_with_zero_of_cancel</a> but I don't think we have it for just normal groups</p>



<a name="276036648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276036648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276036648">(Mar 21 2022 at 11:28)</a>:</h4>
<p>there's even a <code>todo</code> above <a href="https://leanprover-community.github.io/mathlib_docs/find/exists_pow_eq_one">docs#exists_pow_eq_one</a></p>



<a name="276651024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/closure%20of%20element%20of%20infinite%20order/near/276651024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/closure.20of.20element.20of.20infinite.20order.html#276651024">(Mar 25 2022 at 17:14)</a>:</h4>
<p>Is it helpful to show that <code>closure {a} = subgroup.powers a</code> and state the lemma in terms of <a href="https://leanprover-community.github.io/mathlib_docs/find/subgroup.powers">docs#subgroup.powers</a>?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>