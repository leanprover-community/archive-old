---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html">Products of non-commutative monoids</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230244050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230244050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230244050">(Mar 14 2021 at 15:06)</a>:</h4>
<p>What's the canonical spelling of the product of a sequence of non-commutative elements?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">prod'</span> <span class="o">{</span><span class="n">M</span> <span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span> <span class="o">:=</span> <span class="o">(</span><span class="n">l.map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span>
</code></pre></div>
<p>Would it make sense to introduce notation for this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="bp">`∏⃑`</span> <span class="n">binders</span> <span class="bp">`</span> <span class="k">in</span> <span class="bp">`</span> <span class="n">l</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="n">r</span><span class="o">:(</span><span class="n">scoped</span><span class="o">:</span><span class="mi">67</span> <span class="n">f</span><span class="o">,</span> <span class="n">list.prod</span> <span class="bp">$</span> <span class="n">list.map</span> <span class="n">f</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="n">r</span>
</code></pre></div>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="o">(</span><span class="bp">∏⃑</span> <span class="n">i</span> <span class="k">in</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">],</span> <span class="n">i</span><span class="bp">*</span><span class="n">i</span><span class="o">)</span>
</code></pre></div>



<a name="230246204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246204">(Mar 14 2021 at 15:45)</a>:</h4>
<p>Do people do this?</p>



<a name="230246227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246227">(Mar 14 2021 at 15:45)</a>:</h4>
<p>Write that notation(which I largely made up), or take the product of a sequence of non-commutative elements?</p>



<a name="230246331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246331">(Mar 14 2021 at 15:47)</a>:</h4>
<p>It would allow stating things like <code>star (∏⃑ i in l, f i) = ∏⃑ i in l.reverse, star (f i)</code>, for instance (the n-ary <a href="https://leanprover-community.github.io/mathlib_docs/find/star_mul">docs#star_mul</a>)</p>



<a name="230246628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246628">(Mar 14 2021 at 15:53)</a>:</h4>
<p>Noncommutative finite products. You can state a lemma but does anyone want to use it? If people do then fair enough</p>



<a name="230246782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246782">(Mar 14 2021 at 15:56)</a>:</h4>
<p>The motivation was making the statement of <a href="https://leanprover-community.github.io/mathlib_docs/find/clifford_algebra.involute_prod_map_ι">docs#clifford_algebra.involute_prod_map_ι</a> more readable</p>



<a name="230246808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246808">(Mar 14 2021 at 15:57)</a>:</h4>
<p>The lemma itself primarily exists as a "look human, this definition is the one you would hand-wave", rather than actually being useful in a proof</p>



<a name="230246821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246821">(Mar 14 2021 at 15:57)</a>:</h4>
<p>Which makes it all the more useful to have some sort of reasonable notation for it</p>



<a name="230246893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230246893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230246893">(Mar 14 2021 at 15:58)</a>:</h4>
<p>Right. My feeling is just that <code>list.prod</code> is a CS thing, lists are everywhere in computer science, but in maths we often just use sets</p>



<a name="230247127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230247127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230247127">(Mar 14 2021 at 16:00)</a>:</h4>
<p>If you need it then you could give it one of  those fish notations that we don't use in maths :-) <code>&gt;=&gt;-&gt;</code> or whatever</p>



<a name="230247323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230247323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230247323">(Mar 14 2021 at 16:01)</a>:</h4>
<p>Yeah, I'm not tied to <code>list</code> specifically here. Just something like <code>take the product of f(i) from i = 0 to n</code> would be enough, for non-commutative <code>f(i)</code></p>



<a name="230247344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230247344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230247344">(Mar 14 2021 at 16:01)</a>:</h4>
<p>Summing over <code>finset.range</code> doesn't work for that</p>



<a name="230247546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230247546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230247546">(Mar 14 2021 at 16:02)</a>:</h4>
<p>I guess I'm saying that one has to draw a line somewhere when making an API and I usually draw the line before anything involving <code>list.prod</code>. But if you want it then all I ask is that you don't steal a notation mathematicians might want to use for something else</p>



<a name="230252489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230252489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230252489">(Mar 14 2021 at 16:36)</a>:</h4>
<p>I don't understand what Kevin is saying. Certainly we want product of lists of elements in non-commutative groups.</p>



<a name="230253201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253201">(Mar 14 2021 at 16:41)</a>:</h4>
<p>I guess I just live in a commutative world.</p>



<a name="230253412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253412">(Mar 14 2021 at 16:43)</a>:</h4>
<p>By the way, Bourbaki answers Eric's question on Page 3 of their chapter 1 of algebra .</p>



<a name="230253516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253516">(Mar 14 2021 at 16:44)</a>:</h4>
<p>In that they introduce notation?</p>



<a name="230253689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253689">(Mar 14 2021 at 16:47)</a>:</h4>
<p><a href="/user_uploads/3121/7IIL1bT9VuVhSR_Dlx1WQRUK/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/7IIL1bT9VuVhSR_Dlx1WQRUK/image.png" title="image.png"><img src="/user_uploads/3121/7IIL1bT9VuVhSR_Dlx1WQRUK/image.png"></a></div>



<a name="230253757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253757">(Mar 14 2021 at 16:48)</a>:</h4>
<p>Note for Kevin: as you can see from the very bottom of the page, this comes before defining associativity of a composition law. The definition of commutativity comes two sections later...</p>



<a name="230253780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253780">(Mar 14 2021 at 16:49)</a>:</h4>
<p>If I'm reading that correctly, that implies that we should probably just reuse the finset notation, perhaps via a <code>has_sum</code> class?</p>



<a name="230253830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230253830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230253830">(Mar 14 2021 at 16:50)</a>:</h4>
<p>I'm not claiming anything regarding mathlib, I try to convince Kevin this isn't computer science.</p>



<a name="230254026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230254026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230254026">(Mar 14 2021 at 16:54)</a>:</h4>
<p>well, it's possibly computer science if we use <code>list</code>s, the Bourbaki definition is closer to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">prod'</span> <span class="o">{</span><span class="n">M</span> <span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">ι</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">((</span><span class="n">s.sort</span> <span class="o">(</span><span class="bp">≤</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span>
</code></pre></div>



<a name="230254047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230254047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230254047">(Mar 14 2021 at 16:55)</a>:</h4>
<p>Which hides the lists under the API</p>



<a name="230255067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230255067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230255067">(Mar 14 2021 at 17:10)</a>:</h4>
<p>They assume <code>ι</code> is finite and equipped with a linear order.</p>



<a name="230258448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230258448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230258448">(Mar 14 2021 at 18:13)</a>:</h4>
<p>I have seen the description below of the fundamental group of a (connected, orientable) surface of genus <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> fairly often, so I would welcome a "non-commutative product"!</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>g</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_1(S_g)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> = (free group on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>g</mi></mrow><annotation encoding="application/x-tex">2g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> generators <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>a</mi><mi>g</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">a_1, b_1,\ldots , a_g, b_g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>) / <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∏</mo><mo stretchy="false">[</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\prod  [a_i, b_i] </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∏</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></p>



<a name="230260832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230260832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230260832">(Mar 14 2021 at 18:59)</a>:</h4>
<p>OK I'm now sold on the idea.</p>



<a name="230261843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230261843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230261843">(Mar 14 2021 at 19:17)</a>:</h4>
<p>Here's the most computer sciency way I can think of to state "associativity" <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">ls</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">M</span><span class="o">))</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">ls.map</span> <span class="n">list.prod</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span> <span class="bp">=</span> <span class="o">(</span><span class="n">mjoin</span> <span class="n">ls</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="230261893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230261893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230261893">(Mar 14 2021 at 19:18)</a>:</h4>
<p>(It looks like this lemma is missing from mathlib BTW)</p>



<a name="230262235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230262235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230262235">(Mar 14 2021 at 19:24)</a>:</h4>
<p>This is definitely on the list of things I found a strange commutativity assumption when looking through mathlib. I would claim that if pressed most mathematicians would define a product of x1 to xn via a list and not only in the commutative setting via some counting of how many times xi appears like it is done in mathlib. There are results in mathlib which would be true for arbitrary rings if the product notation would be defined via lists instead.</p>



<a name="230262607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230262607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230262607">(Mar 14 2021 at 19:31)</a>:</h4>
<p>Actually, forget what I said above, this is <a href="https://leanprover-community.github.io/mathlib_docs/find/list.prod_join">docs#list.prod_join</a> (just using join as opposed to mjoin)</p>



<a name="230265265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230265265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230265265">(Mar 14 2021 at 20:18)</a>:</h4>
<p>This is a fight I lost many years ago. I never really understood why.</p>



<a name="230270012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230270012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230270012">(Mar 14 2021 at 21:40)</a>:</h4>
<p>We could definitely use more API to make working with big operators over lists more convenient. Right now everything is in terms of finsets only because no one has put in the work to duplicate the lemmas for lists and multisets.</p>



<a name="230270275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230270275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230270275">(Mar 14 2021 at 21:45)</a>:</h4>
<p>The fight I lost a long time ago was to start with the non-commutative case and deduce the commutative case from there.</p>



<a name="230275872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230275872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230275872">(Mar 14 2021 at 22:36)</a>:</h4>
<p>We had to make some sacrifices. In analysis we did it properly. I wanted to do differentiable functions of one variable but lots of people wanted to do it properly. As a result we have a very impressive and robust theory of topological vector spaces, all manner of integrals, and we just proved FTC and can now integrate sin(x) from 0 to pi and can prove the sphere is a manifold. I am <em>only too aware of how impressive this is</em> but it does not sell our prover. In algebra we just got on with making a pile of commutative algebra and then all of a sudden we had schemes, and, a year later, perfectoid spaces. Now we need to go back and refactor stuff but it put Lean on the map. It's swings and roundabouts maybe?</p>



<a name="230299299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230299299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230299299">(Mar 15 2021 at 06:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Products.20of.20non-commutative.20monoids/near/230270275">said</a>:</p>
<blockquote>
<p>The fight I lost a long time ago was to start with the non-commutative case and deduce the commutative case from there.</p>
</blockquote>
<p>Is it really too late? I remember back then being skeptical of taking the Coq version as gospel, but obviously our current approach is terrible. :-)</p>



<a name="230300515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230300515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230300515">(Mar 15 2021 at 06:29)</a>:</h4>
<p>No surely it's not too late. I would imagine that it's just some plumbing at the bottom. I would propose <code>ideal</code> meaning "left ideal" in the non-commutative case.</p>



<a name="230301387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230301387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230301387">(Mar 15 2021 at 06:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, I think Patrick was referring to <code>big_operators</code>, not <code>ideal</code>.</p>



<a name="230301440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230301440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230301440">(Mar 15 2021 at 06:44)</a>:</h4>
<p>But yes, I'd be happy if <code>ideal</code> meant "left ideal".</p>



<a name="230301444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230301444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230301444">(Mar 15 2021 at 06:44)</a>:</h4>
<p>I don't know how it is in other areas, but I feel that it is more standard to have <code>ideal</code> mean two-sided ideal.</p>



<a name="230304341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230304341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230304341">(Mar 15 2021 at 07:32)</a>:</h4>
<p>A few days ago I made a list collecting the changes that I thought would be needed for mathlib with respect to commutativity. Feel free to comment or expand: <a href="https://github.com/leanprover-community/mathlib/projects/10">https://github.com/leanprover-community/mathlib/projects/10</a></p>



<a name="230304613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230304613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230304613">(Mar 15 2021 at 07:36)</a>:</h4>
<p>I think the first step (which probably is also helpful in the commutative setting) would be to get R-S bimodules into mathlib. Then one could use this to split the uses of left ideal and two-sided ideal in the noncommutative setting (independent of which one gets to be called ideal). Note that bi-ideal is not a term used for this structure (googling said it is used for something else). I would think that in most cases in mathlib now, the correct generalisation is to replace commutative ideal by two-sided ideal.</p>



<a name="230304658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Products%20of%20non-commutative%20monoids/near/230304658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Products.20of.20non-commutative.20monoids.html#230304658">(Mar 15 2021 at 07:37)</a>:</h4>
<p><span class="user-mention" data-user-id="317890">@Julian Külshammer</span> Thanks for doing this!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>