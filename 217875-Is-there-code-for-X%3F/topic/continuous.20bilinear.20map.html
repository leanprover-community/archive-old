---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html">continuous bilinear map</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272246705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272246705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272246705">(Feb 17 2022 at 11:37)</a>:</h4>
<p>Is there a bilinear version of <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map">docs#continuous_linear_map</a> or a bundled version of <a href="https://leanprover-community.github.io/mathlib_docs/find/is_bounded_bilinear_map">docs#is_bounded_bilinear_map</a>? Or is someone working on this? <br>
I'm realizing I need to generalize <code>convolution</code> to take a bilinear map as extra argument.</p>



<a name="272246821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272246821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272246821">(Feb 17 2022 at 11:38)</a>:</h4>
<p>I am semi-working on this with <a href="https://github.com/leanprover-community/mathlib/pull/11909">#11909</a> in the sense that we'll need this to do it the proper way.</p>



<a name="272246920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272246920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272246920">(Feb 17 2022 at 11:39)</a>:</h4>
<p>And, indeed, <code>is_bounded_bilinear_map</code> is the only thing that we have.</p>



<a name="272247049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272247049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272247049">(Feb 17 2022 at 11:41)</a>:</h4>
<p>However, it's still unclear to me whether currying works already.</p>



<a name="272247368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272247368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272247368">(Feb 17 2022 at 11:45)</a>:</h4>
<p>I think using the curried version doesn't buy you much, since I still want to use all the lemmas that you'd prove for a <code>continuous_bilinear_map</code>, (e.g. <code>add_right</code>, <code>smul_right</code>, "if <code>f</code> and <code>g</code> are continuous, then <code>x ↦ L (f x) (g x)</code> is continuous", ...)</p>



<a name="272269367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272269367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272269367">(Feb 17 2022 at 14:46)</a>:</h4>
<p>The curried version is the right object, but most of the relevant API might indeed be missing. One can at least convert using <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map.is_bounded_bilinear_map">docs#continuous_linear_map.is_bounded_bilinear_map</a> though.</p>



<a name="272280547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272280547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272280547">(Feb 17 2022 at 15:59)</a>:</h4>
<p>Good. I have indeed now written a little bit of API for the curried version, along the lines of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">continuous_linear_map</span>

<span class="kd">lemma</span> <span class="n">map_add_left</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E'</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">x'</span> <span class="o">:</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">E'</span><span class="o">}</span> <span class="o">:</span> <span class="n">L</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x'</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">L</span> <span class="n">x'</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">L.map_add</span><span class="o">,</span> <span class="n">add_apply</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">map_add_right</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E'</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="n">y'</span> <span class="o">:</span> <span class="n">E'</span><span class="o">}</span> <span class="o">:</span> <span class="n">L</span> <span class="n">x</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">y'</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y'</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">L</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">map_add</span> <span class="n">y</span> <span class="n">y'</span>

<span class="kd">lemma</span> <span class="n">map_smul_left</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E'</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">E'</span><span class="o">}</span> <span class="o">:</span> <span class="n">L</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">•</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">L.map_smul</span><span class="o">,</span> <span class="n">smul_apply</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">map_smul_right</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E'</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">E'</span><span class="o">}</span> <span class="o">:</span> <span class="n">L</span> <span class="n">x</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">•</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">L</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">map_smul</span> <span class="n">c</span> <span class="n">y</span>

<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</code></pre></div>



<a name="272280877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272280877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272280877">(Feb 17 2022 at 16:01)</a>:</h4>
<p>(of course, I will generalize <code>ℝ</code> to <code>𝕜</code> and maybe <code>→L</code> to <code>→SL</code> in the version I PR)</p>



<a name="272299996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272299996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272299996">(Feb 17 2022 at 18:09)</a>:</h4>
<p><code>map_add₂</code> might be a better name to match <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.map">docs#linear_map.map</a>_add₂</p>



<a name="272300029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272300029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272300029">(Feb 17 2022 at 18:09)</a>:</h4>
<p>.. which obviously the linkifier doesn't link correctly... <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.map_add%E2%82%82">https://leanprover-community.github.io/mathlib_docs/find/linear_map.map_add%E2%82%82</a></p>



<a name="272794117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272794117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272794117">(Feb 22 2022 at 12:12)</a>:</h4>
<p>This should be easy from things in the library, but I cannot find a reasonably close result.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.operator_norm</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">𝕜</span> <span class="n">E₁</span> <span class="n">E₂</span> <span class="n">E₃</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₁</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₁</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₂</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₂</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₃</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₃</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">function</span>
<span class="kd">lemma</span> <span class="n">continuous₂</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E₁</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="bp">𝕜</span><span class="o">]</span> <span class="n">E₂</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="bp">𝕜</span><span class="o">]</span> <span class="n">E₃</span><span class="o">)</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">uncurry</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="gr">sorry</span> <span class="o">}</span>
</code></pre></div>



<a name="272799523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272799523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272799523">(Feb 22 2022 at 13:08)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.operator_norm</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.bounded_linear_maps</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">𝕜</span> <span class="n">E₁</span> <span class="n">E₂</span> <span class="n">E₃</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₁</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₁</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₂</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₂</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E₃</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E₃</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">function</span>
<span class="kd">lemma</span> <span class="n">continuous₂</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">E₁</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="bp">𝕜</span><span class="o">]</span> <span class="n">E₂</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="bp">𝕜</span><span class="o">]</span> <span class="n">E₃</span><span class="o">)</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">uncurry</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">L</span> <span class="n">x</span> <span class="n">y</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">L.is_bounded_bilinear_map.continuous</span>
</code></pre></div>



<a name="272799584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272799584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272799584">(Feb 22 2022 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span></p>



<a name="272801052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/continuous%20bilinear%20map/near/272801052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/continuous.20bilinear.20map.html#272801052">(Feb 22 2022 at 13:21)</a>:</h4>
<p>Oh yes, of course. Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>