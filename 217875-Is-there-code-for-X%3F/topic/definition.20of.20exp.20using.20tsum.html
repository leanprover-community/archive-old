---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html">definition of exp using tsum</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288885526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288885526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288885526">(Jul 08 2022 at 01:06)</a>:</h4>
<p>This seems like it is important. I desire to work on some specific infinite sums of entire functions related to exp, and tsum seems like the best tool. On the other hand, I want my results to be related to exp in mathlib. Does anyone have an easy way to prove this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">all</span>

<span class="kn">open</span> <span class="n">classical</span> <span class="n">complex</span> <span class="n">real</span>

<span class="kd">lemma</span> <span class="n">expTsumForm</span> <span class="o">(</span><span class="n">z</span><span class="o">:</span><span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span> <span class="n">exp</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">tsum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="n">ℕ</span><span class="o">),</span> <span class="n">z</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">/</span> <span class="n">k.factorial</span><span class="o">):=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="288885941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288885941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288885941">(Jul 08 2022 at 01:15)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/exponential.html#exp_eq_tsum">https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/exponential.html#exp_eq_tsum</a> ?</p>



<a name="288886088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288886088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288886088">(Jul 08 2022 at 01:17)</a>:</h4>
<p>I'll see if I can twist that into the specific form I asked about. Thanks.</p>



<a name="288886264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288886264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288886264">(Jul 08 2022 at 01:20)</a>:</h4>
<p>there's also <a href="https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/exponential.html#exp_eq_tsum_div">https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/exponential.html#exp_eq_tsum_div</a></p>
<p>(sorry, I'm a bit out of my element with this one, someone else might have a better suggestion)</p>



<a name="288886739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288886739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288886739">(Jul 08 2022 at 01:30)</a>:</h4>
<p>Yeah, I still feel like a newb. I haven't figured out how to apply that theorem to complex numbers because I don't know how to use some theorems like this one, or because I don't even know how to break apart syntactic sugar to deal with lower-level implementations. The learning curve is steep. I'm hoping someone will see that theorem and know how to apply it to complex numbers.</p>



<a name="288886868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288886868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288886868">(Jul 08 2022 at 01:33)</a>:</h4>
<p>have you already looked at <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a>? was that what you were trying to use initially? I may have assumed the wrong <code>exp</code></p>



<a name="288887189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288887189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288887189">(Jul 08 2022 at 01:40)</a>:</h4>
<p>I have skimmed the code. Maybe it is more complicated than it needs to be if we can replace the definition of exp with the tsum version, but I honestly don't know.<br>
And yes, I want to have sums of [tsum]s to make my functions, some of which would be my tsum version of exp. The problem is that I want the tsum version to be known equivalent to whatever is in complex.exp. If someone replaces the definition of complex.exp, to make this easier, I don't mind.</p>



<a name="288889112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288889112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288889112">(Jul 08 2022 at 02:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.exponential</span>

<span class="kn">open</span> <span class="n">classical</span> <span class="n">complex</span> <span class="n">real</span>

<span class="kd">lemma</span> <span class="n">expTsumForm</span> <span class="o">(</span><span class="n">z</span><span class="o">:</span><span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span> <span class="n">exp</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">tsum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="n">ℕ</span><span class="o">),</span> <span class="n">z</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">/</span> <span class="n">k.factorial</span><span class="o">):=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">exp_eq_exp_ℂ</span><span class="o">,</span> <span class="n">exp_eq_tsum_div</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="288889464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288889464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288889464">(Jul 08 2022 at 02:26)</a>:</h4>
<p>Okay so let me explain. In mathlib, we currently have three exponentials : <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/real.exp">docs#real.exp</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/exp">docs#exp</a>. The last one strictly supercedes the first two, but the reason why we keep the first two is exactly the reason why the definition of <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a> looks so strange : the goal is to have <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/real.exp">docs#real.exp</a> sit as low as possible in the import tree, to avoid importing the whole analysis library each time we want to talk about an exponential of real numbers, e.g for algebraic purposes.</p>



<a name="288889505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288889505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288889505">(Jul 08 2022 at 02:27)</a>:</h4>
<p>Thanks. I am saving this in my Lean notes.</p>



<a name="288889666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288889666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288889666">(Jul 08 2022 at 02:30)</a>:</h4>
<p>The definition of <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a> basically only depends on the basic construction of real and complex numbers, and in particular completeness, since we define it as the limit of the Cauchy sequence of partial sums (with a really dirty proof of Cauchyness, this file is really horrible to read)</p>



<a name="288890000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288890000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288890000">(Jul 08 2022 at 02:37)</a>:</h4>
<p>Actually, if you have a look at the proof of <code>complex.exp_eq_exp_ℂ</code>, you'll see that it proves exactly what you want, so you could probably copy-paste the proof and it would work. But I do <strong>not</strong> recommend doing this : you should just treat <code>complex.exp_eq_exp_ℂ</code> as a black box that translates between the dirty definition and the nice one so that you don't have to look at the dirty definition.</p>



<a name="288890946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/definition%20of%20exp%20using%20tsum/near/288890946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Gerads <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/definition.20of.20exp.20using.20tsum.html#288890946">(Jul 08 2022 at 02:56)</a>:</h4>
<p>I have a decent enough computer, so I like scripts/mk_all.sh, import all and running library_search!, suggest, hint to see if I can get anything and I think if library_search! does nothing, then the statement of the lemma is worth implementing in my view, such that library_search would work on the statement. Such is a process of my generating lemma discussions which mostly others prove for me.<br>
<span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> I suggest you take credit for this if it is worth having in mathlib. If it is not worth adding, I am content to have my own library extending mathlib but with this lemma in my notes/library. Thanks again.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>