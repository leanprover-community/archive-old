---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html">group_with_zero morphisms with domain ℚ</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231158652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158652">(Mar 20 2021 at 17:17)</a>:</h4>
<p>I proved this :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ext_hom_pnat</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">φ₁</span> <span class="n">φ₂</span><span class="o">:</span> <span class="n">monoid_with_zero_hom</span> <span class="n">ℚ</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">same_on_neg_one</span><span class="o">:</span> <span class="n">φ₁</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">φ₂</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">same_on_nat</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">φ₁</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">φ₂</span> <span class="n">n</span><span class="o">):</span> <span class="o">(</span><span class="n">φ₁</span><span class="o">:</span> <span class="n">ℚ</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="n">φ₂</span>
</code></pre></div>
<p>I wanted to make a PR to mathlib for it but I can't tell if it would be relevant</p>
<p>PROS :</p>
<ul>
<li>This states is closely related to the fact that ℚ is the fraction field of ℤ</li>
<li>Mathlib seems open to such results (<a href="https://leanprover-community.github.io/mathlib_docs/ring_theory/int/basic.html">ring_theory.int.basic</a> collects results in this vein for instance)</li>
</ul>
<p>CONS :</p>
<ul>
<li>This result might be too specific to be actually useful (it may not be "mathlib-worthy" unless generalized)</li>
</ul>
<p>One other possibility is to generalize this to fraction field and to provide this result as a particular case</p>
<p>The other reason why I didn't PR mathlib is that I didn't know in which file to put this result</p>
<p>So are some of you interested by this ?</p>



<a name="231158802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158802">(Mar 20 2021 at 17:20)</a>:</h4>
<p>This looks like it would belong next to <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.ext_rat/src">src#ring_hom.ext_rat</a> as <code>monoid_with_zero_hom.ext_rat</code>, and could probably be used to shorten the proof of that lemma</p>



<a name="231158823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158823">(Mar 20 2021 at 17:20)</a>:</h4>
<p><span class="user-mention" data-user-id="385405">@Julien Marquet</span> Why do you coerce to function in the conclusion?</p>



<a name="231158828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158828">(Mar 20 2021 at 17:20)</a>:</h4>
<p>I would just prove <code>phi_1 = phi_2</code></p>



<a name="231158889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158889">(Mar 20 2021 at 17:22)</a>:</h4>
<p>I guess you can use this to golf the <code>ext_rat</code> result that Eric mentioned</p>



<a name="231158957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158957">(Mar 20 2021 at 17:22)</a>:</h4>
<p>Also, the name mention <code>pnat</code>, but I think the name should probably be <code>monoid_with_zero_hom.ext_rat</code></p>



<a name="231158988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231158988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231158988">(Mar 20 2021 at 17:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A/near/231158823">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="385405">Julien Marquet</span> Why do you coerce to function in the conclusion?</p>
</blockquote>
<p>(It made sense in the context of the proof, but not here)</p>



<a name="231159275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159275">(Mar 20 2021 at 17:28)</a>:</h4>
<p>I think it would be even better to define a <code>int.cast_monoid_with_zero_hom</code> (like <a href="https://leanprover-community.github.io/mathlib_docs/find/int.cast_ring_hom">docs#int.cast_ring_hom</a>), and then state your lemma as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ext_rat</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">φ₁</span> <span class="n">φ₂</span> <span class="o">:</span> <span class="n">monoid_with_zero_hom</span> <span class="n">ℚ</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">φ₁.comp</span> <span class="o">(</span><span class="n">int.cast_monoid_with_zero_hom</span><span class="o">)</span> <span class="bp">=</span> <span class="n">φ₂.comp</span> <span class="o">(</span><span class="n">cast_monoid_with_zero_hom</span><span class="o">))</span> <span class="o">:</span> <span class="n">φ</span> <span class="bp">=</span> <span class="n">φ₂</span>
</code></pre></div>



<a name="231159289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159289">(Mar 20 2021 at 17:28)</a>:</h4>
<p>Then you can tag it with <code>@[ext]</code></p>



<a name="231159400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159400">(Mar 20 2021 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> but there isn't necessarily a unique <code>monoid_with_zero_hom</code> from <code>int</code>, right?</p>



<a name="231159415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159415">(Mar 20 2021 at 17:30)</a>:</h4>
<p>There isn't really a <code>cast</code>, because you don't assume <code>has_add</code> on the target.</p>



<a name="231159451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159451">(Mar 20 2021 at 17:31)</a>:</h4>
<p>Wait, then why did <code>φ₁ n</code> work?</p>



<a name="231159503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159503">(Mar 20 2021 at 17:32)</a>:</h4>
<p>That's coercing <code>nat</code> to <code>rat</code></p>



<a name="231159508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159508">(Mar 20 2021 at 17:32)</a>:</h4>
<p>Right, and in my lemma the cast is from int to rat</p>



<a name="231159521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159521">(Mar 20 2021 at 17:32)</a>:</h4>
<p>But I see your point, there's no general cast</p>



<a name="231159540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159540">(Mar 20 2021 at 17:33)</a>:</h4>
<p>So <code>φ₁.comp (int.cast_ring_hom.to_monoid_with_zero_hom)</code>?</p>



<a name="231159554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159554">(Mar 20 2021 at 17:33)</a>:</h4>
<p>Ooh, sorry, then I misunderstood the type of your proposed <code>int.cast_monoid_with_zero_hom</code>.</p>



<a name="231159560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159560">(Mar 20 2021 at 17:33)</a>:</h4>
<p>My proposed function was stupid, you called me out on that</p>



<a name="231159562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231159562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231159562">(Mar 20 2021 at 17:33)</a>:</h4>
<p>But I think the lemma is salvageable</p>



<a name="231162428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231162428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231162428">(Mar 20 2021 at 18:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A/near/231158802">said</a>:</p>
<blockquote>
<p>This looks like it would belong next to <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.ext_rat/src">src#ring_hom.ext_rat</a> as <code>monoid_with_zero_hom.ext_rat</code>, and could probably be used to shorten the proof of that lemma</p>
</blockquote>
<p>Should it really be put in this file ?<br>
I am actually very tempted to add that :</p>
<ul>
<li>If two monoid_with_zero_hom are equal on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex"> \mathbb{Z} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span>, then they are equal on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex"> \mathbb{Q} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span></li>
<li>If two monoid_with_zero_hom are equal on all primes and all invertibles, then they are equal everywhere<br>
(the second theorem can even be generalized to fraction fields, as I said earlier)</li>
</ul>
<p>It seems to me that these three lemmas should be kept together, and that they don' belong in <code>data.int.cast</code>...</p>



<a name="231163011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231163011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231163011">(Mar 20 2021 at 18:31)</a>:</h4>
<p>I would say that this one belongs in <code>data.int.cast</code> because then it is available "everywhere".</p>



<a name="231163084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231163084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231163084">(Mar 20 2021 at 18:32)</a>:</h4>
<p>But if you prove something general for localisations, then that should of course go in the file on localisations</p>



<a name="231163287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231163287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231163287">(Mar 20 2021 at 18:35)</a>:</h4>
<p>I don't plan on generalizing for now, so to <code>data.int.cast</code> it will go<br>
Thanks</p>



<a name="231163330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231163330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231163330">(Mar 20 2021 at 18:36)</a>:</h4>
<p>Your first bullet is a weaker version of what I was suggesting you prove</p>



<a name="231163360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231163360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231163360">(Mar 20 2021 at 18:36)</a>:</h4>
<p>But please go ahead and make the PR :)</p>



<a name="231164453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231164453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231164453">(Mar 20 2021 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A/near/231163330">said</a>:</p>
<blockquote>
<p>Your first bullet is a weaker version of what I was suggesting you prove</p>
</blockquote>
<p>Oh I see<br>
I guess that what we would really want is to show that the inection <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mo>→</mo><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex"> \mathbb{Z} \to \mathbb{Q} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span> is epi (in monoids with zero) ?<br>
(And the other lemmas also look like saying that some arrows are epi)</p>



<a name="231164521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231164521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231164521">(Mar 20 2021 at 18:56)</a>:</h4>
<p>At least I thought about showing that but I'm not sure I want to dive into these details now <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="231164557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231164557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231164557">(Mar 20 2021 at 18:57)</a>:</h4>
<p>I think that the way you phrased it originally is quite suitable for mathlib</p>



<a name="231164568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231164568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231164568">(Mar 20 2021 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="385405">@Julien Marquet</span> do you already have write access to mathlib?</p>



<a name="231164585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231164585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231164585">(Mar 20 2021 at 18:58)</a>:</h4>
<p>Yes (I'm thejohncrafter on github), thanks :)</p>



<a name="231165545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231165545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231165545">(Mar 20 2021 at 19:12)</a>:</h4>
<p>I just encountered a problem when trying to add this to mathlib :/<br>
I tried to add everything to <code>data.rat.cast</code>, but or the theorem <code>ext_hom_primes</code>, I need to have <code>nat.prime</code> in scope, which lies in <code>data.nat.prime</code>, but <code>data.nat.prime</code> depends on <code>tactic.norm_num</code> which depends back on <code>data.rat.cast</code>, and I can't remove the dependency on <code>tactic.norm_num</code>.<br>
Is there a way to work around this ?</p>



<a name="231167444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231167444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231167444">(Mar 20 2021 at 19:48)</a>:</h4>
<p>Can you PR the theorem that doesn't need <code>primes</code> first?</p>



<a name="231167447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231167447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231167447">(Mar 20 2021 at 19:48)</a>:</h4>
<p>That one should work fine in <code>data.rat.cast</code></p>



<a name="231167690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231167690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231167690">(Mar 20 2021 at 19:53)</a>:</h4>
<p>But as you remark, the other one will need to go somewhere else</p>



<a name="231241047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231241047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231241047">(Mar 21 2021 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I was trying to prove what you suggested</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ext_hom_int</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">φ₁</span> <span class="n">φ₂</span> <span class="o">:</span> <span class="n">monoid_with_zero_hom</span> <span class="n">ℚ</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">same_on_int</span> <span class="o">:</span> <span class="n">φ₁.comp</span> <span class="o">(</span><span class="n">int.cast_ring_hom</span> <span class="n">ℚ</span><span class="o">)</span><span class="bp">.</span><span class="n">to_monoid_with_zero_hom</span> <span class="bp">=</span>
    <span class="n">φ₂.comp</span> <span class="o">(</span><span class="n">int.cast_ring_hom</span> <span class="n">ℚ</span><span class="o">)</span><span class="bp">.</span><span class="n">to_monoid_with_zero_hom</span><span class="o">)</span> <span class="o">:</span> <span class="n">φ₁</span> <span class="bp">=</span> <span class="n">φ₂</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">same_on_int'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">φ₁</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">φ₂</span> <span class="n">k</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="gr">sorry</span> <span class="c1">-- The rest is done</span>
<span class="kd">end</span>
</code></pre></div>
<p>but I am stuck at the first sorry because I can't find the right lemmas to go grom <code>same_on_int</code> to <code>same_on_int'</code></p>



<a name="231242575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231242575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231242575">(Mar 21 2021 at 21:33)</a>:</h4>
<p><code>monoid_with_zero_hom.congr_fun same_on_int</code> I think</p>



<a name="231242762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/group_with_zero%20morphisms%20with%20domain%20%E2%84%9A/near/231242762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/group_with_zero.20morphisms.20with.20domain.20.E2.84.9A.html#231242762">(Mar 21 2021 at 21:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_with_zero_hom.congr_fun">docs#monoid_with_zero_hom.congr_fun</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>