---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html">Proper maps (in the sense of topology)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="305450827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305450827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305450827">(Oct 21 2022 at 22:04)</a>:</h4>
<p>Have I gone mad or do we really not have the definition of proper maps?</p>



<a name="305450930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305450930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305450930">(Oct 21 2022 at 22:04)</a>:</h4>
<p>For example, is the following really missing:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.separation</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">is_proper_map</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">K</span><span class="o">⦄,</span> <span class="n">is_compact</span> <span class="n">K</span> <span class="bp">→</span> <span class="n">is_compact</span> <span class="o">(</span><span class="n">f</span><span class="bp">⁻¹'</span> <span class="n">K</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">continuous.is_proper_map_of_compact_of_t2</span> <span class="o">[</span><span class="n">compact_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">t2_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">):</span>
  <span class="n">is_proper_map</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">K</span> <span class="n">hK</span><span class="o">,</span> <span class="o">(</span><span class="n">hK.is_closed.preimage</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">is_compact</span>
</code></pre></div>



<a name="305451256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451256">(Oct 21 2022 at 22:06)</a>:</h4>
<p>I have used related properties a number of times under the spelling <code>tendsto cocompact at_top</code> or <code>tendsto cocompact cocompact</code>.</p>



<a name="305451411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451411">(Oct 21 2022 at 22:07)</a>:</h4>
<p>There was some discussion along these lines before...</p>



<a name="305451526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451526">(Oct 21 2022 at 22:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/cocompact_map">docs#cocompact_map</a></p>



<a name="305451561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451561">(Oct 21 2022 at 22:08)</a>:</h4>
<p>Eg.<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/tendsto_norm_cocompact_at_top">docs#tendsto_norm_cocompact_at_top</a><br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto_cocompact_mul_left">docs#filter.tendsto_cocompact_mul_left</a></p>



<a name="305451603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451603">(Oct 21 2022 at 22:09)</a>:</h4>
<p>OK I'll look into this. At the very least, someone should add the phrase "proper map" to some doc strings.</p>



<a name="305451622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451622">(Oct 21 2022 at 22:09)</a>:</h4>
<p>Thanks!</p>



<a name="305451837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305451837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305451837">(Oct 21 2022 at 22:10)</a>:</h4>
<p>This is exactly what I need, thanks.</p>



<a name="305456886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305456886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305456886">(Oct 21 2022 at 22:59)</a>:</h4>
<p>Here's the relevant PR anyway: <a href="https://github.com/leanprover-community/mathlib/pull/17107">#17107</a></p>



<a name="305468540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305468540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305468540">(Oct 22 2022 at 00:53)</a>:</h4>
<p>There was <a href="#narrow/stream/113488-general/topic/understanding.20universe.20error">an attempt at the universally closed definition</a></p>



<a name="305521272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305521272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305521272">(Oct 22 2022 at 11:29)</a>:</h4>
<p>See also <a href="#narrow/stream/116395-maths/topic/proper.20maps">this discussion</a> related to why <a href="https://leanprover-community.github.io/mathlib_docs/find/cocompact_map">docs#cocompact_map</a> is not called <code>proper_map</code></p>



<a name="305527356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305527356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305527356">(Oct 22 2022 at 12:16)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> that's a useful thread. Incidentally I think we should unbundle <code>cocompact_map</code> into <code>is_cocompact_map</code> like we have for <code>is_open_map</code> and <code>is_closed_map</code>.</p>



<a name="305541521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305541521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305541521">(Oct 22 2022 at 14:07)</a>:</h4>
<p>If you want to unbundle it, that's fine, but please also leave the bundled version in place. These are the right morphisms I need for various things related to non-unital C star algebras. See, for example, the functorial property at the bottom of that file.</p>



<a name="305541832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305541832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305541832">(Oct 22 2022 at 14:09)</a>:</h4>
<p>Note also that we have the statement that cocompact maps have the property you specify when the space is locally compact and Hausdorff. Otherwise they may not.</p>



<a name="305547949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305547949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305547949">(Oct 22 2022 at 14:58)</a>:</h4>
<p>I have no plans to unbundle for now at least! I'm just going by my own made up guidelines that:</p>
<ol>
<li>It is preferable not to bundle to save boilerplate and to make it possible to combine predicates without authoring new classes</li>
<li>The main exceptions to 1 are when the set of maps themselves are a primary object of study, or (often related) when we have important typeclass instances keyed off such a map</li>
</ol>
<p>To be concrete, I was mostly motivated to make my remark above because I wanted to speak of a cocompact group homomorphism and I cannot conveniently do this with the classes we currently have (but I could if we just had <code>is_cocompact_map</code> analogous to <code>is_open_map</code> and <code>is_closed_map</code>).</p>



<a name="305548137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305548137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305548137">(Oct 22 2022 at 14:59)</a>:</h4>
<p>Thank you for creating <code>cocompact_map</code> in the first place though: implementation details aside, it was just what I needed (and I may be wrong about the bundling anyway).</p>



<a name="305552038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Proper%20maps%20%28in%20the%20sense%20of%20topology%29/near/305552038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Proper.20maps.20(in.20the.20sense.20of.20topology).html#305552038">(Oct 22 2022 at 15:31)</a>:</h4>
<p>Makes sense. For things which are common enough and span multiple domains, unbundled versions can certainly be useful.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>