---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html">congruence of filters for tendsto</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="294942688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294942688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294942688">(Aug 23 2022 at 20:37)</a>:</h4>
<p>I don't think this is possible, but I wanted to check. I'm trying to show that if a function tends to the same value along two different filters, then those filters are the same. Of course, under the requirement, the function only hits that value once. I'm not sure how to state that last part in Lean, though so its missing from the mwe. So, for instance, for the function <code>f x =1/x</code>, if f approaches positive infinity along filter 1 and it approaches positive infinity along filter 2, then filter 1 and filter 2 must be the same. I have a feeling that this doesn't work, for a similar reason as to why we have to say an unbounded function has  a local minimum, instead of calling it a global minimum. </p>
<p>mwe: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span>
<span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="bp">‚Üí</span> <span class="n">‚Ñù</span><span class="o">}</span>
<span class="o">{</span><span class="n">l‚ÇÅ</span> <span class="n">l‚ÇÇ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">‚Ñù</span><span class="o">}</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="n">l‚ÇÅ</span> <span class="n">filter.at_top</span><span class="o">)</span>
<span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="n">l‚ÇÇ</span> <span class="n">filter.at_top</span><span class="o">)</span>
<span class="c1">--a premise that f only appraoches filter.at_top once</span>
<span class="o">:</span> <span class="n">l‚ÇÅ</span> <span class="bp">=</span> <span class="n">l‚ÇÇ</span> <span class="o">:=</span>
<span class="kd">begin</span>

<span class="kd">end</span>
</code></pre></div>



<a name="294942954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294942954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294942954">(Aug 23 2022 at 20:39)</a>:</h4>
<p>This isn't true.</p>



<a name="294943106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943106">(Aug 23 2022 at 20:40)</a>:</h4>
<p>The function <code>f x := 1 / x</code> approaches <code>at_top</code> along many filters.</p>



<a name="294943168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943168">(Aug 23 2022 at 20:41)</a>:</h4>
<p>And I don't see any true statement that would look like this. Under assumption <code>tendsto f l‚ÇÅ at_top</code>, any filter <code>l‚ÇÇ</code> such that <code>l‚ÇÇ ‚â§ l‚ÇÅ</code> will satisfy <code>tendsto f l‚ÇÇ at_top</code>.</p>



<a name="294943283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943283">(Aug 23 2022 at 20:42)</a>:</h4>
<p>e.g., <code>ùìù[s] 0</code> where <code>s</code> is any set of positive numbers whose only limit point is <code>0</code>.</p>



<a name="294943364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943364">(Aug 23 2022 at 20:43)</a>:</h4>
<p>Max I think your intuition of filters isn't sufficiently good. Shameless self-advertisement: I think you should try to watch the beginning of <a href="https://icerm.brown.edu/video_archive/?play=2899">https://icerm.brown.edu/video_archive/?play=2899</a></p>



<a name="294943382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943382">(Aug 23 2022 at 20:43)</a>:</h4>
<p>Ok, this is what I thought. I'm trying to replicate a derivation from a scientific paper, and they do something similar to this with limits. They want to say that since the function approaches infinity when you approach this,  and, since we want the function to approach infinity when we approach this specific constant, these two constants are equal</p>



<a name="294943437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943437">(Aug 23 2022 at 20:43)</a>:</h4>
<p>It most definitely isn't. I'm just trying to convert filters to my knowledge of limits</p>



<a name="294943480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943480">(Aug 23 2022 at 20:43)</a>:</h4>
<p>that might be possible, just replace arbitrary filters with neighborhood filters.</p>



<a name="294943614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943614">(Aug 23 2022 at 20:44)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span>
<span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="bp">‚Üí</span> <span class="n">‚Ñù</span><span class="o">}</span>
<span class="o">{</span><span class="n">l‚ÇÅ</span> <span class="n">l‚ÇÇ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">‚Ñù</span><span class="o">}</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="o">(</span><span class="bp">ùìù</span> <span class="n">a</span><span class="o">)</span> <span class="n">filter.at_top</span><span class="o">)</span>
<span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="o">(</span><span class="bp">ùìù</span> <span class="n">b</span><span class="o">)</span> <span class="n">filter.at_top</span><span class="o">)</span>
<span class="c1">--a premise that f only appraoches filter.at_top once</span>
<span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="294943712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943712">(Aug 23 2022 at 20:45)</a>:</h4>
<p>I think thats what I mean. As pointed out above, my knowledge of filters is not good, so I just used general filter. However, yes that may be what I mean</p>



<a name="294943821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943821">(Aug 23 2022 at 20:46)</a>:</h4>
<p>That theorem sounds false as well: what about something like <code>sec x</code>? This approaches infinity at lots of different points</p>



<a name="294943908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943908">(Aug 23 2022 at 20:47)</a>:</h4>
<p>My assumption is that the premise I have in the comments would have to bound the function to require it approach the value only once. So for <code>sec x</code>, it would have to be bounded</p>



<a name="294943921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294943921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294943921">(Aug 23 2022 at 20:47)</a>:</h4>
<p>it's bounded, and approaches infinity?</p>



<a name="294944068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944068">(Aug 23 2022 at 20:48)</a>:</h4>
<p>Would <code>1/x</code> bounded from (-1,1) still approach infinity at zero?</p>



<a name="294944099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944099">(Aug 23 2022 at 20:48)</a>:</h4>
<p>Mario, there is a premise missing in the code I wrote, it's in a comment.</p>



<a name="294944100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944100">(Aug 23 2022 at 20:48)</a>:</h4>
<p>only from above</p>



<a name="294944216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944216">(Aug 23 2022 at 20:49)</a>:</h4>
<p>I'm not sure how you would express that premise in a way that makes your theorem non-trivial (i.e., not just applying the hypotheses to each other)</p>



<a name="294944334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944334">(Aug 23 2022 at 20:50)</a>:</h4>
<p>I think Max want's something like: "this function has a limit of ‚àû at a, and is bounded on a complement of a neighborhood of a"</p>



<a name="294944430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944430">(Aug 23 2022 at 20:51)</a>:</h4>
<p><code>sec x</code> is also bounded on a complement of a neighborhood of any of its poles</p>



<a name="294944568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944568">(Aug 23 2022 at 20:52)</a>:</h4>
<p>the neighborhood would just encompass both poles</p>



<a name="294944680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944680">(Aug 23 2022 at 20:52)</a>:</h4>
<p>oh wait, <code>sec x</code> isn't a good example, <code>(sec x)^2</code> is better</p>



<a name="294944686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944686">(Aug 23 2022 at 20:52)</a>:</h4>
<p>Sorry, I should have said, "bounded on the complement of anything in a filter basis for ùìù a"</p>



<a name="294944738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944738">(Aug 23 2022 at 20:53)</a>:</h4>
<p>I think that makes it work (but I agree it's really messy and there are probably better ways to go about it).</p>



<a name="294944788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944788">(Aug 23 2022 at 20:53)</a>:</h4>
<p>I think that has the same issue, you can just choose a weird filter base with a member that happens to span the other poles</p>



<a name="294944928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944928">(Aug 23 2022 at 20:54)</a>:</h4>
<p>not every element of that filter basis can contain the other pole if the filter in question is ùìù a</p>



<a name="294944949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944949">(Aug 23 2022 at 20:54)</a>:</h4>
<p>or am I being silly?</p>



<a name="294944957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294944957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294944957">(Aug 23 2022 at 20:55)</a>:</h4>
<p>sure, but you just said there exists one</p>



<a name="294945099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294945099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294945099">(Aug 23 2022 at 20:56)</a>:</h4>
<p>No, I'm saying this: "there exists a filter basis for <code>ùìù a</code> such that for every element in this basis <code>f</code> is bounded on the complement of that set"</p>



<a name="294945161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294945161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294945161">(Aug 23 2022 at 20:56)</a>:</h4>
<p>oh I see, that's more plausible</p>



<a name="294945406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294945406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294945406">(Aug 23 2022 at 20:58)</a>:</h4>
<p>The filter basis isn't really necessary I guess, you just want bounded on the complement of any neighborhood.</p>



<a name="294945602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294945602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294945602">(Aug 23 2022 at 20:59)</a>:</h4>
<p>That sounds like it should be a general filter definition, some kind of co-tendsto</p>



<a name="294946175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294946175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294946175">(Aug 23 2022 at 21:03)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">co_tendsto</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÅ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÇ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">‚àÄ</span> <span class="n">s</span> <span class="bp">‚àà</span> <span class="n">l‚ÇÅ</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="n">s</span><span class="bp">·∂ú</span><span class="o">)</span><span class="bp">·∂ú</span> <span class="bp">‚àà</span> <span class="n">l‚ÇÇ</span>
</code></pre></div>



<a name="294946435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294946435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294946435">(Aug 23 2022 at 21:05)</a>:</h4>
<p>maybe it's that the comap of the cobounded filter along <code>f</code> is contained in <code>ùìù a</code>?</p>



<a name="294947132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947132">(Aug 23 2022 at 21:10)</a>:</h4>
<p>oh nice, <code>mem_comap_iff_compl</code> says exactly that <code>s ‚àà comap f l ‚Üî (f '' s·∂ú)·∂ú ‚àà l</code></p>



<a name="294947167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947167">(Aug 23 2022 at 21:11)</a>:</h4>
<p>so this really is co-tendsto</p>



<a name="294947398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947398">(Aug 23 2022 at 21:13)</a>:</h4>
<p>Yeah, I think saying that <code>f : Œ± ‚Üí Œ≤</code> is bounded on complements of neighborhoods of <code>a</code> is equivalent to <code>filter.comap f (cobounded Œ≤) ‚â§ ùìù a</code>.</p>



<a name="294947430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947430">(Aug 23 2022 at 21:13)</a>:</h4>
<p>This isn't the cobounded filter though</p>



<a name="294947432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947432">(Aug 23 2022 at 21:14)</a>:</h4>
<p>I think</p>



<a name="294947539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947539">(Aug 23 2022 at 21:14)</a>:</h4>
<p><em>what</em> isn't the cobounded filter?</p>



<a name="294947796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947796">(Aug 23 2022 at 21:16)</a>:</h4>
<p>the definition I gave is equivalent to <code>l‚ÇÇ.comap f ‚â§ l‚ÇÅ</code></p>



<a name="294947979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294947979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294947979">(Aug 23 2022 at 21:18)</a>:</h4>
<p>oh okay, we're talking about different things I think. You're talking about a "co-tendsto" and I'm still talking about the specific thing.</p>



<a name="294948026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948026">(Aug 23 2022 at 21:18)</a>:</h4>
<p>To apply to the specific thing you would use <code>co_tendsto f (N a) at_top</code></p>



<a name="294948122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948122">(Aug 23 2022 at 21:19)</a>:</h4>
<p>I'm not sure exactly what cobounded means here, I found <code>is_cobounded</code> which isn't what we want and <code>cobounded</code> is a typeclass (I have no idea what bornology is)</p>



<a name="294948250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948250">(Aug 23 2022 at 21:20)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/bornology.cobounded">docs#bornology.cobounded</a> supposedly?</p>



<a name="294948271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948271">(Aug 23 2022 at 21:20)</a>:</h4>
<p>yes, but that's a typeclass like I said, I don't know what the filter actually is</p>



<a name="294948286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948286">(Aug 23 2022 at 21:21)</a>:</h4>
<p>but the reals have the bornology from the metric.</p>



<a name="294948327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948327">(Aug 23 2022 at 21:21)</a>:</h4>
<p>in a metric space, the cobounded filter consists of exactly the complements of bounded sets.</p>



<a name="294948590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948590">(Aug 23 2022 at 21:23)</a>:</h4>
<p>So these are not exactly the same thing, I'm interpreting it as co-bounded above (<code>at_top</code>)  and not just metrically co-bounded</p>



<a name="294948661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948661">(Aug 23 2022 at 21:24)</a>:</h4>
<p>Mario, a bornology is just an abstraction of boundedness. It's a collection of sets which is closed under finite unions, subsets and contains all singletons. But in mathlib we dualize it so that it's just a filter smaller than the cofinite filter.</p>



<a name="294948669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948669">(Aug 23 2022 at 21:24)</a>:</h4>
<p>No, I agree, they are not exactly the same thing.</p>



<a name="294948880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294948880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294948880">(Aug 23 2022 at 21:26)</a>:</h4>
<p>My condition (bounded away from <code>a</code>) seemed like what the OP as getting at (which implies your condition since the <code>at_top</code> filter is smaller than the <code>cobounded</code> filter), and I was just trying to formalize that.</p>



<a name="294949395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949395">(Aug 23 2022 at 21:30)</a>:</h4>
<p>So the interesting theorem here is that <code>co_tendsto f l‚ÇÅ l‚ÇÇ</code> and <code>tendsto f l‚ÇÅ' l‚ÇÇ</code> implies <code>l‚ÇÅ ‚â§ l‚ÇÅ'</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter.basic</span>

<span class="kd">def</span> <span class="n">co_tendsto</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÅ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÇ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">l‚ÇÇ.comap</span> <span class="n">f</span> <span class="bp">‚â§</span> <span class="n">l‚ÇÅ</span>

<span class="kn">open</span> <span class="n">filter</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÅ</span> <span class="n">l‚ÇÅ'</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">(</span><span class="n">l‚ÇÇ</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">l‚ÇÅ</span> <span class="n">l‚ÇÇ</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">co_tendsto</span> <span class="n">f</span> <span class="n">l‚ÇÅ'</span> <span class="n">l‚ÇÇ</span><span class="o">)</span> <span class="o">:</span> <span class="n">l‚ÇÅ</span> <span class="bp">‚â§</span> <span class="n">l‚ÇÅ'</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">map_le_iff_le_comap.1</span> <span class="n">h1</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="n">h2</span>
</code></pre></div>



<a name="294949481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949481">(Aug 23 2022 at 21:31)</a>:</h4>
<p>I mean, isn't this just something to do with the fact that map and comap are a Galois connection?</p>



<a name="294949527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949527">(Aug 23 2022 at 21:32)</a>:</h4>
<p>yes, it's a quite trivial proof as you can see</p>



<a name="294949600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949600">(Aug 23 2022 at 21:32)</a>:</h4>
<p>but it means that if <code>co_tendsto f (ùìù a) at_top</code> and <code>tendsto f (ùìù b) at_top</code> then <code>ùìù a &lt;= ùìù b</code> so <code>a = b</code> if the top space is hausdorff</p>



<a name="294949601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949601">(Aug 23 2022 at 21:32)</a>:</h4>
<p>Right, but I mean, it's just a lemma about Galois connections that's already in the library, presumably.</p>



<a name="294949620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949620">(Aug 23 2022 at 21:32)</a>:</h4>
<p>I don't think <code>co_tendsto</code> is</p>



<a name="294949637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949637">(Aug 23 2022 at 21:32)</a>:</h4>
<p>I mean I just made it up</p>



<a name="294949682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949682">(Aug 23 2022 at 21:33)</a>:</h4>
<p>note that <code>map_le_iff_le_comap</code> <em>is</em> the galois connection lemma</p>



<a name="294949781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294949781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294949781">(Aug 23 2022 at 21:34)</a>:</h4>
<p>sorry, I didn't actually read the proof <span aria-label="sheep" class="emoji emoji-1f411" role="img" title="sheep">:sheep:</span></p>



<a name="294950405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950405">(Aug 23 2022 at 21:40)</a>:</h4>
<p>Thank you. This is really helpful. I will have to watch those videos linked and learn more so I can understand whats happening</p>



<a name="294950441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950441">(Aug 23 2022 at 21:40)</a>:</h4>
<p>So are you saying we should actually have a definition for <code>co_tendsto</code>, as opposed to the expanded version? I thought we have <code>tendsto</code> primarily because limits occur everywhere. Do we have a lot of use cases for <code>co_tendsto</code> outside of the above lemma?</p>



<a name="294950516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950516">(Aug 23 2022 at 21:41)</a>:</h4>
<p>it seems to be similarly "foundational" to <code>tendsto</code>, but it's possible we don't have a lot of applications just like we don't have many uses for coinductive types</p>



<a name="294950658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950658">(Aug 23 2022 at 21:43)</a>:</h4>
<p>I would defer to someone else who works with the topology / filter library more for whether this is actually a good idea for a library definition. <span class="user-mention" data-user-id="110031">@Patrick Massot</span> , any thoughts?</p>



<a name="294950783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950783">(Aug 23 2022 at 21:44)</a>:</h4>
<p>I haven't read this conversation, I'm playing with semantic highlighting. I want to finish writing doc about that and then I'll come back here if I don't forget.</p>



<a name="294950993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294950993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294950993">(Aug 23 2022 at 21:46)</a>:</h4>
<p>The question is whether it would make sense to have a definition for "co-tendsto" (name TBD), which says something like "it is consistent that f converges to l2 at l1". It has a nice duality with tendsto:</p>
<ul>
<li><code>tendsto f l‚ÇÅ l‚ÇÇ ‚Üî l‚ÇÅ ‚â§ l‚ÇÇ.comap f</code></li>
<li><code>co_tendsto f l‚ÇÅ l‚ÇÇ ‚Üî l‚ÇÇ.comap f ‚â§ l‚ÇÅ</code></li>
</ul>



<a name="294951039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294951039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294951039">(Aug 23 2022 at 21:47)</a>:</h4>
<p>it will have a ton of monotonicity and galois connection style theorems, so it would actually be some work to add</p>



<a name="294951376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294951376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294951376">(Aug 23 2022 at 21:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/congruence.20of.20filters.20for.20tendsto/near/294950993">said</a>:</p>
<blockquote>
<p>... "it is consistent that f converges to l2 at l1".</p>
</blockquote>
<p>That doesn't seem like the right description in English to me, but maybe I'm wrong.</p>



<a name="294951817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294951817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294951817">(Aug 23 2022 at 21:55)</a>:</h4>
<p>It's a bit abstract, not sure how best to gloss it. "<code>f</code> definitely doesn't converge to l2 anywhere other than l1"</p>



<a name="294952127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294952127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294952127">(Aug 23 2022 at 21:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/congruence.20of.20filters.20for.20tendsto/near/294943364">said</a>:</p>
<blockquote>
<p>Max I think your intuition of filters isn't sufficiently good. Shameless self-advertisement: I think you should try to watch the beginning of <a href="https://icerm.brown.edu/video_archive/?play=2899">https://icerm.brown.edu/video_archive/?play=2899</a></p>
</blockquote>
<p>thanks for this talk, this was very interesting! just to check the exercises: they are the stuff in <a href="https://leanprover-community.github.io/mathematics_in_lean/01_Introduction.html#getting-started">https://leanprover-community.github.io/mathematics_in_lean/01_Introduction.html#getting-started</a>, right?</p>



<a name="294952187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294952187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294952187">(Aug 23 2022 at 21:59)</a>:</h4>
<p>Mario, that reads more correct to me.</p>



<a name="294953301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294953301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294953301">(Aug 23 2022 at 22:09)</a>:</h4>
<p>The only case I can think of is in the hypothesis of <a href="https://leanprover-community.github.io/mathlib_docs/find/cauchy.comap">docs#cauchy.comap</a>. I will read this conversation again tomorrow because I‚Äôm half sleeping right now</p>



<a name="294954306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954306">(Aug 23 2022 at 22:20)</a>:</h4>
<p>Now that I posted my semantic highlighting stuff I read that discussion. I'm not convinced the "cotendsto" definition is useful in mathlib.</p>



<a name="294954455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954455">(Aug 23 2022 at 22:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/congruence.20of.20filters.20for.20tendsto/near/294950516">said</a>:</p>
<blockquote>
<p>it seems to be similarly "foundational" to <code>tendsto</code></p>
</blockquote>
<p>I disagree. The definition of <code>tendsto f F G</code> is much nicer because you can phrase it both as <code>map f F ‚â§ G</code> and <code>F ‚â§ comap f G</code>. Your definition doesn't have this symmetry.</p>



<a name="294954626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954626">(Aug 23 2022 at 22:23)</a>:</h4>
<p>That's true. You can make it higher order, like <code>\forall l', l' &lt;= l‚ÇÇ.comap f -&gt; l' &lt;= l‚ÇÅ</code> and this latter thing can be rewritten in terms of <code>map</code> (since it's just a <code>tendsto</code>)</p>



<a name="294954731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954731">(Aug 23 2022 at 22:24)</a>:</h4>
<p>I suspect there is some name for this operation with adjunctions but I don't know</p>



<a name="294954912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954912">(Aug 23 2022 at 22:26)</a>:</h4>
<p>there should also be a version of this on the other side: <code>l‚ÇÇ ‚â§ l‚ÇÅ.map f</code></p>



<a name="294954950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294954950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294954950">(Aug 23 2022 at 22:26)</a>:</h4>
<p>so perhaps it's not a "co-" thing exactly but more like a left adjunction or something like that</p>



<a name="294955309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294955309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294955309">(Aug 23 2022 at 22:30)</a>:</h4>
<p>I don't understand what you're trying to say, but it's getting late here.</p>



<a name="294955537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294955537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294955537">(Aug 23 2022 at 22:32)</a>:</h4>
<p>I looked into <a href="https://ncatlab.org/nlab/show/adjoint+string">https://ncatlab.org/nlab/show/adjoint+string</a> and <a href="https://mathoverflow.net/questions/46877/natural-examples-of-sequences-of-adjoint-functors">https://mathoverflow.net/questions/46877/natural-examples-of-sequences-of-adjoint-functors</a> but found no examples about filters.</p>



<a name="294955647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294955647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294955647">(Aug 23 2022 at 22:33)</a>:</h4>
<p>Do you mean you hoped that <code>map f</code> could be right adjoint or <code>comap f</code> could be a left adjoint? This is simply wrong.</p>



<a name="294955767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294955767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294955767">(Aug 23 2022 at 22:34)</a>:</h4>
<p>Remember that for maps between complete lattices the adjoint functor theorem is extremely simple to state (and prove): a map is a left (resp. right) adjoint iff it commutes with sup (resp. inf).</p>



<a name="294955996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294955996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294955996">(Aug 23 2022 at 22:37)</a>:</h4>
<p>Fair enough. I think the most I want to claim at this point is that for an arbitrary galois connection <code>u b &lt;= a</code> is a relation you can say, and it sometimes has uses</p>



<a name="294956021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956021">(Aug 23 2022 at 22:37)</a>:</h4>
<p>I will certainly agree it's not nearly as well behaved as <code>a &lt;= u b</code></p>



<a name="294956213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956213">(Aug 23 2022 at 22:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/congruence.20of.20filters.20for.20tendsto/near/294955767">said</a>:</p>
<blockquote>
<p>Remember that for maps between complete lattices the adjoint functor theorem is extremely simple to state (and prove): a map is a left (resp. right) adjoint iff it commutes with sup (resp. inf).</p>
</blockquote>
<p>That's a nice theorem to know! But it seems we have both <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.comap_infi">docs#filter.comap_infi</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.comap_supr">docs#filter.comap_supr</a> ?</p>



<a name="294956344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956344">(Aug 23 2022 at 22:41)</a>:</h4>
<p>Oh yes, I wrote too fast for <code>comap f</code>.</p>



<a name="294956357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956357">(Aug 23 2022 at 22:41)</a>:</h4>
<p>I never noticed that.</p>



<a name="294956444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956444">(Aug 23 2022 at 22:42)</a>:</h4>
<p>We only have <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.map_infi_le">docs#filter.map_infi_le</a> so the adjunction chain can't be extended that way (at least for general <code>m : Œ± ‚Üí Œ≤</code>).</p>



<a name="294956453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956453">(Aug 23 2022 at 22:42)</a>:</h4>
<p>Now we have a nice exercise to do: figure out a concrete description of the right-adjoint to <code>comap f</code></p>



<a name="294956544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956544">(Aug 23 2022 at 22:43)</a>:</h4>
<p>I'm really tired because I should have remember that <code>set.preimage f</code> is also a left adjoint.</p>



<a name="294956571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956571">(Aug 23 2022 at 22:43)</a>:</h4>
<p>So it's not surprising that its extension to filters is both a right and a left adjoint.</p>



<a name="294956635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956635">(Aug 23 2022 at 22:44)</a>:</h4>
<p>IIRC we actually have the definition for sets</p>



<a name="294956811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956811">(Aug 23 2022 at 22:46)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.kern_image">docs#set.kern_image</a></p>



<a name="294956820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956820">(Aug 23 2022 at 22:46)</a>:</h4>
<p>I have difficulties switching at high frequency between Lean 4 meta-programming and adjunctions at 1am.</p>



<a name="294956887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294956887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294956887">(Aug 23 2022 at 22:47)</a>:</h4>
<p>Maybe I just disproved the theory claiming that programming monads belong to category theory.</p>



<a name="294976522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294976522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294976522">(Aug 24 2022 at 03:54)</a>:</h4>
<p>So <code>set.image f</code> doesn't admit a left adjoint unless <code>f</code> is a bijection, because it doesn't preserve intersections unless <code>f</code> is injective and doesn't preserve nullary intersection unless <code>f</code> is surjective, and similarly <code>set.kern_image f</code> doesn't admit a right adjoint because it's just <code>(f '' s·∂ú)·∂ú</code>.</p>
<p>I've worked out the right adjoint to <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.comap">docs#filter.comap</a>, which I call <code>filter.kern_map</code>, and it also admits a simple description: for <code>m : Œ± ‚Üí Œ≤</code> and <code>f : filter Œ±</code>, <code>(f.kern_map m).sets</code> is exactly the image of <code>f.sets</code> under <code>set.kern_image m</code>. Compare this to <code>(f.map m).sets</code>, which is exactly the preimage of <code>f.sets</code> under <code>set.preimage m</code>. The appearance of <a href="https://leanprover-community.github.io/mathlib_docs/find/set.kern_image">docs#set.kern_image</a> is because <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.mem_comap'">docs#filter.mem_comap'</a> says exactly (is defeq to) <code>s ‚àà g.comap m ‚Üî s.kern_image m ‚àà g</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">set</span>

<span class="kd">lemma</span> <span class="n">kern_image_eq_compl</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="bp">·∂ú</span><span class="o">)</span><span class="bp">·∂ú</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext1</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image</span><span class="o">,</span> <span class="n">mem_set_of_eq</span><span class="o">,</span> <span class="n">mem_compl_eq</span><span class="o">,</span> <span class="n">mem_image</span><span class="o">,</span> <span class="n">not_exists</span><span class="o">,</span> <span class="n">not_and</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">forall_congr</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="n">not_imp_not.symm</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ≤</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">''</span> <span class="o">(</span><span class="n">s</span> <span class="bp">‚à©</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">image_inter_preimage</span><span class="o">,</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">‚à™</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_union</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">preimage_compl</span><span class="o">,</span> <span class="n">image_downward_closed</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">set</span>

<span class="kn">namespace</span> <span class="n">filter</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kd">lemma</span> <span class="n">mem_comap''</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">‚àà</span> <span class="n">g.comap</span> <span class="n">m</span> <span class="bp">‚Üî</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚àà</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">mem_comap'</span>

<span class="kd">def</span> <span class="n">kern_map</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">sets</span> <span class="o">:=</span> <span class="o">(</span><span class="n">kern_image</span> <span class="n">m</span><span class="o">)</span> <span class="bp">''</span> <span class="n">f.sets</span><span class="o">,</span>
  <span class="n">univ_sets</span> <span class="o">:=</span> <span class="o">‚ü®</span><span class="n">univ</span><span class="o">,</span> <span class="n">f.univ_sets</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">]‚ü©,</span>
  <span class="n">sets_of_superset</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="n">_</span> <span class="n">t</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hm</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="n">hi</span><span class="o">,</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">s</span> <span class="bp">‚à™</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">,</span> <span class="n">f.sets_of_superset</span> <span class="n">hm</span> <span class="o">(</span><span class="n">subset_union_left</span> <span class="n">s</span> <span class="n">_</span><span class="o">)],</span>
    <span class="n">exact</span> <span class="n">kern_image_upward_closed</span> <span class="n">m</span> <span class="n">hi</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">inter_sets</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="n">_</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s‚ÇÅ</span><span class="o">,</span> <span class="n">h‚ÇÅ</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="o">‚ü®</span><span class="n">s‚ÇÇ</span><span class="o">,</span> <span class="n">h‚ÇÇ</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©,</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">s‚ÇÅ</span> <span class="bp">‚à©</span> <span class="n">s‚ÇÇ</span><span class="o">,</span> <span class="n">f.inter_sets</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_inter</span><span class="o">,</span> <span class="n">image_union</span><span class="o">,</span> <span class="n">compl_union</span><span class="o">],</span>
  <span class="kd">end</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">comap_kern_map</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">galois_connection</span> <span class="o">(</span><span class="n">comap</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">kern_map</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">Œª</span> <span class="n">g</span> <span class="n">f</span><span class="o">,</span> <span class="kd">begin</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">le_def</span><span class="o">,</span> <span class="n">mem_comap''</span><span class="o">],</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">h</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©,</span> <span class="n">exact</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">filter</span>


<span class="c1">-- miscellaneous lemmas unnecessary for the Galois connection</span>

<span class="kn">namespace</span> <span class="n">set</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ≤</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed'</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚àà</span> <span class="n">set.range</span> <span class="o">(</span><span class="n">set.image</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">image_inter_preimage</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="o">‚ü®</span><span class="n">_</span><span class="o">,</span> <span class="n">h</span><span class="o">‚ü©</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed''</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">''</span> <span class="o">(</span><span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">image_inter_preimage</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">subset_antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">image_preimage_subset</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">conv_lhs</span> <span class="o">{</span> <span class="n">rw</span> <span class="bp">‚Üê</span> <span class="n">h</span> <span class="o">},</span> <span class="n">apply</span> <span class="n">image_subset</span><span class="o">,</span> <span class="n">apply</span> <span class="n">inter_subset_right</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed'</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚àà</span> <span class="n">set.range</span> <span class="o">(</span><span class="n">set.kern_image</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">‚ü®</span><span class="n">s'</span><span class="o">,</span> <span class="n">h'</span><span class="o">‚ü©</span> <span class="o">:=</span> <span class="n">image_downward_closed'</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">s'</span><span class="bp">·∂ú</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">,</span> <span class="n">h'</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed''</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">preimage_compl</span><span class="o">,</span> <span class="n">image_downward_closed''</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_mono</span> <span class="o">{</span><span class="n">s‚ÇÅ</span> <span class="n">s‚ÇÇ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s‚ÇÅ</span> <span class="bp">‚äÜ</span> <span class="n">s‚ÇÇ</span><span class="o">)</span> <span class="o">:</span> <span class="n">s‚ÇÅ.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">s‚ÇÇ.kern_image</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_compl</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">image_subset</span> <span class="n">m</span> <span class="o">(</span><span class="n">compl_subset_compl.2</span> <span class="n">h</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">set</span>
</code></pre></div>



<a name="294977528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294977528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294977528">(Aug 24 2022 at 04:13)</a>:</h4>
<p>Let me also mention<br>
<code>extension of scalars ‚ä£ restriction of scalars ‚ä£ coextension of scalars</code><br>
(<a href="https://github.com/leanprover-community/mathlib/pull/15529">#15529</a>, functors between module categories induced by a ring hom)<br>
which is apparently analogous the example<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mo>‚àó</mo></msup><mo>‚ä£</mo><msub><mi>f</mi><mo>‚àó</mo></msub><mo>‚ä£</mo><msup><mi>f</mi><mo stretchy="false">!</mo></msup></mrow><annotation encoding="application/x-tex">f^*\dashv f_*\dashv f^!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚ä£</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1757em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">‚àó</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">‚ä£</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mclose mtight">!</span></span></span></span></span></span></span></span></span></span></span> (functors between derived categories of sheaves induced by a proper morphism between algebraic varieties, see <a href="https://mathoverflow.net/a/46928/3332">https://mathoverflow.net/a/46928/3332</a>)</p>



<a name="294990814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294990814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294990814">(Aug 24 2022 at 07:07)</a>:</h4>
<p>Nice! It can be used at least to simplify the proof of <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.comap_supr">docs#filter.comap_supr</a></p>



<a name="294990991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294990991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294990991">(Aug 24 2022 at 07:09)</a>:</h4>
<p>But please stop using dot notation for the only purpose of reversing the order you would write things on paper. Once you open the relevant namespaces it's not longer to write <code>map f F</code> than <code>F.map f</code> and it makes it <em>much</em> clear that you are applying the function <code>map f</code> to <code>F</code>, and the same with <code>kern_image m s</code>.</p>



<a name="294995582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294995582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294995582">(Aug 24 2022 at 07:50)</a>:</h4>
<p>Haha, I think dot notation allows me to use the declaration name as an infix operator, just like in <code>m '' s</code>; I don't care so much about the order. I used the same notations '', ^-1 and ^k for filters on the scratch paper.</p>



<a name="294996405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/294996405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#294996405">(Aug 24 2022 at 07:57)</a>:</h4>
<p>also, there's 50 different <code>map</code>s and now opening namespaces means you can get clashes with <code>map_{xyz}</code> lemmas.</p>



<a name="295007653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/295007653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#295007653">(Aug 24 2022 at 09:18)</a>:</h4>
<p>There are no serious name clashes. I always start Lean 3 files with <code>open set function filter</code> before thinking.</p>



<a name="295007801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/295007801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#295007801">(Aug 24 2022 at 09:18)</a>:</h4>
<p>Junyan, what you do is not the analogue of writing <code>m '' s</code> with an infix <code>''</code>, it is the analogue of writing <code>s '' m</code> to mean <code>m '' s</code>.</p>



<a name="295069249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/295069249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#295069249">(Aug 24 2022 at 15:25)</a>:</h4>
<p>It seems there's special support in pretty printer/doc-gen for this purpose? For example in <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.sum_map_mul_left">docs#multiset.sum_map_mul_left</a>, multiset.sum uses dot notation but <a href="http://multiset.map">multiset.map</a> doesn't, even though in the source code dot notation is used everywhere. Or maybe the pretty printer doesn't use dot notation whenever it's not associated to the first argument?</p>



<a name="295070080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/295070080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#295070080">(Aug 24 2022 at 15:29)</a>:</h4>
<p>Is it <code>pp nodot</code> by any chance?</p>



<a name="295074055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/295074055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#295074055">(Aug 24 2022 at 15:50)</a>:</h4>
<p>The <code>pp_nodot</code> attribute is not added to <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.map/src">src#multiset.map</a> at its definition or locally.</p>



<a name="302238889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/302238889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#302238889">(Oct 04 2022 at 11:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/congruence.20of.20filters.20for.20tendsto/near/294976522">said</a>:</p>
<blockquote>
<p>So <code>set.image f</code> doesn't admit a left adjoint unless <code>f</code> is a bijection, because it doesn't preserve intersections unless <code>f</code> is injective and doesn't preserve nullary intersection unless <code>f</code> is surjective, and similarly <code>set.kern_image f</code> doesn't admit a right adjoint because it's just <code>(f '' s·∂ú)·∂ú</code>.</p>
<p>I've worked out the right adjoint to <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.comap">docs#filter.comap</a>, which I call <code>filter.kern_map</code>, and it also admits a simple description: for <code>m : Œ± ‚Üí Œ≤</code> and <code>f : filter Œ±</code>, <code>(f.kern_map m).sets</code> is exactly the image of <code>f.sets</code> under <code>set.kern_image m</code>. Compare this to <code>(f.map m).sets</code>, which is exactly the preimage of <code>f.sets</code> under <code>set.preimage m</code>. The appearance of <a href="https://leanprover-community.github.io/mathlib_docs/find/set.kern_image">docs#set.kern_image</a> is because <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.mem_comap'">docs#filter.mem_comap'</a> says exactly (is defeq to) <code>s ‚àà g.comap m ‚Üî s.kern_image m ‚àà g</code>.</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">set</span>

<span class="kd">lemma</span> <span class="n">kern_image_eq_compl</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="bp">·∂ú</span><span class="o">)</span><span class="bp">·∂ú</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext1</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image</span><span class="o">,</span> <span class="n">mem_set_of_eq</span><span class="o">,</span> <span class="n">mem_compl_eq</span><span class="o">,</span> <span class="n">mem_image</span><span class="o">,</span> <span class="n">not_exists</span><span class="o">,</span> <span class="n">not_and</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">forall_congr</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="n">not_imp_not.symm</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ≤</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">''</span> <span class="o">(</span><span class="n">s</span> <span class="bp">‚à©</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">image_inter_preimage</span><span class="o">,</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">‚à™</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_union</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">preimage_compl</span><span class="o">,</span> <span class="n">image_downward_closed</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">set</span>

<span class="kn">namespace</span> <span class="n">filter</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kd">lemma</span> <span class="n">mem_comap''</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">‚àà</span> <span class="n">g.comap</span> <span class="n">m</span> <span class="bp">‚Üî</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚àà</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">mem_comap'</span>

<span class="kd">def</span> <span class="n">kern_map</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Œ≤</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">sets</span> <span class="o">:=</span> <span class="o">(</span><span class="n">kern_image</span> <span class="n">m</span><span class="o">)</span> <span class="bp">''</span> <span class="n">f.sets</span><span class="o">,</span>
  <span class="n">univ_sets</span> <span class="o">:=</span> <span class="o">‚ü®</span><span class="n">univ</span><span class="o">,</span> <span class="n">f.univ_sets</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">]‚ü©,</span>
  <span class="n">sets_of_superset</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="n">_</span> <span class="n">t</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hm</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="n">hi</span><span class="o">,</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">s</span> <span class="bp">‚à™</span> <span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">,</span> <span class="n">f.sets_of_superset</span> <span class="n">hm</span> <span class="o">(</span><span class="n">subset_union_left</span> <span class="n">s</span> <span class="n">_</span><span class="o">)],</span>
    <span class="n">exact</span> <span class="n">kern_image_upward_closed</span> <span class="n">m</span> <span class="n">hi</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">inter_sets</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="n">_</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s‚ÇÅ</span><span class="o">,</span> <span class="n">h‚ÇÅ</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="o">‚ü®</span><span class="n">s‚ÇÇ</span><span class="o">,</span> <span class="n">h‚ÇÇ</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©,</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">s‚ÇÅ</span> <span class="bp">‚à©</span> <span class="n">s‚ÇÇ</span><span class="o">,</span> <span class="n">f.inter_sets</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_inter</span><span class="o">,</span> <span class="n">image_union</span><span class="o">,</span> <span class="n">compl_union</span><span class="o">],</span>
  <span class="kd">end</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">comap_kern_map</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">galois_connection</span> <span class="o">(</span><span class="n">comap</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">kern_map</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">Œª</span> <span class="n">g</span> <span class="n">f</span><span class="o">,</span> <span class="kd">begin</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">le_def</span><span class="o">,</span> <span class="n">mem_comap''</span><span class="o">],</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">h</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©,</span> <span class="n">exact</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span> <span class="n">_</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">rfl</span><span class="o">‚ü©</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">filter</span>


<span class="c1">-- miscellaneous lemmas unnecessary for the Galois connection</span>

<span class="kn">namespace</span> <span class="n">set</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ≤</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed'</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚àà</span> <span class="n">set.range</span> <span class="o">(</span><span class="n">set.image</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">image_inter_preimage</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="o">‚ü®</span><span class="n">_</span><span class="o">,</span> <span class="n">h</span><span class="o">‚ü©</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">image_downward_closed''</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">m</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">''</span> <span class="o">(</span><span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">inter_eq_right_iff_subset</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">image_inter_preimage</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">subset_antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">image_preimage_subset</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">conv_lhs</span> <span class="o">{</span> <span class="n">rw</span> <span class="bp">‚Üê</span> <span class="n">h</span> <span class="o">},</span> <span class="n">apply</span> <span class="n">image_subset</span><span class="o">,</span> <span class="n">apply</span> <span class="n">inter_subset_right</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed'</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">‚àà</span> <span class="n">set.range</span> <span class="o">(</span><span class="n">set.kern_image</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">‚ü®</span><span class="n">s'</span><span class="o">,</span> <span class="n">h'</span><span class="o">‚ü©</span> <span class="o">:=</span> <span class="n">image_downward_closed'</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">s'</span><span class="bp">·∂ú</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">,</span> <span class="n">h'</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_upward_closed''</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">‚Åª¬π'</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">kern_image</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="bp">‚Üê</span> <span class="n">preimage_compl</span><span class="o">,</span> <span class="n">image_downward_closed''</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">kern_image_mono</span> <span class="o">{</span><span class="n">s‚ÇÅ</span> <span class="n">s‚ÇÇ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s‚ÇÅ</span> <span class="bp">‚äÜ</span> <span class="n">s‚ÇÇ</span><span class="o">)</span> <span class="o">:</span> <span class="n">s‚ÇÅ.kern_image</span> <span class="n">m</span> <span class="bp">‚äÜ</span> <span class="n">s‚ÇÇ.kern_image</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">kern_image_eq_compl</span><span class="o">,</span> <span class="n">compl_subset_compl</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">image_subset</span> <span class="n">m</span> <span class="o">(</span><span class="n">compl_subset_compl.2</span> <span class="n">h</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">set</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Has any of this been PR-ed? I know it sounds crazy, but I need this for defining the space of test functions on an open set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Œ©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Œ©</span></span></span></span> of a finite dimensional vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> in a convenient way! </p>
<p>Because I don't want to have "extensions by zero" all the time, I want <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">D</mi><mo stretchy="false">(</mo><mi mathvariant="normal">Œ©</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{D}(\Omega)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord">Œ©</span><span class="mclose">)</span></span></span></span> to be the type of smooth functions <em>defined on all of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></em> and whose <a href="https://leanprover-community.github.io/mathlib_docs/find/tsupport">docs#tsupport</a> is a compact subset <em>of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Œ©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Œ©</span></span></span></span></em>. The problem is to encode the last condition in a convenient way that doesn't involve duplicating the API of <a href="https://leanprover-community.github.io/mathlib_docs/find/has_compact_support">docs#has_compact_support</a> for this relative case (for example, a naive combination of <a href="https://leanprover-community.github.io/mathlib_docs/find/has_compact_support">docs#has_compact_support</a> and "support <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>‚äÜ</mo><mi mathvariant="normal">Œ©</mi></mrow><annotation encoding="application/x-tex">\subseteq\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">‚äÜ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Œ©</span></span></span></span>" makes proving the sum of two test functions is a test function annoying).</p>
<p>So I want to apply the same trick as <a href="https://leanprover-community.github.io/mathlib_docs/find/has_compact_support_iff_eventually_eq">docs#has_compact_support_iff_eventually_eq</a> but with a different filter, namely <code>‚®Ö (s : set S) (h : is_compact s), ùìü (coe '' s : set Œ±)·∂ú</code> (I am in a normed space so <a href="https://leanprover-community.github.io/mathlib_docs/find/cocompact">docs#cocompact</a> = <a href="https://leanprover-community.github.io/mathlib_docs/find/coclosed_compact">docs#coclosed_compact</a>). I've long been wondering if this could be defined from <a href="https://leanprover-community.github.io/mathlib_docs/find/cocompact">docs#cocompact</a> by pure filter-theoretic nonsense, and I just realized that this is exactly <code>kern_map coe cocompact</code>, which is way more satisfying!</p>



<a name="302323253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/302323253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#302323253">(Oct 04 2022 at 18:35)</a>:</h4>
<p>No I haven't PR'd. Glad that the definition finds some actual use! I doubt I have time for the PR, and I think it's better that someone more familiar with the filter library PRs it, especially since you are probably adding more APIs to it. As shown in the proof above, the Galois connection is essentially known, as <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.mem_comap''">docs#filter.mem_comap''</a> in mathlib, and the main content of my work was to show <code>(kern_image m) '' f.sets</code> forms a filter. I also worked out some more relationships back then:<br>
<a href="/user_uploads/3121/JXqogsJea8CtnmtaboxyxVyk/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/JXqogsJea8CtnmtaboxyxVyk/image.png" title="image.png"><img src="/user_uploads/3121/JXqogsJea8CtnmtaboxyxVyk/image.png"></a></div>



<a name="302323513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/congruence%20of%20filters%20for%20tendsto/near/302323513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/congruence.20of.20filters.20for.20tendsto.html#302323513">(Oct 04 2022 at 18:37)</a>:</h4>
<p>The diagonal inclusion/generation are essneitally known in mathlib, and the middle top two are used in induced/coinduced topology, but I can't think of what the bottom row is good for.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>