---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html">sum_ite_eq_extract</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279516361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279516361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279516361">(Apr 20 2022 at 09:05)</a>:</h4>
<p>Do we have the following in mathlib? </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sum_ite_eq_extract</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
 <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="mi">0</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>We have a <code>tsum_ite_eq_extract</code>, but I can't seem to find a sum version.</p>



<a name="279517128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279517128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279517128">(Apr 20 2022 at 09:13)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_boole">docs#finset.sum_boole</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_ite">docs#finset.sum_ite</a>, which are pretty close.</p>



<a name="279524144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279524144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279524144">(Apr 20 2022 at 10:24)</a>:</h4>
<p>hmm yeah I saw those, but I can't seem to get this easily from them.</p>



<a name="279524434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279524434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279524434">(Apr 20 2022 at 10:28)</a>:</h4>
<p>You can rewrite the LHS using <code>finset.sum_ite</code>, <code>finset.sum_ite_eq'</code>, <code>add_comm</code>.</p>



<a name="279524481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279524481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279524481">(Apr 20 2022 at 10:29)</a>:</h4>
<p>And of course you should turn <code>(b : s)</code> into <code>{b : α} (hb : b ∈ s)</code>.</p>



<a name="279525080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279525080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279525080">(Apr 20 2022 at 10:37)</a>:</h4>
<p>hmm I don't see how to rewrite the LHS using <code>finset.sum_ite</code>.</p>



<a name="279525118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279525118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279525118">(Apr 20 2022 at 10:37)</a>:</h4>
<p>You can also use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.filter_ne'">docs#finset.filter_ne'</a></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">lemma</span> <span class="n">sum_ite_eq_extract</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">s</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="mi">0</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">b</span> <span class="k">with</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">finset.sum_ite</span><span class="o">,</span> <span class="n">finset.filter_ne'</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">finset.sum_erase_add</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hb</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="279525257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279525257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279525257">(Apr 20 2022 at 10:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456794">Patrick Johnson</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/sum_ite_eq_extract/near/279525118">said</a>:</p>
<blockquote>
<p>You can also use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.filter_ne'">docs#finset.filter_ne'</a></p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">lemma</span> <span class="n">sum_ite_eq_extract</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">s</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="mi">0</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">b</span> <span class="k">with</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">finset.sum_ite</span><span class="o">,</span> <span class="n">finset.filter_ne'</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">finset.sum_erase_add</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hb</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>ah ok I hadn't seen <code>filter_ne'</code>. Thats nice.</p>



<a name="279526271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279526271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279526271">(Apr 20 2022 at 10:51)</a>:</h4>
<p>it might be nice to have the <code>function.update</code> version too, which is how <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_ite_eq_extract">docs#tsum_ite_eq_extract</a> is proved</p>



<a name="279527704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279527704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279527704">(Apr 20 2022 at 11:06)</a>:</h4>
<p>You mean something like: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sum_update_eq</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_sub</span> <span class="n">β</span><span class="o">]</span>
 <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span>  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">update</span> <span class="n">f</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="n">n</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>?</p>



<a name="279528104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279528104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279528104">(Apr 20 2022 at 11:11)</a>:</h4>
<p>You'll need <code>add_comm_group</code></p>



<a name="279528192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279528192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279528192">(Apr 20 2022 at 11:12)</a>:</h4>
<p>Or the variant<code>∑ n in s, update f a b n + f a = ∑ n in s, f n + b</code></p>



<a name="279543784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279543784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279543784">(Apr 20 2022 at 13:34)</a>:</h4>
<p>Ok I made <a href="https://github.com/leanprover-community/mathlib/pull/13545">#13545</a> with these two things</p>



<a name="279543852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279543852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279543852">(Apr 20 2022 at 13:35)</a>:</h4>
<p>We already have <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_update_of_mem">docs#finset.sum_update_of_mem</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_update_of_not_mem">docs#finset.sum_update_of_not_mem</a></p>



<a name="279544026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279544026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279544026">(Apr 20 2022 at 13:37)</a>:</h4>
<p>oh damn I didnt see them. Well that cuts things in half :P</p>



<a name="279544767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279544767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279544767">(Apr 20 2022 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span>, is the lemma you actually want <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.add_sum_erase">docs#finset.add_sum_erase</a>?</p>



<a name="279546585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279546585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279546585">(Apr 20 2022 at 13:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/sum_ite_eq_extract/near/279544767">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="389019">Chris Birkbeck</span>, is the lemma you actually want <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.add_sum_erase">docs#finset.add_sum_erase</a>?</p>
</blockquote>
<p>Oh! that does actually work for what I want. Ok so I now don't have a use for this <code>sum_ite_extract</code>, but maybe its still worth having?</p>



<a name="279546753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279546753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279546753">(Apr 20 2022 at 13:59)</a>:</h4>
<p>Personally I dislike <code>tsum_ite_eq_extract</code>, the name doesn't follow our naming conventions at all</p>



<a name="279684332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279684332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279684332">(Apr 21 2022 at 14:03)</a>:</h4>
<p>My hunch is that <code>finset.add_sum_erase</code> is more practical to use, in most situations.</p>



<a name="279690115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279690115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279690115">(Apr 21 2022 at 14:49)</a>:</h4>
<p>Maybe we should just add a comment to <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_ite_eq_extract">docs#tsum_ite_eq_extract</a> indicating why the API is different to the finset case</p>



<a name="279690178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/sum_ite_eq_extract/near/279690178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/sum_ite_eq_extract.html#279690178">(Apr 21 2022 at 14:49)</a>:</h4>
<p>(eg because "unlike finsets, this is indexed by a type not a set, so we can't use an API similar to<code>finset.add_sum_erase</code>")</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>