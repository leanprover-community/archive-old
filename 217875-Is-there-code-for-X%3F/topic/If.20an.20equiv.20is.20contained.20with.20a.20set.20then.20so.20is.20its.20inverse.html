---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html">If an equiv is contained with a set then so is its inverse</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222410776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222410776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222410776">(Jan 12 2021 at 10:00)</a>:</h4>
<p>Does this exist? Is it true?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">equiv.inv_maps_to</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">set.maps_to</span> <span class="n">f</span> <span class="n">s</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">set.maps_to</span> <span class="o">(</span><span class="n">f</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">_</span><span class="o">)</span> <span class="n">s</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">set.maps_to</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>This came up in <a href="https://github.com/leanprover-community/mathlib/issues/5706">#5706</a>, where a similar lemma is introduced that requires <code>fintype α</code>. It's not clear to me whether this assumption is needed, but it's entirely possible I'm missing relevant intuition about finiteness</p>



<a name="222411410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222411410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222411410">(Jan 12 2021 at 10:07)</a>:</h4>
<p>This should be true: the restriction of <code>f</code> to <code>s</code> is injective, so by finiteness of <code>s</code> it is also surjective, therefore an equiv. The inverse restricted to <code>s</code> is the inverse to the restriction of <code>f</code>.</p>



<a name="222411440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222411440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222411440">(Jan 12 2021 at 10:07)</a>:</h4>
<p>Ah, so the <code>fintype</code> assumption is needed?</p>



<a name="222411506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222411506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222411506">(Jan 12 2021 at 10:08)</a>:</h4>
<p>Yes, otherwise you can do things like mapping each rational number <code>x</code> to <code>x / 2</code>, which maps <code>[0, 1]</code> to <code>[0, 1]</code> but not in the other direction.</p>



<a name="222411558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222411558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222411558">(Jan 12 2021 at 10:08)</a>:</h4>
<p>Thanks, a counter-example was exactly what I was hoping for. I should have looked for examples beyond nat and int...</p>



<a name="222412779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222412779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222412779">(Jan 12 2021 at 10:23)</a>:</h4>
<p>You have a counterexample in <code>int</code>, with the addition of <code>1</code> mapping the natural numbers to themselves, contrary to its inverse.</p>



<a name="222414613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20an%20equiv%20is%20contained%20with%20a%20set%20then%20so%20is%20its%20inverse/near/222414613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20an.20equiv.20is.20contained.20with.20a.20set.20then.20so.20is.20its.20inverse.html#222414613">(Jan 12 2021 at 10:44)</a>:</h4>
<p>So in that example <code>α</code> is <code>int</code>, <code>f</code> is the permutation which adds one, and <code>s</code> is "non-negative"? Good point. I was slightly sad but not surprised to see that <code>slim_check</code> couldn't help me here.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>