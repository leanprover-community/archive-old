---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html">Defining functions for structures</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="310836529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310836529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310836529">(Nov 18 2022 at 14:41)</a>:</h4>
<p>Hi, Sorry for a novice question. I am trying to define a circle and then a function over it (see code below):</p>
<p>structure point :=<br>
  (x y: ℝ)<br>
structure circle :=<br>
  (center: point) (radius: ℝ)</p>
<p>def circle1.standard (radius: ℝ): circle :=<br>
<a href="http://circle.mk">circle.mk</a> (<a href="http://point.mk">point.mk</a> 0 0) radius</p>
<p>def c: circle := circle.standard 10<br>
#print <a href="http://c.center">c.center</a></p>
<p>However, it is not working. It says "unknown identifier <a href="http://c.center">c.center</a>". Can some one please tell me what I am doing wrong? Thanks in advance.</p>



<a name="310839009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310839009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310839009">(Nov 18 2022 at 14:54)</a>:</h4>
<p>Mind reading <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> and editing accordingly?</p>



<a name="310839246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310839246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310839246">(Nov 18 2022 at 14:55)</a>:</h4>
<p>I think here you probably wanted <code>#eval</code> or <code>#check</code>, not <code>#print</code></p>



<a name="310840074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310840074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310840074">(Nov 18 2022 at 14:59)</a>:</h4>
<p>Also, it seems that in practice your <code>circle</code> is given by three real numbers, without any condition, so it doesn't look like a circle to me.</p>



<a name="310846547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310846547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310846547">(Nov 18 2022 at 15:27)</a>:</h4>
<p>It's centre and radius of a circle in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\R^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="310846914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310846914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310846914">(Nov 18 2022 at 15:29)</a>:</h4>
<p>are <code>(0, 0), 5</code> and <code>(0, 0), -5</code> different circles?</p>



<a name="310847555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310847555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310847555">(Nov 18 2022 at 15:32)</a>:</h4>
<p>The answer to the question is that <code>c.center</code> is fine, but you can't <code>#print</code> it because Lean doesn't know how to #print a point. You can do <code>#check c.center</code> to see that indeed it is a <code>point</code>, and you could even prove that the point is (0,0).</p>



<a name="310848492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310848492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310848492">(Nov 18 2022 at 15:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310847555">said</a>:</p>
<blockquote>
<p>but you can't <code>#print</code> it because Lean doesn't know how to #print a point.</p>
</blockquote>
<p>It's more fundamental than this, <code>#print</code> isn't for printing values at all</p>



<a name="310849036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310849036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310849036">(Nov 18 2022 at 15:39)</a>:</h4>
<p>Ahh. Got that now. Thanks a lot. #eval works.</p>



<a name="310849431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310849431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310849431">(Nov 18 2022 at 15:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310846914">said</a>:</p>
<blockquote>
<p>are <code>(0, 0), 5</code> and <code>(0, 0), -5</code> different circles?</p>
</blockquote>
<p>Right. I see the point. How do I enforce the constraint that radius should be positive?</p>



<a name="310859378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310859378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310859378">(Nov 18 2022 at 16:24)</a>:</h4>
<p>You could use <a href="https://leanprover-community.github.io/mathlib_docs/find/nnreal">docs#nnreal</a> for the radius if you're happy with radius 0</p>



<a name="310863290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310863290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310863290">(Nov 18 2022 at 16:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310859378">said</a>:</p>
<blockquote>
<p>You could use <a href="https://leanprover-community.github.io/mathlib_docs/find/nnreal">docs#nnreal</a> for the radius if you're happy with radius 0</p>
</blockquote>
<p>Yes. That works for me.</p>
<p>However, what is best way to have general checks? Like "if radius is &lt; 0 then return error else return my circle" kind of a thing.</p>



<a name="310865684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310865684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310865684">(Nov 18 2022 at 16:54)</a>:</h4>
<p>I have no idea what you're trying to implement. This is literal answer to your question, but I doubt it's what you actually want.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">mk_circ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">string</span> <span class="bp">⊕</span> <span class="n">circle</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">0</span>
<span class="k">then</span> <span class="n">sum.inl</span> <span class="s2">"Radius cannot be negative"</span>
<span class="k">else</span> <span class="n">sum.inr</span> <span class="o">⟨⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">⟩,</span> <span class="n">r</span><span class="o">⟩</span>
</code></pre></div>



<a name="310872833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310872833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310872833">(Nov 18 2022 at 17:27)</a>:</h4>
<p>Thank you. This helps.</p>
<p>I am actually trying to define a circle, a tangent and prove that tangent is right angle to the radius. It might not need what I actually wrote above. But, still struggling to model the scenario correctly and move to the proof part.</p>



<a name="310873107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310873107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310873107">(Nov 18 2022 at 17:28)</a>:</h4>
<blockquote>
<p>However, what is best way to have general checks? Like "if radius is &lt; 0 then return error else return my circle" kind of a thing.</p>
</blockquote>
<p>You don't need this type of check if you use <code>nnreal</code>. Just like in C you don't need a "if this is not a whole number error" if you use <code>int</code> instead of <code>float</code>.</p>



<a name="310873612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310873612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310873612">(Nov 18 2022 at 17:30)</a>:</h4>
<p>To give an alternative to nnreal, just for sake of example, here's how you can model a circle with positive radius:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">circle</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">center</span><span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">radius</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">radius_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">radius</span><span class="o">)</span>
</code></pre></div>



<a name="310873697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310873697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310873697">(Nov 18 2022 at 17:31)</a>:</h4>
<p>It's just impossible to create a circle with non-positive radius with this, since they require a proof of positivity to be constructed.</p>



<a name="310873996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310873996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310873996">(Nov 18 2022 at 17:33)</a>:</h4>
<p>It might be useful elsewhere. For eg.,</p>
<div class="codehilite" data-code-language="structure"><pre><span></span><code>  (x y: \real)

structure circle :=
  (center: point) (radius: ℝ)

def circle.makenew (d e f: ℝ): circle :=
    circle.mk c (point.mk (-d/2) (-e/2)) (real.sqrt ((((d*d)+(e*e))/4)-f))
</code></pre></div>
<p>I might want to return an error if d<em>d+e</em>e &lt; 4f. Do you suggest a better way to handle this instead of doing "if ... else"?</p>



<a name="310874227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310874227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310874227">(Nov 18 2022 at 17:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310873612">said</a>:</p>
<blockquote>
<p>To give an alternative to nnreal, just for sake of example, here's how you can model a circle with positive radius:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">circle</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">center</span><span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">radius</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">radius_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">radius</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Trying to understand here. Are we saying "radius_pos is a proposition and this prop has to be true for the proof to proceed"?</p>



<a name="310874540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310874540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310874540">(Nov 18 2022 at 17:36)</a>:</h4>
<p>It's saying <code>circle.mk</code> takes three arguments to construct a <code>circle</code>: a <code>point</code>, a <code>real</code>, and a proof of <code>0 &lt; radius</code>.</p>



<a name="310874636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310874636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310874636">(Nov 18 2022 at 17:36)</a>:</h4>
<p>if <code>0 &lt; radius</code> is false then you won't be able to construct a circle since you can't supply a proof</p>



<a name="310874675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310874675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310874675">(Nov 18 2022 at 17:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310874540">said</a>:</p>
<blockquote>
<p>It's saying <code>circle.mk</code> takes three arguments to construct a <code>circle</code>: a <code>point</code>, a <code>real</code>, and a proof of <code>0 &lt; radius</code>.</p>
</blockquote>
<p>Understood. Thanks a lot. This clears up quite a few things for me.</p>



<a name="310874711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310874711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310874711">(Nov 18 2022 at 17:37)</a>:</h4>
<p>(Lean can't automatically compute whether <code>0 &lt; radius</code> is true for you, but if you're lucky something like <code>by norm_num</code> or <code>by linarith</code> will work)</p>



<a name="310875063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310875063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310875063">(Nov 18 2022 at 17:38)</a>:</h4>
<p>Here's an example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">noncomputable theory</span>

<span class="kd">structure</span> <span class="n">point</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>

<span class="kd">structure</span> <span class="n">circle</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">center</span><span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">radius</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">radius_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">radius</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">circle.makenew</span> <span class="o">(</span><span class="n">d</span> <span class="n">e</span> <span class="n">f</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">e</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">/</span><span class="mi">4</span> <span class="bp">-</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">circle</span> <span class="o">:=</span>
    <span class="n">circle.mk</span> <span class="o">(</span><span class="n">point.mk</span> <span class="o">(</span><span class="bp">-</span><span class="n">d</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="n">e</span><span class="bp">/</span><span class="mi">2</span><span class="o">))</span> <span class="o">(</span><span class="n">real.sqrt</span> <span class="o">((</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">/</span><span class="mi">4</span><span class="bp">-</span><span class="n">f</span><span class="o">))</span> <span class="o">(</span><span class="kd">by</span> <span class="n">rwa</span> <span class="n">real.sqrt_pos</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">c2</span><span class="o">:</span> <span class="n">circle</span> <span class="o">:=</span> <span class="n">circle.makenew</span> <span class="mi">10</span> <span class="mi">10</span> <span class="mi">1</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span><span class="o">)</span>

<span class="bp">#</span><span class="n">norm_num</span> <span class="o">[</span><span class="n">c2</span><span class="o">,</span> <span class="n">circle.makenew</span><span class="o">]</span> <span class="o">:</span> <span class="n">c2.radius</span>
<span class="c1">-- real.sqrt 49</span>
</code></pre></div>



<a name="310875138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310875138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310875138">(Nov 18 2022 at 17:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310874711">said</a>:</p>
<blockquote>
<p>(Lean can't automatically compute whether <code>0 &lt; radius</code> is true for you, but if you're lucky something like <code>by norm_num</code> or <code>by linarith</code> will work)</p>
</blockquote>
<p>Got it. Learnt about norm_num in another thread. Separating proof vs compute looks very tricky to me. May be some thing fundamental that I am missing. But, got the basic idea to get some work progressing.</p>



<a name="310875204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310875204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310875204">(Nov 18 2022 at 17:39)</a>:</h4>
<p>I modified <code>circle.makenew</code> to include a condition on the variables that guarantee the square root is positive.</p>



<a name="310875440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310875440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310875440">(Nov 18 2022 at 17:40)</a>:</h4>
<p>Just to give another way to write it for sake of example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">circle.makenew</span> <span class="o">(</span><span class="n">d</span> <span class="n">e</span> <span class="n">f</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">e</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">/</span><span class="mi">4</span><span class="o">)</span> <span class="o">:</span> <span class="n">circle</span> <span class="o">:=</span>
  <span class="n">circle.mk</span> <span class="o">(</span><span class="n">point.mk</span> <span class="o">(</span><span class="bp">-</span><span class="n">d</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="n">e</span><span class="bp">/</span><span class="mi">2</span><span class="o">))</span> <span class="o">(</span><span class="n">real.sqrt</span> <span class="o">((</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">/</span><span class="mi">4</span><span class="bp">-</span><span class="n">f</span><span class="o">))</span> <span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">real.sqrt_pos</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">})</span>
</code></pre></div>



<a name="310875517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310875517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310875517">(Nov 18 2022 at 17:41)</a>:</h4>
<p>Cool. I like this much better (the condition h: ...). Thanks for this suggestion.</p>
<p>I actually got real.sqrt 49 with out rwa or linarith. May be just lucked out on this example.</p>



<a name="310876146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Defining%20functions%20for%20structures/near/310876146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnreal <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Defining.20functions.20for.20structures.html#310876146">(Nov 18 2022 at 17:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="563020">learnreal</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Defining.20functions.20for.20structures/near/310875517">said</a>:</p>
<blockquote>
<p>Cool. I like this much better (the condition h: ...). Thanks for this suggestion.</p>
<p>I actually got real.sqrt 49 with out rwa or linarith (that was with out the h condition). May be just lucked out on this example.</p>
</blockquote>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>