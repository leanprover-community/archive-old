---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html">{0, ..., (i : fin n)}</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214055857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214055857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214055857">(Oct 21 2020 at 14:18)</a>:</h4>
<p>What is the best way to write the (fin)set of all <code>(j : fin n) &lt; i</code> for a given <code>i : fin n</code>? <code>(finset.range (i : ℕ)).map _</code>, <code>(finset.fin_range n).map _</code>, <code>Iic i</code>, ...?</p>



<a name="214055934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214055934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214055934">(Oct 21 2020 at 14:19)</a>:</h4>
<p><code>univ.filter (\lam j, j &lt; i)</code>?</p>



<a name="214055962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214055962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214055962">(Oct 21 2020 at 14:19)</a>:</h4>
<p>or a custom definition</p>



<a name="214055983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214055983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214055983">(Oct 21 2020 at 14:19)</a>:</h4>
<p>Does Iic give you the finset instance? If so then probably this is exactly what it's meant for.</p>



<a name="214056050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056050">(Oct 21 2020 at 14:20)</a>:</h4>
<p>I don't think it does</p>



<a name="214056111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056111">(Oct 21 2020 at 14:20)</a>:</h4>
<p>A quick grep suggests no :(</p>



<a name="214056172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056172">(Oct 21 2020 at 14:21)</a>:</h4>
<p>what is <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.fin_range">docs#finset.fin_range</a>?</p>



<a name="214056210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056210">(Oct 21 2020 at 14:21)</a>:</h4>
<p>I guess it could be a generalization of <code>fin_range</code></p>



<a name="214056211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056211">(Oct 21 2020 at 14:21)</a>:</h4>
<p><code>fin_range (n : ℕ)</code> is the finset of all <code>fin n</code></p>



<a name="214056312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056312">(Oct 21 2020 at 14:22)</a>:</h4>
<p><code>fin_range' i (_ : i &lt;= n) : finset (fin n)</code></p>



<a name="214056397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056397">(Oct 21 2020 at 14:22)</a>:</h4>
<p>I agree a new definition will be useful. I'm leaning towards <code>(finset.range (i : ℕ)).attach_fin (lt_trans _ _)</code>.</p>



<a name="214056620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056620">(Oct 21 2020 at 14:24)</a>:</h4>
<p><code>list.fin_range</code> does it directly using <code>list.pmap</code> (which is basically a combination of <code>attach</code> and <code>map</code>, used to define <code>attach</code> in the first place)</p>



<a name="214056926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214056926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214056926">(Oct 21 2020 at 14:26)</a>:</h4>
<p>(the advantage of generalizing the original construction of <code>finset.fin_range</code> instead of mapping it is that it executes/reduces a little faster)</p>



<a name="214057263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057263">(Oct 21 2020 at 14:28)</a>:</h4>
<p>I'm mapping <code>range</code>, not <code>fin_range</code>, right now, does that help?</p>



<a name="214057511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057511">(Oct 21 2020 at 14:30)</a>:</h4>
<p>well it's <code>finset.range</code>, which is already a pmap on <code>list.range</code></p>



<a name="214057602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057602">(Oct 21 2020 at 14:30)</a>:</h4>
<p><code>list.fin_range</code> is also a pmap on <code>list.range</code></p>



<a name="214057653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057653">(Oct 21 2020 at 14:31)</a>:</h4>
<p>maybe we should just have a template for pmaps on <code>list.range</code></p>



<a name="214057865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057865">(Oct 21 2020 at 14:32)</a>:</h4>
<p>oh wait, I guess that is <code>attach_fin</code></p>



<a name="214057893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057893">(Oct 21 2020 at 14:32)</a>:</h4>
<p>From the code, <code>finset.range</code> is <code>\&lt;multiset.range _, nodup_range _\&gt;</code>, which is <code>quot.mk (list.range n)</code>, so I'm not sure where the overhead comes in :/</p>



<a name="214057967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057967">(Oct 21 2020 at 14:33)</a>:</h4>
<p>Anyway, i just need it for a couple of proofs, so I'm not so concerned about evaluation speed right now. If you have profiler data, let me know :)</p>



<a name="214057984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214057984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214057984">(Oct 21 2020 at 14:33)</a>:</h4>
<p>no you are right</p>



<a name="214058003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214058003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214058003">(Oct 21 2020 at 14:33)</a>:</h4>
<p><code>finset.range</code> is really just <code>list.range</code></p>



<a name="214058076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214058076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214058076">(Oct 21 2020 at 14:33)</a>:</h4>
<p>so your version only has one <code>pmap</code></p>



<a name="214058731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214058731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214058731">(Oct 21 2020 at 14:37)</a>:</h4>
<p>Any name suggestions for <code>fin_range' i</code> which also includes <code>i</code>: <code>fin_range_inclusive</code> ?</p>



<a name="214058974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214058974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214058974">(Oct 21 2020 at 14:39)</a>:</h4>
<p>Maybe we should just rename the <code>range</code> functions to <code>I0o</code></p>



<a name="214059091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214059091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214059091">(Oct 21 2020 at 14:40)</a>:</h4>
<p><code>range</code> conflicts with <code>set.range</code> anyway</p>



<a name="214107411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214107411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214107411">(Oct 21 2020 at 20:05)</a>:</h4>
<p>I suppose another spelling would br <code>list.of_fn (\lam (x : fin i), (x : fin n))</code> with whatever the appropriate cast invocation is. I found myself needing something very similar today, and ended up in fin casting hell no matter what I tried</p>



<a name="214167349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214167349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214167349">(Oct 22 2020 at 10:20)</a>:</h4>
<p>I'm checking out this refactor, and it seems there is still some abstraction to do. e.g. there are separate definitions for <code>finset.Ico : finset ℕ</code> and <code>finset.Ico_ℤ : finset ℤ</code>. In Haskell these are unified with the <code>Enum</code> typeclass, so maybe something like that?</p>



<a name="214167937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214167937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214167937">(Oct 22 2020 at 10:26)</a>:</h4>
<p>A quick sketch:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">enum</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">enumFromTo</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">enum</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">_</span>
<span class="kd">instance</span> <span class="n">enum</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="n">_</span>
<span class="kd">instance</span> <span class="n">enum</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>

<span class="n">list.Ico</span> <span class="o">:=</span> <span class="n">enum.enumFromTo</span>
<span class="n">multiset.Ico</span> <span class="o">:=</span> <span class="n">quot.mk</span> <span class="n">list.Ico</span>
<span class="n">finset.Ico</span> <span class="o">:=</span> <span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">multiset.Ico_nodup</span><span class="o">)</span>

<span class="n">list.Icc</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">list.Ico</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">++</span> <span class="o">[</span><span class="n">y</span><span class="o">]</span>
<span class="bp">...</span>

<span class="n">list.I0o</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">list.Ico</span> <span class="mi">0</span> <span class="n">y</span>
<span class="bp">...</span>

<span class="n">list.I0c</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">list.Icc</span> <span class="mi">0</span> <span class="n">y</span>
<span class="bp">...</span>
</code></pre></div>



<a name="214172352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214172352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214172352">(Oct 22 2020 at 11:15)</a>:</h4>
<p>You might want an additional typeclass that proves <code>enum</code> produces an ordered list between the bounds</p>



<a name="214172924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214172924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214172924">(Oct 22 2020 at 11:22)</a>:</h4>
<p>I have a PR I'll put up shortly that could benefit from this typeclass - it might be useful for checking we're not missing anything</p>



<a name="214174412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214174412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214174412">(Oct 22 2020 at 11:41)</a>:</h4>
<p>Ah, the other lemma you might want is that <code>a ≤ b → b ≤ c → enumFromTo a b ++ enumFromTo b c = enumFromTo a b c</code></p>



<a name="214174759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214174759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214174759">(Oct 22 2020 at 11:44)</a>:</h4>
<p>My plan, if we like the <code>enum</code> class, is to replace the existing <code>range</code>/interval definitions and see which assumptions we need. Maybe split it up into <code>lawful_enum</code> (like <code>lawful_monad</code>) which extends <code>linear_order</code>. Then this would be extended by <code>enum_bot</code> (and <code>enum_top</code>?) which has instances for e.g. <code>fin n</code> and <code>ℕ</code>.</p>



<a name="214174799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214174799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214174799">(Oct 22 2020 at 11:45)</a>:</h4>
<p>I assume that the laws we need will be clear from the re-implementation step</p>



<a name="214174813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214174813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214174813">(Oct 22 2020 at 11:45)</a>:</h4>
<p>That's probably true. I think I was looking for exactly this in <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/non-dense.20orders/near/214039169">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/non-dense.20orders/near/214039169</a></p>



<a name="214176114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214176114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214176114">(Oct 22 2020 at 11:58)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span>, <a href="https://github.com/leanprover-community/mathlib/issues/4739">#4739</a> is the PR where I really wish I had a typeclass to generalize over.</p>



<a name="214176302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214176302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214176302">(Oct 22 2020 at 12:01)</a>:</h4>
<p>You mean something like the following code from a coming PR where I really wished I had a typeclass to generalize over? :)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The permutation on `fin n` given by the cycle `(0 1 2 ... i)`.</span>

<span class="sd">If `n = 0` or `i = 0`, this is the identity permutation.</span>
<span class="sd">-/</span>
<span class="kd">def</span> <span class="n">cycle_range'</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">),</span> <span class="n">equiv.perm</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">i</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">nat.succ</span> <span class="n">n</span><span class="o">)</span> <span class="n">i</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">=</span> <span class="n">i</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">(</span><span class="n">fin.pred_above</span> <span class="n">i</span> <span class="n">j</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">@</span><span class="n">fin.cons</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">i</span> <span class="o">(</span><span class="n">fin.succ_above</span> <span class="n">i</span><span class="o">)</span> <span class="n">j</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">dsimp</span> <span class="n">only</span><span class="o">,</span> <span class="n">split_ifs</span> <span class="k">with</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">dif_pos</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">fin.cons_zero</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">dif_neg</span> <span class="n">h</span><span class="o">,</span> <span class="n">fin.cons_succ</span><span class="o">,</span> <span class="n">fin.succ_above_pred_above</span><span class="o">]</span> <span class="o">}</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">simp</span> <span class="n">only</span><span class="o">,</span> <span class="n">split_ifs</span> <span class="k">with</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">cons_succ_above_eq_self_iff.mp</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
    <span class="n">revert</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">fin.cons</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="n">j</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fin.cons_succ</span><span class="o">]</span> <span class="o">}</span>
  <span class="kd">end</span> <span class="o">}</span>
</code></pre></div>



<a name="214176551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214176551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214176551">(Oct 22 2020 at 12:03)</a>:</h4>
<p>(I just finished a proof for the row/column expansion formula of a determinant.)</p>



<a name="214178526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214178526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214178526">(Oct 22 2020 at 12:22)</a>:</h4>
<p>Right, I have some time now to get started with the <code>enum</code> class.</p>



<a name="214180157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214180157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214180157">(Oct 22 2020 at 12:36)</a>:</h4>
<p>Small complication: <code>list.enum</code> already exists (the equivalent of <code>enumerate</code> in Python, of type <code>list α → list (ℕ × α)</code>), so that may cause some confusion.</p>



<a name="214187706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214187706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214187706">(Oct 22 2020 at 13:36)</a>:</h4>
<p>Can't any enumerable type be constructed from nat? So you could have <a href="http://list.map">list.map</a> (list.enum_from _ _) (<a href="http://prod.map">prod.map</a> to_enum_type id)</p>



<a name="214190622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/%7B0%2C%20...%2C%20%28i%20%3A%20fin%20n%29%7D/near/214190622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/.7B0.2C.20.2E.2E.2E.2C.20(i.20.3A.20fin.20n).7D.html#214190622">(Oct 22 2020 at 13:58)</a>:</h4>
<p>Any linearly ordered type, yes. If the type is only partially ordered, <code>enum</code> is still useful (e.g. the list of subgroups in the other thread). For computation in some types, a specialized implementation is also useful (maybe you want to re-use the current value when constructing the successor).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>