---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html">free_abelian_group.of is injective</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217128283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128283">(Nov 18 2020 at 12:32)</a>:</h4>
<p>This strikes me as an obviously true statement, but it seems difficult to prove.</p>
<p><code>free_abelian_group.of x</code> is defined as <code>abelianization.of $ free_group.of x</code>, where we already have <a href="https://leanprover-community.github.io/mathlib_docs/find/free_group.of.inj">docs#free_group.of.inj</a>.</p>
<p>Obviously <a href="https://leanprover-community.github.io/mathlib_docs/find/abelianization.of">docs#abelianization.of</a> is not injective, but it should be injective on the range of <code>free_group.of</code>, right?</p>



<a name="217128487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128487">(Nov 18 2020 at 12:34)</a>:</h4>
<p>Yes</p>



<a name="217128535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128535">(Nov 18 2020 at 12:35)</a>:</h4>
<p>The image is a basis as a Z-module. If this fact is in mathlib, you can use that to prove injectivity</p>



<a name="217128631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128631">(Nov 18 2020 at 12:36)</a>:</h4>
<p>The image of <code>abelianization.of</code> or of <code>free_group.of</code>? (or both?)</p>



<a name="217128657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128657">(Nov 18 2020 at 12:36)</a>:</h4>
<p>The free <em>abelian</em> group</p>



<a name="217128676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128676">(Nov 18 2020 at 12:36)</a>:</h4>
<p>(which happens to be the abelianization of the free group)</p>



<a name="217128699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128699">(Nov 18 2020 at 12:37)</a>:</h4>
<p>So the map from X to the free abelian group generated by X is injective</p>



<a name="217128733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128733">(Nov 18 2020 at 12:37)</a>:</h4>
<p>The abelianization map from a group to its abelianization is almost never injective</p>



<a name="217128804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128804">(Nov 18 2020 at 12:38)</a>:</h4>
<p>If "The image is a basis as a Z-module" is in mathlib, it's hiding in another file somewhere</p>



<a name="217128805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128805">(Nov 18 2020 at 12:38)</a>:</h4>
<p>(it's injective if and only if your original group was already abelian <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>)</p>



<a name="217128842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217128842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217128842">(Nov 18 2020 at 12:39)</a>:</h4>
<p>You can still use it though, using the universal prop of the free abelian geoup</p>



<a name="217129162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217129162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217129162">(Nov 18 2020 at 12:43)</a>:</h4>
<p>I.e. take the free Z-module on X, say M, which comes with an injective map f : X -&gt; M. Now lift f to a map from the free abelian group on X, say F, to a map of abelian groups F -&gt; M. The universal prop says that the composition with g : X -&gt; F is just f, which in injective, so g must be injective too</p>



<a name="217129179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217129179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217129179">(Nov 18 2020 at 12:43)</a>:</h4>
<p>(sorry for the bad typesetting, I'm on mobile)</p>



<a name="217129635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217129635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217129635">(Nov 18 2020 at 12:48)</a>:</h4>
<p>I think your closing injectiveness argument may be missing from mathlib too - is it this one? <a href="https://github.com/leanprover-community/mathlib/compare/flat-module#diff-0dc822e485488f721fc8ef8bd0401825688b5e8b6e30d48decc73024f66e472cR37-R56">https://github.com/leanprover-community/mathlib/compare/flat-module#diff-0dc822e485488f721fc8ef8bd0401825688b5e8b6e30d48decc73024f66e472cR37-R56</a></p>
<p><code>(f : α → β) (e : β ≃ γ) : function.injective (e ∘ f) ↔ function.injective f</code></p>



<a name="217130218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217130218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217130218">(Nov 18 2020 at 12:54)</a>:</h4>
<p>I'm just saying that if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∘</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f \circ g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> is injective then so is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span>. Is this not mathlib?!</p>



<a name="217130274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217130274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217130274">(Nov 18 2020 at 12:54)</a>:</h4>
<p>That one is</p>



<a name="217130732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217130732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217130732">(Nov 18 2020 at 12:59)</a>:</h4>
<p>That statement isn't true?</p>



<a name="217130760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217130760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217130760">(Nov 18 2020 at 12:59)</a>:</h4>
<p>g needs to be only injective over the range of <code>f</code></p>



<a name="217130779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217130779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217130779">(Nov 18 2020 at 13:00)</a>:</h4>
<p>You're reading it backwards</p>



<a name="217131038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131038">(Nov 18 2020 at 13:02)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> you're turning into a true category theorist! (who never remember the order of function composition)</p>



<a name="217131220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131220">(Nov 18 2020 at 13:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/free_abelian_group.2Eof.20is.20injective/near/217130274">said</a>:</p>
<blockquote>
<p>That one is</p>
</blockquote>
<p>Found it, <a href="https://leanprover-community.github.io/mathlib_docs/find/function.injective.of_comp">docs#function.injective.of_comp</a></p>



<a name="217131223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131223">(Nov 18 2020 at 13:03)</a>:</h4>
<p>Don't worry though, it gets much worse when you start thinking about concatenation of paths when defining fundamental groups, and how to reconcile that with monodromy actions</p>



<a name="217131650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131650">(Nov 18 2020 at 13:08)</a>:</h4>
<p>In Freitag-Kiehl, the appendix on the fundamental group, covering groups always act on the right. I was initially surprised by this convention but things work out great with it.</p>



<a name="217131787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131787">(Nov 18 2020 at 13:09)</a>:</h4>
<p>I think if you always define fundamental groups as automorphism groups of fibre/fiber functors, you will never get confused <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="217131788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/free_abelian_group.of%20is%20injective/near/217131788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/free_abelian_group.2Eof.20is.20injective.html#217131788">(Nov 18 2020 at 13:09)</a>:</h4>
<p>In mathlib, however... we don't have right actions</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>