---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html">Inf and Sup of smul of a set</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="252437614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/252437614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#252437614">(Sep 08 2021 at 10:33)</a>:</h4>
<p>Where should these two lemmas go?<br>
I wanted to put them in <code>data.real.basic</code> but <code>map_cInf_of_continuous_at_of_monotone</code> requires <code>topology.algebra.ordered.basic</code> and <code>topological_space ℝ</code>. For info, <code>bdd_below_smul_iff_of_pos</code> and <code>bdd_above_smul_iff_of_pos</code> are added in <a href="https://github.com/leanprover-community/mathlib/issues/9078">#9078</a> and will reside in <code>algebra.bounds</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">Sup_smul</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Sup</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">Sup</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">set.smul_set_empty</span><span class="o">,</span> <span class="n">real.Sup_empty</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">set.image_smul</span><span class="o">,</span> <span class="n">eq_comm</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">map_cSup_of_continuous_at_of_monotone</span> <span class="o">(</span><span class="n">continuous_mul_left</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">continuous_at</span>
      <span class="o">(</span><span class="n">monotone_mul_left_of_nonneg</span> <span class="n">ha</span><span class="o">)</span> <span class="n">hs</span> <span class="n">h</span>
    <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Sup_of_not_bdd_above</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">],</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">cSup_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">Sup_of_not_bdd_above</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_above_smul_iff_of_pos</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">Inf_smul</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Inf</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">Inf</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">set.smul_set_empty</span><span class="o">,</span> <span class="n">real.Inf_empty</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">set.image_smul</span><span class="o">,</span> <span class="n">eq_comm</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">map_cInf_of_continuous_at_of_monotone</span> <span class="o">(</span><span class="n">continuous_mul_left</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">continuous_at</span>
      <span class="o">(</span><span class="n">monotone_mul_left_of_nonneg</span> <span class="n">ha</span><span class="o">)</span> <span class="n">hs</span> <span class="n">h</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Inf_of_not_bdd_below</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">],</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">cInf_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">refine</span> <span class="n">real.Inf_of_not_bdd_below</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">H</span><span class="o">,</span> <span class="n">h</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">Inf_of_not_bdd_below</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_below_smul_iff_of_pos</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>



<a name="252458060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/252458060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#252458060">(Sep 08 2021 at 13:22)</a>:</h4>
<p>Those should generalize to a smul on each side</p>



<a name="252458189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/252458189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#252458189">(Sep 08 2021 at 13:23)</a>:</h4>
<p>(or at least, to the action by <code>nnreal</code>)</p>



<a name="252458408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/252458408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#252458408">(Sep 08 2021 at 13:24)</a>:</h4>
<p>Sure, yeah. But where? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="253350150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253350150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253350150">(Sep 15 2021 at 01:40)</a>:</h4>
<p>You can prove it using <a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.map_cSup">docs#order_iso.map_cSup</a> instead of continuity.</p>



<a name="253350175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253350175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253350175">(Sep 15 2021 at 01:40)</a>:</h4>
<p>If <code>0 &lt; a</code>, then multiplication by <code>a</code> is an <code>order_iso</code>.</p>



<a name="253370485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253370485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253370485">(Sep 15 2021 at 06:54)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.mul_left'">docs#order_iso.mul_left'</a></p>



<a name="253370581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253370581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253370581">(Sep 15 2021 at 06:55)</a>:</h4>
<p>Ah so what we're missing is order-reversing isomorphisms?</p>



<a name="253370866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253370866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253370866">(Sep 15 2021 at 06:58)</a>:</h4>
<p>You don't need that for the above, right?</p>



<a name="253370939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253370939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253370939">(Sep 15 2021 at 06:59)</a>:</h4>
<p>No but I do for the <code>a ≤ 0</code> versions. I guess I won't care because I don't need them now.</p>



<a name="253371107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253371107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253371107">(Sep 15 2021 at 07:01)</a>:</h4>
<p>I guess we could have <code>mul_left'' (a &lt; 0) : α ≃o order_dual α</code></p>



<a name="253371241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253371241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253371241">(Sep 15 2021 at 07:02)</a>:</h4>
<p>Yeah, but that's a bit hacky and follows suit of what I'm trying to avoid by defining antitone functions.</p>



<a name="253780908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253780908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253780908">(Sep 17 2021 at 17:49)</a>:</h4>
<p>Advice: don't try to do 2 large refactors at once.</p>



<a name="253780922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253780922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253780922">(Sep 17 2021 at 17:49)</a>:</h4>
<p>(I tried several times, failed)</p>



<a name="253781098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781098">(Sep 17 2021 at 17:51)</a>:</h4>
<p>Another way is to use <code>Inf (-s) = - Inf s</code></p>



<a name="253781298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781298">(Sep 17 2021 at 17:52)</a>:</h4>
<p>BTW, I'm going to add a more general versions of these lemmas.</p>



<a name="253781434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781434">(Sep 17 2021 at 17:53)</a>:</h4>
<p>My plan is to define <code>conditionally_complete_lattice_default α (d : out_param α)</code> with additional axioms <code>Sup ∅ = d</code>, <code>Inf ∅ = d</code> and similarly for unbounded sets.</p>



<a name="253781545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781545">(Sep 17 2021 at 17:54)</a>:</h4>
<p>Then prove your lemmas (and a few others) for the case <code>d = 0</code>.</p>



<a name="253781675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781675">(Sep 17 2021 at 17:55)</a>:</h4>
<p>I've started in <a href="https://github.com/leanprover-community/mathlib/tree/ccl-Sup">branch#ccl-Sup</a> (I tried a different approach first, there are still traces of the old approach).</p>



<a name="253781723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253781723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253781723">(Sep 17 2021 at 17:55)</a>:</h4>
<p>/me is away for 2-3 hrs.</p>



<a name="253785316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253785316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253785316">(Sep 17 2021 at 18:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set/near/253781434">said</a>:</p>
<blockquote>
<p>My plan is to define <code>conditionally_complete_lattice_default α (d : out_param α)</code> with additional axioms <code>Sup ∅ = d</code>, <code>Inf ∅ = d</code> and similarly for unbounded sets.</p>
</blockquote>
<p>That great! I had that in mind too. Then many more ℝ-specific lemmas will be gone.</p>



<a name="253788201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253788201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253788201">(Sep 17 2021 at 18:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set/near/253780908">said</a>:</p>
<blockquote>
<p>Advice: don't try to do 2 large refactors at once.</p>
</blockquote>
<p>I think it's going fine! Defining <code>antitone</code> isn't really a refactor at all.</p>



<a name="253790919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253790919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253790919">(Sep 17 2021 at 18:58)</a>:</h4>
<p>I meant, don't try to refactor two related things at once (e.g., you start refactoring A, and in the middle of this you decide to refactor B as well).</p>



<a name="253790948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253790948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253790948">(Sep 17 2021 at 18:59)</a>:</h4>
<p>Sorry for bad wording.</p>



<a name="253791282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253791282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253791282">(Sep 17 2021 at 19:01)</a>:</h4>
<p>Oh yes, sure. Generalizing <code>finset.center_mass</code> away from ℝ isn't much. Do you still think I shouldn't do both at once?</p>



<a name="253792518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253792518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253792518">(Sep 17 2021 at 19:07)</a>:</h4>
<p>I think that you will find your way. Different people are good/bad at different things.</p>



<a name="253792664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253792664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253792664">(Sep 17 2021 at 19:08)</a>:</h4>
<p>If you'll see that you're refactoring too much in one branch, you can cherry-pick parts of the diff to a new branch.</p>



<a name="253792739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253792739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253792739">(Sep 17 2021 at 19:08)</a>:</h4>
<p>I know how to quickly do it with <code>magit</code>, probably other git GUIs can help with it too.</p>



<a name="253799006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253799006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253799006">(Sep 17 2021 at 19:57)</a>:</h4>
<p>Problem is, I've never worked with <code>finsupp</code>. So your words are probably wise.</p>



<a name="253799051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253799051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253799051">(Sep 17 2021 at 19:57)</a>:</h4>
<p>I'll already rename it, change the order of the arguments and kill ℝ.</p>



<a name="253811748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253811748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253811748">(Sep 17 2021 at 21:45)</a>:</h4>
<p>Runaway refactors are a great tool to teach you how to use git effectively to manage your own work!</p>



<a name="253871343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253871343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253871343">(Sep 18 2021 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set/near/253350150">said</a>:</p>
<blockquote>
<p>You can prove it using <a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.map_cSup">docs#order_iso.map_cSup</a> instead of continuity.</p>
</blockquote>
<p>Can you expand? I didn't manage.</p>



<a name="253871464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253871464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253871464">(Sep 18 2021 at 14:15)</a>:</h4>
<p>What I tried was</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.module.ordered</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_field</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ordered_add_comm_group</span> <span class="n">β</span><span class="o">]</span>

<span class="kd">@[simps]</span> <span class="kd">def</span> <span class="n">order_iso.smul_left</span> <span class="o">[</span><span class="n">mul_action_with_zero</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">ordered_smul</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">≃</span><span class="n">o</span> <span class="n">β</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">•</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="n">inv_smul_smul'</span> <span class="n">ha.ne'</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="n">smul_inv_smul'</span> <span class="n">ha.ne'</span><span class="o">,</span>
  <span class="n">map_rel_iff'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">b₁</span> <span class="n">b₂</span><span class="o">,</span> <span class="n">smul_le_smul_iff_of_pos</span> <span class="n">ha</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">real.Inf_smul_of_nonneg</span> <span class="o">[</span><span class="n">module</span> <span class="n">α</span> <span class="n">ℝ</span><span class="o">]</span> <span class="o">[</span><span class="n">ordered_smul</span> <span class="n">α</span> <span class="n">ℝ</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Inf</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">Inf</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_set_empty</span><span class="o">,</span> <span class="n">real.Inf_empty</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span> <span class="n">zero_smul</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">cInf_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">order_iso.smul_left_apply</span> <span class="n">_</span> <span class="n">ha'</span><span class="o">,</span> <span class="o">(</span><span class="n">order_iso.smul_left</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="n">map_cInf</span> <span class="n">hs</span> <span class="n">h</span><span class="o">],</span>
    <span class="gr">sorry</span>
    <span class="o">},</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="253872041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253872041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253872041">(Sep 18 2021 at 14:26)</a>:</h4>
<p>Do we have anything about the <code>cInf</code> of a subtype? It would be a generalization of <a href="https://leanprover-community.github.io/mathlib_docs/find/infi_subtype">docs#infi_subtype</a></p>



<a name="253886712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/253886712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#253886712">(Sep 18 2021 at 18:53)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/Inf_eq_infi'">docs#Inf_eq_infi'</a> only depends on <code>has_Inf</code></p>



<a name="257493357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/257493357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#257493357">(Oct 14 2021 at 07:46)</a>:</h4>
<p>So, I've generalized the lemmas, but I still don't know where to put them.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.pointwise</span>
<span class="kn">import</span> <span class="n">algebra.module.ordered</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kn">open</span> <span class="n">set</span>
<span class="n">open_locale</span> <span class="n">pointwise</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_field</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">α</span> <span class="n">ℝ</span><span class="o">]</span> <span class="o">[</span><span class="n">ordered_smul</span> <span class="n">α</span> <span class="n">ℝ</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">real.Inf_smul_of_nonneg</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Inf</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">Inf</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_set_empty</span><span class="o">,</span> <span class="n">real.Inf_empty</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span> <span class="n">zero_smul</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">cInf_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="bp">←</span><span class="n">order_iso.smul_left_apply</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">((</span><span class="n">order_iso.smul_left</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="n">map_cInf'</span> <span class="n">hs</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.Inf_of_not_bdd_below</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_below_smul_iff_of_pos</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">),</span>
      <span class="n">real.Inf_of_not_bdd_below</span> <span class="n">h</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">real.Sup_smul_of_nonneg</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Sup</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">Sup</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_set_empty</span><span class="o">,</span> <span class="n">real.Sup_empty</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span> <span class="n">zero_smul</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">cSup_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">order_iso.smul_left_apply</span> <span class="n">_</span> <span class="n">ha'</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">((</span><span class="n">order_iso.smul_left</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="n">map_cSup'</span> <span class="n">hs</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.Sup_of_not_bdd_above</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_above_smul_iff_of_pos</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">),</span>
      <span class="n">real.Sup_of_not_bdd_above</span> <span class="n">h</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">real.Inf_smul_of_nonpos</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Inf</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">Sup</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_set_empty</span><span class="o">,</span> <span class="n">real.Inf_empty</span><span class="o">,</span> <span class="n">real.Sup_empty</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span> <span class="n">zero_smul</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">cInf_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">order_iso.smul_left_dual_apply</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">((</span><span class="n">order_iso.smul_left_dual</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="n">map_cInf'</span> <span class="n">hs</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.Inf_of_not_bdd_below</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_below_smul_iff_of_neg</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">),</span>
      <span class="n">real.Sup_of_not_bdd_above</span> <span class="n">h</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">real.Sup_smul_of_nonpos</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Sup</span> <span class="o">(</span><span class="n">a</span> <span class="bp">•</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">•</span> <span class="n">Inf</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hs</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_set_empty</span><span class="o">,</span> <span class="n">real.Sup_empty</span><span class="o">,</span> <span class="n">real.Inf_empty</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">ha'</span> <span class="o">:=</span> <span class="n">ha.eq_or_lt</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_smul_set</span> <span class="n">hs</span><span class="o">,</span> <span class="n">zero_smul</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">cSup_singleton</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">order_iso.smul_left_dual_apply</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">((</span><span class="n">order_iso.smul_left_dual</span> <span class="n">ℝ</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="n">map_cSup'</span> <span class="n">hs</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.Sup_of_not_bdd_above</span> <span class="o">(</span><span class="n">mt</span> <span class="o">(</span><span class="n">bdd_above_smul_iff_of_neg</span> <span class="n">ha'</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">),</span>
      <span class="n">real.Inf_of_not_bdd_below</span> <span class="n">h</span><span class="o">,</span> <span class="n">smul_zero</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="257493439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/257493439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#257493439">(Oct 14 2021 at 07:47)</a>:</h4>
<p>I couldn't find any file that had this combination of imports yet (but I did it manually so I might be wrong). What about I create a new file <code>data.real.pointwise</code> or <code>data.real.smul</code>?</p>



<a name="257498444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/257498444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#257498444">(Oct 14 2021 at 08:30)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9707">#9707</a></p>



<a name="257499025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Inf%20and%20Sup%20of%20smul%20of%20a%20set/near/257499025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Inf.20and.20Sup.20of.20smul.20of.20a.20set.html#257499025">(Oct 14 2021 at 08:33)</a>:</h4>
<p>Hopefully the final PR before the Minkowski functional one!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>