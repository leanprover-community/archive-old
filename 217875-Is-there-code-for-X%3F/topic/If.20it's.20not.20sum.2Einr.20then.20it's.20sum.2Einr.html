---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html">If it's not sum.inr then it's sum.inr</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="219651009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651009">(Dec 11 2020 at 19:28)</a>:</h4>
<p>Is there a better way to state <code>∀ i, ¬∃ (i' : α), sum.inl i' = i → ∃ (i' : α), sum.inr i' = i</code>?</p>



<a name="219651031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651031">(Dec 11 2020 at 19:29)</a>:</h4>
<p>(it's obviously an <code>iff</code>, but I only need that direction)</p>



<a name="219651202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651202">(Dec 11 2020 at 19:30)</a>:</h4>
<p>probably using <code>or</code> (and more parentheses)</p>



<a name="219651207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651207">(Dec 11 2020 at 19:30)</a>:</h4>
<p>and a lemma on <code>or</code></p>



<a name="219651409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651409">(Dec 11 2020 at 19:32)</a>:</h4>
<p>To un-xy, I want to split a sum over <code>x</code> into the cases when <code>f x</code> is <code>sum.inl x'</code> and <code>sum.inr x'</code></p>



<a name="219651480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651480">(Dec 11 2020 at 19:33)</a>:</h4>
<p><code>cases f x</code> doesn't work?</p>



<a name="219651523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651523">(Dec 11 2020 at 19:33)</a>:</h4>
<p>And right now I do it by inserting <code>if ( ∃ (i' : α), sum.inl i' = f i) then g x else g x</code> then using <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_ite">docs#finset.sum_ite</a></p>



<a name="219651640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651640">(Dec 11 2020 at 19:34)</a>:</h4>
<p>If I used sum.elim, then I'd need a different finset lemma</p>



<a name="219651750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651750">(Dec 11 2020 at 19:35)</a>:</h4>
<p>Oh, I'm looking for that "make conjunction/disjunction of inductive" command, I think?</p>



<a name="219651860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651860">(Dec 11 2020 at 19:36)</a>:</h4>
<p>hmm is that the only lemma with a sum of two sums on the right?</p>



<a name="219651886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651886">(Dec 11 2020 at 19:37)</a>:</h4>
<p><code>(∃ b : β, f x = sum.inl b) ∨ (∃ c : γ, f x = sum.inr c) </code>?</p>



<a name="219651906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651906">(Dec 11 2020 at 19:37)</a>:</h4>
<p>How about <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_sum_elim">docs#finset.sum_sum_elim</a></p>



<a name="219651966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219651966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219651966">(Dec 11 2020 at 19:37)</a>:</h4>
<p>this also might not be ideally stated</p>



<a name="219652020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219652020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219652020">(Dec 11 2020 at 19:38)</a>:</h4>
<p>Oh that would be perfect. Whoops. I assumed it would be more general so I could use it on arbitrary enum-like typee</p>



<a name="219652067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219652067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219652067">(Dec 11 2020 at 19:38)</a>:</h4>
<p>It would be nice if it just had <code>h x</code> on the left, and <code>h (sum.inl x)</code> and <code>h (sum.inr x)</code> on the right</p>



<a name="219652098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219652098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219652098">(Dec 11 2020 at 19:39)</a>:</h4>
<p>Yeah, you're right that the current statement isn't enough for me</p>



<a name="219652300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219652300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219652300">(Dec 11 2020 at 19:40)</a>:</h4>
<p>Is there a version of <code>mk_iff_of_inductive_prop</code> that works for data and produces existentials?</p>



<a name="219658605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219658605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219658605">(Dec 11 2020 at 20:35)</a>:</h4>
<p>Coming back to this with lean accessible - the best statement I can come up with is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">γ</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">δ</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">⊕</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">δ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">),</span> <span class="n">g</span> <span class="n">i</span> <span class="bp">=</span> <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.univ.filter</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">i'</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">sum.inl</span> <span class="n">i'</span><span class="o">),</span> <span class="n">g</span> <span class="n">i</span> <span class="bp">*</span>
                   <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.univ.filter</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">i'</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">sum.inr</span> <span class="n">i'</span><span class="o">),</span> <span class="n">g</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>
<p>or for a more general case</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">γ</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">δ</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">⊕</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">δ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">δ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span>
                   <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="n">i'</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">sum.inl</span> <span class="n">i'</span><span class="o">}),</span> <span class="n">g</span> <span class="n">i</span> <span class="o">(</span><span class="n">classical.some</span> <span class="n">i.prop</span><span class="o">)</span> <span class="bp">*</span>
                   <span class="bp">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="n">i'</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">sum.inr</span> <span class="n">i'</span><span class="o">}),</span> <span class="n">h</span> <span class="n">i</span> <span class="o">(</span><span class="n">classical.some</span> <span class="n">i.prop</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>
<p>Can you think of a better theorem statement?</p>



<a name="219659125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659125">(Dec 11 2020 at 20:39)</a>:</h4>
<p>the first one is just a special case of product over a disjoint union right?</p>



<a name="219659138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659138">(Dec 11 2020 at 20:39)</a>:</h4>
<p>These right-hand sides look pretty unpleasant</p>



<a name="219659228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659228">(Dec 11 2020 at 20:40)</a>:</h4>
<p>Yes, it is - do we have a lemma for that already?</p>



<a name="219659288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659288">(Dec 11 2020 at 20:41)</a>:</h4>
<p>surely, but I don't think it really helps you</p>



<a name="219659355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659355">(Dec 11 2020 at 20:41)</a>:</h4>
<p>Because it's not making progress overall</p>



<a name="219659372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219659372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219659372">(Dec 11 2020 at 20:41)</a>:</h4>
<p>I think you want the variation of <code>sum_sum_elim</code> I suggested earlier</p>



<a name="219660438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219660438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219660438">(Dec 11 2020 at 20:51)</a>:</h4>
<p>The difficulty is I'm not splitting over the summand, I'm splitting over some function of it</p>



<a name="219660637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219660637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219660637">(Dec 11 2020 at 20:53)</a>:</h4>
<p>Oh I missed that</p>



<a name="219661116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219661116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219661116">(Dec 11 2020 at 20:56)</a>:</h4>
<p>I don't know, this is too abstract I think</p>



<a name="219661188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219661188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219661188">(Dec 11 2020 at 20:57)</a>:</h4>
<p>I mean a lemma only helps if the new expression is actually easier to deal with</p>



<a name="219661364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219661364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219661364">(Dec 11 2020 at 20:58)</a>:</h4>
<p>There must be some reason why knowing what side <code>f i</code> is in helps you evaluate the sum</p>



<a name="219661378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219661378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219661378">(Dec 11 2020 at 20:59)</a>:</h4>
<p>and that reason will determine what kind of lemma you need</p>



<a name="219661422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219661422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219661422">(Dec 11 2020 at 20:59)</a>:</h4>
<p>but in general, there's <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_union">docs#finset.sum_union</a> <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="219662079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219662079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219662079">(Dec 11 2020 at 21:04)</a>:</h4>
<p>Perhaps I should just push forward with what I have, and ask again once I have a working proof</p>



<a name="219705631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705631">(Dec 12 2020 at 12:08)</a>:</h4>
<p>You were right, I didn't need this</p>



<a name="219705672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705672">(Dec 12 2020 at 12:09)</a>:</h4>
<p>This looks like <code>cases e : f x</code></p>



<a name="219705726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705726">(Dec 12 2020 at 12:10)</a>:</h4>
<p>Indeed - although I thought I need to split the sum before I had <code>x</code>  available</p>



<a name="219705747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705747">(Dec 12 2020 at 12:11)</a>:</h4>
<p>so like <code>list.partition</code> then?</p>



<a name="219705814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705814">(Dec 12 2020 at 12:12)</a>:</h4>
<p>Well, except on a finset</p>



<a name="219705832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705832">(Dec 12 2020 at 12:13)</a>:</h4>
<p>there is a theorem about partitioning a finset using <code>finset.filter</code></p>



<a name="219705907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705907">(Dec 12 2020 at 12:14)</a>:</h4>
<p>I think the problem needs some more un-#xy</p>



<a name="219705973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/If%20it%27s%20not%20sum.inr%20then%20it%27s%20sum.inr/near/219705973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/If.20it's.20not.20sum.2Einr.20then.20it's.20sum.2Einr.html#219705973">(Dec 12 2020 at 12:16)</a>:</h4>
<p>I got what I needed with something completely different (in <a href="https://github.com/leanprover-community/mathlib/issues/5269">#5269</a>, <a href="https://github.com/leanprover-community/mathlib/blob/f91f9c3f2b33a82c870be8e8e496c85b1ab823c1/src/linear_algebra/alternating.lean#L590">alternating.lean:590</a>, with by_cases). The PR hasn't been cleaned up yet, but once it has been I'd appreciate suggestions for shortening the proof</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>