---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html">Completeness of padics</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273940655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273940655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273940655">(Mar 03 2022 at 08:46)</a>:</h4>
<p>I can't find the instance that <code>ℚ_[p]</code> is a complete metric space -- there are many related things, but I can't find this precise one. Is it really missing?</p>



<a name="273941635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273941635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273941635">(Mar 03 2022 at 08:55)</a>:</h4>
<p>It is defined as a completion, right? So that would be very surprising</p>



<a name="273941810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273941810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273941810">(Mar 03 2022 at 08:56)</a>:</h4>
<p>Aah, we have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">complete</span> <span class="o">:</span> <span class="n">cau_seq.is_complete</span> <span class="n">ℚ_</span><span class="o">[</span><span class="n">p</span><span class="o">]</span> <span class="n">norm</span> <span class="o">:=</span>
</code></pre></div>



<a name="273941869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273941869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273941869">(Mar 03 2022 at 08:56)</a>:</h4>
<p>This is not what Sébastien is looking for</p>



<a name="273941942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273941942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273941942">(Mar 03 2022 at 08:57)</a>:</h4>
<p>The issue is that this completion is defined by hand using Cauchy sequences of rationals, not through the general machinery of uniform spaces (or even metric spaces).</p>



<a name="273942194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942194">(Mar 03 2022 at 08:59)</a>:</h4>
<p>You need some glue like in <a href="https://leanprover-community.github.io/mathlib_docs/find/real.complete_space">docs#real.complete_space</a></p>



<a name="273942248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942248">(Mar 03 2022 at 09:00)</a>:</h4>
<p>Hopefully there is the correspondance between the two notions somewhere in  mathlib. I'm just surprised that the instance does not seem to be here.</p>



<a name="273942253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942253">(Mar 03 2022 at 09:00)</a>:</h4>
<p>Maybe it hasn't been written for p-adics</p>



<a name="273942257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942257">(Mar 03 2022 at 09:00)</a>:</h4>
<p>Yes, we clearly need to show that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="double-struck">Q</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb Q_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.975em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathbb">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> admits an "abstract completion package"</p>



<a name="273942551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942551">(Mar 03 2022 at 09:01)</a>:</h4>
<p>That instance for real makes me pessimistic that the p-adic version exists. Otherwise we would have a generalization covering both.</p>



<a name="273942732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942732">(Mar 03 2022 at 09:02)</a>:</h4>
<p>And as Johan wrote, you can also go through the route in <code>topology.uniform_space.compare_real</code></p>



<a name="273942766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942766">(Mar 03 2022 at 09:03)</a>:</h4>
<p>It's not that I'm interested in padics :-), but this would have been a nice example for my talk of today in Lorentz center. I'll pick another one, then.</p>



<a name="273942979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273942979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273942979">(Mar 03 2022 at 09:05)</a>:</h4>
<p>When is that talk?</p>



<a name="273943068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273943068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273943068">(Mar 03 2022 at 09:06)</a>:</h4>
<p>And I must admit I was curious to read how you realized that you need completeness of p-adics to prove a proper version of the change of variable formula.</p>



<a name="273943105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273943105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273943105">(Mar 03 2022 at 09:06)</a>:</h4>
<p>2:30<br>
:-)</p>



<a name="273943170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273943170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273943170">(Mar 03 2022 at 09:07)</a>:</h4>
<p>Without bors taking ages this would be fine.</p>



<a name="273943195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273943195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273943195">(Mar 03 2022 at 09:07)</a>:</h4>
<p>I'll try something anyway, but I can't do it right now.</p>



<a name="273944083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273944083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273944083">(Mar 03 2022 at 09:16)</a>:</h4>
<p>I'll be in a particular branch anyway. And I really don't need this, it's just that I wanted to share my surprise it's not there.</p>



<a name="273944297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273944297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273944297">(Mar 03 2022 at 09:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Completeness.20of.20padics/near/273943068">said</a>:</p>
<blockquote>
<p>And I must admit I was curious to read how you realized that you need completeness of p-adics to prove a proper version of the change of variable formula.</p>
</blockquote>
<p>The proper version of the change of variable formula is ready (<a href="https://github.com/leanprover-community/mathlib/blob/b472a7d1eb4134b907c913b67a889bcefc131da5/src/measure_theory/function/jacobian.lean#L1255">https://github.com/leanprover-community/mathlib/blob/b472a7d1eb4134b907c913b67a889bcefc131da5/src/measure_theory/function/jacobian.lean#L1255</a>), and does not use padics. Not clear how long it takes to get in mathlib, though, because <a href="https://github.com/leanprover-community/mathlib/pull/12220">#12220</a> is already hard to get in...</p>



<a name="273946231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273946231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273946231">(Mar 03 2022 at 09:34)</a>:</h4>
<p>The issue is deeper than completion. Even the metric space structure is done in an ad-hoc way for reals and padics</p>



<a name="273946954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273946954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273946954">(Mar 03 2022 at 09:41)</a>:</h4>
<p>And I need to go so I probably won't have time to fix this before your talk</p>



<a name="273950089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273950089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273950089">(Mar 03 2022 at 10:06)</a>:</h4>
<p>I had a bit more time in the end so I gave up and duplicated the ad hoc code we have for real. See <a href="https://github.com/leanprover-community/mathlib/pull/12424">#12424</a></p>



<a name="273950126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273950126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273950126">(Mar 03 2022 at 10:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span></p>



<a name="273958544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/273958544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#273958544">(Mar 03 2022 at 11:26)</a>:</h4>
<p>Bors failed with </p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code> Error: /home/lean/actions-runner/_work/mathlib/mathlib/src/algebraic_topology/simplex_category.lean:1:0:
file <span class="s1">'category_theory/reflects_isomorphisms'</span> not found <span class="k">in</span> the search path
</code></pre></div>
<p>I claim this has nothing to do with my change...</p>



<a name="274041314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Completeness%20of%20padics/near/274041314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Completeness.20of.20padics.html#274041314">(Mar 03 2022 at 21:17)</a>:</h4>
<p>Next PR on the road to the change of variables formula is ready, in <a href="https://github.com/leanprover-community/mathlib/pull/12437">#12437</a>. Unfortunately again a little bit longish, and mathematically a little bit exotic, unless you're into Polish spaces and tweaking topologies on a given type.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>