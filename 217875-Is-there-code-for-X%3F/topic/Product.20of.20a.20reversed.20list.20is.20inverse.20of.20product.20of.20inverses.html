---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html">Product of a reversed list is inverse of product of inverses</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214159820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214159820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214159820">(Oct 22 2020 at 08:58)</a>:</h4>
<p><del>I'm pretty sure this lemma is true modulo typos:</del> (proven)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[to_additive]</span>
<span class="kd">lemma</span> <span class="n">prod_reverse</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">l.reverse.prod</span> <span class="bp">=</span> <span class="o">(</span><span class="n">l.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">))</span><span class="bp">.</span><span class="n">prod</span><span class="bp">⁻¹</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">prod_reverse</span> <span class="n">xs</span><span class="o">]</span>
</code></pre></div>

<p>Does this exist anywhere?</p>



<a name="214173788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214173788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214173788">(Oct 22 2020 at 11:33)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/4738">#4738</a></p>



<a name="214194787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214194787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214194787">(Oct 22 2020 at 14:28)</a>:</h4>
<p>That PR adds</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prod_inv_reverse</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">L.prod</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="o">(</span><span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">))</span><span class="bp">.</span><span class="n">reverse.prod</span>
</code></pre></div>

<p>However, I've realized I still want the original in this thread,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">what</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">l.reverse.prod</span> <span class="bp">=</span> <span class="o">(</span><span class="n">l.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">))</span><span class="bp">.</span><span class="n">prod</span><span class="bp">⁻¹</span>
</code></pre></div>

<p>What should this second lemma be called?</p>



<a name="214195107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214195107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214195107">(Oct 22 2020 at 14:30)</a>:</h4>
<p>I think <code>prod_reverse</code> is a fine name</p>



<a name="214195174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214195174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214195174">(Oct 22 2020 at 14:31)</a>:</h4>
<p>Is there another right hand side that a lemma of that name could have?</p>



<a name="214196724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214196724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214196724">(Oct 22 2020 at 14:41)</a>:</h4>
<p>prod_reverse could be for a version with <code>comm_group</code> that says <code>l.prod = l.reverse.prod</code></p>



<a name="214196785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214196785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214196785">(Oct 22 2020 at 14:41)</a>:</h4>
<p><code>prod_reverse_noncomm</code>?</p>



<a name="214196878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214196878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214196878">(Oct 22 2020 at 14:42)</a>:</h4>
<p>or it could also be <code>prod_reverse_eq_inv_prod_inv</code> or something</p>



<a name="214196887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214196887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214196887">(Oct 22 2020 at 14:42)</a>:</h4>
<p>For my <code>what</code> lemma, you mean?</p>



<a name="214196927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214196927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214196927">(Oct 22 2020 at 14:42)</a>:</h4>
<p>Yes</p>



<a name="214197005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214197005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214197005">(Oct 22 2020 at 14:43)</a>:</h4>
<p><code>prod_reverse_noncomm</code> seems reasonable, and I could add <code>prod_reverse</code> in the same PR</p>



<a name="214198961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214198961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214198961">(Oct 22 2020 at 14:56)</a>:</h4>
<p>What about <code>prod_inv</code> (for a name). cf. <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_inv">docs#mul_inv</a></p>



<a name="214199056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214199056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214199056">(Oct 22 2020 at 14:57)</a>:</h4>
<p><del>Or <code>list_mul_inv</code> if there's a concern about name conflicts when the list namespace is open.</del></p>



<a name="214199400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214199400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214199400">(Oct 22 2020 at 14:59)</a>:</h4>
<p>Wait, I thought there was a version of <code>mul_inv</code>for noncommutative groups.</p>



<a name="214199506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214199506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214199506">(Oct 22 2020 at 15:00)</a>:</h4>
<p>Oh, it's called <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_inv_rev">docs#mul_inv_rev</a></p>



<a name="214199600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214199600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214199600">(Oct 22 2020 at 15:01)</a>:</h4>
<p>So I think <code>prod_inv_reverse</code> should be called <code>prod_inv_rev</code>.</p>



<a name="214199904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214199904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214199904">(Oct 22 2020 at 15:03)</a>:</h4>
<p>Is there an analogue of <code>what</code> for a product of two elements?</p>



<a name="214200338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200338">(Oct 22 2020 at 15:05)</a>:</h4>
<p>In Leiden it would be called <code>socks_and_shoes</code></p>



<a name="214200432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200432">(Oct 22 2020 at 15:06)</a>:</h4>
<p>Because, well, if you first put on your socks, and then your shoes, you should remove them in the reverse order.</p>



<a name="214200453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200453">(Oct 22 2020 at 15:06)</a>:</h4>
<blockquote>
<p>So I think prod_inv_reverse should be called prod_inv_rev.</p>
</blockquote>
<p>I went for <code>reverse</code> so it contained the function name - but I made sure to include <code>mul_inv_rev</code> in the docstring</p>



<a name="214200495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200495">(Oct 22 2020 at 15:06)</a>:</h4>
<blockquote>
<p>Is there an analogue of what for a product of two elements?</p>
</blockquote>
<p>No, which surprised me - we don't seem to have <code>(a⁻¹ * b⁻¹)⁻¹ = b * a</code> or the reverse</p>



<a name="214200531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200531">(Oct 22 2020 at 15:07)</a>:</h4>
<p>So in the first year algebra course the lemma <code>(x * y) \inv = y \inv * x \inv</code> has this funny name <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="214200597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200597">(Oct 22 2020 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses/near/214200495">said</a>:</p>
<blockquote>
<blockquote>
<p>Is there an analogue of what for a product of two elements?</p>
</blockquote>
<p>No, which surprised me - we don't seem to have <code>(a⁻¹ * b⁻¹)⁻¹ = b * a</code></p>
</blockquote>
<p>I think <code>by simp</code> would solve this.</p>



<a name="214200674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200674">(Oct 22 2020 at 15:08)</a>:</h4>
<p>Yes, it would</p>



<a name="214200681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200681">(Oct 22 2020 at 15:08)</a>:</h4>
<p>because of the <code>mul_inv_rev</code> and <code>inv_inv</code> lemmas</p>



<a name="214200721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200721">(Oct 22 2020 at 15:08)</a>:</h4>
<p>But perhaps a lemma is still useful so it can be referred to by name?</p>



<a name="214200765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200765">(Oct 22 2020 at 15:08)</a>:</h4>
<p>Maybe, but surely it shouldn't be a simp lemma.</p>



<a name="214200798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200798">(Oct 22 2020 at 15:09)</a>:</h4>
<p>Oh for sure it shouldn't be <code>simp</code></p>



<a name="214200895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214200895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214200895">(Oct 22 2020 at 15:09)</a>:</h4>
<p>I'm just thinking of how I would actually use it in a proof, and I would always solve such things by simp, so I'm not sure I would ever actually use a lemma which says <code>(a⁻¹ * b⁻¹)⁻¹ = b * a</code>.</p>



<a name="214201190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214201190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214201190">(Oct 22 2020 at 15:11)</a>:</h4>
<p><code>socks_and_shoes</code> or <code>underwear_and_pants</code>?</p>



<a name="214202006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214202006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214202006">(Oct 22 2020 at 15:16)</a>:</h4>
<p>It's a little silly that simp doesn't solve the following </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">G</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- by simp doesn't solve this.</span>
</code></pre></div>



<a name="214202111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214202111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214202111">(Oct 22 2020 at 15:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">G</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">simp</span>
</code></pre></div>



<a name="214202266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214202266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214202266">(Oct 22 2020 at 15:18)</a>:</h4>
<p>Sure, but I would like to be able to make <code>prod_inv_reverse</code> into a simp lemma, and be able to solve <code>what</code> with <code>by simp</code>.</p>



<a name="214202840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214202840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214202840">(Oct 22 2020 at 15:23)</a>:</h4>
<p>there should be a <code>map_id'</code> lemma that helps simp solve statements like that</p>



<a name="214202865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214202865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214202865">(Oct 22 2020 at 15:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">G</span><span class="o">)</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">x</span><span class="bp">⁻¹⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">id</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">bar</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">id</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span>
</code></pre></div>



<a name="214203033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203033">(Oct 22 2020 at 15:24)</a>:</h4>
<p>I don't think <code>bar</code> can work as a simp lemma itself, it would cause too many other problems</p>



<a name="214203050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203050">(Oct 22 2020 at 15:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">G</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">tidy</span>
</code></pre></div>



<a name="214203069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203069">(Oct 22 2020 at 15:25)</a>:</h4>
<p><code>map_id'</code> just says <code>L.map (\lam x, x) = L</code></p>



<a name="214203093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203093">(Oct 22 2020 at 15:25)</a>:</h4>
<p>Oh okay.</p>



<a name="214203264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203264">(Oct 22 2020 at 15:26)</a>:</h4>
<p>Is there a tactic that's weaker than <code>tidy</code> which only does <code>ext</code> and <code>simp</code>?</p>



<a name="214203283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203283">(Oct 22 2020 at 15:26)</a>:</h4>
<p><code>ext; simp</code></p>



<a name="214203333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203333">(Oct 22 2020 at 15:26)</a>:</h4>
<p>What happens if you have to introduce more <code>ext</code> after a <code>simp</code>?</p>



<a name="214203360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203360">(Oct 22 2020 at 15:27)</a>:</h4>
<p><code>ext; simp; ext</code></p>



<a name="214203429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203429">(Oct 22 2020 at 15:27)</a>:</h4>
<p>actually I don't find it that often</p>



<a name="214203580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214203580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214203580">(Oct 22 2020 at 15:28)</a>:</h4>
<p>you can try using something like <code>simp [ext_iff]</code> but YMMV</p>



<a name="214204090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214204090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214204090">(Oct 22 2020 at 15:31)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/4744">#4744</a> helps a little with <code>example : L.map (λ x, x⁻¹⁻¹) = L := by simp</code>. At any rate, it suffices to solve <code>what</code> by <code>simp</code></p>



<a name="214315757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214315757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214315757">(Oct 23 2020 at 13:53)</a>:</h4>
<p>Turns out <a href="https://leanprover-community.github.io/mathlib_docs/find/list.prod_reverse">docs#list.prod_reverse</a> already exists!</p>



<a name="214316178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214316178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214316178">(Oct 23 2020 at 13:57)</a>:</h4>
<p>I think what's missing from that file, or from the general theory of permutations (which is somewhat scattered across mathlib across different areas of interest), is that a pairwise swap is a product of adjacent swaps.</p>



<a name="214316355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214316355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214316355">(Oct 23 2020 at 13:58)</a>:</h4>
<p>That's what I had originally set out to prove, and need this lemma for</p>



<a name="214317840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214317840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214317840">(Oct 23 2020 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> is the master at this sort of thing -- if it's there he'll know where it is :-) (because he will have put it there!)</p>



<a name="214318015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214318015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214318015">(Oct 23 2020 at 14:10)</a>:</h4>
<p>I haven't done that one, but it sounds like it would fall out of the work needed for the alternating group</p>



<a name="214318323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214318323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214318323">(Oct 23 2020 at 14:13)</a>:</h4>
<p>plus there is the question of how to phrase "adjacent" in appropriately general way</p>



<a name="214319532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319532">(Oct 23 2020 at 14:22)</a>:</h4>
<p>Maybe this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.perm.sign</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kn">open</span> <span class="n">equiv</span>

<span class="kd">theorem</span> <span class="n">foo</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">relation.refl_trans_gen</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">perm</span> <span class="n">α</span><span class="o">),</span> <span class="n">swap</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">l.prod</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">p</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">R</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">swap</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">_</span>
</code></pre></div>



<a name="214319595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319595">(Oct 23 2020 at 14:23)</a>:</h4>
<p>I think we already have that</p>



<a name="214319620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319620">(Oct 23 2020 at 14:23)</a>:</h4>
<p>It's the _adjacent_ swap theorem we don't have</p>



<a name="214319629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319629">(Oct 23 2020 at 14:23)</a>:</h4>
<p>That's what that is</p>



<a name="214319723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319723">(Oct 23 2020 at 14:24)</a>:</h4>
<p>Whoops, I missed <code>R a b</code> there. Is <a href="https://leanprover-community.github.io/mathlib_docs/find/relation.refl_trans_gen">docs#relation.refl_trans_gen</a> the magic there?</p>



<a name="214319794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319794">(Oct 23 2020 at 14:24)</a>:</h4>
<p>To get the result for adjacent swaps you have to supply <code>\lam x y, x = y + 1</code> as <code>R</code> and then prove that <code>refl_trans_gen R</code> holds for any two nats/fins or what have you</p>



<a name="214319891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214319891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214319891">(Oct 23 2020 at 14:25)</a>:</h4>
<p>Actually I guess it could use <code>eqv_gen</code>, since <code>swap</code> is commutative</p>



<a name="214320105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214320105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214320105">(Oct 23 2020 at 14:27)</a>:</h4>
<p>I suppose you could make that actually compute the list with <code>(next : α → α) (hr : relation.refl_trans_gen (fun x y, next x = y) x y)</code></p>



<a name="214320618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214320618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214320618">(Oct 23 2020 at 14:30)</a>:</h4>
<p>that's just a special case</p>



<a name="214320725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214320725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214320725">(Oct 23 2020 at 14:31)</a>:</h4>
<p>It's an existential even then because of <code>refl_trans_gen</code> which is a prop</p>



<a name="214320964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214320964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214320964">(Oct 23 2020 at 14:33)</a>:</h4>
<p>I'm not sure I agree with that - I was able to computably obtain the list in <a href="https://github.com/leanprover-community/mathlib/issues/4379">#4379</a> for when <code>α</code> is <code>nat</code>, and I think all I needed was <code>next</code> and a transitive relation</p>



<a name="214323137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214323137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214323137">(Oct 23 2020 at 14:49)</a>:</h4>
<p>You also need to know the length of the sequence</p>



<a name="214323241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214323241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214323241">(Oct 23 2020 at 14:50)</a>:</h4>
<p>which is possible on <code>nat</code> and similar things but amounts to the <code>enum</code> class that <span class="user-mention" data-user-id="238446">@Anne Baanen</span> proposed in the other thread</p>



<a name="214323484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214323484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214323484">(Oct 23 2020 at 14:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.perm.sign</span>

<span class="kn">namespace</span> <span class="n">list</span>
<span class="kn">section</span> <span class="n">group</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span>

<span class="sd">/-- This is the `list.prod` version of `mul_inv_rev` -/</span>
<span class="kd">@[to_additive "This is the `list.sum` version of `add_neg_rev`"]</span>
<span class="kd">lemma</span> <span class="n">prod_inv_reverse</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">L.prod</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="o">(</span><span class="n">L.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">))</span><span class="bp">.</span><span class="n">reverse.prod</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">prod_inv_reverse</span> <span class="n">xs</span><span class="o">]</span>

<span class="kd">end</span> <span class="n">group</span>
<span class="kd">end</span> <span class="n">list</span>

<span class="kn">open</span> <span class="n">equiv</span>

<span class="kd">theorem</span> <span class="n">foo</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">eqv_gen</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">perm</span> <span class="n">α</span><span class="o">),</span> <span class="n">swap</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">l.prod</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">p</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">R</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">swap</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">Hrefl</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">perm</span> <span class="n">α</span><span class="o">),</span>
    <span class="n">swap</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">l.prod</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">p</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">R</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">swap</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
    <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">⟨[],</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">swap_self</span><span class="o">]</span><span class="bp">;</span> <span class="n">refl</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rintro</span> <span class="n">_</span> <span class="o">⟨⟩⟩,</span>
  <span class="n">induction</span> <span class="n">hr</span><span class="o">,</span>
  <span class="n">case</span> <span class="n">rel</span> <span class="o">:</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hr</span> <span class="o">{</span>
    <span class="n">refine</span> <span class="o">⟨[</span><span class="n">swap</span> <span class="n">x</span> <span class="n">y</span><span class="o">],</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">forall_eq</span><span class="o">,</span> <span class="n">list.mem_singleton</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">hr</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">refl</span> <span class="o">:</span> <span class="n">x</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">Hrefl</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">symm</span> <span class="o">:</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hr</span> <span class="n">IH</span> <span class="o">{</span>
    <span class="n">obtain</span> <span class="o">⟨</span><span class="n">l</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">H</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">IH</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">⟨(</span><span class="n">l.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">))</span><span class="bp">.</span><span class="n">reverse</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">h</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">list.prod_inv_reverse</span><span class="o">,</span> <span class="bp">←</span> <span class="n">e</span><span class="o">,</span> <span class="n">swap_inv</span><span class="o">,</span> <span class="n">swap_comm</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">obtain</span> <span class="o">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">hp</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">obtain</span> <span class="o">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">hr</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">H</span> <span class="n">_</span> <span class="n">hp</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">hr</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">trans</span> <span class="o">:</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">hr₁</span> <span class="n">hr₂</span> <span class="n">IH₁</span> <span class="n">IH₂</span> <span class="o">{</span>
    <span class="n">obtain</span> <span class="o">⟨⟨</span><span class="n">l₁</span><span class="o">,</span> <span class="n">e₁</span><span class="o">,</span> <span class="n">H₁</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">l₂</span><span class="o">,</span> <span class="n">e₂</span><span class="o">,</span> <span class="n">H₂</span><span class="o">⟩⟩</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">IH₁</span><span class="o">,</span> <span class="n">IH₂</span><span class="o">⟩,</span>
    <span class="n">by_cases</span> <span class="n">zy</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span> <span class="n">subst</span> <span class="n">z</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">l₁</span><span class="o">,</span> <span class="n">e₁</span><span class="o">,</span> <span class="n">H₁</span><span class="o">⟩</span> <span class="o">},</span>
    <span class="n">by_cases</span> <span class="n">zx</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span> <span class="o">{</span> <span class="n">subst</span> <span class="n">z</span><span class="o">,</span> <span class="n">apply</span> <span class="n">Hrefl</span> <span class="o">},</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">l₁</span> <span class="bp">++</span> <span class="n">l₂</span> <span class="bp">++</span> <span class="n">l₁</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">h</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">swap_comm</span> <span class="n">at</span> <span class="n">e₁</span> <span class="n">e₂</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">list.prod_append</span><span class="o">,</span> <span class="n">list.prod_append</span><span class="o">,</span> <span class="bp">←</span> <span class="n">e₁</span><span class="o">,</span> <span class="bp">←</span> <span class="n">e₂</span><span class="o">,</span> <span class="n">perm.swap_mul_swap_mul_swap</span> <span class="n">zy</span> <span class="n">zx</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">or.right_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h.elim</span> <span class="o">(</span><span class="n">H₁</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">H₂</span> <span class="n">_</span><span class="o">)</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="214324409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214324409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214324409">(Oct 23 2020 at 15:00)</a>:</h4>
<p>I was looking for <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.perm.swap_mul_swap_mul_swap">docs#equiv.perm.swap_mul_swap_mul_swap</a>...</p>



<a name="214324593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214324593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214324593">(Oct 23 2020 at 15:01)</a>:</h4>
<p>it should be in <code>equiv.basic</code></p>



<a name="214324674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214324674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214324674">(Oct 23 2020 at 15:02)</a>:</h4>
<p>Or should <code>equiv.swap</code> be renamed to <code>equiv.perm.swap</code>?</p>



<a name="214324908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214324908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214324908">(Oct 23 2020 at 15:04)</a>:</h4>
<p>maybe? It is an equiv though</p>



<a name="214324984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214324984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214324984">(Oct 23 2020 at 15:05)</a>:</h4>
<p>Well, so are all perms</p>



<a name="214325063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Product%20of%20a%20reversed%20list%20is%20inverse%20of%20product%20of%20inverses/near/214325063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Product.20of.20a.20reversed.20list.20is.20inverse.20of.20product.20of.20inverses.html#214325063">(Oct 23 2020 at 15:06)</a>:</h4>
<p>And it's defined as <code>def swap (a b : α) : perm α</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>