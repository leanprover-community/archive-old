---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html">Real subX associated to a complex subX</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242652651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242652651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242652651">(Jun 14 2021 at 20:08)</a>:</h4>
<p>I am curious about whether mathlib has the infrastructure needed for one of <span class="user-mention" data-user-id="110087">@Scott Morrison</span>'s <a href="https://github.com/leanprover-community/mathlib/blob/master/src/topology/continuous_function/stone_weierstrass.lean#L33-35">TODOs</a> on Stone-Weierstrass, or whether it's still missing:</p>
<blockquote>
<p>Prove the complex version for self-adjoint subalgebras <code>A</code>, by separately approximating the real and imaginary parts using the real subalgebra of real-valued functions in <code>A</code> (which still separates points, by taking the norm-square of a separating function).</p>
</blockquote>
<p>Mathlib does know that a <code>ℂ</code>-vector space <code>E</code> is a <code>ℝ</code>-vector space: <a href="https://leanprover-community.github.io/mathlib_docs/find/module.complex_to_real">docs#module.complex_to_real</a>.  Moreover, any <code>ℂ</code>-submodule of <code>E</code> can also be considered as an <code>ℝ</code>-submodule of <code>E</code>: <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.restrict_scalars">docs#submodule.restrict_scalars</a>.</p>
<p>I don't see the corresponding results for algebras and subalgebras; are these indeed missing?</p>



<a name="242658656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242658656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242658656">(Jun 14 2021 at 21:02)</a>:</h4>
<p>Possibly <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.comap">docs#subalgebra.comap</a>?</p>



<a name="242658733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242658733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242658733">(Jun 14 2021 at 21:03)</a>:</h4>
<p>But that's not really as good as the submodule def</p>



<a name="242658802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242658802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242658802">(Jun 14 2021 at 21:04)</a>:</h4>
<p>I'm still kind of reeling from this observation that I should be comapping and not restricting scalars.</p>



<a name="242658847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242658847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242658847">(Jun 14 2021 at 21:04)</a>:</h4>
<p>Ah, thanks!  What is this <code>comap</code> business, and why do we do it for algebras but not for modules?  (According to <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.comap">docs#subalgebra.comap</a></p>
<blockquote>
<p><code>comap R S A</code> is a type alias for A, and has an R-algebra structure defined on it when <code>algebra R S</code> and <code>algebra S A</code>. If S is an R-algebra and A is an S-algebra then <code>algebra.comap.algebra R S A</code> can be used to provide A with a structure of an R-algebra. Other than that, <code>algebra.comap</code> is now deprecated and replaced with <code>is_scalar_tower</code>.</p>
</blockquote>



<a name="242658861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242658861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242658861">(Jun 14 2021 at 21:04)</a>:</h4>
<p>Don't confuse <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.comap">docs#subalgebra.comap</a> with <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgegra.comap'">docs#subalgegra.comap'</a>!</p>



<a name="242659253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659253">(Jun 14 2021 at 21:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.comap'">docs#subalgebra.comap'</a></p>



<a name="242659541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659541">(Jun 14 2021 at 21:11)</a>:</h4>
<p>So, for example, should I PR</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">algebra.complex_to_real</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">ring</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">ℂ</span> <span class="n">E</span><span class="o">]</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">ℝ</span> <span class="n">E</span> <span class="o">:=</span>
<span class="n">algebra.comap</span> <span class="n">ℝ</span> <span class="n">ℂ</span> <span class="n">E</span>
</code></pre></div>
<p>by analogy with <a href="https://leanprover-community.github.io/mathlib_docs/find/module.complex_to_real">docs#module.complex_to_real</a>?</p>



<a name="242659542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659542">(Jun 14 2021 at 21:11)</a>:</h4>
<p>I think <code>comap</code> is just a duplicate of <code>restrict_scalars</code></p>



<a name="242659591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659591">(Jun 14 2021 at 21:12)</a>:</h4>
<p>And we should eliminate it</p>



<a name="242659638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659638">(Jun 14 2021 at 21:12)</a>:</h4>
<p>Right, and it's frustrating because ideally it would be nice to have <code>comap</code> defeq to <code>restrict_scalars</code> when both exist.</p>



<a name="242659657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659657">(Jun 14 2021 at 21:13)</a>:</h4>
<p>I'm pretty sure that instance you suggest forms a loop</p>



<a name="242659677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659677">(Jun 14 2021 at 21:13)</a>:</h4>
<p>Since C is an algebra over anything R is an algebra over</p>



<a name="242659694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659694">(Jun 14 2021 at 21:13)</a>:</h4>
<p>Why does <a href="https://leanprover-community.github.io/mathlib_docs/find/module.complex_to_real">docs#module.complex_to_real</a> not form a loop then?</p>



<a name="242659696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659696">(Jun 14 2021 at 21:13)</a>:</h4>
<p>And usually instances construct typeclasses for big types from small ones</p>



<a name="242659822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659822">(Jun 14 2021 at 21:14)</a>:</h4>
<p>Nevermind, I misread the argument order</p>



<a name="242659852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659852">(Jun 14 2021 at 21:15)</a>:</h4>
<p>Can I just rename <code>comap</code> to <code>restrict_scalars</code>?</p>



<a name="242659871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659871">(Jun 14 2021 at 21:15)</a>:</h4>
<p>I think that's a good idea</p>



<a name="242659890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659890">(Jun 14 2021 at 21:15)</a>:</h4>
<p>And I think <span class="user-mention" data-user-id="240862">@Oliver Nash</span> did too but didn't want to take on the work right now</p>



<a name="242659897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242659897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242659897">(Jun 14 2021 at 21:15)</a>:</h4>
<p>Or rather, make <code>comap</code> into <code>restrict_scalars</code> (from the module setting) with a bit of decoration on top.</p>



<a name="242660089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242660089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242660089">(Jun 14 2021 at 21:17)</a>:</h4>
<p>I think remove <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.comap">docs#algebra.comap</a> replacing all uses with <a href="https://leanprover-community.github.io/mathlib_docs/find/restrict_scalars">docs#restrict_scalars</a>, and rename <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.comap">docs#subalgebra.comap</a> to <code>restrict_scalars</code></p>



<a name="242661239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242661239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242661239">(Jun 14 2021 at 21:27)</a>:</h4>
<p>It seems <code>comap</code> comes from Kenny, <a href="https://github.com/leanprover-community/mathlib/issues/536">#536</a>; <code>restrict_scalars</code> came from Sébastien, <a href="https://github.com/leanprover-community/mathlib/issues/1716">#1716</a>, and perhaps no one noticed the duplication.</p>



<a name="242706463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242706463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242706463">(Jun 15 2021 at 09:12)</a>:</h4>
<p>Thanks for bringing this up <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> I think it would be awesome good citizenry to eliminate <code>algebra.comap</code>unify <code>subalgebra.comap</code> with <code>restrict_scalars</code> (and I guess ideally, also rename <code>subgalgebra.comap'</code> to <code>subalgebra.comap</code>).</p>



<a name="242706535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242706535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242706535">(Jun 15 2021 at 09:13)</a>:</h4>
<p>I have a small dangling PR that is distantly related <a href="https://github.com/leanprover-community/mathlib/issues/7807">#7807</a> but I think you can ignore it since it's mostly just a doc string.</p>



<a name="242706798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242706798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242706798">(Jun 15 2021 at 09:15)</a>:</h4>
<p>Oh and also: it would be awesome to have Stone-Weierstrass for ℂ!</p>



<a name="242741807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Real%20subX%20associated%20to%20a%20complex%20subX/near/242741807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Real.20subX.20associated.20to.20a.20complex.20subX.html#242741807">(Jun 15 2021 at 14:34)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7949">#7949</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>