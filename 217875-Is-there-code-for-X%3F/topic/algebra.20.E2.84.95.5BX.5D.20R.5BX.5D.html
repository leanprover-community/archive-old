---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html">algebra ℕ[X] R[X]</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276825632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825632">(Mar 28 2022 at 04:10)</a>:</h4>
<p>Dear All,</p>
<p>After having amply demonstrated my inability to find results in mathlib, I am now struggling to find if there is already and instance/def of the algebra in the title: if R is a semiring, is there and algebra instance <code>algebra ℕ[X] R[X]</code>?</p>
<p>Thanks!</p>



<a name="276825785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825785">(Mar 28 2022 at 04:15)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> How about <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.map_ring_hom">docs#polynomial.map_ring_hom</a> for a start?  Perhaps we have a way of turning a (semi)ring homomorphism into a scalar action.</p>



<a name="276825830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825830">(Mar 28 2022 at 04:16)</a>:</h4>
<p>Ah yes, <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.to_algebra">docs#ring_hom.to_algebra</a></p>



<a name="276825831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825831">(Mar 28 2022 at 04:16)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.to_algebra">docs#ring_hom.to_algebra</a> I think?</p>



<a name="276825848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825848">(Mar 28 2022 at 04:16)</a>:</h4>
<p>Great, thank you both!</p>



<a name="276825851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825851">(Mar 28 2022 at 04:16)</a>:</h4>
<p>And the last piece is <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.cast_ring_hom">docs#nat.cast_ring_hom</a></p>



<a name="276825862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825862">(Mar 28 2022 at 04:17)</a>:</h4>
<p>I think rings might have a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span>-algebra instance?</p>



<a name="276825909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825909">(Mar 28 2022 at 04:18)</a>:</h4>
<p>But to use <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.map_ring_hom">docs#polynomial.map_ring_hom</a> it needs to be in ring-hom form, not in algebra form.</p>



<a name="276825911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825911">(Mar 28 2022 at 04:18)</a>:</h4>
<p>The nat.cast_ring_hom I had via algebra ℕ R.  Does it make a difference?</p>



<a name="276825919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825919">(Mar 28 2022 at 04:18)</a>:</h4>
<p>Well, you would have had to use <code>algebra_map</code> anyway... it makes no difference :)</p>



<a name="276825922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825922">(Mar 28 2022 at 04:18)</a>:</h4>
<p>Ok, thanks!</p>



<a name="276825934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276825934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276825934">(Mar 28 2022 at 04:19)</a>:</h4>
<p>This reminds me of a different question.  For a different thread, though!</p>
<p>Thank you so much!</p>



<a name="276833209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276833209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276833209">(Mar 28 2022 at 06:51)</a>:</h4>
<p>Trying this out in my case, I specifically wanted to <em>not</em> assume that the target ring <code>R</code> was commutative.  <del> <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.map_ring_hom">docs#polynomial.map_ring_hom</a> </del> <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.to_algebra">docs#ring_hom.to_algebra</a> has this assumption.  So, instead, I prove it myself -- note the awkwardness in the field <code>commutes</code> where all the action takes place.</p>
<p>Is the instance below in mathlib?</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.eval</span>

<span class="n">open_locale</span> <span class="n">polynomial</span> <span class="n">big_operators</span>
<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">R</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">)</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">,</span>
  <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">),</span>
  <span class="n">map_one'</span> <span class="o">:=</span> <span class="n">map_one</span> <span class="o">(</span><span class="n">map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">)),</span>
  <span class="n">map_mul'</span> <span class="o">:=</span> <span class="n">map_mul</span> <span class="o">(</span><span class="n">map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">)),</span>
  <span class="n">map_zero'</span> <span class="o">:=</span> <span class="n">map_zero</span> <span class="o">(</span><span class="n">map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">)),</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">map_add</span> <span class="o">(</span><span class="n">map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">)),</span>
  <span class="n">commutes'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">simp_rw</span> <span class="o">[</span><span class="n">coe_map_ring_hom</span><span class="o">],</span>
    <span class="n">refine</span> <span class="n">polynomial.induction_on'</span> <span class="n">p</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span> <span class="n">fq</span> <span class="n">gq</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">fq</span><span class="o">,</span> <span class="n">gq</span><span class="o">])</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">n</span> <span class="n">c</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">monomial_eq_C_mul_X</span><span class="o">,</span> <span class="n">polynomial.map_mul</span><span class="o">,</span> <span class="n">polynomial.map_pow</span><span class="o">,</span> <span class="n">polynomial.map_X</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span>
      <span class="n">X_pow_mul</span><span class="o">,</span> <span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">eq_nat_cast</span><span class="o">,</span> <span class="n">polynomial.map_nat_cast</span><span class="o">,</span> <span class="n">nat.cast_comm</span><span class="o">]</span>
  <span class="n">smul_def'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">}</span>
</code></pre></div>
<p>For some further context: I am trying to prove facts about <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer">docs#pochhammer</a> by proving it with the commutative assumption on the semiring and then transporting them using <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer_map">docs#pochhammer_map</a>.</p>



<a name="276833935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276833935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276833935">(Mar 28 2022 at 07:02)</a>:</h4>
<p>I found <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.to_algebra'">docs#ring_hom.to_algebra'</a> that gets me closer and isolates exactly the commutativity requirement:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">R</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">ring_hom.to_algebra'</span> <span class="o">(</span><span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">R</span><span class="o">))</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">coe_map_ring_hom</span><span class="o">],</span>
  <span class="n">refine</span> <span class="n">polynomial.induction_on'</span> <span class="n">p</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span> <span class="n">fq</span> <span class="n">gq</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">fq</span><span class="o">,</span> <span class="n">gq</span><span class="o">])</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">c</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">monomial_eq_C_mul_X</span><span class="o">,</span> <span class="n">polynomial.map_mul</span><span class="o">,</span> <span class="n">polynomial.map_pow</span><span class="o">,</span> <span class="n">polynomial.map_X</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span>
    <span class="n">X_pow_mul</span><span class="o">,</span> <span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">eq_nat_cast</span><span class="o">,</span> <span class="n">polynomial.map_nat_cast</span><span class="o">,</span> <span class="n">nat.cast_comm</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>
<p>From a maths point of view, this is the statement that <code>X</code> commutes with everything and <code>nat</code> also commutes with everything.</p>



<a name="276839389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276839389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276839389">(Mar 28 2022 at 08:06)</a>:</h4>
<p>Note that <code>ring_hom.to_algebra</code> rarely has the right definitional properties, as it defines <code>algabra.to_has_scalar</code> badly</p>



<a name="276839532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276839532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276839532">(Mar 28 2022 at 08:08)</a>:</h4>
<p>Does your proposed instance create a diamond when <code>R = ℕ[X]</code>?</p>



<a name="276845306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276845306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276845306">(Mar 28 2022 at 09:07)</a>:</h4>
<p>Eric, how can I test whether this instance creates a diamond?  Is it just by playing around or is there a more systematic way of checking?</p>



<a name="276845606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276845606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276845606">(Mar 28 2022 at 09:11)</a>:</h4>
<p>try check whether your instance is equal to <code>algebra.refl N[X]</code> by <code>refl</code>; if it is not, it will make a diamond</p>



<a name="276847270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847270">(Mar 28 2022 at 09:27)</a>:</h4>
<p>I am not understanding something.  I tried</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- I have this instance, with proof, in my file</span>
<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">new_instance</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">R</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">new_instance</span> <span class="n">ℕ</span> <span class="bp">=</span> <span class="n">algebra.refl</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="c1">-- error says: unknown identifier 'algebra.refl'</span>
</code></pre></div>



<a name="276847336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847336">(Mar 28 2022 at 09:28)</a>:</h4>
<p>It should be <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.id">docs#algebra.id</a></p>



<a name="276847407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847407">(Mar 28 2022 at 09:28)</a>:</h4>
<p>Thanks Anne!</p>
<p>The answer appears to be that they are not defeq:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">new_instance</span> <span class="n">ℕ</span> <span class="bp">=</span> <span class="n">algebra.id</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">rfl</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m_2</span> <span class="bp">=</span> <span class="bp">?</span><span class="n">m_2</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">new_instance</span> <span class="n">ℕ</span> <span class="bp">=</span> <span class="n">algebra.id</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span>
</code></pre></div>



<a name="276847449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847449">(Mar 28 2022 at 09:29)</a>:</h4>
<p>Are they even mathematically eq?</p>



<a name="276847543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847543">(Mar 28 2022 at 09:30)</a>:</h4>
<p>If  <code>R = nat[X]</code> then <code>nat[X][X]</code> has two algebra structures depending on which <code>X</code> you look at.</p>



<a name="276847567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847567">(Mar 28 2022 at 09:30)</a>:</h4>
<p>Alex, I would imagine so [EDIT: I think that they <em>are</em> equivalent mathematically].  This means that if I unfold enough the previous non-<code>rfl</code> proof, I can actually prove it, right?</p>



<a name="276847640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276847640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276847640">(Mar 28 2022 at 09:31)</a>:</h4>
<p>Alex, wrt to the second question, it can get confusing, but I imagine that there will be some book-keeping to see which X represents the new and which the old variable.</p>



<a name="276848404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276848404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276848404">(Mar 28 2022 at 09:38)</a>:</h4>
<p>I think this is a similar discussion to the one we've had in the context of <code>monoid_algebra</code>elsewhere, although perhaps it's not the same</p>



<a name="276848861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276848861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276848861">(Mar 28 2022 at 09:42)</a>:</h4>
<p>Well, it's at least true mathematically:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">nat.cast_ring_hom_nat</span> <span class="o">:</span> <span class="n">nat.cast_ring_hom</span> <span class="n">ℕ</span> <span class="bp">=</span> <span class="n">ring_hom.id</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="n">ring_hom.ext</span> <span class="n">nat.cast_id</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">new_instance</span> <span class="bp">=</span> <span class="n">algebra.id</span> <span class="n">ℕ</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="o">:</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">change</span>  <span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">nat.cast_ring_hom</span> <span class="n">_</span><span class="o">)</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">r</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="276849285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849285">(Mar 28 2022 at 09:47)</a>:</h4>
<p><del>(You can also prove the first one by <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.eq_nat_cast">docs#ring_hom.eq_nat_cast</a>)</del> Wait, we only have that for <code>eq_int_cast</code> and <code>eq_rat_cast</code>?</p>



<a name="276849466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849466">(Mar 28 2022 at 09:49)</a>:</h4>
<p>I'm going to PR the set all of three simp lemmas for that first bit in a second</p>



<a name="276849472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849472">(Mar 28 2022 at 09:49)</a>:</h4>
<p>I found out that, for my specific application to <code>pochhammer</code>, there is also a <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer_map">docs#pochhammer_map</a> lemma that does essentially what I want and I do not need the instance for this.</p>
<p>Indeed, this lemma takes a ring_hom and produces the corresponding <a href="http://polynomial.map">polynomial.map</a> <em>only</em> for pochhammer.</p>



<a name="276849495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849495">(Mar 28 2022 at 09:49)</a>:</h4>
<p>Thanks Eric!</p>



<a name="276849611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849611">(Mar 28 2022 at 09:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D/near/276849466">said</a>:</p>
<blockquote>
<p>I'm going to PR the set all of three simp lemmas for that first bit in a second</p>
</blockquote>
<p>Could you also add a generic <code>ring_hom.eq_nat_cast (f : ℕ →+* R) : f = nat.cast_ring_hom</code>?</p>



<a name="276849650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849650">(Mar 28 2022 at 09:51)</a>:</h4>
<p>This presumably means that, once Eric's PR goes through, the proof of <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer_map">docs#pochhammer_map</a> can be shortened, right?  Or possibly may not even be needed anymore?</p>



<a name="276849694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849694">(Mar 28 2022 at 09:51)</a>:</h4>
<p>To match <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.eq_int_cast'">docs#ring_hom.eq_int_cast'</a>?</p>



<a name="276849696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849696">(Mar 28 2022 at 09:51)</a>:</h4>
<p>And while we're at it, <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.subsingleton_ring_hom">docs#nat.subsingleton_ring_hom</a> should really say <code>unique (ℕ →+* R)</code></p>



<a name="276849781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849781">(Mar 28 2022 at 09:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D/near/276849694">said</a>:</p>
<blockquote>
<p>To match <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.eq_int_cast'">docs#ring_hom.eq_int_cast'</a>?</p>
</blockquote>
<p>Yes please! Or even both variants, since I'm so busy making up work to do :)</p>



<a name="276849900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276849900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276849900">(Mar 28 2022 at 09:53)</a>:</h4>
<p>We already have <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_nat_cast">docs#eq_nat_cast</a> for the other variant</p>



<a name="276850348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276850348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276850348">(Mar 28 2022 at 09:57)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13001">#13001</a></p>



<a name="276851020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276851020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276851020">(Mar 28 2022 at 10:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D/near/276849650">said</a>:</p>
<blockquote>
<p>This presumably means that, once Eric's PR goes through, the proof of <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer_map">docs#pochhammer_map</a> can be shortened, right?  Or possibly may not even be needed anymore?</p>
</blockquote>
<p>I'm struggling to follow what you're suggesting here</p>



<a name="276851763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276851763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276851763">(Mar 28 2022 at 10:11)</a>:</h4>
<p>This looks like the more general case of the instance you were asking for:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">S</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">algebra</span> <span class="n">R</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">S</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">R</span> <span class="n">S</span><span class="o">)</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">,</span>  <span class="c1">-- this probably could be better</span>
  <span class="n">to_ring_hom</span> <span class="o">:=</span> <span class="n">polynomial.map_ring_hom</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">R</span> <span class="n">S</span><span class="o">),</span>
  <span class="n">commutes'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">simp_rw</span> <span class="o">[</span><span class="n">ring_hom.to_fun_eq_coe</span><span class="o">,</span> <span class="n">coe_map_ring_hom</span><span class="o">],</span>
    <span class="n">refine</span> <span class="n">polynomial.induction_on'</span> <span class="n">p</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span> <span class="n">fq</span> <span class="n">gq</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">fq</span><span class="o">,</span> <span class="n">gq</span><span class="o">])</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">n</span> <span class="n">c</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">monomial_eq_C_mul_X</span><span class="o">,</span> <span class="n">polynomial.map_mul</span><span class="o">,</span> <span class="n">polynomial.map_pow</span><span class="o">,</span> <span class="n">polynomial.map_X</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span>
      <span class="n">X_pow_mul</span><span class="o">,</span> <span class="n">map_C</span><span class="o">,</span> <span class="n">C_mul'</span><span class="o">,</span> <span class="n">C_mul'</span><span class="o">,</span> <span class="n">algebra_map_smul</span><span class="o">,</span> <span class="n">algebra_map_smul</span><span class="o">,</span> <span class="n">mul_smul_comm</span><span class="o">],</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">smul_def'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">}</span>
</code></pre></div>
<p>but again, it creates at least a non-defeq diamond</p>



<a name="276851957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/algebra%20%E2%84%95%5BX%5D%20R%5BX%5D/near/276851957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D.html#276851957">(Mar 28 2022 at 10:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D/near/276851020">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/algebra.20.E2.84.95.5BX.5D.20R.5BX.5D/near/276849650">said</a>:</p>
<blockquote>
<p>This presumably means that, once Eric's PR goes through, the proof of <a href="https://leanprover-community.github.io/mathlib_docs/find/pochhammer_map">docs#pochhammer_map</a> can be shortened, right?  Or possibly may not even be needed anymore?</p>
</blockquote>
<p>I'm struggling to follow what you're suggesting here</p>
</blockquote>
<p>My comment was non-sense.  I think that I got carried away and hoped that <code>simp</code> would have done miracles.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>