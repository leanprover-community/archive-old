---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html">Simple integral calculations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225656938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225656938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225656938">(Feb 09 2021 at 08:27)</a>:</h4>
<p>Now that we have FTC-2, I wanted to discover and experiment a bit with mathlib's integration. I started by calculating some very simple integrals using FTC-2. These are really just direct application of FTC-2 + existing facts on derivative, but I was still suprised not to find e.g <code>∫ x in a..b, x ^ n</code> inside mathlib. Does it exist somewhere ? Is someone working on proving some classical integrals ? If not, I'd be happy to clean and generalize my proofs and then make a PR</p>



<a name="225658896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225658896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225658896">(Feb 09 2021 at 08:50)</a>:</h4>
<p>I'd be very happy to have those. You should probably coordinate with <span class="user-mention" data-user-id="314430">@Benjamin Davidson</span>.</p>



<a name="225659839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225659839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225659839">(Feb 09 2021 at 09:00)</a>:</h4>
<p>I've written a few of these already but had put it on hold due to <a href="#narrow/stream/116395-maths/topic/What's.20new.20in.20Lean.20maths.3F/near/221499824">this discussion</a> in "Whats new in Lean maths" regarding doing them by <code>compute</code>. If they're wanted I'd be glad to work on them.</p>



<a name="225661521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225661521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225661521">(Feb 09 2021 at 09:16)</a>:</h4>
<p>Oh I see, I'm late to the party <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="225694670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225694670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225694670">(Feb 09 2021 at 14:11)</a>:</h4>
<p>Oh, it looks like we never added <code>integral_deriv_eq_sub'</code> and the <code>continuous</code> attribute on <code>continuous_sin</code> from that thread either!</p>



<a name="225764183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225764183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225764183">(Feb 09 2021 at 21:58)</a>:</h4>
<p>I can put that together later this week. <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> would you like to collaborate?</p>



<a name="225804283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/225804283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#225804283">(Feb 10 2021 at 08:06)</a>:</h4>
<p>Yes of course ! I don't have time for Lean today, but I'd be happy to help after that</p>



<a name="226279929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226279929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226279929">(Feb 14 2021 at 01:46)</a>:</h4>
<p>I've been working on these and was wondering where they would go once they're ready. For example, does</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">integral_sin</span> <span class="o">:</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">sin</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">cos</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">cos</span> <span class="n">b</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>belong in <code>measure_theory.interval_integral</code> (which would require an import), in <code>analysis.special_functions.trigonometric</code>, or somewhere else entirely?</p>



<a name="226279992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226279992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226279992">(Feb 14 2021 at 01:48)</a>:</h4>
<p><code>analysis.special_functions.trigonometric</code> contains theorems about measurability of sin, as well as the derivative of sin, so it seems like a good place to put the integral too</p>



<a name="226280018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280018">(Feb 14 2021 at 01:49)</a>:</h4>
<p>Although your theorem looks like a special case of a theorem about antiderivatives with only one <code>cos</code> on the rhs</p>



<a name="226280205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280205">(Feb 14 2021 at 01:54)</a>:</h4>
<p>Sorry, I'm not sure what you mean by that.</p>



<a name="226280226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280226">(Feb 14 2021 at 01:55)</a>:</h4>
<p>something like <code>deriv g = f -&gt; \int x in a..b, f x = g b - g a</code></p>



<a name="226280273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280273">(Feb 14 2021 at 01:56)</a>:</h4>
<p>maybe it's not a perfect fit for this lemma, but it should at least make the proof a one-liner</p>



<a name="226280332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280332">(Feb 14 2021 at 01:58)</a>:</h4>
<p>Oh, I'll be adding a lemma like that. And it does make the proof of <code>integral_sin</code> a one-liner.</p>



<a name="226280415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226280415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226280415">(Feb 14 2021 at 02:01)</a>:</h4>
<p>So I will put integrals of special functions in their corresponding files; i.e. integrals of trigonometric functions in <code>analysis.special_functions.trigonometric</code>, integral of <code>exp</code> in <code>analysis.special_functions.exp_log</code>... okay?</p>



<a name="226672753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226672753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226672753">(Feb 17 2021 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> It seems that with <a href="https://github.com/leanprover-community/mathlib/issues/6058">#6058</a> this will no longer be possible, since <code>measure_theory.interval_integral</code> now imports the <code>analysis.special_functions</code> files.<br>
What do you suggest instead?</p>



<a name="226673557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226673557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226673557">(Feb 17 2021 at 15:33)</a>:</h4>
<p>hmm, at first sight I would think that import should be the other way round. Can we reorganise some lemmas?</p>



<a name="226674389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226674389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226674389">(Feb 17 2021 at 15:38)</a>:</h4>
<p>That's what I thought, too, hence my plan to import <code>measure_theory.interval_integral</code> into <code>analysis.special_functions.exp_log</code>. But I don't have any idea as to how to possibly resolve this issue.</p>



<a name="226677616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226677616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226677616">(Feb 17 2021 at 15:57)</a>:</h4>
<p>I think it's rather fundamental.  The Bochner integral is now constructed as a special case of L^1 and a special special case of L^p, so powers have to be imported into it.</p>



<a name="226677759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226677759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226677759">(Feb 17 2021 at 15:58)</a>:</h4>
<p>Perhaps just add a separate file <code>analysis.special_functions.integrals</code> which imports <code>interval_integral</code>.</p>



<a name="226700963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226700963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226700963">(Feb 17 2021 at 18:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Simple.20integral.20calculations/near/226677759">said</a>:</p>
<blockquote>
<p>Perhaps just add a separate file <code>analysis.special_functions.integrals</code> which imports <code>interval_integral</code>.</p>
</blockquote>
<p>I'm satisfied with this solution.</p>



<a name="226921518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226921518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226921518">(Feb 19 2021 at 05:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6216">#6216</a></p>



<a name="226923635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226923635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226923635">(Feb 19 2021 at 05:59)</a>:</h4>
<p><span class="user-mention" data-user-id="314430">@Benjamin Davidson</span> wow, those examples look great!</p>



<a name="226923677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226923677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226923677">(Feb 19 2021 at 06:00)</a>:</h4>
<p>As long as Lean couldn't do those integrals by itself it looked pretty silly of course. I think this is a very nice milestone!</p>



<a name="226929722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226929722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226929722">(Feb 19 2021 at 07:51)</a>:</h4>
<p>Cheers!</p>



<a name="226931245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226931245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226931245">(Feb 19 2021 at 08:08)</a>:</h4>
<p>That is great! Many thanks! I'll tell the undergraduates they can do their calculus homework in Lean :-)</p>



<a name="226935340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Simple%20integral%20calculations/near/226935340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Simple.20integral.20calculations.html#226935340">(Feb 19 2021 at 08:53)</a>:</h4>
<p>Presumably you can actually do interactive computation here (i.e. actually <em>do</em> and not just <em>check</em> the homework) by introducing a dummy variable <code>result</code> for the RHS of the statement, and then using <code>norm_num</code> to clean up the left hand side. Is there a less ad-hoc way to do this?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>