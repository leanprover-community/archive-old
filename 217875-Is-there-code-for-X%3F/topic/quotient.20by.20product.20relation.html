---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html">quotient by product relation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207806839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207806839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207806839">(Aug 24 2020 at 04:40)</a>:</h4>
<p>Is this anywhere in the Lean library? I managed to prove it using only <code>quot.sound</code> without <code>propext</code>. If r₁ and r₂ are setoids, there is a simpler proof using <code>quotient.exact</code>, which however depends on <code>propext</code>. The setoid version for Pi types also holds (requires <code>quotient.choice</code>; is this in the library?), but if the relations are only reflexive, the kernels of the quotients are the equivalence relations generated by the respective relations (<code>eqv_gen</code>), but the <code>eqv_gen</code> of the product relation doesn't necessarily equal the product of the <code>eqv_gen</code>s, because it can take any number of steps to reach a pair of elements in the transitive closure, and across different coordinates, these numbers may well be unbounded.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">def</span> <span class="n">rprod</span> <span class="o">{</span><span class="n">α₁</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">α₂</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">r₁</span><span class="o">:</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">r₂</span><span class="o">:</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span> <span class="n">a&#39;</span><span class="o">:</span> <span class="n">pprod</span> <span class="n">α₁</span> <span class="n">α₂</span><span class="o">,</span> <span class="n">r₁</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="n">a&#39;</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">∧</span> <span class="n">r₂</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span> <span class="n">a&#39;</span><span class="bp">.</span><span class="mi">2</span>

<span class="kn">lemma</span> <span class="n">prod_quot</span> <span class="o">{</span><span class="n">α₁</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">α₂</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">r₁</span><span class="o">:</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">r₂</span><span class="o">:</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">hr</span><span class="o">:</span> <span class="n">reflexive</span> <span class="n">r₁</span> <span class="bp">∧</span> <span class="n">reflexive</span> <span class="n">r₂</span><span class="o">):</span> <span class="n">quot</span> <span class="o">(</span><span class="n">rprod</span> <span class="n">r₁</span> <span class="n">r₂</span><span class="o">)</span> <span class="err">≃</span> <span class="n">pprod</span> <span class="o">(</span><span class="n">quot</span> <span class="n">r₁</span><span class="o">)</span> <span class="o">(</span><span class="n">quot</span> <span class="n">r₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">constructor</span><span class="o">,</span> <span class="n">swap</span> <span class="mi">3</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">set</span> <span class="n">f</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span><span class="o">:</span> <span class="n">pprod</span> <span class="n">α₁</span> <span class="n">α₂</span><span class="o">,</span> <span class="n">pprod</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">r₁</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">r₂</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="k">with</span> <span class="n">hf</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="bp">_</span><span class="o">,</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hf</span><span class="o">],</span>
    <span class="n">congr&#39;</span> <span class="mi">1</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span><span class="o">,</span> <span class="n">exacts</span> <span class="o">[</span><span class="n">h</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">swap</span> <span class="mi">3</span><span class="o">,</span> <span class="o">{</span> <span class="n">set</span> <span class="n">g</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a₁</span> <span class="n">a₂</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">rprod</span> <span class="n">r₁</span> <span class="n">r₂</span><span class="o">)</span> <span class="o">(</span><span class="n">pprod</span><span class="bp">.</span><span class="n">mk</span> <span class="n">a₁</span> <span class="n">a₂</span><span class="o">)</span> <span class="k">with</span> <span class="n">hg</span><span class="o">,</span>
    <span class="n">set</span> <span class="n">g&#39;</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a₁</span><span class="o">,</span> <span class="bp">@</span><span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="bp">_</span> <span class="n">r₂</span> <span class="bp">_</span> <span class="o">(</span><span class="n">g</span> <span class="n">a₁</span><span class="o">)</span> <span class="bp">_</span> <span class="k">with</span> <span class="n">hg&#39;</span><span class="o">,</span>
    <span class="n">refine</span> <span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="bp">@</span><span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="bp">_</span> <span class="n">r₁</span> <span class="bp">_</span> <span class="n">g&#39;</span> <span class="bp">_</span><span class="o">)</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">rw</span> <span class="n">hg&#39;</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">a&#39;</span> <span class="n">h</span><span class="o">,</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">hr</span><span class="bp">.</span><span class="mi">1</span> <span class="n">a₁</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">a&#39;</span> <span class="n">h</span><span class="o">,</span> <span class="n">apply</span> <span class="n">funext</span><span class="o">,</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">ind</span><span class="o">,</span> <span class="n">intro</span> <span class="n">a₂</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">hg</span><span class="o">],</span> <span class="n">exact</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="bp">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">hr</span><span class="bp">.</span><span class="mi">2</span> <span class="n">a₂</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">ind</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">cases</span> <span class="n">a</span><span class="o">,</span> <span class="n">triv</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">cases</span> <span class="n">a</span><span class="o">,</span> <span class="n">revert</span> <span class="n">a_fst</span><span class="o">,</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">ind</span><span class="o">,</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">revert</span> <span class="n">a_snd</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">ind</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
<span class="kn">end</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">axioms</span> <span class="n">prod_quot</span> <span class="c1">-- quot.sound</span>
</code></pre></div>


<p>I appreciate any simplification of the proof. Moreover, if I replace the last line with <code>revert a_snd, apply quot.ind, simp }</code> the proof still works but will then depend on <code>propext</code>. I am not experienced enough to track down the problem, so help is appreciated.</p>



<a name="207806925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207806925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207806925">(Aug 24 2020 at 04:42)</a>:</h4>
<p>No, I don't think this has been proved in mathlib</p>



<a name="207806987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207806987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207806987">(Aug 24 2020 at 04:44)</a>:</h4>
<p>What's your <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> header? I can't find <code>rprod</code></p>



<a name="207807095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807095">(Aug 24 2020 at 04:47)</a>:</h4>
<p>I found <code>prod.rprod</code> but it doesn't work on <code>Sort</code>s; it looks like you are using <code>pprod</code> but there is no <code>pprod.rprod</code> that has been proved AFAICT</p>



<a name="207807149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807149">(Aug 24 2020 at 04:49)</a>:</h4>
<p>Sorry,</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">rprod</span> <span class="o">{</span><span class="n">α₁</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">α₂</span><span class="o">:</span> <span class="n">Sort</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">r₁</span><span class="o">:</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">r₂</span><span class="o">:</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span> <span class="n">a&#39;</span><span class="o">:</span> <span class="n">pprod</span> <span class="n">α₁</span> <span class="n">α₂</span><span class="o">,</span> <span class="n">r₁</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="n">a&#39;</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">∧</span> <span class="n">r₂</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span> <span class="n">a&#39;</span><span class="bp">.</span><span class="mi">2</span>
</code></pre></div>



<a name="207807221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807221">(Aug 24 2020 at 04:50)</a>:</h4>
<p>You should start the proof with <code>fconstructor</code> to skip the <code>swap</code>s</p>



<a name="207807307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807307">(Aug 24 2020 at 04:53)</a>:</h4>
<p>also the <code>hr</code> hypothesis should be two hypotheses</p>



<a name="207807353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807353">(Aug 24 2020 at 04:54)</a>:</h4>
<p>As for avoiding propext, tactics use it all the time. You will have a bad day trying to avoid it unless you rewrite some of the core algorithms</p>



<a name="207807364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807364">(Aug 24 2020 at 04:55)</a>:</h4>
<p>you can remove the <code>dsimp</code> on the last line though</p>



<a name="207807457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207807457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207807457">(Aug 24 2020 at 04:57)</a>:</h4>
<p>you can replace the coherence proofs at the end with</p>
<div class="codehilite"><pre><span></span><code>  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨⟨</span><span class="n">a</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">b</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
</code></pre></div>


<p>Did I mention that <code>rcases</code> (or <code>rintro</code> in this guise) is awesome?</p>



<a name="207808034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207808034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207808034">(Aug 24 2020 at 05:10)</a>:</h4>
<p>Here's a compression pass:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">prod_quot</span> <span class="o">{</span><span class="n">α₁</span> <span class="n">α₂</span><span class="o">}</span> <span class="o">(</span><span class="n">r₁</span> <span class="o">:</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="n">α₁</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">r₂</span> <span class="o">:</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="n">α₂</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hr₁</span><span class="o">:</span> <span class="n">reflexive</span> <span class="n">r₁</span><span class="o">)</span> <span class="o">(</span><span class="n">hr₂</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">r₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">quot</span> <span class="o">(</span><span class="n">rprod</span> <span class="n">r₁</span> <span class="n">r₂</span><span class="o">)</span> <span class="err">≃</span> <span class="n">pprod</span> <span class="o">(</span><span class="n">quot</span> <span class="n">r₁</span><span class="o">)</span> <span class="o">(</span><span class="n">quot</span> <span class="n">r₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">:</span> <span class="n">pprod</span> <span class="n">α₁</span> <span class="n">α₂</span><span class="o">,</span> <span class="n">pprod</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">r₁</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">r₂</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span><span class="o">))</span> <span class="err">$</span>
    <span class="k">by</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h</span><span class="bp">;</span> <span class="n">dsimp</span> <span class="n">only</span><span class="bp">;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="n">h</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="o">],</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a₁</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a₂</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="bp">_</span> <span class="o">(</span><span class="n">pprod</span><span class="bp">.</span><span class="n">mk</span> <span class="n">a₁</span> <span class="n">a₂</span><span class="o">))</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">_</span><span class="o">)</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">a&#39;</span> <span class="n">h</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="bp">⟨</span><span class="n">hr₁</span> <span class="n">a₁</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">a&#39;</span> <span class="n">h</span><span class="o">,</span> <span class="n">ext</span> <span class="bp">⟨</span><span class="n">a₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">exact</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="bp">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">hr₂</span> <span class="n">a₂</span><span class="bp">⟩</span> <span class="o">}</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="bp">⟩⟩;</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨⟨</span><span class="n">a</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">b</span><span class="bp">⟩⟩;</span> <span class="n">refl</span> <span class="o">}</span>
</code></pre></div>



<a name="207808045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207808045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207808045">(Aug 24 2020 at 05:11)</a>:</h4>
<p><code>ext ⟨a₂⟩,</code>, also brought to you by rcases</p>



<a name="207808055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207808055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207808055">(Aug 24 2020 at 05:11)</a>:</h4>
<p>abbreviating <code>apply funext, apply quot.ind, intro a₂,</code> from the original proof</p>



<a name="207826611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207826611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207826611">(Aug 24 2020 at 10:10)</a>:</h4>
<p>I really like <code>ext ⟨a₂⟩</code>. It is really useful. Another place that parser would be helpful is in <code>choose</code>.</p>



<a name="207885271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207885271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207885271">(Aug 24 2020 at 19:23)</a>:</h4>
<p>I actually thought about adding it when I was working on <code>choose!</code>, but it conflicts with the current syntax a bit</p>



<a name="207889416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/quotient%20by%20product%20relation/near/207889416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/quotient.20by.20product.20relation.html#207889416">(Aug 24 2020 at 19:58)</a>:</h4>
<p>Pi type version</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">pi_setoid_quot</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">S</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">a</span><span class="o">,</span> <span class="n">setoid</span> <span class="o">(</span><span class="n">β</span> <span class="n">a</span><span class="o">)]</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">quotient</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">a</span><span class="o">,</span> <span class="n">β</span> <span class="n">a</span><span class="o">)</span> <span class="n">pi_setoid</span> <span class="err">≃</span> <span class="bp">Π</span> <span class="n">a</span><span class="o">,</span> <span class="n">quotient</span> <span class="o">(</span><span class="n">S</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">a</span><span class="o">,</span> <span class="n">β</span> <span class="n">a</span><span class="o">)</span> <span class="n">a</span><span class="o">,</span> <span class="err">⟦</span><span class="n">f</span> <span class="n">a</span><span class="err">⟧</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ_</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="n">funext</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="o">(</span><span class="n">h</span> <span class="n">a</span><span class="o">))),</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">f</span><span class="o">,</span> <span class="err">⟦</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">out</span><span class="err">⟧</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">f</span><span class="bp">⟩;</span> <span class="n">exact</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk_out</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intro</span><span class="bp">;</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">}</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">axioms</span> <span class="n">pi_setoid_quot</span> <span class="c1">-- all three</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">axioms</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk_out</span> <span class="c1">-- choice, propext; incorporates exactness</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>