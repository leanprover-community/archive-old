---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html">maps_to.restrict_codom</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="244760993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244760993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244760993">(Jul 02 2021 at 21:46)</a>:</h4>
<p>I know about <code>maps_to.restrict</code>, but is this in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">maps_to.restrict_codom</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">maps_to</span> <span class="n">f</span> <span class="n">univ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">α</span> <span class="bp">→</span> <span class="n">t</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">⟨</span><span class="n">f</span> <span class="n">a</span><span class="o">,</span> <span class="n">h</span> <span class="o">(</span><span class="n">mem_univ</span> <span class="n">a</span><span class="o">)⟩</span>
</code></pre></div>



<a name="244762339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244762339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244762339">(Jul 02 2021 at 22:05)</a>:</h4>
<p>(<a href="https://leanprover-community.github.io/mathlib_docs/find/set.maps_to.restrict">docs#set.maps_to.restrict</a> for reference)</p>



<a name="244764125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244764125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244764125">(Jul 02 2021 at 22:31)</a>:</h4>
<p>I ask because there exists as well <a href="https://leanprover-community.github.io/mathlib_docs/find/set.restrict">docs#set.restrict</a></p>



<a name="244764500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244764500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244764500">(Jul 02 2021 at 22:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.set.univ">docs#equiv.set.univ</a> composed with restrict looks like it gives what you want</p>



<a name="244764752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244764752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244764752">(Jul 02 2021 at 22:40)</a>:</h4>
<p>But your version reduces definitionally in a nicer way I suspect</p>



<a name="244764800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244764800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244764800">(Jul 02 2021 at 22:41)</a>:</h4>
<p>It does but I was wondering if there were a direct definition with some API, as there is for <code>set.restrict</code> (<code>set.restrict</code> could also be recovered in other ways, but it still worth having it)</p>



<a name="244765802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244765802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244765802">(Jul 02 2021 at 22:56)</a>:</h4>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/find/subtype.coind">docs#subtype.coind</a> close?</p>



<a name="244766066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244766066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244766066">(Jul 02 2021 at 23:01)</a>:</h4>
<p>(since <code>coe_sort s</code> is the same as <code>subtype (∈ s)</code>)</p>



<a name="244937733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244937733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244937733">(Jul 05 2021 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/maps_to.2Erestrict_codom/near/244765802">said</a>:</p>
<blockquote>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/find/subtype.coind">docs#subtype.coind</a> close?</p>
</blockquote>
<p>Yes!</p>



<a name="244937973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/244937973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#244937973">(Jul 05 2021 at 13:49)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/8200">#8200</a></p>



<a name="245040433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245040433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245040433">(Jul 06 2021 at 13:46)</a>:</h4>
<p>For future reference, it turns out it already existed as <a href="https://leanprover-community.github.io/mathlib_docs/find/set.cod_restrict">docs#set.cod_restrict</a></p>



<a name="245041002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245041002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245041002">(Jul 06 2021 at 13:50)</a>:</h4>
<p>A question for others reading this thread: Do we still want another def for convenience?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"> Alias of `set.cod_restrict` for dot notation -/</span>
<span class="kd">def</span> <span class="n">maps_to.cod_restrict</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">maps_to</span> <span class="n">f</span> <span class="n">univ</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">α</span> <span class="bp">→</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">t.cod_restrict</span> <span class="n">f</span> <span class="bp">$</span> <span class="o">(</span><span class="n">t.maps_univ_to</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h</span>
</code></pre></div>
<p>If so, should it be <code>@[simp]</code>? <code>abbreviation</code>? Both?</p>



<a name="245041612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245041612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245041612">(Jul 06 2021 at 13:55)</a>:</h4>
<p>In case, I propose instead that <code>cod_restrict</code> be refactored to this one (also, <code>cod_restrict</code> has a lot of unnecessary explicit parameters that should be refactored). I actually believe we should give another name to <code>maps_to f univ</code>, like <code>has_image_in</code> or <code>set.contains_image_of</code>, and refactor with that one.</p>



<a name="245043022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245043022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245043022">(Jul 06 2021 at 14:05)</a>:</h4>
<p>Right, we already have <code>set.range f ⊆ s</code> as yet another spelling of <code>maps_to f univ s</code>, but that unfolds to <code>∀ ⦃x : β⦄, (∃ (y : α), f y = x) → x ∈ s</code> which is much worse than <code>∀ y, f y ∈ s</code> which is how I assume you propose we define <code>has_image_in</code></p>



<a name="245043519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245043519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245043519">(Jul 06 2021 at 14:08)</a>:</h4>
<p>Yes, even though the main reason why I propose <code>has_image_in</code> is to use dot notation. Could we use dot notation with <code>set.range f ⊆ s</code>?</p>



<a name="245043666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245043666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245043666">(Jul 06 2021 at 14:09)</a>:</h4>
<p>Also, for personal culture, what are the parentheses <code>⦃</code> in the expression you wrote?</p>



<a name="245045363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245045363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245045363">(Jul 06 2021 at 14:22)</a>:</h4>
<p>If I have <code>h : ∀ ⦃x : β⦄, p x → β</code> and <code>hx : p x</code>, then applying one to the other gives<code>h hx : β</code></p>



<a name="245045440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245045440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245045440">(Jul 06 2021 at 14:22)</a>:</h4>
<p>If those were <code>{}</code> then lean would eagerly remove <code>x</code> before I apply it</p>



<a name="245056448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245056448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245056448">(Jul 06 2021 at 15:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267205">Nicolò Cavalleri</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/maps_to.2Erestrict_codom/near/245043519">said</a>:</p>
<blockquote>
<p>Yes, even though the main reason why I propose <code>has_image_in</code> is to use dot notation. Could we use dot notation with <code>set.range f ⊆ s</code>?</p>
</blockquote>
<p>What about this one?</p>



<a name="245056544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245056544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245056544">(Jul 06 2021 at 15:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/maps_to.2Erestrict_codom/near/245045440">said</a>:</p>
<blockquote>
<p>If those were <code>{}</code> then lean would eagerly remove <code>x</code> before I apply it</p>
</blockquote>
<p>Thanks! I am not sure I understand what "eagerly remove <code>x</code> before I apply it" means but I guess I will find out when I will need to face this problem</p>



<a name="245104413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/maps_to.restrict_codom/near/245104413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hunter Monroe <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/maps_to.2Erestrict_codom.html#245104413">(Jul 06 2021 at 22:03)</a>:</h4>
<p>What is the current name for exists_mem_of_ne_empty which apparently says roughly `lemma nonempty_of_nonempty {α : Type*} {A : set α} : A ≠ ∅ → ∃ x, x ∈ A?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>