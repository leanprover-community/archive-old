---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html">Continuous linear map to normed group hom</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268577773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268577773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Roca González <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268577773">(Jan 19 2022 at 17:48)</a>:</h4>
<p>Hi,<br>
I am in a situation where I have a <code>continuous_linear_map</code> and need to convert it to a <code>normed_group_hom</code>. It seems weird to me that these are even different notions. Is there an automatic way to convert between them? I don't find any function to do this. Should automatic coercion work?</p>



<a name="268578518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268578518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268578518">(Jan 19 2022 at 17:54)</a>:</h4>
<p>This certainly won't be automatic, someone will have had to prove <code>continuous_linear_map.to_normed_group_hom</code> by hand (and as far as I can see they haven't). Are you able to prove that yourself? (I can't comment on whether it's true)</p>



<a name="268579672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268579672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268579672">(Jan 19 2022 at 18:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="465995">Daniel Roca González</span> <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom/near/268577773">said</a>:</p>
<blockquote>
<p>Hi,<br>
I am in a situation where I have a <code>continuous_linear_map</code> and need to convert it to a <code>normed_group_hom</code>. It seems weird to me that these are even different notions. </p>
</blockquote>
<p>Normed group homomorphisms are maps between normed group that have no reason to be linear spaces, so there is no way they could "the same notion".</p>



<a name="268579934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268579934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268579934">(Jan 19 2022 at 18:03)</a>:</h4>
<p>And continuous linear maps assume you have a topological module (say a topological vector space) but they do not assume the topology comes from a norm.</p>



<a name="268579988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268579988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268579988">(Jan 19 2022 at 18:03)</a>:</h4>
<p>Does it make sense?</p>



<a name="268580670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268580670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268580670">(Jan 19 2022 at 18:08)</a>:</h4>
<p>Here's the missing definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed.group.hom</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.operator_norm</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">𝕜</span> <span class="bp">𝕜₂</span> <span class="n">E</span> <span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">semi_normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">semi_normed_group</span> <span class="n">F</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜₂</span><span class="o">]</span> <span class="o">{</span><span class="n">σ₁₂</span> <span class="o">:</span> <span class="bp">𝕜</span> <span class="bp">→+*</span> <span class="bp">𝕜₂</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">𝕜₂</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">ring_hom_isometric</span> <span class="n">σ₁₂</span><span class="o">]</span>

<span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">continuous_linear_map.to_normed_group_hom</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">SL</span><span class="o">[</span><span class="n">σ₁₂</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">normed_group_hom</span> <span class="n">E</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">f.map_add</span><span class="o">,</span>
  <span class="n">bound'</span> <span class="o">:=</span> <span class="k">let</span> <span class="o">⟨</span><span class="n">r</span><span class="o">,</span> <span class="n">hr</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">f.bound</span> <span class="k">in</span> <span class="o">⟨</span><span class="n">r</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span> <span class="o">}</span>
</code></pre></div>
<p>So all the maths is already there (<a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_linear_map.bound">docs#continuous_linear_map.bound</a>), the glue was just missing</p>



<a name="268581000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Roca González <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581000">(Jan 19 2022 at 18:11)</a>:</h4>
<p>Thank you, now I understand why one can't be a subset of the other. I do think that we should have <span class="user-mention" data-user-id="310045">@Eric Wieser</span> 's conversion in the library, along with the other direction.</p>



<a name="268581222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581222">(Jan 19 2022 at 18:13)</a>:</h4>
<p>Is the other direction true? How do you prove <code>map_smul</code>?</p>



<a name="268581334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Roca González <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581334">(Jan 19 2022 at 18:14)</a>:</h4>
<p>wait, you're right, that's not true either</p>



<a name="268581354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581354">(Jan 19 2022 at 18:14)</a>:</h4>
<p>Crap, Eric was faster</p>



<a name="268581384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581384">(Jan 19 2022 at 18:14)</a>:</h4>
<p>Mine was:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.operator_norm</span>
<span class="kn">import</span> <span class="n">analysis.normed.group.hom</span>

<span class="kd">def</span> <span class="n">continuous_linear_map.to_normed_group_hom</span>
  <span class="o">{</span><span class="bp">𝕜</span> <span class="bp">𝕜'</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semi_normed_group</span> <span class="n">E</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semi_normed_group</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜</span><span class="o">]</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">𝕜'</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semi_normed_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">semi_normed_space</span> <span class="bp">𝕜'</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="bp">𝕜</span> <span class="bp">→+*</span> <span class="bp">𝕜'</span><span class="o">}</span> <span class="o">[</span><span class="n">ring_hom_isometric</span> <span class="n">σ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">SL</span><span class="o">[</span><span class="n">σ</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">normed_group_hom</span> <span class="n">E</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">map_add</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">bound'</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">∥</span><span class="n">f</span><span class="bp">∥</span><span class="o">,</span> <span class="n">f.le_op_norm</span><span class="o">⟩</span> <span class="o">}</span>
</code></pre></div>



<a name="268581432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581432">(Jan 19 2022 at 18:15)</a>:</h4>
<p>I still prefer my last line.</p>



<a name="268581574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581574">(Jan 19 2022 at 18:16)</a>:</h4>
<p><del>I don't get how your last line is so short yet the proof of <code>continuous_linear_map.bound</code> doesn't seem to unfold to it</del> -- oh nevermind, <code>le_op_norm</code> is proved in terms of <code>bound</code></p>



<a name="268581579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581579">(Jan 19 2022 at 18:16)</a>:</h4>
<p>Daniel, we could add this, but I'm a bit worried this is an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> issue. There's a reason why nobody ever needed that. I'm pretty skeptical that you "need to convert it to a <code>normed_group_hom</code>".</p>



<a name="268581825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268581825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268581825">(Jan 19 2022 at 18:18)</a>:</h4>
<p>Daniel, if you wonder about the sigma stuff in our code, you can read <a href="https://leanprover-community.github.io/blog/posts/semilinear-maps/">this blog post</a>.</p>



<a name="268582886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268582886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Roca González <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268582886">(Jan 19 2022 at 18:26)</a>:</h4>
<p>You're right: I said this because I didn't find the equivalent of <code>normed_group_hom.antilipschitz_of_norm_ge </code>, but after looking some more I found <code>linear_map.antilipschitz_of_bound </code>, which is basically what I needed. Thank you both.</p>



<a name="268583236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Continuous%20linear%20map%20to%20normed%20group%20hom/near/268583236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Continuous.20linear.20map.20to.20normed.20group.20hom.html#268583236">(Jan 19 2022 at 18:29)</a>:</h4>
<p>I think the def is still worth having in mathlib simply to show the statement is true, even if it's not useful</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>