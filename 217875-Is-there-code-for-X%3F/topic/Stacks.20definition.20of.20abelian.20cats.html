---
layout: archive
title: Zulip Chat Archive
permalink: /stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html">Stacks definition of abelian cats</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261597374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597374">(Nov 16 2021 at 04:41)</a>:</h4>
<p>Do we have a constructor for <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian">docs#category_theory.abelian</a> which directly follows the definition on the stacks project <a href="https://stacks.math.columbia.edu/tag/0109">https://stacks.math.columbia.edu/tag/0109</a> ?</p>



<a name="261597476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597476">(Nov 16 2021 at 04:44)</a>:</h4>
<p>I think we have only two constructors. The definition, and the one that avoids preadditive</p>



<a name="261597519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597519">(Nov 16 2021 at 04:44)</a>:</h4>
<p>In <code>src/category_theory/abelian/non_preadditive.lean</code></p>



<a name="261597549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597549">(Nov 16 2021 at 04:45)</a>:</h4>
<p>Yeah, those were the only two I found as well. And I'm fairly sure the answer is no, since <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.coimages.coimage">docs#category_theory.abelian.coimages.coimage</a> requires <code>[abelian A]</code> for some reason...</p>



<a name="261597631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597631">(Nov 16 2021 at 04:47)</a>:</h4>
<p>In both cases you need to provide</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">normal_mono</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">[</span><span class="n">mono</span> <span class="n">f</span><span class="o">],</span> <span class="n">normal_mono</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">normal_epi</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">[</span><span class="n">epi</span> <span class="n">f</span><span class="o">],</span> <span class="n">normal_epi</span> <span class="n">f</span><span class="o">)</span>
</code></pre></div>
<p>which is what you are trying to avoid, I guess</p>



<a name="261597638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597638">(Nov 16 2021 at 04:47)</a>:</h4>
<p>yeah exactly.</p>



<a name="261597723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261597723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261597723">(Nov 16 2021 at 04:49)</a>:</h4>
<p>As you can probably guess, I'm starting to think about how to formalize the fact that abelian sheaves form an abelian category. I want to do this with an arbitrary abelian category <code>A</code> as opposed to just <code>Ab</code>, since we could then apply it to <code>R</code>-mod as well. In any case, I'm finding working with <code>normal_mono</code> and <code>normal_epi</code> to be a big pain, and I think working directly with kernels/cokernels should be easier.</p>



<a name="261599249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261599249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261599249">(Nov 16 2021 at 05:20)</a>:</h4>
<p>I've never used normal mono/epi maps before. How hard is it to build the new stacks-like constructor?</p>



<a name="261599275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261599275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261599275">(Nov 16 2021 at 05:21)</a>:</h4>
<p>I'm trying now...</p>



<a name="261599348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261599348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261599348">(Nov 16 2021 at 05:22)</a>:</h4>
<p>Well, I didn't get very far, and I need to go to sleep. In case you want to give it a go, here's a skeleton:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">category_theory.abelian.basic</span>
<span class="kn">import</span> <span class="n">category_theory.additive.basic</span>

<span class="kn">namespace</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory.limits</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">additive_category</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">has_kernels</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">has_cokernels</span> <span class="n">C</span><span class="o">]</span>

<span class="kd">noncomputable theory</span>

<span class="kd">abbreviation</span> <span class="n">coim</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">cokernel</span> <span class="o">(</span><span class="n">kernel.ι</span> <span class="n">f</span><span class="o">)</span>
<span class="kd">abbreviation</span> <span class="n">im</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">kernel</span> <span class="o">(</span><span class="n">cokernel.π</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">coim_to_im</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">coim</span> <span class="n">f</span> <span class="bp">⟶</span> <span class="n">im</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">cokernel.desc</span> <span class="n">_</span> <span class="o">(</span><span class="n">kernel.lift</span> <span class="n">_</span> <span class="n">f</span> <span class="o">(</span><span class="n">cokernel.condition</span> <span class="n">_</span><span class="o">))</span> <span class="bp">$</span>
  <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zero_comp</span><span class="o">,</span> <span class="n">kernel.condition</span><span class="o">,</span> <span class="n">category.assoc</span><span class="o">,</span> <span class="n">kernel.lift_ι</span><span class="o">]</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">abelian_of_coim_to_im</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">),</span> <span class="n">is_iso</span> <span class="o">(</span><span class="n">coim_to_im</span> <span class="n">f</span><span class="o">))</span> <span class="o">:</span> <span class="n">abelian</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">normal_mono</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">Z</span> <span class="o">:=</span> <span class="n">cokernel</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">g</span> <span class="o">:=</span> <span class="n">cokernel.π</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">w</span> <span class="o">:=</span> <span class="n">cokernel.condition</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">is_limit</span> <span class="o">:=</span> <span class="n">is_limit_aux</span> <span class="n">_</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">_</span> <span class="o">},</span>
  <span class="n">normal_epi</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span> <span class="o">}</span>

<span class="kd">end</span> <span class="n">category_theory</span>
</code></pre></div>



<a name="261603033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261603033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261603033">(Nov 16 2021 at 06:37)</a>:</h4>
<p>I'm looking at it</p>



<a name="261609766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609766">(Nov 16 2021 at 08:26)</a>:</h4>
<p>Is the empty category abelian?</p>



<a name="261609779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609779">(Nov 16 2021 at 08:26)</a>:</h4>
<p>According to the stacks project: yes</p>



<a name="261609823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609823">(Nov 16 2021 at 08:27)</a>:</h4>
<p>I'm surprised -- aren't they supposed to have a zero object? You don't mean the "zero category"?</p>



<a name="261609921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609921">(Nov 16 2021 at 08:28)</a>:</h4>
<p>According to mathlib, it has at least a zero object.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">category_theory.abelian.basic</span>
<span class="kn">import</span> <span class="n">category_theory.additive.basic</span>
<span class="kn">import</span> <span class="n">algebra.homology.exact</span>

<span class="kn">namespace</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory.limits</span>

<span class="kd">noncomputable</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">abelian</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_zero_object</span> <span class="n">A</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- works</span>
</code></pre></div>



<a name="261609957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609957">(Nov 16 2021 at 08:28)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/0109">https://stacks.math.columbia.edu/tag/0109</a> ?</p>
<p>I don't think that <span aria-label="this" class="emoji emoji-1f446" role="img" title="this">:this:</span>  gives you any objects.</p>



<a name="261609976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609976">(Nov 16 2021 at 08:29)</a>:</h4>
<p>It's the first axiom on Wikipedia</p>



<a name="261609997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261609997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261609997">(Nov 16 2021 at 08:29)</a>:</h4>
<p>Who is correcter, wiki or stacks?</p>



<a name="261610020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610020">(Nov 16 2021 at 08:29)</a>:</h4>
<p>Maybe some random dude wrote that wiki page. It's his word against Johan de Jong <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="261610137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610137">(Nov 16 2021 at 08:30)</a>:</h4>
<p>It seems reasonable for it to be abelian, though, no?</p>



<a name="261610166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610166">(Nov 16 2021 at 08:30)</a>:</h4>
<p>not for me, really. That's like saying it's reasonable for the empty set to be a group</p>



<a name="261610223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610223">(Nov 16 2021 at 08:31)</a>:</h4>
<p>Well, but I see the zero object being only defined by a universal property, which is satisfied for the empty category. I don't see the identity of a group as the same thing.</p>



<a name="261610314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610314">(Nov 16 2021 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Does the empty category have all finite products?</p>



<a name="261610340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610340">(Nov 16 2021 at 08:32)</a>:</h4>
<p>Answer: nope, it lacks the empty product</p>



<a name="261610344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610344">(Nov 16 2021 at 08:32)</a>:</h4>
<p>Which is bad, I think</p>



<a name="261610348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610348">(Nov 16 2021 at 08:32)</a>:</h4>
<p>it's not true that the universal property is satisfied for the empty category. Any universal property you write down for the zero object will say that there is some zero object surely.</p>



<a name="261610368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610368">(Nov 16 2021 at 08:33)</a>:</h4>
<p>Oh, nice! I see my mistake (and there are two, actually).</p>



<a name="261610383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610383">(Nov 16 2021 at 08:33)</a>:</h4>
<p>Johan (de Jong) is just wrong, he's written something, he's forgotten a bit, he's made mistakes before, it's a one man show, he relies on people fixing his stuff, just make a comment.</p>



<a name="261610391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610391">(Nov 16 2021 at 08:33)</a>:</h4>
<p>Thanks: OK, I give up my battle <span aria-label="white flag" class="emoji emoji-1f3f3" role="img" title="white flag">:white_flag:</span></p>



<a name="261610446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610446">(Nov 16 2021 at 08:34)</a>:</h4>
<p>When we were formalising schemes I noticed his definition of presheaf on a basis was wrong. Of course there are mistakes, nobody refereed this stuff.</p>



<a name="261610485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610485">(Nov 16 2021 at 08:34)</a>:</h4>
<p>I'll make a comment</p>



<a name="261610635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610635">(Nov 16 2021 at 08:36)</a>:</h4>
<p>In fact, I'll create a PR (-;</p>



<a name="261610896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261610896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261610896">(Nov 16 2021 at 08:39)</a>:</h4>
<p><a href="https://github.com/stacks/stacks-project/pull/120">https://github.com/stacks/stacks-project/pull/120</a></p>



<a name="261611201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261611201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261611201">(Nov 16 2021 at 08:43)</a>:</h4>
<p>Oh but he demands finite products in <a href="https://stacks.math.columbia.edu/tag/0104">https://stacks.math.columbia.edu/tag/0104</a> so he's OK</p>



<a name="261611327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261611327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261611327">(Nov 16 2021 at 08:44)</a>:</h4>
<p>Ooh, good point.</p>



<a name="261613585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261613585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261613585">(Nov 16 2021 at 09:08)</a>:</h4>
<p>I think</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span> <span class="n">D</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="n">D</span><span class="o">]</span> <span class="o">[</span><span class="n">has_finite_biproducts</span> <span class="n">D</span><span class="o">]</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">D</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">D</span> <span class="o">:=</span> <span class="n">biproduct</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ulift</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">0</span><span class="o">),</span> <span class="n">i.down.elim</span><span class="o">)</span> <span class="k">in</span> <span class="o">⟨</span><span class="n">Z</span><span class="o">⟩</span>
</code></pre></div>
<p>was missing.</p>



<a name="261620281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261620281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261620281">(Nov 16 2021 at 10:18)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Sorry free:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">abelian_of_coim_to_im</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">⦄</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">),</span> <span class="n">is_iso</span> <span class="o">(</span><span class="n">coim_to_im</span> <span class="n">f</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">abelian</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">normal_mono</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span> <span class="kd">by</span> <span class="n">exactI</span> <span class="n">normal_mono_of_mono</span> <span class="n">f</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">normal_epi</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span> <span class="kd">by</span> <span class="n">exactI</span> <span class="n">normal_epi_of_epi</span> <span class="n">f</span> <span class="n">h</span><span class="o">,</span> <span class="o">}</span>
</code></pre></div>



<a name="261620315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261620315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261620315">(Nov 16 2021 at 10:19)</a>:</h4>
<p>I pushed it to LTE:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code>commit 8c17a5d4821fa382eda233afbebf8dba1ccec540 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Johan Commelin &lt;johan@commelin.net&gt;
Date:   Tue Nov 16 10:17:38 2021 +0000

    abelian cats constructor a la Stacks

 src/for_mathlib/abelian_of_isom_thm.lean | 160 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 160 insertions(+)
</code></pre></div>



<a name="261620341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261620341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261620341">(Nov 16 2021 at 10:19)</a>:</h4>
<p>Did you mean "à la Stacks"?</p>



<a name="261620402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/261620402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#261620402">(Nov 16 2021 at 10:20)</a>:</h4>
<p>Sorry for my brutal asciification</p>



<a name="276325820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/276325820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#276325820">(Mar 23 2022 at 12:32)</a>:</h4>
<p>I hadn't noticed this thread, and was planning to work on exactly this constructor. Fortunately, while googling around to for an informal proof, I found the public archive of this thread. :-) I've done half the tidying-up work to move this to mathlib now, and just need to migrate some more lemmas into earlier files and write more doc-strings.</p>



<a name="276326487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/276326487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#276326487">(Mar 23 2022 at 12:38)</a>:</h4>
<p>search engines are noticing our efforts... I like it</p>



<a name="276763241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/217875-Is%20there%20code%20for%20X%3F/topic/Stacks%20definition%20of%20abelian%20cats/near/276763241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/217875-Is-there-code-for-X%3F/topic/Stacks.20definition.20of.20abelian.20cats.html#276763241">(Mar 27 2022 at 04:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/12972">#12972</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>