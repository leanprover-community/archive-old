---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/mysterious.20message.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html">mysterious message</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202401144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401144">(Jun 30 2020 at 06:56)</a>:</h4>
<p>Can you help me make sense of this error message?</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">and</span><span class="bp">.</span><span class="n">intro</span> <span class="n">h10</span><span class="bp">.</span><span class="n">right</span><span class="bp">.</span><span class="n">left</span>
<span class="n">term</span>
  <span class="n">h10</span><span class="bp">.</span><span class="n">right</span><span class="bp">.</span><span class="n">left</span>
<span class="n">has</span> <span class="n">type</span>
   <span class="err">‹</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span> <span class="err">›</span>  <span class="err">∈</span> <span class="n">R</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
   <span class="err">‹</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span> <span class="err">›</span>  <span class="err">∈</span> <span class="n">R</span>
</code></pre></div>



<a name="202401173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401173">(Jun 30 2020 at 06:57)</a>:</h4>
<p>try <code>set_option pp.all true</code> in your file.</p>



<a name="202401379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401379">(Jun 30 2020 at 07:00)</a>:</h4>
<p>That causes<br>
invalid Boolean option value, 'true' or 'false' expected</p>



<a name="202401393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401393">(Jun 30 2020 at 07:00)</a>:</h4>
<p>Sorry, I forgot the <code>true</code> there. I've edited my original comment</p>



<a name="202401430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401430">(Jun 30 2020 at 07:01)</a>:</h4>
<p>Whew,  now I have a lot more to look at!</p>



<a name="202401587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401587">(Jun 30 2020 at 07:04)</a>:</h4>
<p>but the mystery is still there:</p>
<div class="codehilite"><pre><span></span><code><span class="n">has</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">Model</span><span class="bp">.</span><span class="n">mem</span> <span class="n">M</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="o">(</span><span class="bp">@</span><span class="n">Model</span><span class="bp">.</span><span class="n">ordered_pair</span> <span class="n">M</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="n">R</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">Model</span><span class="bp">.</span><span class="n">mem</span> <span class="n">M</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="o">(</span><span class="bp">@</span><span class="n">Model</span><span class="bp">.</span><span class="n">ordered_pair</span> <span class="n">M</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="n">R</span>
</code></pre></div>



<a name="202401688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401688">(Jun 30 2020 at 07:06)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ?</p>



<a name="202401702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401702">(Jun 30 2020 at 07:06)</a>:</h4>
<p>Could be a universe issue, you could set_option pp.universes true</p>



<a name="202401860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401860">(Jun 30 2020 at 07:09)</a>:</h4>
<p>I don't think that changed the output messages at all.</p>



<a name="202401930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401930">(Jun 30 2020 at 07:10)</a>:</h4>
<p>What about <code>set_option pp.all true</code>?</p>



<a name="202401936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401936">(Jun 30 2020 at 07:10)</a>:</h4>
<p>See above,  that was the first suggestion.</p>



<a name="202401964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202401964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202401964">(Jun 30 2020 at 07:11)</a>:</h4>
<p>ok, we really need a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="202402038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202402038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202402038">(Jun 30 2020 at 07:13)</a>:</h4>
<p>Well,  I only have a maximal working example.   My file is 385 lines.</p>



<a name="202402127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202402127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202402127">(Jun 30 2020 at 07:14)</a>:</h4>
<p>I  was hoping it was easy for you people.. but if not I guess I'll just delete that proof and try it again some other way.</p>



<a name="202402409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202402409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202402409">(Jun 30 2020 at 07:20)</a>:</h4>
<p>If your file is self-contained, you can just upload it as an attachment on zulip.</p>



<a name="202402470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202402470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202402470">(Jun 30 2020 at 07:21)</a>:</h4>
<p>How do I upload an attachment?</p>



<a name="202402508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202402508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202402508">(Jun 30 2020 at 07:21)</a>:</h4>
<p>You can post it on <a href="http://gist.github.com">gist.github.com</a> as well. You upload an attachment by clicking on the paper clip under the box where you type messages</p>



<a name="202403866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202403866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202403866">(Jun 30 2020 at 07:43)</a>:</h4>
<p><a href="/user_uploads/3121/_umtDcJabfiO8VE0L3k-x9yX/inf.lean">inf.lean</a> </p>
<p>OK there is my file that produces the error message about which I posted.</p>



<a name="202404195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202404195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202404195">(Jun 30 2020 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="284844">@Michael Beeson</span> </p>
<p>I've modified your example slightly, and I get the actual error message.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">paste_members</span><span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span><span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span><span class="o">:</span><span class="n">M</span><span class="o">),</span> <span class="n">Rel</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">Rel</span> <span class="n">S</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">:</span><span class="n">M</span><span class="o">,</span> <span class="o">(</span><span class="err">‹</span> <span class="o">(</span><span class="n">single</span> <span class="o">(</span><span class="n">single</span> <span class="n">x</span><span class="o">)),</span> <span class="err">‹</span> <span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="err">›</span> <span class="err">›</span> <span class="err">∈</span> <span class="n">paste</span> <span class="n">M</span> <span class="n">R</span> <span class="n">S</span> <span class="bp">↔</span>
                                   <span class="err">‹</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="err">›</span> <span class="err">∈</span> <span class="n">R</span> <span class="bp">∧</span> <span class="err">‹</span><span class="n">x</span><span class="o">,</span><span class="n">z</span><span class="err">›</span> <span class="err">∈</span>  <span class="n">S</span>
                                  <span class="o">)</span> <span class="o">:=</span>
  <span class="k">assume</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span><span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span><span class="o">:</span><span class="n">M</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h1</span><span class="o">:</span> <span class="n">Rel</span> <span class="o">(</span><span class="n">inv</span> <span class="o">(</span><span class="n">proj1</span><span class="o">:</span><span class="n">M</span><span class="o">)),</span> <span class="k">from</span> <span class="n">inverse_axiom1</span> <span class="n">proj1</span> <span class="o">(</span><span class="n">rel_proj1</span> <span class="n">M</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h2</span><span class="o">:</span> <span class="n">Rel</span> <span class="o">(</span><span class="n">inv</span> <span class="o">(</span><span class="n">proj2</span><span class="o">:</span><span class="n">M</span><span class="o">)),</span> <span class="k">from</span> <span class="n">inverse_axiom1</span> <span class="n">proj2</span> <span class="o">(</span><span class="n">rel_proj2</span> <span class="n">M</span><span class="o">),</span>
  <span class="k">begin</span>
    <span class="n">intros</span> <span class="n">hr</span> <span class="n">hs</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">paste</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">(</span><span class="n">intersection_axiom</span> <span class="o">(</span><span class="n">join</span> <span class="n">R</span> <span class="o">(</span><span class="n">inv</span> <span class="n">proj1</span><span class="o">))</span> <span class="o">(</span><span class="n">join</span> <span class="n">S</span> <span class="o">(</span><span class="n">inv</span> <span class="n">proj2</span><span class="o">))</span> <span class="err">‹</span> <span class="n">single</span> <span class="o">(</span><span class="n">single</span> <span class="n">x</span><span class="o">),</span> <span class="err">‹</span> <span class="n">y</span><span class="o">,</span><span class="n">z</span> <span class="err">›</span>  <span class="err">›</span><span class="o">),</span>
    <span class="n">rw</span> <span class="o">(</span><span class="n">join_axiom</span> <span class="n">R</span> <span class="o">(</span><span class="n">inv</span> <span class="n">proj1</span><span class="o">)</span> <span class="n">hr</span> <span class="n">h1</span> <span class="err">‹</span> <span class="n">single</span> <span class="o">(</span><span class="n">single</span> <span class="n">x</span><span class="o">),</span> <span class="err">‹</span> <span class="n">y</span><span class="o">,</span><span class="n">z</span> <span class="err">›</span>  <span class="err">›</span><span class="o">),</span>
    <span class="n">rw</span> <span class="o">(</span><span class="n">join_axiom</span> <span class="n">S</span> <span class="o">(</span><span class="n">inv</span> <span class="n">proj2</span><span class="o">)</span> <span class="n">hs</span> <span class="n">h2</span> <span class="err">‹</span> <span class="n">single</span> <span class="o">(</span><span class="n">single</span> <span class="n">x</span><span class="o">),</span> <span class="err">‹</span> <span class="n">y</span><span class="o">,</span><span class="n">z</span> <span class="err">›</span>  <span class="err">›</span><span class="o">),</span>
    <span class="n">apply</span> <span class="n">iff</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">intro</span> <span class="n">h3</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h3</span> <span class="k">with</span> <span class="n">h4</span> <span class="n">h5</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h4</span> <span class="k">with</span> <span class="n">x</span> <span class="n">h6</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h6</span> <span class="k">with</span> <span class="n">y</span> <span class="n">h8</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h5</span> <span class="k">with</span> <span class="n">x</span> <span class="n">h7</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h7</span> <span class="k">with</span> <span class="n">z</span> <span class="n">h9</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h8</span> <span class="k">with</span> <span class="n">z</span> <span class="n">h10</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h9</span> <span class="k">with</span> <span class="n">z</span> <span class="n">h11</span><span class="o">,</span>
        <span class="n">refine</span> <span class="n">and</span><span class="bp">.</span><span class="n">intro</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
        <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="n">h10</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
          <span class="n">exact</span> <span class="n">this</span> <span class="o">}</span>
      <span class="o">},</span>
      <span class="o">{</span>

      <span class="o">}</span>

  <span class="kn">end</span>
</code></pre></div>



<a name="202404288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202404288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202404288">(Jun 30 2020 at 07:49)</a>:</h4>
<p>Essentially, you have multiple variables called <code>x</code> and <code>y</code>,  and <code>h10.right.left</code> has a different <code>x</code> and/or <code>y</code> compared to the goal</p>



<a name="202404410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202404410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202404410">(Jun 30 2020 at 07:50)</a>:</h4>
<p>Thank you.   I have made other errors having multiple variables with the same name.   I am a slow learner...</p>



<a name="202404420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202404420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202404420">(Jun 30 2020 at 07:50)</a>:</h4>
<p>Exactly. After the <code>cases h9</code>, you have in your proof state</p>
<div class="codehilite"><pre><span></span><code><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">x</span> <span class="n">y</span> <span class="n">x</span> <span class="n">z</span> <span class="n">z</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span>
</code></pre></div>


<p>So three different things are named <code>x</code></p>



<a name="202404446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202404446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202404446">(Jun 30 2020 at 07:51)</a>:</h4>
<p>(and three are named <code>z</code> and two are named <code>y</code>!)</p>



<a name="202430007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202430007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202430007">(Jun 30 2020 at 12:52)</a>:</h4>
<p>Lean's error message could be better here. I know there are already some situations where it warns about having two variables with the same name.</p>



<a name="202499421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202499421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202499421">(Jun 30 2020 at 21:47)</a>:</h4>
<p>This multiple variables with the same name issue is really awful. I was never convinced by arguments in favor of not warning the user here, except when the name is <code>this</code>.</p>



<a name="202503405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202503405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202503405">(Jun 30 2020 at 22:32)</a>:</h4>
<p>Can autogenerated variables names collide with existing ones? If so a warning could be annoying to work around sometimes. (Or it could only warn about variables the user explicitly named.) But if Lean is going to produce an error anyways, then there's absolutely no reason not to emit a warning as well.</p>



<a name="202535675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202535675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202535675">(Jul 01 2020 at 06:43)</a>:</h4>
<p>My experience with auto-generated variables is that it depends on the tactic. For example <code>have</code> will make as many <code>this</code>s as you will ever need</p>



<a name="202571675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/202571675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#202571675">(Jul 01 2020 at 13:58)</a>:</h4>
<p>I guess I meant other than <code>this</code>.</p>



<a name="209206975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209206975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209206975">(Sep 06 2020 at 03:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">default_priority</span> <span class="mi">100</span>
<span class="n">reserve</span> <span class="kn">infix</span> <span class="bp">`</span> <span class="err">∈</span> <span class="bp">`</span> <span class="o">:</span> <span class="mi">49</span>
<span class="n">class</span>  <span class="n">Model</span> <span class="o">(</span><span class="n">M</span><span class="o">:</span><span class="kt">Type</span><span class="o">)</span>  <span class="o">:=</span>
<span class="o">(</span><span class="n">mem</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">pair</span><span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span>
<span class="o">(</span><span class="n">single</span><span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span>
<span class="o">(</span><span class="kn">infix</span>  <span class="err">∈</span>  <span class="o">:=</span>  <span class="n">mem</span> <span class="o">)</span>
<span class="o">(</span><span class="kn">notation</span> <span class="bp">`</span><span class="o">{</span><span class="bp">`</span> <span class="n">a</span> <span class="bp">`</span><span class="o">,</span><span class="bp">`</span> <span class="n">b</span> <span class="bp">`</span><span class="o">}</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">pair</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>
<span class="o">(</span><span class="n">extensionality_axiom</span><span class="o">:</span>  <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">mem</span> <span class="n">x</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">mem</span> <span class="n">x</span> <span class="n">b</span><span class="o">))</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">=</span><span class="n">b</span><span class="o">)</span>
<span class="o">(</span><span class="n">pairing_axiom</span><span class="o">:</span>  <span class="bp">∀</span> <span class="n">x</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">}</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">∨</span>  <span class="n">x</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)))</span>
<span class="o">(</span> <span class="n">single_definition</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">single</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span><span class="o">,</span><span class="n">x</span><span class="o">})</span>
<span class="o">(</span><span class="kn">notation</span> <span class="bp">`</span><span class="o">{</span><span class="bp">`</span> <span class="n">a</span> <span class="bp">`</span><span class="o">,</span><span class="bp">`</span> <span class="n">b</span> <span class="bp">`</span><span class="o">}</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">pair</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">Model</span>
<span class="kn">infix</span>  <span class="err">∈</span> <span class="o">:=</span>  <span class="n">mem</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="o">{</span><span class="bp">`</span> <span class="n">a</span> <span class="bp">`</span><span class="o">,</span><span class="bp">`</span> <span class="n">b</span> <span class="bp">`</span><span class="o">}</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">pair</span> <span class="n">a</span> <span class="n">b</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">M</span><span class="o">:</span><span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">Model</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="n">X</span> <span class="n">R</span> <span class="n">W</span><span class="o">:</span> <span class="n">M</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">symmetry_test2</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">:</span><span class="n">M</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="bp">=</span><span class="n">b</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span><span class="o">):=</span>
 <span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">symmetry</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
 <span class="kn">end</span>
</code></pre></div>


<p>The line "symmetry at h"  third from the bottom generates <br>
"invalid 'begin-end' expression, ',' expected"<br>
and the next line generates "sync",  although the <br>
lemma does type-check.   I got here when an attempted<br>
use of "symmetry" generated a similar error, but in that<br>
case the proof wouldn't check.    The example above<br>
can be copied and checked.   Probably you could remove<br>
many of the class members.   If you remove "at h" the <br>
error goes away, indicating that the syntax elsewhere is OK.<br>
But it should be OK with "at h" as shown;  indeed it is OK enough<br>
to type-check...</p>



<a name="209208853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209208853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209208853">(Sep 06 2020 at 04:35)</a>:</h4>
<p>It's just that <code>symmetry</code> doesn't accept an <code>at</code> keyword.</p>



<a name="209208862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209208862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209208862">(Sep 06 2020 at 04:35)</a>:</h4>
<p>If you hover over <code>symmetry</code> to get the tooltip, or look at <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#symmetry">tactic#symmetry</a>, you'll see it only operates on the goal.</p>



<a name="209208909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209208909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209208909">(Sep 06 2020 at 04:36)</a>:</h4>
<p>I agree it would be nice if it accepted this, and indeed this would be an excellent tactic project for someone wanting to learn about writing tactics.</p>



<a name="209208920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209208920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209208920">(Sep 06 2020 at 04:37)</a>:</h4>
<p>If you <code>import tactic.basic</code>, then you can use <code>replace h := h.symm</code> in the meantime.</p>



<a name="209208923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209208923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209208923">(Sep 06 2020 at 04:38)</a>:</h4>
<p>(or indeed just <code>exact h.symm</code>)</p>



<a name="209209665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209209665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209209665">(Sep 06 2020 at 05:02)</a>:</h4>
<p>You can't define notations starting with <code>{</code>. Bad Things will happen. All notations starting with <code>{</code> are defined inside the C++ code</p>



<a name="209209731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209209731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209209731">(Sep 06 2020 at 05:05)</a>:</h4>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/find/symmetry'">docs#symmetry'</a> a thing?</p>



<a name="209209777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209209777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209209777">(Sep 06 2020 at 05:06)</a>:</h4>
<p>guess not</p>



<a name="209210064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209210064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209210064">(Sep 06 2020 at 05:17)</a>:</h4>
<p>I started implementing it, but then I found <code>symmetry'</code> is in <code>tactic/apply.lean</code></p>



<a name="209210119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209210119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209210119">(Sep 06 2020 at 05:19)</a>:</h4>
<p>We should really beg and plead those <code>tactic'</code> versions until they give up and move to core to merge themselves with the unprimed versions.</p>



<a name="209210407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209210407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209210407">(Sep 06 2020 at 05:28)</a>:</h4>
<p>It looks like one difference with <code>symmetry'</code> versus <code>symmetry</code> is that when it applies to the goal, it uses <code>tactic.symmetry'</code>, which uses <code>retry_apply</code> rather than <code>apply_core</code> to apply the symmetry lemma.  This <code>retry_apply</code> tries <code>apply_core</code> first, but then it does some sort of try-to-apply-harder routine if that fails.</p>



<a name="209210574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/mysterious%20message/near/209210574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/mysterious.20message.html#209210574">(Sep 06 2020 at 05:34)</a>:</h4>
<p>Here's a tracking issue for the primed tactics, though it hasn't been updated in a while: <a href="https://github.com/leanprover-community/lean/issues/124">lean#124</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>