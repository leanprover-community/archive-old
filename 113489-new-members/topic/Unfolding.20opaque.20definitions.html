---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html">Unfolding opaque definitions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="278204306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278204306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278204306">(Apr 07 2022 at 18:08)</a>:</h4>
<p>Please tell me there's a better way than this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unfold</span> <span class="n">has_lt.lt</span> <span class="n">preorder.lt</span> <span class="n">partial_order.lt</span> <span class="n">linear_order.lt</span> <span class="n">at</span> <span class="n">tri</span>
</code></pre></div>



<a name="278204405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278204405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278204405">(Apr 07 2022 at 18:09)</a>:</h4>
<p><code>dsimp</code> fails to simplify, so does <code>norm_cast</code></p>



<a name="278204554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278204554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278204554">(Apr 07 2022 at 18:10)</a>:</h4>
<p>You can use <code>change</code> (<a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.interactive.change">docs#tactic.interactive.change</a>)</p>



<a name="278204597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278204597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278204597">(Apr 07 2022 at 18:10)</a>:</h4>
<p>But with more context we coul probably give you a better solution.</p>



<a name="278205588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278205588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278205588">(Apr 07 2022 at 18:19)</a>:</h4>
<p>nah, <code>change</code> was basically what I wanted in this case<br>
in general it'd be cool if I could just unfold "everything with a field syntax" but that might have problems in the general case</p>



<a name="278208157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278208157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278208157">(Apr 07 2022 at 18:40)</a>:</h4>
<p><code>change</code> is brittle, it's usually nicer to have a <code>..._def</code> lemma</p>



<a name="278212853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278212853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278212853">(Apr 07 2022 at 19:13)</a>:</h4>
<p>Usually this means you should write a lemma with a proof of <code>rfl</code> to do the unfolding for you</p>



<a name="278213647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278213647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278213647">(Apr 07 2022 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="359992">@Robert Maxton</span> I think <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#unfold_proj">tactic#unfold_proj</a> might be what you're looking for (whether or not it might be the "right" thing to do).</p>



<a name="278213778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278213778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278213778">(Apr 07 2022 at 19:21)</a>:</h4>
<p>indeed it is. it's a little overenthusiastic but I can hardly complain</p>



<a name="278213781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278213781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278213781">(Apr 07 2022 at 19:21)</a>:</h4>
<p>thanks :p</p>



<a name="278214401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20opaque%20definitions/near/278214401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20opaque.20definitions.html#278214401">(Apr 07 2022 at 19:26)</a>:</h4>
<p>It has some configuration options (same ones as <code>dsimp</code>), so for example <code>unfold_projs at h {single_pass := tt}</code>. With this you could do <code>iterate 3 { unfold_projs at h {single_pass := tt} }</code> for instance.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>