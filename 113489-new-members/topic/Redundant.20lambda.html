---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Redundant.20lambda.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html">Redundant lambda</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="309229736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309229736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309229736">(Nov 11 2022 at 17:01)</a>:</h4>
<p>This is a really stupid question, but I really don't know (I am not trolling).</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">change</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>How do I change <code>(λ x : ℕ, x + 1) 2</code> to <code>2 + 1</code> using <code>rw</code> instead of <code>change</code> please? Using <code>change</code> is really annoying when the term gets longer.</p>



<a name="309230321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309230321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309230321">(Nov 11 2022 at 17:05)</a>:</h4>
<p>Why do you want to use <code>rw</code>? <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#dsimp">tactic#dsimp</a> can perform beta reduction.</p>



<a name="309230396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309230396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309230396">(Nov 11 2022 at 17:05)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[],</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="309230801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309230801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309230801">(Nov 11 2022 at 17:08)</a>:</h4>
<p>Can you please give me a <code>rw</code> lemma? I usually want to avoid <code>dsimp</code>s.</p>



<a name="309230837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309230837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309230837">(Nov 11 2022 at 17:08)</a>:</h4>
<p>Using <code>dsimp</code> is the right thing to do, but does <code>refl</code> work without anything else?</p>



<a name="309230973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309230973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309230973">(Nov 11 2022 at 17:09)</a>:</h4>
<p>I think that also something like <code>change _ + _ = _</code> should work, saving some work</p>



<a name="309231308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309231308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309231308">(Nov 11 2022 at 17:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309230837">said</a>:</p>
<blockquote>
<p>Using <code>dsimp</code> is the right thing to do, but does <code>refl</code> work without anything else?</p>
</blockquote>
<p>Yes <code>refl</code> works. However, my point was not to prove <code>2+1</code> but to provide a MWE. Having stuff like <code>(λ x : ℕ, x + 1) 2</code> inside real proofs sucks.</p>



<a name="309231460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309231460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309231460">(Nov 11 2022 at 17:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309230973">said</a>:</p>
<blockquote>
<p>I think that also something like <code>change _ + _ = _</code> should work, saving some work</p>
</blockquote>
<p>I know it works but it is sometimes too verbose even with those underscores.</p>



<a name="309231719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309231719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309231719">(Nov 11 2022 at 17:14)</a>:</h4>
<p>Maybe the question is why do you want to avoid <code>dsimp</code>, whose work is exactly this (among other things)</p>



<a name="309232082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232082">(Nov 11 2022 at 17:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309230801">said</a>:</p>
<blockquote>
<p>Can you please give me a <code>rw</code> lemma? I usually want to avoid <code>dsimp</code>s.</p>
</blockquote>
<p>Why do you want to avoid <code>dsimp</code>s in the first place? After you finish the proof, you can delete all redundant dsimps (and most of the time, all of them are redundant).</p>
<p>If you want a <code>rw</code> lemma, you can make it easily:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">beta</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">beta</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>But try not to use it in real proofs, because it's an anti-pattern.</p>



<a name="309232158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232158">(Nov 11 2022 at 17:17)</a>:</h4>
<p>People usually don't want <code>dsimp</code> to stay inside the proof after the proof is finished. However, it hinders readability if I have to read stuff like <code>(λ x : ℕ, x + 1) 2</code> later when I refactor my proof. Moreover <code>dsimp</code> sometimes does too much and I don't want to deal with it.</p>



<a name="309232271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232271">(Nov 11 2022 at 17:18)</a>:</h4>
<p>Is there no such lemma inside the Lean core?</p>



<a name="309232282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232282">(Nov 11 2022 at 17:18)</a>:</h4>
<p><code>dsimp only</code> is perfectly fine in a proof</p>



<a name="309232440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232440">(Nov 11 2022 at 17:19)</a>:</h4>
<p>Thanks for clarification. Still <code>dsimp only,</code> sounds wrong. I usually expect something to appear after <code>only</code>.</p>



<a name="309232648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232648">(Nov 11 2022 at 17:20)</a>:</h4>
<p>But it does what you want right? I am not in front of a computer</p>



<a name="309232680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309232680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309232680">(Nov 11 2022 at 17:21)</a>:</h4>
<p>Yes, it does. Thanks.</p>



<a name="309233198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309233198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309233198">(Nov 11 2022 at 17:23)</a>:</h4>
<p>If <code>dsimp only</code> is the right thing to write, shouldn't we have an alias for it (which would make it sound idiomatic)?</p>



<a name="309234749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309234749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309234749">(Nov 11 2022 at 17:33)</a>:</h4>
<p>I don't know</p>



<a name="309236596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309236596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309236596">(Nov 11 2022 at 17:47)</a>:</h4>
<p><code>dsimp only</code> is already pretty idiomatic in my opinion</p>



<a name="309255196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309255196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309255196">(Nov 11 2022 at 20:13)</a>:</h4>
<p>When I write <code>dsimp only,</code> or <code>clear_except,</code> I feel like saying a transitive verb without an object.</p>



<a name="309261068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309261068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309261068">(Nov 11 2022 at 21:12)</a>:</h4>
<p>maybe you can think of it like "do you want <code>dsimp with extras</code>?" "no, I just want <code>dsimp only</code>"</p>



<a name="309261162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309261162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309261162">(Nov 11 2022 at 21:13)</a>:</h4>
<p>no idea how to make <code>clear_except</code> sound normal, though</p>



<a name="309341997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309341997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309341997">(Nov 12 2022 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> If you find <code>dsimp only</code> to be too linguistically irksome, you can write <code>dsimp only []</code>, which means the same thing as <code>dsimp only</code>.</p>
<p>You can see what kinds of reductions <code>dsimp</code> does in the last section of <a href="https://leanprover-community.github.io/extras/simp.html">https://leanprover-community.github.io/extras/simp.html</a> (look for every option for which the <code>dsimp</code> column has a <code>tt</code>).</p>



<a name="309343439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309343439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309343439">(Nov 12 2022 at 13:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="380294">Matt Diamond</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309261162">said</a>:</p>
<blockquote>
<p>no idea how to make <code>clear_except</code> sound normal, though</p>
</blockquote>
<p>We would have to make an alias like <code>clear_all</code> for <code>clear_except</code> without arguments. However, I don't think it is a good way how to develop a programming language. IMO it falls into the same category as <code>intros</code> and <code>variables</code>.</p>



<a name="309343799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309343799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309343799">(Nov 12 2022 at 14:02)</a>:</h4>
<p>I don't think I've ever used <code>clear_except</code>. What is the sort of scenario where you are finding you need to manage your context like this?</p>



<a name="309344143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309344143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309344143">(Nov 12 2022 at 14:04)</a>:</h4>
<p>Regarding <code>intros</code>, <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#rintro">tactic#rintro</a> is a more powerful replacement. <code>variables</code> has been fixed in Lean 4; it's always <code>variable</code> now.</p>



<a name="309345019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345019">(Nov 12 2022 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309343799">said</a>:</p>
<blockquote>
<p>I don't think I've ever used <code>clear_except</code>. What is the sort of scenario where you are finding you need to manage your context like this?</p>
<p>Maybe I don't use it because the style I use is writing lots of small lemmas that take few steps. I've used <code>clear</code> occasionally in conjuction with <code>induction</code> to make sure my induction hypothesis is correct, though.</p>
</blockquote>
<p>In past, I had many proofs by cases in my code where some of the cases were tautological, so I closed them by <code>{ clear_except, tauto, },</code> and continued to the next case. That said, most of these use cases disappeared from my code after I learned about <code>no_confusion</code> on inductive types.</p>



<a name="309345263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345263">(Nov 12 2022 at 14:13)</a>:</h4>
<p>I don't use that many small lemmas. Probably because I prefer to clutter my proofs rather than to clutter my namespace.</p>



<a name="309345346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345346">(Nov 12 2022 at 14:14)</a>:</h4>
<p>Where do you use <code>no_confusion</code>? I think there are usually other approaches than using it directly (like <code>cases h</code> or <code>injection h</code> when <code>h</code> is an equality. There's also <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#unify_equations">tactic#unify_equations</a>, which I occasionally use).</p>



<a name="309345502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345502">(Nov 12 2022 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309345263">said</a>:</p>
<blockquote>
<p>I don't use that many small lemmas. Probably because I prefer to clutter my proofs rather than to clutter my namespace.</p>
</blockquote>
<p>I suppose this is where the software engineering part of working with proof assistants comes in. If you find the right way to decompose your arguments into more generally useful sub-lemmas, then it's not cluttering your namespace, and you get to reuse sub-arguments.</p>



<a name="309345658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345658">(Nov 12 2022 at 14:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309345346">said</a>:</p>
<blockquote>
<p>Where do you use <code>no_confusion</code>? I think there are usually other approaches than using it directly (like <code>cases h</code> or <code>injection h</code> when <code>h</code> is an equality. There's also <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#unify_equations">tactic#unify_equations</a>, which I occasionally use).</p>
</blockquote>
<p>If you want to see <em>how often</em> I use <code>no_confusion</code>, look at these two commits I made the other day:<br>
<a href="https://github.com/madvorak/grammars/commit/850c2ab314d3602c0c8acb835f272514b9dd8ee1">https://github.com/madvorak/grammars/commit/850c2ab314d3602c0c8acb835f272514b9dd8ee1</a><br>
<a href="https://github.com/madvorak/grammars/commit/decbbe93874769b8e8bd0230813a77b7787538b9">https://github.com/madvorak/grammars/commit/decbbe93874769b8e8bd0230813a77b7787538b9</a></p>



<a name="309345900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309345900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309345900">(Nov 12 2022 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309345502">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309345263">said</a>:</p>
<blockquote>
<p>I don't use that many small lemmas. Probably because I prefer to clutter my proofs rather than to clutter my namespace.</p>
</blockquote>
<p>I suppose this is where the software engineering part of working with proof assistants comes in. If you find the right way to decompose your arguments into more generally useful sub-lemmas, then it's not cluttering your namespace, and you get to reuse sub-arguments.</p>
</blockquote>
<p>I usually try to follow the software-engineering best practices, but I am a dumb bitch.</p>



<a name="309346254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346254">(Nov 12 2022 at 14:20)</a>:</h4>
<p>Re your commits, for example you can do <code>exact option.no_confusion zeroth</code> -&gt; <code>cases zeroth</code> or <code>injection zeroth</code></p>



<a name="309346691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346691">(Nov 12 2022 at 14:23)</a>:</h4>
<p>I didn't know I could use <code>cases</code> on equalities! It works, but what does <code>cases</code> do with equalities in general?</p>



<a name="309346802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346802">(Nov 12 2022 at 14:24)</a>:</h4>
<p>Think about what <a href="https://leanprover-community.github.io/mathlib_docs/find/eq">docs#eq</a> is, an inductive type with a single constructor <code>rfl</code></p>



<a name="309346848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346848">(Nov 12 2022 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309346254">said</a>:</p>
<blockquote>
<p>Re your commits, for example you can do <code>exact option.no_confusion zeroth</code> -&gt; <code>cases zeroth</code> or <code>injection zeroth</code></p>
</blockquote>
<p>Still, we probably agree that my old style — discharging these simple situations by <code>tauto</code> — was stupid.</p>



<a name="309346853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346853">(Nov 12 2022 at 14:24)</a>:</h4>
<p>What <code>cases</code> does is try to solve for the fact that when you have <code>x = y</code> that <code>x</code> and <code>y</code> need to be definitionally the same for it to be <code>rfl : x = x</code></p>



<a name="309346931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346931">(Nov 12 2022 at 14:25)</a>:</h4>
<p>but when <code>cases</code> finds a contradiction, it'll automatically close the goal</p>



<a name="309346953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309346953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309346953">(Nov 12 2022 at 14:25)</a>:</h4>
<p>it's able to do some amount of <code>no_confusion</code> reasoning for you, basically.</p>



<a name="309347182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309347182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309347182">(Nov 12 2022 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309346802">said</a>:</p>
<blockquote>
<p>Think about what <a href="https://leanprover-community.github.io/mathlib_docs/find/eq">docs#eq</a> is, an inductive type with a single constructor <code>rfl</code></p>
</blockquote>
<p>I am shaken. I always thought that <code>=</code> was some kind of primitivum, not an inductive type, not a pi type either.</p>



<a name="309347390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309347390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309347390">(Nov 12 2022 at 14:29)</a>:</h4>
<p>See <a href="https://xenaproject.wordpress.com/2021/04/18/induction-on-equality/">this</a> post for more details.</p>



<a name="309348716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309348716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309348716">(Nov 12 2022 at 14:39)</a>:</h4>
<p>Back to the topic... Is there a consensus that using <code>dsimp,</code> in non-terminal positions is unacceptable but using <code>dsimp only,</code> in non-terminal positions is all right?</p>



<a name="309349069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349069">(Nov 12 2022 at 14:42)</a>:</h4>
<p>The consensus is that <code>dsimp</code> is OK everywhere, but that you should check whether you really needed it since sometimes it's removable.</p>



<a name="309349217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349217">(Nov 12 2022 at 14:43)</a>:</h4>
<p>It is often removable but doing so makes the proof unreadable for the next time.</p>



<a name="309349288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349288">(Nov 12 2022 at 14:44)</a>:</h4>
<p>Then don't remove it <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="309349326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349326">(Nov 12 2022 at 14:44)</a>:</h4>
<p>Is the consensus that <code>dsimp,</code> is OK when removing it breaks the proof and that <code>dsimp only,</code> is OK always?</p>



<a name="309349608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349608">(Nov 12 2022 at 14:46)</a>:</h4>
<p><code>dsimp only</code> is surely OK. Usually, even nonterminal <code>dsimp</code> are acceptable, but I personally think <code>dsimp only [...]</code> it's better.</p>



<a name="309349781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349781">(Nov 12 2022 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309341997">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> If you find <code>dsimp only</code> to be too linguistically irksome, you can write <code>dsimp only []</code>, which means the same thing as <code>dsimp only</code>.</p>
<p>You can see what kinds of reductions <code>dsimp</code> does in the last section of <a href="https://leanprover-community.github.io/extras/simp.html">https://leanprover-community.github.io/extras/simp.html</a> (look for every option for which the <code>dsimp</code> column has a <code>tt</code>).</p>
</blockquote>
<p><a href="/user_uploads/3121/D2BzXfXisqvXeCR08kNVew2K/image.png">image.png</a> <br>
This is the thing that shouted at my face.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/D2BzXfXisqvXeCR08kNVew2K/image.png" title="image.png"><img src="/user_uploads/3121/D2BzXfXisqvXeCR08kNVew2K/image.png"></a></div>



<a name="309349899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309349899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309349899">(Nov 12 2022 at 14:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/113489-new-members/topic/Redundant.20lambda/near/309349608">said</a>:</p>
<blockquote>
<p><code>dsimp only</code> is surely OK. Usually, even nonterminal <code>dsimp</code> are acceptable, but I personally think <code>dsimp only [...]</code> it's better.</p>
</blockquote>
<p>Then I have 24 <code>dsimp</code>s to refactor. Which is not that bad. Still, I hope I will use <code>dsimp</code> less often in the future.</p>



<a name="309350560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309350560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309350560">(Nov 12 2022 at 14:54)</a>:</h4>
<p>Ar you aware of <code>squeeze_dsimp</code>? It will do this for you.</p>



<a name="309350578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309350578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309350578">(Nov 12 2022 at 14:54)</a>:</h4>
<p>(but not 24 times at once)</p>



<a name="309361113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309361113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309361113">(Nov 12 2022 at 16:22)</a>:</h4>
<p><code>squeeze_dsimp</code> is not robust and is <a href="#narrow/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib/near/291254910">prone to return invalid results</a>; you may use <code>squeeze_simp</code> and remove unnecessary lemmas but that's more work.</p>
<p>Structure projection lemmas like <a href="https://leanprover-community.github.io/mathlib_docs/find/subtype.coe_mk">docs#subtype.coe_mk</a> are subsumed by <code>dsimp only</code>, but we still include them in mathlib, so I'd argue it's acceptable/desirable to have this lemma <code>lemma beta {α β : Sort*} {f : α → β} {x : α} : (λ (y : α), f y) x = f x := rfl</code> in mathlib as well to gain more fine control. (However, the LHS ⟨a,h⟩ of <a href="https://leanprover-community.github.io/mathlib_docs/find/subtype.coe_mk">docs#subtype.coe_mk</a> is prone to "motive type not correct" errors when rewriting <code>a</code>, so you do need to simplify it to RHS sometimes, and the same doesn't seem to apply to <code>(λ y, f y) x</code>.)</p>



<a name="309365511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309365511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309365511">(Nov 12 2022 at 17:06)</a>:</h4>
<p>An issue with <code>beta</code> as a rewrite lemma is that it requires higher order unification to apply (you need to solve for a function <code>f</code> -- you might have <code>y</code> appear multiple times in <code>f y</code> in general beta reduction). This version is closer to <code>congr_fun</code> of eta-reduction.</p>



<a name="309377379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Redundant%20lambda/near/309377379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Redundant.20lambda.html#309377379">(Nov 12 2022 at 19:04)</a>:</h4>
<p><code>squeeze_dsimp</code> is buggy though, right?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>