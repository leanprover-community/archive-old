---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html">Lean server mode - tactics</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206113798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206113798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Auguste Poiroux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206113798">(Aug 06 2020 at 08:03)</a>:</h4>
<p>Hello!</p>
<p>I'm trying to use Lean in server mode to get the status of a proof after applying a tactic. Currently, I'm using the full-sync function of lean-client-python (thanks to <span class="user-mention" data-user-id="115715">@Jason Rute</span> and <span class="user-mention" data-user-id="110031">@Patrick Massot</span>  for this great tool) to do that. The problem is that it's a bit slow (~0.2s). Is there another way to do this? From what I understand, we're working on a "file" that we sync with Lean. Is it possible, for example, to modify only a part of the file, so that we don't have to resync the whole file (and so that Lean doesn't rebuild it from scratch)? Also, I didn't find the doc for using Lean in server mode, where can I find it?</p>
<p>Thanks in advance!</p>



<a name="206114229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206114229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206114229">(Aug 06 2020 at 08:09)</a>:</h4>
<p>Regarding the delay, there's some previous (unresolved) discussion <a href="#narrow/stream/113488-general/topic/why.20does.20a.20sync.20command.20take.20so.20long.20in.20the.20lean.20server/near/195131227">here</a>. Sadly, there's no official docs on the commands in server mode. I was able to figure out how to work with it from <a href="https://github.com/leanprover/lean-client-js/blob/master/lean-client-js-core/src/commands.ts">the source code of <code>lean-client-js</code></a> (see also <a href="https://github.com/leanprover/lean-client-js/blob/master/lean-client-js-core/src/server.ts">this file</a>), but maybe <code>lean-client-python</code> is easier to read now. See also <a href="https://github.com/leanprover-community/lean-client-python/issues/15">https://github.com/leanprover-community/lean-client-python/issues/15</a></p>
<p>Maybe you've already seen this, but Jason gave a nice summary of the situation regarding Lean 3 server mode <a href="#narrow/stream/113488-general/topic/Examples.20of.20communicating.20with.20Lean/near/199253728">here</a>.</p>



<a name="206114821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206114821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Auguste Poiroux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206114821">(Aug 06 2020 at 08:18)</a>:</h4>
<p>Thank you very much! I got all the answers I need <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="206128005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206128005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206128005">(Aug 06 2020 at 11:17)</a>:</h4>
<p>And for anyone else coming to this thread who doesnâ€™t know already, the 0.2 seconds is hard coded into the lean server.  See the linked discussions above for more information.</p>



<a name="206131027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206131027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206131027">(Aug 06 2020 at 11:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321854">Auguste Poiroux</span> <a href="#narrow/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics/near/206113798">said</a>:</p>
<blockquote>
<p>I'm trying to use Lean in server mode to get the status of a proof after applying a tactic.</p>
</blockquote>
<p>Would you be willing to share what kind of application you are trying to build here, and also for your other thread where you say: </p>
<blockquote>
<p>Is there a tool to extract the whole structure of a Lean file? The goal is to extract all the tactics from each proof (for proof in tactic mode) and to transform a term proof into a tactic proof.</p>
</blockquote>



<a name="206131165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206131165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206131165">(Aug 06 2020 at 11:59)</a>:</h4>
<p>The reason I ask is that I've slowly been building some tools which do these sort of things.  I've worked on versions which use the Lean server (slow) and that don't (faster but more work to build).  Unfortunately, Lean doesn't have any form of nice tactic-level proof recording and doesn't have a great way to interact with it programatically.</p>



<a name="206131236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206131236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206131236">(Aug 06 2020 at 12:00)</a>:</h4>
<p>(Also, I initially missed your other conversation.  I don't follow the new member stream.)</p>



<a name="206139171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206139171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Auguste Poiroux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206139171">(Aug 06 2020 at 13:19)</a>:</h4>
<p>I am currently working with Stanislas Polu to do ML with Lean. My goal right now is to extract mathlib proofs in tactic mode. As you say, it's not an easy thing. But your tools are very useful to me. I'm also very interested in a tool that doesn't have that 0.2s delay. Do you think Lean4 will have a different (better) interface to do this?</p>



<a name="206145736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20server%20mode%20-%20tactics/near/206145736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20server.20mode.20-.20tactics.html#206145736">(Aug 06 2020 at 14:09)</a>:</h4>
<p>This topic was moved by <span class="user-mention silent" data-user-id="252300">Jalex Stark</span> to <a class="stream-topic" data-stream-id="113488" href="/#narrow/stream/113488-general/topic/Lean.20server.20mode.20-.20tactics">#general &gt; Lean server mode - tactics</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>