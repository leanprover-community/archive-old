---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Cube.20Root.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html">Cube Root</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276411113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276411113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276411113">(Mar 23 2022 at 22:38)</a>:</h4>
<p>Hi there, I was wondering what's the best way of working with <code>x^(1/3)</code> as a function <code>R -&gt; R</code>. </p>
<p>I had been using it freely until I remembered that if <code>x &lt; 0</code> then I don't think <code>real.pow</code> cuts it (since the output could be a complex in that case).</p>
<p>So would the best way to deal with this to be to use <code>complex.cpow</code>, and force it to be <code>R</code> with coercions?</p>



<a name="276412914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276412914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276412914">(Mar 23 2022 at 22:56)</a>:</h4>
<p>What function do you want? If you only need the nonnegative values then <code>x^(1/3)</code> is fine</p>



<a name="276412926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276412926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276412926">(Mar 23 2022 at 22:56)</a>:</h4>
<p>this is not the cube root you'll want; <code> (-1 : ℝ) ^ ((1 : ℝ) / 3) = real.cos (real.pi * 3⁻¹)</code></p>



<a name="276413107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413107">(Mar 23 2022 at 22:58)</a>:</h4>
<p>I forget how rpow is defined on negative numbers but I guess it's probably projecting from complex like you describe, so you won't get the nice answer for negative numbers and instead get what Eric said</p>



<a name="276413137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413137">(Mar 23 2022 at 22:58)</a>:</h4>
<p>(This doesn't answer the main question here, but there was a fun thread about the cube root function last year that I feel compelled to link: <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/222997128">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/222997128</a> )</p>



<a name="276413458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413458">(Mar 23 2022 at 23:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20Root/near/276412914">said</a>:</p>
<blockquote>
<p>What function do you want? If you only need the nonnegative values then <code>x^(1/3)</code> is fine</p>
</blockquote>
<p>I'm looking for the function which comes from this graph as a function <code>R -&gt; R</code>: <a href="/user_uploads/3121/uX1rTZBC6jE-a2kb8eo6VOhx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/uX1rTZBC6jE-a2kb8eo6VOhx/image.png" title="image.png"><img src="/user_uploads/3121/uX1rTZBC6jE-a2kb8eo6VOhx/image.png"></a></div>



<a name="276413491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413491">(Mar 23 2022 at 23:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20Root/near/276412926">said</a>:</p>
<blockquote>
<p>this is not the cube root you'll want; <code> (-1 : ℝ) ^ ((1 : ℝ) / 3) = real.cos (real.pi * 3⁻¹)</code></p>
</blockquote>
<p>Where can I learn more about that formula?</p>



<a name="276413521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413521">(Mar 23 2022 at 23:01)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/complex.cpow">docs#complex.cpow</a></p>



<a name="276413590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413590">(Mar 23 2022 at 23:02)</a>:</h4>
<p>(note that the real power is defined as the real part of that)</p>



<a name="276413639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413639">(Mar 23 2022 at 23:02)</a>:</h4>
<blockquote>
<p>The complex power function x^y, given by x^y = exp(y log x) (where log is the principal determination of the logarithm), unless x = 0 where one sets 0^0 = 1 and 0^y = 0 for y ≠ 0.</p>
</blockquote>
<p>Where did your <code>cos</code> come from?</p>



<a name="276413796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413796">(Mar 23 2022 at 23:04)</a>:</h4>
<p>Here's what it looks like: <a href="/user_uploads/3121/B-AX3i3rxnxgOz_2uIbdNFYX/cube-root.png">cube-root.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/B-AX3i3rxnxgOz_2uIbdNFYX/cube-root.png" title="cube-root.png"><img src="/user_uploads/3121/B-AX3i3rxnxgOz_2uIbdNFYX/cube-root.png"></a></div>



<a name="276413847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413847">(Mar 23 2022 at 23:04)</a>:</h4>
<p>the function is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">ℜ</mi><mo stretchy="false">[</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>y</mi><mi>log</mi><mo>⁡</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\Re[\exp(y\log x)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">ℜ</span><span class="mopen">[</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)]</span></span></span></span></p>



<a name="276413848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276413848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276413848">(Mar 23 2022 at 23:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="367659">Callum Cassidy-Nolan</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20Root/near/276413639">said</a>:</p>
<blockquote>
<blockquote>
<p>The complex power function x^y, given by x^y = exp(y log x) (where log is the principal determination of the logarithm), unless x = 0 where one sets 0^0 = 1 and 0^y = 0 for y ≠ 0.</p>
</blockquote>
<p>Where did your <code>cos</code> come from?</p>
</blockquote>
<p>maybe this code wil explain some:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="n">complex.cos</span> <span class="o">(</span><span class="bp">↑</span><span class="n">real.pi</span> <span class="bp">*</span> <span class="mi">3</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">+</span> <span class="n">complex.sin</span> <span class="o">(</span><span class="bp">↑</span><span class="n">real.pi</span> <span class="bp">*</span> <span class="mi">3</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">*</span> <span class="n">complex.I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">complex.cpow_def</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">complex.log_neg_one</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">real.pi</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">),</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">complex.exp_mul_I</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="276414114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414114">(Mar 23 2022 at 23:07)</a>:</h4>
<p>There are three solutions to x^3 = a in the complex plane, which form a triangle with one point on the real line and the other two above and below the line. For positive x we pick the solution that lies on the real line, and for negative x we pick the one at 60 degrees up</p>



<a name="276414228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414228">(Mar 23 2022 at 23:08)</a>:</h4>
<p>and then project down to the real line again to get the real function. That's why the negative function is the reflection of the positive one but scaled down by 1/2</p>



<a name="276414254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414254">(Mar 23 2022 at 23:08)</a>:</h4>
<p>What is <code>ite</code> ? <a href="/user_uploads/3121/hkA8Ke54ak71QmueX7jq0d00/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/hkA8Ke54ak71QmueX7jq0d00/image.png" title="image.png"><img src="/user_uploads/3121/hkA8Ke54ak71QmueX7jq0d00/image.png"></a></div>



<a name="276414265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414265">(Mar 23 2022 at 23:08)</a>:</h4>
<p>if-then-else</p>



<a name="276414292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414292">(Mar 23 2022 at 23:08)</a>:</h4>
<p>it has the syntax <code>if c then t else e</code></p>



<a name="276414796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276414796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Callum Cassidy-Nolan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276414796">(Mar 23 2022 at 23:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="367659">Callum Cassidy-Nolan</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20Root/near/276413491">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20Root/near/276412926">said</a>:</p>
<blockquote>
<p>this is not the cube root you'll want; <code> (-1 : ℝ) ^ ((1 : ℝ) / 3) = real.cos (real.pi * 3⁻¹)</code></p>
</blockquote>
<p>Where can I learn more about that formula?</p>
</blockquote>
<p>What would the general version <code>x^(1/3)</code> look like as <code>R -&gt; R</code> rather than just <code>(-1)^1/3)</code> ?</p>



<a name="276418513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276418513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276418513">(Mar 24 2022 at 00:01)</a>:</h4>
<p>I plotted it above</p>



<a name="276418528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20Root/near/276418528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20Root.html#276418528">(Mar 24 2022 at 00:01)</a>:</h4>
<p>for negative x it is <code>(-x)^(1/3) / 2</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>