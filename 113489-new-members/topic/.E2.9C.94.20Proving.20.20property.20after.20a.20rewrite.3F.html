---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html">✔ Proving  property after a rewrite?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="298221215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298221215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298221215">(Sep 11 2022 at 08:17)</a>:</h4>
<p>Hey!<br>
I have a <code>walk</code> on a simple graph, which I cast to a different (equal) simple graph, and want to prove that the cast walk satisfies the same properties as the original walk (see MWE). <br>
What I'd like to do, morally, is simply use the graph equality in a rewrite of the property that I want my cast walk to have, but this doesn't work.<br>
I believe I'm misunderstanding something basic here. Thanks!</p>
<p>(Off topic, but I don't think I qualify as a "new member": wouldn't a <code>beginner questions</code> channel be useful?)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">combinatorics.simple_graph.basic</span>
<span class="kn">import</span> <span class="n">combinatorics.simple_graph.connectivity</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">G</span> <span class="n">H</span> <span class="o">:</span> <span class="n">simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">=</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">e</span>
<span class="kd">def</span> <span class="n">walk_cast</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">G.walk</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">H.walk</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">e</span> <span class="n">at</span> <span class="n">p</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">p</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">walk_cast_supp</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">V</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">G.walk</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="o">(</span><span class="n">p.support.to_finset</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">walk_cast</span> <span class="n">G</span> <span class="n">H</span> <span class="n">e</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">support.to_finset</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">walk_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">e</span> <span class="n">at</span> <span class="n">hp</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="298222002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298222002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298222002">(Sep 11 2022 at 08:26)</a>:</h4>
<p>If one of the two graphs is a variable, as in your MWE, you can use <code>subst e</code>.</p>



<a name="298222341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298222341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298222341">(Sep 11 2022 at 08:30)</a>:</h4>
<p>and in general, I should just generalize in order to have it be a variable?</p>



<a name="298222634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298222634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298222634">(Sep 11 2022 at 08:34)</a>:</h4>
<p>This works: and it actually makes sense if I take the time to think in terms of terms. Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">combinatorics.simple_graph.basic</span>
<span class="kn">import</span> <span class="n">combinatorics.simple_graph.connectivity</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">G</span> <span class="n">H</span> <span class="o">:</span> <span class="n">simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">=</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">e</span>
<span class="kd">def</span> <span class="n">walk_cast</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">G.walk</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">H.walk</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">p</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">walk_cast_supp</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">V</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">G.walk</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="o">(</span><span class="n">p.support.to_finset</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">walk_cast</span> <span class="n">G</span> <span class="n">H</span> <span class="n">e</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">support.to_finset</span> <span class="o">:</span> <span class="n">set</span> <span class="n">V</span><span class="o">)</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">walk_cast</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="298222659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298222659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298222659">(Sep 11 2022 at 08:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



<a name="298232916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298232916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298232916">(Sep 11 2022 at 10:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as unresolved.</p>



<a name="298233097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298233097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298233097">(Sep 11 2022 at 10:34)</a>:</h4>
<p>Reopening because I'd like to get the big picture:<br>
In this specific case, I can have a lemma taking care of this, but in the general case, assuming I'm somewhere in a proof with neither ends of my equality a variable, and don't want to extract a lemma to take care of this transport of property: how would I proceed?</p>



<a name="298233169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298233169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298233169">(Sep 11 2022 at 10:35)</a>:</h4>
<p>Turn the equality into a graph isomorphism and then find/write the lemmas that show that all walk properties are graph properties (that is, they are transferred under graph isomorphisms).</p>



<a name="298234395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298234395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298234395">(Sep 11 2022 at 10:48)</a>:</h4>
<p>mmh, OK, makes sense, thanks!</p>



<a name="298234399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Proving%20%20property%20after%20a%20rewrite%3F/near/298234399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Proving.20.20property.20after.20a.20rewrite.3F.html#298234399">(Sep 11 2022 at 10:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>