---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html">get the two maps from an isomorphism</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279121843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279121843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279121843">(Apr 15 2022 at 20:45)</a>:</h4>
<p>given an isomorphism, e.g. here: <a href="https://leanprover-community.github.io/mathlib_docs/ring_theory/tensor_product.html#algebra.tensor_product.assoc">https://leanprover-community.github.io/mathlib_docs/ring_theory/tensor_product.html#algebra.tensor_product.assoc</a>, how do I extract the forward and backward maps? I tried <code>.hom</code> but it does not work</p>



<a name="279122004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122004">(Apr 15 2022 at 20:47)</a>:</h4>
<p>Simply use the isomorphism as a function to get the forward map. For the backward map, notice that it is the forward map of the reverse isomorphism (<code>e.symm</code> if <code>e</code> is the isomorphism) and do the same as before.</p>



<a name="279122300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122300">(Apr 15 2022 at 20:50)</a>:</h4>
<p>If you want to do it explicitly (e.g. if you need to pass in a linear map I to some other function) you can use <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_equiv.to_linear_map">docs#linear_equiv.to_linear_map</a> (best to do this with dot notation, i.e. <code>e.to_linear_map</code>)</p>



<a name="279122347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122347">(Apr 15 2022 at 20:51)</a>:</h4>
<p>And similarly <code>e.symm.to_linear_map</code> for the inverse.</p>



<a name="279122470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122470">(Apr 15 2022 at 20:52)</a>:</h4>
<p>OTOH it looks like there is a coe from linear equivs to linear maps, so you probably can just use <code>e</code> with no further decorations (hopefully)</p>



<a name="279122518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122518">(Apr 15 2022 at 20:52)</a>:</h4>
<p>I am trying to follow the first advice, and getting type mismatch:<br>
<code>def map2_1 : (K[X] ⊗[K] K[X] ⊗[K] K[X] →ₐ K[X] ⊗[K] (K[X] ⊗[K] K[X]) ) := (algebra.tensor_product.assoc K K[X] K[X] K[X])</code> gets me </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="bp">?</span><span class="n">m_1</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>
</code></pre></div>



<a name="279122896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122896">(Apr 15 2022 at 20:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279122300">said</a>:</p>
<blockquote>
<p>If you want to do it explicitly (e.g. if you need to pass in a linear map I to some other function) you can use <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_equiv.to_linear_map">docs#linear_equiv.to_linear_map</a> (best to do this with dot notation, i.e. <code>e.to_linear_map</code>)</p>
</blockquote>
<p>What if I want to have an algebra map from the algebra isomorphism? I tried <code>.to_algebra_map</code> but got</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">field</span> <span class="kd">notation</span><span class="o">,</span> <span class="bp">'</span><span class="n">to_algebra_map'</span> <span class="n">is</span> <span class="n">not</span> <span class="n">a</span> <span class="n">valid</span> <span class="s2">"field"</span> <span class="n">because</span> <span class="n">environment</span> <span class="n">does</span> <span class="n">not</span> <span class="n">contain</span> <span class="bp">'</span><span class="n">alg_equiv.to_algebra_map'</span>
  <span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span>
<span class="n">which</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>
</code></pre></div>



<a name="279122951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279122951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279122951">(Apr 15 2022 at 20:57)</a>:</h4>
<p>It might be called <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra_equiv.to_algebra_hom">docs#algebra_equiv.to_algebra_hom</a> ?</p>



<a name="279123018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123018">(Apr 15 2022 at 20:58)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/alg_equiv.to_alg_hom">docs#alg_equiv.to_alg_hom</a></p>



<a name="279123031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123031">(Apr 15 2022 at 20:58)</a>:</h4>
<p>Aha!</p>



<a name="279123051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123051">(Apr 15 2022 at 20:58)</a>:</h4>
<p>Since the types are respectively <a href="https://leanprover-community.github.io/mathlib_docs/find/alg_equiv">docs#alg_equiv</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/alg_hom">docs#alg_hom</a></p>



<a name="279123087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123087">(Apr 15 2022 at 20:59)</a>:</h4>
<p>The naming of all these conversions should be the obvious ones given the names of the types</p>



<a name="279123113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123113">(Apr 15 2022 at 20:59)</a>:</h4>
<p>The names of the types are a bit harder to guess</p>



<a name="279123457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123457">(Apr 15 2022 at 21:02)</a>:</h4>
<p>Hmm, that worked but now a composition of algebra homs is not an algebra hom...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.tensor_product</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>
<span class="n">open_locale</span> <span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">algebra.tensor_product</span>
<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">comul</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="n">polynomial.aeval</span> <span class="o">((</span><span class="n">polynomial.X</span> <span class="bp">⊗ₜ</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">⊗ₜ</span> <span class="n">polynomial.X</span><span class="o">))</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_1</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="bp">.</span><span class="n">to_alg_hom</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_2</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">map</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_3</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">map2_1</span> <span class="n">K</span><span class="o">)</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">map2_2</span> <span class="n">K</span><span class="o">)</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">map2_3</span> <span class="n">K</span><span class="o">)</span>
</code></pre></div>



<a name="279123581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123581">(Apr 15 2022 at 21:03)</a>:</h4>
<p>You have to use <a href="https://leanprover-community.github.io/mathlib_docs/find/alg_hom.comp">docs#alg_hom.comp</a>, not <code>∘</code> which is <a href="https://leanprover-community.github.io/mathlib_docs/find/function.comp">docs#function.comp</a>.</p>



<a name="279123684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279123684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279123684">(Apr 15 2022 at 21:04)</a>:</h4>
<p>You can also compose algebra isoms using <a href="https://leanprover-community.github.io/mathlib_docs/find/alg_equiv.trans">docs#alg_equiv.trans</a></p>



<a name="279124015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124015">(Apr 15 2022 at 21:07)</a>:</h4>
<p>So many new things! Thank you so much! Is there a nicer notation for <code>alg_hom.comp</code>? Something like <code>∘\_a</code>?</p>



<a name="279124042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124042">(Apr 15 2022 at 21:08)</a>:</h4>
<p>No, unfortunately not <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="279124125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124125">(Apr 15 2022 at 21:08)</a>:</h4>
<p>Got it, thanks!</p>



<a name="279124191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124191">(Apr 15 2022 at 21:09)</a>:</h4>
<p>Off-topic: would it make sense to create a stream called "help" so I don't flood "new members" with specific questions like this one?</p>



<a name="279124465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124465">(Apr 15 2022 at 21:12)</a>:</h4>
<p>Note: even though there is no nice notation for <code>alg_hom.comp</code> there is dot notation. So, if <code>f</code> and <code>g</code> are <code>alg_hom</code>s, then you can write <code>f.comp g</code> for <code>alg_hom.comp f g</code>.</p>



<a name="279124495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124495">(Apr 15 2022 at 21:12)</a>:</h4>
<p>As for the stream, I think the purpose of new members is mostly for helping new members.</p>



<a name="279124737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124737">(Apr 15 2022 at 21:16)</a>:</h4>
<p>While I have your attention, could I get advice on how to make Lean faster? I have this file here, which is 30 lines long, and takes over ten seconds to compile. Each time I change anything, I have to wait for a few seconds to see if it compiles, which really adds up. Here is the file:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.tensor_product</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>
<span class="n">open_locale</span> <span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">algebra.tensor_product</span>
<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">counit</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span> <span class="o">:=</span> <span class="n">polynomial.aeval</span> <span class="mi">0</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">comul</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="n">polynomial.aeval</span> <span class="o">((</span><span class="n">polynomial.X</span> <span class="bp">⊗ₜ</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">⊗ₜ</span> <span class="n">polynomial.X</span><span class="o">))</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map1</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">:=</span> <span class="n">alg_hom.comp</span> <span class="o">(</span><span class="n">map</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span><span class="o">))</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_1</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="bp">.</span><span class="n">to_alg_hom</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_2</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">map</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2_3</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">alg_hom.comp</span> <span class="o">(</span><span class="n">map2_1</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">alg_hom.comp</span> <span class="o">(</span><span class="n">map2_2</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">map2_3</span> <span class="n">K</span><span class="o">))</span>

<span class="kd">lemma</span> <span class="n">coassoc</span> <span class="o">:</span> <span class="n">map1</span> <span class="n">K</span> <span class="bp">=</span> <span class="n">map2</span> <span class="n">K</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">P</span> <span class="o">:</span> <span class="n">map1</span> <span class="n">K</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">map2</span> <span class="n">K</span> <span class="n">X</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">map1</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">comul</span><span class="o">,</span>

  <span class="gr">sorry</span><span class="o">,</span>

<span class="kd">end</span>
</code></pre></div>



<a name="279124776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124776">(Apr 15 2022 at 21:16)</a>:</h4>
<p>The reason I split <code>map2</code> into three different definitions is that otherwise it times out on compilation...</p>



<a name="279124834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124834">(Apr 15 2022 at 21:17)</a>:</h4>
<p>That's not an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, so I can't really tell what's going on.</p>



<a name="279124908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124908">(Apr 15 2022 at 21:18)</a>:</h4>
<p>First guess: try putting a <code>.</code> on the line after the imports.</p>



<a name="279124997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279124997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279124997">(Apr 15 2022 at 21:19)</a>:</h4>
<p>I know it's not a MWE. The problem is that each line takes a second or two, so as I try to make this example more minimal, the problem goes away</p>



<a name="279125170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125170">(Apr 15 2022 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> is this something that <code>noncomputable!</code> is supposed to help with? I don't really know the purpose of that yet.</p>



<a name="279125252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125252">(Apr 15 2022 at 21:20)</a>:</h4>
<p>By MWE, I mean that I don't have the <code>Hopf</code> file, so I can't open up what you sent me on my machine and have it compile to see if I can figure out where the problem is.</p>



<a name="279125260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125260">(Apr 15 2022 at 21:20)</a>:</h4>
<p>I don't really understand why my maps aren't computable, by the way. Mathematically, they are very explicit</p>



<a name="279125277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125277">(Apr 15 2022 at 21:21)</a>:</h4>
<p>This is because polynomials in mathlib are noncomputable by design.</p>



<a name="279125315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125315">(Apr 15 2022 at 21:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279125252">said</a>:</p>
<blockquote>
<p>By MWE, I mean that I don't have the <code>Hopf</code> file, so I can't open up what you sent me on my machine and have it compile to see if I can figure out where the problem is.</p>
</blockquote>
<p>My bad! I changed it now. Hopf just imports <code>ring_theory.tensor_product</code></p>



<a name="279125504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125504">(Apr 15 2022 at 21:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279124908">said</a>:</p>
<blockquote>
<p>First guess: try putting a <code>.</code> on the line after the imports.</p>
</blockquote>
<p>What does that do?</p>



<a name="279125860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279125860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279125860">(Apr 15 2022 at 21:28)</a>:</h4>
<p>I think it tells Lean to stop recompiling the stuff above, but I can't seem to find documentation to point you to. Maybe someone else can provide a better answer.</p>



<a name="279126331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279126331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279126331">(Apr 15 2022 at 21:35)</a>:</h4>
<p>The <code>.</code> prevents Lean from recompiling everything that's before <em>in the same file</em>. No point putting it just after the imports.</p>



<a name="279126397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279126397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279126397">(Apr 15 2022 at 21:36)</a>:</h4>
<p>What it does precisely is preventing Lean from recompiling what's before on a keystroke.</p>



<a name="279126768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279126768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279126768">(Apr 15 2022 at 21:41)</a>:</h4>
<p>The way <code>.</code> works is that it's part of the definition syntax -- when it's there then Lean says to itself "ok, this is definitely the end of the definition." That way when you change stuff after the <code>.</code>, Lean can restart processing from that checkpoint without reprocessing starting from the checkpoint immediately preceding the definition.</p>



<a name="279126969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279126969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279126969">(Apr 15 2022 at 21:44)</a>:</h4>
<p>Ah, now that I put it after my definition, it works a lot faster! Thanks.</p>



<a name="279127075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127075">(Apr 15 2022 at 21:45)</a>:</h4>
<p>You can also use <code>set_option profiler true</code> to figure out where Lean is spending its time.</p>



<a name="279127129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127129">(Apr 15 2022 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> It seems like <code>noncomputable!</code> doesn't help. The breakdown from <code>set_option profiler true</code> is that it's spending most of the time elaborating (I'm guessing typeclass search?). What <code>noncomputable!</code> helps with is time spent compiling VM code by not spending time doing that, but it doesn't do very much when Lean tells you you need <code>noncomputable</code> (in that case, it's already not doing VM compilation).</p>



<a name="279127163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127163">(Apr 15 2022 at 21:47)</a>:</h4>
<p>I am sorry but I have more questions. I am trying to use <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.aeval_X">docs#polynomial.aeval_X</a>. It uses a coersion of <code>aeval</code>. But my state has only a non-coerced <code>aeval</code>. Here is my state:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span>
<span class="n">_inst_1</span><span class="o">:</span> <span class="n">comm_semiring</span> <span class="n">K</span>
<span class="bp">⊢</span> <span class="bp">⇑</span><span class="o">((</span><span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="bp">.</span><span class="n">symm.to_alg_hom.comp</span> <span class="o">((</span><span class="n">map</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">aeval</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">X</span><span class="o">)))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">aeval</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">X</span><span class="o">))))</span> <span class="n">X</span> <span class="bp">=</span> <span class="bp">⇑</span><span class="o">((</span><span class="n">map</span> <span class="o">(</span><span class="n">aeval</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">X</span><span class="o">))</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">aeval</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">X</span><span class="o">)))</span> <span class="n">X</span>
</code></pre></div>
<p>I want to rewrite <code>aeval (X ⊗ₜ[K] 1 + 1 ⊗ₜ[K] X) X</code> as <code>X ⊗ₜ[K] 1 + 1 ⊗ₜ[K] X</code>. Here is the full file:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.tensor_product</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>
<span class="n">open_locale</span> <span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">algebra.tensor_product</span>
<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">counit</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span> <span class="o">:=</span> <span class="n">polynomial.aeval</span> <span class="mi">0</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">comul</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="n">polynomial.aeval</span> <span class="o">((</span><span class="n">polynomial.X</span> <span class="bp">⊗ₜ</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">⊗ₜ</span> <span class="n">polynomial.X</span><span class="o">))</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map1</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">:=</span> <span class="o">(</span><span class="n">algebra.tensor_product.assoc</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="bp">.</span><span class="n">symm.to_alg_hom.comp</span> <span class="o">((</span><span class="n">map</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span><span class="o">))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span><span class="o">))</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">map2</span> <span class="o">:</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="o">)</span> <span class="o">:=</span>  <span class="o">(</span><span class="n">map</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">alg_hom.id</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">comul</span> <span class="n">K</span> <span class="o">:</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">→ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">]</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span>
<span class="bp">.</span>

<span class="kd">lemma</span> <span class="n">coassoc</span> <span class="o">:</span> <span class="n">map1</span> <span class="n">K</span> <span class="bp">=</span> <span class="n">map2</span> <span class="n">K</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">P</span> <span class="o">:</span> <span class="n">map1</span> <span class="n">K</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">map2</span> <span class="n">K</span> <span class="n">X</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">map1</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">map2</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">comul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">aeval_X</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">X</span><span class="o">),</span> <span class="c1">-- why does this not work?</span>
  <span class="n">unfold</span> <span class="n">algebra.tensor_product.assoc</span><span class="o">,</span>


  <span class="gr">sorry</span><span class="o">,</span>

<span class="kd">end</span>
</code></pre></div>



<a name="279127167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127167">(Apr 15 2022 at 21:47)</a>:</h4>
<p>The only thing <code>noncomputable!</code> does when Lean already wants <code>noncomputable</code> to be there is to skip a certain check that tends not to be very expensive.</p>



<a name="279127317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127317">(Apr 15 2022 at 21:49)</a>:</h4>
<p><del>docs#polynomial.aeval_X</del> sorry, I didn't read well enough.</p>



<a name="279127968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279127968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279127968">(Apr 15 2022 at 21:58)</a>:</h4>
<p>Right, so in this case, you have <code>aeval</code> as an <code>alg_hom</code>, because it's composed with other <code>alg_hom</code>s. What you need is the lemma that says for <code>alg_hom</code>s <code>f</code> and <code>g</code>, <code>⇑(f.comp g) x = ⇑f (⇑g x)</code>. However, you can instead do a squeeze_simp after your first three unfolds to get a nicer goal, and this also takes care of your issue. The result of squeeze_simp for me was:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">alg_equiv.to_alg_hom_eq_coe</span><span class="o">,</span> <span class="n">alg_hom.coe_comp</span><span class="o">,</span> <span class="n">alg_equiv.coe_alg_hom</span><span class="o">,</span> <span class="n">function.comp_app</span><span class="o">,</span> <span class="n">aeval_X</span><span class="o">,</span> <span class="n">_root_.map_add</span><span class="o">,</span> <span class="n">map_tmul</span><span class="o">,</span> <span class="n">alg_hom.coe_id</span><span class="o">,</span> <span class="n">id.def</span><span class="o">,</span> <span class="n">aeval_one</span><span class="o">],</span>
</code></pre></div>



<a name="279128007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279128007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279128007">(Apr 15 2022 at 21:58)</a>:</h4>
<p>The lemma I was mentioning is in this list: <code>alg_hom.coe_comp</code> as well as <code>polynomial.aeval_X</code> because they are both simp lemmas.</p>



<a name="279130639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279130639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279130639">(Apr 15 2022 at 22:34)</a>:</h4>
<p>Another question (sorry!): <br>
how to I extract the actual map sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊗</mo><mo stretchy="false">(</mo><mi>b</mi><mo>⊗</mo><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \otimes (b \otimes c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>⊗</mo><mi>b</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">(a \otimes b) \otimes c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>  from <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.tensor_product.assoc">docs#algebra.tensor_product.assoc</a>?</p>



<a name="279131071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279131071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279131071">(Apr 15 2022 at 22:41)</a>:</h4>
<p>I suppose that map should do that on basic tensors by definition.</p>



<a name="279134951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279134951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279134951">(Apr 15 2022 at 23:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279126331">said</a>:</p>
<blockquote>
<p>The <code>.</code> prevents Lean from recompiling everything that's before <em>in the same file</em>. No point putting it just after the imports.</p>
</blockquote>
<p>At least from the orange sidebars it looks like putting the <code>.</code> after the imports does do something, it stops lean thinking the imports have changed and rechecking them when you work near the top of a file</p>



<a name="279134993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279134993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279134993">(Apr 15 2022 at 23:45)</a>:</h4>
<p>And the fact that the map on basic tensors does what it should is <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.tensor_product.assoc_tmul">docs#algebra.tensor_product.assoc_tmul</a></p>



<a name="279135649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279135649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279135649">(Apr 15 2022 at 23:57)</a>:</h4>
<p>It turns out <code>.</code> is a "command-like" that does nothing, so you can put in anywhere top-level commands can go, including right after the imports. That supports what <span class="user-mention" data-user-id="127136">@Alex J. Best</span> suggests about it preventing import reprocessing. <a href="https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/parser.cpp#L2877">https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/parser.cpp#L2877</a></p>
<p>This is in addition to it being part of the syntax for definition commands. It signals "end of equations." <a href="https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/definition_cmds.cpp#L579">https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/definition_cmds.cpp#L579</a></p>



<a name="279135742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279135742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279135742">(Apr 15 2022 at 23:58)</a>:</h4>
<p>That's good to know. I usually put <code>#check 37</code> or something right after the imports if I'm editing the first definition/theorem of a new file.</p>



<a name="279135910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279135910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279135910">(Apr 16 2022 at 00:00)</a>:</h4>
<p>(I think the reason for <code>.</code> in the definition syntax is to let you write zero-equation definitions like <code>example : false → false .</code>. This reprocessing stuff is a side-effect.)</p>



<a name="279155109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279155109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279155109">(Apr 16 2022 at 08:03)</a>:</h4>
<p>Oh, so the two <code>.</code> are actually one and the same? Interesting!</p>



<a name="279156966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279156966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279156966">(Apr 16 2022 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="414458">@Vasily Ilin</span> don't apologise for question spamming. We don't yet have extensive documentation and learning is made easier if you ask questions. The people subscribed to this stream are happy to help -- those that don't want to see a bunch of new members questions simply have this stream muted.</p>



<a name="279175820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279175820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279175820">(Apr 16 2022 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279155109">said</a>:</p>
<blockquote>
<p>Oh, so the two <code>.</code> are actually one and the same? Interesting!</p>
</blockquote>
<p>I'm not sure what you mean exactly, but to be clear there are two different meanings for <code>.</code>: the first signifies end-of-equations for the def/theorem/lemma/instance/example commands, and the second is a do-nothing command (which is actually older! It was <a href="https://github.com/leanprover-community/lean/commit/2e8ebb6d9eee45dfbcaeeca9c4fc5063b0fc634c">added by Leo in 2014</a> before you could even define or prove anything -- I'd guess the end-of-equations <code>.</code> was meant to feel like a special use of the do-nothing command).  Lean makes checkpoints between commands, so in the end all that matters is that the <code>.</code> character is able to clearly demarcate the end of a command (or, in the case of an isolated <code>.</code>, the clear beginning and end of an entire command).</p>
<p><code>.</code> is pretty overloaded, though, so it being clear depends on the command preceding it being complete. I was able to think of the following uses of <code>.</code>: separators for names, inaccessible patterns, tactic default arguments, decimal points for numeric literals, projection notation, end-of-equations, and the dot command.</p>



<a name="279175944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279175944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279175944">(Apr 16 2022 at 16:38)</a>:</h4>
<p>I got confused then. What you're describing is my understanding of things pre Kyle's yesterday message.</p>



<a name="279176060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279176060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279176060">(Apr 16 2022 at 16:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism/near/279126331">said</a>:</p>
<blockquote>
<p>The <code>.</code> prevents Lean from recompiling everything that's before <em>in the same file</em>. No point putting it just after the imports.</p>
</blockquote>
<p>There's sometimes a point putting <code>.</code> right after the imports, since, being a command, it induces Lean to create a checkpoint that prevents import re-processing, which feels like it sometimes takes a few seconds.</p>



<a name="279176074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279176074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279176074">(Apr 16 2022 at 16:41)</a>:</h4>
<p>But in the example, you were right that it wouldn't do anything, but it's since <code>open_locale</code> is a command, too, so editing further down in the file won't reprocess imports anyway.</p>



<a name="279176290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/get%20the%20two%20maps%20from%20an%20isomorphism/near/279176290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism.html#279176290">(Apr 16 2022 at 16:47)</a>:</h4>
<p>Anyway, this has been another episode of Saturday morning Lean archaeology. (Morning for me at least, and while 2014 wasn't that long ago, it's a long time in Lean years.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>