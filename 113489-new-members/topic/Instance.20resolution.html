---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Instance.20resolution.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html">Instance resolution</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200737993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200737993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200737993">(Jun 12 2020 at 23:51)</a>:</h4>
<p><code>[class_instances] trying next solution, current solution has metavars</code><br>
Instance resolution is failing in my example (mwe coming in a moment) and on printing the class instance trace, the first try is the one I want, but it gives the above message and moves on - any idea how to fix?</p>



<a name="200738105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200738105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200738105">(Jun 12 2020 at 23:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">comma</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">namespace</span> <span class="n">category_theory</span>

<span class="c">/-</span><span class="cm">- A sieve on X is a set of morphisms to X that is closed under left composition. -/</span>
<span class="kn">structure</span> <span class="n">sieve</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">arrows</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">over</span> <span class="n">X</span><span class="o">))</span>
<span class="o">(</span><span class="n">subs</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">over</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="bp">_</span> <span class="o">:</span> <span class="n">f</span> <span class="err">∈</span> <span class="n">arrows</span><span class="o">)</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">f</span><span class="bp">.</span><span class="n">left</span><span class="o">),</span> <span class="n">over</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">g</span> <span class="err">≫</span> <span class="n">f</span><span class="bp">.</span><span class="n">hom</span><span class="o">)</span> <span class="err">∈</span> <span class="n">arrows</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>

<span class="kn">instance</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">sieve</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span> <span class="n">p</span><span class="o">,</span> <span class="n">over</span><span class="bp">.</span><span class="n">mk</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">p</span><span class="bp">.</span><span class="n">arrows</span><span class="bp">⟩</span>

<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">has_mem</span>

<span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">class_instances</span> <span class="n">true</span>
<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">all</span> <span class="n">true</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">sieve</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="err">∈</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200772155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200772155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200772155">(Jun 13 2020 at 15:39)</a>:</h4>
<p>BTW, <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span>, if you plan to eventually PR sheaves to mathlib, it might be worth starting with a discussion of the planned design</p>



<a name="200772226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200772226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200772226">(Jun 13 2020 at 15:40)</a>:</h4>
<p>For subjects like this, a PR is not really the right place to start the discussion, I think.</p>



<a name="200772573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200772573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200772573">(Jun 13 2020 at 15:49)</a>:</h4>
<p>I started a brief discussion in #maths earlier - at the moment though I'm doing it with enough generality to do forcing, and I'm happy to be guided by the geometry-minded people for the specialised API about sheaves on a site/space</p>



<a name="200772702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200772702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200772702">(Jun 13 2020 at 15:52)</a>:</h4>
<p>Right now I'm making sure the specialisation to a site works like I think it should, and that sheafification of a presheaf on a space has the properties I want - then I'll do the stuff mentioned there about moving between spaces/toposes</p>



<a name="200773109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200773109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200773109">(Jun 13 2020 at 16:03)</a>:</h4>
<p>For me "forcing" is a foreign word--when I try to understand it seems not to mean anything. I hope this doesn't end up totally disconnected from what is needed for geometry.</p>



<a name="200773172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200773172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200773172">(Jun 13 2020 at 16:05)</a>:</h4>
<p>I also don't even know what an elementary topos is, or a Lawvere-Tierney topology.</p>



<a name="200773185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200773185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200773185">(Jun 13 2020 at 16:05)</a>:</h4>
<p>This is why I think writing Lean code is not necessarily the correct starting point.</p>



<a name="200773241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200773241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200773241">(Jun 13 2020 at 16:06)</a>:</h4>
<p>The <span aria-label="elephant" class="emoji emoji-1f418" role="img" title="elephant">:elephant:</span> nature is really difficult to work with here, I think.</p>



<a name="200773511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200773511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200773511">(Jun 13 2020 at 16:14)</a>:</h4>
<p>These are reasonable concerns, do you have a suggestion of how we could go about starting this? My perspective is that I'm just providing some of the categorical machinery so that the people who need it for geometry don't have to</p>



<a name="200775504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200775504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200775504">(Jun 13 2020 at 17:03)</a>:</h4>
<p>Maybe an informal roadmap, or just a pile of Lean <code>def</code>s with lots of stuff omitted?</p>



<a name="200775650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200775650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200775650">(Jun 13 2020 at 17:06)</a>:</h4>
<p>(also <a class="stream" data-stream-id="116395" href="/#narrow/stream/116395-maths">#maths</a> would be a better place for this)</p>



<a name="200777784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200777784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200777784">(Jun 13 2020 at 18:02)</a>:</h4>
<p>Will do! Though I'd still appreciate any help on the original question :)</p>



<a name="200785377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785377">(Jun 13 2020 at 20:57)</a>:</h4>
<p>I think your instance is no good because it violates the <code>out_param</code>--<code>X</code> doesn't determine <code>Y</code></p>



<a name="200785382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785382">(Jun 13 2020 at 20:57)</a>:</h4>
<p>although I seem to recall something like this working in practice...</p>



<a name="200785432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785432">(Jun 13 2020 at 20:58)</a>:</h4>
<p>ah no, I didn't use <code>∈</code></p>



<a name="200785433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785433">(Jun 13 2020 at 20:58)</a>:</h4>
<p>probably because of this same issue</p>



<a name="200785856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785856">(Jun 13 2020 at 21:10)</a>:</h4>
<p>Surely there should be an error message at the definition site then?</p>



<a name="200785871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200785871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200785871">(Jun 13 2020 at 21:11)</a>:</h4>
<p>My mental model of <code>out_param</code> was like Haskell's fundeps, and in this case I don't have any other instance which clashes/overlaps with that one</p>



<a name="200786261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200786261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200786261">(Jun 13 2020 at 21:22)</a>:</h4>
<p>It's also wrong in Haskell... it doesn't surprise me that Lean doesn't give an error though</p>



<a name="200786266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200786266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200786266">(Jun 13 2020 at 21:22)</a>:</h4>
<p>Anyways, <code>∈</code> is kind of useless because it's generalized in the wrong ways</p>



<a name="200786465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200786465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200786465">(Jun 13 2020 at 21:28)</a>:</h4>
<p>Oh right, I was misreading which one the outparam was on - that makes sense</p>



<a name="200786545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200786545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200786545">(Jun 13 2020 at 21:30)</a>:</h4>
<p>I guess you could just write <code>S.1 f</code></p>



<a name="200786557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/200786557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#200786557">(Jun 13 2020 at 21:31)</a>:</h4>
<p>Yeah I was just wondering if I could make the notation prettier</p>



<a name="210398589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210398589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210398589">(Sep 17 2020 at 14:35)</a>:</h4>
<p>How do I change class-instance resolution priority for a given instance? In the following example, I believe a fiddling with the priority of <code>hα</code> could fix things. Also, if its not a priority problem, what is?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">order</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">section</span>

<span class="kn">parameters</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span>

<span class="n">def</span> <span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">preimage</span> <span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">is_open</span>

<span class="kn">instance</span> <span class="n">hα</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">topological_space</span><span class="bp">.</span><span class="n">generate_from</span> <span class="n">s</span>

<span class="c1">-- Maximum class-instance resolution depth reached</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">@</span><span class="n">continuous</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hα</span> <span class="bp">_</span> <span class="n">f</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="c1">-- Maximum class-instance resolution depth reached</span>
  <span class="n">refine</span> <span class="n">is_open</span><span class="bp">.</span><span class="n">preimage</span> <span class="bp">_</span> <span class="n">hs</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">hf</span> <span class="o">:</span> <span class="bp">@</span><span class="n">continuous</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hα</span> <span class="bp">_</span> <span class="n">f</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">refine</span> <span class="bp">@</span><span class="n">is_open</span><span class="bp">.</span><span class="n">preimage</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hα</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">end</span>
</code></pre></div>



<a name="210398725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210398725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210398725">(Sep 17 2020 at 14:36)</a>:</h4>
<p>Apparently I created a topic with an already existing name? <span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span></p>



<a name="210399362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210399362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210399362">(Sep 17 2020 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="298376">@Pedro Minicz</span> the issue is that Lean doesn't know to use <code>f</code> to form the topology on alpha</p>



<a name="210399831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210399831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210399831">(Sep 17 2020 at 14:43)</a>:</h4>
<p>Isn't there a way to tell lean to "just use the first thing that fits the goal?" Specially when there is only one thing in the context.</p>



<a name="210400627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210400627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210400627">(Sep 17 2020 at 14:49)</a>:</h4>
<p>It's tempting to think that because you wrote an instance which mentions <code>parameters</code>, the instance is somehow "bound" to those parameters. But I think that's not really how it works; instead what you did is create a global instance for <code>topological_space (anything)</code> that first tries to synthesize an instance for <code>topological_space (anything else)</code>, and clearly this is going to lead to problems</p>



<a name="210400856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210400856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210400856">(Sep 17 2020 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="298376">@Pedro Minicz</span> your instance says: given a function <code>f : A -&gt; B</code> and an instance of <code>topological_space B</code>, create an instance of <code>topological_space A</code></p>



<a name="210400894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210400894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210400894">(Sep 17 2020 at 14:51)</a>:</h4>
<p>the issue is that <code>f</code> is not mentioned in the target instance at all, so Lean doesn't know which function <code>A -&gt; B</code> to use</p>



<a name="210400912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210400912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210400912">(Sep 17 2020 at 14:51)</a>:</h4>
<p>or even which <code>B</code> to use</p>



<a name="210401002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Instance%20resolution/near/210401002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Instance.20resolution.html#210401002">(Sep 17 2020 at 14:52)</a>:</h4>
<p>the goal is <code>topological_space A</code> when Lean is creating the instance in your <code>example</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>