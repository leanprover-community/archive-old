---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html">✔ add_sub_cancel</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="264830494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264830494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264830494">(Dec 14 2021 at 09:25)</a>:</h4>
<p>What am I doing wrong here?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">add_sub_cancel</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Error:</p>
<div class="codehilite" data-code-language="txt"><pre><span></span><code>invalid apply tactic, failed to unify
  a + (b + 2) - (b + 2) = a
with
  ?m_3 + ?m_4 - ?m_4 = ?m_3
</code></pre></div>



<a name="264830749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264830749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264830749">(Dec 14 2021 at 09:28)</a>:</h4>
<p>Hmm, <code>nat.add_sub_cancel</code> seems to work. I guess there is some class instantiation problem with <code>add_sub_cancel</code> that I am not aware of.</p>



<a name="264831043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264831043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264831043">(Dec 14 2021 at 09:31)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/add_tsub_cancel_of_le">docs#add_tsub_cancel_of_le</a></p>



<a name="264831311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264831311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264831311">(Dec 14 2021 at 09:34)</a>:</h4>
<p>the nat version holds without the <code>le</code> requirement, though</p>



<a name="264831614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264831614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264831614">(Dec 14 2021 at 09:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.add_sub_cancel">docs#nat.add_sub_cancel</a> is a different order too though</p>



<a name="264831704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264831704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264831704">(Dec 14 2021 at 09:37)</a>:</h4>
<p>So I guess I meant <a href="https://leanprover-community.github.io/mathlib_docs/find/add_tsub_cancel_right">docs#add_tsub_cancel_right</a></p>



<a name="264833013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264833013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264833013">(Dec 14 2021 at 09:49)</a>:</h4>
<ul>
<li><a href="https://leanprover-community.github.io/mathlib_docs/find/add_tsub_cancel_of_le">docs#add_tsub_cancel_of_le</a> is a different order of what the goal is</li>
<li><del> <a href="https://leanprover-community.github.io/mathlib_docs/find/add_tsub_cancel_right">docs#add_tsub_cancel_right</a> forces me to additionally prove <code>∀ {b : ℕ} ⦃x y : ℕ⦄, b + 2 + x ≤ b + 2 + y → x ≤ y</code></del></li>
</ul>
<p>Since <code>apply nat.add_sub_cancel</code> solves the goal, I'll go with it. Why <code>add_sub_cancel</code> from the prelude doesn't work is still a mystery for me, but I guess it is not intended to be used on natural numbers.</p>



<a name="264833054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264833054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264833054">(Dec 14 2021 at 09:49)</a>:</h4>
<p><code>add_tsub_cancel_right</code> works fine here</p>



<a name="264833980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264833980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264833980">(Dec 14 2021 at 09:59)</a>:</h4>
<p>I mean, <code>add_sub_cancel</code> doesn't work because it's for <code>add_groups</code>, which ℕ is clearly not</p>



<a name="264834691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264834691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264834691">(Dec 14 2021 at 10:06)</a>:</h4>
<p>That makes sense.</p>



<a name="264834695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264834695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264834695">(Dec 14 2021 at 10:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456794">Patrick Johnson</span> has marked this topic as resolved.</p>



<a name="264879781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264879781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264879781">(Dec 14 2021 at 16:03)</a>:</h4>
<p>It's really unfortunate that Lean doesn't just tell you that it failed to synthesize <code>add_group ℕ</code> or whatever it is--I feel like this should be fixable</p>



<a name="264880640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20add_sub_cancel/near/264880640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20add_sub_cancel.html#264880640">(Dec 14 2021 at 16:08)</a>:</h4>
<p>yeah, I'm used to it by now, but the first time I saw <code>failed to unify ?m_1 + ?m_2 with x + y</code> I was absolutely mystified</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>