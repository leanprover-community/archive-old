---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/fin.20n.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html">fin n</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="240467094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240467094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240467094">(May 27 2021 at 13:29)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">test_1</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>Why cannot I apply <code>\sigma\</code> to <code> fin n </code>?<br>
The above gives me the error message <br>
<a href="/user_uploads/3121/vnGzYYcrfdDcOxZJ-QGTK7JJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/vnGzYYcrfdDcOxZJ-QGTK7JJ/image.png" title="image.png"><img src="/user_uploads/3121/vnGzYYcrfdDcOxZJ-QGTK7JJ/image.png"></a></div>



<a name="240467819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240467819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240467819">(May 27 2021 at 13:34)</a>:</h4>
<p>I am confused...</p>



<a name="240467927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240467927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240467927">(May 27 2021 at 13:35)</a>:</h4>
<p><code>∑ i : fin n, 1</code></p>



<a name="240467968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240467968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240467968">(May 27 2021 at 13:35)</a>:</h4>
<p>which is short for <code>∑ i in (finset.univ : finset (fin n)), 1</code> (<a href="https://leanprover-community.github.io/mathlib_docs/find/finset.univ">docs#finset.univ</a>)</p>



<a name="240469348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240469348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240469348">(May 27 2021 at 13:45)</a>:</h4>
<p>Thank you, Eric!</p>



<a name="240470698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240470698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240470698">(May 27 2021 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="408694">@Alex Zhang</span> the difference is whether you sum over a <code>set</code> (i.e. a subset) or over the full type.<br>
In the first case you use <code>i in s</code>, in the second <code>i : X</code>.</p>



<a name="240476363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240476363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240476363">(May 27 2021 at 14:30)</a>:</h4>
<p>Thanks for all your kind help above!<br>
This formalization using <code>fin n</code> gives me the error message:<br>
<a href="/user_uploads/3121/tky4TVpvr82tfV_BfwiAuhTF/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/tky4TVpvr82tfV_BfwiAuhTF/image.png" title="image.png"><img src="/user_uploads/3121/tky4TVpvr82tfV_BfwiAuhTF/image.png"></a></div><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">test_1</span> <span class="o">(</span><span class="n">n</span> <span class="n">j</span><span class="o">:</span> <span class="n">nat</span><span class="o">)(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span><span class="o">(</span><span class="n">j</span><span class="bp">+</span><span class="mi">1</span><span class="o">)):</span> <span class="mi">1</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>Why does this happen and how can I fix this issue?</p>



<a name="240476865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240476865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240476865">(May 27 2021 at 14:34)</a>:</h4>
<p>This happens when checking <code>i &lt; j + 1</code> because Lean does the following to check the types:</p>
<ul>
<li>the two sides of <code>&lt;</code> should have the same type</li>
<li>let's check <code>i</code>: this is a <code>fin n</code>, so the other side should also be a <code>fin n</code></li>
<li>let's check <code>j + 1</code>: the two sides of <code>+</code> should have the same type, namely <code>fin n</code></li>
<li><code>j</code> is not a <code>fin n</code> but a <code>ℕ</code>, and there's no coercion from <code>ℕ</code> to <code>fin n</code>, error!</li>
</ul>



<a name="240476989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240476989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240476989">(May 27 2021 at 14:35)</a>:</h4>
<p>The solution is to hint that you actually want to compare the two values as natural numbers:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">test_1</span> <span class="o">(</span><span class="n">n</span> <span class="n">j</span><span class="o">:</span> <span class="n">nat</span><span class="o">)(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">j</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="240477285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477285">(May 27 2021 at 14:37)</a>:</h4>
<ul>
<li>the two sides of <code>&lt;</code> should have the same type</li>
<li>let's check <code>(i : ℕ)</code>: this is obviously a <code>ℕ</code>, so the other side should also be a <code>ℕ</code></li>
<li>let's check that <code>i</code> is a <code>ℕ</code>: it's actually a <code>fin n</code>, but I know how to convert from <code>fin n</code> to <code>ℕ</code> (<a href="https://leanprover-community.github.io/mathlib_docs/find/fin.fin_to_nat">docs#fin.fin_to_nat</a>), so apply the coercion</li>
<li>let's check <code>j + 1</code>: the two sides of <code>+</code> should have the same type, namely <code>ℕ</code></li>
<li>...</li>
</ul>



<a name="240477321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477321">(May 27 2021 at 14:37)</a>:</h4>
<p><span class="user-mention" data-user-id="408694">@Alex Zhang</span> remember that <code>i : fin n</code> does <em>not</em> mean "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> is a natural number, and somewhere in the system there is a proof that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">i&lt;n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>". It means "<code>i</code> is a <em>pair</em>, consisting of a natural number <code>i.1</code> and a proof <code>i.2</code> that <code>i.1 &lt; n</code>". You are confusing <code>i</code> and <code>i.1</code>.</p>



<a name="240477692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477692">(May 27 2021 at 14:40)</a>:</h4>
<p>PS I cannot see your screenshots very well at all on my device. Can you just cut and paste errors in between triple quotes like you quote your code? People usually reserve screenshots only for issues which are VS Code specific.</p>



<a name="240477799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477799">(May 27 2021 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/fin.20n/near/240476989">said</a>:</p>
<blockquote>
<p>The solution is to hint that you actually want to compare the two values as natural numbers:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">test_1</span> <span class="o">(</span><span class="n">n</span> <span class="n">j</span><span class="o">:</span> <span class="n">nat</span><span class="o">)(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">j</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Cool! I can only fix it by changing the direction of &lt; before..which looks like a silly way.</p>



<a name="240477864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477864">(May 27 2021 at 14:41)</a>:</h4>
<p>Yes, because <code>&gt;</code> is illegal :-)</p>



<a name="240477961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240477961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240477961">(May 27 2021 at 14:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/fin.20n/near/240477692">said</a>:</p>
<blockquote>
<p>PS I cannot see your screenshots very well at all on my device. Can you just cut and paste errors in between triple quotes like you quote your code? People usually reserve screenshots only for issues which are VS Code specific.</p>
</blockquote>
<p>Got it and no problem!</p>



<a name="240478067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin%20n/near/240478067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin.20n.html#240478067">(May 27 2021 at 14:42)</a>:</h4>
<p>Either that or I'll have to go and find my glasses :-)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>