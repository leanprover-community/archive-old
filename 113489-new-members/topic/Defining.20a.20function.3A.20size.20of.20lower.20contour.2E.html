---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html">Defining a function: size of lower contour.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282149435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282149435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Leo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282149435">(May 12 2022 at 18:12)</a>:</h4>
<p>I am trying to define a function that for any <code>x</code> in some finite <code>A</code> returns the size of the set of <code>y</code> in <code>A</code> such that <code>R x y</code> for some relation <code>R</code>. I know how to define some basic functions, and how to define some basic sets, but I can't seem to combine my knowledge to define this function.</p>



<a name="282150800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282150800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282150800">(May 12 2022 at 18:22)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_rel</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A.filter</span> <span class="o">(</span><span class="n">R</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">card</span>
</code></pre></div>



<a name="282151071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282151071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282151071">(May 12 2022 at 18:25)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">combinatorics.double_counting</span>

<span class="kd">def</span> <span class="n">your_thing</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="bp">Π</span> <span class="n">a</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">r</span> <span class="n">a</span> <span class="n">b</span><span class="o">)]</span> <span class="o">:</span>
  <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">s.bipartite_above</span> <span class="n">r</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">card</span>
</code></pre></div>



<a name="282151923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282151923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Leo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282151923">(May 12 2022 at 18:31)</a>:</h4>
<p>I'll need to read about a few things before I understand these. Having two different options should help me figure things out. Thank you!</p>



<a name="282152132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282152132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282152132">(May 12 2022 at 18:33)</a>:</h4>
<p>The two options are definitionally equal. The advantage of Patrick's is that it's rather transparent in what it does. The advantage of mine is that it directly plugs onto the theory of double-counting.</p>



<a name="282154159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282154159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282154159">(May 12 2022 at 18:49)</a>:</h4>
<p>They're not definitionally equal, not only because of the order of arguments, but also because they are actually different functions (your definition fixes the second argument of the relation, while mine fixes the first argument).</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#reduce</span> <span class="n">f</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">}</span> <span class="mi">1</span> <span class="n">dec_trivial</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span> <span class="c1">-- 1</span>
<span class="k">#reduce</span> <span class="n">your_thing</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">}</span> <span class="mi">1</span>    <span class="c1">-- 0</span>
</code></pre></div>
<p><em>"Function that for any <code>x</code> in some finite <code>A</code> returns the size of the set of <code>y</code> in <code>A</code> such that <code>R x y</code> for some relation <code>R</code>"</em> sounds like <code>x</code> should be fixed.</p>



<a name="282154534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282154534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Leo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282154534">(May 12 2022 at 18:52)</a>:</h4>
<p>If I was programming it (in some made-up python-like language), I would have something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">f</span> <span class="bp">=</span> <span class="n">function</span><span class="o">(</span><span class="n">x</span><span class="o">){</span>
  <span class="n">size</span> <span class="bp">=</span> <span class="mi">0</span>
  <span class="n">for</span> <span class="o">(</span><span class="n">y</span> <span class="k">in</span> <span class="n">A</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">R</span> <span class="n">x</span> <span class="n">y</span><span class="o">){</span><span class="n">size</span> <span class="bp">=</span> <span class="n">size</span>  <span class="bp">+</span> <span class="mi">1</span><span class="o">}</span>
  <span class="o">}</span>
  <span class="n">return</span><span class="o">(</span><span class="n">size</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>



<a name="282154981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282154981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Greg Leo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282154981">(May 12 2022 at 18:56)</a>:</h4>
<p>So yeah, <code>x</code> is fixed, and I want to count up the <code>y</code> such that <code>R x y</code>. That is, how many <code>y</code> are there in <code>A</code> that are "worse than" <code>x</code>?</p>



<a name="282155395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282155395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282155395">(May 12 2022 at 18:59)</a>:</h4>
<p>Then my definition of <code>f</code> is what you need.</p>



<a name="282156211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20a%20function%3A%20size%20of%20lower%20contour./near/282156211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20a.20function.3A.20size.20of.20lower.20contour.2E.html#282156211">(May 12 2022 at 19:05)</a>:</h4>
<p>Ah sorry, I meant <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.bipartite_above">docs#finset.bipartite_above</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>