---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html">proof of two_mul from Mathematics in Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208335038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208335038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208335038">(Aug 28 2020 at 12:18)</a>:</h4>
<p>Hi,</p>
<p>Once again, I'm unable to get a proof to work in lean. I'm trying to prove <br>
<code>theorem two_mul (a : R) : 2 * a = a + a :=</code><br>
from <em>Mathematics in Lean</em><br>
Here's what I'm trying to make work:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">ring</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">my_ring</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">one_and_one_eq_two</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">refl</span>

<span class="kn">theorem</span> <span class="n">two_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span><span class="o">,</span>
    <span class="o">{</span><span class="n">rw</span> <span class="n">add_mul</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span><span class="o">,</span>
    <span class="o">{</span><span class="n">rw</span> <span class="n">one_and_one_eq_two</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">h₂</span>
    <span class="o">},</span>
    <span class="n">exact</span> <span class="n">h₃</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">my_ring</span>
</code></pre></div>


<p>The proof fails at <code>{rw one_and_one_eq_two at h₁},</code> with the message<br>
/-<br>
solve1 tactic failed, focused goal has not been solved<br>
state:<br>
R : Type u_1,<br>
_inst_1 : ring R,<br>
a : R,<br>
h₁ : 2 * a = 1 * a + 1 * a<br>
⊢ 2 * a = 1 * a + 1 * a<br>
-/</p>
<p>Would appreciate someone showing me what the heck I'm doing wrong. Thanks!</p>



<a name="208336610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208336610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208336610">(Aug 28 2020 at 12:37)</a>:</h4>
<p>The issue is that you've modified <code>h\_1</code> in that line, but didn't tell lean to use the modified <code>h\_1</code> as your proof of <code>h\_2</code>. So a simple fix is to add <code>assumption</code> after <code>rw one_and_one_eq_two at h₁</code> (or even <code>exact h\_1</code>).</p>



<a name="208337722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208337722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208337722">(Aug 28 2020 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Pro tip: <code>\1</code> = <code>\_1</code></p>



<a name="208337772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208337772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208337772">(Aug 28 2020 at 12:50)</a>:</h4>
<p>WHOA!</p>



<a name="208337793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208337793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208337793">(Aug 28 2020 at 12:50)</a>:</h4>
<p>I think you just saved me millions of keystrokes</p>



<a name="208337987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208337987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208337987">(Aug 28 2020 at 12:52)</a>:</h4>
<p>Thank you! That fixes the proof of h₂. Now I just need to prove h₃.</p>
<p>I'm getting this error for that:<br>
/-<br>
rewrite tactic failed, did not find instance of the pattern in the target expression<br>
  1 * ?m_3<br>
state:<br>
R : Type u_1,<br>
_inst_1 : ring R,<br>
a : R,<br>
h₁ : (1 + 1) * a = 1 * a + 1 * a,<br>
h₂ : 2 * a = a + a<br>
⊢ 2 * a = a + a<br>
-/<br>
Which seems odd, because there are two 1*a 's in h₂.</p>



<a name="208339037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208339037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208339037">(Aug 28 2020 at 13:02)</a>:</h4>
<p>This is expected. <code>rw</code> will change all instances of the first thing it matches with.<br>
Here's your proof cut down a little bit (note that last <code>have</code> isn't needed).</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">ring</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">my_ring</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">one_and_one_eq_two</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">refl</span>

<span class="kn">theorem</span> <span class="n">two_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span><span class="o">,</span>
    <span class="o">{</span><span class="n">rw</span> <span class="n">add_mul</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">*</span><span class="n">a</span><span class="o">,</span>
    <span class="o">{</span><span class="n">rwa</span> <span class="n">one_and_one_eq_two</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">},</span>
    <span class="n">rwa</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">my_ring</span>
</code></pre></div>



<a name="208388544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208388544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208388544">(Aug 28 2020 at 19:58)</a>:</h4>
<p>in mathlib we use 2-space indent as well as spaces after the opening curly bracket and before the closing one (i.e.<br>
<code>{ lorem ipsum }</code>)</p>



<a name="208388715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208388715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208388715">(Aug 28 2020 at 19:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">ring</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">my_ring</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">one_and_one_eq_two</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">rfl</span>

<span class="kn">theorem</span> <span class="n">two_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">add_mul</span><span class="o">},</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rwa</span> <span class="n">one_and_one_eq_two</span> <span class="n">at</span> <span class="n">h₁</span> <span class="o">},</span>
  <span class="n">rwa</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">my_ring</span>
</code></pre></div>



<a name="208388793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proof%20of%20two_mul%20from%20Mathematics%20in%20Lean/near/208388793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proof.20of.20two_mul.20from.20Mathematics.20in.20Lean.html#208388793">(Aug 28 2020 at 20:00)</a>:</h4>
<p>we also use spaces around infixes (i.e. <code>1 * a</code> not <code>1*a</code>)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>