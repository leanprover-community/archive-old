---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html">what kind of object is `brec_on`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206179302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206179302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206179302">(Aug 06 2020 at 18:31)</a>:</h4>
<p>I just found out about <code>brec_on</code>, which from the tutorial I understand is used when a recursive definition doesn't just depend on the structural predecessors of a term, but on earlier "ancestors" terms as well. </p>
<p>Is <code>brec_on</code> a primitive function, without which we couldn't do such recursion? Or is it translated into something based on <code>rec_on</code>?</p>



<a name="206181039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206181039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206181039">(Aug 06 2020 at 18:45)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">bin_tree</span><span class="bp">.</span><span class="n">rec_on</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">bin_tree</span><span class="bp">.</span><span class="n">brec_on</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">bin_tree</span><span class="bp">.</span><span class="n">below</span>
</code></pre></div>


<p>I don't know what this last term <code>below</code> is, but I guess it is also auto-generated by <code>inductive</code>, and it shows up in the type signature <code>brec_on</code></p>



<a name="206181255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206181255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206181255">(Aug 06 2020 at 18:47)</a>:</h4>
<p><code>#print</code> will show you how they are defined (which they indeed are)</p>



<a name="206181291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206181291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206181291">(Aug 06 2020 at 18:47)</a>:</h4>
<p>I think only <code>rec</code> is not a definition</p>



<a name="206183317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183317">(Aug 06 2020 at 19:03)</a>:</h4>
<p>you mean they are not autogenerated? why does right click on <code>bin_tree.below</code> -&gt; go to source take me to the definition of <code>bin_tree</code>?</p>



<a name="206183418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183418">(Aug 06 2020 at 19:04)</a>:</h4>
<p>maybe this means I should trust <a href="https://leanprover-community.github.io/mathlib_docs/find/bin_tree.below">docs#bin_tree.below</a> over right click go to source</p>



<a name="206183489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183489">(Aug 06 2020 at 19:04)</a>:</h4>
<p>the docs also don't find it, presumably because of the keyword <code>protected</code> that appears when you <code>#print bin_tree.below</code>?</p>



<a name="206183509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183509">(Aug 06 2020 at 19:05)</a>:</h4>
<p>No they are autogenerated, of course</p>



<a name="206183515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183515">(Aug 06 2020 at 19:05)</a>:</h4>
<p>But they are not axioms</p>



<a name="206183562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183562">(Aug 06 2020 at 19:05)</a>:</h4>
<p>They are automatically generated definitions</p>



<a name="206183854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206183854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206183854">(Aug 06 2020 at 19:07)</a>:</h4>
<p>okay, thanks, I am un-confused, but I'm not still not sure what Chris M's confusion is/was</p>



<a name="206184040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206184040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206184040">(Aug 06 2020 at 19:09)</a>:</h4>
<p>One thing that is confusing/surprising here is that the equation compiler always uses <code>brec_on</code> for structural recursion, even when you write something that looks exactly like an application of <code>rec_on</code></p>



<a name="206220568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206220568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206220568">(Aug 07 2020 at 03:17)</a>:</h4>
<p>I wasn't confused about anything in particular, I'm just trying to get a clear model of how recursion in lean works, and it seems like it's all reduced to <code>rec</code>. I didn't think of using <code>#print</code> for some reason...</p>



<a name="206236353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206236353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206236353">(Aug 07 2020 at 08:59)</a>:</h4>
<p>What does the <code>b</code> in <code>brec_on</code> mean?</p>



<a name="206243567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206243567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206243567">(Aug 07 2020 at 10:46)</a>:</h4>
<p>bounded recursion</p>



<a name="206243594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20kind%20of%20object%20is%20%60brec_on%60/near/206243594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20kind.20of.20object.20is.20.60brec_on.60.html#206243594">(Aug 07 2020 at 10:47)</a>:</h4>
<p>because it is used to compile patterns like <code>f (n + 3) = f n</code> but not <code>f n = f (n / 2)</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>