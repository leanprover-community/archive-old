---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html">Confusion about ≤ in UFD</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217178810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217178810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217178810">(Nov 18 2020 at 18:44)</a>:</h4>
<p>Hi, I want to prove that if a separable polynomial <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> divides a power <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">Q^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> then it divides <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span>. I  know that the factors of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> are simple, by <code>polynomial.is_unit_of_self_mul_dvd_separable</code> or a similar result, but how can I use it? I thought I would have found something like "if the multiplicity of any prime factor in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> is less or equal than the multiplicity in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span>, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span> divides <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span>" in <code>ring_theory.unique_factorization_domain</code>. Is what <code>associates.prod_mono</code> actually says? I am not able to find the definition of <code>≤</code> in this case.</p>



<a name="217179239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217179239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217179239">(Nov 18 2020 at 18:48)</a>:</h4>
<p>Seems to me that a term of type <code>factor_set R</code> is either a multiset (a.k.a. finite set with multiplicities allowed) of irreducible-elements-of-R-modulo-equivalence, where the equivalence is "differ by a unit", or a "top" element which is presumably used to represent 0.</p>



<a name="217179523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217179523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217179523">(Nov 18 2020 at 18:50)</a>:</h4>
<p><code>prod</code> is a function which takes one of these multisets (so irreducibles, defined up to units) and multiplies them all together to get an element of the UFD, defined up to units. I guess <code>&lt;=</code> will be defined as "divides", which makes sense in this context. So <code>prod_mono</code> says something like "if you have two multisets of factors, one contained in the other, then the product of the smaller set divides the product of the larger set"</p>



<a name="217179786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217179786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217179786">(Nov 18 2020 at 18:52)</a>:</h4>
<p>Yes, it is what I think too, but how can I apply this in practice? I mean, transform my <code>∣</code> in <code>≤</code> with some <code>rw</code>.</p>



<a name="217180123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217180123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217180123">(Nov 18 2020 at 18:55)</a>:</h4>
<p>I've not ever used this new UFD stuff and don't know my way around the library at all, but I do know that if you knock up a MWE then you're more likely to get a good answer.</p>



<a name="217180279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217180279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217180279">(Nov 18 2020 at 18:56)</a>:</h4>
<p>Looking at where <code>is_unit_of_self_mul_dvd_separable</code> is used, I have run into <code>multiplicity_le_one_of_seperable</code></p>



<a name="217180326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217180326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217180326">(Nov 18 2020 at 18:57)</a>:</h4>
<p>which is not how you spell <code>separable</code> but it still might help</p>



<a name="217180786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217180786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217180786">(Nov 18 2020 at 19:00)</a>:</h4>
<p>Isn't there some general theory of <code>squarefree</code> stuff somewhere? Did I see this in a recent PR? For me, the natural proof would go separable -&gt; squarefree (using this <code>seperable</code> thing) and P squarefree -&gt; P|Q^n-&gt;P|Q</p>



<a name="217180971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217180971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217180971">(Nov 18 2020 at 19:01)</a>:</h4>
<p><code> src/algebra/squarefree.lean</code> was merged 4 days ago</p>



<a name="217181173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217181173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217181173">(Nov 18 2020 at 19:02)</a>:</h4>
<p>What I want to prove is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kd">lemma</span> <span class="n">divides</span> <span class="o">(</span><span class="n">hsep</span> <span class="o">:</span> <span class="n">separable</span> <span class="n">P</span><span class="o">)</span> <span class="o">(</span><span class="n">hzero</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiv</span><span class="o">:</span> <span class="n">P</span> <span class="bp">∣</span> <span class="n">Q</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">∣</span> <span class="n">Q</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>I'll have a look at <code>`squarefree</code>, thank you!</p>



<a name="217181592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217181592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217181592">(Nov 18 2020 at 19:05)</a>:</h4>
<p><code>is_unit_of_self_mul_dvd_separable</code> can be used to prove separable polynomials are <code>squarefree</code> and then it looks like you'll have to get your hands dirty. I suspect that <code>r</code> is squarefree if and only if for all q, r|q^n -&gt; r|q (at least when one has uniqueness of factorization) but this doesn't seem to be in the PR.</p>



<a name="217181837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217181837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217181837">(Nov 18 2020 at 19:07)</a>:</h4>
<p>I'm currently working on another branch which doesn't have squarefree so I'm not much help to you :-( You have this <code>nodup</code> thing, so anyone who knows their way around multisets should be able to add it. You'll need that if n&gt;=1 then the finset of factors of q^n and q are the same, and so you'll have an inclusion of finsets, and using nodup you'll be able to get an inclusion of multisets.</p>



<a name="217182631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217182631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217182631">(Nov 18 2020 at 19:13)</a>:</h4>
<p>I see that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">test</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_cancel_monoid_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">associates.factor_set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a.prod</span> <span class="bp">∣</span> <span class="n">b.prod</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">associates.prod_mono</span> <span class="n">h</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>works, so lean "knows" that  <code>≤</code> means <code>∣</code>. I think I can figure out the rest of the proof.</p>



<a name="217195335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217195335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217195335">(Nov 18 2020 at 20:55)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5037">#5037</a></p>



<a name="217198414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217198414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217198414">(Nov 18 2020 at 21:22)</a>:</h4>
<p>I love this place</p>



<a name="217199219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217199219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217199219">(Nov 18 2020 at 21:29)</a>:</h4>
<p>(Just proven for <code>squarefree</code>, not <code>separable</code>)</p>



<a name="217200327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217200327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217200327">(Nov 18 2020 at 21:40)</a>:</h4>
<p>I'm taking care of it, I will make a PR tomorrow.</p>



<a name="217202230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217202230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217202230">(Nov 18 2020 at 21:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5039">#5039</a> It was really quick :)</p>



<a name="217203003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confusion%20about%20%E2%89%A4%20in%20UFD/near/217203003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confusion.20about.20.E2.89.A4.20in.20UFD.html#217203003">(Nov 18 2020 at 22:06)</a>:</h4>
<p>This is the advantage of making all these little steps.</p>
<p>I was reading something by Deligne, describing Grothendieck's work. Deligne said that he would write arguments and everything would be short and simple and easy, and nothing seemed to be happening, and then all of a sudden out of nowhere you had proved something. This is also the mathlib approach. Introduce the concepts which have been proven to be useful and then make the API relating them and one can really make progress in a very elegant way.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>