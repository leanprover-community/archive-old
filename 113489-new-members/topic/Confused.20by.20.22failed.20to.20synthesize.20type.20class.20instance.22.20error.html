---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html">Confused by "failed to synthesize type class instance" error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204245953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204245953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sara Fish <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204245953">(Jul 17 2020 at 19:04)</a>:</h4>
<p>To practice writing definitions, I am trying to define what it means for an element $g$ of a group $G$ to generate $G$. I have the definition </p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">is_generator</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">h</span> <span class="err">∈</span> <span class="n">G</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">k</span> <span class="err">∈</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">g</span><span class="bp">^</span><span class="n">k</span> <span class="bp">=</span> <span class="n">h</span>
</code></pre></div>


<p>This gives the error </p>
<div class="codehilite"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span>
<span class="n">H</span> <span class="o">:</span> <span class="n">h</span> <span class="err">∈</span> <span class="n">G</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="err">?</span><span class="n">m_2</span>
<span class="err">⊢</span> <span class="n">has_mem</span> <span class="err">?</span><span class="n">m_2</span> <span class="kt">Type</span>
</code></pre></div>


<p>What does this mean? How can I fix this definition?</p>



<a name="204246065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204246065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Stanescu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204246065">(Jul 17 2020 at 19:05)</a>:</h4>
<p>Use <code>k : \N</code> instead of <code>k \in \N</code> in your definition.</p>



<a name="204246284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204246284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sara Fish <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204246284">(Jul 17 2020 at 19:07)</a>:</h4>
<p>Ah, thanks. So \in is for sets specifically and : is for when something is just any term of that type?</p>



<a name="204246668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204246668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204246668">(Jul 17 2020 at 19:10)</a>:</h4>
<p>exactly (this also confuses me often)</p>



<a name="204250588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204250588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204250588">(Jul 17 2020 at 19:50)</a>:</h4>
<p>I found it to be helpful to look carefully at the definitions for how set membership works.  A term <code>s</code> of <code>set X</code> is nothing more than a function <code>X → Prop</code>, and for sets <code>x ∈ s</code> is defined to be <code>s x</code>.  (See <code>set.mem</code>, which is attached to the <code>∈</code> notation through the <code>has_mem</code> instance on the next line).</p>
<p>So, a "set" in Lean is more like a subset of a given type, and it is given by an indicator function.</p>
<p>You can turn a set into a type using <code>subtype</code>, which is usually done either through an automatic coercion in certain places or by up arrow notation.  As an example of an automatic coercion, you can write the binder <code>x : s</code> when <code>s</code> is a set.  But then <code>x</code> is a slightly different thing, where <code>x.val</code> is the actual term in <code>X</code> and <code>x.property</code> is the proof that <code>x ∈ s</code>.</p>
<p>Maybe it's also worth knowing that when you write <code>∀ x ∈ s, ...</code> it's equivalent to <code>∀ (x : X) (H : x ∈ s), ...</code>.</p>



<a name="204251473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Confused%20by%20%22failed%20to%20synthesize%20type%20class%20instance%22%20error/near/204251473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Confused.20by.20.22failed.20to.20synthesize.20type.20class.20instance.22.20error.html#204251473">(Jul 17 2020 at 19:59)</a>:</h4>
<p>thanks for this detailed explanation!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>