---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/contrapose.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html">contrapose</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="209268348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268348">(Sep 07 2020 at 08:14)</a>:</h4>
<p>Dear All,</p>
<p>I want to go from an <code>A ↔ B</code> to <code>¬A ↔ ¬B</code>.  I know that I can prove the equivalence of these two by <code>tauto</code>, but it seems a little silly.  Is there a "contrapositive iff" automatically generated by Lean?  Is there a better way?  Below is the actual statement that I was trying to prove.  Note that this is part of a larger proof: I would rather not include this step in my argument!</p>
<p>Thanks!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">zero_coeff_iff</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="err">∉</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">contrapose</span><span class="o">,</span>
      <span class="n">push_neg</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="mi">3</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">contrapose</span><span class="o">,</span>
      <span class="n">push_neg</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="mi">3</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span> <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="209268410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268410">(Sep 07 2020 at 08:15)</a>:</h4>
<p><code>not_mem_support_iff</code></p>



<a name="209268422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268422">(Sep 07 2020 at 08:15)</a>:</h4>
<p>And <code>unfold coeff</code></p>



<a name="209268430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268430">(Sep 07 2020 at 08:15)</a>:</h4>
<p>Thank!  I will try it!</p>



<a name="209268435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268435">(Sep 07 2020 at 08:15)</a>:</h4>
<p>I agree that this lemma should be added to mathlib, because you shouldn't need to unfold <code>coeff</code></p>



<a name="209268534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268534">(Sep 07 2020 at 08:16)</a>:</h4>
<p>Concerning your actual question, I think there is something like <code>not_iff_not</code> and <code>not_iff_not_of_iff</code></p>



<a name="209268554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268554">(Sep 07 2020 at 08:17)</a>:</h4>
<p><del>But, as a general rule, proving an iff does not automatically also prove the iff between the <code>\not</code>s. right?</del></p>



<a name="209268584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268584">(Sep 07 2020 at 08:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/contrapose/near/209268534">said</a>:</p>
<blockquote>
<p>Concerning your actual question, I think there is something like <code>not_iff_not</code> and <code>not_iff_not_of_iff</code></p>
</blockquote>
<p>Ah, ok!!</p>



<a name="209268592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209268592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209268592">(Sep 07 2020 at 08:17)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/not_congr">docs#not_congr</a> I think</p>



<a name="209269039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209269039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209269039">(Sep 07 2020 at 08:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/contrapose/near/209268435">said</a>:</p>
<blockquote>
<p>I agree that this lemma should be added to mathlib, because you shouldn't need to unfold <code>coeff</code></p>
</blockquote>
<p>I think so too: when Lean "interprets" <code>f.coeff n</code>, it often writes it as <code>⇑f n</code> and <code>unfold coeff</code> does not work...</p>



<a name="209273239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209273239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209273239">(Sep 07 2020 at 09:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/contrapose/near/209268435">said</a>:</p>
<blockquote>
<p>I agree that this lemma should be added to mathlib, because you shouldn't need to unfold <code>coeff</code></p>
</blockquote>
<p>Every logic lemma under the sun is already there, but no one wants to refer to them by name</p>



<a name="209273543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209273543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209273543">(Sep 07 2020 at 09:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">zero_coeff_iff</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="err">∉</span> <span class="n">f</span><span class="bp">.</span><span class="n">support</span> <span class="o">:=</span>
<span class="n">iff_not_comm</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="mi">3</span> <span class="bp">_</span><span class="o">)</span>
</code></pre></div>



<a name="209274154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209274154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209274154">(Sep 07 2020 at 09:21)</a>:</h4>
<p>But <code>(f.not_mem_support_iff _).symm</code> should hopefully also work, and be a slightly more readable proof...</p>



<a name="209278510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278510">(Sep 07 2020 at 10:08)</a>:</h4>
<p>:-( I did a bunch of work earlier trying to stamp out the coercion to a function for polynomials, but the problem is everytime you forget that it is a polynomial and treat it as a <code>finsupp</code> the coercion starts to sneak in again.</p>



<a name="209278584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278584">(Sep 07 2020 at 10:09)</a>:</h4>
<p>My attitude if that if you ever see <code>⇑f</code>, and <code>f : polynomial R</code>, then you have encountered a bug, for which the correct fix is make the definition of <code>polynomial</code> irreducible as early as possible (if not earlier).</p>



<a name="209278630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278630">(Sep 07 2020 at 10:09)</a>:</h4>
<p>I very much agree</p>



<a name="209278688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278688">(Sep 07 2020 at 10:10)</a>:</h4>
<p>(Although I admit to having written a lot of <em>evil</em> code)</p>



<a name="209278708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278708">(Sep 07 2020 at 10:10)</a>:</h4>
<p>we did a bunch of cleanup of the polynomials files a few months ago, but I guess there's still a ways to go</p>



<a name="209278814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209278814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209278814">(Sep 07 2020 at 10:11)</a>:</h4>
<p>Thinking out loud: would it be possible/useful to write a linter that checks for <code>coe_fn</code> being applied to a term of type <code>polynomial _</code>? It won't catch any occurrence in the goal, but it should catch some evil usages.</p>



<a name="209279857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209279857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209279857">(Sep 07 2020 at 10:23)</a>:</h4>
<p>One thing that is interesting here is that <code>f.3</code> itself is abstraction-breaking</p>



<a name="209279925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209279925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209279925">(Sep 07 2020 at 10:24)</a>:</h4>
<p>even if you write that after it is made irreducible, lean will make it work</p>



<a name="209280134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209280134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209280134">(Sep 07 2020 at 10:27)</a>:</h4>
<p>Oh wait, lean is doing the right thing here. If you write <code>f.3</code>, it resolves to <code>finsupp.mem_support_to_fun f</code>, which will fail to typecheck if <code>polynomial</code> is irreducible.</p>



<a name="209280192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209280192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209280192">(Sep 07 2020 at 10:28)</a>:</h4>
<p>So the question is, why isn't <code>attribute [irreducible] polynomial</code> at the bottom of <code>data.polynomial</code>?</p>



<a name="209280369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209280369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209280369">(Sep 07 2020 at 10:30)</a>:</h4>
<p>Of course the statement of this theorem itself doesn't typecheck, since <code>f.support</code> is referring to <code>finsupp.support f</code>. If we need this then it should be redeclared as <code>polynomial.support</code></p>



<a name="209285403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209285403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209285403">(Sep 07 2020 at 11:32)</a>:</h4>
<p>I made has_zero irreducible, added very little API, and if people really want it reducible so they can abuse defeq for some reason then they can just locally tag it as reducible</p>



<a name="209285543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209285543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209285543">(Sep 07 2020 at 11:34)</a>:</h4>
<p>I did this when I was making has_zero irreducible: some proofs broke, but surprisingly few. The proofs which broke were of two kinds: those which broke because of missing API, and those that broke because they abuse the API; in those cases I fixed the proofs by removing the <code>option</code> lemma and replacing it with the corresponding <code>has_zero</code> lemma</p>



<a name="209285568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209285568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209285568">(Sep 07 2020 at 11:34)</a>:</h4>
<p>Actually there was also a funny third kind</p>



<a name="209285634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209285634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209285634">(Sep 07 2020 at 11:35)</a>:</h4>
<p>There were two theorems about <code>option</code> for which some stupid trivial lemma was missing from the option API and so the proof used the corresponding result from has_zero :-)</p>



<a name="209285704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209285704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209285704">(Sep 07 2020 at 11:36)</a>:</h4>
<p>I added the result to the option API</p>



<a name="209286203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209286203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209286203">(Sep 07 2020 at 11:42)</a>:</h4>
<p>You made <code>has_zero</code> irreducible? That would break quite a lot. I assume you mean <code>with_zero</code></p>



<a name="209287495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209287495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209287495">(Sep 07 2020 at 11:58)</a>:</h4>
<p>Rather than making <code>polynomial</code> irreducible, why not just make it a structure?</p>



<a name="209288771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209288771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209288771">(Sep 07 2020 at 12:14)</a>:</h4>
<p>One argument against that (making it a structure) is that it commits you a single big refactor. You can make gradual progress by making <code>polynomial</code> irreducible, fixing the API a bit in response to a subset of the errors, then removing the <code>irreducible</code> again. But yeah.</p>



<a name="209289340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209289340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209289340">(Sep 07 2020 at 12:20)</a>:</h4>
<p>I was going to propose that, but then I looked up the definition and it's equal to <code>add_monoid_algebra</code> and I'm not sure where to assert the structure</p>



<a name="209289378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209289378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209289378">(Sep 07 2020 at 12:20)</a>:</h4>
<p>should <code>add_monoid_algebra</code> be a structure with a <code>G</code>-indexed <code>coeff</code> field?</p>



<a name="209293324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209293324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209293324">(Sep 07 2020 at 13:04)</a>:</h4>
<p>oh yeah, that does make things a bit more complicated. I think at least <code>add_monoid_algebra</code> should be a structure, because <code>finsupp</code> is not the only sensible representation (constructively it's perhaps not even the correct representation). Not sure whether <code>polynomial</code> should also be a structure.</p>



<a name="209293793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209293793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209293793">(Sep 07 2020 at 13:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/contrapose/near/209288771">said</a>:</p>
<blockquote>
<p>One argument against that (making it a structure) is that it commits you a single big refactor.</p>
</blockquote>
<p>Right--so the broader lesson is that we should be more eager to use <code>structure</code> in the first place</p>



<a name="209317952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209317952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209317952">(Sep 07 2020 at 18:04)</a>:</h4>
<p>Do you think it would have been a good idea to define <code>with_zero</code> as an inductive type instead of making it an alias for <code>option</code>?</p>



<a name="209317967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209317967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209317967">(Sep 07 2020 at 18:04)</a>:</h4>
<p>This would enforce good behaviour but now you'd have to prove some things twice</p>



<a name="209317998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/contrapose/near/209317998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/contrapose.html#209317998">(Sep 07 2020 at 18:05)</a>:</h4>
<p>Although can this be automated because of the non-refl equiv between option and with_zero?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>