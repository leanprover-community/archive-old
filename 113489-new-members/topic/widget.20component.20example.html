---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/widget.20component.20example.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html">widget component example</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221104512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/widget%20component%20example/near/221104512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Angela Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html#221104512">(Dec 29 2020 at 01:22)</a>:</h4>
<p>Hello. I am looking at <a href="https://leanprover-community.github.io/mathlib_docs/init/meta/widget/basic.html">https://leanprover-community.github.io/mathlib_docs/init/meta/widget/basic.html</a>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">Hello</span> <span class="o">:</span> <span class="n">component</span> <span class="n">string</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">component.pure</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="o">[</span><span class="s2">"hello, "</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="s2">", good day!"</span><span class="o">])</span>
<span class="bp">#</span><span class="n">html</span> <span class="n">Hello</span> <span class="s2">"lean"</span> <span class="c1">-- renders "hello, lean, good day!"</span>
</code></pre></div>
<p>I got it to work with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">Hello</span> <span class="o">:</span> <span class="n">component</span> <span class="n">string</span> <span class="n">empty</span> <span class="o">:=</span> <span class="n">component.pure</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="o">[</span><span class="s2">"hello, "</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="s2">", good day!"</span><span class="o">])</span>
<span class="bp">#</span><span class="n">html</span> <span class="n">html.of_component</span> <span class="s2">"lean"</span> <span class="n">Hello</span> <span class="c1">-- renders "hello, lean, good day!"</span>
</code></pre></div>
<p>but I'm confused why</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">Hello</span> <span class="o">:</span> <span class="n">component</span> <span class="n">string</span> <span class="n">empty</span> <span class="o">:=</span> <span class="n">component.pure</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="o">[</span><span class="s2">"hello, "</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="s2">", good day!"</span><span class="o">])</span>
<span class="bp">#</span><span class="n">html</span> <span class="n">Hello</span> <span class="s2">"lean"</span> <span class="c1">-- renders "hello, lean, good day!"</span>
</code></pre></div>
<p>gives this error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">maximum</span> <span class="kd">class</span><span class="bp">-</span><span class="kd">instance</span> <span class="n">resolution</span> <span class="n">depth</span> <span class="n">has</span> <span class="n">been</span> <span class="n">reached</span>
<span class="o">(</span><span class="n">the</span> <span class="n">limit</span> <span class="n">can</span> <span class="n">be</span> <span class="n">increased</span> <span class="kd">by</span> <span class="n">setting</span> <span class="n">option</span> <span class="bp">'</span><span class="kd">class</span><span class="bp">.</span><span class="n">instance_max_depth'</span><span class="o">)</span>
<span class="o">(</span><span class="n">the</span> <span class="kd">class</span><span class="bp">-</span><span class="kd">instance</span> <span class="n">resolution</span> <span class="n">trace</span> <span class="n">can</span> <span class="n">be</span> <span class="n">visualized</span> <span class="kd">by</span> <span class="n">setting</span> <span class="n">option</span> <span class="bp">'</span><span class="n">trace.class_instances'</span><span class="o">)</span>
</code></pre></div>
<p>Thanks.</p>



<a name="221105637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/widget%20component%20example/near/221105637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html#221105637">(Dec 29 2020 at 01:52)</a>:</h4>
<p>The documentation there might be out of date. cc: <span class="user-mention" data-user-id="121918">@Edward Ayers</span></p>



<a name="221280864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/widget%20component%20example/near/221280864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html#221280864">(Dec 31 2020 at 10:09)</a>:</h4>
<p>Hello, I think that I made a mistake with typeclasses</p>



<a name="221281179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/widget%20component%20example/near/221281179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html#221281179">(Dec 31 2020 at 10:16)</a>:</h4>
<p>So the problem is that when you write <code>Hello "lean"</code>, there is a function coercion, but the typeclass inference system is getting stuck in a loop for some reason. I suggest that you just use the clunkier version with <code>html.of_component</code> for now. Maybe someone who actually understands typeclasses knows what needs to change to get this to work.</p>



<a name="221309294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/widget%20component%20example/near/221309294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/widget.20component.20example.html#221309294">(Dec 31 2020 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="121918">@Edward Ayers</span> thanks for the explanation! I've opened <a href="https://github.com/leanprover-community/lean/issues/512">lean#512</a> for now.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>