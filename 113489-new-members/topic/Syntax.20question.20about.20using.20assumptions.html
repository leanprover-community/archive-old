---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html">Syntax question about using assumptions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231955685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955685">(Mar 26 2021 at 12:30)</a>:</h4>
<p>How can I use assumptions I previously made in order to formulate new conditions? Concretely, I am trying to define something like this:</p>
<p><code>def closed_under_composition : Prop :=  ∀ i j : arrow C, i.right = j.left → Z i → Z j → Z (i.hom ≫ j.hom)</code>.</p>
<p>Here C is a category and <code>Z : arrow C → Prop</code>. This raises an error since <code>≫</code> is only defined whenever <code> i.right = j.left </code> holds. What is the correct syntax to achieve this?</p>



<a name="231955859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955859">(Mar 26 2021 at 12:32)</a>:</h4>
<p>Don't use equality of objects, it is evil. :-)</p>



<a name="231955895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955895">(Mar 26 2021 at 12:32)</a>:</h4>
<p>(And when you do really need to use it, use <code>eq_to_hom</code> to lift the equality to a morphism.)</p>



<a name="231955941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955941">(Mar 26 2021 at 12:33)</a>:</h4>
<p>re evil: But surely not to talk about composites of morphisms?</p>



<a name="231955960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955960">(Mar 26 2021 at 12:33)</a>:</h4>
<p>there we use dependent typing</p>



<a name="231955984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231955984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231955984">(Mar 26 2021 at 12:33)</a>:</h4>
<p><code>{X Y Z : C} (f : X \hom Y) (g : Y \hom Z)</code> --- no equations involved!</p>



<a name="231956107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956107">(Mar 26 2021 at 12:34)</a>:</h4>
<p>Yes, sure. The thing is, I want to build my notions on objects of <code>arrow C</code>.</p>



<a name="231956138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956138">(Mar 26 2021 at 12:34)</a>:</h4>
<p>Maybe there is an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> to this?</p>



<a name="231956387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956387">(Mar 26 2021 at 12:36)</a>:</h4>
<p>You can curry <code>Z : Arrow C → Prop</code> to <code>Z' : Π {a b : C}, (a ⟶ b) → Prop</code></p>



<a name="231956467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956467">(Mar 26 2021 at 12:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  Possibly! - The question above is really a general syntax question, not specifically about composing morphisms. Phrased more generally: given some function <code>f(x,y)</code> which needs a hypothesis <code>h(x,y)</code> for it to be defined, how do I define a condition on x,y saying something like : assuming h(x,y), I want f(x,y) to hold.</p>



<a name="231956524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956524">(Mar 26 2021 at 12:38)</a>:</h4>
<p>If you _really_ need to do something directly on <code>arrow</code> you could define a <code>composable</code> predicate on a pair of arrows, and a new composition function which takes two functions and the evidence they are composable.</p>



<a name="231956597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231956597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231956597">(Mar 26 2021 at 12:39)</a>:</h4>
<p>Hmm, I'm not sure what your more general statement actually means.</p>



<a name="231957011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957011">(Mar 26 2021 at 12:42)</a>:</h4>
<p>I'd interpret "given some function f(x,y) which needs a hypothesis h(x,y) for it to be defined" as something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">//</span> <span class="n">P</span> <span class="n">x</span> <span class="o">}</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="bp">\</span><span class="k">forall</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="231957142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957142">(Mar 26 2021 at 12:43)</a>:</h4>
<p>(reducing from two variables <code>x,y</code> to one. Here your <code>h</code> is my <code>P</code>, and then my <code>g</code> says "assuming h, then f"</p>



<a name="231957207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957207">(Mar 26 2021 at 12:43)</a>:</h4>
<p>But I'm not really sure how that is related to your original <code>closed_under_composition</code>. (Sorry if I'm being daft. It's late here. :-)</p>



<a name="231957817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957817">(Mar 26 2021 at 12:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130377">David Wärn</span> <a href="#narrow/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions/near/231956387">said</a>:</p>
<blockquote>
<p>You can curry <code>Z : Arrow C → Prop</code> to <code>Z' : Π {a b : C}, (a ⟶ b) → Prop</code></p>
</blockquote>
<p>Here's how to express a predicate on morphisms being closed under composition in this curried setup</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span> <span class="n">C</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">closed_under_composition</span> <span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">C</span><span class="o">},</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⟶</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⟶</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⟶</span> <span class="n">c</span><span class="o">),</span> <span class="n">Z</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">Z</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">Z</span> <span class="o">(</span><span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span><span class="o">)</span>
</code></pre></div>



<a name="231957923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957923">(Mar 26 2021 at 12:49)</a>:</h4>
<p>Yeah -- I think what's going on here is that Jakob wants to know why we're not just telling him how to make use of <code>i.right = j.left</code> so that <code>i.hom ≫ j.hom</code> actually makes sense.</p>



<a name="231957938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231957938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231957938">(Mar 26 2021 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> : It is surely me who is lame! Here is another example, I am sorry for my imprecisions above. I have a function <code>my_fun</code> that is only defined for positive numbers. How do I define another function <code>f</code> that, given an <code>x</code> and the assumption that <code>x</code> is positive, produces an output depending on <code>my_fun x</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">hyp</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span>
<span class="kd">def</span> <span class="n">my_fun</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">hyp</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">x</span> <span class="kd">end</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">hyp</span> <span class="n">x</span> <span class="bp">→</span> <span class="o">(</span><span class="n">my_fun</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span>
</code></pre></div>



<a name="231958006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958006">(Mar 26 2021 at 12:50)</a>:</h4>
<p>and that problem is that this is a bit of a subtle thing, precisely because we're using dependent type theory.</p>



<a name="231958161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958161">(Mar 26 2021 at 12:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions/near/231957923">said</a>:</p>
<blockquote>
<p>Yeah -- I think what's going on here is that Jakob wants to know why we're not just telling him how to make use of <code>i.right = j.left</code> so that <code>i.hom ≫ j.hom</code> actually makes sense.</p>
</blockquote>
<p>Yes, that is my question.</p>



<a name="231958198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958198">(Mar 26 2021 at 12:51)</a>:</h4>
<p>Just write <code>def f (x : ℕ) (h : hyp x) : ℕ  := my_fun x h + 1</code></p>



<a name="231958228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958228">(Mar 26 2021 at 12:52)</a>:</h4>
<p>but this is totally orthogonal to your original question. :-)</p>



<a name="231958314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958314">(Mar 26 2021 at 12:52)</a>:</h4>
<p>The point is that we could use <code>h : i.right = j.left</code> in two ways:</p>



<a name="231958341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958341">(Mar 26 2021 at 12:52)</a>:</h4>
<ol>
<li>write <code>i.hom \gg eq_to_hom h \gg j.hom</code></li>
</ol>



<a name="231958372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958372">(Mar 26 2021 at 12:53)</a>:</h4>
<p>(however then you'll be talking about <code>Z</code> of some other thing...)</p>



<a name="231958413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958413">(Mar 26 2021 at 12:53)</a>:</h4>
<ol start="2">
<li>write <code>by { subst h, exact i.hom \gg j.hom }</code></li>
</ol>



<a name="231958440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958440">(Mar 26 2021 at 12:53)</a>:</h4>
<p>but again, this is _not_ <code>i.hom \gg j.hom</code></p>



<a name="231958547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958547">(Mar 26 2021 at 12:54)</a>:</h4>
<p>(or we could do some fancier things using <code>eq.rec</code> (think "transport through a type family over a path"), which I won't attempt to write out here)</p>



<a name="231958711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958711">(Mar 26 2021 at 12:55)</a>:</h4>
<p>But fundamentally, <code>i.hom \gg j.hom</code> itself will just never make sense: the hypothesis <code>h : i.right = j.left</code> is a proposition, not a typing judgement, and unfortunately those are different things in dependent type theory.</p>



<a name="231958949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958949">(Mar 26 2021 at 12:57)</a>:</h4>
<p>this probably is because <code>i.hom</code> and <code>j.hom</code> live in type families indexed by the source and target, and when you have equations in the indexing type of a type family, you only get canonical functions between the fibres, not actual identifications.</p>



<a name="231958989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231958989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231958989">(Mar 26 2021 at 12:57)</a>:</h4>
<p>I fear I am only making things worse. :-)</p>



<a name="231959016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959016">(Mar 26 2021 at 12:57)</a>:</h4>
<p>Aha, would a layman (=for me)-summary be something like this: ?  <code>h</code> just knows that <code>i.right</code> and <code>j.left</code> can be identified (somehow), but this is not enough to make them equal (so that the morphisms can be composed)?</p>



<a name="231959139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959139">(Mar 26 2021 at 12:58)</a>:</h4>
<p>Above you commented "you could define a composable predicate on a pair of arrows, and a new composition function which takes two functions and the evidence they are composable". How would that be done then?</p>



<a name="231959143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959143">(Mar 26 2021 at 12:58)</a>:</h4>
<p>Something like this. This is the price we pay for the wonders of dependent type theory. :-)</p>



<a name="231959152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959152">(Mar 26 2021 at 12:58)</a>:</h4>
<p>It is enough but you have to tell Lean how to use <code>h</code></p>



<a name="231959180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959180">(Mar 26 2021 at 12:58)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">compose</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">arrow</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f.right</span> <span class="bp">=</span> <span class="n">g.left</span><span class="o">)</span> <span class="o">:</span> <span class="n">arrow</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">f.hom</span> <span class="bp">≫</span> <span class="n">eq_to_hom</span> <span class="n">h</span> <span class="bp">≫</span> <span class="n">g.hom</span><span class="o">⟩</span>

<span class="kd">def</span> <span class="n">closed_under_composition</span> <span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">arrow</span> <span class="n">C</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">arrow</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f.right</span> <span class="bp">=</span> <span class="n">g.left</span><span class="o">),</span> <span class="n">Z</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">Z</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">Z</span> <span class="o">(</span><span class="n">compose</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span>
</code></pre></div>



<a name="231959199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959199">(Mar 26 2021 at 12:59)</a>:</h4>
<p>exactly</p>



<a name="231959250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959250">(Mar 26 2021 at 12:59)</a>:</h4>
<p>OK, thanks a lot to both of you. Learned another thing!</p>



<a name="231959397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959397">(Mar 26 2021 at 13:00)</a>:</h4>
<p>Now if <code>h</code> is actually <code>rfl</code>, then <code>eq_to_hom h</code> will simplify (e.g. via <code>simp</code>) to <code>\b1 f.right</code>, and then <code>f.hom \gg eq_to_hom \gg g.hom</code> will simplify to <code>f.hom \gg h.hom</code>.</p>



<a name="231959465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231959465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231959465">(Mar 26 2021 at 13:00)</a>:</h4>
<p>But until you know that it is actually <code>rfl</code> then it doesn't simplify.</p>



<a name="231967056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231967056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231967056">(Mar 26 2021 at 13:48)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.eq_to_hom">docs#category_theory.eq_to_hom</a> is a category-ified <a href="https://leanprover-community.github.io/mathlib_docs/find/cast">docs#cast</a>, right?</p>



<a name="231968122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231968122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231968122">(Mar 26 2021 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> yep</p>



<a name="231971955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231971955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231971955">(Mar 26 2021 at 14:18)</a>:</h4>
<p>It might be more accurate to say that composing a morphism with an eq_to_hom plays the same role as cast (<a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.congr_arg_mpr_hom_left">docs#category_theory.congr_arg_mpr_hom_left</a> shows that the two agree)</p>



<a name="231992879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Syntax%20question%20about%20using%20assumptions/near/231992879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Syntax.20question.20about.20using.20assumptions.html#231992879">(Mar 26 2021 at 16:21)</a>:</h4>
<p>That simp lemma worries me a bit - I don't think it can ever fire, as <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_mpr_eq_cast">docs#eq_mpr_eq_cast</a> should fire first</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>