---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html">Correct workflow to work with Mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202074879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202074879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202074879">(Jun 26 2020 at 10:42)</a>:</h4>
<p>Suppose I create a new Lean project with the command <code>leanproject</code> following the tutorial online (<a href="https://leanprover-community.github.io/install/project.html">https://leanprover-community.github.io/install/project.html</a>). If I understand correctly, this creates a local Git repository on my computer that is not linked to any online GitHub repo. Suppose further that the files in this repository are meant to be PRed on Mathlib. I am wondering what the correct workflow is. I suppose that, since this repo is not linked to Mathlib at the beginning, a good idea is to upload it on a personal repo online on my GitHub account (that I am not really sure how to do since I always create the GitHub repo first but if this is the case I will figure out by myself). Suppose that to run my code I need to fill up holes in the existing files of Mathlib. Should I edit directly the files in the src folder in this repo? What are then the next step to PR on Mathlib?</p>



<a name="202076078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202076078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202076078">(Jun 26 2020 at 10:58)</a>:</h4>
<p><a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a> might help?</p>



<a name="202076972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202076972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202076972">(Jun 26 2020 at 11:09)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span> The best approach would be to do <code>leanproject get mathlib</code>, and then work on a branch inside that</p>



<a name="202076987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202076987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202076987">(Jun 26 2020 at 11:09)</a>:</h4>
<p>(I don't know how familiar you are with <code>git</code>)</p>



<a name="202077083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202077083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202077083">(Jun 26 2020 at 11:10)</a>:</h4>
<p>If you give us your github username, we can give you push access, so that you can push your branch to github, and create PRs</p>



<a name="202077904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202077904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202077904">(Jun 26 2020 at 11:21)</a>:</h4>
<p>Ok thanks a lot! My github username is Nicknamen</p>



<a name="202077933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202077933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202077933">(Jun 26 2020 at 11:21)</a>:</h4>
<p>Nicolò, could you tell us if <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a> is hard to understand?</p>



<a name="202078019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202078019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202078019">(Jun 26 2020 at 11:22)</a>:</h4>
<p>You should have received a GitHub invitation.</p>



<a name="202078168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202078168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202078168">(Jun 26 2020 at 11:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202076987">said</a>:</p>
<blockquote>
<p>(I don't know how familiar you are with <code>git</code>)</p>
</blockquote>
<p>I used it in the past but I never used it in shared projects so I am not that familiar</p>



<a name="202078343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202078343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202078343">(Jun 26 2020 at 11:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202077933">said</a>:</p>
<blockquote>
<p>Nicolò, could you tell us if <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a> is hard to understand?</p>
</blockquote>
<p>What I do not understand  is if this process has anything to do with the command <code>leanproject new my_project</code> or if this latter command is meant to create projects that are not meant to be uploaded on Mathlib</p>



<a name="202078390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202078390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202078390">(Jun 26 2020 at 11:28)</a>:</h4>
<p>Making a new project is usually for projects which are not for mathlib but rather use mathlib as a dependency</p>



<a name="202079224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079224">(Jun 26 2020 at 11:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202078390">said</a>:</p>
<blockquote>
<p>Making a new project is usually for projects which are not for mathlib but rather use mathlib as a dependency</p>
</blockquote>
<p>Ok thanks, this was precisely my doubt! So I guess that to work on Mathlib I am supposed to use plain git commands and the mathilb tools do not play a major role</p>



<a name="202079239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079239">(Jun 26 2020 at 11:37)</a>:</h4>
<p>No, they play a major role.</p>



<a name="202079337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079337">(Jun 26 2020 at 11:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202079239">said</a>:</p>
<blockquote>
<p>No, they play a major role.</p>
</blockquote>
<p>To compile right?</p>



<a name="202079473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079473">(Jun 26 2020 at 11:40)</a>:</h4>
<p>I mean for example I use pull to update the library and not leanproject up</p>



<a name="202079507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079507">(Jun 26 2020 at 11:41)</a>:</h4>
<p>I guess I will have a try and try to understand also with practice</p>



<a name="202079539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079539">(Jun 26 2020 at 11:42)</a>:</h4>
<p>Say you want to share a shiny new lemmas about sets. The workflow is:</p>
<ul>
<li><code>leanproject get -b project_name:shiny_lemma</code></li>
<li>edit <code>data/set/basic.lean</code></li>
<li>If you are anxious, <code>leanproject build</code> to check you didn't break anything. This will be long because you edit a fundamental file, imported by pretty much everything else.</li>
<li><code>git commit -a</code></li>
<li><code>git push origin</code> </li>
<li>Visit <a href="https://github.com/leanprover/mathlib">https://github.com/leanprover/mathlib</a> to see an invitation to open a PR based on what you just did.</li>
<li>Wait for continuous integration to build your branch if you didn't do it locally</li>
<li><code>leanproject get-cache</code> will download what was built by CI</li>
<li>etc.</li>
</ul>



<a name="202079593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079593">(Jun 26 2020 at 11:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202079539">said</a>:</p>
<blockquote>
<p>Say you want to share a shiny new lemmas about sets. The workflow is:</p>
<ul>
<li><code>leanproject get -b project_name:shiny_lemma</code></li>
<li>edit <code>data/set/basic.lean</code></li>
<li>If you are anxious, <code>leanproject build</code> to check you didn't break anything. This will be long because you edit a fundamental file, imported by pretty much everything else.</li>
<li><code>git commit -a</code></li>
<li><code>git push origin</code> </li>
<li>Visit <a href="https://github.com/leanprover/mathlib">https://github.com/leanprover/mathlib</a> to see an invitation to open a PR based on what you just did.</li>
<li>Wait for continuous integration to build your branch if you didn't do it locally</li>
<li><code>leanproject get-cache</code> will download what was built by CI</li>
<li>etc.</li>
</ul>
</blockquote>
<p>Ok thanks this is very useful!!</p>



<a name="202079747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202079747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202079747">(Jun 26 2020 at 11:45)</a>:</h4>
<p>Oops, I failed to replace "project_name" by "mathlib".</p>



<a name="202080712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202080712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202080712">(Jun 26 2020 at 11:59)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span> Yes, I use <code>leanproject up</code> and <code>leanproject get-cache</code> all the time when working on mathlib.</p>



<a name="202087783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202087783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202087783">(Jun 26 2020 at 13:16)</a>:</h4>
<p>How does all of this change if I'm working off a forked mathlib? In particular, how do I update my fork from the upstream changes? I merged the remote-tracking branch 'upstream/master' into my forked branch and pushed it. How do I update my local folder now? I tried <code>leanproject up</code> but it says "Couldn't pull from a relevant git remote". My toml says 'leanprover-community/lean:3.16.5' though. Shouldn't that be pointing to my forked repo? If I wait for the oleans to be built on GitHub can I then do <code>leanproject get-cache</code>?</p>



<a name="202089834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202089834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202089834">(Jun 26 2020 at 13:33)</a>:</h4>
<p>To be honest, we don't really thought carefully about that case. Basically every mathlib contributor is given write access to non-master branch of the community repo, and nobody works on forks of mathlib.</p>



<a name="202089954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202089954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202089954">(Jun 26 2020 at 13:34)</a>:</h4>
<p>So you only need to tell us you want to contribute and give us you GitHub login.</p>



<a name="202091358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202091358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202091358">(Jun 26 2020 at 13:43)</a>:</h4>
<p>Then we should DEFINITELY remove the "Mathlib principally uses the fork-and-branch workflow." comment at the top of <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a>!</p>



<a name="202091479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202091479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202091479">(Jun 26 2020 at 13:44)</a>:</h4>
<p>My GitHub login is paulvanwamelen. Thanks!</p>



<a name="202091485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202091485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202091485">(Jun 26 2020 at 13:44)</a>:</h4>
<p>True, this is outdated.</p>



<a name="202091665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202091665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202091665">(Jun 26 2020 at 13:45)</a>:</h4>
<p>You can now use your invitation to open a PR fixing that page.</p>



<a name="202095371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202095371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202095371">(Jun 26 2020 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255743">Paul van Wamelen</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202091358">said</a>:</p>
<blockquote>
<p>Then we should DEFINITELY remove the "Mathlib principally uses the fork-and-branch workflow." comment at the top of <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a>!</p>
</blockquote>
<p>I admit I was also a bit confused by this sentence as the workflow seems to be slightly different from what I have always been doing with Git in the past, but since I have never used it in shared projects there was also the option that I have not been using it the whole time as it is supposed to be used without no one ever noticing</p>



<a name="202341272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341272">(Jun 29 2020 at 17:16)</a>:</h4>
<p>I am trying to follow the workflow delineated by Patrick, but I am having problems to update Mathlib.<br>
I branched Mathlib with <code>leanproject get -b mathlib:whatever</code> and then I edited a couple of files. Before trying to compile I ran <code>leanproject up</code> but I get</p>
<div class="codehilite"><pre><span></span><code><span class="n">Couldn&#39;t</span> <span class="n">pull</span> <span class="k">from</span> <span class="n">a</span> <span class="n">relevant</span> <span class="n">git</span> <span class="n">remote</span><span class="bp">.</span> <span class="n">You</span> <span class="n">may</span> <span class="n">try</span> <span class="n">to</span> <span class="n">git</span> <span class="n">pull</span> <span class="n">manually</span> <span class="n">and</span> <span class="k">then</span> <span class="n">run</span> <span class="bp">`</span><span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span><span class="bp">`</span>
</code></pre></div>


<p>If I run <code>git pull origin master</code> and then <code>leanproject get-cache</code> I get</p>
<div class="codehilite"><pre><span></span><code><span class="n">Looking</span> <span class="n">for</span> <span class="n">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">remote</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Trying</span> <span class="n">to</span> <span class="n">download</span>
<span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">oleanstorage</span><span class="bp">.</span><span class="n">azureedge</span><span class="bp">.</span><span class="n">net</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">xz</span> <span class="n">to</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">nicoc</span><span class="err">\</span><span class="bp">.</span><span class="n">mathlib</span><span class="err">\</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">xz</span>
<span class="n">Trying</span> <span class="n">to</span> <span class="n">download</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">oleanstorage</span><span class="bp">.</span><span class="n">azureedge</span><span class="bp">.</span><span class="n">net</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">gz</span> <span class="n">to</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">nicoc</span><span class="err">\</span><span class="bp">.</span><span class="n">mathlib</span><span class="err">\</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">gz</span>
<span class="n">Trying</span> <span class="n">to</span> <span class="n">download</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">oleanstorage</span><span class="bp">.</span><span class="n">azureedge</span><span class="bp">.</span><span class="n">net</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">bz2</span> <span class="n">to</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">nicoc</span><span class="err">\</span><span class="bp">.</span><span class="n">mathlib</span><span class="err">\</span><span class="n">c5313d5ede5d33bc6ece62ecff1aa7d84691f692</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">bz2</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">GitHub</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Info</span><span class="o">:</span> <span class="n">No</span> <span class="n">github</span> <span class="kn">section</span> <span class="n">found</span> <span class="k">in</span> <span class="err">&#39;</span><span class="n">git</span> <span class="n">config&#39;</span><span class="o">,</span> <span class="n">we</span> <span class="n">will</span> <span class="n">use</span> <span class="n">GitHub</span> <span class="k">with</span> <span class="n">no</span> <span class="n">authentication</span>
<span class="n">Failed</span> <span class="n">to</span> <span class="n">fetch</span> <span class="n">mathlib</span> <span class="n">oleans</span>
</code></pre></div>


<p>I am nor really sure what the GitHub section is. I do have my GitHub username in git config and I have no problem pulling and pushing to personal repos on my account.</p>



<a name="202341416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341416">(Jun 29 2020 at 17:17)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span> Did you commit your changes?</p>



<a name="202341482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341482">(Jun 29 2020 at 17:18)</a>:</h4>
<p>If so, then github will not have olean files for your repo</p>



<a name="202341497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341497">(Jun 29 2020 at 17:18)</a>:</h4>
<p>Yes I did!</p>



<a name="202341520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341520">(Jun 29 2020 at 17:18)</a>:</h4>
<p>Ok, that explains why it's failing</p>



<a name="202341569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341569">(Jun 29 2020 at 17:18)</a>:</h4>
<p>I suggest</p>
<div class="codehilite"><pre><span></span><code><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">your</span><span class="bp">-</span><span class="n">branch</span>
</code></pre></div>



<a name="202341618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341618">(Jun 29 2020 at 17:19)</a>:</h4>
<p><code>leanproject get-cache</code> attempts to download olean files that have been built "in the cloud". It won't be able to download olean files reflecting changes that have only been made on your computer.</p>



<a name="202341672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341672">(Jun 29 2020 at 17:19)</a>:</h4>
<p>If you push your branch, then CI will start creating oleans for you. You can fetch them later with <code>leanproject</code>, but it will take some time. (2 hours? approx.)</p>



<a name="202341683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341683">(Jun 29 2020 at 17:19)</a>:</h4>
<p>But <code>leanproject</code> wanted me to do it:</p>
<div class="codehilite"><pre><span></span><code><span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span>
<span class="n">The</span> <span class="n">repository</span> <span class="n">is</span> <span class="n">dirty</span><span class="o">,</span> <span class="n">please</span> <span class="n">commit</span> <span class="n">changes</span> <span class="n">before</span> <span class="n">fetching</span> <span class="n">cache</span><span class="o">,</span> <span class="n">or</span> <span class="n">run</span> <span class="n">this</span> <span class="n">command</span> <span class="k">with</span> <span class="n">option</span> <span class="c1">--force.</span>
</code></pre></div>



<a name="202341743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341743">(Jun 29 2020 at 17:20)</a>:</h4>
<p>Sure... I guess this is confusing.</p>



<a name="202341787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341787">(Jun 29 2020 at 17:20)</a>:</h4>
<p>Am I supposed to run it with <code>--force</code> then?</p>



<a name="202341798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341798">(Jun 29 2020 at 17:20)</a>:</h4>
<p>If you run <code>git log</code> you will see a bunch of long hexadecimal numbers. Those are git commit hashes.</p>



<a name="202341826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341826">(Jun 29 2020 at 17:21)</a>:</h4>
<p>leanproject looks at the git commit hash of the current commit, and tries to fetch oleans from the cloud for that commit.</p>



<a name="202341846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341846">(Jun 29 2020 at 17:21)</a>:</h4>
<p>But it the commit doesn't exist upstairs... it can't help.</p>



<a name="202341863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341863">(Jun 29 2020 at 17:21)</a>:</h4>
<p>Oh ok that makes sense!</p>



<a name="202341940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341940">(Jun 29 2020 at 17:22)</a>:</h4>
<p><span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span> No, I think just commiting is fine. And then move to a commit (e.g. <code>master</code>) that does have oleans. Fetch the oleans, and go back to your branch.</p>



<a name="202341978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202341978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202341978">(Jun 29 2020 at 17:22)</a>:</h4>
<p>Then you will have oleans that are quite close to what you want, but you still have to compile because of your local changes.</p>



<a name="202342019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342019">(Jun 29 2020 at 17:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202341978">said</a>:</p>
<blockquote>
<p>Then you will have oleans that are quite close to what you want, but you still have to compile because of your local changes.</p>
</blockquote>
<p>You mean with <code>leanproject buid?</code></p>



<a name="202342032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342032">(Jun 29 2020 at 17:23)</a>:</h4>
<p>If you already pushed your branch (say yesterday) then you can do</p>
<div class="codehilite"><pre><span></span><code><span class="n">git</span> <span class="n">checkout</span> <span class="n">origin</span><span class="bp">/</span><span class="n">your</span><span class="bp">-</span><span class="n">branch</span>
</code></pre></div>


<p>and fetch oleans there. Those might be better than the oleans from master.</p>



<a name="202342058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342058">(Jun 29 2020 at 17:23)</a>:</h4>
<p>Depends on when you last merged master into your branch</p>



<a name="202342112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342112">(Jun 29 2020 at 17:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202342058">said</a>:</p>
<blockquote>
<p>Depends on when you last merged master into your branch</p>
</blockquote>
<p>I never merged anything yet! I did all of this like 2 hours ago</p>



<a name="202342274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342274">(Jun 29 2020 at 17:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202341569">said</a>:</p>
<blockquote>
<p>I suggest</p>
<div class="codehilite"><pre><span></span><code><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">your</span><span class="bp">-</span><span class="n">branch</span>
</code></pre></div>


</blockquote>
<p>Then do this sequence <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="202342451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342451">(Jun 29 2020 at 17:26)</a>:</h4>
<p>Well switching to the master branch it worked to do <code>leanproject up</code>... Am I supposed to do it only from the master branch?</p>



<a name="202342597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342597">(Jun 29 2020 at 17:26)</a>:</h4>
<p>No, like I said, you can also do it from <code>origin/your-branch</code></p>



<a name="202342648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342648">(Jun 29 2020 at 17:27)</a>:</h4>
<p>From any commit that also exists on github (for more than 2hrs, otherwise it might still be busy creating your oleans)</p>



<a name="202342724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342724">(Jun 29 2020 at 17:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202342597">said</a>:</p>
<blockquote>
<p>No, like I said, you can also do it from <code>origin/your-branch</code></p>
</blockquote>
<p>I thought you meant <code>leanpoject get-cache</code> becasue <code>leanproject up</code> did not work from my branch even before I committed anything</p>



<a name="202342726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342726">(Jun 29 2020 at 17:27)</a>:</h4>
<p>That's the power. If you push to github, and share your branchname. We can pull, <em>and</em> get the oleans.</p>



<a name="202342840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342840">(Jun 29 2020 at 17:28)</a>:</h4>
<blockquote>
<p>becasue <code>leanproject up</code> did not work from my branch even before I committed anything</p>
</blockquote>
<p>but your branch only existed on your computer, not on github, right?</p>



<a name="202342919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342919">(Jun 29 2020 at 17:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202342840">said</a>:</p>
<blockquote>
<blockquote>
<p>becasue <code>leanproject up</code> did not work from my branch even before I committed anything</p>
</blockquote>
<p>but your branch only existed on your computer, not on github, right?</p>
</blockquote>
<p>Oh right sorry I was thinking only about the commits existing only on my computer, not my branch</p>



<a name="202342970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202342970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202342970">(Jun 29 2020 at 17:29)</a>:</h4>
<p>If you do <code>git checkout -b new-branch</code> then after that <code>leanproject get-cache</code> still works. But as soon as you make changes, it will probably complain that your directory is dirty.</p>



<a name="202343148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202343148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202343148">(Jun 29 2020 at 17:30)</a>:</h4>
<p>Ok thanks it worked I will try to build now with <code>leanproject build</code></p>



<a name="202352532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202352532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dima Pasechnik <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202352532">(Jun 29 2020 at 18:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202077933">said</a>:</p>
<blockquote>
<p>Nicolò, could you tell us if <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a> is hard to understand?</p>
</blockquote>
<p>I am curious to understand the chosen model - why everyone (apart from committers to the master branch and the like) would need write access to the main repo (I do know much more than I ever wanted to know about Git workflows)?</p>



<a name="202352998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202352998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202352998">(Jun 29 2020 at 18:53)</a>:</h4>
<p>The main reason is that we use Github actions to compile the ".olean" files and upload them to Azure (so that any reviewers don't have to compile mathlib themselves), and we only want that to happen for workflows run from the main repository.</p>



<a name="202353318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202353318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202353318">(Jun 29 2020 at 18:56)</a>:</h4>
<p>Right... compiling mathlib takes ~1 hour on a decent machine. This way, people can jump right in, after downloading precompiled binaries from a branch.</p>



<a name="202353611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202353611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dima Pasechnik <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202353611">(Jun 29 2020 at 18:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202352998">said</a>:</p>
<blockquote>
<p>The main reason is that we use Github actions to compile the ".olean" files and upload them to Azure (so that any reviewers don't have to compile mathlib themselves), and we only want that to happen for workflows run from the main repository.</p>
</blockquote>
<p>I guess you have a priority access to GH Actions queue (we do use a free tier GH Actions in SageMath work, and they tend to take a lot of time), right?</p>



<a name="202354000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354000">(Jun 29 2020 at 19:01)</a>:</h4>
<p>We're also using the free tier for GH actions as far as I know. It's more of a security thing, I think. Other forks can run most of our workflow to build and check their commits under their own GH Actions plans, but they can't upload the results to Azure since we store the credentials as "secrets" on github, and those only work for workflows run from our own repo.</p>



<a name="202354247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354247">(Jun 29 2020 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="316505">@Dima Pasechnik</span> We're using incremental builds, so not every build takes 1hr, most take 5-15 minutes. Nevertheless, the "<code>leanproject get-cache</code>, wait 5 seconds" is hard to beat.</p>



<a name="202354277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354277">(Jun 29 2020 at 19:03)</a>:</h4>
<p>Of course, if we're giving out write access willy-nilly then the security benefits become negligible. So we'll most likely have to revisit this (if we're lucky enough to keep growing).</p>



<a name="202354315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dima Pasechnik <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354315">(Jun 29 2020 at 19:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib/near/202353318">said</a>:</p>
<blockquote>
<p>Right... compiling mathlib takes ~1 hour on a decent machine. This way, people can jump right in, after downloading precompiled binaries from a branch.</p>
</blockquote>
<p>precompiled binaries packed in some kind of container (we use Docker?), otherwise I don't see how this can work.</p>



<a name="202354426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354426">(Jun 29 2020 at 19:04)</a>:</h4>
<p><code>Trying to download https://oleanstorage.azureedge.net/mathlib/4e2c7e36308b6349c5a794237ebfef91e309ac2f.tar.xz to /home/buzzard/.mathlib/4e2c7e36308b6349c5a794237ebfef91e309ac2f.tar.xz
</code></p>



<a name="202354488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354488">(Jun 29 2020 at 19:05)</a>:</h4>
<p>A python script downloads the tarball, and then unpacks it and puts it all in the right place.</p>



<a name="202354601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354601">(Jun 29 2020 at 19:05)</a>:</h4>
<p><span class="user-mention" data-user-id="316505">@Dima Pasechnik</span> what do you mean? <code>lean</code> compiles <code>.lean</code> files into <code>.olean</code> files. And <code>leanproject</code> will download those olean files (in a tarball) for whatever branch you are currently interested in.</p>



<a name="202354674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354674">(Jun 29 2020 at 19:06)</a>:</h4>
<p>So there is no Docker involved.</p>



<a name="202354685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354685">(Jun 29 2020 at 19:06)</a>:</h4>
<p>"binaries" is not the right word. Rather, from a proof script in which there is a lot of work to do, Lean can extract the compiled version of the proofs, which is much faster to read and check and use, but this is not a binary in the sense of executable, it is still a file that will be used by the Lean executable.</p>



<a name="202354697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354697">(Jun 29 2020 at 19:06)</a>:</h4>
<p>Also, we are not talking about compiling <code>lean</code> itself. That's a different story (-;</p>



<a name="202354747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354747">(Jun 29 2020 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> It is a "binary" file, in the sense that it isn't plaintext human readable. (Unless you are Mario, I guess.)</p>



<a name="202354831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354831">(Jun 29 2020 at 19:07)</a>:</h4>
<p>It is a binary file, but it is not "binaries" in the executable sense.</p>



<a name="202354902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202354902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202354902">(Jun 29 2020 at 19:08)</a>:</h4>
<p>The "binaries" are leans <code>.olean</code> files,  which is a custom format that happens to be platform independent, maybe its more like  <code>.py-&gt;.pyc</code> than <code>.c-&gt;.o</code></p>



<a name="202355506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202355506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dima Pasechnik <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202355506">(Jun 29 2020 at 19:13)</a>:</h4>
<p>I see, thanks for explaining.</p>



<a name="202355743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Correct%20workflow%20to%20work%20with%20Mathlib/near/202355743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dima Pasechnik <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Correct.20workflow.20to.20work.20with.20Mathlib.html#202355743">(Jun 29 2020 at 19:15)</a>:</h4>
<p>basically, GH Actions is a mainframe for doing some heavy lifting.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>