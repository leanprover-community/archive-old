---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Long.20proofs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html">Long proofs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265286080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265286080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265286080">(Dec 17 2021 at 11:51)</a>:</h4>
<p>I need style advice about writing long proofs. <br>
Imagine there is a case disjunction, should one write each of them as a separate lemma? <br>
Passing all needed variables (but not more), although sometimes that could make a lot of them?<br>
In mathlib, it seems that a lot of the initial lemmas have 1-line proofs, but more complicated stuff has rarely more than 20 lines.<br>
(The proof I'm in already makes more than 100 lines…)</p>



<a name="265286241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265286241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265286241">(Dec 17 2021 at 11:53)</a>:</h4>
<p>Long proofs are rubbish because after you've written 100 lines, you have to wait 5 seconds for the orange bars to go every time you press a key. I tend to factor out as much as possible because of this. An alternative is to finish a subgoal proof, and then comment out the proof and replace it with <code>sorry</code> and then just unsorry everything at the end.</p>



<a name="265286373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265286373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Taucher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265286373">(Dec 17 2021 at 11:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130609">Antoine Chambert-Loir</span> <a href="#narrow/stream/113489-new-members/topic/Long.20proofs/near/265286080">said</a>:</p>
<blockquote>
<p>I need style advice about writing long proofs. </p>
</blockquote>
<p>The latest <a href="https://leanprover-community.github.io/blog/posts/backstage-with-dillies/">community blog</a> talks about such.</p>



<a name="265286771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265286771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265286771">(Dec 17 2021 at 12:00)</a>:</h4>
<p>If you extract a lemma from a long proof, you should spend some time trying to generalize that lemma; after thinking about the generalization, often you find mathlib already has that more general form</p>



<a name="265288978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265288978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265288978">(Dec 17 2021 at 12:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="366057">Eric Taucher</span> <a href="#narrow/stream/113489-new-members/topic/Long.20proofs/near/265286373">said</a>:</p>
<blockquote>
<p>The latest <a href="https://leanprover-community.github.io/blog/posts/backstage-with-dillies/">community blog</a> talks about such.</p>
</blockquote>
<p>Ahah! I can now preemptively answer questions.</p>



<a name="265289192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265289192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265289192">(Dec 17 2021 at 12:29)</a>:</h4>
<p>Working with long proofs is perfectly fine if you <code>sorry</code> out long subproofs once they are completed, to keep a reasonable compile time. After the fact, you can try to factor out some lemmas if it makes sense, or if the proof takes too long to compile. I've definitely written proofs of more than 200 lines in mathlib.</p>



<a name="265342110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265342110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265342110">(Dec 17 2021 at 18:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Long.20proofs/near/265286241">said</a>:</p>
<blockquote>
<p>Long proofs are rubbish because after you've written 100 lines, you have to wait 5 seconds for the orange bars to go every time you press a key. I tend to factor out as much as possible because of this.</p>
</blockquote>
<p>I like how this technical limitation incentivizes doing things "right." It's very rare that there's some large proof that can't be meaningfully subdivided into useful pieces. Though, I don't like how it makes it harder to write the proof the "wrong" way as a prototype (<code>sorry</code> and comment is a good trick -- maybe that should be an editor command where you can select text and have it toggle between <code>text</code> and <code>sorry/-text-/</code>).</p>
<p>It would be nice if Lean could remember tactic state for each line of a file so that, when you make a change, it continues from the last unchanged line's state. It seems complicated to implement, but not impossible.</p>



<a name="265347001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265347001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265347001">(Dec 17 2021 at 19:26)</a>:</h4>
<p>The easiest way I've found is not to comment lines at all, hopefully if your proof is in <code>{  .. }</code> blocks already you can just do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="gr">sorry</span><span class="bp">;</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">blah</span><span class="o">,</span>
  <span class="n">HUGE</span> <span class="n">PROOF</span> <span class="o">}</span>
</code></pre></div>
<p>and only have to edit one line at a time</p>



<a name="265347141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265347141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265347141">(Dec 17 2021 at 19:27)</a>:</h4>
<p>That's a great trick</p>



<a name="265347641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265347641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265347641">(Dec 17 2021 at 19:30)</a>:</h4>
<p>can you explain what you mean with a fuller example? I don;'t think I get this</p>



<a name="265348044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265348044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265348044">(Dec 17 2021 at 19:32)</a>:</h4>
<p>If you have a <code>{ foo, bar, baz}</code> that is really slow, add <code>sorry;</code> before it to temporarily skip it so you can work on the rest of the proof more quickly</p>



<a name="265348252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265348252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265348252">(Dec 17 2021 at 19:32)</a>:</h4>
<p>oh my god, because the <code>;</code> applies to all created subgoals. that's brilliant</p>



<a name="265348389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/265348389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#265348389">(Dec 17 2021 at 19:33)</a>:</h4>
<p>Right; and <code>sorry</code> creates no subgoals.</p>



<a name="276347165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Long%20proofs/near/276347165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jujian Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Long.20proofs.html#276347165">(Mar 23 2022 at 15:06)</a>:</h4>
<p>(deleted)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>