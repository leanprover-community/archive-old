---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html">Subgroup of a subgroup should be a subgroup</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205571022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571022">(Jul 31 2020 at 09:00)</a>:</h4>
<p>Given a group G, I defined its two-torsion subgroup. I would like to show that this operation is idempotent:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">|</span> <span class="n">z</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">},</span>
  <span class="n">one_mem&#39;</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">mul_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span>
  <span class="k">begin</span>
    <span class="n">dsimp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_mul_mul_comm</span> <span class="n">a</span> <span class="n">b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">ha</span><span class="o">,</span> <span class="n">hb</span><span class="o">],</span>
    <span class="n">refine</span> <span class="n">mul_one</span> <span class="mi">1</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">inv_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span> <span class="k">by</span> <span class="o">{</span><span class="n">tidy</span><span class="o">,</span> <span class="n">rw</span> <span class="n">mul_inv_eq_one</span><span class="o">,</span> <span class="n">refine</span> <span class="n">inv_eq_of_mul_eq_one</span> <span class="n">ha</span><span class="o">}</span>
<span class="o">}</span>

<span class="kn">lemma</span> <span class="n">two_torsion_group_iterate</span> <span class="o">:</span> <span class="n">two_torsion_subgroup</span> <span class="n">G</span> <span class="bp">=</span> <span class="n">two_torsion_subgroup</span> <span class="o">((</span><span class="n">subgroup</span><span class="bp">.</span><span class="n">to_group</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>The lemma doesn't typecheck:</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span><span class="bp">.</span><span class="n">to_group</span>
<span class="n">term</span>
  <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span><span class="bp">.</span><span class="n">to_group</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">group</span> <span class="err">↥</span><span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="n">u_1</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u_1</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>


<p>What am I doing wrong?</p>



<a name="205571049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571049">(Jul 31 2020 at 09:01)</a>:</h4>
<p>read the error</p>



<a name="205571067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571067">(Jul 31 2020 at 09:01)</a>:</h4>
<p><code>(two_torsion_subgroup G).to_group</code> is the "proof" that <code>two_torsion_subgroup G</code> is a group</p>



<a name="205571141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571141">(Jul 31 2020 at 09:02)</a>:</h4>
<p>so it should read <code>two_torsion_subgroup G = two_torsion_subgroup (two_torsion_subgroup G)</code></p>



<a name="205571144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571144">(Jul 31 2020 at 09:02)</a>:</h4>
<p>except that this won't typecheck as well</p>



<a name="205571160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571160">(Jul 31 2020 at 09:02)</a>:</h4>
<p>Yes, what you suggest is the first thing that I tried.</p>



<a name="205571163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571163">(Jul 31 2020 at 09:02)</a>:</h4>
<p>because LHS is a subgroup of <code>G</code> while RHS is a subgroup of <code>two_torsion_subgroup G</code></p>



<a name="205571170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571170">(Jul 31 2020 at 09:03)</a>:</h4>
<p>I want to "coerce" somehow the subgroup to a group...</p>



<a name="205571211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571211">(Jul 31 2020 at 09:04)</a>:</h4>
<p>the lemma should be <code>two_torsion_subgroup (two_torsion_subgroup G) = \top</code></p>



<a name="205571259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571259">(Jul 31 2020 at 09:04)</a>:</h4>
<p>then you can coerce it however you want</p>



<a name="205571273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571273">(Jul 31 2020 at 09:04)</a>:</h4>
<p>I don't think the coercion is defined in mathlib though</p>



<a name="205571279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571279">(Jul 31 2020 at 09:04)</a>:</h4>
<p>the sub-object API's need some work</p>



<a name="205571311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571311">(Jul 31 2020 at 09:05)</a>:</h4>
<p>for now I hope <code>two_torsion_subgroup (two_torsion_subgroup G) = \top</code> is good enough</p>



<a name="205571334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571334">(Jul 31 2020 at 09:05)</a>:</h4>
<p>What is this good for?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">G</span><span class="o">,</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="bp">⟩</span>
</code></pre></div>



<a name="205571360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571360">(Jul 31 2020 at 09:06)</a>:</h4>
<p>this allows you to treat <code>two_torsion_subgroup G</code> as a type</p>



<a name="205571401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571401">(Jul 31 2020 at 09:06)</a>:</h4>
<p>instead of just a subgroup of <code>G</code></p>



<a name="205571486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571486">(Jul 31 2020 at 09:07)</a>:</h4>
<p>So wouldn't that help my original goal? I want to put G and two_torsion_subgroup G both as the same Type, so that I can compare their respective two_torsion_subgroups</p>



<a name="205571575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571575">(Jul 31 2020 at 09:09)</a>:</h4>
<p>(but it doesn't work)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">two_torsion_group_iterate&#39;</span> <span class="o">:</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">))</span> <span class="bp">=</span> <span class="n">two_torsion_subgroup</span> <span class="n">G</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>gives</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">two_torsion_subgroup</span> <span class="n">G</span>
<span class="n">term</span>
  <span class="n">G</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="n">u_1</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u_1</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="o">(</span><span class="n">max</span> <span class="mi">1</span> <span class="o">(</span><span class="n">u_1</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">((</span><span class="n">max</span> <span class="o">(</span><span class="n">max</span> <span class="mi">1</span> <span class="o">(</span><span class="n">u_1</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>



<a name="205571669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571669">(Jul 31 2020 at 09:10)</a>:</h4>
<p>you don't use <code>has_coe_to_sort</code></p>



<a name="205571695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571695">(Jul 31 2020 at 09:10)</a>:</h4>
<p>again, the correct term is <code>two_torsion_subgroup (two_torsion_subgroup G)</code></p>



<a name="205571707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571707">(Jul 31 2020 at 09:10)</a>:</h4>
<p>where the inner <code>two_torsion_subgroup G</code> has been coerced to a type by the instance you posted</p>



<a name="205571745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571745">(Jul 31 2020 at 09:11)</a>:</h4>
<p>before that, <code>two_torsion_subgroup G</code> is just a subgroup of <code>G</code></p>



<a name="205571763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571763">(Jul 31 2020 at 09:11)</a>:</h4>
<p>it is after it has been coerced to a type that you can even say that <code>two_torsion_subgroup G</code> is a group</p>



<a name="205571772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571772">(Jul 31 2020 at 09:11)</a>:</h4>
<p>only types can be groups</p>



<a name="205571824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571824">(Jul 31 2020 at 09:12)</a>:</h4>
<p>and to be clear, when we say <code>X</code> is a group, what we mean is that we have an instance of <code>group X</code></p>



<a name="205571832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571832">(Jul 31 2020 at 09:12)</a>:</h4>
<p>which allows you to write things like <code>1 : X</code></p>



<a name="205571843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571843">(Jul 31 2020 at 09:12)</a>:</h4>
<p>Yes, the I am still confused by how groups/subgroups are implemented...</p>



<a name="205571865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571865">(Jul 31 2020 at 09:12)</a>:</h4>
<p>I'll see if the solution that you proposed is enough for what I wanted!</p>



<a name="205571868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571868">(Jul 31 2020 at 09:12)</a>:</h4>
<p><code>subgroup G</code> is the type of subgroups of <code>G</code></p>



<a name="205571880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571880">(Jul 31 2020 at 09:13)</a>:</h4>
<p>i.e. <code>S : subgroup G</code> means "<code>S</code> is a subgroup of <code>G</code>"</p>



<a name="205571899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571899">(Jul 31 2020 at 09:13)</a>:</h4>
<p>so there's no reason to suppose that <code>S</code> is a type</p>



<a name="205571960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205571960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205571960">(Jul 31 2020 at 09:13)</a>:</h4>
<p>but then that instance coerces <code>S</code> to a type (printed as some thick up arrow followed by <code>S</code>, but to type it you just type <code>S</code>)</p>



<a name="205572016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572016">(Jul 31 2020 at 09:14)</a>:</h4>
<p>so now <code>subgroup S</code> makes sense</p>



<a name="205572039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572039">(Jul 31 2020 at 09:14)</a>:</h4>
<p>and <code>U : subgroup S</code> means "<code>U</code> is a subgroup of the result of the coercion of <code>S</code> into a type"</p>



<a name="205572058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572058">(Jul 31 2020 at 09:14)</a>:</h4>
<p>note that (coerced) <code>S</code> and <code>G</code> are incomparable types</p>



<a name="205572074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572074">(Jul 31 2020 at 09:15)</a>:</h4>
<p>as in, given <code>x : S</code> and <code>g : G</code>, you cannot make the statement <code>x = g</code></p>



<a name="205572087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572087">(Jul 31 2020 at 09:15)</a>:</h4>
<p>in Lean all distinct types are incomparable</p>



<a name="205572163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572163">(Jul 31 2020 at 09:16)</a>:</h4>
<p>And what you are saying is that there's no good way to make S and G of the same type... That's too bad.</p>



<a name="205572176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572176">(Jul 31 2020 at 09:16)</a>:</h4>
<p>so in practice you should treat <code>S</code> as another group isomorphic to the subgroup of <code>G</code> also called <code>S</code></p>



<a name="205572210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572210">(Jul 31 2020 at 09:17)</a>:</h4>
<p>here's how the type coercion works</p>



<a name="205572225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572225">(Jul 31 2020 at 09:17)</a>:</h4>
<p>given <code>x : S</code>, you can coerce it to <code>x : G</code> (printed with a little up-arrow, but to type it you just type <code>x : G</code>)</p>



<a name="205572230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572230">(Jul 31 2020 at 09:17)</a>:</h4>
<p>the little up-arrow is a "hidden function"</p>



<a name="205572240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572240">(Jul 31 2020 at 09:17)</a>:</h4>
<p>because, again, types in Lean are incomparable</p>



<a name="205572293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572293">(Jul 31 2020 at 09:18)</a>:</h4>
<p>given <code>x : G</code> and <code>hx : x \in S</code> (i.e. <code>hx</code> is a proof that <code>x</code> is an element of <code>S</code>), you can form <code>\&lt;x, hx\&gt; : S</code></p>



<a name="205572352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572352">(Jul 31 2020 at 09:19)</a>:</h4>
<p>Oh so in one way it's automatic, in the other I need this bracket notation... that's useful.</p>



<a name="205572367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572367">(Jul 31 2020 at 09:19)</a>:</h4>
<p>so they are distinct types with (partial) functions going both ways</p>



<a name="205572423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572423">(Jul 31 2020 at 09:20)</a>:</h4>
<p>(and BTW, I have no clue how to make progress in that lemma, although it's mathematically trivial)</p>



<a name="205572433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572433">(Jul 31 2020 at 09:20)</a>:</h4>
<p>similarly, <code>subgroup S</code> and <code>subgroup G</code> are incomparable types</p>



<a name="205572440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572440">(Jul 31 2020 at 09:20)</a>:</h4>
<p>you cannot ever state that their terms are equal</p>



<a name="205572446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572446">(Jul 31 2020 at 09:20)</a>:</h4>
<p>but again, you can define (partial) functions going both ways</p>



<a name="205572460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572460">(Jul 31 2020 at 09:20)</a>:</h4>
<p>it's just that this hasn't been done in mathlib</p>



<a name="205572470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572470">(Jul 31 2020 at 09:21)</a>:</h4>
<p>for no other reason than itself</p>



<a name="205572500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572500">(Jul 31 2020 at 09:21)</a>:</h4>
<p>and anyway, even if you have that function, you would still need my lemma to prove the "mathematically correct" version</p>



<a name="205572515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205572515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205572515">(Jul 31 2020 at 09:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="254058">Marc Masdeu</span> <a href="#narrow/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup/near/205572423">said</a>:</p>
<blockquote>
<p>(and BTW, I have no clue how to make progress in that lemma, although it's mathematically trivial)</p>
</blockquote>
<p>you can start with (some variant of) <code>eq_top</code> (use the Ctrl+space trick!)</p>



<a name="205573020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573020">(Jul 31 2020 at 09:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span>

<span class="n">def</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">|</span> <span class="n">z</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">},</span>
  <span class="n">one_mem&#39;</span> <span class="o">:=</span> <span class="n">mul_one</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">mul_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span>
    <span class="k">calc</span>  <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
        <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_mul_mul_comm</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ha</span><span class="o">,</span> <span class="n">hb</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">mul_one</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span>
    <span class="k">calc</span>  <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span>
        <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul_inv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ha</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">one_inv</span>
<span class="o">}</span>

<span class="kn">theorem</span> <span class="n">two_torsion_subgroup_idem</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span><span class="o">,</span> <span class="k">from</span> <span class="n">eq_top_iff</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span>
<span class="k">show</span> <span class="err">⊤</span> <span class="bp">≤</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">),</span> <span class="k">from</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
<span class="k">show</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span>
<span class="k">show</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span>
</code></pre></div>



<a name="205573085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573085">(Jul 31 2020 at 09:28)</a>:</h4>
<p>right, so the two functions I told you about going between <code>G</code> and <code>S</code> are not enough for you to prove this lemma</p>



<a name="205573101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573101">(Jul 31 2020 at 09:28)</a>:</h4>
<p>there's also the theorem that the function from <code>S</code> to <code>G</code> is surjective</p>



<a name="205573114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573114">(Jul 31 2020 at 09:28)</a>:</h4>
<p>i.e. if <code>x y : S</code> such that <code>(x : G) = y</code> then <code>x = y</code></p>



<a name="205573121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573121">(Jul 31 2020 at 09:28)</a>:</h4>
<p>this theorem is called <code>subtype.eq</code></p>



<a name="205573289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573289">(Jul 31 2020 at 09:30)</a>:</h4>
<p>Wow thanks! This is so helpful!</p>



<a name="205573324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573324">(Jul 31 2020 at 09:31)</a>:</h4>
<p>note that Lean elaborates from outside to inside, so <code>(x * x : G)</code> actually means <code>(\u x * \u x : G)</code> (<code>\u</code> being the coercion from <code>S</code> to <code>G</code>)</p>



<a name="205573346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573346">(Jul 31 2020 at 09:31)</a>:</h4>
<p>Lean first sees the <code>*</code> and figures out that both operands must be terms of <code>G</code></p>



<a name="205573407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573407">(Jul 31 2020 at 09:32)</a>:</h4>
<p>but actually typing out the arrow sometimes causes errors</p>



<a name="205573411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573411">(Jul 31 2020 at 09:32)</a>:</h4>
<p>so don't type out the arrow</p>



<a name="205573432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205573432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205573432">(Jul 31 2020 at 09:32)</a>:</h4>
<p>well, not typing it sometimes causes errors, in different situations (such as the coercion from <code>finset</code> to <code>set</code>)</p>



<a name="205574300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574300">(Jul 31 2020 at 09:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span>

<span class="n">def</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">|</span> <span class="n">z</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">},</span>
  <span class="n">one_mem&#39;</span> <span class="o">:=</span> <span class="n">mul_one</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">mul_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span>
    <span class="k">calc</span>  <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
        <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_mul_mul_comm</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ha</span><span class="o">,</span> <span class="n">hb</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">mul_one</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">),</span>
    <span class="k">calc</span>  <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span>
        <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul_inv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ha</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">one_inv</span>
<span class="o">}</span>

<span class="kn">theorem</span> <span class="n">two_torsion_subgroup_idem</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span><span class="o">,</span> <span class="k">from</span> <span class="n">eq_top_iff</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span>
<span class="k">show</span> <span class="err">⊤</span> <span class="bp">≤</span> <span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">),</span> <span class="k">from</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
<span class="k">show</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span>
<span class="k">show</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span>

<span class="kn">section</span> <span class="n">missing_from_mathlib</span>

<span class="kn">instance</span> <span class="n">subgroup</span><span class="bp">.</span><span class="n">subgroup</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">subgroup</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">subgroup</span><span class="bp">.</span><span class="n">map</span> <span class="n">S</span><span class="bp">.</span><span class="n">subtype</span><span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">subgroup</span><span class="bp">.</span><span class="n">coe_top&#39;</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="err">⊤</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">le_antisymm</span> <span class="o">(</span><span class="n">subgroup</span><span class="bp">.</span><span class="n">map_le_iff_le_comap</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span> <span class="bp">_</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span><span class="o">)</span>

<span class="kn">end</span> <span class="n">missing_from_mathlib</span>

<span class="kn">theorem</span> <span class="n">two_torsion_subgroup_idem&#39;</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">two_torsion_subgroup</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="n">two_torsion_subgroup</span> <span class="n">G</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">two_torsion_subgroup_idem</span><span class="o">,</span> <span class="n">subgroup</span><span class="bp">.</span><span class="n">coe_top&#39;</span><span class="o">]</span>
</code></pre></div>



<a name="205574312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574312">(Jul 31 2020 at 09:44)</a>:</h4>
<p><span class="user-mention" data-user-id="254058">@Marc Masdeu</span> here's the "mathematically correct" statement and why it uses my lemma anyways</p>



<a name="205574544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574544">(Jul 31 2020 at 09:47)</a>:</h4>
<p>good job kenny</p>



<a name="205574588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574588">(Jul 31 2020 at 09:48)</a>:</h4>
<p>thanks</p>



<a name="205574636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574636">(Jul 31 2020 at 09:48)</a>:</h4>
<p>I don't have time to build the subobject API yet though</p>



<a name="205574669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205574669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205574669">(Jul 31 2020 at 09:49)</a>:</h4>
<p>You guys are great</p>



<a name="205581268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205581268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205581268">(Jul 31 2020 at 11:34)</a>:</h4>
<p>This will be the last one for today, I promise:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">prod_identity_general</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">G</span><span class="o">)):</span>
 <span class="o">((</span><span class="err">∏</span> <span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span><span class="bp">=</span> <span class="n">g</span><span class="bp">^</span><span class="o">(</span><span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
 <span class="k">begin</span>
    <span class="n">rw</span> <span class="n">prod_all_eq_prod_two_torsion</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">htors</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">),</span>  <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
        <span class="n">rw</span> <span class="err">←</span><span class="n">mem_two_torsion_iff_square_eq_one</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">two_torsion_subgroup_idem</span><span class="o">,</span>
        <span class="n">solve_by_elim</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">finish</span><span class="o">,</span>
    <span class="n">norm_cast</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">prod_identity</span> <span class="n">htors</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>I end up with the following state:</p>
<div class="codehilite"><pre><span></span><code><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_group</span> <span class="n">G</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">G</span>
<span class="n">htors</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">↥</span><span class="n">G2</span><span class="o">),</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">)),</span> <span class="err">↑</span><span class="n">g</span> <span class="bp">=</span> <span class="err">↑∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">↥</span><span class="n">two_torsion_subgroup</span> <span class="n">G</span><span class="o">),</span> <span class="n">x</span>
</code></pre></div>


<p>I want to apply finset.prod_hom with something like lam x : two_torsion_subgroup G, x : G,<br>
but it doesn't let me. This is probably some form of a similar problem that I have faced before, but I continuously get stuck with these sorts...</p>



<a name="205591111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205591111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205591111">(Jul 31 2020 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I rewrote a M(N)WE hoping that it's a one-liner what I'm missing...</p>



<a name="205593261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205593261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205593261">(Jul 31 2020 at 14:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">big_operators</span>

<span class="kn">section</span> <span class="n">missing_from_mathlib</span>

<span class="kn">instance</span> <span class="n">subgroup</span><span class="bp">.</span><span class="n">coe_is_monoid_hom</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">refine</span> <span class="o">{</span><span class="bp">..</span><span class="o">}</span><span class="bp">;</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">refl</span>

<span class="kn">end</span> <span class="n">missing_from_mathlib</span>

<span class="kn">lemma</span> <span class="n">prod_coerce</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">}</span> <span class="o">:</span> <span class="err">∏</span> <span class="n">x</span> <span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span><span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="err">∏</span> <span class="n">x</span> <span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">finset</span><span class="bp">.</span><span class="n">prod_hom</span> <span class="bp">_</span> <span class="bp">_</span>
</code></pre></div>



<a name="205593749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205593749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205593749">(Jul 31 2020 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="254058">@Marc Masdeu</span> coe and coe_sort etc are not meant to be used explicitly</p>



<a name="205593775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205593775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205593775">(Jul 31 2020 at 14:07)</a>:</h4>
<p>we use at most an uparrow</p>



<a name="205593890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205593890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205593890">(Jul 31 2020 at 14:07)</a>:</h4>
<p>Thanks! I really didn't need the lemma, my code works now after the <code>instance</code> line.</p>



<a name="205594175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205594175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205594175">(Jul 31 2020 at 14:09)</a>:</h4>
<p>How would I figure this up on my own? I mean, I wanted to <code>apply finset.prod_hom</code> and saw the error, and I was trying (unsuccessfully) to create a monoid_hom... I guess I still don't understand <code>instance</code>...</p>



<a name="205596693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596693">(Jul 31 2020 at 14:29)</a>:</h4>
<p>the error says failed to synthesize instance</p>



<a name="205596719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596719">(Jul 31 2020 at 14:29)</a>:</h4>
<p>the typeclass system is like Lean's notebook</p>



<a name="205596772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596772">(Jul 31 2020 at 14:30)</a>:</h4>
<p>whenever you tell Lean about one instance, Lean marks it down in her notebook</p>



<a name="205596794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596794">(Jul 31 2020 at 14:30)</a>:</h4>
<p>this is called the type-class system</p>



<a name="205596821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596821">(Jul 31 2020 at 14:30)</a>:</h4>
<p>so whenever you require an instance, you ask Lean what she has learnt, and she will find the knowledge from her notebook</p>



<a name="205596832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596832">(Jul 31 2020 at 14:30)</a>:</h4>
<p>Instance means "example of"?</p>



<a name="205596842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596842">(Jul 31 2020 at 14:30)</a>:</h4>
<p>no</p>



<a name="205596856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596856">(Jul 31 2020 at 14:30)</a>:</h4>
<p>instance just means something to mark down in her notebook</p>



<a name="205596865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596865">(Jul 31 2020 at 14:30)</a>:</h4>
<p>It means definition in the notebook</p>



<a name="205596899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596899">(Jul 31 2020 at 14:31)</a>:</h4>
<p>e.g. the group structure on a type</p>



<a name="205596911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596911">(Jul 31 2020 at 14:31)</a>:</h4>
<p>the fact that a specific function is a homomorphism</p>



<a name="205596912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205596912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205596912">(Jul 31 2020 at 14:31)</a>:</h4>
<p>etc</p>



<a name="205597011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597011">(Jul 31 2020 at 14:32)</a>:</h4>
<p>I see. So properties of objects that I may want Lean to use in the future...?</p>



<a name="205597038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597038">(Jul 31 2020 at 14:32)</a>:</h4>
<p>if you do <code>#check @finset.prod_hom</code> you will see:</p>
<div class="codehilite"><pre><span></span><code><span class="n">finset</span><span class="bp">.</span><span class="n">prod_hom</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_3</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">comm_monoid</span> <span class="n">γ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="n">g</span><span class="o">],</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="205597075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597075">(Jul 31 2020 at 14:32)</a>:</h4>
<p>the arguments in square brackets are what you ask Lean from her notebook</p>



<a name="205597124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597124">(Jul 31 2020 at 14:33)</a>:</h4>
<p><code>[comm_monoid \b]</code> means "ask Lean to provide a commutative monoid structure on beta"</p>



<a name="205597134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597134">(Jul 31 2020 at 14:33)</a>:</h4>
<p>Instances vs square-brackets is as far as my knowledge goes on this...</p>



<a name="205597170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597170">(Jul 31 2020 at 14:33)</a>:</h4>
<p>when you use it you don't need to provide the argument explicitly</p>



<a name="205597181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597181">(Jul 31 2020 at 14:33)</a>:</h4>
<p>Lean will search her notebook for you</p>



<a name="205597238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597238">(Jul 31 2020 at 14:33)</a>:</h4>
<p>the arguments in curly brackets are also implicit, but they work using a different system</p>



<a name="205597322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597322">(Jul 31 2020 at 14:34)</a>:</h4>
<p>so e.g. Lean knows that Z is a comm_monoid</p>



<a name="205597347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597347">(Jul 31 2020 at 14:34)</a>:</h4>
<p>so this theorem <code>finset.prod_hom</code> can be applied for beta being Z</p>



<a name="205597391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597391">(Jul 31 2020 at 14:34)</a>:</h4>
<p>So it's an automated set of hypotheses, sort of. I could write a lemma that said something like:</p>
<div class="codehilite"><pre><span></span><code>  <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_3</span><span class="o">}</span> <span class="o">(</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_monoid</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">comm_monoid</span> <span class="n">γ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">(</span><span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="n">g</span><span class="o">),</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>


<p>but then it would be more annoying to use. Is that right?</p>



<a name="205597439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597439">(Jul 31 2020 at 14:35)</a>:</h4>
<p>exactly</p>



<a name="205597483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597483">(Jul 31 2020 at 14:35)</a>:</h4>
<p>then you would have to explicitly provide the "proof" that beta is a comm monoid</p>



<a name="205597499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597499">(Jul 31 2020 at 14:35)</a>:</h4>
<p>Oh nice! Lean didn't tell me which of the three instances couldn't make sense of. Is there a way to ask for that?</p>



<a name="205597505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597505">(Jul 31 2020 at 14:35)</a>:</h4>
<p>which will be something like <code>int.comm_monoid</code></p>



<a name="205597571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597571">(Jul 31 2020 at 14:36)</a>:</h4>
<div class="codehilite"><pre><span></span><code>failed to synthesize type class instance for
G : Type u_1,
_inst_1 : comm_group G,
_inst_2 : fintype G,
H : subgroup G
⊢ is_monoid_hom coe
</code></pre></div>



<a name="205597575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597575">(Jul 31 2020 at 14:36)</a>:</h4>
<p>read the error</p>



<a name="205597652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597652">(Jul 31 2020 at 14:37)</a>:</h4>
<p>Oh! Sorry, I see. It'd be nice that there was a modification of apply (like convert) that introduced this as a new goal...</p>



<a name="205597689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597689">(Jul 31 2020 at 14:37)</a>:</h4>
<p>why not prove it separately?</p>



<a name="205597735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597735">(Jul 31 2020 at 14:37)</a>:</h4>
<p>keep proofs short but many</p>



<a name="205597904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205597904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205597904">(Jul 31 2020 at 14:38)</a>:</h4>
<p>When in tactic mode, it's nice when you can keep applying results that you know will allow you to make progress (in this case, <code>prod.hom</code>), and get asked for the hypotheses later.</p>



<a name="205598089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205598089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205598089">(Jul 31 2020 at 14:40)</a>:</h4>
<p>I guess it makes some sense</p>



<a name="205598608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205598608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205598608">(Jul 31 2020 at 14:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">big_operators</span>

<span class="kn">lemma</span> <span class="n">prod_coerce</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="n">G</span><span class="o">}</span> <span class="o">:</span> <span class="err">∏</span> <span class="n">x</span> <span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span><span class="n">G</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="err">∏</span> <span class="n">x</span> <span class="o">:</span> <span class="n">H</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">convert</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_hom</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="kn">end</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">tactic failed, there are unsolved goals</span>
<span class="cm">state:</span>
<span class="cm">G : Type u_1,</span>
<span class="cm">_inst_1 : comm_group G,</span>
<span class="cm">_inst_2 : fintype G,</span>
<span class="cm">H : subgroup G</span>
<span class="cm">⊢ is_monoid_hom coe</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="205598621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205598621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205598621">(Jul 31 2020 at 14:44)</a>:</h4>
<p>this is the best I can do <span class="user-mention" data-user-id="254058">@Marc Masdeu</span></p>



<a name="205601568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205601568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205601568">(Jul 31 2020 at 15:06)</a>:</h4>
<p>you can get the instances as goals by using <code>@</code></p>



<a name="205601639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205601639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205601639">(Jul 31 2020 at 15:06)</a>:</h4>
<p>if you look at the type of <code>@prod_hom</code>, you'll see that it has explicit arguments for the typeclass instances</p>



<a name="205601728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205601728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205601728">(Jul 31 2020 at 15:07)</a>:</h4>
<p>so if you <code>apply @prod_hom</code> with appropriate underscores, the instances will appear as goals</p>



<a name="205609583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205609583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205609583">(Jul 31 2020 at 16:10)</a>:</h4>
<p>Thanks guys! All these tricks should be documented somewhere. Like the Tactic cheatsheet, they'd very useful for noobs...</p>



<a name="205609795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205609795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205609795">(Jul 31 2020 at 16:12)</a>:</h4>
<p>better documentation and tutorialization is definitely a goal</p>



<a name="205609890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205609890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205609890">(Jul 31 2020 at 16:13)</a>:</h4>
<p>from my rereading, most of this conversation was just explaining what typeclasses are</p>



<a name="205609907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205609907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205609907">(Jul 31 2020 at 16:13)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a> chapter 10 is all about type classes</p>



<a name="205610065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Subgroup%20of%20a%20subgroup%20should%20be%20a%20subgroup/near/205610065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Subgroup.20of.20a.20subgroup.20should.20be.20a.20subgroup.html#205610065">(Jul 31 2020 at 16:15)</a>:</h4>
<p>type classes probably get a more gentle introduction in <a href="https://leanprover-community.github.io/mathematics_in_lean/">#mil</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>