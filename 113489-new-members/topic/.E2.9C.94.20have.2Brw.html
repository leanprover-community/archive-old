---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html">✔ have+rw</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="250850969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250850969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250850969">(Aug 26 2021 at 22:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="431177">Giacomo Maletto</span> has marked this topic as resolved.</p>



<a name="250862911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250862911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250862911">(Aug 27 2021 at 00:53)</a>:</h4>
<p>One day we'll have a point-and-click interface to <code>conv</code> in the widgets view, perhaps. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="250865642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250865642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250865642">(Aug 27 2021 at 01:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> That would be cool. Maybe a way to select an expression could be like in Mathematica, where each time you click, it extends the selection to the next larger complete expression containing it. For example, triple clicking on a parenthesis selects the whole grouping.</p>



<a name="250866508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250866508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250866508">(Aug 27 2021 at 01:49)</a>:</h4>
<p>In the widgets view it's already pretty easy to select an arbitrary subexpression (just hover on parentheses). All we'd need to add is a <code>conv</code> button on the pop-up, which should then insert into the current tactic block an appropriate conv invocation to zoom to that subexpression.</p>



<a name="250866522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250866522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250866522">(Aug 27 2021 at 01:49)</a>:</h4>
<p>Some thought required about how to generate such an invocation: do you repeatedly use <code>congr</code> and <code>skip</code>? Or do you generate a pattern?</p>



<a name="250884217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250884217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250884217">(Aug 27 2021 at 05:09)</a>:</h4>
<p>We could have a first mockup that uses <code>congr</code> and <code>skip</code>. That shouldn't be too hard, I guess.</p>



<a name="250890892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250890892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Giacomo Maletto <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250890892">(Aug 27 2021 at 06:53)</a>:</h4>
<p>Sometimes I wonder if there could be a version of Lean where all you do is manipulate interactively the goal and hypotheses through a GUI.<br>
Right now it feels kinda like using a car but instead of driving it yourself, there is another person driving and you just yell him tactics hoping he does what you want.</p>



<a name="250895599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250895599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250895599">(Aug 27 2021 at 07:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw/near/250866508">said</a>:</p>
<blockquote>
<p>In the widgets view it's already pretty easy to select an arbitrary subexpression</p>
</blockquote>
<p>I should use VS Code more often, selection seems to work perfectly well enough already!</p>
<p>For <code>congr</code>/<code>skip</code> vs patterns, what are the design constraints? Is the generated tactic code supposed to look pretty? Is it supposed to be somewhat robust to changes in the proof? It seems hard to design for the latter, especially without experience using such a tool, so generating some kind of coordinates into an expression seems like a solid first strategy to me.</p>



<a name="250895694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250895694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250895694">(Aug 27 2021 at 07:47)</a>:</h4>
<p>If the generated code can look somewhat pretty, that would be a big pre.</p>



<a name="250906216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250906216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250906216">(Aug 27 2021 at 09:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw/near/250862911">said</a>:</p>
<blockquote>
<p>One day we'll have a point-and-click interface to <code>conv</code> in the widgets view, perhaps. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
</blockquote>
<p>You can remove that perhaps. This has been one of Ed's explicit goals from the very beginning, and it's indeed very much needed. The only question is when this will happen and who will do it. Note that widgets are coming to Lean 4 too.</p>



<a name="250988281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250988281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250988281">(Aug 27 2021 at 20:07)</a>:</h4>
<p>My experience with <code>conv</code> is that the lack of a GUI to select the expression is quite low on the list of things that make it frustrating to use.</p>



<a name="250988457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250988457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250988457">(Aug 27 2021 at 20:09)</a>:</h4>
<p>Missing tactics (those which work in regular tactic mode but not conv mode) and being unable to close side-goals created by <code>rw</code> are much more common problems for me.</p>



<a name="250989291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250989291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250989291">(Aug 27 2021 at 20:15)</a>:</h4>
<p>Would the following tactic idea work or help? Consider <code>look_at n1 n2 n3 ...</code> where <code>n1</code> and so on are natural numbers.  What these do is provide coordinates into an expression to select a subexpression.  The result of the tactic is a new goal <code>subexpr = ?m</code> with a metavariable <code>?m</code>, and the old goal has that subexpression replaced with <code>?m</code>.  When you're done modifying the left-hand side of the new goal, you can <code>refl</code>.</p>



<a name="250989527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250989527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250989527">(Aug 27 2021 at 20:17)</a>:</h4>
<p>(I'm not sure how <code>conv</code> works internally, but I imagined it's sort of like this. This just exposes it in a way that might let you stay in the usual tactic mode.)</p>



<a name="250990744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250990744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250990744">(Aug 27 2021 at 20:27)</a>:</h4>
<p>If this were workable, then there can be other ways to select subexpressions, too, like patterns.  It might also be nice if it could be told to select all defeq instances of an expression for simultaneous rewriting -- maybe it could help with certain tricky dependent rewrites?</p>



<a name="250991473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250991473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250991473">(Aug 27 2021 at 20:33)</a>:</h4>
<p>Maybe also <code>look_at n1 n2 ... with a b c ....</code> could be a way to rewrite under binders, where <code>a</code>, <code>b</code>, and so on are the names it gives each hypothesis as it auto-<code>intro</code>s its way to the target expression.</p>



<a name="250993871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/250993871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#250993871">(Aug 27 2021 at 20:52)</a>:</h4>
<p>A problem with this is that <code>rw</code> is very eager to close a <code>subexpr = ?m</code> goal.  One hack is to tag the right-hand side with something that inhibits this.  Using pre-existing tactics:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">RHS</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span>

<span class="kd">lemma</span> <span class="n">unwrap_RHS</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">RHS</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">swap</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">eq.trans</span> <span class="n">_</span> <span class="n">unwrap_RHS</span><span class="o">,</span>
    <span class="c1">-- goal is c + b = RHS ?m_1</span>
    <span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="251119325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/251119325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#251119325">(Aug 29 2021 at 09:16)</a>:</h4>
<p>Is there any way to make lean wait to recalculate the infoview until you have entered a comma?</p>



<a name="251119345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/251119345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#251119345">(Aug 29 2021 at 09:17)</a>:</h4>
<p>or something to this effect, often when I write things I want to look at the infoview but it is very eager to give an error message and delete what is there</p>



<a name="251120813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20have%2Brw/near/251120813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20have.2Brw.html#251120813">(Aug 29 2021 at 09:45)</a>:</h4>
<p>There is a "pause updating" button in the top-right of the infoview. I don't know of a more convenient way.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>