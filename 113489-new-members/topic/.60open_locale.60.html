---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.60open_locale.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html">`open_locale`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="232885062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885062">(Apr 02 2021 at 10:40)</a>:</h4>
<p>there was a <a href="#narrow/stream/113488-general/topic/Open_locale">thread about this a while back</a> but it mainly shows how to see what locales are available. I wonder what each one does; for example, wth is <code>open_locale rat</code>?</p>
<p>The ones I understand so far:</p>
<ul>
<li><code>classical</code>: makes everything decidable</li>
<li><code>big_operators</code>: allows Œ£, Œ†, ‚ãÉ and the like (not sure if there's anything else)</li>
</ul>
<p>Is there any more important ones?</p>



<a name="232885595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885595">(Apr 02 2021 at 10:47)</a>:</h4>
<p>You can use the function mentioned there to find out:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.rat</span>

<span class="kd">run_cmd</span> <span class="n">print_localized_commands</span> <span class="o">[</span><span class="bp">`</span><span class="n">rat</span><span class="o">]</span>
<span class="c1">-- local infix ` /. `:70 := rat.mk</span>
</code></pre></div>



<a name="232885616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885616">(Apr 02 2021 at 10:47)</a>:</h4>
<p>There are lots of locales, you can find them by grepping for <code>localized</code></p>



<a name="232885704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885704">(Apr 02 2021 at 10:48)</a>:</h4>
<p>One I've been using recently is <code>open_locale filter</code> which gives access to either the curly P or curly N notation if you're doing filters (maybe curly P? And curly N is some open_locale topology thing?). One problem I had recently was that I had some morphism called <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>œï</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">œï</span></span></span></span> and then wanted to use factorial as <code>!</code> so I did <code>open_locale nat</code> and then my code broke because <code>\phi</code> was Euler's totient function :-/ I don't really see why !, curly P and curly N are hidden in locales (I might be wrong about the P and N, I don't really know an easy way of checking)</p>



<a name="232885843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885843">(Apr 02 2021 at 10:50)</a>:</h4>
<p>Got it: <code>localized "notation </code>ùìù<code> := nhds" in topological_space</code>. I don't really understand the logic of hiding this. Is the idea that maybe some other people might want to use this notation elsewhere to mean something else? Maybe one has to just take a cautious approach with notation or else you'll get people who can't write what they want to write.</p>



<a name="232885887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232885887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232885887">(Apr 02 2021 at 10:51)</a>:</h4>
<p>Here's a way to get a list of all locales (that have been imported):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.basic</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">get_locales</span> <span class="o">:</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">list</span> <span class="n">name</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">do</span> <span class="n">m</span> <span class="bp">‚Üê</span> <span class="n">localized_attr.get_cache</span><span class="o">,</span>
   <span class="n">m.mfold</span> <span class="o">[]</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="n">_</span> <span class="n">ls</span><span class="o">,</span> <span class="n">pure</span> <span class="o">(</span><span class="n">n</span> <span class="o">::</span> <span class="n">ls</span><span class="o">))</span>

<span class="kd">run_cmd</span> <span class="n">get_locales</span> <span class="bp">&gt;&gt;=</span> <span class="n">tactic.trace</span>
<span class="c1">-- [interval, rat, topological_space, nat, fin_fact, big_operators, filter, parser, classical]</span>
</code></pre></div>



<a name="232886006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232886006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232886006">(Apr 02 2021 at 10:53)</a>:</h4>
<blockquote>
<p>Is the idea that maybe some other people might want to use this notation elsewhere to mean something else?</p>
</blockquote>
<p>Yes, we want to avoid global notation clashes, so anything that is too generic to be safe for the global context is put in a locale</p>



<a name="232886079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/232886079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#232886079">(Apr 02 2021 at 10:54)</a>:</h4>
<p>Using locales liberally means you don't have to worry about clashes so much</p>



<a name="240818176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/240818176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#240818176">(May 31 2021 at 10:46)</a>:</h4>
<p>What does <code>open_locale</code> stand for and what is the function of that?</p>



<a name="240818263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/240818263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#240818263">(May 31 2021 at 10:47)</a>:</h4>
<p>it runs specific commands you can find by looking for <code>localized</code>; so for example, <code>open_locale nat</code> will execute the command in strings:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">localized</span> <span class="s2">"notation n `!`:10000 := nat.factorial n"</span> <span class="k">in</span> <span class="n">nat</span>
</code></pre></div>
<p>however, these aren't well-documented; there was talk about making <code>doc-gen</code> pick them up, but no progress on this so far</p>



<a name="240818340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/240818340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#240818340">(May 31 2021 at 10:48)</a>:</h4>
<p>(they don't have to be notation commands, by the way; for example, <code>open_locale classical</code> makes all propositions decidable by locally making some <code>defs</code> attributes)</p>



<a name="240818952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/240818952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#240818952">(May 31 2021 at 10:56)</a>:</h4>
<p>Right, I didn't find any good documentation about <code>open_locale</code>.</p>



<a name="240824859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%60open_locale%60/near/240824859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.60open_locale.60.html#240824859">(May 31 2021 at 12:03)</a>:</h4>
<p>The documentation is here: <a href="https://leanprover-community.github.io/mathlib_docs/commands.html#localized%20notation">https://leanprover-community.github.io/mathlib_docs/commands.html#localized%20notation</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>