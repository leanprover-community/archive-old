---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/reals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html">reals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202692504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202692504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202692504">(Jul 02 2020 at 14:04)</a>:</h4>
<p>I am trying to understand the outputs of:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="n">reduce</span> <span class="mi">8</span><span class="bp">.</span><span class="mi">1</span>    <span class="bp">=&gt;</span> <span class="mi">8</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="mi">8</span><span class="bp">.</span><span class="mi">1</span>         <span class="bp">=&gt;</span> <span class="mi">8</span>
<span class="bp">#</span><span class="kn">check</span> <span class="mi">8</span><span class="bp">.</span><span class="mi">1</span>     <span class="bp">=&gt;</span> <span class="mi">81</span> <span class="bp">/</span> <span class="mi">10</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="o">(</span><span class="mi">81</span> <span class="bp">/</span> <span class="mi">10</span><span class="o">)</span> <span class="bp">*</span> <span class="mi">100</span> <span class="bp">=&gt;</span>  <span class="mi">800</span>
</code></pre></div>


<p>Using Lean 'official' 3.4.2. I am trying to avoid having to reinstall everything. That is, removing the brew installation of Lean to install elan, mathlibtools and mathlib.</p>



<a name="202692746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202692746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202692746">(Jul 02 2020 at 14:06)</a>:</h4>
<p>Literals default to <code>nat</code> if there is no other type information available. Even fractional literals like <code>8.1</code>. Yes, this is a bit silly.</p>



<a name="202692977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202692977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202692977">(Jul 02 2020 at 14:08)</a>:</h4>
<p>Let me give you more context. I am trying to see how far I can go in the translations of Haskell book examples to Lean. Reals appear in the cipher encoding example: <a href="https://gist.github.com/arademaker/73f5fb92601c0c129c95bea7fdbc7bf4">https://gist.github.com/arademaker/73f5fb92601c0c129c95bea7fdbc7bf4</a></p>



<a name="202693392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693392">(Jul 02 2020 at 14:11)</a>:</h4>
<p>In Haskell the translation of a fractional literal <code>8.1</code> is something like <code>fromRational (81 % 10)</code> where <code>%</code> is the division operator for <code>Rational</code>.</p>



<a name="202693446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693446">(Jul 02 2020 at 14:11)</a>:</h4>
<p>If you just write a type annotation like <code>#eval (8.1 : rat)</code> then you'll get the expected result.</p>



<a name="202693733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693733">(Jul 02 2020 at 14:13)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110032">@Reid Barton</span> , thank you. So I guess I will not be able to do it without the mathlib, right? It seems that <code>rat</code> type is not defined in the standard library of Lean.</p>



<a name="202693808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693808">(Jul 02 2020 at 14:14)</a>:</h4>
<p>oh, I have no idea</p>



<a name="202693817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693817">(Jul 02 2020 at 14:14)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/rat">docs#rat</a></p>



<a name="202693839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202693839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202693839">(Jul 02 2020 at 14:14)</a>:</h4>
<p>I guess you're right.</p>



<a name="202694229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202694229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202694229">(Jul 02 2020 at 14:17)</a>:</h4>
<p>You can do it over an arbitrary field if you don't want to use mathlib</p>



<a name="202694264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202694264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202694264">(Jul 02 2020 at 14:17)</a>:</h4>
<p>although you will have to use 3.4.2 for that since fields have since been ripped out of core</p>



<a name="202694600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202694600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202694600">(Jul 02 2020 at 14:20)</a>:</h4>
<p>Here's a really silly rat-like type that works on 3.4.2:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">fraction</span> <span class="o">:=</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">fraction</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">fraction</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">fraction</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_div</span> <span class="n">fraction</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span><span class="bp">⟩</span>

<span class="bp">#</span><span class="n">reduce</span> <span class="o">(</span><span class="mi">8</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:</span> <span class="n">fraction</span><span class="o">)</span> <span class="c1">-- (81, 10)</span>
</code></pre></div>



<a name="202698447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698447">(Jul 02 2020 at 14:48)</a>:</h4>
<p>Thank you so much <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, but I didn't understand your remark about 3.4.2. You said that I could do it over a field but then you said 3.4.2 doesn't have field. Indeed, I didn't find in the Lean 3.4.2 core library the definition of field. Above it looks like you make a pair of natural numbers instances of four classes (I guess has_div can be seen as the inverse of has_mul) and this makes pair of nat numbers a field. Am I right?</p>



<a name="202698697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698697">(Jul 02 2020 at 14:50)</a>:</h4>
<p>3.4.2 does have fields. <a href="https://github.com/leanprover/lean/blob/master/library/init/algebra/field.lean">https://github.com/leanprover/lean/blob/master/library/init/algebra/field.lean</a><br>
They were removed from the core library in a more recent version.</p>



<a name="202698874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698874">(Jul 02 2020 at 14:51)</a>:</h4>
<p>These definitions don't make <code>ℕ × ℕ</code> a field because, for one thing there is no instance of <code>field</code> given, and for another because they do not satisfy the field axioms.</p>



<a name="202698887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698887">(Jul 02 2020 at 14:51)</a>:</h4>
<p>A more recent version of the Lean fork, right? The community version.</p>



<a name="202698939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698939">(Jul 02 2020 at 14:52)</a>:</h4>
<p>If you want a field, the easiest way would be to install mathilb.</p>



<a name="202698941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202698941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202698941">(Jul 02 2020 at 14:52)</a>:</h4>
<p>Right.</p>



<a name="202699041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202699041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202699041">(Jul 02 2020 at 14:52)</a>:</h4>
<p>You can even use the <code>lean-3.4.2</code> branch of mathlib if you really want to keep using Lean 3.4.2--it'll still be much better than not using mathlib at all.</p>



<a name="202699213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202699213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202699213">(Jul 02 2020 at 14:54)</a>:</h4>
<p>The given instances are only enough to be able to interpret <code>m / n</code> into the pair <code>(m, n)</code> (with which you can do what you like)</p>



<a name="202699573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/reals/near/202699573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/reals.html#202699573">(Jul 02 2020 at 14:57)</a>:</h4>
<p>Thank you all, now it is clear.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>