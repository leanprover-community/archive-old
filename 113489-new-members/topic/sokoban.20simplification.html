---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/sokoban.20simplification.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html">sokoban simplification</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231051180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231051180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231051180">(Mar 19 2021 at 16:31)</a>:</h4>
<p>I was playing with a sokoban formalization, <a href="https://github.com/mirefek/my-lean-experiments/blob/master/sokoban.lean">https://github.com/mirefek/my-lean-experiments/blob/master/sokoban.lean</a><br>
so far just a solvability definition, and a proof that a level is solvable by providing a solution. However, I would like to see the current state of the game in a natural way, that is</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>#######
#. * .#
#$   $#
#.$ $.#
#$  @$#
#. * .#
#######
</code></pre></div>
<p>rather than</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.right</span>
     <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.right</span>
        <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.left</span>
           <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.down</span>
              <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.down</span>
                 <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.left</span>
                    <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.right</span>
                       <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.right</span>
                          <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.left</span> <span class="o">(</span><span class="n">sokoban.move</span> <span class="n">direction.up</span> <span class="n">soko_level</span><span class="o">))))))))))</span>
</code></pre></div>
<p>Would it be possible to tell lean to perform all the beta reductions, and show me the current state, ideally in the way I defined in has_repr? When I add <code>simp</code> tactic anywhere inside, I receive an error message:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>deep recursion was detected at 'infer_type' (potential solution: increase stack space in your system)
</code></pre></div>
<p>On the other hand, the <code>reflexivity</code> tactic is able to finish the proof relatively fast.</p>



<a name="231054098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231054098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231054098">(Mar 19 2021 at 16:50)</a>:</h4>
<p>Check out <a href="https://github.com/Julian/lean-across-the-board/blob/main/src/guarini.lean">https://github.com/Julian/lean-across-the-board/blob/main/src/guarini.lean</a></p>



<a name="231054123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231054123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231054123">(Mar 19 2021 at 16:50)</a>:</h4>
<p>We got displaying of chess boards working.</p>



<a name="231054281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231054281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231054281">(Mar 19 2021 at 16:51)</a>:</h4>
<p>with moves, I mean</p>



<a name="231054298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231054298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231054298">(Mar 19 2021 at 16:51)</a>:</h4>
<p>I think <code>dec_trivial</code> might help you here.</p>



<a name="231054390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231054390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231054390">(Mar 19 2021 at 16:52)</a>:</h4>
<p>Show in <a href="https://github.com/Julian/lean-across-the-board/blob/main/src/guarini.lean">https://github.com/Julian/lean-across-the-board/blob/main/src/guarini.lean</a></p>



<a name="231061297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231061297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231061297">(Mar 19 2021 at 17:35)</a>:</h4>
<p>I also got displaying working to some extent (I can run <code>#eval</code>), just not in the tactic mode.</p>



<a name="231061840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231061840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231061840">(Mar 19 2021 at 17:38)</a>:</h4>
<p>As far as I understand, <code>dec_trivial</code> is only for finishing the goal using decidability. So I can use it as well instead of <code>reflexivity</code>, maybe it will work better on bigger levels.</p>



<a name="231062509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231062509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231062509">(Mar 19 2021 at 17:43)</a>:</h4>
<p>I imagined that I could see the current level, as I am applying the particular steps. How does the visualisation work in the chess problem? I don't see visualisation in the guarini file (except for in the comments).</p>



<a name="231069578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231069578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231069578">(Mar 19 2021 at 18:31)</a>:</h4>
<p>What I was now thinking was that I could maybe write a tactic which finds an instance of <code>sokoban</code>, evaluates it, converts it into a string, tries to prove that the new and the old versions are equal using <code>dec_trivial</code> or <code>reflexivity</code>, and if it succeeds, it performs rewriting. Just that</p>
<ul>
<li>it feels a bit overcomplicated</li>
<li>the string as shown  in the current goal displays newlines as <code>\n</code> rather than actual newlines. So maybe, the tactic should also print the sokoban state on its own...</li>
</ul>
<p>Any better idea?</p>



<a name="231073263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231073263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231073263">(Mar 19 2021 at 18:57)</a>:</h4>
<p>I think this is in the style of a <code>norm_*</code> normalization tactic/plugin for <code>norm_num</code>. It is normalizing the expression for some term, given some proof or proof context</p>



<a name="231073592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231073592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231073592">(Mar 19 2021 at 18:59)</a>:</h4>
<p>The other option is to look at examples of a styling widget, like what was done for the Rubik's cube or sudoku examples: <a href="https://github.com/kendfrey/rubiks-cube-group">https://github.com/kendfrey/rubiks-cube-group</a> <a href="https://github.com/TwoFx/sudoku">https://github.com/TwoFx/sudoku</a></p>



<a name="231091339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231091339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231091339">(Mar 19 2021 at 21:16)</a>:</h4>
<p>wow, that looks really fancy, I am not sure if I can do that</p>



<a name="231095408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231095408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231095408">(Mar 19 2021 at 21:59)</a>:</h4>
<p>So, in the end, I wrote the tactic that I mentioned before (I updated <a href="https://github.com/mirefek/my-lean-experiments/blob/master/sokoban.lean">https://github.com/mirefek/my-lean-experiments/blob/master/sokoban.lean</a>). I would be however still interested if there is a better way to convince lean to do the gradual move simplifications as the solution proceeds.</p>



<a name="231096980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231096980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231096980">(Mar 19 2021 at 22:14)</a>:</h4>
<p>You wrote the normalizer, nice =)</p>



<a name="231100003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231100003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231100003">(Mar 19 2021 at 22:47)</a>:</h4>
<p>I looked at the html widget examples, and they are not working for me. Maybe, I am just doing something wrong with the VSCode (usually, I am using emacs). In sudoku, I just see the standard lean state, and in rubik's cube, I only get a message <code>successfully rendered widget</code>. Is there some necessary addon, or the right version of VSCode, or something like that?</p>



<a name="231100070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231100070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231100070">(Mar 19 2021 at 22:48)</a>:</h4>
<p>Or I just don't know how to open it...</p>



<a name="231100724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231100724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231100724">(Mar 19 2021 at 22:55)</a>:</h4>
<p>The key to making it show up in the goal view is <a href="https://github.com/TwoFX/sudoku/blob/master/src/widget.lean#L95-L124">this stuff</a></p>



<a name="231100876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231100876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231100876">(Mar 19 2021 at 22:56)</a>:</h4>
<p>that creates the <code>begin [show_sudoku]</code> environment, which will call <code>save_info</code> to store the data needed for goal data to show up when you put your cursor inside the tactic block</p>



<a name="231101855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231101855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231101855">(Mar 19 2021 at 23:07)</a>:</h4>
<p><a href="/user_uploads/3121/his0JQqdPNNXWf8EFgoonCRE/ss_sudoku.png">ss_sudoku.png</a> <a href="/user_uploads/3121/D9BIXzge5HD0RTMWb2ROoany/ss_rubik.png">ss_rubik.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/his0JQqdPNNXWf8EFgoonCRE/ss_sudoku.png" title="ss_sudoku.png"><img src="/user_uploads/3121/his0JQqdPNNXWf8EFgoonCRE/ss_sudoku.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/D9BIXzge5HD0RTMWb2ROoany/ss_rubik.png" title="ss_rubik.png"><img src="/user_uploads/3121/D9BIXzge5HD0RTMWb2ROoany/ss_rubik.png"></a></div>



<a name="231102997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231102997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231102997">(Mar 19 2021 at 23:19)</a>:</h4>
<p>do you have a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? It's hard to work with screenshots</p>



<a name="231103332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103332">(Mar 19 2021 at 23:22)</a>:</h4>
<p>Oh, you cut off the tactic state view but it doesn't look like mine</p>



<a name="231103362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103362">(Mar 19 2021 at 23:23)</a>:</h4>
<p>is there a dropdown in the corner that says "plain text" / "widget"?</p>



<a name="231103404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103404">(Mar 19 2021 at 23:23)</a>:</h4>
<p>I have version 0.16.25 of the vscode-lean extension</p>



<a name="231103520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103520">(Mar 19 2021 at 23:25)</a>:</h4>
<p>I have 0.15.8, maybe, I should upgrade.</p>



<a name="231103541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103541">(Mar 19 2021 at 23:25)</a>:</h4>
<p>vscode makes it a one-click fix</p>



<a name="231103676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103676">(Mar 19 2021 at 23:26)</a>:</h4>
<p>Click where? I am sorry, I am not used to VSCode.</p>



<a name="231103803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103803">(Mar 19 2021 at 23:28)</a>:</h4>
<p>Maybe, I have to upgrade the VScode itself.</p>



<a name="231103910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103910">(Mar 19 2021 at 23:30)</a>:</h4>
<p>click on the extension button (looks like four squares on the left sidebar), then find "lean" in the list</p>



<a name="231103999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231103999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231103999">(Mar 19 2021 at 23:30)</a>:</h4>
<p>it probably says "update available" or something like that</p>



<a name="231104158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104158">(Mar 19 2021 at 23:32)</a>:</h4>
<p>I upgraded VScode, and it somehow automatically upgraded the lean extension.</p>



<a name="231104192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104192">(Mar 19 2021 at 23:33)</a>:</h4>
<p>However, it is still not working.</p>



<a name="231104288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104288">(Mar 19 2021 at 23:34)</a>:</h4>
<p>It looks the same, there is a dropdown in the corner with options <code>no_filter</code> <code>hide /^_/</code> <code>goals_only</code></p>



<a name="231104356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104356">(Mar 19 2021 at 23:34)</a>:</h4>
<p>There should be a dropdown that lets you switch between "widget mode" and "text mode".</p>



<a name="231104403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104403">(Mar 19 2021 at 23:35)</a>:</h4>
<p>If you click inside a proof does the infoview window look like this? <a href="https://github.com/leanprover/vscode-lean/blob/master/media/infoview-overview.png">https://github.com/leanprover/vscode-lean/blob/master/media/infoview-overview.png</a></p>
<div class="message_inline_image"><a href="https://github.com/leanprover/vscode-lean/blob/master/media/infoview-overview.png"><img src="https://raw.githubusercontent.com/leanprover/vscode-lean/master/media/infoview-overview.png"></a></div>



<a name="231104419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104419">(Mar 19 2021 at 23:35)</a>:</h4>
<p>Ha, now it is working, there was some <code>reload required</code> button that I had to click on.</p>



<a name="231104433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231104433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231104433">(Mar 19 2021 at 23:35)</a>:</h4>
<p>Probably to finish all the upgrades.</p>



<a name="231105538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231105538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231105538">(Mar 19 2021 at 23:50)</a>:</h4>
<p>So now, I can go back about how this magic work. Is it somewhere documented? I mean what is the meaning of <code>[show_sudoku]</code>? As far as I can see, <code>show_sudoku</code> is a namespace, and an alias for a <code>tactic</code>. Is the alias necessary? And which functions are important in the namespace?</p>



<a name="231106949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231106949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231106949">(Mar 20 2021 at 00:07)</a>:</h4>
<p><code>begin [custom] end</code> is a custom tactic block, where all the tactics inside live in the <code>custom.interactive.*</code> namespace instead of the usual <code>tactic.interactive.*</code></p>



<a name="231107098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231107098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231107098">(Mar 20 2021 at 00:09)</a>:</h4>
<p>In order to make it work you need the specific definitions <code>custom</code>, <code>custom.step</code>, <code>custom.istep</code>, <code>custom.save_info</code> like in the sudoku example. These names are hardcoded in the way custom tactic blocks are desugared</p>



<a name="231107211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231107211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231107211">(Mar 20 2021 at 00:10)</a>:</h4>
<p>so yes, the namespace is required and the alias is required (although it doesn't have to be an alias of <code>tactic</code>, it can be any monad, although it's usually <code>tactic</code> or an extension of <code>tactic</code> to add state or something)</p>



<a name="231107572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231107572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231107572">(Mar 20 2021 at 00:16)</a>:</h4>
<p>The <code>copy_decls</code> function in the sudoku example is not required, but it will import all interactive tactics from <code>tactic</code> into your custom tactic environment, so that things like <code>intro</code> and <code>apply</code> work in addition to your game solving tactics, which may or may not be what you want</p>



<a name="231107852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231107852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miroslav Olšák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231107852">(Mar 20 2021 at 00:21)</a>:</h4>
<p>Ah, thanks for explanation of <code>copy_decls</code>. What about the role of <code>solve1</code>? And what is the meaning of <code>step</code> and <code>istep</code>? As far as I understand, <code>save_info</code> produces the widget / text in the tactic state window.</p>



<a name="231109108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231109108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231109108">(Mar 20 2021 at 00:43)</a>:</h4>
<p>I believe <code>solve1</code> implements the braces operation <code>{ tacs }</code>, while <code>step</code> and <code>istep</code> are the equivalent of <code>bind</code> in the monad (they attach some position information to the tactics so that they can later be located by the goal view tracker), and <code>save_info</code> adds data to the position info which determines how goals are printed</p>



<a name="231109182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/sokoban%20simplification/near/231109182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/sokoban.20simplification.html#231109182">(Mar 20 2021 at 00:44)</a>:</h4>
<p>for the most part you can just delegate to the <code>tactic</code> functions unless you want to do something special at the end of a tactic block, after every tactic, or if you want to print the goal in a special way</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>