---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html">lemmas on int and subsingleton</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="233275321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233275321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233275321">(Apr 06 2021 at 07:04)</a>:</h4>
<p>Dear All,</p>
<p>while working on the <code>lean-liquid</code> branch, I found the lemmas below useful and I could not find them in mathlib.  If you think that it would be helpful to have some of them in mathlib, let me know and I will be happy to make the relevant PRs!</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.associated</span>

<span class="kd">lemma</span> <span class="n">int.nat_abs_eq_iff</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n.nat_abs</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">↔</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">k</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="o">{</span> <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">exact</span> <span class="n">int.nat_abs_eq</span> <span class="n">n</span> <span class="o">},</span> <span class="kd">by</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">rfl</span> <span class="bp">|</span> <span class="n">rfl</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span><span class="o">⟩</span>

<span class="kd">lemma</span> <span class="n">int.is_unit_plus_minus_one_of</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="n">is_unit_int.trans</span> <span class="o">(</span><span class="n">int.nat_abs_eq_iff.trans</span> <span class="n">iff.rfl</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">function.injective.of_subsingleton</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">hs</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ab</span><span class="o">,</span> <span class="n">subsingleton_iff.mp</span> <span class="n">hs</span> <span class="n">a</span> <span class="n">b</span>

<span class="kd">lemma</span> <span class="n">function.surjective.to_subsingleton</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">t</span><span class="o">)</span> <span class="o">[</span><span class="n">subsingleton</span> <span class="n">t</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">function.surjective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">function.surjective_iff_has_right_inverse.mpr</span> <span class="o">⟨</span><span class="n">function.inv_fun</span> <span class="n">f</span><span class="o">,</span> <span class="kd">by</span> <span class="n">finish</span><span class="o">⟩</span>

<span class="kd">lemma</span> <span class="n">subsingleton_eq_univ_of_mem</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">({</span><span class="n">a</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="o">:=</span>
<span class="n">le_antisymm</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a1</span> <span class="n">ha</span><span class="o">,</span> <span class="n">set.mem_univ</span> <span class="n">a1</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">set.mem_singleton_iff.mpr</span> <span class="o">(</span><span class="n">subsingleton_iff.mp</span> <span class="n">hA</span> <span class="n">x</span> <span class="n">a</span><span class="o">))</span>
</code></pre></div>



<a name="233275551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233275551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233275551">(Apr 06 2021 at 07:07)</a>:</h4>
<p>LGTM.<br>
<code>nonempty s</code> should be a type class assumption (in lemma 4)</p>



<a name="233275645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233275645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233275645">(Apr 06 2021 at 07:08)</a>:</h4>
<p>For the last lemma, I wonder whether you want to generalise the LHS to an arbitrary set <code>s</code> with assumption <code>s.nonempty</code></p>



<a name="233275735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233275735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233275735">(Apr 06 2021 at 07:09)</a>:</h4>
<p>Johan, thanks!</p>
<p>lemma4 : I edited the list above and, in the same lemma, went ahead to make <code>subsingleton</code> also a typeclass assumption!</p>



<a name="233276032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233276032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233276032">(Apr 06 2021 at 07:13)</a>:</h4>
<p>I am working on a proof of the other suggestion that you made!</p>



<a name="233277378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233277378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233277378">(Apr 06 2021 at 07:28)</a>:</h4>
<p>I could almost find the version that Johan suggested with a set:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subsingleton_eq_univ_of_subset</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">hA</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">a</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="o">:=</span>
<span class="n">subsingleton.eq_univ_of_nonempty</span> <span class="n">set.nonempty_of_nonempty_subtype</span>
</code></pre></div>
<p>and the same proof works for the earlier lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subsingleton_eq_univ_of_mem</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">({</span><span class="n">a</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="o">:=</span>
<span class="n">subsingleton.eq_univ_of_nonempty</span> <span class="n">set.nonempty_of_nonempty_subtype</span>
</code></pre></div>
<p>I guess that this means that this lemma "is" already in mathlib!</p>



<a name="233278422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233278422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233278422">(Apr 06 2021 at 07:40)</a>:</h4>
<p>Is <code>nonempty a</code> (for <code>a : set _</code>) the preferred spelling of set emptiness? That inserts a coercion to sort, which is why it would surprise me if it is!</p>



<a name="233278492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233278492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233278492">(Apr 06 2021 at 07:41)</a>:</h4>
<p>Ah, indeed the proof you give translates your spelling to the less surprising one</p>



<a name="233278624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233278624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233278624">(Apr 06 2021 at 07:42)</a>:</h4>
<p>I'm pretty sure I've seen int.nat_abs_eq_iff or similar in review recently...</p>



<a name="233278749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233278749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233278749">(Apr 06 2021 at 07:44)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <code>s</code> is a Type. Maybe those letters should be changed to <code>X</code> and <code>Y</code> or <code>\alpha</code> and <code>\beta</code>.</p>



<a name="233278865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233278865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233278865">(Apr 06 2021 at 07:45)</a>:</h4>
<p>Ah, I mistakenly assumed the last code snippet agreed with the earlier ones, and didn't scroll sideways to check on mobile!</p>



<a name="233279732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233279732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233279732">(Apr 06 2021 at 07:54)</a>:</h4>
<p>Besides the fact that there is one case in which the assumption <code>nonempty</code> is applied to a set, the confusion is probably also caused by the fact that I used <code>s</code> for a Type, whereas often <code>s</code> denotes a subset.   I tried to uniformize the notation, in the code below:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">int</span>

<span class="c1">-- proof provided by Ruben</span>
<span class="kd">lemma</span> <span class="n">nat_abs_eq_iff</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">a.nat_abs</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">n</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">int.nat_abs_eq_nat_abs_iff</span><span class="o">,</span> <span class="n">int.nat_abs_of_nat</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">is_unit_plus_minus_one_of</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="n">is_unit_int.trans</span> <span class="o">(</span><span class="n">nat_abs_eq_iff.trans</span> <span class="n">iff.rfl</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">int</span>

<span class="kd">lemma</span> <span class="n">function.injective.of_subsingleton</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ab</span><span class="o">,</span> <span class="n">subsingleton_iff.mp</span> <span class="n">h</span> <span class="n">a</span> <span class="n">b</span>

<span class="kd">lemma</span> <span class="n">function.surjective.to_subsingleton</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">subsingleton</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">function.surjective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">function.surjective_iff_has_right_inverse.mpr</span> <span class="o">⟨</span><span class="n">function.inv_fun</span> <span class="n">f</span><span class="o">,</span> <span class="kd">by</span> <span class="n">finish</span><span class="o">⟩</span>

<span class="c1">-- this lemma and the next may be "too close" to results in mathlib: I will probably not PR them,</span>
<span class="c1">-- unless there is some explicit interest in them!</span>
<span class="kd">lemma</span> <span class="n">subsingleton_eq_univ_of_mem</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">({</span><span class="n">a</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="o">:=</span>
<span class="n">subsingleton.eq_univ_of_nonempty</span> <span class="n">set.nonempty_of_nonempty_subtype</span>

<span class="c1">-- here [nonempty s] introduces a coercion mentioned by Eric</span>
<span class="kd">lemma</span> <span class="n">subsingleton_eq_univ_of_subset</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">s</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">s</span> <span class="bp">=</span> <span class="n">set.univ</span> <span class="o">:=</span>
<span class="n">subsingleton.eq_univ_of_nonempty</span> <span class="n">set.nonempty_of_nonempty_subtype</span>
</code></pre></div>



<a name="233279868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233279868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233279868">(Apr 06 2021 at 07:55)</a>:</h4>
<p>Alternative proof for the first one:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.associated</span>
<span class="kd">lemma</span> <span class="n">int.nat_abs_eq_iff</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n.nat_abs</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">↔</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">k</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">int.nat_abs_eq_nat_abs_iff</span><span class="o">,</span> <span class="n">int.nat_abs_of_nat</span><span class="o">]</span>
</code></pre></div>



<a name="233279992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233279992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233279992">(Apr 06 2021 at 07:56)</a>:</h4>
<p>Ruben, thanks!  I will update with your proof, since it seems more direct!</p>



<a name="233281212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233281212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233281212">(Apr 06 2021 at 08:07)</a>:</h4>
<p>I think <code>is_unit_plus_minus_one_of</code> is <a href="https://leanprover-community.github.io/mathlib_docs/find/int.units_eq_one_or">docs#int.units_eq_one_or</a></p>



<a name="233281278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233281278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233281278">(Apr 06 2021 at 08:07)</a>:</h4>
<p>Or at least, it's a more direct proof via that lemma</p>



<a name="233281386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233281386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233281386">(Apr 06 2021 at 08:08)</a>:</h4>
<p>Ok, I was actually right now playing with this, since I had also found <code>int.units_eq_one_or</code>, trying to place <code>is_unit_plus_minus_one_of</code></p>



<a name="233282308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233282308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233282308">(Apr 06 2021 at 08:17)</a>:</h4>
<p>I am failing to be able to use <code>int.units_eq_one_or</code>.  I would like to apply the conclusion of that lemma to get Lean to ask me to produce a unit.  Is there a way to do this?</p>
<p>What is a good way to proceed?</p>
<p>Below is a proof that I would like to see if it can be made to work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit_plus_neg_one_of</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">units_eq_one_or</span> <span class="n">_</span><span class="o">,</span>
<span class="c1">-- of course this does not work, since Lean does not know that `a` is a piece of a unit.</span>
<span class="c1">-- How can I get Lean to proceed there?</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233283221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283221">(Apr 06 2021 at 08:24)</a>:</h4>
<p>Also, the word <code>minus</code> should be <code>neg</code>!</p>



<a name="233283305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283305">(Apr 06 2021 at 08:25)</a>:</h4>
<p>Eric, this last one was easy to fix! <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="233283580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283580">(Apr 06 2021 at 08:27)</a>:</h4>
<p><code>is_unit.eq_one_or_neg_one</code>?</p>



<a name="233283638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283638">(Apr 06 2021 at 08:28)</a>:</h4>
<p>Of course it's a bit weird to put a lemma specific to <code>int</code> in the <code>is_unit</code> namespace</p>



<a name="233283679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283679">(Apr 06 2021 at 08:28)</a>:</h4>
<p>Do we already have <code>is_unit.eq_one</code> for <code>nat</code>?</p>



<a name="233283863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233283863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233283863">(Apr 06 2021 at 08:30)</a>:</h4>
<p><del><code>library_search</code> doesn't find either of these:</del></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.units_eq_one</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">units</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">library_search</span>

<span class="kd">lemma</span> <span class="n">is_unit.eq_one</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>
<p>edit: ah, we have <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.units_eq_one">docs#nat.units_eq_one</a></p>



<a name="233284091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233284091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233284091">(Apr 06 2021 at 08:31)</a>:</h4>
<p>And <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.is_unit_iff">docs#nat.is_unit_iff</a></p>



<a name="233284298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233284298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233284298">(Apr 06 2021 at 08:32)</a>:</h4>
<p>So, should the name be <code>int.is_unit_iff</code>?</p>



<a name="233284414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233284414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233284414">(Apr 06 2021 at 08:33)</a>:</h4>
<p>Still, I have not been able to prove the <code>is_unit</code> lemma from the <code>units</code> one.</p>



<a name="233284851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233284851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233284851">(Apr 06 2021 at 08:36)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit.eq_one_or</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">units.coe_one</span><span class="o">,</span> <span class="bp">←</span><span class="n">units.coe_neg</span><span class="o">],</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">int.units_eq_one_or</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">)</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233284937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233284937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233284937">(Apr 06 2021 at 08:37)</a>:</h4>
<p>To confuse me further, </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">is_unit_int</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">n.nat_abs</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
</code></pre></div>
<p>is in <code>algebra/associated</code> and not in <code>data/int/basic</code>, where the stuff about units in <code>int</code> appears.</p>



<a name="233285115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233285115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233285115">(Apr 06 2021 at 08:39)</a>:</h4>
<p>It might be that the reason for this is to not import <code>algebra/associated</code> into <code>data/int/basic</code>.</p>



<a name="233285158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233285158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233285158">(Apr 06 2021 at 08:39)</a>:</h4>
<p>Or a shorter proof,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit.eq_one_or'</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">hx</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">int.units_eq_one_or</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">)</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">)</span>
</code></pre></div>



<a name="233285244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233285244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233285244">(Apr 06 2021 at 08:40)</a>:</h4>
<p>If that proof can be moved to data/int/basic, it probably should be</p>



<a name="233285394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233285394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233285394">(Apr 06 2021 at 08:41)</a>:</h4>
<p>At the moment, it cannot, since the proof uses lemmas in <code>algebra/associated</code>, but I am sure that I can prove this lemma from what is in <code>data/int/basic</code>, since we already know that units in <code>int</code> are 1 and -1!  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="233286130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286130">(Apr 06 2021 at 08:48)</a>:</h4>
<p>Should it be an iff, though?</p>



<a name="233286282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286282">(Apr 06 2021 at 08:50)</a>:</h4>
<p>Ruben, I took Erics suggestion to mean the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit.eq_one_or'</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">hx</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">int.units_eq_one_or</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">)</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">coe</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">is_unit_iff</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">is_unit.eq_one_or'</span> <span class="n">h</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">is_unit_one</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">is_unit_of_mul_eq_one</span> <span class="n">_</span> <span class="o">(</span><span class="bp">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">neg_one_mul</span> <span class="n">_</span><span class="o">)</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233286732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286732">(Apr 06 2021 at 08:54)</a>:</h4>
<p>Note the <code>'</code> was just to distinguish it from my previous lemma, there's no need for <code>'</code> if you PR that</p>



<a name="233286813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286813">(Apr 06 2021 at 08:55)</a>:</h4>
<p>How do people feel about making <code>is_unit_iff</code> a <code>simp</code> lemma?</p>



<a name="233286891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286891">(Apr 06 2021 at 08:56)</a>:</h4>
<p><del>Should the <code>iff</code> version of <code>units</code> be there as well?</del><br>
Hmm, I had not given enough TT thought about this: the <code>units</code> lemma is tricky to convert into an iff, right?</p>



<a name="233286894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233286894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233286894">(Apr 06 2021 at 08:56)</a>:</h4>
<p>Also as a simp lemma?</p>



<a name="233287354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287354">(Apr 06 2021 at 09:00)</a>:</h4>
<p>Looks like you could do with an <code>is_unit.neg</code> lemma there too:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit.neg</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">is_unit</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">is_unit_iff</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">is_unit.eq_one_or</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">is_unit_one</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">is_unit_one.neg</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233287462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287462">(Apr 06 2021 at 09:02)</a>:</h4>
<p>I think that might be a bad idea as a simp lemma</p>



<a name="233287547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287547">(Apr 06 2021 at 09:02)</a>:</h4>
<p>With the changes above, the lemma below now fits in <code>data/int/basic</code> and is no longer needed in <code>algebra/associated</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">is_unit_int</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">n.nat_abs</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">nat_abs_eq_iff</span><span class="o">,</span> <span class="n">is_unit_iff</span><span class="o">]</span>
</code></pre></div>



<a name="233287570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287570">(Apr 06 2021 at 09:02)</a>:</h4>
<p>Ok, I will remove the simp attribute!</p>



<a name="233287795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287795">(Apr 06 2021 at 09:04)</a>:</h4>
<p>I was thinking about the <code>is_unit.neg</code>, but it probably does not belong to any file that is already imported into <code>data/int/basic</code>, right?</p>



<a name="233287845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233287845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233287845">(Apr 06 2021 at 09:04)</a>:</h4>
<p>I am happy to prove that the opposite of a unit is again a unit, though it would probably be a different PR!</p>



<a name="233288485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233288485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233288485">(Apr 06 2021 at 09:10)</a>:</h4>
<p>I had</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">is_unit.neg</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(</span><span class="bp">-</span><span class="n">u</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">is_unit</span> <span class="n">u</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="bp">;</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">u'</span><span class="o">,</span> <span class="n">hu</span><span class="o">⟩,</span>
    <span class="n">use</span> <span class="bp">-</span><span class="n">u'</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hu</span><span class="o">,</span> <span class="n">neg_neg</span><span class="o">,</span> <span class="n">units.coe_neg</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233288957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233288957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233288957">(Apr 06 2021 at 09:15)</a>:</h4>
<p>PR <a href="https://github.com/leanprover-community/mathlib/issues/7058">#7058</a></p>



<a name="233327824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233327824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233327824">(Apr 06 2021 at 14:27)</a>:</h4>
<p>Any is_unit lemma is also a lemma about units. And units are a group/subgroup depending on how you approach it. The neg one is just a special case of a mul_hom</p>



<a name="233327970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233327970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233327970">(Apr 06 2021 at 14:28)</a>:</h4>
<p>Sure, but we have <code>is_unit.mul</code> and <code>is_unit.inv</code>, so we may as well add versions for the other operators for convenience</p>



<a name="233328005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233328005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233328005">(Apr 06 2021 at 14:28)</a>:</h4>
<p>Do we have the fact that units are a subgroup?</p>



<a name="233328559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemmas%20on%20int%20and%20subsingleton/near/233328559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton.html#233328559">(Apr 06 2021 at 14:32)</a>:</h4>
<p>In case it helps, this is the part of the code where opposites interact with <code>is_unit</code> in the PR:</p>
<p><a href="https://github.com/leanprover-community/mathlib/blob/042166150bc51f7976161ff8642f3b408a823f07/src/algebra/ring/basic.lean#L627">https://github.com/leanprover-community/mathlib/blob/042166150bc51f7976161ff8642f3b408a823f07/src/algebra/ring/basic.lean#L627</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>