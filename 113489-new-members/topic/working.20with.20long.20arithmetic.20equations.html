---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html">working with long arithmetic equations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279227572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279227572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279227572">(Apr 17 2022 at 15:51)</a>:</h4>
<p>Say I have a goal which looks like a * x1 + a * x2 + a * x3 + ... a * x100 = b</p>
<p>What is the best way to group two specific terms? (eg: say I want to group x8 and x11 into a * (x8 + x11))</p>



<a name="279227667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279227667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279227667">(Apr 17 2022 at 15:53)</a>:</h4>
<p>You can state the equality you want and let <code>abel</code> do it for you.</p>



<a name="279228416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228416">(Apr 17 2022 at 16:08)</a>:</h4>
<p>what is abel?</p>



<a name="279228426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228426">(Apr 17 2022 at 16:09)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#abel">tactic#abel</a></p>



<a name="279228485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228485">(Apr 17 2022 at 16:10)</a>:</h4>
<p>I think Matei is using Lean 4 though. Is <code>abel</code> available in Mathlib4?</p>



<a name="279228500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228500">(Apr 17 2022 at 16:11)</a>:</h4>
<p>Not to my or doc-gen4's knowledge</p>



<a name="279228550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228550">(Apr 17 2022 at 16:12)</a>:</h4>
<p>You can use Kyle's trick with <code>simp [Nat.add_comm, Nat.add_assoc, Nat.add_left_comm]</code> to get an equation to its normal form</p>



<a name="279228574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228574">(Apr 17 2022 at 16:12)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span> that trick doesn't seem to help here</p>



<a name="279228581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228581">(Apr 17 2022 at 16:12)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="279228655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279228655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279228655">(Apr 17 2022 at 16:15)</a>:</h4>
<p>Don't think this is going to help, but <a href="https://github.com/Mateiadrielrafael/lean-sandbox/blob/main/LeanSandbox/Integers.lean#L195">here you go</a> <span class="user-mention" data-user-id="451983">@Arthur Paulino</span></p>



<a name="279229034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229034">(Apr 17 2022 at 16:24)</a>:</h4>
<p>Ah, I had misread your first post, sorry</p>



<a name="279229417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229417">(Apr 17 2022 at 16:35)</a>:</h4>
<p><span class="user-mention" data-user-id="486803">@Matei Adriel</span> here's a smaller problem:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kn">private</span> <span class="kd">theorem</span> <span class="n">multiplyRawInts.respects</span>
    <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">w</span><span class="o">:</span> <span class="n">RawInt</span><span class="o">}</span>
    <span class="o">(</span><span class="n">xz</span><span class="o">:</span> <span class="n">x</span> <span class="bp">~</span> <span class="n">z</span><span class="o">)</span>
    <span class="o">(</span><span class="n">yw</span><span class="o">:</span> <span class="n">y</span> <span class="bp">~</span> <span class="n">w</span><span class="o">):</span> <span class="n">multiplyRawInts</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">multiplyRawInts</span> <span class="n">z</span> <span class="n">w</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">apply</span> <span class="n">eqv.sound</span>
    <span class="n">simp_all</span> <span class="o">[</span><span class="n">eqv</span><span class="o">]</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">Nat.subtract_to_equation_left</span> <span class="n">_</span> <span class="n">_</span>
      <span class="o">(</span><span class="n">y.pos</span> <span class="bp">*</span> <span class="n">z.neg</span> <span class="bp">+</span> <span class="n">y.pos</span> <span class="bp">*</span> <span class="n">z.pos</span> <span class="bp">+</span> <span class="n">x.neg</span> <span class="bp">*</span> <span class="n">w.pos</span> <span class="bp">+</span> <span class="n">x.pos</span> <span class="bp">*</span> <span class="n">w.pos</span><span class="o">)</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.add_assoc</span><span class="o">]</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">x.1</span> <span class="bp">*</span> <span class="n">y.1</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x.2</span> <span class="bp">*</span> <span class="n">y.2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">z.2</span> <span class="bp">*</span> <span class="n">w.1</span> <span class="bp">+</span> <span class="n">z.1</span> <span class="bp">*</span> <span class="n">w.2</span><span class="o">))</span> <span class="bp">=</span>
        <span class="n">z.1</span> <span class="bp">*</span> <span class="n">w.1</span> <span class="bp">+</span> <span class="o">(</span><span class="n">z.2</span> <span class="bp">*</span> <span class="n">w.2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x.2</span> <span class="bp">*</span> <span class="n">y.1</span> <span class="bp">+</span> <span class="n">x.1</span> <span class="bp">*</span> <span class="n">y.2</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span>
      <span class="gr">sorry</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span>
</code></pre></div>



<a name="279229466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229466">(Apr 17 2022 at 16:36)</a>:</h4>
<p>Can you clear that <code>sorry</code> out?</p>



<a name="279229737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229737">(Apr 17 2022 at 16:44)</a>:</h4>
<p>ok, smaller problem - how do I "exit" conv mode? (and get back to the bigger goal)</p>



<a name="279229782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229782">(Apr 17 2022 at 16:44)</a>:</h4>
<p>By moving to the next higher indentation level</p>



<a name="279229863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229863">(Apr 17 2022 at 16:46)</a>:</h4>
<p><span class="user-mention" data-user-id="395550">@Henrik Böving</span> I can't seem to get that to work. Can you provide me an example?</p>



<a name="279229958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279229958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279229958">(Apr 17 2022 at 16:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">d</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">conv</span> <span class="bp">=&gt;</span>
    <span class="n">right</span>
    <span class="n">left</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.add_assoc</span><span class="o">]</span>
    <span class="n">right</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.add_comm</span><span class="o">]</span>
  <span class="gr">sorry</span>
</code></pre></div>
<p>if you hover your cursor on the sorry you will see you are out of conv mode</p>



<a name="279230015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279230015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279230015">(Apr 17 2022 at 16:50)</a>:</h4>
<p>oh, I was confused because I was hovering on the indentation before the sorry...</p>



<a name="279290466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279290466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279290466">(Apr 18 2022 at 14:20)</a>:</h4>
<p>Ok, I was able to finish the proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kn">private</span> <span class="kd">theorem</span> <span class="n">multiplyRawInts.respects</span><span class="o">:</span> <span class="bp">∀</span>
    <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">w</span><span class="o">:</span> <span class="n">RawInt</span><span class="o">}</span>
    <span class="o">(</span><span class="n">xz</span><span class="o">:</span> <span class="n">x</span> <span class="bp">~</span> <span class="n">z</span><span class="o">)</span>
    <span class="o">(</span><span class="n">yw</span><span class="o">:</span> <span class="n">y</span> <span class="bp">~</span> <span class="n">w</span><span class="o">),</span> <span class="o">(</span><span class="n">multiplyRawInts</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">multiplyRawInts</span> <span class="n">z</span> <span class="n">w</span><span class="o">)</span>
  <span class="bp">|</span> <span class="o">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">e</span><span class="o">,</span> <span class="n">f</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span> <span class="bp">=&gt;</span> <span class="kd">by</span>
    <span class="n">intro</span> <span class="n">xz</span> <span class="n">yw</span>
    <span class="n">apply</span> <span class="n">eqv.sound</span>
    <span class="n">simp_all</span> <span class="o">[</span><span class="n">eqv</span><span class="o">]</span>

    <span class="k">have</span> <span class="n">first</span><span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">e</span><span class="o">)</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">f</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">f</span><span class="o">)</span>
      <span class="bp">=</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">e</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">e</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">Nat.add_comm</span><span class="o">,</span> <span class="n">xz</span><span class="o">,</span> <span class="n">yw</span><span class="o">]</span>

    <span class="k">have</span> <span class="n">second</span><span class="o">:</span> <span class="n">b</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">+</span> <span class="n">e</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">f</span><span class="o">)</span> <span class="bp">+</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">g</span>
      <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">e</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span> <span class="kd">by</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">yw</span><span class="o">,</span> <span class="n">xz</span><span class="o">]</span> <span class="n">at</span> <span class="n">first</span> <span class="bp">⊢</span>
      <span class="n">conv</span> <span class="n">at</span> <span class="n">first</span> <span class="k">in</span> <span class="n">g</span> <span class="bp">*</span> <span class="o">(</span><span class="n">e</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">&lt;-</span><span class="n">xz</span><span class="o">]</span>
      <span class="n">conv</span> <span class="n">at</span> <span class="n">first</span> <span class="bp">=&gt;</span> <span class="n">tactic</span> <span class="bp">=&gt;</span> <span class="n">nat_ring</span>
      <span class="n">nat_ring</span>
      <span class="n">exact</span> <span class="n">first</span>

    <span class="n">conv</span> <span class="n">at</span> <span class="n">second</span> <span class="bp">=&gt;</span> <span class="n">tactic</span> <span class="bp">=&gt;</span> <span class="n">nat_ring</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">Nat.subtract_to_equation_left</span> <span class="n">_</span> <span class="n">_</span>
      <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">e</span><span class="o">)</span>

    <span class="n">nat_ring_all</span>
</code></pre></div>
<p>quite painful if I may say so myself :)</p>



<a name="279290985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279290985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279290985">(Apr 18 2022 at 14:26)</a>:</h4>
<p>Have you tried to make some usage of <code>simp_arith</code>? It's usually quite helpful in situations like these</p>



<a name="279291038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279291038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279291038">(Apr 18 2022 at 14:27)</a>:</h4>
<p>Assuming you are still using Lean 4, at least I havent heard of these nat_ring tactics yet</p>



<a name="279293314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279293314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279293314">(Apr 18 2022 at 14:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations/near/279291038">said</a>:</p>
<blockquote>
<p>Assuming you are still using Lean 4, at least I havent heard of these nat_ring tactics yet</p>
</blockquote>
<p>the nat_ring tactic is just a little macro <span class="user-mention" data-user-id="306601">@Kyle Miller</span> showed me</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">macro</span> <span class="s2">"nat_ring"</span>  <span class="o">:</span> <span class="n">tactic</span> <span class="bp">=&gt;</span> <span class="bp">`</span><span class="o">(</span><span class="n">simp</span> <span class="o">[</span><span class="n">Nat.mul_assoc</span><span class="o">,</span> <span class="n">Nat.mul_comm</span><span class="o">,</span> <span class="n">Nat.mul_left_comm</span><span class="o">,</span> <span class="n">Nat.add_assoc</span><span class="o">,</span> <span class="n">Nat.add_left_comm</span><span class="o">,</span> <span class="n">Nat.add_comm</span><span class="o">,</span> <span class="n">Nat.left_distrib</span><span class="o">,</span> <span class="n">Nat.right_distrib</span><span class="o">])</span>
</code></pre></div>
<p>(ended up adding a few things to the list myself)</p>



<a name="279293554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279293554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279293554">(Apr 18 2022 at 14:53)</a>:</h4>
<p>I'm not sure what simp_arith does - my editor just hangs when I try to use it</p>



<a name="279293589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279293589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279293589">(Apr 18 2022 at 14:54)</a>:</h4>
<p>I eventually get this error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">tactic</span> <span class="bp">'</span><span class="n">simp'</span> <span class="n">failed</span><span class="o">,</span> <span class="n">nested</span> <span class="n">error</span><span class="o">:</span>
<span class="o">(</span><span class="n">deterministic</span><span class="o">)</span> <span class="n">timeout</span> <span class="n">at</span> <span class="bp">'</span><span class="n">whnf'</span><span class="o">,</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">heartbeats</span> <span class="o">(</span><span class="mi">200000</span><span class="o">)</span> <span class="n">has</span> <span class="n">been</span> <span class="n">reached</span> <span class="o">(</span><span class="n">use</span> <span class="bp">'</span><span class="kd">set_option</span> <span class="n">maxHeartbeats</span> <span class="bp">&lt;</span><span class="n">num</span><span class="bp">&gt;'</span> <span class="n">to</span> <span class="n">set</span> <span class="n">the</span> <span class="n">limit</span><span class="o">)</span>
</code></pre></div>



<a name="279293735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/working%20with%20long%20arithmetic%20equations/near/279293735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matei Adriel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/working.20with.20long.20arithmetic.20equations.html#279293735">(Apr 18 2022 at 14:55)</a>:</h4>
<p>well, that's caused by simp_all_arith. simp_arith does work, but it does not solve the goal</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>