---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html">how to "access" the module instance on submodule quotient?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198934335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934335">(May 27 2020 at 18:42)</a>:</h4>
<p>Suppose I define the notion of the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>-torsion submodule of an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>-module <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> (I couldn't find this in mathlib but maybe I missed it):</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">basic</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">direct_sum</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">submodule</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>

<span class="n">def</span> <span class="n">tors</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">r</span><span class="o">:</span><span class="n">R</span><span class="o">),</span> <span class="n">r</span> <span class="err">•</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">},</span>
  <span class="n">zero</span> <span class="o">:=</span>  <span class="k">by</span> <span class="o">{</span><span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">},</span>
  <span class="n">add</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_set_of_eq</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
               <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">rx</span> <span class="n">hrx</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hy</span> <span class="k">with</span> <span class="n">ry</span> <span class="n">hry</span><span class="o">,</span>
               <span class="n">use</span> <span class="n">rx</span> <span class="bp">*</span> <span class="n">ry</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_add</span> <span class="bp">_</span><span class="o">,</span> <span class="n">mul_smul</span><span class="o">,</span> <span class="n">mul_smul</span><span class="o">,</span> <span class="n">smul_comm</span><span class="o">,</span> <span class="n">hrx</span><span class="o">,</span> <span class="n">hry</span><span class="o">],</span>
               <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span> <span class="kn">end</span><span class="o">,</span>
  <span class="n">smul</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">intros</span> <span class="n">r</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_set_of_eq</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">use</span> <span class="n">s</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_comm</span><span class="o">,</span> <span class="n">hs</span><span class="o">],</span> <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span>
                <span class="kn">end</span><span class="o">}</span>

<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">tors</span> <span class="n">R</span> <span class="n">M</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
</code></pre></div>


<p>I can also define the property of being <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>-torsion free for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>-modules, i.e. no nonzero elements are annihilated by a non-zerodivisor:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">torsion_free</span> <span class="o">{</span><span class="n">N</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}[</span><span class="n">add_comm_group</span> <span class="n">N</span><span class="o">][</span><span class="n">module</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span> <span class="o">:=</span>
    <span class="bp">∀</span><span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span><span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">s</span>  <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">*</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">→</span> <span class="n">r</span> <span class="err">•</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span>
</code></pre></div>


<p>(Probably there are less awkward ways to make the definition above, but that's not necessarily germane to my question here.)</p>
<p>My first question is how to state "the quotient of a module by its torsion submodule is torsion free"?</p>
<p>I tried <code>torsion_free (submodule.quotient tors)</code> and got an error: <code>switched to simple application elaboration procedure because failed to use expected type to elaborate it, error message</code>.</p>
<p>If I do <code>@torsion_free _ _ (submodule.quotient tors) _ _</code>, I get  <code>don't know how to synthesize placeholder</code> errors, so my hypothesis is that I need to invoke some sort of incantation to tell Lean to use the "obvious" R-module structure on the quotient in question, which is defined in <code>linear_algebra/basic.lean: line 897</code>. </p>
<p>Part of the issue here may have to do with leaning on type inference (or is the right thing to say "elaboration"?) unnecessarily, when I could be explicit instead?</p>
<p>I tried to make an alternate definition of <code>tors</code> with the dependence on M (and/or R) made explicit via <code>()</code> instead of the implicit variable <code>{M : Type*}</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">tors&#39;</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span>
    <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)[</span><span class="n">add_comm_group</span> <span class="n">N</span><span class="o">][</span><span class="n">module</span> <span class="n">S</span> <span class="n">N</span><span class="o">]</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">S</span> <span class="n">N</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>But when I tried to construct the submodule structure, it seemed to go horribly wrong, e.g. <code>zero :=  by {simp at *}</code> no longer worked. </p>
<p>Can anyone shed light on my confusion here? What is the "right" way to define <code>tors</code>? Thanks!</p>



<a name="198934380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934380">(May 27 2020 at 18:43)</a>:</h4>
<p>I don't think we have anything on torsion.</p>



<a name="198934423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934423">(May 27 2020 at 18:43)</a>:</h4>
<p>You want <code>r ≠ 0</code> in your definition.</p>



<a name="198934572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934572">(May 27 2020 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="246647">@Sam Lichtenstein</span> Note that with <code>rcases</code> you can merge the <code>intros</code> and <code>cases</code> lines, if you want.</p>



<a name="198934587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934587">(May 27 2020 at 18:44)</a>:</h4>
<p>sorry, I fixed the part that supposedly asserted r was a nonzerodivisor, so it now implies r != 0</p>



<a name="198934700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934700">(May 27 2020 at 18:45)</a>:</h4>
<p>oh whoops, you mean in the carrier<br>
yeah that's a mistake</p>



<a name="198934802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934802">(May 27 2020 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="246647">@Sam Lichtenstein</span> Change <code>{R}</code> and <code>{M}</code> to <code>(R)</code> and <code>(M)</code> in your <code>variables</code></p>



<a name="198934823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934823">(May 27 2020 at 18:46)</a>:</h4>
<p>That will hopefully fix most of your errors</p>



<a name="198934904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934904">(May 27 2020 at 18:47)</a>:</h4>
<p>If you write <code>{R}</code>, you're telling Lean: "Hey, figure out this argument by yourself"</p>



<a name="198934945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934945">(May 27 2020 at 18:47)</a>:</h4>
<p>But this does seem like a case where Lean should be able to figure stuff out for itself?</p>



<a name="198934957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934957">(May 27 2020 at 18:47)</a>:</h4>
<p>With <code>(R)</code>, you say: "I'll supply this argument, everytime I use this def/lemma"</p>



<a name="198934985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934985">(May 27 2020 at 18:47)</a>:</h4>
<p><code>tors</code> can't figure out <code>M</code></p>



<a name="198934999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198934999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198934999">(May 27 2020 at 18:47)</a>:</h4>
<p>You certainly want <code>tors M</code>.</p>



<a name="198935083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935083">(May 27 2020 at 18:48)</a>:</h4>
<p>If I declare (M) in variables at the top, do I need to make the R-module instance on M explicit in the "hypotheses" of the <code>tors</code> definition?</p>



<a name="198935108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935108">(May 27 2020 at 18:48)</a>:</h4>
<p>But then Lean will still complain, and say: look <code>M</code> is supposed to be a module, but over which ring? It's a module over <code>Z</code>, but maybe you want another ring?</p>



<a name="198935134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935134">(May 27 2020 at 18:48)</a>:</h4>
<p>No, the module instance is fine.</p>



<a name="198935161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935161">(May 27 2020 at 18:48)</a>:</h4>
<p>Because [module R M] is in the variables at the top?</p>



<a name="198935205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935205">(May 27 2020 at 18:49)</a>:</h4>
<p>In usual maths, if you are pedantic, you would write <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="normal">T</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi></mrow><mi>R</mi></msub><mo stretchy="false">(</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{Tors}_R(M)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">T</span><span class="mord mathrm">o</span><span class="mord mathrm">r</span><span class="mord mathrm">s</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span>, with both <code>R</code> and <code>M</code> explicit</p>



<a name="198935224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935224">(May 27 2020 at 18:49)</a>:</h4>
<p>Lean wants you to always be pedantic.</p>



<a name="198935355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935355">(May 27 2020 at 18:50)</a>:</h4>
<p>The rest of the variables are fine. <code>[comm_ring R]</code> means: Hey Lean, I'll tell you about <code>R</code>, which is a random type. I expect you to figure out a ring structure on <code>R</code>.</p>



<a name="198935376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935376">(May 27 2020 at 18:50)</a>:</h4>
<p>So you're suggesting the following should work (modulo the r!=0 issue in the carrier)?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>

<span class="n">def</span> <span class="n">tors</span> <span class="o">(</span><span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">r</span><span class="o">:</span><span class="n">R</span><span class="o">),</span> <span class="n">r</span> <span class="err">•</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">},</span>
  <span class="n">zero</span> <span class="o">:=</span>  <span class="k">by</span> <span class="o">{</span><span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">},</span>
  <span class="n">add</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_set_of_eq</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
               <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">rx</span> <span class="n">hrx</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hy</span> <span class="k">with</span> <span class="n">ry</span> <span class="n">hry</span><span class="o">,</span>
               <span class="n">use</span> <span class="n">rx</span> <span class="bp">*</span> <span class="n">ry</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_add</span> <span class="bp">_</span><span class="o">,</span> <span class="n">mul_smul</span><span class="o">,</span> <span class="n">mul_smul</span><span class="o">,</span> <span class="n">smul_comm</span><span class="o">,</span> <span class="n">hrx</span><span class="o">,</span> <span class="n">hry</span><span class="o">],</span>
               <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span> <span class="kn">end</span><span class="o">,</span>
  <span class="n">smul</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">intros</span> <span class="n">r</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_set_of_eq</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">use</span> <span class="n">s</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">smul_comm</span><span class="o">,</span> <span class="n">hs</span><span class="o">],</span> <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span>
                <span class="kn">end</span><span class="o">}</span>
</code></pre></div>



<a name="198935407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935407">(May 27 2020 at 18:50)</a>:</h4>
<p>I think that doesn't compile?</p>



<a name="198935438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935438">(May 27 2020 at 18:50)</a>:</h4>
<p>You can leave out the <code>(R)</code> and <code>(M)</code> from the def of <code>tors</code></p>



<a name="198935460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935460">(May 27 2020 at 18:51)</a>:</h4>
<p>I meant that you should just change the parens in the <code>variables</code> line.</p>



<a name="198935663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198935663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198935663">(May 27 2020 at 18:52)</a>:</h4>
<p>OK thanks, I have to take care of something else, but I will try again later this afternoon</p>



<a name="198966869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198966869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198966869">(May 27 2020 at 23:32)</a>:</h4>
<p>Alright, I have distilled my next question down the following:</p>
<p>1) What on earth is going on in this proof?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">basic</span> <span class="n">tactic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">submodule</span>

<span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">split</span><span class="o">,</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;_eq_mk</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">induction</span> <span class="n">x</span><span class="o">,</span>
<span class="n">finish</span><span class="o">,</span> <span class="n">tauto</span><span class="o">,</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">m</span> <span class="n">hm</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hm</span> <span class="k">with</span> <span class="n">hm₁</span> <span class="n">hm₂</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;_eq_mk</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">hm₂</span><span class="o">,</span> <span class="n">induction</span> <span class="n">hm₂</span><span class="o">,</span> <span class="n">finish</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>2) What's wrong with the superficially similar (mk instead of mk') variant, which raises errors <code>synthesized type class instance is not definitionally equal to expression inferred by typing rules, ...</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- the lemma&#39;s statement doesn&#39;t work</span>
</code></pre></div>


<p>3) Shouldn't there be some version of this lemma whose proof is "by {tauto}", or at least "by {simp at *}"?</p>
<p>4) Apparently it is a Bad Idea to try to work with quotient representatives using <code>@quotient.exists_rep _ (submodule.quotient_rel p)</code>, because this gives things of the form <code>quot.mk setoid.r m</code>, which seem surprisingly difficult to turn into things of the form <code>quotient.mk m</code>, despite the theorem <code>quotient.quot_mk_eq_mk</code>.  But what is the "right" way to work with lifts of elements of quotients? </p>
<p>(I suppose a possible answer to <a href="https://github.com/leanprover-community/mathlib/issues/4">#4</a> is "don't" -- instead try to formulate results using the universal property of the quotient in question. At least in the context of showing that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi mathvariant="normal">/</mi><msup><mi>M</mi><mrow><mi>t</mi><mi>o</mi><mi>r</mi><mi>s</mi></mrow></msup></mrow><annotation encoding="application/x-tex">M/M^{tors}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.043556em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7935559999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">s</span></span></span></span></span></span></span></span></span></span></span></span> is torsion-free, this didn't seem like a natural approach to me, but I suppose YMMV.)</p>



<a name="198967145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967145">(May 27 2020 at 23:35)</a>:</h4>
<p>What do you even mean by Q1?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="c1">--simp only [quotient.mk&#39;_eq_mk] at *, -- doesn&#39;t do anything</span>
    <span class="n">induction</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">finish</span><span class="o">,</span>
    <span class="n">tauto</span><span class="o">},</span>
  <span class="o">{</span> <span class="c1">--intro h,</span>
    <span class="c1">--cases h with m hm,</span>
    <span class="c1">--cases hm with hm₁ hm₂,</span>
    <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">hm₁</span><span class="o">,</span> <span class="n">hm₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="c1">-- the same</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;_eq_mk</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">hm₂</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">hm₂</span><span class="o">,</span>
    <span class="n">finish</span><span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198967245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967245">(May 27 2020 at 23:37)</a>:</h4>
<p>Well, I agree that I could have organized that proof better. But I found it by more or less blindly following suggestions from <code>hint</code>. I guess what I'm wondering is  where do I learn about the yoga of <code>mk</code> vs <code>mk'</code> and all that, and I suppose how I should think of quotients as inductive types. Is this explained clearly somewhere?</p>



<a name="198967246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967246">(May 27 2020 at 23:37)</a>:</h4>
<p>Q2: <code>quotient.mk</code> works when the equivalence relation on M is known to the type class inference system. It's a long story.</p>



<a name="198967348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967348">(May 27 2020 at 23:39)</a>:</h4>
<p>There are three kinds of brackets for function inputs in Lean. The <code>()</code> ones are inputs which the user supplies. The <code>{}</code> ones are ones which a C++ algorithm called Lean's unification system supplies. The <code>[]</code> ones are ones which a different C++ algorithm called Lean's type class system supplies.</p>



<a name="198967352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967352">(May 27 2020 at 23:39)</a>:</h4>
<p>Put differently, what is going on in the <code>finish</code>es after <code>induction xyz</code>?</p>



<a name="198967435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967435">(May 27 2020 at 23:40)</a>:</h4>
<p>Yes, I am feeling a bit better about the various types of brackets now. I've moved on to being confused about quotients.</p>



<a name="198967479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967479">(May 27 2020 at 23:41)</a>:</h4>
<p>It took me a long time to get the hang of the <code>[]</code> system. The way it works is that the user puts things into the <code>[]</code> system (e.g. you put into the system the fact that R is a commutative ring) and then the system does magic behind the scenes, e.g. if you write <code>r + s</code> with <code>r : R</code> and <code>s : R</code> then the typeclass system will magic up <code>+</code> from the fact that it knows <code>R</code> is a ring and that rings have addition</p>



<a name="198967500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967500">(May 27 2020 at 23:41)</a>:</h4>
<p>But you didn't put the equivalence relation defining <code>R/M</code> into the typeclass system, so <code>quotient.mk</code>, which runs on <code>[]</code>, can't get it out.</p>



<a name="198967501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967501">(May 27 2020 at 23:41)</a>:</h4>
<p>Oh I see -- you're saying that in general I'm probably always going to want <code>mk'</code> because typically when working with many inferred things floating around, the type class inference system won't be able to handle <code>mk</code>?</p>



<a name="198967563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967563">(May 27 2020 at 23:42)</a>:</h4>
<p>The type class system can "handle" a quotient if and only if you've told it about the quotient, and if you're dealing with quotient modules then the unification system can handle it fine.</p>



<a name="198967611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967611">(May 27 2020 at 23:43)</a>:</h4>
<p>OK that's helpful.</p>



<a name="198967616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967616">(May 27 2020 at 23:43)</a>:</h4>
<p>thank you</p>



<a name="198967635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967635">(May 27 2020 at 23:43)</a>:</h4>
<p>quotients aren't inductive types, they're quotient types. There are inductive types (structures), pi types (functions), quotient types, and that's it.</p>



<a name="198967729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967729">(May 27 2020 at 23:44)</a>:</h4>
<p>After <code>induction x</code>, the goal which <code>finish</code> is closing is <code>⊢ ∃ (m : M), m ∈ p ∧ quotient.mk' m = quot.mk setoid.r x</code></p>



<a name="198967860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967860">(May 27 2020 at 23:46)</a>:</h4>
<p>So a natural question (logically prior to my previous question about the <code>finish</code>es after <code>induction x</code>) is what <code>induction x</code> means when <code>x : X</code> for a quotient (rather than inductive) type <code>X</code>. Which I suppose I will now try to look up.</p>



<a name="198967865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967865">(May 27 2020 at 23:46)</a>:</h4>
<p>The local context in full is this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="n">x</span>
</code></pre></div>


<p>so <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span> is a submodule of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">x\in M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo stretchy="true">‾</mo></mover><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\overline{x} = 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.63056em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.63056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.55056em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi mathvariant="normal">/</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">M/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord mathdefault">p</span></span></span></span> and the goal is to find some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>∈</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">m\in p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>m</mi><mo stretchy="true">‾</mo></mover><mo>=</mo><mover accent="true"><mi>x</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{m}=\overline{x}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.63056em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.63056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.55056em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.63056em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.63056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.55056em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>.</p>



<a name="198967888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967888">(May 27 2020 at 23:47)</a>:</h4>
<p><code>induction x</code> uses the universal property of the quotient</p>



<a name="198967894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967894">(May 27 2020 at 23:47)</a>:</h4>
<p>ah ok</p>



<a name="198967917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967917">(May 27 2020 at 23:47)</a>:</h4>
<p>well, it's a rather silly universal property here</p>



<a name="198967937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198967937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198967937">(May 27 2020 at 23:48)</a>:</h4>
<p>It might have been clearer to write <code>induction x with xtilde</code></p>



<a name="198968007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968007">(May 27 2020 at 23:48)</a>:</h4>
<p>ok so going back to unpacking <code>finish</code>, the first step is clearly <code>use x</code></p>



<a name="198968013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968013">(May 27 2020 at 23:48)</a>:</h4>
<p>and what is happening at that point is that Lean replaces all occurences of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><mi>M</mi><mi mathvariant="normal">/</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">x\in M/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord mathdefault">p</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{\tilde{x}}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.86786em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.86786em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6678599999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span><span style="top:-3.78786em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo>∈</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">\tilde{x}\in M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7069599999999999em;vertical-align:-0.0391em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6678599999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> reduces to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span></p>



<a name="198968019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968019">(May 27 2020 at 23:49)</a>:</h4>
<p>which gets us to : </p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="n">x</span>
</code></pre></div>



<a name="198968034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968034">(May 27 2020 at 23:49)</a>:</h4>
<p>I think you're going round in circles if you use <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span></p>



<a name="198968042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968042">(May 27 2020 at 23:50)</a>:</h4>
<p>I would rather use <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></p>



<a name="198968094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968094">(May 27 2020 at 23:50)</a>:</h4>
<p>aha!</p>



<a name="198968126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968126">(May 27 2020 at 23:50)</a>:</h4>
<p>I have no idea what <code>finish</code> used -- of course <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde{x}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6678599999999999em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6678599999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span> would also work</p>



<a name="198968231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968231">(May 27 2020 at 23:52)</a>:</h4>
<p>So after <code>induction x, use 0, split, simp only [zero_mem], rw h, rw quotient.mk_zero</code> I am left with a mysterious tautology:</p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">,</span>
<span class="n">x_a</span> <span class="n">x_b</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="n">x_a</span> <span class="n">x_b</span>
<span class="err">⊢</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span>
</code></pre></div>



<a name="198968239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968239">(May 27 2020 at 23:53)</a>:</h4>
<p>I don't find this too troubling, but it seems a bit odd?</p>



<a name="198968380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968380">(May 27 2020 at 23:55)</a>:</h4>
<p>I think the easiest way to prove this is to use <code>submodule.mk_eq_zero</code></p>



<a name="198968446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968446">(May 27 2020 at 23:56)</a>:</h4>
<p>that's probably an equality of proofs (you can turn on proof printing with <code>set_option pp.proofs true</code>) and so <code>refl</code> will close it</p>



<a name="198968484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968484">(May 27 2020 at 23:57)</a>:</h4>
<p>It probably appeared because you applied things in a weird order and something was a metavariable when the subgoal would have normally been discharged</p>



<a name="198968641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968641">(May 27 2020 at 23:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="n">use</span> <span class="mi">0</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">hm₁</span><span class="o">,</span> <span class="n">hm₂</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span><span class="o">,</span> <span class="err">←</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;_eq_mk</span><span class="o">]</span> <span class="n">at</span> <span class="n">hm₁</span><span class="o">,</span>
    <span class="n">cc</span>
  <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198968758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968758">(May 28 2020 at 00:00)</a>:</h4>
<p>Quotients are difficult to steer in general. You need to understand the API properly before you can use them effectively. I'm not really sure I understand the API properly, in some sense.</p>



<a name="198968831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968831">(May 28 2020 at 00:01)</a>:</h4>
<p>LOL I am not sure whether to be comforted by that or not.</p>



<a name="198968855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968855">(May 28 2020 at 00:02)</a>:</h4>
<p>The main thing to learn is that <code>quotient.lift</code> is about descending, not lifting.</p>



<a name="198968902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968902">(May 28 2020 at 00:02)</a>:</h4>
<p>(in the sense that mathematicians would use the word)</p>



<a name="198968910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968910">(May 28 2020 at 00:02)</a>:</h4>
<p>right, I did figure out it wasn't what I initial thought</p>



<a name="198968945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198968945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198968945">(May 28 2020 at 00:03)</a>:</h4>
<p>The whole <code>mk_eq_mk'</code> thing is a shame, it makes things much messier</p>



<a name="198969060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969060">(May 28 2020 at 00:04)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">induction_on&#39;</span> <span class="n">x</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">change</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span><span class="o">:</span><span class="n">M</span> <span class="bp">→</span> <span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="k">with</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span><span class="o">],</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">m&#39;</span><span class="o">,</span> <span class="n">hm&#39;</span><span class="o">,</span> <span class="n">e</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span> <span class="n">e</span><span class="o">,</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198969104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969104">(May 28 2020 at 00:05)</a>:</h4>
<p>Mario is using the quotient interface correctly. It always takes me forever to find that first line</p>



<a name="198969106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969106">(May 28 2020 at 00:05)</a>:</h4>
<p>I think there is a missing theorem for <code>induction_on</code> for <code>submodule.quotient</code>, which would allow you to skip the <code>change</code> line</p>



<a name="198969169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969169">(May 28 2020 at 00:06)</a>:</h4>
<p>I'm using the <code>induction_on</code> for <code>quotient'</code>, which is okay but gives you the wrong <code>mk</code></p>



<a name="198969234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969234">(May 28 2020 at 00:07)</a>:</h4>
<p>I wrote <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tutorial/Zmod37.lean">something about how to make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mi mathvariant="normal">/</mi><mn>37</mn><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}/37\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mord">/</span><span class="mord">3</span><span class="mord">7</span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> in Lean once</a>, maybe I should re-read it.</p>



<a name="198969248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969248">(May 28 2020 at 00:07)</a>:</h4>
<p>If you use <code>induction x</code>, I think it will use <code>quotient.induction_on</code>, which gives you yet another version of <code>mk</code> that you would have to rewrite away more painfully</p>



<a name="198969347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969347">(May 28 2020 at 00:09)</a>:</h4>
<p>The line <code>local attribute [instance] Zmod37.setoid</code> is inserting it as an instance into the typeclass system, so I can use the unprimed versions of everything all the way through</p>



<a name="198969392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969392">(May 28 2020 at 00:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">x</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">change</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="bp">@</span><span class="n">setoid</span><span class="bp">.</span><span class="n">r</span> <span class="bp">_</span> <span class="o">(</span><span class="n">quotient_rel</span> <span class="bp">_</span><span class="o">)):</span><span class="n">M</span> <span class="bp">→</span> <span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="k">with</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span><span class="o">,</span>
    <span class="n">change</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span><span class="o">:</span><span class="n">M</span> <span class="bp">→</span> <span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="k">with</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span><span class="o">],</span>
      <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">m&#39;</span><span class="o">,</span> <span class="n">hm&#39;</span><span class="o">,</span> <span class="n">e</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span> <span class="n">e</span><span class="o">,</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span><span class="o">]</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">refl</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198969505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969505">(May 28 2020 at 00:10)</a>:</h4>
<p>My Mario expansion factor used to be something like 10, it's comforting to see him coming up with proofs which are the same size as mine occasionally</p>



<a name="198969609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969609">(May 28 2020 at 00:12)</a>:</h4>
<p>the final <code>refl</code>, discharging that funny <code>_ = _</code> goal, is apparently tossed up by <code>induction x</code>. I think it is using the dependent recursor for the quotient, which is basically a combination of <code>quotient.induction_on</code> and <code>quotient.lift</code>, and so has a side goal saying that the function that you constructed in the first part doesn't depend on the representative of the equivalence class. For proofs this is always trivial, which is why <code>induction_on</code> exists in the first place</p>



<a name="198969696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198969696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198969696">(May 28 2020 at 00:13)</a>:</h4>
<p>If you <code>#print lem</code>, you will see that the first theorem it uses is indeed <code>quot.rec</code>, which looks like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">proofs</span> <span class="n">true</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">quot</span><span class="bp">.</span><span class="n">rec</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">elab_as_eliminator</span><span class="o">,</span> <span class="n">elab_strategy</span><span class="o">,</span> <span class="kn">reducible</span><span class="o">]</span>
<span class="kn">protected</span> <span class="n">def</span> <span class="n">quot</span><span class="bp">.</span><span class="n">rec</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">quot</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">β</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">r</span> <span class="n">a</span><span class="o">)),</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">r</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">quot</span> <span class="n">r</span><span class="o">),</span> <span class="n">β</span> <span class="n">q</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>



<a name="198970218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198970218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198970218">(May 28 2020 at 00:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F/near/198969505">said</a>:</p>
<blockquote>
<p>My Mario expansion factor used to be something like 10, it's comforting to see him coming up with proofs which are the same size as mine occasionally</p>
</blockquote>
<p>Challenge accepted:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">lem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
        <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">m</span> <span class="err">∈</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">h</span><span class="o">,</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">zero_mem</span> <span class="bp">_</span><span class="o">,</span> <span class="n">h</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩;</span> <span class="n">exact</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">mk_eq_zero</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h</span><span class="bp">⟩</span>
</code></pre></div>



<a name="198984663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20%22access%22%20the%20module%20instance%20on%20submodule%20quotient%3F/near/198984663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20.22access.22.20the.20module.20instance.20on.20submodule.20quotient.3F.html#198984663">(May 28 2020 at 05:44)</a>:</h4>
<p>I think the takeaway is that we just need to flesh out the api of quotient modules/rings/groups a bit more... currently they are written with a POV that you should fall back to the underlying <code>quotient</code> API, but I think that is quite confusing.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>