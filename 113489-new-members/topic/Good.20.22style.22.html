---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Good.20.22style.22.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html">Good "style"</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220927407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927407">(Dec 25 2020 at 16:29)</a>:</h4>
<p>So I'm making a small group theory project from scratch (taking some pointers from mathlib when needed), and I have been wondering about what constitutes good style when it comes to writing definitions and lemmas. I often see people saying things in the chat like "this needs a better API" , which I assume means giving more definitions and lemmas so that proofs can be shorter. </p>
<p>Basically, my question is, how should I think about whether or not I'm building enough of an API? (This project is just for fun, I'm not planning on making any PRs based on it or anything)  </p>
<p>Is there some sort of precept like "you should never need to do more than X rewrites" or "most of your proofs should be in term mode" that can guide me ?</p>



<a name="220927524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927524">(Dec 25 2020 at 16:32)</a>:</h4>
<p>And merry Christmas everyone :)</p>



<a name="220927525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927525">(Dec 25 2020 at 16:32)</a>:</h4>
<p>there is no restriction on how hard the API theorems should be</p>



<a name="220927534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927534">(Dec 25 2020 at 16:33)</a>:</h4>
<p>but they are usually one-liners</p>



<a name="220927563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927563">(Dec 25 2020 at 16:33)</a>:</h4>
<p>the usual principle I use is to make sure that I have theorems that relate the new thing to all the old things</p>



<a name="220927683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927683">(Dec 25 2020 at 16:36)</a>:</h4>
<p>generally it's only about adding more lemmas to work with the definitions, not adding more definitions (which are the reason for the lemmas)</p>



<a name="220927752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927752">(Dec 25 2020 at 16:38)</a>:</h4>
<p>Right. My approach to proving nontrivial theorems has basically been</p>
<ol>
<li>Write a proof in tactic mode because it's easy  </li>
<li>Refactor the tactic script into a series of <code>have</code>/<code>obtain</code>'s that are basically just function applications</li>
<li>Figure out which of those might be useful to have their own lemmas </li>
</ol>
<p>This usually lets me turn most 10-20 line tactic proofs into one or two lines, but I'd be interested in hearing what other people use as their guiding principles</p>



<a name="220927756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927756">(Dec 25 2020 at 16:38)</a>:</h4>
<p>I don't know how useful this is, but I try to prove <em>every</em> obvious lemma about the new thing. I just keep going until I can't think of anything off hand</p>



<a name="220927784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927784">(Dec 25 2020 at 16:40)</a>:</h4>
<p>That makes sense</p>



<a name="220927846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220927846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220927846">(Dec 25 2020 at 16:41)</a>:</h4>
<p>That "proof compression" a useful skill of it's own, but you should be careful that the lemmas you extract from a theorem are suitably general</p>



<a name="220928208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220928208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220928208">(Dec 25 2020 at 16:52)</a>:</h4>
<p>I usually like to go in the reverse order--write the proof of a "real theorem" the way I want it to go but split out the steps as lemmas, and don't even prove the lemmas until I'm done with the main theorem</p>



<a name="220928211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220928211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220928211">(Dec 25 2020 at 16:52)</a>:</h4>
<p>of course you have to be 100% sure the lemmas are actually true then</p>



<a name="220928229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220928229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220928229">(Dec 25 2020 at 16:53)</a>:</h4>
<p>Sometimes you can even defer actually defining your definitions until after you see how they get used in practice.</p>



<a name="220930550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220930550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220930550">(Dec 25 2020 at 18:07)</a>:</h4>
<p>It's interesting that a couple of times I've seen it, it seems that folks do mean "good API" in a very programming-like sense -- i.e. layered theorems/definitions, encapsulation of some layers of abstraction such that you don't have to touch implementation details of layers below them, composability so that you can assemble new theorems by reusing theorems "one level down" in abstraction without either needing to reimplement chunks of them...</p>



<a name="220942704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220942704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220942704">(Dec 26 2020 at 00:38)</a>:</h4>
<p>When I made a basic API for group theory in some sense the biggest design decision I felt I made was what the definition of a group should be. I went with just three axioms (associativity, left identity and left inverse) and then it's hard work proving right identity and right inverse, then the trick is to prove the Knuth-Bendix rewrite rules for groups and then check by doing various examples that <code>simp</code> solves the word problem for free groups.</p>



<a name="220942710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Good%20%22style%22/near/220942710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Good.20.22style.22.html#220942710">(Dec 26 2020 at 00:38)</a>:</h4>
<p><span class="user-mention" data-user-id="319223">@Logan Murphy</span> I will be covering this material in lecture two of my course next term -- and subgroups too</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>