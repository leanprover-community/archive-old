---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html">Functional way to check if a value appears in the image</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253888521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253888521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253888521">(Sep 18 2021 at 19:27)</a>:</h4>
<p>To get some practice with Lean I am trying to write some of the basic definitions of model theory. I have defined a term and I am trying to write a function that returns whether a particular variable occurs in a term. To to this I will need to recursively call the function on the list of terms that follow a function symbol. What would be the most concise functional way to implement something like this with the way I have defined things?</p>
<p>inductive term<br>
| var           : ℕ → term<br>
| cnst          : L.const → term<br>
| func (n : ℕ)  : L.functions n → (fin n → term) → term</p>
<p>/-- If a variable occurs in a term -/<br>
def occurs_in_term : ℕ → term L → bool<br>
| n (var m)        := if n = m then true else false<br>
| _ (cnst c)       := false<br>
| _ (func _ _ t)   := -- TODO: Want to check true for something in range the range of t</p>



<a name="253889637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253889637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253889637">(Sep 18 2021 at 19:49)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="253889736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253889736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253889736">(Sep 18 2021 at 19:50)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="253889898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253889898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253889898">(Sep 18 2021 at 19:53)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kd">def</span> <span class="n">sig</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">sig</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">sig.const</span> <span class="o">:</span> <span class="n">sig</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kd">def</span> <span class="n">sig.functions</span> <span class="o">:</span> <span class="n">sig</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">inductive</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">var</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">cnst</span> <span class="o">:</span> <span class="n">L.const</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">func</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">L.functions</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">term</span><span class="o">)</span> <span class="bp">→</span> <span class="n">term</span>
<span class="kn">open</span> <span class="n">term</span>

<span class="sd">/-- If a variable occurs in a term -/</span>
<span class="kd">def</span> <span class="n">occurs_in_term</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">var</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">m</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span> <span class="n">false</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnst</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">false</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">func</span> <span class="n">n</span> <span class="n">_</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="n">to_bool</span> <span class="bp">$</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">occurs_in_term</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>



<a name="253889964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253889964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253889964">(Sep 18 2021 at 19:54)</a>:</h4>
<p><span class="user-mention" data-user-id="438167">@Nick Pilotti</span></p>



<a name="253891900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253891900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253891900">(Sep 18 2021 at 20:30)</a>:</h4>
<p>(deleted)</p>



<a name="253891961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253891961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253891961">(Sep 18 2021 at 20:31)</a>:</h4>
<p>Thank you, can you explain the meaning of <code>to_bool $</code> ?</p>



<a name="253892365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892365">(Sep 18 2021 at 20:40)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">data.nat.basic</span>

<span class="sd">/-- Def 1.2.1. -/</span>
<span class="kd">structure</span> <span class="n">language</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">functions</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span> <span class="o">(</span><span class="n">relations</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">language</span>

<span class="sd">/-- The type of constants in a given language. -/</span>
<span class="kd">@[nolint has_inhabited_instance]</span> <span class="kd">def</span> <span class="n">const</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span> <span class="o">:=</span> <span class="n">L.functions</span> <span class="mi">0</span>

<span class="sd">/-- The language of number theory -/</span>
<span class="kd">def</span> <span class="n">L_NT</span> <span class="o">:</span> <span class="n">language</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'0'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'S'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'+'</span><span class="o">,</span> <span class="sc">'⬝'</span><span class="o">,</span> <span class="sc">'E'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{},</span>
  <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'&lt;'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{}⟩</span>

<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">func</span> <span class="mi">2</span> <span class="sc">'+'</span> <span class="o">(</span><span class="n">var</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">cnst</span> <span class="sc">'0'</span><span class="o">)</span>
</code></pre></div>



<a name="253892465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892465">(Sep 18 2021 at 20:41)</a>:</h4>
<p>I'm having another problem. Here I am trying to define a term but I get the error :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">func</span> <span class="mi">2</span> <span class="sc">'+'</span>
<span class="n">term</span>
  <span class="sc">'+'</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">char</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">↥</span><span class="o">(</span><span class="bp">?</span><span class="n">m_1.functions</span> <span class="mi">2</span><span class="o">)</span>
</code></pre></div>



<a name="253892467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892467">(Sep 18 2021 at 20:41)</a>:</h4>
<p><code>$</code> is function application with low precedence, so these lines are equivalent:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="o">(</span><span class="n">func</span> <span class="n">n</span> <span class="n">_</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="n">to_bool</span> <span class="bp">$</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">occurs_in_term</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">func</span> <span class="n">n</span> <span class="n">_</span> <span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="n">to_bool</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">occurs_in_term</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">))</span>
</code></pre></div>



<a name="253892544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892544">(Sep 18 2021 at 20:43)</a>:</h4>
<p>Thanks, and <code>to_bool</code> will convert a Prop into a bool I'm assuming? Does Lean compute this by iterating over all of the possible values of i?</p>



<a name="253892754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892754">(Sep 18 2021 at 20:47)</a>:</h4>
<p>Yes. There is a decidability instance that says that if <code>\forall i : fin n, decidable (f i)</code> then <code>decidable (\forall i : fin n, f i)</code>, and it works by iterating over all the elements of <code>fin n</code></p>



<a name="253892763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892763">(Sep 18 2021 at 20:47)</a>:</h4>
<p>the <code>to_bool</code> uses that decidability instance to turn the proposition into a <code>bool</code></p>



<a name="253892834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892834">(Sep 18 2021 at 20:48)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.decidable_forall_fin">docs#nat.decidable_forall_fin</a></p>



<a name="253892929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892929">(Sep 18 2021 at 20:50)</a>:</h4>
<p>Oh ok, I think I can see what decidable means now.</p>



<a name="253892972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892972">(Sep 18 2021 at 20:50)</a>:</h4>
<p>Oops, except this is not correct for the given definition since you are looking for any occurrence; it should use <code>\exists</code> instead of <code>\forall</code></p>



<a name="253892987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892987">(Sep 18 2021 at 20:50)</a>:</h4>
<p>So in the forall case it will be decidable only if the domain in finite?</p>



<a name="253892991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892991">(Sep 18 2021 at 20:50)</a>:</h4>
<p>there is another decidability instance for that, of course</p>



<a name="253892992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892992">(Sep 18 2021 at 20:50)</a>:</h4>
<p>Yes</p>



<a name="253892997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253892997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253892997">(Sep 18 2021 at 20:50)</a>:</h4>
<p>Good catch thanks</p>



<a name="253893023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893023">(Sep 18 2021 at 20:51)</a>:</h4>
<p>Well in some cases it might be decidable for other reasons, for example divisibility of integers is defined using an unbounded existential but it is still decidable because of the theorem <code>a | b &lt;-&gt; b % a = 0</code></p>



<a name="253893099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893099">(Sep 18 2021 at 20:52)</a>:</h4>
<p>But decidable essentially means that is an instance somewhere which defines an algorithm to computer the answer? Something like that?</p>



<a name="253893110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893110">(Sep 18 2021 at 20:52)</a>:</h4>
<p>So in the case of divisibility the algorithm would be division with remainder</p>



<a name="253893133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893133">(Sep 18 2021 at 20:53)</a>:</h4>
<p>And forall would be to iterate through all the finite possibilities</p>



<a name="253893137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893137">(Sep 18 2021 at 20:53)</a>:</h4>
<p>right</p>



<a name="253893194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893194">(Sep 18 2021 at 20:54)</a>:</h4>
<p>Thanks for the help, I knew there had to be an elegant way to do this without having to write a for loop</p>



<a name="253893221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893221">(Sep 18 2021 at 20:55)</a>:</h4>
<p>Can I get help on why this gives a type error as well?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Def 1.2.1. -/</span>
<span class="kd">structure</span> <span class="n">language</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">functions</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span> <span class="o">(</span><span class="n">relations</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">language</span>

<span class="sd">/-- The type of constants in a given language. -/</span>
<span class="kd">@[nolint has_inhabited_instance]</span> <span class="kd">def</span> <span class="n">const</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span> <span class="o">:=</span> <span class="n">L.functions</span> <span class="mi">0</span>

<span class="sd">/-- The language of number theory -/</span>
<span class="kd">def</span> <span class="n">L_NT</span> <span class="o">:</span> <span class="n">language</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'0'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'S'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'+'</span><span class="o">,</span> <span class="sc">'⬝'</span><span class="o">,</span> <span class="sc">'E'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{},</span>
  <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'&lt;'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{}⟩</span>

<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">func</span> <span class="mi">2</span> <span class="sc">'+'</span> <span class="o">(</span><span class="n">var</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">cnst</span> <span class="sc">'0'</span><span class="o">)</span>
</code></pre></div>



<a name="253893242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893242">(Sep 18 2021 at 20:55)</a>:</h4>
<p>to be fair, there is a for loop (ish) involved, it's just buried in a library</p>



<a name="253893292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893292">(Sep 18 2021 at 20:56)</a>:</h4>
<p>right, I just didn't have to write one myself</p>



<a name="253893300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893300">(Sep 18 2021 at 20:56)</a>:</h4>
<p>again, see <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="253893317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893317">(Sep 18 2021 at 20:57)</a>:</h4>
<p>sorry</p>



<a name="253893325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893325">(Sep 18 2021 at 20:57)</a>:</h4>
<p>your example is not self contained so I don't know what error you are talking about</p>



<a name="253893339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893339">(Sep 18 2021 at 20:57)</a>:</h4>
<p>yes thank you, i forgot to include the definition of term</p>



<a name="253893405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893405">(Sep 18 2021 at 20:58)</a>:</h4>
<p>The definition of <code>L_NT</code> is not going to compute very well, which means that you probably won't be able to write things like <code>cnst '0'</code></p>



<a name="253893436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893436">(Sep 18 2021 at 20:59)</a>:</h4>
<p>if I had to guess I think you should be writing <code>cnst \&lt;'0', _\&gt;</code> where <code>_</code> is a proof that <code>'0' \in L_NT 0</code></p>



<a name="253893450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893450">(Sep 18 2021 at 20:59)</a>:</h4>
<p>which is probably <code>by simp [L_NT]</code></p>



<a name="253893458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893458">(Sep 18 2021 at 20:59)</a>:</h4>
<p>same for the <code>'+'</code></p>



<a name="253893559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893559">(Sep 18 2021 at 21:00)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kn">namespace</span> <span class="n">first_order</span>

<span class="kd">structure</span> <span class="n">language</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">functions</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span> <span class="o">(</span><span class="n">relations</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">char</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">language</span>

<span class="sd">/-- The type of constants in a given language. -/</span>
<span class="kd">def</span> <span class="n">const</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span> <span class="o">:=</span> <span class="n">L.functions</span> <span class="mi">0</span>

<span class="sd">/-- The language of number theory -/</span>
<span class="kd">def</span> <span class="n">L_NT</span> <span class="o">:</span> <span class="n">language</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'0'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'S'</span><span class="o">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'+'</span><span class="o">,</span> <span class="sc">'⬝'</span><span class="o">,</span> <span class="sc">'E'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{},</span>
  <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">if</span>      <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="k">then</span> <span class="o">{</span><span class="sc">'&lt;'</span><span class="o">}</span>
  <span class="k">else</span> <span class="o">{}⟩</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span>

<span class="sd">/-- Def 1.3.1. -/</span>
<span class="kd">inductive</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">var</span>           <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">cnst</span>          <span class="o">:</span> <span class="n">L.const</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">func</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>  <span class="o">:</span> <span class="n">L.functions</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">term</span><span class="o">)</span> <span class="bp">→</span> <span class="n">term</span>

<span class="kn">open</span> <span class="n">term</span>

<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">cnst</span> <span class="sc">'0'</span>

<span class="kd">end</span> <span class="n">language</span>

<span class="kd">end</span> <span class="n">first_order</span>
</code></pre></div>



<a name="253893750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893750">(Sep 18 2021 at 21:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="bp">...</span>
<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span>
<span class="n">func</span> <span class="mi">2</span> <span class="o">⟨</span><span class="sc">'+'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">]⟩</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">var</span> <span class="mi">0</span><span class="o">,</span> <span class="n">cnst</span> <span class="o">⟨</span><span class="sc">'0'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">,</span> <span class="n">const</span><span class="o">]⟩]</span>
</code></pre></div>



<a name="253893784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893784">(Sep 18 2021 at 21:04)</a>:</h4>
<p>If I were you I would define <code>zero</code>, <code>add</code> etc to make this nicer</p>



<a name="253893911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893911">(Sep 18 2021 at 21:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">cnst</span> <span class="o">⟨</span><span class="sc">'0'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">,</span> <span class="n">const</span><span class="o">]⟩⟩</span>
<span class="kd">def</span> <span class="n">succ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">func</span> <span class="mi">1</span> <span class="o">⟨</span><span class="sc">'S'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">]⟩</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">]</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="mi">2</span> <span class="o">⟨</span><span class="sc">'+'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">]⟩</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="mi">2</span> <span class="o">⟨</span><span class="sc">'⬝'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">]⟩</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="mi">2</span> <span class="o">⟨</span><span class="sc">'E'</span><span class="o">,</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">]⟩</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>

<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">var</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span>
</code></pre></div>



<a name="253893971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893971">(Sep 18 2021 at 21:08)</a>:</h4>
<p>I see, thank you</p>



<a name="253893981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253893981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253893981">(Sep 18 2021 at 21:08)</a>:</h4>
<p>What purpose does norm_num serve here?</p>



<a name="253894002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894002">(Sep 18 2021 at 21:09)</a>:</h4>
<p>It is like <code>simp</code>, but it also knows how to solve equations involving numerals like <code>2 = 0 &lt;-&gt; false</code> which come up when reducing your if statement definition</p>



<a name="253894019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894019">(Sep 18 2021 at 21:09)</a>:</h4>
<p>If you used a <code>match</code> then I think <code>simp</code> alone would get it</p>



<a name="253894068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894068">(Sep 18 2021 at 21:10)</a>:</h4>
<p>Ok got it</p>



<a name="253894089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894089">(Sep 18 2021 at 21:10)</a>:</h4>
<p>So basically what lean expects is an element and then a proof that element is of the correct type?</p>



<a name="253894101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894101">(Sep 18 2021 at 21:11)</a>:</h4>
<p>Is that what the notation  <code>↥</code> means?</p>



<a name="253894121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894121">(Sep 18 2021 at 21:11)</a>:</h4>
<p>This happens because when you wrote <code>L.const → term</code> , that doesn't immediately typecheck because <code>L.const</code> is a set, not a type</p>



<a name="253894127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894127">(Sep 18 2021 at 21:11)</a>:</h4>
<p>it gets promoted ("coerced") to a type using <code>subtype</code></p>



<a name="253894169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894169">(Sep 18 2021 at 21:12)</a>:</h4>
<p>which is the type of pairs of an element <code>x</code> and a proof <code>h : x \in A</code></p>



<a name="253894205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894205">(Sep 18 2021 at 21:13)</a>:</h4>
<p>So is a <code>set char</code> really just a subtype of char?</p>



<a name="253894272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894272">(Sep 18 2021 at 21:14)</a>:</h4>
<p>it is the collection of all predicates on <code>char</code></p>



<a name="253894275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894275">(Sep 18 2021 at 21:14)</a>:</h4>
<p>like the powerset</p>



<a name="253894280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894280">(Sep 18 2021 at 21:14)</a>:</h4>
<p>er, that's the type itself</p>



<a name="253894286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894286">(Sep 18 2021 at 21:14)</a>:</h4>
<p>an element of the type is some particular predicate on <code>char</code></p>



<a name="253894294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894294">(Sep 18 2021 at 21:14)</a>:</h4>
<p>and to apply the predicate on a particular element you write <code>x \in A</code></p>



<a name="253894334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894334">(Sep 18 2021 at 21:15)</a>:</h4>
<p>so you could have also written that inductive without any coercions like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">var</span>           <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">cnst</span>          <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">L.const</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">func</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">L.functions</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">term</span><span class="o">)</span> <span class="bp">→</span> <span class="n">term</span>
</code></pre></div>



<a name="253894387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894387">(Sep 18 2021 at 21:16)</a>:</h4>
<p>and now <code>cnst</code> takes the arguments separately rather than as a pair</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">cnst</span> <span class="sc">'0'</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">L_NT</span><span class="o">,</span> <span class="n">const</span><span class="o">])⟩</span>
</code></pre></div>



<a name="253894429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894429">(Sep 18 2021 at 21:17)</a>:</h4>
<p>I see</p>



<a name="253894431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894431">(Sep 18 2021 at 21:17)</a>:</h4>
<p>The more leanish way to do this would be to just have a bespoke inductive type family for <code>L_NT.functions</code></p>



<a name="253894481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894481">(Sep 18 2021 at 21:18)</a>:</h4>
<p>Can you show an example of that?</p>



<a name="253894525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894525">(Sep 18 2021 at 21:19)</a>:</h4>
<p>I see now</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
</code></pre></div>



<a name="253894616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894616">(Sep 18 2021 at 21:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>

<span class="kn">namespace</span> <span class="n">first_order</span>

<span class="kd">structure</span> <span class="n">language</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">functions</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">relations</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">language</span>

<span class="sd">/-- The type of constants in a given language. -/</span>
<span class="kd">def</span> <span class="n">const</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span> <span class="o">:=</span> <span class="n">L.functions</span> <span class="mi">0</span>

<span class="kd">inductive</span> <span class="n">L_NT_func</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">L_NT_func</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">L_NT_func</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="n">add</span> <span class="o">:</span> <span class="n">L_NT_func</span> <span class="mi">2</span>
<span class="bp">|</span> <span class="n">mul</span> <span class="o">:</span> <span class="n">L_NT_func</span> <span class="mi">2</span>
<span class="bp">|</span> <span class="n">exp</span> <span class="o">:</span> <span class="n">L_NT_func</span> <span class="mi">2</span>

<span class="kd">inductive</span> <span class="n">L_NT_rel</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">lt</span> <span class="o">:</span> <span class="n">L_NT_rel</span> <span class="mi">2</span>

<span class="sd">/-- The language of number theory -/</span>
<span class="kd">def</span> <span class="n">L_NT</span> <span class="o">:</span> <span class="n">language</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="n">L_NT_func</span><span class="o">,</span> <span class="n">L_NT_rel</span><span class="o">⟩</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">)</span>

<span class="sd">/-- Def 1.3.1. -/</span>
<span class="kd">inductive</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">var</span>           <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">cnst</span>          <span class="o">:</span> <span class="n">L.const</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">func</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>  <span class="o">:</span> <span class="n">L.functions</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">term</span><span class="o">)</span> <span class="bp">→</span> <span class="n">term</span>

<span class="kn">open</span> <span class="n">term</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">cnst</span> <span class="n">L_NT_func.zero</span><span class="o">⟩</span>
<span class="kd">def</span> <span class="n">succ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">func</span> <span class="n">L_NT_func.succ</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">]</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="n">L_NT_func.add</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="n">L_NT_func.mul</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">(</span><span class="n">term</span> <span class="n">L_NT</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">func</span> <span class="n">L_NT_func.exp</span> <span class="bp">!</span><span class="o">[</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">]⟩</span>

<span class="kd">def</span> <span class="n">var</span> <span class="o">:</span> <span class="n">term</span> <span class="n">L_NT</span> <span class="o">:=</span> <span class="n">var</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span>

<span class="kd">end</span> <span class="n">language</span>

<span class="kd">end</span> <span class="n">first_order</span>
</code></pre></div>



<a name="253894727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894727">(Sep 18 2021 at 21:23)</a>:</h4>
<p>That looks nicer, thanks again</p>



<a name="253894730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894730">(Sep 18 2021 at 21:23)</a>:</h4>
<p>By the way, I would also remove the <code>cnst</code> constructor and make it a definition like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">var</span>           <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">term</span>
<span class="bp">|</span> <span class="n">func</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>  <span class="o">:</span> <span class="n">L.functions</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">term</span><span class="o">)</span> <span class="bp">→</span> <span class="n">term</span>

<span class="kd">def</span> <span class="n">term.cnst</span> <span class="o">{</span><span class="n">L</span> <span class="o">:</span> <span class="n">language</span><span class="o">}</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">L.const</span><span class="o">)</span> <span class="o">:</span> <span class="n">L.term</span> <span class="o">:=</span> <span class="n">term.func</span> <span class="n">c</span> <span class="bp">!</span><span class="o">[]</span>
<span class="kn">open</span> <span class="n">term</span>
</code></pre></div>



<a name="253894744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894744">(Sep 18 2021 at 21:23)</a>:</h4>
<p>Otherwise, you will have <code>cnst '0'</code> and <code>func '0' ![]</code> and they are distinct</p>



<a name="253894811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894811">(Sep 18 2021 at 21:24)</a>:</h4>
<p>What does <code>![]</code> mean here?</p>



<a name="253894832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894832">(Sep 18 2021 at 21:25)</a>:</h4>
<p>I'm using the notation from <code>data.matrix.notation</code> which makes it easy to write <code>fin n -&gt; A</code> functions as if they were arrays</p>



<a name="253894841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894841">(Sep 18 2021 at 21:25)</a>:</h4>
<p>I'm using them in add, succ etc as well</p>



<a name="253894926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Functional%20way%20to%20check%20if%20a%20value%20appears%20in%20the%20image/near/253894926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Pilotti <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Functional.20way.20to.20check.20if.20a.20value.20appears.20in.20the.20image.html#253894926">(Sep 18 2021 at 21:27)</a>:</h4>
<p>Ok</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>