---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html">Cases on even/oddness of a nat?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221995467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995467">(Jan 07 2021 at 20:22)</a>:</h4>
<p>I'm trying to formalize the proof given here <a href="https://cs.uwaterloo.ca/~cbruni/videos/Math135SeptDec2015/Lesson01ppplusoneprime.pdf">https://cs.uwaterloo.ca/~cbruni/videos/Math135SeptDec2015/Lesson01ppplusoneprime.pdf</a>, which wants me to inspect whether a nat is even or odd. Besides writing the type of the theorem, I'm not sure how to make progress here.</p>



<a name="221995563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995563">(Jan 07 2021 at 20:22)</a>:</h4>
<p>I've gotten as far as <code>theorem prime_and_prime_succ : ∀ p, prime p → prime (p + 1) → p = 2 := sorry</code></p>



<a name="221995726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995726">(Jan 07 2021 at 20:24)</a>:</h4>
<p>You can start the proof with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">begin</span>
<span class="n">intro</span>  <span class="n">p</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">nat.even_or_odd</span> <span class="n">p</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="221995776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995776">(Jan 07 2021 at 20:24)</a>:</h4>
<p>just what i was looking for, thanks. i can probably get it from there</p>



<a name="221995930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995930">(Jan 07 2021 at 20:25)</a>:</h4>
<p>Ooops, I think you have to <code>import data.nat.parity</code>  too</p>



<a name="221995956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221995956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221995956">(Jan 07 2021 at 20:26)</a>:</h4>
<p>More generally you can use <code>by_cases h : some_prop</code> if you have an arbitrary condition you want to case on</p>



<a name="221996064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996064">(Jan 07 2021 at 20:26)</a>:</h4>
<p>But the lemma above will be more convenient for even/odd</p>



<a name="221996282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996282">(Jan 07 2021 at 20:28)</a>:</h4>
<p>And I misread your goal,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">prime_and_prime_succ</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="n">prime</span> <span class="n">p</span> <span class="bp">→</span> <span class="n">prime</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">p</span> <span class="n">hp</span> <span class="n">hp_succ</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">nat.even_or_odd</span> <span class="n">p</span><span class="o">,</span>
 <span class="kd">end</span>
</code></pre></div>
<p>would be way better!</p>



<a name="221996427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996427">(Jan 07 2021 at 20:29)</a>:</h4>
<p>how could i have found even_or_odd for myself?</p>



<a name="221996669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996669">(Jan 07 2021 at 20:31)</a>:</h4>
<p>I just guessed the name, that requires a little experience with the naming convention though.<br>
You can try searching on <a href="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a> by typing in the top right, I put "even odd" in and it came up as the fourth result or something</p>



<a name="221996723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996723">(Jan 07 2021 at 20:31)</a>:</h4>
<p><a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="221996744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996744">(Jan 07 2021 at 20:31)</a>:</h4>
<p>Or if desperate, <code>example (n : \N) : is_even n \or is_odd n := by library_search</code></p>



<a name="221996886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221996886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221996886">(Jan 07 2021 at 20:32)</a>:</h4>
<p>thanks all!</p>



<a name="221998401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221998401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221998401">(Jan 07 2021 at 20:46)</a>:</h4>
<p>how can i refine </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">hn</span><span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span>
<span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">p</span>
</code></pre></div>
<p>into <code>n = 0</code>?</p>



<a name="221999017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/221999017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#221999017">(Jan 07 2021 at 20:52)</a>:</h4>
<p>got  it  -- <code>rw h at hn</code> and then linarith</p>



<a name="222001691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222001691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222001691">(Jan 07 2021 at 21:13)</a>:</h4>
<p>took me two hours, but i managed to prove it. anyone mind critiquing my solution for style/ergonomics/anything?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">prime_and_prime_succ</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="n">prime</span> <span class="n">p</span> <span class="bp">→</span> <span class="n">prime</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">p</span> <span class="n">hprime</span> <span class="n">hprimesucc</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">even_or_odd</span> <span class="n">p</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">hprime2</span> <span class="o">:=</span> <span class="n">hprime</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hprime</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">hprime_right</span> <span class="n">n</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">n_div_p</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">∣</span> <span class="n">p</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">dvd.intro_left</span> <span class="mi">2</span> <span class="o">(</span><span class="n">eq.symm</span> <span class="n">hn</span><span class="o">)</span>
    <span class="o">},</span>

    <span class="n">cases</span> <span class="n">hprime_right</span> <span class="n">n_div_p</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">linarith</span><span class="o">,</span>
    <span class="o">},</span>

    <span class="k">have</span> <span class="n">p_zero</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">rw</span> <span class="n">h</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">linarith</span><span class="o">,</span>
    <span class="o">},</span>

    <span class="n">by_contradiction</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">not_prime_zero</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">p_zero</span> <span class="n">at</span> <span class="n">hprime2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hprime2</span><span class="o">,</span>
  <span class="o">},</span>

  <span class="k">let</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hprimesucc</span><span class="o">,</span>

  <span class="k">have</span> <span class="n">n_div_succ_p</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">∣</span> <span class="n">succ</span> <span class="n">p</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">refine</span> <span class="n">even_iff_two_dvd.mp</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">even_succ.mpr</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">odd_iff_not_even.mp</span> <span class="n">h2</span><span class="o">,</span>
  <span class="o">},</span>

  <span class="n">specialize</span> <span class="n">hprimesucc_right</span> <span class="mi">2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hprimesucc_right</span> <span class="n">n_div_succ_p</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">by_contradiction</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">linarith</span><span class="o">,</span>
  <span class="o">},</span>

  <span class="k">have</span> <span class="n">n_zero</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">linarith</span><span class="o">,</span>
  <span class="o">},</span>

  <span class="n">rw</span> <span class="n">n_zero</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">not_prime_one</span> <span class="n">_</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">p_one</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">linarith</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="bp">←</span><span class="n">p_one</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hprime</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222001993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222001993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222001993">(Jan 07 2021 at 21:15)</a>:</h4>
<p>in particular i hate <code>let hprime2 := hprime, cases hprime</code> to work around <code>cases</code> destroying my term</p>



<a name="222002921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222002921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222002921">(Jan 07 2021 at 21:23)</a>:</h4>
<p>An easy ergonomics thing to start: you can move your forall before the colon as <code>{p} (hprime : prime p) (hprimesucc : prime (p + 1)) : p = 2</code>, which removes the need for <code>intros</code></p>



<a name="222004518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222004518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222004518">(Jan 07 2021 at 21:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="375678">Sandy Maguire</span> <a href="#narrow/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F/near/222001691">said</a>:</p>
<blockquote>
<p>took me two hours, but i managed to prove it. anyone mind critiquing my solution for style/ergonomics/anything?</p>
</blockquote>
<p>Can you post fully working code? (with all imports and open and etc)</p>



<a name="222004614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222004614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222004614">(Jan 07 2021 at 21:37)</a>:</h4>
<p>oh got it:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.parity</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">nat</span>
</code></pre></div>



<a name="222005289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222005289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222005289">(Jan 07 2021 at 21:42)</a>:</h4>
<p>I would prove this first:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">eq_two_of_prime_and_even</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">even</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hn'</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">symmetry</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">prime_dvd_prime_iff_eq</span> <span class="n">prime_two</span> <span class="n">hn'</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">even_iff_two_dvd.mp</span> <span class="n">hn</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222005717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222005717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222005717">(Jan 07 2021 at 21:46)</a>:</h4>
<p><code>let h2 := h</code> -- you can use <code>have</code> here instead of <code>let</code>, because <code>h</code> is a proof.</p>



<a name="222006842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222006842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222006842">(Jan 07 2021 at 21:55)</a>:</h4>
<p>Here's my first try:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.parity</span>
<span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kd">theorem</span> <span class="n">prime_and_prime_succ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hp'</span> <span class="o">:</span> <span class="n">prime</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">hp.eq_two_or_odd</span> <span class="k">with</span> <span class="n">H</span> <span class="n">H</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">H</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hp'.eq_two_or_odd</span> <span class="k">with</span> <span class="n">H'</span> <span class="n">H'</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">succ_inj'</span> <span class="n">at</span> <span class="n">H'</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">hp.ne_one</span> <span class="n">H'</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">even</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
        <span class="n">rw</span> <span class="bp">←</span> <span class="n">odd_iff</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">H</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span><span class="o">,</span>
        <span class="n">rw</span> <span class="bp">←</span> <span class="n">succ_inj'</span> <span class="n">at</span> <span class="n">hk</span><span class="o">,</span>
        <span class="n">use</span> <span class="o">[</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">hk</span><span class="o">],</span>
      <span class="kd">end</span><span class="o">,</span>
      <span class="n">rw</span> <span class="bp">←</span> <span class="n">not_even_iff</span> <span class="n">at</span> <span class="n">H'</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">H'</span> <span class="n">this</span><span class="o">,</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>Undoubtedly this can be golfed further...</p>



<a name="222007113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007113">(Jan 07 2021 at 21:57)</a>:</h4>
<p>But the proof looks fine, you step forwards showing the stuff in the proof. Here's a shorter proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.parity</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="c1">-- an even prime must be 2</span>
<span class="kd">lemma</span> <span class="n">eq_two_of_prime_and_even</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">even</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hn'</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">symmetry</span><span class="o">,</span>
  <span class="c1">-- goal now 2 = n</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">prime_dvd_prime_iff_eq</span> <span class="n">prime_two</span> <span class="n">hn'</span><span class="o">,</span>
  <span class="c1">-- goal now 2 ∣ n which is easy</span>
  <span class="n">exact</span> <span class="n">even_iff_two_dvd.mp</span> <span class="n">hn</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">prime_and_prime_succ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hprime</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hprimesucc</span> <span class="o">:</span> <span class="n">prime</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">p</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- p is even or odd</span>
  <span class="n">cases</span> <span class="n">even_or_odd</span> <span class="n">p</span> <span class="k">with</span> <span class="n">hp</span> <span class="n">hp</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- if it's even we're done by the previous lemma</span>
    <span class="n">exact</span> <span class="n">eq_two_of_prime_and_even</span> <span class="n">hp</span> <span class="n">hprime</span> <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- odd case can't happen so let's prove a contradiction</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="c1">-- suffices to prove 1 is prime</span>
    <span class="n">apply</span> <span class="n">not_prime_one</span><span class="o">,</span>
    <span class="c1">-- so it suffices to prove p = 1</span>
    <span class="n">convert</span> <span class="n">hprime</span><span class="o">,</span>
    <span class="c1">-- so it suffices to prove p+1 = 2</span>
    <span class="n">apply</span> <span class="n">nat.add_right_cancel</span><span class="o">,</span>
    <span class="c1">-- but p+1 is prime so it suffices to prove it's even</span>
    <span class="n">convert</span> <span class="o">(</span><span class="n">eq_two_of_prime_and_even</span> <span class="n">_</span> <span class="n">hprimesucc</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="c1">-- so it suffices to prove p is isn't even</span>
    <span class="n">rw</span> <span class="n">even_succ</span><span class="o">,</span>
    <span class="c1">-- which we can do because it's odd</span>
    <span class="n">exact</span> <span class="n">odd_iff_not_even.mp</span> <span class="n">hp</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222007273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007273">(Jan 07 2021 at 21:58)</a>:</h4>
<p>Of course I'm cheating by not formalising the proof you showed, but a shorter proof.</p>



<a name="222007369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007369">(Jan 07 2021 at 21:59)</a>:</h4>
<p>i'll grok my way through these tomorrow. they're SIGNIFICANTLY shorter!</p>



<a name="222007509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007509">(Jan 07 2021 at 22:00)</a>:</h4>
<p>i'd heard great things about this community but never imagined it'd be THIS helpful &lt;3</p>



<a name="222007535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007535">(Jan 07 2021 at 22:00)</a>:</h4>
<p>Kevin's is nicer because he extracts a lemma that'd be reasonable to PR to mathlib.</p>



<a name="222007908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007908">(Jan 07 2021 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> i just watched your talk on the future of mathematics, and it was wildly inspiring. thanks for giving it!</p>



<a name="222007947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222007947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222007947">(Jan 07 2021 at 22:03)</a>:</h4>
<p>Great! Now go formalise a bunch more stuff :-)</p>



<a name="222052922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cases%20on%20even/oddness%20of%20a%20nat%3F/near/222052922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cases.20on.20even.2Foddness.20of.20a.20nat.3F.html#222052922">(Jan 08 2021 at 09:44)</a>:</h4>
<p>Alternative approach to Kevin's lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">data.nat.parity</span>
<span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kd">lemma</span> <span class="n">eq_two_of_prime_and_even</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">even</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hn'</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">odd_iff_not_even</span><span class="o">,</span> <span class="n">odd_iff</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">hn'.eq_two_or_odd.resolve_left</span> <span class="n">hn</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>