---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Missing.20'noncomputable'.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html">Missing 'noncomputable'</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="277835399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277835399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277835399">(Apr 05 2022 at 07:01)</a>:</h4>
<p>Still working on re-implementing the natural numbers for my edification. My near-clone of mathlib's <code>decidable_le</code> complains </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">missing</span> <span class="bp">'</span><span class="kd">noncomputable</span><span class="bp">'</span> <span class="n">modifier</span><span class="o">,</span> <span class="kd">definition</span> <span class="bp">'</span><span class="n">peano.nat.decidable_le'</span> <span class="n">is</span> <span class="n">not</span> <span class="n">compiled</span>
</code></pre></div>



<a name="277835541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277835541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277835541">(Apr 05 2022 at 07:03)</a>:</h4>
<p>(I realize I'm making a habit of not giving sufficient <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>'s, sorry  -_-. In my defense, this time I think it would involve copying a <em>lot</em> of my code over, since the whole point is that all the proofs have to actually be valid to a constructivist? Or can I in fact just fill in some theorems with 'sorry's and put that in?)</p>



<a name="277835765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277835765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277835765">(Apr 05 2022 at 07:06)</a>:</h4>
<p>... actually, judging from the other error messages, should this be a problem local to the proof/algorithm?</p>



<a name="277835778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277835778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277835778">(Apr 05 2022 at 07:06)</a>:</h4>
<p>since it doesn't say "depends on <code>&lt;some other proof&gt;</code>"</p>



<a name="277836385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836385">(Apr 05 2022 at 07:14)</a>:</h4>
<p>This is very hard to debug. It might just be that you haven't finished writing your definition.</p>



<a name="277836608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836608">(Apr 05 2022 at 07:17)</a>:</h4>
<p>that's... unfortunate. Um. Here's the local bit: if this doesn't look obviously wrong, I guess I'll just give up for now and come back after I finish more of the file?</p>



<a name="277836613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836613">(Apr 05 2022 at 07:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kd">lemma</span> <span class="n">decidable_le</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
  <span class="bp">|</span> <span class="n">nat.zero</span>      <span class="n">b</span>  <span class="o">:=</span> <span class="n">is_true</span> <span class="n">zero_le</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">S</span> <span class="n">a</span><span class="o">)</span>  <span class="n">nat.zero</span>  <span class="o">:=</span> <span class="n">is_false</span> <span class="o">(</span><span class="bp">@</span><span class="n">succ_not_le_zero</span> <span class="n">a</span><span class="o">)</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">S</span> <span class="n">a</span><span class="o">)</span>  <span class="o">(</span><span class="n">S</span> <span class="n">b</span><span class="o">)</span>     <span class="o">:=</span>
    <span class="k">match</span> <span class="n">decidable_le</span> <span class="n">a</span> <span class="n">b</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">is_true</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">is_true</span> <span class="o">(</span><span class="n">succ_le_succ.mp</span> <span class="n">h</span><span class="o">)</span>
    <span class="bp">|</span> <span class="n">is_false</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">is_false</span> <span class="o">(</span><span class="kd">by</span> <span class="n">rwa</span> <span class="n">succ_le_succ</span> <span class="n">at</span> <span class="n">h</span><span class="o">)</span>
    <span class="kd">end</span>
</code></pre></div>



<a name="277836676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836676">(Apr 05 2022 at 07:18)</a>:</h4>
<p>thanks anyway</p>



<a name="277836725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836725">(Apr 05 2022 at 07:18)</a>:</h4>
<p>Doesn't look obviously wrong <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="277836735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836735">(Apr 05 2022 at 07:18)</a>:</h4>
<p>mk~</p>



<a name="277836746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836746">(Apr 05 2022 at 07:19)</a>:</h4>
<p>I'll come back and bug people later I guess lol</p>



<a name="277836758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277836758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277836758">(Apr 05 2022 at 07:19)</a>:</h4>
<p>and see if I can somehow pull an MWE out of this</p>



<a name="277838645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277838645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277838645">(Apr 05 2022 at 07:40)</a>:</h4>
<p>Yes you can sorry other proofs and definitions in a mwe</p>



<a name="277839619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277839619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277839619">(Apr 05 2022 at 07:51)</a>:</h4>
<p>Well sure, but that's not the question; the question is, if the bug is specifically "I'm getting noncomputable/cannot be compiled bugs, is it still legitimate to leave <code>sorry</code>'s lying around?"</p>



<a name="277840110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840110">(Apr 05 2022 at 07:57)</a>:</h4>
<p><code>lemma</code>s don't have code generation, so they often cause this kind of problem. Don't use <code>lemma</code> for data</p>



<a name="277840267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840267">(Apr 05 2022 at 07:58)</a>:</h4>
<p>... oh.</p>



<a name="277840269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840269">(Apr 05 2022 at 07:58)</a>:</h4>
<p>well.</p>



<a name="277840273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840273">(Apr 05 2022 at 07:58)</a>:</h4>
<p>that's good to know.</p>



<a name="277840274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840274">(Apr 05 2022 at 07:58)</a>:</h4>
<p>also bizarre, but okay</p>



<a name="277840316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840316">(Apr 05 2022 at 07:59)</a>:</h4>
<p>I believe the suggestion to use <code>noncomputable lemma</code> is due to <span class="user-mention" data-user-id="306601">@Kyle Miller</span> 's recent change</p>



<a name="277840324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840324">(Apr 05 2022 at 07:59)</a>:</h4>
<p>that fixed it. thanks!</p>



<a name="277840325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840325">(Apr 05 2022 at 07:59)</a>:</h4>
<p>but <code>def</code> should just work here</p>



<a name="277840340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840340">(Apr 05 2022 at 07:59)</a>:</h4>
<p>that fixed it. thanks!</p>



<a name="277840370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840370">(Apr 05 2022 at 08:00)</a>:</h4>
<p>that fixed it. thanks!</p>



<a name="277840686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277840686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277840686">(Apr 05 2022 at 08:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20'noncomputable'/near/277840274">said</a>:</p>
<blockquote>
<p>also bizarre, but okay</p>
</blockquote>
<p>It's not really bizarre no, lemmas are proofs and proofs are irrelevant so they can just be ignored for code generation. Furthermore lemmas are usually declared using tactics and the stuff that tactics spits out is not meant to be turned into executable code if you wanted it to, the job of tactics is to generate a term of the desired type,not to do that in a pretty or efficient way.</p>



<a name="277841186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277841186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277841186">(Apr 05 2022 at 08:08)</a>:</h4>
<p>tactics usually try to be efficient, although they sometimes do no-op steps on purpose</p>



<a name="277841450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277841450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277841450">(Apr 05 2022 at 08:11)</a>:</h4>
<p>Eh bad wording, I meant their job is not to generate a term of the type that can be computed in an efficient way</p>



<a name="277897901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277897901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277897901">(Apr 05 2022 at 15:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20'noncomputable'/near/277839619">said</a>:</p>
<blockquote>
<p>Well sure, but that's not the question; the question is, if the bug is specifically "I'm getting noncomputable/cannot be compiled bugs, is it still legitimate to leave <code>sorry</code>'s lying around?"</p>
</blockquote>
<p>Pretty much anything that reproduces the behavior you're observing is legitimate for a mwe.</p>



<a name="277899027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20%27noncomputable%27/near/277899027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20'noncomputable'.html#277899027">(Apr 05 2022 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20'noncomputable'/near/277840274">said</a>:</p>
<blockquote>
<p>also bizarre, but okay</p>
</blockquote>
<p>The error message could admittedly be better by giving a reason:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">missing</span> <span class="bp">'</span><span class="kd">noncomputable</span><span class="bp">'</span> <span class="n">modifier</span><span class="o">,</span> <span class="kd">definition</span> <span class="bp">'</span><span class="n">peano.nat.decidable_le'</span> <span class="n">is</span> <span class="n">not</span> <span class="n">compiled</span> <span class="n">since</span> <span class="n">it</span> <span class="n">is</span> <span class="n">a</span> <span class="kd">theorem</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>