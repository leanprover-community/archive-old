---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/letter.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html">letter</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206908928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206908928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206908928">(Aug 14 2020 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="253355">@Iocta</span> <code>rfl</code> doesn't mean "it's obvious", it means "equality is reflexive" ie it proves X=X. Your goal is something like <code>true or P or Q or R</code></p>



<a name="206909481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206909481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206909481">(Aug 14 2020 at 08:48)</a>:</h4>
<p>Got most of the way through it. How to fill the  <code>sorry</code>?</p>
<div class="codehilite"><pre><span></span><code>    <span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">indicator_function</span>
    <span class="kn">import</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">set_integral</span>
    <span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">specific_limits</span>
    <span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
    <span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>
    <span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">geom_sum</span>


    <span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">topological_space</span> <span class="n">measure_theory</span>

    <span class="kn">section</span> <span class="n">e2_7_1</span>


    <span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">decidable_eq</span><span class="o">]</span>
    <span class="kn">inductive</span> <span class="n">letter</span> <span class="o">:</span> <span class="kt">Type</span>
    <span class="bp">|</span> <span class="n">a</span> <span class="o">:</span> <span class="n">letter</span>
    <span class="bp">|</span> <span class="n">b</span> <span class="o">:</span> <span class="n">letter</span>
    <span class="bp">|</span> <span class="n">c</span> <span class="o">:</span> <span class="n">letter</span>
    <span class="bp">|</span> <span class="n">d</span> <span class="o">:</span> <span class="n">letter</span>

    <span class="kn">namespace</span> <span class="n">letter</span>



    <span class="kn">instance</span> <span class="n">fintype</span><span class="o">:</span> <span class="n">fintype</span> <span class="n">letter</span> <span class="o">:=</span>
    <span class="o">{</span><span class="n">elems</span> <span class="o">:=</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">},</span> <span class="n">complete</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span><span class="o">}</span>

    <span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
    <span class="kn">lemma</span> <span class="n">univ_letter</span> <span class="o">:</span> <span class="bp">@</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="n">letter</span> <span class="n">letter</span><span class="bp">.</span><span class="n">fintype</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">}</span> <span class="o">:=</span> <span class="n">rfl</span>






    <span class="n">def</span> <span class="n">f1</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">letter</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{{},</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">},</span> <span class="o">{</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">},</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">,</span><span class="n">c</span><span class="o">,</span><span class="n">d</span><span class="o">}}</span>

    <span class="kn">example</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">letter</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="n">is_measurable</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">f1</span><span class="o">),</span>
    <span class="n">is_measurable_empty</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
        <span class="n">rw</span> <span class="n">f1</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">mem_insert_iff</span><span class="o">,</span>
        <span class="n">left</span><span class="o">,</span>
        <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">],</span>
    <span class="o">},</span>
    <span class="n">is_measurable_compl</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
        <span class="n">intros</span> <span class="n">s</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
        <span class="o">{</span>
            <span class="n">rw</span> <span class="n">f1</span><span class="o">,</span>
            <span class="n">simp</span><span class="o">,</span>
            <span class="n">right</span><span class="o">,</span>
            <span class="n">right</span><span class="o">,</span>
            <span class="n">right</span><span class="o">,</span>
            <span class="n">simp</span> <span class="bp">*</span><span class="o">,</span>
            <span class="n">ext1</span><span class="o">,</span>
            <span class="n">split</span><span class="o">,</span>
            <span class="o">{</span>
                <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
                <span class="n">unfold</span> <span class="n">univ</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
                <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
            <span class="o">},</span>
            <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
            <span class="n">finish</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="o">{</span>
            <span class="n">rw</span> <span class="n">f1</span><span class="o">,</span>
            <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
            <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
            <span class="o">{</span>
              <span class="n">right</span><span class="o">,</span>
              <span class="n">right</span><span class="o">,</span>
              <span class="n">left</span><span class="o">,</span>
              <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                <span class="n">ext1</span><span class="o">,</span>
                <span class="n">split</span><span class="o">,</span>
                <span class="o">{</span>
                    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
                    <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
                    <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
                <span class="o">},</span>
                <span class="o">{</span>
                    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
                    <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
                <span class="o">},</span>
            <span class="o">},</span>
            <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
            <span class="o">{</span>
                <span class="n">right</span><span class="o">,</span>
                <span class="n">left</span><span class="o">,</span>
                <span class="n">ext1</span><span class="o">,</span>
                <span class="n">split</span><span class="o">,</span>
                <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>   <span class="o">},</span>
                <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
                    <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
                <span class="o">},</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="n">left</span><span class="o">,</span>
                <span class="n">ext1</span><span class="o">,</span>
                <span class="n">split</span><span class="o">,</span>
                <span class="o">{</span>
                    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
                    <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
                <span class="o">},</span>
                <span class="o">{</span>
                    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
                    <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">finish</span><span class="o">,</span>
                <span class="o">}</span>
            <span class="o">},</span>

        <span class="o">},</span>
    <span class="o">},</span>
    <span class="n">is_measurable_Union</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
        <span class="n">intros</span> <span class="n">s</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">f1</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
        <span class="c">/-</span><span class="cm"></span>
<span class="cm">s : ℕ → set letter,</span>
<span class="cm">h : ∀ (i : ℕ), s i ∈ {∅, {a, b}, {c, d}, {a, b, c, d}}</span>
<span class="cm">⊢ Union s ∈ {∅, {a, b}, {c, d}, {a, b, c, d}}</span>
<span class="cm">-/</span>

        <span class="n">sorry</span><span class="o">,</span>


    <span class="o">}</span>

    <span class="o">}</span>

    <span class="kn">end</span> <span class="n">letter</span>


    <span class="kn">end</span> <span class="n">e2_7_1</span>
</code></pre></div>



<a name="206909746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206909746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206909746">(Aug 14 2020 at 08:53)</a>:</h4>
<p>I'm never sure when I need to be thinking about how to do the math vs knowing about tactics/lemmas in mathlib. I guess this will come with experience.</p>



<a name="206909836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206909836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206909836">(Aug 14 2020 at 08:55)</a>:</h4>
<p><code>suggest</code> or <code>library_search</code> might help here</p>



<a name="206909952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206909952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206909952">(Aug 14 2020 at 08:57)</a>:</h4>
<p>Those don't give me anything; for some reason my computer seems to be struggling with this example, maybe they timed out sooner than they shouldve</p>



<a name="206910867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206910867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206910867">(Aug 14 2020 at 09:12)</a>:</h4>
<p>What would your maths argument be? Maybe write it out here in gory detail. A possible hint would be to look at the <code>fin_cases</code> tactic, but you'll need to do some preparatory work before it's useful.</p>



<a name="206912663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206912663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206912663">(Aug 14 2020 at 09:38)</a>:</h4>
<p>Yeah I echo Scott's comment. You might think this is "obvious" -- but what is the actual proof?</p>



<a name="206912814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206912814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206912814">(Aug 14 2020 at 09:40)</a>:</h4>
<p>Ooh, I see. So I guess we have to iterate over every possible union, and check that it's valid? That would explain why it isn't just a <code>library_search</code> away.</p>



<a name="206914098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206914098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206914098">(Aug 14 2020 at 09:59)</a>:</h4>
<p>And these are arbitrary possibly infinite unions</p>



<a name="206915334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206915334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206915334">(Aug 14 2020 at 10:18)</a>:</h4>
<p>Since each <code>s i</code> lives in some finite set, you might make an argument about the image of <code>s</code> (which is some set of sets of letters).</p>



<a name="206915336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206915336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206915336">(Aug 14 2020 at 10:18)</a>:</h4>
<p>Then do a case bash</p>



<a name="206915347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/206915347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#206915347">(Aug 14 2020 at 10:18)</a>:</h4>
<p>(possibly with <code>fin_cases</code>)</p>



<a name="207001669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207001669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207001669">(Aug 15 2020 at 02:47)</a>:</h4>
<p>I think this is in the direction described, but dunno how to fill it.</p>
<div class="codehilite"><pre><span></span><code> <span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">letter</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">f1</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="err">⋃</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">f1</span> <span class="o">:=</span>
 <span class="k">begin</span>
    <span class="n">intros</span> <span class="n">f</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">f1</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">im_f</span> <span class="o">:</span> <span class="o">(</span><span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">letter</span><span class="o">))</span> <span class="o">:=</span> <span class="o">{</span><span class="n">q</span> <span class="o">:</span> <span class="n">set</span> <span class="n">letter</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">i</span><span class="o">},</span>
    <span class="k">let</span> <span class="n">sets</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">letter</span><span class="o">)</span> <span class="o">:=</span>  <span class="o">{</span><span class="err">∅</span><span class="o">,</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">},</span> <span class="o">{</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">},</span> <span class="o">{</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">}},</span>
    <span class="k">have</span> <span class="n">imf2sets</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="n">letter</span><span class="o">),</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">im_f</span> <span class="bp">→</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">sets</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">hs</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
        <span class="n">specialize</span> <span class="n">h</span> <span class="n">i</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">hi</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">suffices</span><span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">sets</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">this</span><span class="o">,</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">uclosed_imf</span><span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">im_f</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">sorry</span><span class="o">,</span>

    <span class="o">},</span>
    <span class="n">exact</span> <span class="n">imf2sets</span> <span class="o">(</span><span class="err">⋃</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="n">uclosed_imf</span><span class="o">,</span>
</code></pre></div>



<a name="207007214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007214">(Aug 15 2020 at 05:47)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">structure</span> <span class="n">alg</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="err">Ω</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
</code></pre></div>


<p>this restricts the last line of <code>measurable_space</code> to only finite unions. Is that the right expression for closed finite unions?</p>



<a name="207007419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007419">(Aug 15 2020 at 05:56)</a>:</h4>
<p>Your <code>closed_countable_unions</code> seems to be about finite unions, not countable ones?</p>



<a name="207007448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007448">(Aug 15 2020 at 05:56)</a>:</h4>
<p>heh yeah that's what I meant</p>



<a name="207007502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007502">(Aug 15 2020 at 05:58)</a>:</h4>
<p>[edited it to avoid confusion]</p>



<a name="207007563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007563">(Aug 15 2020 at 06:00)</a>:</h4>
<p>If you only care about finite unions, then I think the statement can be simplified to <code>union</code> (small u) of two sets</p>



<a name="207007680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207007680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207007680">(Aug 15 2020 at 06:04)</a>:</h4>
<p>oh that sounds true</p>



<a name="207011071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011071">(Aug 15 2020 at 08:11)</a>:</h4>
<p>How to interpret the definition of <code>hr</code>?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>

<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span> <span class="o">))</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">a</span> <span class="err">∩</span> <span class="n">b</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">σ</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">λ</span><span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span><span class="o">),</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">r</span> <span class="n">hr</span><span class="o">,</span>
<span class="c1">-- α: Type u</span>
<span class="c1">-- s: set (set α)</span>
<span class="c1">-- ab: set α</span>
<span class="c1">-- ha: a ∈ s</span>
<span class="c1">-- hb: b ∈ s</span>
<span class="c1">-- h: a ∩ bᶜ ∈ s</span>
<span class="c1">-- r: set α</span>
<span class="c1">-- hr: r ∈ λ (x : set α), x ∈ s</span>
<span class="c1">-- ⊢ rᶜ ∈ λ (x : set α), x ∈ s</span>

  <span class="o">},</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</code></pre></div>



<a name="207011117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011117">(Aug 15 2020 at 08:12)</a>:</h4>
<p><code>set X</code> is implemented as <code>X \r Prop</code></p>



<a name="207011118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011118">(Aug 15 2020 at 08:12)</a>:</h4>
<p>is that "proof that r is in the set of functions from sets x of alpha to proof that x is in s"?</p>



<a name="207011124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011124">(Aug 15 2020 at 08:12)</a>:</h4>
<p>so <code>\lambda x : x \in s</code> is really <code>{ x | x \in s }</code></p>



<a name="207011126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011126">(Aug 15 2020 at 08:12)</a>:</h4>
<p>so <code>hr</code> is really saying <code>r \in s</code></p>



<a name="207011135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011135">(Aug 15 2020 at 08:13)</a>:</h4>
<p>that's what happens if you use the <code>X \r Prop</code> implementation to write <code>\sigma</code></p>



<a name="207011137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011137">(Aug 15 2020 at 08:13)</a>:</h4>
<p><code>σ := (λx, x ∈ s)</code></p>



<a name="207011141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011141">(Aug 15 2020 at 08:13)</a>:</h4>
<p>instead of <code>σ := { x | x ∈ s }</code></p>



<a name="207011184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011184">(Aug 15 2020 at 08:14)</a>:</h4>
<p>I don't think your hypothesis is saying what you want it to say either</p>



<a name="207011190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011190">(Aug 15 2020 at 08:14)</a>:</h4>
<p>you want to say that for all <code>a b \in s</code> we have <code>a \cap b\^c \in s</code></p>



<a name="207011191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011191">(Aug 15 2020 at 08:14)</a>:</h4>
<p>I have a feeling there's something wrong with the quantifiers</p>



<a name="207011193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011193">(Aug 15 2020 at 08:14)</a>:</h4>
<p>not just for a specific <code>a</code> and <code>b</code></p>



<a name="207011194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011194">(Aug 15 2020 at 08:14)</a>:</h4>
<p>yeah exactly</p>



<a name="207011203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011203">(Aug 15 2020 at 08:15)</a>:</h4>
<p>and instead of <code>σ := { x | x ∈ s }</code> you should just write <code>σ := s</code></p>



<a name="207011208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011208">(Aug 15 2020 at 08:15)</a>:</h4>
<p>but I thought I could always put hypotheses on the left of the : instead of \foralling them</p>



<a name="207011212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011212">(Aug 15 2020 at 08:15)</a>:</h4>
<p>you're bracketing wrong</p>



<a name="207011216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011216">(Aug 15 2020 at 08:15)</a>:</h4>
<p>okay I'll start over</p>



<a name="207011218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011218">(Aug 15 2020 at 08:16)</a>:</h4>
<p><code>\forall a, a = a</code> is the same as <code>(a) : a = a</code></p>



<a name="207011260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011260">(Aug 15 2020 at 08:16)</a>:</h4>
<p>but <code>(\forall a, a = a) \to b</code> is not the same as <code>(a) (h : a = a) : b</code></p>



<a name="207011262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207011262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207011262">(Aug 15 2020 at 08:16)</a>:</h4>
<p>that's what it means that forall can be replaced with colon</p>



<a name="207014288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207014288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207014288">(Aug 15 2020 at 09:48)</a>:</h4>
<p>This seems to work.  I have some questions about improvements. Can I use <code>closed_complements</code> in <code>closed_finite_unions</code>? Currently I'm proving the same thing twice. Or can I pull it into an internal lemma to be used in both places?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">indicator_function</span>
<span class="kn">import</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">set_integral</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">specific_limits</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">geom_sum</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">fin_cases</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>


<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">topological_space</span> <span class="n">measure_theory</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>

<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>


<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">compl_iff</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="err">ᶜ</span>  <span class="bp">↔</span> <span class="n">x</span><span class="err">ᶜ</span> <span class="bp">=</span> <span class="n">y</span>  <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">finish</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">ext1</span><span class="o">,</span>
        <span class="n">split</span><span class="bp">;</span> <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">finish</span> <span class="o">},</span>
    <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">compl_inter_compl_eq_union</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">):</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">∪</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
 <span class="k">have</span><span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="err">∪</span> <span class="n">y</span><span class="o">)</span><span class="err">ᶜ</span><span class="o">,</span> <span class="o">{</span>     <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">compl_union</span><span class="o">],</span> <span class="o">},</span>
 <span class="n">rw</span> <span class="err">←</span> <span class="bp">@</span><span class="n">compl_iff</span> <span class="n">α</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="err">∪</span> <span class="n">y</span><span class="o">)</span> <span class="o">,</span>
 <span class="n">exact</span> <span class="n">this</span><span class="o">,</span>
<span class="kn">end</span>





<span class="kn">example</span>  <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span> <span class="o">))</span> <span class="o">(</span><span class="n">hs</span><span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">a</span> <span class="err">∩</span> <span class="n">b</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">σ</span> <span class="o">:=</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
      <span class="n">intros</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
      <span class="n">specialize</span> <span class="n">h</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="n">z</span> <span class="n">hs</span> <span class="n">hz</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">univ_inter</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="k">have</span> <span class="n">cc</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">intros</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
        <span class="n">specialize</span> <span class="n">h</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="n">z</span> <span class="n">hs</span> <span class="n">hz</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">univ_inter</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hxc</span><span class="o">:</span> <span class="n">x</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">cc</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>  <span class="o">},</span>
    <span class="k">have</span> <span class="n">hyc</span><span class="o">:</span> <span class="n">y</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">cc</span> <span class="n">y</span> <span class="n">hy</span><span class="o">},</span>
    <span class="k">have</span><span class="o">:</span> <span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">{</span> <span class="n">specialize</span> <span class="n">h</span> <span class="n">x</span><span class="err">ᶜ</span> <span class="n">y</span> <span class="n">hxc</span> <span class="n">hy</span> <span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">hc</span><span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">cc</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span> <span class="o">)</span>  <span class="n">this</span><span class="o">},</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">∪</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">compl_inter_compl_eq_union</span>  <span class="o">},</span>
    <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="207014731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207014731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207014731">(Aug 15 2020 at 10:00)</a>:</h4>
<p>Also, there's gotta be an easier way to do those De Morgan-like lemmas, right?</p>



<a name="207018993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207018993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207018993">(Aug 15 2020 at 12:08)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">compl_inter_compl</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">∪</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">compl_inter</span><span class="o">,</span> <span class="n">compl_compl</span><span class="o">]</span>
</code></pre></div>



<a name="207021481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207021481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207021481">(Aug 15 2020 at 13:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">a</span> <span class="err">∩</span> <span class="n">b</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">z</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">z</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">h</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="n">z</span> <span class="n">hs</span> <span class="n">hz</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">univ_inter</span> <span class="n">z</span><span class="err">ᶜ</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
<span class="kn">end</span><span class="o">,</span>
<span class="o">{</span> <span class="n">σ</span> <span class="o">:=</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="n">closed_complements</span><span class="o">,</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span>
  <span class="k">begin</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hab</span> <span class="o">:</span> <span class="n">a</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">b</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">closed_complements</span> <span class="bp">_</span> <span class="n">ha</span><span class="o">)</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">compl_union</span> <span class="n">at</span> <span class="n">hab</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">compl_compl</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">),</span>
    <span class="n">apply</span> <span class="n">closed_complements</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hab</span><span class="o">,</span>
  <span class="kn">end</span> <span class="o">}</span>
</code></pre></div>



<a name="207022257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207022257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207022257">(Aug 15 2020 at 13:35)</a>:</h4>
<p>I'm using <code>have</code> to share the <code>closed_complements</code> proof – I haven't worked with structures much yet so I don't know if there's a better way</p>



<a name="207030629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207030629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207030629">(Aug 15 2020 at 17:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253355">Iocta</span> <a href="#narrow/stream/113489-new-members/topic/letter/near/207014731">said</a>:</p>
<blockquote>
<p>Also, there's gotta be an easier way to do those De Morgan-like lemmas, right?</p>
</blockquote>
<p>the canonical way to solve any 0th order logic (i.e. propositional logic) goal is <code>finish</code></p>



<a name="207032640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207032640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207032640">(Aug 15 2020 at 18:11)</a>:</h4>
<p>Why doesn't <code>lemma compl_inter_compl_eq_union' (x y : set α ): (xᶜ ∩ yᶜ)ᶜ = x ∪ y := by finish</code> work?</p>



<a name="207032811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207032811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207032811">(Aug 15 2020 at 18:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">):</span> <span class="o">(</span><span class="n">x</span><span class="err">ᶜ</span> <span class="err">∩</span> <span class="n">y</span><span class="err">ᶜ</span><span class="o">)</span><span class="err">ᶜ</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">∪</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">finish</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207033150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207033150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207033150">(Aug 15 2020 at 18:25)</a>:</h4>
<p>because it isn't a 0th order logic goal</p>



<a name="207041120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041120">(Aug 15 2020 at 21:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">(</span><span class="n">hs</span><span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span>


<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>


<span class="kn">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>How do I use the <code>univ_mem</code> from the structure definition?</p>



<a name="207041250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041250">(Aug 15 2020 at 21:56)</a>:</h4>
<p><code>h.univ_mem</code></p>



<a name="207041259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041259">(Aug 15 2020 at 21:56)</a>:</h4>
<p>again I think that isn't what you meant</p>



<a name="207041271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041271">(Aug 15 2020 at 21:57)</a>:</h4>
<p><code>h</code> is some algebra structure on <code>\alpha</code> that has nothing to do with <code>s</code></p>



<a name="207041278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041278">(Aug 15 2020 at 21:57)</a>:</h4>
<p>the underlying set of <code>h</code> is <code>h.\sigma</code></p>



<a name="207041847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207041847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207041847">(Aug 15 2020 at 22:08)</a>:</h4>
<p>Like this I guess </p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">a</span><span class="bp">.</span><span class="n">σ</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">univ_mem</span>
</code></pre></div>



<a name="207042010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207042010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207042010">(Aug 15 2020 at 22:12)</a>:</h4>
<p>yes that's right</p>



<a name="207042496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207042496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207042496">(Aug 15 2020 at 22:25)</a>:</h4>
<p>I don't totally get it. What do I mean here?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">structure</span> <span class="n">semialgebra</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">empty_mem</span> <span class="o">:</span> <span class="o">{}</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">)</span>
<span class="o">(</span><span class="n">semi_closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span>  <span class="bp">∃</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="err">Ω</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">s</span><span class="err">ᶜ</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">semialgebra</span> <span class="n">a</span><span class="bp">.</span><span class="n">σ</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">σ</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">empty_mem</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">semi_closed_complements</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</code></pre></div>



<a name="207042813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207042813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207042813">(Aug 15 2020 at 22:34)</a>:</h4>
<p>Oh maybe this</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">semialgebra</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">σ</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">univ_mem</span><span class="o">,</span>
  <span class="n">empty_mem</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">semi_closed_complements</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</code></pre></div>



<a name="207056186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207056186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207056186">(Aug 16 2020 at 05:29)</a>:</h4>
<p>How can I use <code>algebra'.univ_mem</code> to fill this?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">all_algebras</span><span class="o">:</span> <span class="bp">∀</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span>  <span class="o">)</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span>  <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">σ</span> <span class="o">:=</span> <span class="n">Union</span> <span class="n">ss</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_Union</span><span class="o">],</span>
    <span class="n">specialize</span> <span class="n">all_algebras</span> <span class="mi">0</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">ss0</span> <span class="o">:=</span> <span class="o">(</span><span class="n">ss</span> <span class="mi">0</span><span class="o">),</span>
    <span class="k">have</span><span class="o">:</span> <span class="n">univ</span> <span class="err">∈</span> <span class="n">ss0</span><span class="o">,</span>
    <span class="o">{</span>
<span class="c1">-- α: Type u</span>
<span class="c1">-- ss: ℕ → set (set α)</span>
<span class="c1">-- all_algebras: algebra&#39; ↥(ss 0)</span>
<span class="c1">-- ss0: set (set α) := ss 0</span>
<span class="c1">-- ⊢ univ ∈ ss0</span>
    <span class="o">}</span>


  <span class="o">},</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="bp">_</span>
<span class="o">}</span>
</code></pre></div>



<a name="207056668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207056668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207056668">(Aug 16 2020 at 05:45)</a>:</h4>
<p>there's a sequence of <code>set (set alpha)</code>, each of which contains <code>univ</code>. So I should be able to pick the first one, show it has <code>univ</code>, and then unioning it with the others should still have <code>univ</code>.</p>



<a name="207056677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207056677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207056677">(Aug 16 2020 at 05:45)</a>:</h4>
<p>but I'm stuck at showing the first one has <code>univ</code></p>



<a name="207056789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207056789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207056789">(Aug 16 2020 at 05:49)</a>:</h4>
<p>I figured it'd be <code>algebra'.univ_mem</code> or something like that but no dice</p>



<a name="207064446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207064446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207064446">(Aug 16 2020 at 10:02)</a>:</h4>
<p><span class="user-mention" data-user-id="253355">@Iocta</span> <code>algebra' (ss n)</code> means an algebra structure on <code>ss n</code> (coerced to a type), not an algebra structure on <code>\alpha</code> whose underlying set is <code>ss n</code></p>



<a name="207064551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207064551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207064551">(Aug 16 2020 at 10:06)</a>:</h4>
<p>this should be what you mean:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">lattice</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>

<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">ss</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ss_increasing</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">σ</span> <span class="o">:=</span> <span class="err">⋃</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">univ_mem</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</code></pre></div>



<a name="207096973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207096973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207096973">(Aug 17 2020 at 00:23)</a>:</h4>
<p>Yes, thank you.</p>



<a name="207228802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207228802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207228802">(Aug 18 2020 at 06:59)</a>:</h4>
<p>I guess it's complaining that <code>a &lt;= </code> might not be decidable? What is the normal way to handle this?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>


<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">ss</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ss_subset_of_ss_succ</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span>

<span class="n">include</span> <span class="n">ss_subset_of_ss_succ</span>

<span class="kn">lemma</span> <span class="n">ss_increasing</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="n">m</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">h</span> <span class="o">,</span>
    <span class="o">{</span>        <span class="n">exact</span> <span class="n">hs</span><span class="o">,</span>    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">specialize</span> <span class="n">ss_subset_of_ss_succ</span> <span class="n">h_b</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h_ih</span><span class="o">,</span>
    <span class="o">},</span>
<span class="kn">end</span>


<span class="kn">example</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">σ</span> <span class="o">:=</span> <span class="err">⋃</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">univ_mem</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">exists_ssn</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="k">let</span> <span class="n">sn</span><span class="o">:=</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">|</span> <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span>  <span class="o">},</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">hs</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
        <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">hn</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">cases</span> <span class="n">exists_ssn</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">closed_complements</span> <span class="n">s</span> <span class="n">hn</span><span class="o">,</span>
 <span class="o">},</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">ha</span> <span class="k">with</span> <span class="n">na</span> <span class="n">hna</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hb</span> <span class="k">with</span> <span class="n">nb</span> <span class="n">hnb</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">nab</span> <span class="o">:=</span> <span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">na_subset</span><span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">na</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="n">nab</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">le_max_left</span><span class="o">,</span>
<span class="c1">-- invalid apply tactic, failed to unify</span>
<span class="c1">--   ∀ (n : ℕ), (ss n).σ ⊆ (ss (n + 1)).σ</span>
<span class="c1">-- with</span>
<span class="c1">--   ∀ [_inst_1 : decidable_linear_order ?m_1] (a b : ?m_1), a ≤ max a b</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">nb_subset</span><span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">nb</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="n">nab</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">le_max_right</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">use</span> <span class="n">nab</span><span class="o">,</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">ss</span> <span class="n">nab</span><span class="o">)</span><span class="bp">.</span><span class="n">closed_finite_unions</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">na_subset</span> <span class="n">hna</span><span class="o">)</span> <span class="o">(</span><span class="n">nb_subset</span> <span class="n">hnb</span><span class="o">),</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="207228926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207228926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207228926">(Aug 18 2020 at 07:01)</a>:</h4>
<p>the error says you applied something that looks different than what lean wants</p>



<a name="207228995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207228995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207228995">(Aug 18 2020 at 07:02)</a>:</h4>
<p>I don't think it's a decidability problem, it's just a completely different theorem. <code>ss</code> has no definition in your problem, it's just a variable</p>



<a name="207229084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207229084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207229084">(Aug 18 2020 at 07:04)</a>:</h4>
<p>it looks like when you did <code>apply ss_increasing</code>, the first subgoal you got is <code>(ss_subset_of_ss_succ: ∀ n : ℕ, (ss n).σ ⊆ (ss (n + 1)).σ)</code>, which should be a variable in your context</p>



<a name="207230416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207230416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207230416">(Aug 18 2020 at 07:28)</a>:</h4>
<p>Alright this works</p>
<div class="codehilite"><pre><span></span><code><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>


<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">ss</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ss_subset_of_ss_succ</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span>

<span class="n">include</span> <span class="n">ss_subset_of_ss_succ</span>

<span class="kn">lemma</span> <span class="n">ss_increasing</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="n">m</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">h</span> <span class="o">,</span>
    <span class="o">{</span>        <span class="n">exact</span> <span class="n">hs</span><span class="o">,</span>    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">specialize</span> <span class="n">ss_subset_of_ss_succ</span> <span class="n">h_b</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h_ih</span><span class="o">,</span>
    <span class="o">},</span>
<span class="kn">end</span>


<span class="kn">example</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">σ</span> <span class="o">:=</span> <span class="err">⋃</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">univ_mem</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">exists_ssn</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="k">let</span> <span class="n">sn</span><span class="o">:=</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">|</span> <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span>  <span class="o">},</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">hs</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
        <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">hn</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">cases</span> <span class="n">exists_ssn</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">closed_complements</span> <span class="n">s</span> <span class="n">hn</span><span class="o">,</span>
 <span class="o">},</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">ha</span> <span class="k">with</span> <span class="n">na</span> <span class="n">hna</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hb</span> <span class="k">with</span> <span class="n">nb</span> <span class="n">hnb</span><span class="o">,</span>
    <span class="n">use</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">),</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">))</span><span class="bp">.</span><span class="n">closed_finite_unions</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="o">{</span>
    <span class="k">have</span><span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">na</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
        <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">le_max_left</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">apply</span> <span class="n">this</span> <span class="n">hna</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="k">have</span><span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">nb</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
        <span class="o">{</span>
            <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
            <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
            <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
            <span class="n">apply</span> <span class="n">le_max_right</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="n">apply</span> <span class="n">this</span> <span class="n">hnb</span><span class="o">,</span>
    <span class="o">},</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="207230465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207230465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207230465">(Aug 18 2020 at 07:28)</a>:</h4>
<p>Those <code>have</code>s are a little awkward, can I avoid?</p>



<a name="207231116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231116">(Aug 18 2020 at 07:37)</a>:</h4>
<div class="codehilite"><pre><span></span><code>    <span class="o">{</span>
      <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span> <span class="n">hna</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
      <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">le_max_left</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span> <span class="n">hnb</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
      <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">le_max_right</span><span class="o">,</span>
    <span class="o">},</span>
</code></pre></div>



<a name="207231331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231331">(Aug 18 2020 at 07:40)</a>:</h4>
<p>nice. Did you happen to know that one or was there a trick to figuring it out?</p>



<a name="207231372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231372">(Aug 18 2020 at 07:40)</a>:</h4>
<p>Looks like I did the same transformation as <span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> there, but there are some other simplifications, too, elsewhere:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>


<span class="kn">structure</span> <span class="n">algebra&#39;</span> <span class="o">(</span><span class="err">Ω</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="err">Ω</span><span class="o">))</span>
<span class="o">(</span><span class="n">univ_mem</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_complements</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">,</span> <span class="n">s</span><span class="err">ᶜ</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>
<span class="o">(</span><span class="n">closed_finite_unions</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span> <span class="o">):</span> <span class="n">a</span> <span class="err">∪</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">σ</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">ss</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">algebra&#39;</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ss_subset_of_ss_succ</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span>

<span class="n">include</span> <span class="n">ss_subset_of_ss_succ</span>

<span class="kn">lemma</span> <span class="n">ss_increasing</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="err">⊆</span> <span class="o">(</span><span class="n">ss</span> <span class="n">m</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">h</span> <span class="o">,</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">hs</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">ss_subset_of_ss_succ</span> <span class="n">h_b</span> <span class="n">h_ih</span><span class="o">,</span> <span class="o">}</span>
<span class="kn">end</span>


<span class="kn">example</span> <span class="o">:</span> <span class="n">algebra&#39;</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">σ</span> <span class="o">:=</span> <span class="err">⋃</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">σ</span><span class="o">,</span>
  <span class="n">univ_mem</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">ss</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">univ_mem</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">closed_complements</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hs</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">ss</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">closed_complements</span> <span class="n">s</span> <span class="n">hn</span><span class="o">,</span>
 <span class="o">},</span>
  <span class="n">closed_finite_unions</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_Union</span> <span class="n">at</span> <span class="n">ha</span> <span class="n">hb</span> <span class="err">⊢</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">ha</span> <span class="k">with</span> <span class="n">na</span> <span class="n">hna</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hb</span> <span class="k">with</span> <span class="n">nb</span> <span class="n">hnb</span><span class="o">,</span>
    <span class="n">use</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">),</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">ss</span> <span class="o">(</span><span class="n">max</span> <span class="n">na</span> <span class="n">nb</span><span class="o">))</span><span class="bp">.</span><span class="n">closed_finite_unions</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span> <span class="n">hna</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
      <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">le_max_left</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span> <span class="n">hnb</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_increasing</span><span class="o">,</span>
      <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">ss_subset_of_ss_succ</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">le_max_right</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="207231567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231567">(Aug 18 2020 at 07:42)</a>:</h4>
<p>That's much prettier!</p>



<a name="207231607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231607">(Aug 18 2020 at 07:43)</a>:</h4>
<p>I first tried <code>apply (_ : (ss nb).σ ⊆ (ss (max na nb)).σ) hna</code>, but that didn't look great either, so I scrolled through <a href="https://leanprover-community.github.io/mathlib_docs/data/set/basic.html">https://leanprover-community.github.io/mathlib_docs/data/set/basic.html</a> and there it was :)</p>



<a name="207231610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231610">(Aug 18 2020 at 07:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253355">Iocta</span> <a href="#narrow/stream/113489-new-members/topic/letter/near/207231331">said</a>:</p>
<blockquote>
<p>nice. Did you happen to know that one or was there a trick to figuring it out?</p>
</blockquote>
<p>Usually you're not supposed to take advantage of the way things are defined, so I looked for the lemma that takes <code>x ∈ s</code> and <code>s ⊆ t</code> to get <code>x ∈ t</code> figuring it must exist for that reason.  I guessed it was in <code>data.set.basic</code>, and found it with a quick search for <code>⊆</code>.  You could also use <code>library_search</code> to find this kind of theorem.  The trick then is that applying <code>mem_of_mem_of_subset hna</code> replaces the goal with the subset relation you want to prove.</p>



<a name="207231769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207231769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207231769">(Aug 18 2020 at 07:45)</a>:</h4>
<p>And don't forget about <code>squeeze_simp</code> to figure out what your <code>simp</code> is doing.  This is where <code>set.mem_Union</code> came from.</p>



<a name="207232040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207232040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207232040">(Aug 18 2020 at 07:48)</a>:</h4>
<p>Cool, thanks :-)</p>



<a name="207232066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207232066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207232066">(Aug 18 2020 at 07:48)</a>:</h4>
<p>just learned about rw at \entails too</p>



<a name="207232323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/letter/near/207232323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/letter.html#207232323">(Aug 18 2020 at 07:51)</a>:</h4>
<p>One thing I'm confused about is that <code>set.mem_of_mem_of_subset</code> is marked with the <code>@[trans]</code> attribute, but you can't use the <code>transitivity</code> tactic in its place.  I'm not sure how this is supposed to work.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>