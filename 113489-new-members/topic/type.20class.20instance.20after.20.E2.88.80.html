---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html">type class instance after ∀</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="256906042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256906042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Kaseorg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256906042">(Oct 09 2021 at 23:11)</a>:</h4>
<p>If I can do</p>



<a name="256909640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256909640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Renshaw <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256909640">(Oct 10 2021 at 00:11)</a>:</h4>
<p>I don't know the answer to your question, but I was able to modify the second example to get it to typecheck:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">@</span><span class="n">has_add.add</span> <span class="n">α</span> <span class="n">h</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">has_add.add</span> <span class="n">α</span> <span class="n">h</span> <span class="n">x</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">rfl</span>
</code></pre></div>



<a name="256910589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256910589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Renshaw <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256910589">(Oct 10 2021 at 00:28)</a>:</h4>
<p>and in Lean 4 this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Add</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span><span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">Add</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">rfl</span>
</code></pre></div>



<a name="256910763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256910763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256910763">(Oct 10 2021 at 00:31)</a>:</h4>
<p><code>by exactI</code> is the solution here, searching for it will find other threads</p>



<a name="256939175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256939175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256939175">(Oct 10 2021 at 09:01)</a>:</h4>
<p>But in short, <code>has_add</code> is a type class so you should be using square brackets and putting things before the colon so that the type class inference system can find them (note that the type class inference system does not look in the local context so that's why you get the error, however normally if a type class hypothesis has made it into the local context it's because square brackets were used)</p>



<a name="256941390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/type%20class%20instance%20after%20%E2%88%80/near/256941390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/type.20class.20instance.20after.20.E2.88.80.html#256941390">(Oct 10 2021 at 09:40)</a>:</h4>
<p>Strictly the square brackets have nothing to do with it and have no effect <em>inside</em> the lemma they are arguments to, although typically you still want them for the <em>users</em> of you lemma</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>