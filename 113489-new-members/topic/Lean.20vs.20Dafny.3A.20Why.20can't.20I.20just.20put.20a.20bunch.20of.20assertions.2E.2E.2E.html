---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html">Lean vs Dafny: Why can't I just put a bunch of assertions...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224736267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224736267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224736267">(Feb 01 2021 at 14:53)</a>:</h4>
<p>In Dafny induction is easy: just use recursion. And most of the time the inbuilt SMT solver proves the lemma automatically. If for some reason the SMT solver can't find a proof, I can still add more <code>assert</code> statements to guide the solver. It seems that in Lean I have to do everything explicitly, sure there is <code>simp</code>, <code>omega</code> and <code>ring</code> but I have to explicitly invoke those solvers.  It may seem weird to ask this question but is this an intentional design choice of Lean? And why was that choice made?</p>



<a name="224736462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224736462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224736462">(Feb 01 2021 at 14:54)</a>:</h4>
<p>And also there is no SMT solver integration in Lean right?</p>



<a name="224737170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737170">(Feb 01 2021 at 14:59)</a>:</h4>
<p>I don't know Dafny, but what kind of lemmas can you prove in Dafny? Can you state theorems like the sum <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>n</mi><mo>=</mo><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">1 + \dots + n = n(n+1)/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span></span></span></span>?</p>



<a name="224737252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737252">(Feb 01 2021 at 14:59)</a>:</h4>
<p>Yes.</p>



<a name="224737375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737375">(Feb 01 2021 at 15:00)</a>:</h4>
<p>There is a pretty well written tutorial here <a href="https://rise4fun.com/Dafny/tutorial">https://rise4fun.com/Dafny/tutorial</a></p>



<a name="224737488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737488">(Feb 01 2021 at 15:01)</a>:</h4>
<p>Dafny is more geared towards program verification though but you can still do some math stuff.</p>



<a name="224737566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737566">(Feb 01 2021 at 15:01)</a>:</h4>
<p>What kind of math stuff can you <em>not</em> do with it?</p>



<a name="224737805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ryan Lahfa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737805">(Feb 01 2021 at 15:02)</a>:</h4>
<p>I might be wrong but you might be able to emulate the Dafny induction in Lean by writing your own primitives of induction and wiring up some SMT solver AFAIK</p>



<a name="224737895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224737895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224737895">(Feb 01 2021 at 15:03)</a>:</h4>
<p>We can still answer the questions. You are free to write a custom induction tactic that tries a bunch of other tactics to close every goal.</p>



<a name="224738010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224738010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224738010">(Feb 01 2021 at 15:03)</a>:</h4>
<p>And wiring up SMT solver is definitely planned, and there have been experiments, but the real thing will wait for a more mature Lean 4.</p>



<a name="224739048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224739048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224739048">(Feb 01 2021 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Theoretically, none. But certain things may be more painful to prove because it lacks a mathematical library like mathlib perhaps.</p>



<a name="224739169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224739169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224739169">(Feb 01 2021 at 15:11)</a>:</h4>
<p>Ok, I see... I don't know enough to compare these systems. But my guess is that if we try to call automatic solves on every induction proof, many proofs will become very slow.</p>



<a name="224739398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224739398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ryan Lahfa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224739398">(Feb 01 2021 at 15:13)</a>:</h4>
<p>That sounds really a tool for program verification, contracts, etc.</p>



<a name="224741509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Dafny%3A%20Why%20can%27t%20I%20just%20put%20a%20bunch%20of%20assertions.../near/224741509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Dafny.3A.20Why.20can't.20I.20just.20put.20a.20bunch.20of.20assertions.2E.2E.2E.html#224741509">(Feb 01 2021 at 15:27)</a>:</h4>
<p>Yes, this is the basic difference between ATP (automatic theorem proving) vs ITP (interactive theorem proving). ATP based provers are all about stating intermediate lemmas and letting the SMT backend fill the gaps, while ITPs are more about saying how the proof goes with tactics proving the individual steps (or even directly applying lemmas). The ATP approach is a lot more easy to use on simple problems, it can be almost completely hands off most of the time, but it tends to fail in really hard to predict ways when you start to scale up because you are at the mercy of the black box solver, which might fail because you wrote your hypotheses in the wrong order or something. This is bad for maintainability, and as Johan mentioned it's also really slow if your whole library is written this way</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>