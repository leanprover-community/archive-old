---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html">A finite set has finitely many endofunctions?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="185440156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185440156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185440156">(Jan 12 2020 at 16:22)</a>:</h4>
<p>I have a finite set <code>qq</code> and I want to prove that the functions <code>qq → qq</code> are also a finite set.</p>
<p>Something like this:</p>
<p><code>instance finiteness_of_endofunctions {qq : Type} [fintype qq] : fintype (qq → qq) := sorry</code></p>
<p>How do I do that?</p>



<a name="185440209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185440209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185440209">(Jan 12 2020 at 16:24)</a>:</h4>
<p><code>by apply_instance</code></p>
<p>There's already a <code>fintype</code> for <code>pi</code> types.</p>



<a name="185440226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185440226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185440226">(Jan 12 2020 at 16:25)</a>:</h4>
<p>You need <code>decidable_eq qq</code> as well as it turns out</p>



<a name="185440332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185440332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185440332">(Jan 12 2020 at 16:28)</a>:</h4>
<p>Like this? <code>instance finiteness_of_endofunctions {qq : Type} [fintype qq] [decidable_eq qq] : fintype (qq → qq) := pi.fintype</code></p>



<a name="185440341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185440341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185440341">(Jan 12 2020 at 16:28)</a>:</h4>
<p>Why do I need the decidable_eq?</p>



<a name="185441606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185441606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185441606">(Jan 12 2020 at 17:07)</a>:</h4>
<p>I imagine it's because each of the finitely many functions <code>qq -&gt; qq</code> needs to be able to determine which element of the input it is looking at.</p>



<a name="185441675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185441675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185441675">(Jan 12 2020 at 17:09)</a>:</h4>
<p><code>fintype</code> without <code>decidable_eq</code> is sort of a strange beast.</p>



<a name="185444398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185444398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185444398">(Jan 12 2020 at 18:27)</a>:</h4>
<p>Well, I suppose that is reasonable</p>



<a name="185444537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185444537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185444537">(Jan 12 2020 at 18:31)</a>:</h4>
<p>But now, if I do add <code>decidable_eq</code> on <code>qq</code>, for the purpose of what I am doing, I would also have to endow <code>qq -&gt; qq</code> with <code>decidable_eq</code>. </p>
<div class="codehilite"><pre><span></span>instance decidable_eq_endofunctions {qq : Type} [fintype qq] [decidable_eq qq] : decidable_eq (qq → qq) :=  sorry
</pre></div>


<p>Library search suggests using <code>classical.dec_eq (qq → qq)</code></p>
<p>Any chance I can avoid going classical?</p>



<a name="185444674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185444674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185444674">(Jan 12 2020 at 18:34)</a>:</h4>
<p><code>by apply_instance</code> does work there.</p>



<a name="185448910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185448910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185448910">(Jan 12 2020 at 20:28)</a>:</h4>
<p>You shouldn't have to write these instances; instance search will find these in use cases even without your <code>instance</code> declaration</p>



<a name="185449519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185449519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185449519">(Jan 12 2020 at 20:44)</a>:</h4>
<p>I thought so too, but it did not seem to be working</p>



<a name="185449769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185449769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185449769">(Jan 12 2020 at 20:52)</a>:</h4>
<p>it should work with the <code>decidable_eq</code> instance in the context</p>



<a name="185460335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185460335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185460335">(Jan 13 2020 at 02:17)</a>:</h4>
<p>I think that we should stop pretending that we care about constructive math (as opposed to computable defs). In particular, I'd stop requiring <code>decidable P</code> whenever we only use this assumption to prove a proposition.</p>



<a name="185470262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185470262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185470262">(Jan 13 2020 at 07:25)</a>:</h4>
<p>There will always be people who want to use lean to do things which are quite a long way from maths, I guess. I just switch classical on and don't think any more about it :-)</p>



<a name="185471403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185471403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185471403">(Jan 13 2020 at 07:52)</a>:</h4>
<p>The trouble is that switching classical on doesn't always mean you don't have to think about it.</p>



<a name="185596147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20finite%20set%20has%20finitely%20many%20endofunctions%3F/near/185596147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Agnishom Chattopadhyay <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20finite.20set.20has.20finitely.20many.20endofunctions.3F.html#185596147">(Jan 14 2020 at 13:41)</a>:</h4>
<blockquote>
<p>it should work with the decidable_eq instance in the context</p>
</blockquote>
<p>I thought so too.</p>
<p>Please take a look at <a href="https://gist.github.com/Agnishom/426552564fd1a235ac7c009c24b11c09#file-monoid_recognizers-lean-L38" target="_blank" title="https://gist.github.com/Agnishom/426552564fd1a235ac7c009c24b11c09#file-monoid_recognizers-lean-L38">line 38 of this</a>. I'd want a lot of this painful instances to be automatic, but they are not, for some reason</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>