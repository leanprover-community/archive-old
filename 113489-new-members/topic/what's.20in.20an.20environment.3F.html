---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html">what's in an environment?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="218588396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218588396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yasmine Sharoda <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218588396">(Dec 02 2020 at 17:12)</a>:</h4>
<p>A <a href="https://leanprover-community.github.io/mathlib_docs/find/environment">docs#environment</a>  as documented contains declarations and notation defined so far. <br>
Does this contain structures and type classes? <br>
To give a bit of context, I am trying to introspect the components of a type class, i.e. access their names and types.</p>



<a name="218591678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218591678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218591678">(Dec 02 2020 at 17:36)</a>:</h4>
<p>I think you want <a href="https://leanprover-community.github.io/mathlib_docs/find/environment.structure_fields">docs#environment.structure_fields</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/environment.projection_info">docs#environment.projection_info</a> then</p>



<a name="218591760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218591760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218591760">(Dec 02 2020 at 17:36)</a>:</h4>
<p>Some explanation: for a structure/type class, let's say <code>group</code>, the environment will of course contain the type constructor <code>group</code> itself</p>



<a name="218592037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218592037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218592037">(Dec 02 2020 at 17:38)</a>:</h4>
<p>The declaration <code>group</code> is just a top-level constant, though. The structure info is stored separately.<br>
A class could technically be anything, but usually it's a structure. Then <code>environment.structure_fields</code> on the name <code>group</code> will produce a list of (the names of) the projections out of that structure.</p>



<a name="218592388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218592388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218592388">(Dec 02 2020 at 17:41)</a>:</h4>
<p>Then you can look up these projections in the environment to find out what the fields of the structure are, or use <code>environment.is_projection</code> (actually, I'm not sure now how much more useful this would be)</p>



<a name="218606550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218606550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yasmine Sharoda <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218606550">(Dec 02 2020 at 19:27)</a>:</h4>
<p>This is very good start. I believe I am now missing information about the type of the declaration, which is not part of <code>projection_info</code>. <br>
would it be part of <a href="https://leanprover-community.github.io/mathlib_docs/find/declaration">docs#declaration</a> ? Its documentation is not very clear to me.</p>



<a name="218607297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218607297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218607297">(Dec 02 2020 at 19:33)</a>:</h4>
<p>The source <a href="https://github.com/leanprover-community/lean/blob/ed6accfb611bbd28ef5b7e34361d2b58a366e2c9/library/init/meta/declaration.lean#L47">https://github.com/leanprover-community/lean/blob/ed6accfb611bbd28ef5b7e34361d2b58a366e2c9/library/init/meta/declaration.lean#L47</a> has more specific documentation</p>



<a name="218607487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218607487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218607487">(Dec 02 2020 at 19:34)</a>:</h4>
<p><code>group</code> for example will be a <code>cnst</code> with the name <code>group</code>, one universe parameter <code>u</code> and type <code>Type u -&gt; Type u</code>. <code>is_trusted</code> is false for <code>meta</code> definitions, probably you can ignore it.</p>



<a name="218607780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%27s%20in%20an%20environment%3F/near/218607780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yasmine Sharoda <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what's.20in.20an.20environment.3F.html#218607780">(Dec 02 2020 at 19:36)</a>:</h4>
<p>exactly what I am looking for.. thank you</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>