---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/notation.20for.20isomorphisms.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html">notation for isomorphisms</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="257268457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257268457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257268457">(Oct 12 2021 at 20:38)</a>:</h4>
<p>I've got a <code>def convert_a_into_b (sa : struct_a M) : struct_b (option M)</code> and a <code>def convert_b_into_a (sb : struct_b M) : struct_a (units M)</code>. I want to show that these are meaningfully inverses, so I tried writing something like</p>
<p><code>
def a_b_iso [a_inst : struct_a M]: convert_b_into_a (convert_a_into_b a_inst) ≃ a_inst :=
begin
   sorry
end
</code></p>
<p>but that doesn't compile, it says that</p>
<p><code>
type mismatch at application
  equiv (convert_a_into_b inst_a).convert_b_into_a
term
  (convert_a_into_b inst_a).convert_b_into_a
has type
  struct_a (option (units M)) : Type u
but is expected to have type
  Sort ? : Type ?
</code><br>
and<br>
<code>
type mismatch at application
  ⁇ ≃ a_inst
term
  a_inst
has type
  struct_a M : Type u
but is expected to have type
  Sort ? : Type ?
</code></p>



<a name="257268541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257268541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257268541">(Oct 12 2021 at 20:39)</a>:</h4>
<p>I tried following a few different examples in mathlib to see how to use <code>def</code> turning one structure into another, but, I couldn't figure it out. Help with the syntax? <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="257269229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257269229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257269229">(Oct 12 2021 at 20:43)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> &lt;-- some info about making your posts more readable if they contain code</p>



<a name="257269387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257269387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257269387">(Oct 12 2021 at 20:45)</a>:</h4>
<p>Also, a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> would be helpful</p>



<a name="257269416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257269416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257269416">(Oct 12 2021 at 20:45)</a>:</h4>
<p>What do you mean by "meaningfully inverses" as opposed to "inverses"?</p>



<a name="257270310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257270310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257270310">(Oct 12 2021 at 20:51)</a>:</h4>
<p>Well, that I guess they aren't <em>literally</em> inverses because the types <code>option (units M)</code> and <code>M</code> are different. (I think?) Even though here they'll end up corresponding exactly one-to-one.</p>



<a name="257270312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257270312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257270312">(Oct 12 2021 at 20:51)</a>:</h4>
<p><code>equiv a b</code> need <code>a</code> and <code>b</code> to be types.</p>



<a name="257270331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257270331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257270331">(Oct 12 2021 at 20:51)</a>:</h4>
<p>I'll make an mwe later today</p>



<a name="257271836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257271836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257271836">(Oct 12 2021 at 21:03)</a>:</h4>
<p>You probably rather want to make <code>convert_a_into_b</code> the first field of <code>M ≃ option M</code> (an equivalence is <strong>data</strong>) and massage <code>convert_b_into_a</code> <code>option M → M</code>to to make it the second field.</p>



<a name="257271995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257271995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257271995">(Oct 12 2021 at 21:04)</a>:</h4>
<p>However I doubt you actually want an equivalence because you only wanted to show that they compose to the identity one way.</p>



<a name="257272051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257272051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257272051">(Oct 12 2021 at 21:05)</a>:</h4>
<p>If that's really the case, you can't much more than "They compose to the identity".</p>



<a name="257273936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257273936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> anton_shrdlu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257273936">(Oct 12 2021 at 21:20)</a>:</h4>
<p>Hi, I am trying to get the quickstart at <a href="https://leanprover.github.io/lean4/doc/quickstart.html">https://leanprover.github.io/lean4/doc/quickstart.html</a> going.<br>
I ran it with standard options and everything runs fine, but when I check for version lean is still at 3.xx.<br>
Is there some action I need to take first, if I previously installed lean 3?</p>



<a name="257274087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257274087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> anton_shrdlu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257274087">(Oct 12 2021 at 21:21)</a>:</h4>
<p>I am also new to zulip, so sorry if this is the wrong place for questions like this.</p>



<a name="257274483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257274483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257274483">(Oct 12 2021 at 21:24)</a>:</h4>
<p>They compose to the identity both ways, actually, I was planning to show it each way separately. If there's a better notation / code / class for that I'm all ears!</p>



<a name="257276016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257276016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257276016">(Oct 12 2021 at 21:38)</a>:</h4>
<p>notably I do not have<code>M ≃ option M</code>, that would be false, in fact the injection from M into option M isn't even natural. It's only when I go back through units (option M) that it's isomorphic.</p>
<p>For a concrete example, <code>units</code> and <code>with_zero</code> are inverse operations when beginning with a group G or group_with_zero G0. There is an isomorphism between <code>units (with_zero G)</code> and <code>G</code>, as well as between <code>with_zero (units G0)</code> and <code>G0</code>. In that case the isomorphisms are pretty trivial since the with_zero and units instances directly inherit multiplication from the parent G or G0.</p>
<p>In my case, the multiplication operation is <em>not</em> the same, so I was advised that instead of declaring <code>[struct_a M] option M</code> as an instance of <code>struct_b M</code>, I should <code>def</code> the mappings, which I've done in <code>convert_a_into_b</code> and vv. But now I'm not sure how to <em>use</em> those definitions.</p>
<p>How do I write down the equivalence that I'm trying to state?</p>



<a name="257315719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257315719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257315719">(Oct 13 2021 at 06:04)</a>:</h4>
<p>I made a MWE. It's not that small, but I think it's pretty quick to read, and it's self-contained... <a href="https://gist.github.com/Timeroot/65e4e8a5b7a4216251f425c0e1cd1da1">https://gist.github.com/Timeroot/65e4e8a5b7a4216251f425c0e1cd1da1</a></p>
<p>Help appreciated!</p>



<a name="257356207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257356207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257356207">(Oct 13 2021 at 12:27)</a>:</h4>
<p>Like Patrick said above, equivs or mul_equivs etc are between types, not between terms. While here, you're trying to state an equivalence between structures, which are terms. I would imagine that the type of your equiv could be between option (units S) and units (option S). The term of an equiv type is a structure, comprising two functions and proofs that they are inverses of each other on both sides.</p>



<a name="257356310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257356310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257356310">(Oct 13 2021 at 12:28)</a>:</h4>
<p>Then, if you can define that, you have a bundled function, that is, bundled directly with its inverses and with the proofs of that inverse-fact.</p>



<a name="257356497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257356497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257356497">(Oct 13 2021 at 12:29)</a>:</h4>
<p>My types suggested above won't work btw I don't think.</p>



<a name="257356685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257356685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257356685">(Oct 13 2021 at 12:30)</a>:</h4>
<p>Perhaps in this case it is between add_group S and add_group (units (option S))</p>



<a name="257356742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257356742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257356742">(Oct 13 2021 at 12:31)</a>:</h4>
<p>But that's really talking about the equiv between S and units (option S)</p>



<a name="257357953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257357953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257357953">(Oct 13 2021 at 12:40)</a>:</h4>
<p>Does just writing <code>=</code> work for your mwe?</p>



<a name="257387447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257387447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257387447">(Oct 13 2021 at 15:41)</a>:</h4>
<p><code>=</code> doesn't work, because one side has type has <code>option S</code>, and the other has type <code>add_group (units (option S))</code>.</p>



<a name="257388125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257388125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257388125">(Oct 13 2021 at 15:45)</a>:</h4>
<p>It sounds like <code>equiv</code> / <code>mul_equiv</code> are maybe not the right relation then.</p>
<p>I'm a bit confused because in e.g. all the ring theory stuff, it says <code>R ≃+* S</code> where <code>{R : Type*}{S : Type*}</code> with <code>[ring R] [ring S]</code>. So I guess there, <code>R</code> is the type, and <code>[ring R]</code> is stating there there is an instance of ring structure on <code>R</code> available to use? And I want to explicitly provide the ring structure to use, which is not an "obvious" one</p>



<a name="257397398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257397398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257397398">(Oct 13 2021 at 16:40)</a>:</h4>
<p>Another option is to provide the ring structure (or your case, <code>add_group</code> and <code>group</code>?) through <code>instance</code> and then provide the equivalence you want as a group isomorphism (although they mix additive and multiplicative notation, so I don't know how that's supposed to work).</p>



<a name="257405440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257405440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257405440">(Oct 13 2021 at 17:31)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span>  let's suppose they both used multiplicative notation -- if I put an <code>instance</code> on it, that would be something like <code>instance [group G] : group_with_zero (option G)</code> and <code>instance [group_with_zero G] : group (units G)</code>, right?</p>
<p>Wouldn't that make things a little bit 'polluted'? Now any discussion of an option of a group is "also" about a group_with_zero, right?</p>



<a name="257405459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257405459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257405459">(Oct 13 2021 at 17:31)</a>:</h4>
<p>Maybe that's okay, I don't know</p>



<a name="257406709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257406709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257406709">(Oct 13 2021 at 17:39)</a>:</h4>
<p>I think units G is a group for any monoid G, by definition. And group_with_zero G implies monoid G.</p>



<a name="257406861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257406861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257406861">(Oct 13 2021 at 17:40)</a>:</h4>
<p>Yes, <a href="https://leanprover-community.github.io/mathlib_docs/find/units.group">docs#units.group</a></p>



<a name="257408174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408174">(Oct 13 2021 at 17:49)</a>:</h4>
<p>Actually I'm afraid this will lead to typeclass loops.</p>



<a name="257408208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408208">(Oct 13 2021 at 17:49)</a>:</h4>
<p>because that's precisely the point of what you're doing: to loop.</p>



<a name="257408274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408274">(Oct 13 2021 at 17:49)</a>:</h4>
<p>Yes, but I'm trying to understand the notation. The actual goal is I would like to write some Lean to show the canonical isomorphism between squags and sloops. :) And while <code>units G</code> can directly inherit the same <code>mul</code> operation from the <code>monoid G</code>, the same is not true between squags and sloops: the isomorphism is "fairly" natural, but using an <code>instance</code> would mean that I now have a <code>*</code> operation that doesn't actually lift! And that would be pretty awful. Hence me trying to make an example here where I'm defining <code>units G</code> to have the opposite multiplication (<code>a*b -&gt; b*a</code>), to suggest the nontriviality of the lift.</p>



<a name="257408608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408608">(Oct 13 2021 at 17:52)</a>:</h4>
<p>I really don't know how to get around the fact that you're transforming <code>G</code> into <code>option G</code> into <code>units (option G)</code>.</p>



<a name="257408666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408666">(Oct 13 2021 at 17:52)</a>:</h4>
<p>Good news is I figured out how to actually get the type signature I wanted, but manually feeding all the type arguments. Unfortunately, that is so awful that it comes out to a good thirty lines of code. I've added it as a comment on the MWE: <a href="https://gist.github.com/Timeroot/65e4e8a5b7a4216251f425c0e1cd1da1">https://gist.github.com/Timeroot/65e4e8a5b7a4216251f425c0e1cd1da1</a></p>
<p>Suggestions for how to make this more legible? For instance, it would be nice if I could name <code>(@@units (option S) 
        (@@monoid_with_zero.to_monoid
          (option S)
          (@@group_with_zero.to_monoid_with_zero (option S) (convert_g_into_g₀_op g)
      ) ) )</code> as one type and re-use that.</p>



<a name="257408853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257408853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257408853">(Oct 13 2021 at 17:53)</a>:</h4>
<p>What about you define the "obvious" equivalences <code>G ≃ units (option G)</code> and <code>G ≃ option (units G)</code> first?</p>



<a name="257409024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257409024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257409024">(Oct 13 2021 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="448405">Alex Meiburg</span> <a href="#narrow/stream/113489-new-members/topic/notation.20for.20isomorphisms/near/257408666">said</a>:</p>
<blockquote>
<p>Unfortunately, that is so awful that it comes out to a good thirty lines of code.</p>
</blockquote>
<p>Okay, this is what horrendous means <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="257409497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257409497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257409497">(Oct 13 2021 at 17:57)</a>:</h4>
<p>Then you can show that your <code>convert_whatever</code>s compose into one direction of the equivalence.</p>



<a name="257409724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257409724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257409724">(Oct 13 2021 at 17:58)</a>:</h4>
<p>I doubt there is anything more Lean-meaningful you can say about it because your begin and end types don't match. Else an group iso would have done the trick.</p>



<a name="257409826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257409826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257409826">(Oct 13 2021 at 17:59)</a>:</h4>
<p>Basically, your operations only add complexity, even though they are morally inverses to each other.</p>



<a name="257410124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257410124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257410124">(Oct 13 2021 at 18:00)</a>:</h4>
<p>One thing you could try, though, is to define <strong>four</strong> conversions: the two you already have + the two that you get by making the former two simplifying.</p>



<a name="257410220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257410220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257410220">(Oct 13 2021 at 18:01)</a>:</h4>
<p>I mean</p>
<ul>
<li><code>G → units G</code></li>
<li><code>G → option G</code></li>
<li><code>units G → G</code></li>
<li><code>option G → G</code></li>
</ul>



<a name="257410381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257410381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257410381">(Oct 13 2021 at 18:02)</a>:</h4>
<p>Of course, for the latter two you'll have to assume that the group structure on <code>units G</code>/<code>option G</code>is somehow what you would get from the former two. Typically, you must assume <code>none = 0</code>.</p>



<a name="257410473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257410473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257410473">(Oct 13 2021 at 18:02)</a>:</h4>
<p>Does that make sense?</p>



<a name="257428950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257428950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257428950">(Oct 13 2021 at 20:05)</a>:</h4>
<p>Are you aware of <a href="https://leanprover-community.github.io/mathlib_docs/find/with_zero">docs#with_zero</a>?</p>



<a name="257437423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257437423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257437423">(Oct 13 2021 at 21:03)</a>:</h4>
<p>Yes, I am, I was avoiding that because it just gives the definitions one more layer to unfold, and my "minimal" example was already bigger than I preferred</p>



<a name="257437633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/notation%20for%20isomorphisms/near/257437633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Meiburg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/notation.20for.20isomorphisms.html#257437633">(Oct 13 2021 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/notation.20for.20isomorphisms/near/257410220">said</a>:</p>
<blockquote>
<p>I mean</p>
<ul>
<li><code>G → units G</code></li>
<li><code>G → option G</code></li>
<li><code>units G → G</code></li>
<li><code>option G → G</code></li>
</ul>
</blockquote>
<p>This is interesting, what would be the equivalence I actually end up proving then?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>