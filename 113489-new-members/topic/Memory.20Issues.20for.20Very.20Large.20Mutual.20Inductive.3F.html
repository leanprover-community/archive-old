---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html">Memory Issues for Very Large Mutual Inductive?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205003581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205003581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205003581">(Jul 25 2020 at 13:16)</a>:</h4>
<p>Hi , Lean Scrub here. I'm working with my colleagues to embed a rapidly growing DSL in Lean. We're tied into Lean as we needs its excellent semantics/math formalisms.  Right now, I'm running into pesky "excessive memory consumption" issues stemming from maybe 800-1000 LOC and a few ~100-200 line mutual inductives. These mutual inductives might need to reach &gt; 1000 LOC (maybe a few thousand, if possible). Maybe I'm being stupid, but I can't find any way online to increase the memory allocated to Lean. More info: Developing out of VSCode with the Lean plugin on an Ubuntu Docker. Is increasing the memory even an option? Any pointers or documentation on how to do that? Would compiling instead be the way to go for us? Sorry to bother and greatly appreciate any help!</p>



<a name="205003671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205003671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205003671">(Jul 25 2020 at 13:19)</a>:</h4>
<p>You can increase the <code>Lean: Memory Limit</code> option in VSCode, which defaults to something like 4gb iirc.</p>



<a name="205004047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205004047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205004047">(Jul 25 2020 at 13:30)</a>:</h4>
<p>Oh duh, see that. Thank you! That's a little scary, however...if I'm running into memory issues at 4gb, when we scale to an order of magnitude+, it sounds like our only hope is compiling?</p>



<a name="205004068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205004068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205004068">(Jul 25 2020 at 13:31)</a>:</h4>
<p>I certainly recommend putting stuff in different files and compiling them. It will give some speedup. Not sure if it will save much memory, though.</p>



<a name="205004422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205004422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205004422">(Jul 25 2020 at 13:43)</a>:</h4>
<p>I guess we'll probably have to go that route. Great, thank you for the information!</p>



<a name="205004964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205004964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205004964">(Jul 25 2020 at 13:58)</a>:</h4>
<p>Also, hopefully, you've seen the various tales of woe and warning about working with <code>mutual</code> here, and considered the advice that usually it's better to avoid that keyword and just "roll your own"?</p>



<a name="205006147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205006147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205006147">(Jul 25 2020 at 14:31)</a>:</h4>
<p>I haven't, actually. Not sure what you mean by roll my own. If you have any protips, they're very welcome. The issue is a lot of our grammar productions interact with each other, and have the potential to become very big, so mutual seems ostensibly necessary in my limited understanding</p>



<a name="205006614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205006614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205006614">(Jul 25 2020 at 14:43)</a>:</h4>
<p>Mutual inductive types are automatically unraveled by lean 3 into inductive types, but humans can sometimes do this process better -- "rolling their own".</p>



<a name="205007931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205007931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205007931">(Jul 25 2020 at 15:17)</a>:</h4>
<p>Okay, thanks, I'll look into it!</p>



<a name="205011474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205011474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205011474">(Jul 25 2020 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-id="301362">@Andrew Elsey</span> I describe the general technique in <a href="#narrow/stream/113489-new-members/topic/Another.20basic.20question.3A.20prove.20equality.20of.20inductive.20type.20arg/near/200314611">this post</a></p>



<a name="205012788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Memory%20Issues%20for%20Very%20Large%20Mutual%20Inductive%3F/near/205012788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Memory.20Issues.20for.20Very.20Large.20Mutual.20Inductive.3F.html#205012788">(Jul 25 2020 at 17:19)</a>:</h4>
<p>Thanks Mario, that's a huge help, I'm going to try to apply that</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>