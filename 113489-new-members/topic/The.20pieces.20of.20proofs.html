---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/The.20pieces.20of.20proofs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html">The pieces of proofs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="215176184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215176184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Allen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215176184">(Oct 31 2020 at 05:50)</a>:</h4>
<p>Hello, I'd like to be able to reduce proofs in Lean to SAT. In order to do this I want to understand what the pieces of proofs are and how they fit together.</p>
<p>So far what I have is that given a <code>L : list name</code> of lemma names which we can use in a proof, we can get a <code>list expr</code> of corresponding <code>expr</code>s with types which look like <code> Π (a₁:α₁) ... (aₙ:αₙ), P(a₁,...,aₙ)</code>. From here we can use <code>open_pis</code> and <code>open_pis_metas</code> from <code>tactic/binder_matching.lean</code> to get a pair <code>([?m_1,...,?m_n], e)</code> where the <code>?m_k</code> are metavariables corresponding to the  Π binders and <code>e</code> is the remaining <code>expr</code>. </p>
<p>For each metavariable in <code>[?m_1,...,?m_n]</code> which is of type <code>Prop</code> we can do a similar thing as above to get <code>([h_1,...,h_n], ?m_k')</code>. And for each of the <code>h_i</code> which are of type <code>Prop</code> we need to do the whole thing again, i.e. we need to treat it as if it's another lemma we can use, but with the caveat the we can only use this lemma in the scope of the metavariable from where it came.  </p>
<p>If we index each lemma with a <code>ℕ</code> and each metavariable of a lemma with another <code>ℕ</code>, then we can construct a function <code>D : ℕ → ℕ → list ℕ</code> which takes the index of a lemma <code>i</code> and the index of one of its metavariables <code>j</code> and returns the list of indices of lemmas <code>k</code> such that the  remaining expr <code>e</code> of lemma <code>k</code> unifies with the expr <code>?m_j</code> of lemma <code>i</code>.</p>
<p>Then a proof would be like a function <code>P : ℕ → ℕ → ℕ</code> where we apply lemma <code>P(i,j)</code> at the jth goal after applying lemma <code>i</code>,  in such a way that there are no stray metavariables at the end. I'm hoping we can ignore all the non-propositional goals because Lean fills them in itself. We also need someway of keeping track of which lemmas are in scope, i.e. when we can use lemma <code>P(i,j)</code>. And which lemmas can be applied to the original goal.</p>
<p>Is this correct so far? And if so, could all proofs using only the lemmas in <code>L</code> be found this way? Or am I missing something?</p>



<a name="215362499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215362499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215362499">(Nov 02 2020 at 18:59)</a>:</h4>
<p>what exactly are you trying to do - are you trying to fill in lean proofs using a sat solver? that seems pretty neat, I had had the impression it was intractable, but I would love to be wrong</p>



<a name="215362588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215362588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215362588">(Nov 02 2020 at 19:00)</a>:</h4>
<p>Isn't this exactly what a hammer tries to do? I think Gabriel had one working in a hacked Lean 3 but it was a highly nontrivial endeavour.</p>



<a name="215364544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215364544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215364544">(Nov 02 2020 at 19:14)</a>:</h4>
<p>sounds pretty neat. which gabriel - ebner? (looking at the user list.)</p>



<a name="215364896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215364896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215364896">(Nov 02 2020 at 19:16)</a>:</h4>
<p>He spoke about it at the Pittsburgh meeting in Jan, it'll be on YT somewhere</p>



<a name="215365107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215365107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215365107">(Nov 02 2020 at 19:18)</a>:</h4>
<p>I think we have only one Gabriel, those people are not Kevins.</p>



<a name="215365130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215365130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215365130">(Nov 02 2020 at 19:18)</a>:</h4>
<p>Or Patricks!</p>



<a name="215374930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215374930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215374930">(Nov 02 2020 at 20:35)</a>:</h4>
<p><a href="https://www.nytimes.com/2015/03/03/upshot/fewer-women-run-big-companies-than-men-named-john.html">https://www.nytimes.com/2015/03/03/upshot/fewer-women-run-big-companies-than-men-named-john.html</a></p>



<a name="215375900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215375900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215375900">(Nov 02 2020 at 20:43)</a>:</h4>
<p>I saw this article a while ago and it made me sad :-(</p>



<a name="215403803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215403803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215403803">(Nov 03 2020 at 01:44)</a>:</h4>
<p>But we have very few Johns!</p>



<a name="215404080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404080">(Nov 03 2020 at 01:48)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> Oh! I just realized, my nemesis H. is in your department, isn't he?</p>



<a name="215404267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404267">(Nov 03 2020 at 01:50)</a>:</h4>
<p>Funny, I never made the connection!  He retired just before I arrived so I don't really know him.</p>



<a name="215404396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404396">(Nov 03 2020 at 01:52)</a>:</h4>
<p>Did you ever meet him (or pass on a misdirected email)?</p>



<a name="215404410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404410">(Nov 03 2020 at 01:52)</a>:</h4>
<p>We met at a conference a few years ago, it was just as confusing as you'd think.</p>



<a name="215404543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404543">(Nov 03 2020 at 01:54)</a>:</h4>
<p>I saw Robert Lewis was scheduled to give a talk about something, like, a step away from things I had been thinking about recently. And I got scared I had submitted an abstract in my sleep or something</p>



<a name="215404547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215404547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215404547">(Nov 03 2020 at 01:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> has perhaps the worst case of this problem.</p>



<a name="215406951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215406951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215406951">(Nov 03 2020 at 02:29)</a>:</h4>
<p><a href="http://phdcomics.com/comics/archive.php?comicid=1890">http://phdcomics.com/comics/archive.php?comicid=1890</a></p>



<a name="215539698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215539698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Allen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215539698">(Nov 04 2020 at 04:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215362499">said</a>:</p>
<blockquote>
<p>what exactly are you trying to do - are you trying to fill in lean proofs using a sat solver? that seems pretty neat, I had had the impression it was intractable, but I would love to be wrong</p>
</blockquote>
<p>Yeah, the dream is to give some tactic a number <code>n</code> and and have it reduce the problem of finding a proof which uses <code>n</code> or less applies to SAT. I think it's theoretically possible by Cook's theorem. I wanted to make sure what I have is correct before devoting more brain energy to the rest of the problem, but I don't think it's a Zulip friendly question.</p>



<a name="215539877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215539877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Allen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215539877">(Nov 04 2020 at 04:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215364896">said</a>:</p>
<blockquote>
<p>He spoke about it at the Pittsburgh meeting in Jan, it'll be on YT somewhere</p>
</blockquote>
<p>Is this the one?  <br>
Gabriel Ebner: Integration of General-Purpose Automated Theorem Provers in Lean<br>
<a href="https://www.youtube.com/watch?v=WydyJJYKyTs">https://www.youtube.com/watch?v=WydyJJYKyTs</a></p>
<div class="youtube-video message_inline_image"><a data-id="WydyJJYKyTs" href="https://www.youtube.com/watch?v=WydyJJYKyTs"><img src="https://i.ytimg.com/vi/WydyJJYKyTs/default.jpg"></a></div>



<a name="215633251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215633251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215633251">(Nov 04 2020 at 19:56)</a>:</h4>
<p>I think the TLDR on this sort of approach is, it's possible, people generally use automated theorem provers (ATPs) rather than SAT solvers, it's kind of one layer of abstraction closer</p>



<a name="215633365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215633365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215633365">(Nov 04 2020 at 19:57)</a>:</h4>
<p>it's more common in e.g. Isabelle with "sledgehammer", see <a href="https://people.mpi-inf.mpg.de/~jblanche/iwil2010-sledgehammer.pdf">https://people.mpi-inf.mpg.de/~jblanche/iwil2010-sledgehammer.pdf</a> for example. In Lean we don't have an approach like this working right now, basically IIUC the mechanisms for communicating with external processes in Lean 3 are too janky and hopefully Lean 4 is better there</p>



<a name="215647219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215647219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Allen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215647219">(Nov 04 2020 at 22:04)</a>:</h4>
<p>Cool, Thanks. I'll check out the link. How good is sledgehammer in Isabelle? Is it used a lot? And is it quick more or less?</p>



<a name="215647741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215647741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215647741">(Nov 04 2020 at 22:10)</a>:</h4>
<p>I don't know, I have only read papers about it, not used it directly</p>



<a name="215656512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215656512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215656512">(Nov 04 2020 at 23:58)</a>:</h4>
<p>It is used quite a lot by some authors. <span class="user-mention" data-user-id="121058">@Jasmin Blanchette</span> is probably best able to speak on the topic since he is one of the authors of sledgehammer and also uses it in his proofs IIRC</p>



<a name="215656526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215656526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215656526">(Nov 04 2020 at 23:59)</a>:</h4>
<p>"quick more or less" means 5-30 seconds</p>



<a name="215656806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215656806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215656806">(Nov 05 2020 at 00:02)</a>:</h4>
<p>We often use <code>tidy</code> in the same way an isabelle user uses <code>sledgehammer</code>. It's good when you don't really want to think about the goal and value the computer's time less than your own</p>



<a name="215657272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657272">(Nov 05 2020 at 00:07)</a>:</h4>
<p>I pretty much always value the computer's time less than my own</p>



<a name="215657390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657390">(Nov 05 2020 at 00:09)</a>:</h4>
<p>in that case you will like <code>sledgehammer</code></p>



<a name="215657453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657453">(Nov 05 2020 at 00:10)</a>:</h4>
<p>a "prove my theorem for me" button is very attractive</p>



<a name="215657627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657627">(Nov 05 2020 at 00:13)</a>:</h4>
<p>maybe if it's fast enough and integrated nicely with VSCode, there won't even have to be a button ;-)</p>



<a name="215657660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657660">(Nov 05 2020 at 00:13)</a>:</h4>
<p>it's not</p>



<a name="215657724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215657724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215657724">(Nov 05 2020 at 00:14)</a>:</h4>
<p>however you might conceivably be able to set it up to run asynchronously in the background</p>



<a name="215658030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658030">(Nov 05 2020 at 00:19)</a>:</h4>
<p>if there were a sledgehammer-like tool for lean, i would investigate getting async stuff to work, but it seems like gabriel's work is pending on lean 4. it might even make sense to do the heavy lifting on a server - latency of a server might be ok given the time scale is not so fast</p>



<a name="215658261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658261">(Nov 05 2020 at 00:22)</a>:</h4>
<p>It's not really worth it to send to a server, that's extra latency for little gain, unless you have a really bad computer</p>



<a name="215658314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658314">(Nov 05 2020 at 00:23)</a>:</h4>
<p>the standard framework for hammers already involves translating things out of the lean process, and as gabriel mentioned that's the bottleneck</p>



<a name="215658365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658365">(Nov 05 2020 at 00:24)</a>:</h4>
<p>I'd assume you run that "out of band", is the idea?</p>



<a name="215658379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658379">(Nov 05 2020 at 00:24)</a>:</h4>
<p>No need to synchronously wait for your sledgehammer to hit, just put some problems somewhere and let a server spend some time finding the right proof term and come back later and fill them in</p>



<a name="215658403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658403">(Nov 05 2020 at 00:24)</a>:</h4>
<p>sure, but that's already happening with the usual model</p>



<a name="215658529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658529">(Nov 05 2020 at 00:27)</a>:</h4>
<p>to me the value of the server is more like ease of installation. like if you have some c++ or rust binary, and theres a bunch of people using lean, but they dont have a consistent environment for compiling c++ themselves, or they aren't going to use your branch or update it frequently. if you run it as a service then the only thing you need to get into their local environment is some socket + communication stuff. but it's all kind of a moot point since there is no existing hammer</p>



<a name="215658675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215658675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215658675">(Nov 05 2020 at 00:29)</a>:</h4>
<p>also, at least in my experience, lean frequently pegs the CPU. if processing is remote you could do something like, the server looks for a proof. if it doesn't find one, fine. if it does, then there's a little blue squiggle or other UI icon that appears at the function level that provides an affordance to auto expand the proof. that way people could start using it without explicitly being too aware of how it works. but again all this theory is moot without working hammer code</p>



<a name="215659754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215659754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215659754">(Nov 05 2020 at 00:45)</a>:</h4>
<p>Sledgehammer in Isabelle does support remote provers, I think via TPTP. No clue how commonly that's used compared to local installs.</p>



<a name="215673263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215673263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215673263">(Nov 05 2020 at 05:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215658403">said</a>:</p>
<blockquote>
<p>sure, but that's already happening with the usual model</p>
</blockquote>
<p>But if I update my file, then <code>tidy</code> starts running again, right? It doesn't report back to me 10s later, saying. "Ooh, btw, whatever shape your proof has 10s ago, I could finish it from there."</p>



<a name="215674593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215674593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215674593">(Nov 05 2020 at 06:16)</a>:</h4>
<p>I mean the isabelle sledgehammer model</p>



<a name="215674638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215674638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215674638">(Nov 05 2020 at 06:16)</a>:</h4>
<p>lean doesn't support this very well</p>



<a name="215733536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215733536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215733536">(Nov 05 2020 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209436">Lucas Allen</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215647219">said</a>:</p>
<blockquote>
<p>Cool, Thanks. I'll check out the link. How good is sledgehammer in Isabelle? Is it used a lot? And is it quick more or less?</p>
</blockquote>
<p>I have some logs from myself and other users showing that Sledgehammer is called up to 100 times a day and succeeds in about 30-40% of cases in the wild. We've done a bigger evaluation in one of my papers (<a href="https://www.cs.vu.nl/~jbe248/mash2.pdf">https://www.cs.vu.nl/~jbe248/mash2.pdf</a>, see Section 7) that somewhat corroborated these results. Sledgehammer runs asynchronously. By default, most provers are run locally, which is faster than using a server. Often it finds a proof within 1 second -- there's very little overhead. It runs asynchronously, but many users wait 30 second (the default timeout) because they can't think while it's running.</p>



<a name="215733631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215733631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215733631">(Nov 05 2020 at 16:09)</a>:</h4>
<p>Some users (e.g. Johannes Hölzl) don't use it much, but others use it all the time. It's perhaps less useful for mathematicians than computer scientists. Hard to tell.</p>



<a name="215733729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215733729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215733729">(Nov 05 2020 at 16:09)</a>:</h4>
<p>Here's a message from Manuel Eberl, who's mostly a math formalizer (reproduced with permission):</p>
<blockquote>
<p>Just fyi, I won the Proof Ground 2020 yesterday, this time without Peter. I was the only participant to solve all the problems and two of them were /very/ last minute. This time, I sledgehammered like crazy, using it both as an oracle to see whether I'm going in the right direction and to simply save time on proofs.</p>
<p>One particular subproblem (afternoon problem 2, task 2) was completely solvable by "induction, auto, sledgehammer" and I did that without even taking any time to understand what the theorem statement actually said. I later tried to prove it by hand and couldn't really figure out how to do it in a simple way, so I left the crucial step to sledgehammer even for the cleaned-up version.</p>
<p>So how's that for an endorsement? ;)</p>
<p>Manuel</p>
</blockquote>



<a name="215733965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215733965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215733965">(Nov 05 2020 at 16:10)</a>:</h4>
<p>At the same time, Sledgehammer is very weak on HO goals -- e.g. it will almost always fail if the goal talks about a set comprehension. We're working on this as part of my project Matryoshka.</p>



<a name="215734248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215734248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215734248">(Nov 05 2020 at 16:11)</a>:</h4>
<p>We ship binaries for all the main ATPs (E, SPASS, Vampire, Z3, CVC4, ...) with Isabelle for all three platforms. Users don't have to compile anything. Sledgehammer works out of the box. It also works when I'm sitting in the metro (where I used to do lots of proving during my PhD, on my way to work).</p>



<a name="215734545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215734545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215734545">(Nov 05 2020 at 16:13)</a>:</h4>
<p>One of the nice things about running provers locally is that you can perform time slicing: run them repeatedly for time slices of, say, 3 s, with different options, axioms, encodings, etc. This really boosts the success rate but is hardly practicable with a remote server.</p>



<a name="215734690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215734690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215734690">(Nov 05 2020 at 16:14)</a>:</h4>
<p>But on a server with (say) 32 cores, you could run all those slices in parallel...</p>



<a name="215734757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215734757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215734757">(Nov 05 2020 at 16:14)</a>:</h4>
<p>I have my own server in my basement. I run lean on it all the time, because my laptop (well, let's not talk about my laptop <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span>)</p>



<a name="215735086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735086">(Nov 05 2020 at 16:16)</a>:</h4>
<p>Do you use the server remotely (i.e., from the laptop) or directly?</p>



<a name="215735327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735327">(Nov 05 2020 at 16:18)</a>:</h4>
<p>I go to the basement about once per month (-;</p>



<a name="215735342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735342">(Nov 05 2020 at 16:18)</a>:</h4>
<p>So I work from my laptop, yes</p>



<a name="215735506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735506">(Nov 05 2020 at 16:19)</a>:</h4>
<p>I wasn't aware that there was a working setup for this. Is VScode running on the server or the laptop?</p>



<a name="215735574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735574">(Nov 05 2020 at 16:19)</a>:</h4>
<p>VScode runs on the server, using X forwarding</p>



<a name="215735719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735719">(Nov 05 2020 at 16:20)</a>:</h4>
<p>Since VScode uses electron, it should in principle be possible (and maybe not even hard) to decouple the editor from the lean server. But I haven't bothered about this.</p>



<a name="215735866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215735866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215735866">(Nov 05 2020 at 16:21)</a>:</h4>
<p>ok. So, no fancy interaction between vscode on the laptop and a Lean server running remotely. Which would be nice but indeed, as you point out, not needed at all for your use case.</p>



<a name="215736050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215736050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215736050">(Nov 05 2020 at 16:22)</a>:</h4>
<p>Basically, the server is just a cheap and noisy replacement for a high-end desktop</p>



<a name="215736090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215736090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215736090">(Nov 05 2020 at 16:22)</a>:</h4>
<p>(If you boot it, it sounds like an airplane taking off <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> )</p>



<a name="215741431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215741431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215741431">(Nov 05 2020 at 16:58)</a>:</h4>
<p>I've used VSCode Remote SSH with DigitalOcean droplets, and I use VSCode Remote WSL as well</p>



<a name="215741498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215741498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215741498">(Nov 05 2020 at 16:58)</a>:</h4>
<p>So the lean server is running on a droplet somewhere, or on my WSL VM, but the VSCode is on my plain old windows</p>



<a name="215741545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215741545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215741545">(Nov 05 2020 at 16:58)</a>:</h4>
<p>And the vscode-lean extension has been fixed so that widgets etc work</p>



<a name="215741550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215741550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215741550">(Nov 05 2020 at 16:58)</a>:</h4>
<p>I just heard about this:<br>
<a href="https://github.com/cdr/code-server">https://github.com/cdr/code-server</a></p>



<a name="215743493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215743493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215743493">(Nov 05 2020 at 17:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215741498">said</a>:</p>
<blockquote>
<p>So the lean server is running on a droplet somewhere, or on my WSL VM, but the VSCode is on my plain old windows</p>
</blockquote>
<p>How did you configure VScode so that it talks to the remote lean server?</p>



<a name="215743732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215743732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215743732">(Nov 05 2020 at 17:13)</a>:</h4>
<p>There is a VSCode running on the remote server too, and it handles communication between the two different VSCodes</p>



<a name="215743759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215743759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215743759">(Nov 05 2020 at 17:13)</a>:</h4>
<p>but a vscode server, not the gui, of course</p>



<a name="215743857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215743857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215743857">(Nov 05 2020 at 17:14)</a>:</h4>
<p>Is that what you meant by your X forwarding example?</p>



<a name="215744019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215744019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215744019">(Nov 05 2020 at 17:15)</a>:</h4>
<p>My workflow doesn't look any different when I open VSCode on my home machine and point it to WSL or a droplet or anything, it sees the files on that machine. But the GUI and VSCode setup is shared across the different points accessed.</p>



<a name="215744881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215744881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215744881">(Nov 05 2020 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215743857">said</a>:</p>
<blockquote>
<p>Is that what you meant by your X forwarding example?</p>
</blockquote>
<p>Nope, with X forwarding I mean the plain old <code>ssh -X</code>, that allows you to run any gui on the remote, and have it display locally.</p>



<a name="215744981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215744981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215744981">(Nov 05 2020 at 17:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215743759">said</a>:</p>
<blockquote>
<p>but a vscode server, not the gui, of course</p>
</blockquote>
<p>Is that the <code>code-server</code> that Adam mention above?</p>



<a name="215748999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215748999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215748999">(Nov 05 2020 at 17:48)</a>:</h4>
<p>Both of those sound less ideal than just talking to the lean server over SSH</p>



<a name="215749046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215749046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215749046">(Nov 05 2020 at 17:48)</a>:</h4>
<p>As far as I've seen lean server just expects input on stdin (and ssh forwards stdin)</p>



<a name="215749108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215749108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215749108">(Nov 05 2020 at 17:49)</a>:</h4>
<p>So if VSCode supports you telling it what command line to use to run lean, just changing that to be <code>ssh remoteserver lean --server whatever</code> should likely work from your local VSCode</p>



<a name="215749178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215749178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215749178">(Nov 05 2020 at 17:49)</a>:</h4>
<p>(Probably I should try that before saying it, but yeah that should work...)</p>



<a name="215750157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750157">(Nov 05 2020 at 17:56)</a>:</h4>
<p>No, it's not the <code>code-server</code>, it's just the Remote-SSH functionality of VSCode. Julian's lean server forwarding is probably the best option (might be fastest in terms of updating views), but requires manual configuration.</p>



<a name="215750236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750236">(Nov 05 2020 at 17:57)</a>:</h4>
<p>Will the following in <code>.bashrc</code>(or <code>.profile</code>) work?</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nb">alias</span> <span class="nv">lean</span><span class="o">=</span><span class="s2">"ssh remoteserver lean --server"</span>
</code></pre></div>



<a name="215750346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750346">(Nov 05 2020 at 17:58)</a>:</h4>
<p>Probably not (sorry I don't have a VSCode setup I can try this on handy otherwise I'd just tell you what to do)</p>



<a name="215750386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750386">(Nov 05 2020 at 17:58)</a>:</h4>
<p>but uh, you can't use an alias because it'll try to run that whole thing as one argument</p>



<a name="215750418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750418">(Nov 05 2020 at 17:58)</a>:</h4>
<p>and also, you probably can't put that in your bashrc because VSCode probably doesn't run lean in a login / interactive shell</p>



<a name="215750420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750420">(Nov 05 2020 at 17:58)</a>:</h4>
<p>It'd probably be a config set in VSCode: <a href="/user_uploads/3121/6yKx-v0OQpkW09P64XgL6QNr/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/6yKx-v0OQpkW09P64XgL6QNr/image.png" title="image.png"><img src="/user_uploads/3121/6yKx-v0OQpkW09P64XgL6QNr/image.png"></a></div>



<a name="215750433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750433">(Nov 05 2020 at 17:58)</a>:</h4>
<p>Ok. I guess you can also make a small shell script</p>



<a name="215750445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750445">(Nov 05 2020 at 17:58)</a>:</h4>
<p>Yeah.</p>



<a name="215750510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750510">(Nov 05 2020 at 17:59)</a>:</h4>
<p>But to first approximation, setting up SSH-Remote is the easiest, IMO.</p>



<a name="215750536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750536">(Nov 05 2020 at 17:59)</a>:</h4>
<p><em>nod</em></p>



<a name="215750757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750757">(Nov 05 2020 at 18:00)</a>:</h4>
<p>Yeah if you want to make it even nicer/well supported we add an envvar</p>



<a name="215750787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750787">(Nov 05 2020 at 18:00)</a>:</h4>
<p>E.g., the most underutilized docker feature that no one seems to know about is <code>DOCKER_HOST</code></p>



<a name="215750849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215750849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215750849">(Nov 05 2020 at 18:01)</a>:</h4>
<p>which does this for docker, so if you set that to e.g. <code>DOCKER_HOST=ssh://server:whatever</code>, then when you run docker commands on localhost, they use dockerd on the remote host</p>



<a name="215754536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215754536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215754536">(Nov 05 2020 at 18:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215750510">said</a>:</p>
<blockquote>
<p>But to first approximation, setting up SSH-Remote is the easiest, IMO.</p>
</blockquote>
<p>Would you mind writing a 7-line howto guide that tells me which steps I need to take to do this?</p>



<a name="215755906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215755906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215755906">(Nov 05 2020 at 18:39)</a>:</h4>
<p>Ping <span class="user-mention" data-user-id="306577">@Matthew Ballard</span> who told me about this code-server</p>



<a name="215756267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215756267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215756267">(Nov 05 2020 at 18:43)</a>:</h4>
<p><a href="https://github.com/cdr/code-server/blob/v3.6.2/doc/guide.md">https://github.com/cdr/code-server/blob/v3.6.2/doc/guide.md</a> this helpful?</p>



<a name="215756571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215756571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215756571">(Nov 05 2020 at 18:45)</a>:</h4>
<p>I think what <span class="user-mention" data-user-id="321696">@Julian Berman</span> is suggesting is to pipe stdin/out via ssh so lean itself would run in the cloud (or Johan's basement), and vscode would run locally.</p>



<a name="215756831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215756831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215756831">(Nov 05 2020 at 18:47)</a>:</h4>
<p>it's more and more common in industry nowadays to do the remote ssh thing, where your codebase lives remotely and you just ssh in. vscode supports it pretty well in general - <a href="https://code.visualstudio.com/docs/remote/ssh">https://code.visualstudio.com/docs/remote/ssh</a></p>



<a name="215757056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757056">(Nov 05 2020 at 18:49)</a>:</h4>
<p>i can't speak to julian's strategy, maybe that ends up being simpler, but the remote ssh method will work for pretty much any programming language environment that you'd use vscode for</p>



<a name="215757206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757206">(Nov 05 2020 at 18:50)</a>:</h4>
<p>there's no real reason for Johan's desktop machine to be so noisy though ;-) i wonder if it's so old the inside is caked with dust and so the fan runs at max speed all the time</p>



<a name="215757495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757495">(Nov 05 2020 at 18:52)</a>:</h4>
<p>I wanted to runs things, eg Latex, Lean, etc.., on an iPad which hamstrings me further. Code-server was the only way in iPadOS I could find to make it happen (other than MS codespaces). With more control over the OS, I would probably go the ssh route.</p>



<a name="215757771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757771">(Nov 05 2020 at 18:54)</a>:</h4>
<p>i see. yeah, it seems like <code>code-server</code> solves the problem of "My local machine can't even run VSCode." If your local machine can run VSCode fine (ie its not an ipad) then probably a better solution is one of the others.</p>



<a name="215757863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757863">(Nov 05 2020 at 18:55)</a>:</h4>
<p>My local machine cannot ssh, run vs code, ...etc</p>



<a name="215757941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215757941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215757941">(Nov 05 2020 at 18:55)</a>:</h4>
<p>(But I can teach a class and write notes on it fairly well)</p>



<a name="215760620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215760620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215760620">(Nov 05 2020 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I can likely put something together, will spend a bit of time getting something working. I can already get a POC working somewhat easily, if it helps, here's what I did quickly:</p>
<p>I put this in a file called <code>~/.local/bin/lean-remote</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">#!/</span><span class="n">usr</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">env</span> <span class="n">python3</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">shlex</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="n">argv</span> <span class="bp">=</span> <span class="o">[</span><span class="s2">"ssh"</span><span class="o">,</span> <span class="s2">"Home.lan"</span><span class="o">,</span> <span class="s2">"--"</span><span class="o">,</span> <span class="s2">"/Users/Julian/.local/bin/lean"</span><span class="o">]</span> <span class="bp">+</span> <span class="o">[</span><span class="n">shlex.quote</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span> <span class="n">for</span> <span class="n">arg</span> <span class="k">in</span> <span class="n">sys.argv</span><span class="o">[</span><span class="mi">1</span><span class="o">:]]</span>
<span class="n">os.execvp</span><span class="o">(</span><span class="n">argv</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">argv</span><span class="o">)</span>
</code></pre></div>
<p>and this similar contents in a file called <code>~/.local/bin/leanpkg-remote</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">#!/</span><span class="n">usr</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">env</span> <span class="n">python3</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">shlex</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="n">argv</span> <span class="bp">=</span> <span class="o">[</span><span class="s2">"ssh"</span><span class="o">,</span> <span class="s2">"Home.lan"</span><span class="o">,</span> <span class="s2">"--"</span><span class="o">,</span> <span class="s2">"/Users/Julian/.local/bin/leanpkg"</span><span class="o">]</span> <span class="bp">+</span> <span class="o">[</span><span class="n">shlex.quote</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span> <span class="n">for</span> <span class="n">arg</span> <span class="k">in</span> <span class="n">sys.argv</span><span class="o">[</span><span class="mi">1</span><span class="o">:]]</span>
<span class="n">os.execvp</span><span class="o">(</span><span class="n">argv</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">argv</span><span class="o">)</span>
</code></pre></div>
<p>(Obviously modify with your own server's hostname and your own server's path to Lean). Then <code>chmod +x ~/.local/bin/lean{,pkg}-remote</code>.</p>
<p>Then I changed the settings <span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> screenshotted to say <code>lean-remote</code> and <code>leanpkg-remote</code> in VSCode.</p>
<p>It works as-is already in that the server comes up, but probably <code>leanpkg.path</code> is now confused because it doesn't resolve anything (similar to when it can't find mathlib locally), so I'll have to investigate that. For now though I have to jump back to meetings, will look later.</p>



<a name="215760716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215760716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215760716">(Nov 05 2020 at 19:17)</a>:</h4>
<p>(The <code>shlex.quote</code> nastiness is because of <code>lean --server</code> getting passed <code>*undefined*</code> by default, which because SSH always runs a shell, you have to escape, which is annoying. That's what, telling lean server what path to assume we're talking about? If so, probably a better solution is just passing a different path there that doesn't have shell-escape-needing chars.)</p>



<a name="215760821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215760821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215760821">(Nov 05 2020 at 19:18)</a>:</h4>
<p>(Not sure if you even were asking about "my way" or instructions with the other way, but yeah, hopefully something there helps or if not that someone else chimes in.)</p>



<a name="215760885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215760885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215760885">(Nov 05 2020 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="238605">@Kevin Lacker</span> and yeah what's there obviously works well, it's an "old" / "trusted" technique, but personally I like it better if you just have to shuttle files back and forth... if you have to also communicate with a process, I find it a bit clunky personally, but definitely if it works for folks who am I to say.</p>



<a name="215761398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215761398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215761398">(Nov 05 2020 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> thanks! I'm now looking into <code>code-server</code> first. But will definitely also keep this in mind.</p>



<a name="215906997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215906997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Allen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215906997">(Nov 06 2020 at 21:35)</a>:</h4>
<p>Thanks Jasmin for the explanation. Sledgehammer looks cool, but I wonder, instead of bringing in sledgehammer to lean, would it be easier to write an ATP in Lean? Or are the ATP's to large and complex?</p>



<a name="215913224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215913224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215913224">(Nov 06 2020 at 22:43)</a>:</h4>
<p>the ATP's aren't written in Isabelle either - they're written in some fast language like c++. lean is another step again slower than languages like python, which are themselves a lot slower than c++ for cpu-bound things like ATPs, so it's just impractical to build a whole atp in lean</p>



<a name="215913322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215913322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215913322">(Nov 06 2020 at 22:44)</a>:</h4>
<p>sledgehammer is basically a translation layer between the interactive theorem prover ie lean or similar system, and the ATP</p>



<a name="215915753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215915753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215915753">(Nov 06 2020 at 23:11)</a>:</h4>
<p>Actually, isabelle has an ATP, and it's a big player in practical isabelle usage: <code>auto</code></p>



<a name="215915822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215915822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215915822">(Nov 06 2020 at 23:12)</a>:</h4>
<p>ATPs are as large and complex as you want them to be</p>



<a name="215915855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215915855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215915855">(Nov 06 2020 at 23:12)</a>:</h4>
<p>the general problem is undecidable so it's just a question of how many bells and whistles you want to build into it</p>



<a name="215915928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215915928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215915928">(Nov 06 2020 at 23:13)</a>:</h4>
<p>Isabelle is implemented in Isabelle/ML, which is a compiled functional programming language</p>



<a name="215916043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215916043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215916043">(Nov 06 2020 at 23:14)</a>:</h4>
<p>Most isabelle tactics are written in the ML part</p>



<a name="215916165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215916165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215916165">(Nov 06 2020 at 23:16)</a>:</h4>
<p>there is some trick for being able to evaluate ML blocks in an isabelle file, but I'm not exactly sure how it is accomplished (and I say this despite having spent several hours diving into the code that does this. The architecture is very complex and mostly undocumented)</p>



<a name="215916212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215916212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215916212">(Nov 06 2020 at 23:17)</a>:</h4>
<p>I think it amounts to runtime interpretation like the lean VM but don't quote me on that</p>



<a name="215918451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215918451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215918451">(Nov 06 2020 at 23:49)</a>:</h4>
<p>i thought <code>auto</code> was considered a tactic, like <code>library_search</code> or <code>finish</code>, rather than an ATP</p>



<a name="215926590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215926590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215926590">(Nov 07 2020 at 02:17)</a>:</h4>
<p>it is a tactic, which is to say it's implemented inside isabelle, but it is an ATP</p>



<a name="215926643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215926643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215926643">(Nov 07 2020 at 02:18)</a>:</h4>
<p><code>finish</code> is an ATP written in lean</p>



<a name="215926657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215926657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215926657">(Nov 07 2020 at 02:19)</a>:</h4>
<p>if your definition of ATP requires that it not be implemented in the tactic framework then of course there aren't going to be any</p>



<a name="215948895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215948895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215948895">(Nov 07 2020 at 10:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209436">Lucas Allen</span> <a href="#narrow/stream/113489-new-members/topic/The.20pieces.20of.20proofs/near/215906997">said</a>:</p>
<blockquote>
<p>Thanks Jasmin for the explanation. Sledgehammer looks cool, but I wonder, instead of bringing in sledgehammer to lean, would it be easier to write an ATP in Lean? Or are the ATP's to large and complex?</p>
</blockquote>
<p><code>super</code> by <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> is an ATP in Lean. Unfortunately the metaprogramming framework is way too slow in Lean 3.</p>



<a name="215948905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215948905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215948905">(Nov 07 2020 at 10:37)</a>:</h4>
<p>And ATPs are large and complex. The Sledgehammer architecture is the simplest way to benefit from all of that.</p>



<a name="215948912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215948912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215948912">(Nov 07 2020 at 10:37)</a>:</h4>
<p>It does rely on an ATP for proof reconstruction, called <code>metis</code>.</p>



<a name="215948925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215948925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215948925">(Nov 07 2020 at 10:38)</a>:</h4>
<p>(I wouldn't call <code>auto</code> an ATP although that's just terminology. It's really <code>simp</code> on steroids.)</p>



<a name="215948962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215948962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215948962">(Nov 07 2020 at 10:38)</a>:</h4>
<p>In a first approximation, <code>metis</code> = <code>super</code> but maybe 100 times faster.</p>



<a name="215949037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215949037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215949037">(Nov 07 2020 at 10:41)</a>:</h4>
<p>Most ATPs are designed around a logical calculus optimized for proof search,  don't depend on user hints,  and are complete. Again, it's not black and white, and I'm a big fan of the notion that ITP and ATP are a gradient -- but I've never heard anybody call <code>auto</code> or <code>simp</code> an ATP before. ;)</p>



<a name="215953429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215953429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215953429">(Nov 07 2020 at 12:47)</a>:</h4>
<p>When we were in NL last year I remarked to Floris that <code>rfl</code> was a "high-powered AI" and he said he'd never thought of it like that before.</p>



<a name="215953486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215953486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215953486">(Nov 07 2020 at 12:48)</a>:</h4>
<p>But I give talks in schools where I prove that 2+2=4 with a six line sequence of definitional rewrites (2+2=2+S(1)=S(2+1)=...) and then I show that the computer, despite having only just seen the definition of 2 and + (I define everything from first principles), can figure out the proof immediately.</p>



<a name="215957063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215957063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215957063">(Nov 07 2020 at 14:22)</a>:</h4>
<p>The other day, I tried to show the amazing power of <code>refl</code> on the example <code>5 + 5 = 25</code>. It failed. I came up with some excuses about the unpredictability of tactics and went on for another five minutes at least.</p>



<a name="215957112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215957112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215957112">(Nov 07 2020 at 14:22)</a>:</h4>
<p>That's the problem when don't teach in front of physical students. ;)</p>



<a name="215963353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215963353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215963353">(Nov 07 2020 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="121058">@Jasmin Blanchette</span> IIRC <code>auto</code> is a combination of <code>simp</code> and a tableau theorem prover, no?</p>



<a name="215963367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215963367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215963367">(Nov 07 2020 at 16:53)</a>:</h4>
<p>or maybe I'm confusing it with <code>blast</code></p>



<a name="215963919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215963919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215963919">(Nov 07 2020 at 17:05)</a>:</h4>
<p>My live <code>refl</code> fail story is the following. After one school talk I was talking to some students about internal storage of naturals, and I said that the Peano approach was of course very inefficient so nothing worked with big numbers. I demonstrated this by showing them that <code>example : 1000000000+1000000000=2000000000 := rfl</code> failed. But it succeeded, really quickly :D . I now use <code>example : 1000000000+2000000000=3000000000 := rfl</code>, which does indeed time out.</p>



<a name="215970709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/The%20pieces%20of%20proofs/near/215970709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/The.20pieces.20of.20proofs.html#215970709">(Nov 07 2020 at 20:00)</a>:</h4>
<p>@Mario: Yes, that's the steroids part.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>