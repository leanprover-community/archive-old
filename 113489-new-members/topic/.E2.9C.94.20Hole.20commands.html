---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html">✔ Hole commands</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259424903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259424903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashley Blacquiere <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259424903">(Oct 28 2021 at 17:36)</a>:</h4>
<p>Trying to get the <a href="https://leanprover-community.github.io/mathlib_docs/hole_commands.html#Equations%20Stub">equations stub hole command</a>  similar to what <span class="user-mention" data-user-id="110596">@Rob Lewis</span>  does in the <a href="https://youtu.be/Y7zjInL82-Q?t=550">metaprogramming videos</a>. When I try it I end up with a bunch of metavariables in the stubbed equations... What am I doing wrong?</p>
<div class="youtube-video message_inline_image"><a data-id="Y7zjInL82-Q" href="https://youtu.be/Y7zjInL82-Q?t=550"><img src="https://uploads.zulipusercontent.net/c1ec5abbbdef059c234de7396100710d4c6e9158/68747470733a2f2f692e7974696d672e636f6d2f76692f59377a6a496e4c38322d512f64656661756c742e6a7067"></a></div><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">expr</span> <span class="bp">→</span> <span class="n">tactic</span> <span class="n">unit</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.var</span> <span class="n">ᾰ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.sort</span> <span class="n">ᾰ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.const</span> <span class="n">ᾰ</span> <span class="n">ᾰ_1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.mvar</span> <span class="n">unique</span> <span class="n">pretty</span> <span class="n">type</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.local_const</span> <span class="n">unique</span> <span class="n">pretty</span> <span class="n">bi</span> <span class="n">type</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.app</span> <span class="n">ᾰ</span> <span class="n">ᾰ_1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.lam</span> <span class="n">var_name</span> <span class="n">bi</span> <span class="n">var_type</span> <span class="n">body</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.pi</span> <span class="n">var_name</span> <span class="n">bi</span> <span class="n">var_type</span> <span class="n">body</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.elet</span> <span class="n">var_name</span> <span class="n">type</span> <span class="n">assignment</span> <span class="n">body</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">expr.macro</span> <span class="n">ᾰ</span> <span class="n">ᾰ_1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_</span>
</code></pre></div>



<a name="259425384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259425384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259425384">(Oct 28 2021 at 17:39)</a>:</h4>
<p>Is that code block the result of what the hole command gave back to you? Looks good to me.</p>



<a name="259425463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259425463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259425463">(Oct 28 2021 at 17:40)</a>:</h4>
<p>The <code>ᾰ</code>s are ugly. So they should be replaced. Maybe the hole command can be taught to do that.</p>



<a name="259426018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashley Blacquiere <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426018">(Oct 28 2021 at 17:44)</a>:</h4>
<p>Ya, the code block is the result of the hole command. However, in the metaprogramming videos linked to above Rob Lewis somehow manages to use what appears to be the same hole command without getting metavariables. They come out more nicely as <code>(var a)</code> etc.</p>



<a name="259426105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashley Blacquiere <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426105">(Oct 28 2021 at 17:45)</a>:</h4>
<p>Oh, ya, just realized in the video they don't have the <code>expr</code> name prepended in dot notation either... So maybe it's something different entirely...?</p>



<a name="259426127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426127">(Oct 28 2021 at 17:45)</a>:</h4>
<p>That's because he used an old version of Lean.</p>



<a name="259426152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426152">(Oct 28 2021 at 17:45)</a>:</h4>
<p>You're using "metavariable" to mean "a variable with an ugly name". That's not what it means.</p>



<a name="259426170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426170">(Oct 28 2021 at 17:46)</a>:</h4>
<p>If you write <code>open expr</code> before your definition, I guess the <code>expr.</code> will go away.</p>



<a name="259426224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426224">(Oct 28 2021 at 17:46)</a>:</h4>
<p>A metavariable is a thing that appears in the goal view as <code>?m1</code> or similar</p>



<a name="259426326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashley Blacquiere <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426326">(Oct 28 2021 at 17:47)</a>:</h4>
<p>Got it. Yes, that makes sense re: <code>open expr</code>.</p>



<a name="259426519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashley Blacquiere <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426519">(Oct 28 2021 at 17:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Hole.20commands/near/259426224">said</a>:</p>
<blockquote>
<p>A metavariable is a thing that appears in the goal view as <code>?m1</code> or similar</p>
</blockquote>
<p>Thanks, Eric. Yes, I thought I probably wasn't stating that correctly, but I wasn't sure how else to communicate 'variable with an ugly name' succinctly. <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="259426530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Hole%20commands/near/259426530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Hole.20commands.html#259426530">(Oct 28 2021 at 17:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="378478">Ashley Blacquiere</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>