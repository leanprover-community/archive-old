---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html">Defining degenerate quadratic forms</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217315724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217315724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217315724">(Nov 19 2020 at 19:08)</a>:</h4>
<p>I have a definition which needs a proof that a <a href="https://leanprover-community.github.io/mathlib_docs/find/quadratic_form">docs#quadratic_form</a> is non-degenerate. While I can write that as <code>∀ m, Q m = 0 → m = 0</code>, it would be nice if I could write it as <code>¬Q.degenerate</code> (since we already have <a href="https://leanprover-community.github.io/mathlib_docs/find/quadratic_form.pos_def">docs#quadratic_form.pos_def</a>).</p>
<p>I tried to define <code>degenerate</code>, but the proof I needed to get back to the form that's actually useful is ugly </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.quadratic_form</span>

<span class="kn">section</span> <span class="n">degenerate</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">R₂</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M₂</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M₂</span><span class="o">]</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R₂</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R₂</span> <span class="n">M₂</span><span class="o">]</span>

<span class="sd">/-- A degenerate quadratic form is zero on some nonzero vectors. -/</span>
<span class="kd">def</span> <span class="n">degenerate</span> <span class="o">(</span><span class="n">Q₂</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">R₂</span> <span class="n">M₂</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="n">Q₂</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="kd">lemma</span> <span class="n">non_degenerate_iff</span> <span class="o">(</span><span class="n">Q₂</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">R₂</span> <span class="n">M₂</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">degenerate</span> <span class="n">Q₂</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">Q₂</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span>
  <span class="n">unfold</span> <span class="n">degenerate</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">h</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="n">forall_not_of_not_exists</span> <span class="n">h</span> <span class="n">x</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="n">mt</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">this</span><span class="o">,</span> <span class="o">},</span>  <span class="bp">-</span> <span class="bp">-</span> <span class="n">what</span> <span class="n">a</span> <span class="n">mess</span><span class="bp">!</span>
    <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">quadratic_form.map_zero</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rintros</span> <span class="n">ha</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hqx</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="n">hx</span> <span class="o">((</span><span class="n">ha</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hqx</span><span class="o">)</span>
<span class="o">}</span>

<span class="kd">end</span> <span class="n">degenerate</span>
</code></pre></div>
<p>Would it make more sense to define <code>non_degenerate</code>? It would make it much easier to use, but then <code>¬non_degenerate</code> is pretty ugly if that ever shows up.</p>
<p>Can anyone suggest how to golf the mess above?</p>



<a name="217315966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217315966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217315966">(Nov 19 2020 at 19:10)</a>:</h4>
<p>My intuition says that it will be useful to define <code>nondegenerate</code> directly, yes.</p>



<a name="217316005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316005">(Nov 19 2020 at 19:10)</a>:</h4>
<p><code>push_neg</code> should help somehow</p>



<a name="217316011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316011">(Nov 19 2020 at 19:10)</a>:</h4>
<p>It's a very common assumption. More common then assuming that something is degenerate.</p>



<a name="217316037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316037">(Nov 19 2020 at 19:11)</a>:</h4>
<p>Indeed - it just seems unfortunate to me to use <code>not</code> in a name when we already have a symbol for it</p>



<a name="217316159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316159">(Nov 19 2020 at 19:12)</a>:</h4>
<p>Maybe we should call them <code>smooth</code>?</p>



<a name="217316177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316177">(Nov 19 2020 at 19:12)</a>:</h4>
<p><code>smooth</code> = <code>nonsingular</code> = <code>nondegenerate</code></p>



<a name="217316179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316179">(Nov 19 2020 at 19:12)</a>:</h4>
<p>oh I see, part of the problem is you have an iff on the nondegenerate side</p>



<a name="217316194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316194">(Nov 19 2020 at 19:12)</a>:</h4>
<p>I can remove that iff</p>



<a name="217316204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316204">(Nov 19 2020 at 19:12)</a>:</h4>
<p>Since the reverse direction is obvious and holds for all <code>Q</code> anyway (<a href="https://leanprover-community.github.io/mathlib_docs/find/quadratic_form.map_zero">docs#quadratic_form.map_zero</a>)</p>



<a name="217316676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316676">(Nov 19 2020 at 19:15)</a>:</h4>
<p>I still think it's best to define <code>nondegenerate</code> with that name</p>



<a name="217316687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316687">(Nov 19 2020 at 19:15)</a>:</h4>
<p>compare <code>set.nonempty</code></p>



<a name="217316759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316759">(Nov 19 2020 at 19:16)</a>:</h4>
<p>Well, presumably <a href="https://leanprover-community.github.io/mathlib_docs/find/set.empty">docs#set.empty</a> is taken by ∅</p>



<a name="217316789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316789">(Nov 19 2020 at 19:16)</a>:</h4>
<p>It's just a historical accident that things like nondegenerate and nonempty have the non- prefix while things like injective don't</p>



<a name="217316853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316853">(Nov 19 2020 at 19:16)</a>:</h4>
<p>With an underscore to match <code>pos_def</code>?</p>



<a name="217316920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316920">(Nov 19 2020 at 19:17)</a>:</h4>
<p>No, nondegenerate is one word, positive definite is two words</p>



<a name="217316944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217316944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217316944">(Nov 19 2020 at 19:17)</a>:</h4>
<p>Oh, I assumed it was <code>non-degenerate</code> vs <code>positive-definite</code></p>



<a name="217317041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317041">(Nov 19 2020 at 19:18)</a>:</h4>
<p>Yeah, math English is weird <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="217317066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317066">(Nov 19 2020 at 19:18)</a>:</h4>
<p>Wait, isn't my claim correct? The two random webpages I had open confirmed my spelling</p>



<a name="217317069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317069">(Nov 19 2020 at 19:18)</a>:</h4>
<p>Or is it non-nonwerid?</p>



<a name="217317090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317090">(Nov 19 2020 at 19:19)</a>:</h4>
<p>+1 for <code>nondegenerate</code> btw</p>



<a name="217317130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317130">(Nov 19 2020 at 19:19)</a>:</h4>
<p>Never in my life have I ever assumed explicitly that a quadratic form was degenerate!</p>



<a name="217317138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317138">(Nov 19 2020 at 19:19)</a>:</h4>
<p>I think positive definite could have a hyphen but it would be weird in nondegenerate</p>



<a name="217317176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317176">(Nov 19 2020 at 19:19)</a>:</h4>
<p>Alright, will do that</p>



<a name="217317191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317191">(Nov 19 2020 at 19:19)</a>:</h4>
<p>I guess I should keep the lemma but in reverse?</p>



<a name="217317579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317579">(Nov 19 2020 at 19:22)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- A non-degenerate quadratic form is zero only on zero vectors. -/</span>
<span class="kd">def</span> <span class="n">nondegenerate</span> <span class="o">(</span><span class="n">Q₂</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">R₂</span> <span class="n">M₂</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">Q₂</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="kd">lemma</span> <span class="n">not_nondegenerate_iff</span> <span class="o">(</span><span class="n">Q₂</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">R₂</span> <span class="n">M₂</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">nondegenerate</span> <span class="n">Q₂</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="n">Q₂</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">nondegenerate</span><span class="o">,</span>
  <span class="n">push_neg</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hqx</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hqx</span><span class="o">⟩,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hqx</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hqx</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217317641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317641">(Nov 19 2020 at 19:22)</a>:</h4>
<p>Thanks for the push_neg tip.</p>



<a name="217317699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317699">(Nov 19 2020 at 19:23)</a>:</h4>
<p><del>(docstring is wrong)</del></p>



<a name="217317934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217317934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217317934">(Nov 19 2020 at 19:25)</a>:</h4>
<p>Do you even need the split? Or will something like <code>simp only [and_comm]</code> close it after <code>push_neg</code>?</p>



<a name="217318120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217318120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217318120">(Nov 19 2020 at 19:26)</a>:</h4>
<p>should nondegenerate be a class?</p>



<a name="217318203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217318203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217318203">(Nov 19 2020 at 19:27)</a>:</h4>
<p><code>simp only [and_comm, exists_prop]</code> does the trick</p>



<a name="217318535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217318535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217318535">(Nov 19 2020 at 19:29)</a>:</h4>
<p>Since <code>pos_def</code> isn't, I'd say <code>nondegenerate</code> shouldn't be either</p>



<a name="217319371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217319371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217319371">(Nov 19 2020 at 19:34)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5045">#5045</a></p>



<a name="217319419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217319419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217319419">(Nov 19 2020 at 19:35)</a>:</h4>
<p>Proving that <code>nondegenerate Q ↔ Q.discr ≠ 0</code> (given sufficient constraints for <code>discr</code> to exist) is an exercise left to the reviewer</p>



<a name="217389247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217389247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217389247">(Nov 20 2020 at 11:27)</a>:</h4>
<p>Is this definitely the standard terminology?</p>
<p>Ignoring characteristic 2 for simplicity, I would refer to a quadratic form as non-degenerate when its associated bilinear form is non-degenerate.</p>
<p>E.g., I would say <code>Q(x, y) = x² - y²</code> is non-degenerate (in two dimensions) even though <code>Q(1, 1) = 0</code>.</p>



<a name="217389524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217389524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217389524">(Nov 20 2020 at 11:30)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="240862">@Oliver Nash</span>.  I would say that <code>nondegenerate</code> is the condition that the appropriate determinant does not vanish, while not having a non-trivial zero I would call <code>anisotropic</code>.</p>



<a name="217390058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217390058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217390058">(Nov 20 2020 at 11:37)</a>:</h4>
<p>If I'm reading that correctly, is my claim <code>nondegenerate Q ↔ Q.discr ≠ 0</code> untrue in the current definition?</p>



<a name="217390067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217390067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217390067">(Nov 20 2020 at 11:37)</a>:</h4>
<p>Yes it's untrue.</p>



<a name="217390107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217390107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217390107">(Nov 20 2020 at 11:37)</a>:</h4>
<p>Whoops</p>



<a name="217390668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217390668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217390668">(Nov 20 2020 at 11:44)</a>:</h4>
<p>That's unfortunate, because my lemma  that needed <code>Q.nondegenerate</code>  is <del>probably harder to prove than I thought</del> also untrue for the case I had in mind</p>



<a name="217391163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217391163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217391163">(Nov 20 2020 at 11:50)</a>:</h4>
<p>As Damiano says, the condition that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span> is nowhere-vanishing (except at zero) is called anisotropic and is far more subtle than being nondegenerate (for example it is not preserved if you change the base field: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2+y^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> is anisotropic over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span> but not over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span>).</p>



<a name="217391322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217391322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217391322">(Nov 20 2020 at 11:52)</a>:</h4>
<p>My apologies for hitting the merge button too quickly <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="217391687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217391687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217391687">(Nov 20 2020 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> Are you working on a PR that updates the terminology? If not, then I will do it.</p>



<a name="217391724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217391724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217391724">(Nov 20 2020 at 11:57)</a>:</h4>
<p>Please go ahead</p>



<a name="217392191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217392191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217392191">(Nov 20 2020 at 12:02)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5050">#5050</a></p>



<a name="217392528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217392528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217392528">(Nov 20 2020 at 12:06)</a>:</h4>
<p>Is the definition I should have used <code>∀ x, (∀ y, polar Q x y = 0) → x = 0</code>?</p>



<a name="217393545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217393545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217393545">(Nov 20 2020 at 12:18)</a>:</h4>
<p>Is <code>polar Q</code> the associated bilinear form? There are subtleties in characteristic 2 which I am not really on top of, but away from char 2 if <code>polar Q x y = Q (x + y) - Q x - Q y</code> then what you posted is the definition of nondegenerate. In char 2, x^2 would be degenerate here because <code>polar Q</code> would be identically zero.</p>



<a name="217393780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217393780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217393780">(Nov 20 2020 at 12:21)</a>:</h4>
<p>My (poor) understanding of char 2 is that there are two words for bilinear forms (perhaps alternating and antisymmetric?) which are the same in general but have distinct meanings in char 2 (one implies the other), and perhaps it's the case that people don't really study quadratic forms at all in char 2?</p>



<a name="217396023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217396023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217396023">(Nov 20 2020 at 12:46)</a>:</h4>
<p><code>polar Q x y</code> is what you say it is</p>



<a name="217396031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217396031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217396031">(Nov 20 2020 at 12:46)</a>:</h4>
<p>Which is _not_ the associated bilinear form, but twice it</p>



<a name="217401863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217401863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217401863">(Nov 20 2020 at 13:42)</a>:</h4>
<p>A statement that works regardless of the characteristic is that the quadratic form is nondegenerate iff the corresponding quadric is smooth.  You can compute the singular locus using the jacobian criterion.  In turn, this means that the determinant of the hessian matrix must be nonzero <em>at all points where the quadratic form vanishes</em>.  In characteristic different from 2, it suffices to check non-vanishing of the determinant, thanks to Euler's identity.  In characteristic 2, the extra condition is needed.  However, it is all that needs to be checked.  This can be further computed explicitly: let me know if there is any reason for wanting to do this explicitly!</p>



<a name="217402094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402094">(Nov 20 2020 at 13:44)</a>:</h4>
<p>That definition sounds like a lot more work than the one I give above...</p>



<a name="217402172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402172">(Nov 20 2020 at 13:45)</a>:</h4>
<p>it is simply requiring a polynomial not to vanish.  I am not sure how hard it would be to implement this.  If determinants are available, you can compute the formula using cramer's rule</p>



<a name="217402180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402180">(Nov 20 2020 at 13:45)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> What would you propose as Lean definition of <code>quadratic_form.nondegenerate</code>?</p>



<a name="217402213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402213">(Nov 20 2020 at 13:45)</a>:</h4>
<p>We have determinants and Cramer's rule</p>



<a name="217402310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402310">(Nov 20 2020 at 13:46)</a>:</h4>
<p>Not in characteristic 2 we don't, the conversion to matrix doesn't exist there</p>



<a name="217402360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402360">(Nov 20 2020 at 13:46)</a>:</h4>
<p>Aah, snap</p>



<a name="217402394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402394">(Nov 20 2020 at 13:47)</a>:</h4>
<p>Ok, so here is what is true mathematically: if the dimension of the kernel of the hessian is at least 2, the quadratic form is degenerate always.  If the dimension of the kernel is at most one, then use cramer's rule to find a generator of the kernel, evaluate the quadratic form on this vector and check that you get a non-zero result</p>



<a name="217402455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402455">(Nov 20 2020 at 13:47)</a>:</h4>
<p>by hessian, i really mean the matrix of second derivatives.  explicitly, with <code>0</code> along the diagonal...</p>



<a name="217402533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402533">(Nov 20 2020 at 13:48)</a>:</h4>
<p>Are you perhaps describing <code>decidable Q.nondegenerate</code>?</p>



<a name="217402579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402579">(Nov 20 2020 at 13:49)</a>:</h4>
<p>very likely what i described is decidable, or should at least assume <code>classical</code>!</p>



<a name="217402608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402608">(Nov 20 2020 at 13:49)</a>:</h4>
<p>What you have sounds like an algorithm for determining if Q is degenerate</p>



<a name="217402635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402635">(Nov 20 2020 at 13:49)</a>:</h4>
<p>And less like a definition of degeneracy</p>



<a name="217402764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217402764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217402764">(Nov 20 2020 at 13:50)</a>:</h4>
<p>my definition is that the vanishing set in <code>P^n</code> is smooth.  in turn, i can compute this via the method described</p>
<p>so, i guess that my definition would be via smoothness, but this seems less accessible in lean than computing determinants</p>



<a name="217410472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217410472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217410472">(Nov 20 2020 at 14:54)</a>:</h4>
<p>Oops! I should have looked at the definitions more carefully yesterday :(</p>
<p>If you want a coordinate-free way to define nondegeneracy for a quadratic form, you can say that it's regular over every field extension of the base (it's enough to check it for an algebraic closure, but it's presumably easier to write down the definition with every field extension), where "regular" can be defined with a simple linear-algebraic condition in terms of the quadratic form and the associated polar form. But it seems that quadratic forms in mathlib are defined over arbitrary rings, not just fields, and I don't know what the correct definition is in general (without going into more complicated algebraic geometry).</p>



<a name="217410850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217410850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217410850">(Nov 20 2020 at 14:57)</a>:</h4>
<p>Working over a field, you only need to check it over purely inseparable extensions of degree a power of 2: when the characteristic is different from 2, the singular locus has a point over the algebraic closure iff it has a point over the ground field.</p>



<a name="217411043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411043">(Nov 20 2020 at 14:59)</a>:</h4>
<p>Sure, I agree. But it feels unnatural to <strong>define</strong> something by saying "if the characteristic is 2, do this, and if not, then do that."</p>



<a name="217411169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411169">(Nov 20 2020 at 15:00)</a>:</h4>
<p>I think it makes more sense to give a uniform definition at the start, and prove a theorem later saying that if the characteristic is not 2, then you can use a simpler condition, and if it's 2, use another condition</p>



<a name="217411198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411198">(Nov 20 2020 at 15:00)</a>:</h4>
<p>Of course!  Although the statement "check it over purely inseparable extensions of degree a power of 2" was my hack for not separating cases!</p>



<a name="217411256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411256">(Nov 20 2020 at 15:00)</a>:</h4>
<p>Ah I see :) The type of purely inseparable extensions of degree 2 can be empty <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="217411286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411286">(Nov 20 2020 at 15:01)</a>:</h4>
<p>rather than empty, just trivial!</p>



<a name="217411342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411342">(Nov 20 2020 at 15:01)</a>:</h4>
<p>Oh right, power of 2 :)</p>



<a name="217411360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411360">(Nov 20 2020 at 15:01)</a>:</h4>
<p>(sorry, the ones of degree 2 can be empty: the ones of degree a power of two always contains one element)</p>



<a name="217411558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411558">(Nov 20 2020 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Do you know of a simple definition over an arbitrary ring? The only one I can think of is to work with the family of quadrics over spec of the base ring.</p>



<a name="217411684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411684">(Nov 20 2020 at 15:03)</a>:</h4>
<p>(And to be honest I've never actually seen such a definition in the literature)</p>



<a name="217411944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217411944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217411944">(Nov 20 2020 at 15:05)</a>:</h4>
<p>Of course another option is that we can assume that the base ring is a field when defining <code>quadratic_form.nondegenerate</code>.</p>



<a name="217412320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217412320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217412320">(Nov 20 2020 at 15:08)</a>:</h4>
<p>or maybe an integral domain?</p>



<a name="217412392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217412392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217412392">(Nov 20 2020 at 15:08)</a>:</h4>
<p>I don't think it works over an arbitrary domain, you can have bad reduction at some primes</p>



<a name="217412413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217412413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217412413">(Nov 20 2020 at 15:09)</a>:</h4>
<p>Well... it depends on how you define it.</p>



<a name="217412441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217412441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217412441">(Nov 20 2020 at 15:09)</a>:</h4>
<p>OK, I don't really know what I'm talking about, but it seems awkward to exclude the case of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></p>



<a name="217412883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217412883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217412883">(Nov 20 2020 at 15:12)</a>:</h4>
<p>Yeah, I agree it would be nice to have a definition that works (At least) over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Z</mi></mrow><annotation encoding="application/x-tex">\mathbf{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68611em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbf">Z</span></span></span></span></span></p>



<a name="217413278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413278">(Nov 20 2020 at 15:14)</a>:</h4>
<p>I think that as soon as you start wondering about quadratic forms over arbitrary rings, a little of language from algebraic geometry makes life much simpler.  I would say that the "correct" generalization is to use smoothness of the morphism to the base ring/scheme.  However, it is hard to find a quadratic form smooth over Z: the requirement becomes that the discriminant should be "almost 1" (you have some extra freedom coming from 2, of all places).  For instance, xy=0 is smooth in two variables over Z and you get "for free" that xy-z^2=0 is also smooth over Z.  You can construct further examples using E_8 in 8 or 9 dimensions, but integral, unimodular lattices are hard to come by.</p>



<a name="217413542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413542">(Nov 20 2020 at 15:16)</a>:</h4>
<p>it might be easier to say that a form over an integral domain is nondegenerate if it is so over the field of fractions and then think about revising this definition later on, once you really need to deduce properties of reductions modulo primes of the base ring</p>



<a name="217413600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413600">(Nov 20 2020 at 15:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms/near/217413542">said</a>:</p>
<blockquote>
<p>it might be easier to say that a form over an integral domain is nondegenerate if it is so over the field of fractions and then think about revising this definition later one, once you really need to deduce properties of reductions modulo primes of the base ring</p>
</blockquote>
<p>This should be more appropriately called "generically nondegenerate"</p>



<a name="217413662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413662">(Nov 20 2020 at 15:17)</a>:</h4>
<p>I agree, but it might be helpful to save the "generically" until you also have a "specially" in the picture!</p>



<a name="217413837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413837">(Nov 20 2020 at 15:19)</a>:</h4>
<p>for instance, even thinking about the hasse-minkowski theorem, it may not be too useful to have the "special" point of view.  certainly not for the statement, but possibly not even for the proof...</p>



<a name="217413911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217413911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217413911">(Nov 20 2020 at 15:19)</a>:</h4>
<p>Wait.... I think the following is true: A quadratic form over a ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> is nondegenerate (in the correct sense) if its base-change with respect to every morphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">A \to K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> is a field, is nondegenerate (or just regular)</p>



<a name="217414084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217414084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217414084">(Nov 20 2020 at 15:21)</a>:</h4>
<p>i vote for "nondegenerate" to mean "generically nondegenerate over an integral domain".  once people really want to use quadratic forms over more general rings and really deal with reduction types, then they might want to start using different names, like smooth, conic/quadric bundle, brauer-severi variety,...</p>



<a name="217414330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217414330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217414330">(Nov 20 2020 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms/near/217413911">said</a>:</p>
<blockquote>
<p>Wait.... I think the following is true: A quadratic form over a ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> is nondegenerate (in the correct sense) if its base-change with respect to every morphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">A \to K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> is a field, is nondegenerate (or just regular)</p>
</blockquote>
<p>I believe that this can be proved using that smoothness is local on the base.  you can get away with regularity, since you allow field extensions, and geometrically regular means smooth.</p>



<a name="217414978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217414978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217414978">(Nov 20 2020 at 15:28)</a>:</h4>
<p>It would be good if someone could capture this fruitful dialogue in a lean file <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="217414992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217414992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217414992">(Nov 20 2020 at 15:28)</a>:</h4>
<p>All this just tells me that we really need more algebraic geometry in mathlib</p>



<a name="217415001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217415001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217415001">(Nov 20 2020 at 15:28)</a>:</h4>
<p>(And PR the result to mathlib)</p>



<a name="217415069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217415069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217415069">(Nov 20 2020 at 15:29)</a>:</h4>
<p>But we can't really start doing more AG if we don't have the definition of a flat module... that's what has been stopping me</p>



<a name="217415101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217415101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217415101">(Nov 20 2020 at 15:29)</a>:</h4>
<p>A more hands on approach to this issue is to compute the "universal determinant":</p>
<p>det (hessian matrix)</p>
<p>as a polynomial with integer coefficients.  Note that there are lots of 2's along the diagonal.  Remove the largest power of 2 that divides the polynomial above and define a form to be non-degenerate if this polynomial does not vanish when evaluated on the coefficients of the quadratic form.  does this seem like a reasonable point of view?</p>



<a name="217416226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217416226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217416226">(Nov 20 2020 at 15:37)</a>:</h4>
<p>Does mathlib even have base-change of vectorspaces w.r.t. field extensions?</p>



<a name="217417129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217417129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217417129">(Nov 20 2020 at 15:43)</a>:</h4>
<p>Not yet, see the base change PR <a href="https://github.com/leanprover-community/mathlib/issues/4773">#4773</a></p>



<a name="217420637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217420637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217420637">(Nov 20 2020 at 16:05)</a>:</h4>
<p>Well, modulo the missing stuff about base-change (and some pseudocode), here is what I propose as a definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.quadratic_form</span>
<span class="kn">import</span> <span class="n">linear_algebra</span>

<span class="kn">open</span> <span class="n">quadratic_form</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">vector_space</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">K</span> <span class="n">M</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">radical</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">K</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">m</span> <span class="bp">|</span> <span class="n">Q</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span> <span class="o">(</span><span class="n">polar</span> <span class="n">Q</span><span class="o">)</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)},</span>
  <span class="n">zero_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">add_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">smul_mem'</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>

<span class="c1">-- nondegenerate Q := ∀ (L : field extensions of K), radical (base_change L Q) = ⊥</span>
</code></pre></div>



<a name="217420785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217420785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217420785">(Nov 20 2020 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> does this look right to you?</p>



<a name="217421154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217421154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217421154">(Nov 20 2020 at 16:09)</a>:</h4>
<p>But when actually making this definition, we will need to quantify over all field extensions, and in particular over some types, so some universe annotations will be necessary as well..</p>



<a name="217422016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217422016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217422016">(Nov 20 2020 at 16:14)</a>:</h4>
<p>Looks like the following is equivalent:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.quadratic_form</span>
<span class="kn">import</span> <span class="n">linear_algebra</span>

<span class="kn">open</span> <span class="n">quadratic_form</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">vector_space</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">Q</span> <span class="o">:</span> <span class="n">quadratic_form</span> <span class="n">K</span> <span class="n">M</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">radical</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">K</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">m</span> <span class="bp">|</span> <span class="n">Q</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span> <span class="o">(</span><span class="n">polar</span> <span class="n">Q</span><span class="o">)</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)},</span>
  <span class="n">zero_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">add_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">smul_mem'</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">polar_radical</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">K</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">m</span> <span class="bp">|</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">polar</span> <span class="n">Q</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">},</span>
  <span class="n">zero_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">add_mem'</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">smul_mem'</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">nondegenerate</span> <span class="o">:=</span> <span class="o">(</span><span class="n">radical</span> <span class="n">Q</span> <span class="bp">=</span> <span class="bp">⊥</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">vector_space.dim</span> <span class="o">(</span><span class="n">polar_radical</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">)</span>
</code></pre></div>



<a name="217424001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217424001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217424001">(Nov 20 2020 at 16:28)</a>:</h4>
<p>Apparently quadratic forms in characteristic 2 <a href="https://en.wikipedia.org/wiki/Arf_invariant">deserve their own theory</a>!</p>



<a name="217424441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217424441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217424441">(Nov 20 2020 at 16:30)</a>:</h4>
<p>The equivalence with the second definition I mentioned above comes from a theorem in the book by Elman, Karpenko and Merkurjev. They do a lot with quadratic forms in arbitrary characteristic, whereas most texts tacitly assume characteristic not 2.</p>



<a name="217425214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217425214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217425214">(Nov 20 2020 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms/near/217420785">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> does this look right to you?</p>
</blockquote>
<p>If I understand this correctly, this means that you are requiring <code>m</code> to be a root of the quadratic form <em>and</em> in the kernel of the hessian matrix.  I would call this a correct definition of nondegenerate , once you extend to all extensions (or, alternatively, all purely inseparable extensions of degree a power of 2).</p>



<a name="217425420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217425420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217425420">(Nov 20 2020 at 16:36)</a>:</h4>
<p>(being in the kernel of the hessian matrix implies the vanishing of <code>Q</code> over fields of characteristic different from 2, by Euler's identity.)</p>



<a name="217425442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217425442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217425442">(Nov 20 2020 at 16:36)</a>:</h4>
<p>I think with the second definition it's not required to extend the base.</p>



<a name="217425551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217425551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217425551">(Nov 20 2020 at 16:37)</a>:</h4>
<p>See lemma 7.16 on page 43 here:<br>
<a href="https://sites.ualberta.ca/~karpenko/publ/Kniga.pdf">https://sites.ualberta.ca/~karpenko/publ/Kniga.pdf</a></p>



<a name="217426027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217426027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217426027">(Nov 20 2020 at 16:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms/near/217425551">said</a>:</p>
<blockquote>
<p>See lemma 7.16 on page 43 here:<br>
<a href="https://sites.ualberta.ca/~karpenko/publ/Kniga.pdf">https://sites.ualberta.ca/~karpenko/publ/Kniga.pdf</a></p>
</blockquote>
<p>I agree that this is indeed equivalent!  This should be the argument with cramer's rule.</p>



<a name="217426341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217426341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217426341">(Nov 20 2020 at 16:41)</a>:</h4>
<p>Alright, I should go back to writing notes for my class now :)</p>



<a name="217426846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20degenerate%20quadratic%20forms/near/217426846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20degenerate.20quadratic.20forms.html#217426846">(Nov 20 2020 at 16:45)</a>:</h4>
<p>thank you for the formalization!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>