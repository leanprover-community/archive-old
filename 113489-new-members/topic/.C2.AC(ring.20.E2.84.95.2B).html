---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html">¬(ring ℕ+)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220945936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220945936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220945936">(Dec 26 2020 at 02:38)</a>:</h4>
<p>I can't say <code>¬(ring ℕ+) </code> because it's not a proposition.  I have to say</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">¬</span><span class="o">(</span><span class="n">is_subring</span> <span class="o">{</span><span class="n">x</span><span class="o">:</span><span class="n">ℕ</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">})</span>
</code></pre></div>
<p>If I wanted to prove something about <code>ℕ+</code>, how would I carry over the restated proposition?  Or is there a different way to phrase the same proposition on <code>ℕ+</code>?</p>
<p>NOTE: This is a hypothetical possible future usage question, so please don't stress.  I'm just curious in a style guide sense.</p>



<a name="220946088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220946088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220946088">(Dec 26 2020 at 02:44)</a>:</h4>
<p>You could say <code>ring N+ -&gt; false</code>, but this is false</p>



<a name="220946091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220946091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220946091">(Dec 26 2020 at 02:44)</a>:</h4>
<p>because there is a ring structure on <code>N+</code>, namely the one you get as the preimage of an isomorphism from <code>int</code></p>



<a name="220946376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220946376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220946376">(Dec 26 2020 at 02:54)</a>:</h4>
<p>In the end I just need to prove</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="bp">¬</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">∈</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">)</span>
</code></pre></div>
<p>which I think is enough to show that <code>ℕ+</code> is not an integral domain.  But it's not letting me say it:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">integral_domain</span> <span class="n">α</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">α</span>
<span class="bp">⊢</span> <span class="n">has_mem</span> <span class="n">ℕ</span> <span class="kt">Type</span>
</code></pre></div>
<p>I'm trying to a find a checkable way of saying that <code>ℕ+</code> is not an integral domain because it doesn't have 0.  I don't see a way.</p>



<a name="220946702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220946702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220946702">(Dec 26 2020 at 03:05)</a>:</h4>
<p>What Mario is saying is that nothing is stopping you from doing this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.pnat.basic</span>

<span class="kd">instance</span> <span class="n">blah</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">ℕ</span><span class="bp">+</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">⟩</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">37</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="220947674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220947674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220947674">(Dec 26 2020 at 03:39)</a>:</h4>
<p>That doesn't make <code>0 ∉ ℕ+</code> checkable, I still get the same error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">blah</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">ℕ</span><span class="bp">+</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">⟩</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">37</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="k">#check</span> <span class="bp">¬</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">∈</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">)</span>
</code></pre></div>
<p>which is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">integral_domain</span> <span class="n">α</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">α</span>
<span class="bp">⊢</span> <span class="n">has_mem</span> <span class="n">ℕ</span> <span class="kt">Type</span>
</code></pre></div>
<p>I'm trying to find a way of checking proofs that a type is not an integral domain.  In the case of positive integers, they are not because they lack a 0.  I need a checkable way of saying that.   However, to be an integral domain means to be a subclass of something other things and so I can't even say what that my set is not an integral domain because I can only build up things that are something, I can't establish that something is not a thing that doesn't have all of the substructure of that thing up to and excluding one part which is missing.   The absolute simplest example of that is <code>#check ¬ (0 ∈ ℕ+)</code>.</p>



<a name="220948207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220948207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220948207">(Dec 26 2020 at 04:00)</a>:</h4>
<p>Lean is based on type theory, and so the notation ∈ doesn't mean anything in and of itself (where as in set theory it is a fundamental notion). In order for lean to know what ∈ is supposed to mean the user is supposed to provide a an instance of has_mem, lean doesn't know what it means that some pnat is a member of some type . That's what the error message means. Some statements like the one you are trying to make really make more sense in set theory where the notion of being a member of something else is really a primitive idea</p>



<a name="220948810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220948810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220948810">(Dec 26 2020 at 04:22)</a>:</h4>
<blockquote>
<p>I'm trying to find a way of checking proofs that a type is not an integral domain. In the case of positive integers, they are not because they lack a 0.</p>
</blockquote>
<p>As Reid mentioned when you first brought up this exercise, the problem is not well posed because it's not true that those types cannot be equipped with a ring structure which is an integral domain. They are all countable sets, and so you can graft the structure of <code>int</code> onto them using a weird bijection (and <code>int</code> is an integral domain). This is probably not what the author intends, and the argument that they lack a 0 doesn't work because you can make another element in the set be the "zero" for it, as long as the other operations respect this choice</p>



<a name="220949310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220949310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220949310">(Dec 26 2020 at 04:43)</a>:</h4>
<p>I was trying to go in that direction with these kinds of statements:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ℝ_1_is_unique</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">u</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="n">u</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kd">theorem</span> <span class="n">ℝ_0_is_unique</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>  <span class="n">z</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>  <span class="n">x</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">)))</span>  <span class="bp">→</span> <span class="n">z</span><span class="bp">=</span><span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>in other words by describing unique elements that an integral domain needs by their behavior, and then saying that if there is nothing in the presented set which has that behavior, then it is not that kind of set.  Or saying that the 0 or 1 provided to begin with in Lean is unique in the sense that any other element which behaves the same way has to be the provided element, and if the provided element is not there in the presented set, it can't be an integral domain.</p>
<p>As a concrete example of something similar, eigenvectors are identical up to sign.  So if I have a basis of 8 eigenvectors, it could be presented to me in 2^8 different ways.  In that sense, it's possible to imagine an algebraic structure with many different ones or many different zeros.  For example in the case of integers mod N you could say that there are an infinite number of 0s and an infinite number of 1s.</p>
<p>What they are getting at in the exercise is to show either that elements that behave like 0 and 1 are not available, or that operations like + and * on elements of the initially stated set will take you outside of the set.</p>
<p>This is a beginning college algebra text with beginner examples.  I listed in my aspirational goal set some high-end papers at the way other end of the spectrum. It is possible that they may have reasoning which is similar to this set of problems: i.e.,  where the argument is about whether a given constructed set does not have say a group structure or an integral domain structure or whatever.</p>
<p>I am just learning to do proofs here (in general and in Lean).   To do that I have to go where the exercises take me.  For this particular exercise, I can't give a smooth and convincing checkable soup-to-nuts proof in Lean.   I expect most of the exercises in the text will be constructive rather than exclusive, so I can move on without too much fear of missing out by leaving this exercise aside.</p>



<a name="220952007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220952007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220952007">(Dec 26 2020 at 06:22)</a>:</h4>
<p>Here's what i would do for these goals, note the use of <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#specialize">tactic#specialize</a>, which can be replaced with things like <code>have g := h 1</code> if desired:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kd">theorem</span> <span class="n">ℝ_1_is_unique</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">u</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="n">u</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">begin</span>
<span class="n">intros</span> <span class="n">u</span> <span class="n">h</span><span class="o">,</span>
<span class="n">specialize</span> <span class="n">h</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
<span class="kd">end</span>
<span class="kd">theorem</span> <span class="n">ℝ_0_is_unique</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>  <span class="n">z</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>  <span class="n">x</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">)))</span>  <span class="bp">→</span> <span class="n">z</span><span class="bp">=</span><span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">intros</span> <span class="n">u</span> <span class="n">h</span><span class="o">,</span>
<span class="n">specialize</span> <span class="n">h</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">h.left</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220957730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220957730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220957730">(Dec 26 2020 at 09:46)</a>:</h4>
<p>Your <code>R_0_is_unique</code> statement basically says "given the usual definition of addition over the reals, there is exact one way to define zero". However, when proving the absence of a <code>ring</code> structure, you have to prove there is no possible definition of addition that satisfied the other fields of the structure</p>



<a name="220967703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220967703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220967703">(Dec 26 2020 at 15:07)</a>:</h4>
<p>Suppose you were teaching a class on college algebra using Lean to 2nd-year PhD students in Math who were trained to the highest standard expected of a PhD student in math.    What answer, in Leanish, for Mac Lane&amp;Birkhoff section 1.2 exercise 6, would you give an A+ to?<br>
<a href="/user_uploads/3121/8-_sZHDYifLAE_4sh960FhjE/Screenshot-from-2020-12-25-08-24-15.png">Screenshot-from-2020-12-25-08-24-15.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/8-_sZHDYifLAE_4sh960FhjE/Screenshot-from-2020-12-25-08-24-15.png" title="Screenshot-from-2020-12-25-08-24-15.png"><img src="/user_uploads/3121/8-_sZHDYifLAE_4sh960FhjE/Screenshot-from-2020-12-25-08-24-15.png"></a></div>



<a name="220967750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220967750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220967750">(Dec 26 2020 at 15:08)</a>:</h4>
<p>In other words this gives your expectations for how Lean would be used for this kind of problem, and what would necessarily be left to English and hand-written math, and what would be usefully checkable in Lean.</p>



<a name="220967803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220967803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220967803">(Dec 26 2020 at 15:10)</a>:</h4>
<p>This exercise is not phrased well, IMO. What does it mean for a set to be a domain?</p>



<a name="220968431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220968431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220968431">(Dec 26 2020 at 15:32)</a>:</h4>
<p>Perhaps the phrasing of these should be "are these subrings of the obvious ring implied by each case, such that that subrings is an integral domain"?</p>



<a name="220968497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220968497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220968497">(Dec 26 2020 at 15:34)</a>:</h4>
<p>In which case the predicate would be something like <code>def q6_pred (s : set R) : Prop := \exist (s' : subring R), \us' = s \and integral_domain s'</code></p>



<a name="220968864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220968864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220968864">(Dec 26 2020 at 15:47)</a>:</h4>
<p>Right. They're all subsets of the reals. The "integral domain" part is kind of a red herring. It's really a question about whether the sets are subrings of the reals, since a subring of a domain is obviously a domain.</p>



<a name="220968963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220968963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220968963">(Dec 26 2020 at 15:50)</a>:</h4>
<p>And as a follow up exercise, I might assign the following: "Let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> be any infinite set. Prove that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> can be endowed with the structure of a ring, with respect to which it is an integral domain." (But I would not expect my students to do this in lean <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span>)</p>



<a name="220969943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220969943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220969943">(Dec 26 2020 at 16:21)</a>:</h4>
<p>Or just "characterize the cardinalities of integral domains", which could be asked of any of lean's algebraic classes</p>



<a name="220969984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220969984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220969984">(Dec 26 2020 at 16:22)</a>:</h4>
<p>to build integral domains of high cardinality you probably need polynomial rings with many indeterminates</p>



<a name="220969993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220969993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220969993">(Dec 26 2020 at 16:23)</a>:</h4>
<p>we'd need theorems about the cardinality of <code>A -&gt;0 B</code> but it seems doable</p>



<a name="220970044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/220970044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#220970044">(Dec 26 2020 at 16:24)</a>:</h4>
<p>for finite sets, I think you get powers of primes since a finite domain is a field</p>



<a name="221105397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221105397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221105397">(Dec 29 2020 at 01:45)</a>:</h4>
<p>Thanks for the discussion.  This doesn't quite check:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">ring_theory.subring</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variable</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span>
<span class="kd">variable</span> <span class="n">R</span> <span class="o">:</span> <span class="n">α</span>

<span class="kd">def</span> <span class="n">q6_pred</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">s'</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">R</span><span class="o">),</span> <span class="bp">↑</span><span class="n">s'</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">integral_domain</span> <span class="n">s'</span>
</code></pre></div>
<p>giving error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">subring</span> <span class="n">R</span>
<span class="n">term</span>
  <span class="n">R</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="bp">?</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="bp">?+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>
<p>Is this proposition expressible in Lean or do the types just need to be tweaked?</p>



<a name="221106913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221106913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221106913">(Dec 29 2020 at 02:27)</a>:</h4>
<p>The error message tells you what the problem is - R is supposed to be a <code>Type</code>, but in your code its an <code>\a</code></p>



<a name="221112741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221112741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221112741">(Dec 29 2020 at 05:19)</a>:</h4>
<p>Changing that to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">ring_theory.subring</span>

<span class="kd">variable</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kd">def</span> <span class="n">q6_pred</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">s'</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">R</span><span class="o">),</span> <span class="bp">↑</span><span class="n">s'</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">integral_domain</span> <span class="n">s'</span>
</code></pre></div>
<p>I get a different set of problems</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">ring</span> <span class="n">R</span>
</code></pre></div>
<p>For the purposes of exercise 6, still grinding it through, it seems easier to start from scratch and work on the book's terms with a flattened class which just meets the needs of the text, such as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variable</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span>

<span class="kd">class</span> <span class="n">integralDomain</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">)</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">cancellation</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">c</span><span class="bp">*</span><span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">*</span><span class="n">b</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">=</span><span class="n">b</span><span class="o">)</span>
<span class="o">(</span><span class="n">unique</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="n">b</span> <span class="n">b'</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a'</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b'</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">=</span><span class="n">a'</span> <span class="bp">→</span> <span class="n">b</span><span class="bp">=</span><span class="n">b'</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">=</span> <span class="n">a'</span><span class="bp">*</span><span class="n">b'</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">+</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="o">(</span><span class="n">b</span><span class="bp">+</span><span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">c</span><span class="o">)</span><span class="bp">=</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">dist</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span><span class="bp">+</span><span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">*</span><span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">zed</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="mi">0</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">une</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">*</span><span class="mi">1</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_inv</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">:</span><span class="n">α</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>



<a name="221113959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221113959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221113959">(Dec 29 2020 at 05:56)</a>:</h4>
<p>You can't have a subring unless you have a ring for the subring to be under. You just said to lean "let <code>R</code> be an arbitrary type" so it doesn't know what ring structure on <code>R</code> you want</p>



<a name="221113965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221113965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221113965">(Dec 29 2020 at 05:56)</a>:</h4>
<p>Perhaps you mean <code>real</code> instead of <code>R</code>?</p>



<a name="221145633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221145633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221145633">(Dec 29 2020 at 16:22)</a>:</h4>
<p>I mean <code>R</code> not  <code>ℝ</code>.  I am taking Mac Lane on faith and naively trying to translate his definition of commutative ring into Lean.  This is factored into about 10 subclasses in Lean.  Here is the text I am translating:</p>
<p><a href="/user_uploads/3121/IaT2LPiMFtzdDTtBrqJKI4l6/Screenshot-from-2020-12-29-11-20-03.png">Screenshot-from-2020-12-29-11-20-03.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/IaT2LPiMFtzdDTtBrqJKI4l6/Screenshot-from-2020-12-29-11-20-03.png" title="Screenshot-from-2020-12-29-11-20-03.png"><img src="/user_uploads/3121/IaT2LPiMFtzdDTtBrqJKI4l6/Screenshot-from-2020-12-29-11-20-03.png"></a></div><p>followed by</p>
<p><a href="/user_uploads/3121/W5vEzy-GGr3OQuni54vfM9UG/Screenshot-from-2020-12-29-11-21-45.png">Screenshot-from-2020-12-29-11-21-45.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/W5vEzy-GGr3OQuni54vfM9UG/Screenshot-from-2020-12-29-11-21-45.png" title="Screenshot-from-2020-12-29-11-21-45.png"><img src="/user_uploads/3121/W5vEzy-GGr3OQuni54vfM9UG/Screenshot-from-2020-12-29-11-21-45.png"></a></div>



<a name="221145780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221145780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221145780">(Dec 29 2020 at 16:24)</a>:</h4>
<p>Mac Lane explicitly says "set".  He may believe that every object in mathematics can be represented as a set, as opposed to say a type or a category.  He has an informed view because he is also a category theorist, so I assume he is choosing his words carefully.   I'm just trying to do the translation exercise from that text to Lean.</p>



<a name="221146144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221146144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221146144">(Dec 29 2020 at 16:29)</a>:</h4>
<p>The reason a flattened class is helpful is that I don't have to instantiate all of the subclasses to prove the non-compliance of a particular set to the definitions it comprises.   All I have to do is show that my set doesn't satisfy one of the conjunction of properties that the class represents.  So I don't get tangled up finding the earliest superclass in the class hierarchy that the set fails on, and I can check the whole thing in Lean.  Finding the earliest superclass that fails is a manual operation that can't be checked in Lean.</p>



<a name="221149640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221149640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221149640">(Dec 29 2020 at 17:13)</a>:</h4>
<p><code>variable [ ring R]</code> ought to be all you need for your examples</p>



<a name="221149732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221149732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221149732">(Dec 29 2020 at 17:14)</a>:</h4>
<p>If you want to be able to show that non-rings are not integral domains, you can put <code>[ring R]</code> in the exists binder</p>



<a name="221154464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221154464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221154464">(Dec 29 2020 at 18:14)</a>:</h4>
<p>I want to do this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">def</span> <span class="n">is_integralDomain</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)]</span>  <span class="o">:=</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has a zero</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="n">R</span> <span class="o">),</span>  <span class="c1">-- has a one</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has add</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has mul</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="n">b</span> <span class="n">b'</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>
  <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">zed</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">∧</span> <span class="c1">-- zeroness</span>
  <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">une</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">∧</span> <span class="c1">-- oneness</span>
  <span class="o">(</span><span class="n">c</span> <span class="bp">≠</span> <span class="n">zed</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="bp">∧</span> <span class="c1">-- cancellation</span>
  <span class="o">(</span><span class="n">a</span><span class="bp">=</span><span class="n">a'</span> <span class="bp">→</span> <span class="n">b</span><span class="bp">=</span><span class="n">b'</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">a'</span> <span class="n">b'</span><span class="o">)</span> <span class="bp">∧</span> <span class="c1">-- uniqueness</span>
  <span class="n">plus</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">∧</span> <span class="c1">-- comm_add</span>
  <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">∧</span> <span class="c1">-- comm_mul</span>
  <span class="n">plus</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="bp">∧</span> <span class="c1">-- assoc_add</span>
  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">mul</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">mul</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span> <span class="bp">∧</span> <span class="c1">-- assoc_mul</span>
  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">c</span><span class="o">)</span> <span class="bp">∧</span> <span class="c1">-- dist</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">plus</span> <span class="n">a</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">zed</span> <span class="c1">-- additive inverse</span>

<span class="kd">def</span> <span class="n">ℤ_even</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span>

<span class="kd">theorem</span> <span class="n">ex6a</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">is_integralDomain</span> <span class="n">ℤ</span> <span class="n">ℤ_even</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>However I don't know how to expand the <code>def</code> inside the theorem so that I can prove it.  I get this goal state and I don't know what tactic expands a <code>def</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">h1</span><span class="o">:</span> <span class="n">is_integralDomain</span> <span class="n">ℤ</span> <span class="n">ℤ_even</span>
<span class="bp">⊢</span> <span class="n">false</span>
</code></pre></div>
<p>This finally gets me down to the core of exercise 6a:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">ex_6a</span>

<span class="kd">structure</span> <span class="n">integralDomain</span>
      <span class="o">(</span><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)]</span>
      <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span><span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">zeroness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">zed</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">oneness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">une</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">cancellation</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">c</span> <span class="bp">≠</span> <span class="n">zed</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">uniqueness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="n">b</span> <span class="n">b'</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">a</span><span class="bp">=</span><span class="n">a'</span> <span class="bp">→</span> <span class="n">b</span><span class="bp">=</span><span class="n">b'</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">a'</span> <span class="n">b'</span><span class="o">))</span>
<span class="o">(</span><span class="n">comm_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">mul</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">mul</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">dist</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">add_inv</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">plus</span> <span class="n">a</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">zed</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">R</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}}</span>

<span class="kd">theorem</span> <span class="n">ex6a</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has a zero</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="c1">-- has a one</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has add</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="c1">-- has mul</span>
        <span class="o">(</span><span class="bp">@</span><span class="n">integralDomain</span> <span class="n">ℤ</span> <span class="n">R</span> <span class="n">_</span> <span class="n">zed</span> <span class="n">une</span> <span class="n">plus</span> <span class="n">mul</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">zed</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h2</span> <span class="k">with</span> <span class="n">une</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h3</span> <span class="k">with</span> <span class="n">plus</span> <span class="n">h4</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h4</span> <span class="k">with</span> <span class="n">mul</span> <span class="n">h5</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h6</span> <span class="o">:=</span> <span class="n">h5.oneness</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">ex_6a</span>
</code></pre></div>



<a name="221154664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221154664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221154664">(Dec 29 2020 at 18:17)</a>:</h4>
<p><code>[has_mem α (set α)]</code> this is problematic</p>



<a name="221154796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221154796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221154796">(Dec 29 2020 at 18:18)</a>:</h4>
<p>ooh, maybe it isn't... because you never use <code>\in</code> in the rest of the definition.</p>



<a name="221158288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221158288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221158288">(Dec 29 2020 at 19:05)</a>:</h4>
<p>I don't know how to bring in the <code>even</code> property of the set from the set membership.   This would give me an assertion <code>∃ k, a = 2*k</code>.  In particular, for my <code>one</code>, that <code>∃ k, a = 2*one</code>.  However that in turn depends on existence of <code>2</code> and the ability to introduce properties of a set that a thing is a member of.  So I'm stuck here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">ex_6a</span>

<span class="kd">structure</span> <span class="n">integralDomain</span>
      <span class="o">(</span><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)]</span>
      <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span><span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">zeroness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">zed</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">oneness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">une</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">cancellation</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">c</span> <span class="bp">≠</span> <span class="n">zed</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">uniqueness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="n">b</span> <span class="n">b'</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">a</span><span class="bp">=</span><span class="n">a'</span> <span class="bp">→</span> <span class="n">b</span><span class="bp">=</span><span class="n">b'</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">a'</span> <span class="n">b'</span><span class="o">))</span>
<span class="o">(</span><span class="n">comm_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">mul</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">mul</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">dist</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">add_inv</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">plus</span> <span class="n">a</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">zed</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">ex6a</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has a zero</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span>  <span class="c1">-- has a one</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has add</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has mul</span>
        <span class="o">(</span><span class="bp">@</span><span class="n">integralDomain</span> <span class="n">ℤ</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="n">_</span> <span class="n">zed</span> <span class="n">une</span> <span class="n">plus</span> <span class="n">mul</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">zed</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h2</span> <span class="k">with</span> <span class="n">une</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h3</span> <span class="k">with</span> <span class="n">plus</span> <span class="n">h4</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h4</span> <span class="k">with</span> <span class="n">mul</span> <span class="n">h5</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h6</span> <span class="o">:=</span> <span class="n">h5.oneness</span> <span class="n">une</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h7</span> <span class="o">:=</span> <span class="n">h5.dist</span> <span class="n">une</span> <span class="n">une</span> <span class="n">une</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h6</span> <span class="n">at</span> <span class="n">h7</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">ex_6a</span>
</code></pre></div>
<p>One thing I can do is just add the <code>even</code> unrolled property in the theorem statement.</p>



<a name="221159860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221159860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221159860">(Dec 29 2020 at 19:27)</a>:</h4>
<p>I'm stuck, but I've broken it down as much as possible.  I don't know how to tease out the falseness of <code>1 = x + x</code> in </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">ex_6a</span>

<span class="kd">structure</span> <span class="n">integralDomain</span>
      <span class="o">(</span><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)]</span>
      <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span><span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">zeroness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">zed</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">oneness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">une</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">cancellation</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">c</span> <span class="bp">≠</span> <span class="n">zed</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">uniqueness</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="n">b</span> <span class="n">b'</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="o">(</span><span class="n">a</span><span class="bp">=</span><span class="n">a'</span> <span class="bp">→</span> <span class="n">b</span><span class="bp">=</span><span class="n">b'</span> <span class="bp">→</span> <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">a'</span> <span class="n">b'</span><span class="o">))</span>
<span class="o">(</span><span class="n">comm_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">mul</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_add</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">plus</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">plus</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">assoc_mul</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">mul</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">mul</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">dist</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="n">mul</span> <span class="n">a</span> <span class="o">(</span><span class="n">plus</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">a</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">add_inv</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span>  <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">plus</span> <span class="n">a</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">zed</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">ex6a</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">zed</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has a zero</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">une</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span>  <span class="c1">-- has a one</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">plus</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has add</span>
     <span class="bp">∃</span> <span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="c1">-- has mul</span>
        <span class="o">((</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">y</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span>
         <span class="o">(</span><span class="bp">@</span><span class="n">integralDomain</span> <span class="n">ℤ</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="n">_</span> <span class="n">zed</span> <span class="n">une</span> <span class="n">plus</span> <span class="n">mul</span><span class="o">))):=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">zed</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h2</span> <span class="k">with</span> <span class="n">une</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h3</span> <span class="k">with</span> <span class="n">plus</span> <span class="n">h4</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h4</span> <span class="k">with</span> <span class="n">mul</span> <span class="n">h5</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h6</span> <span class="o">:=</span> <span class="n">h5.left</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h7</span> <span class="o">:=</span> <span class="n">h5.right</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h8</span> <span class="o">:=</span> <span class="n">h7.oneness</span> <span class="n">une</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h9</span> <span class="o">:=</span> <span class="n">h7.dist</span> <span class="n">une</span> <span class="n">une</span> <span class="n">une</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h10</span> <span class="o">:=</span> <span class="n">h6</span> <span class="n">une</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h10</span> <span class="k">with</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">ex_6a</span>
</code></pre></div>
<p>where my tactic state is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">zedune</span><span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span>
<span class="n">plusmul</span><span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="bp">→</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span>
<span class="n">h5</span><span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">y</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">integralDomain</span> <span class="n">ℤ</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="n">zed</span> <span class="n">une</span> <span class="n">plus</span> <span class="n">mul</span>
<span class="n">h6</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}),</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">y</span> <span class="n">y</span>
<span class="n">h7</span><span class="o">:</span> <span class="n">integralDomain</span> <span class="n">ℤ</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span> <span class="n">zed</span> <span class="n">une</span> <span class="n">plus</span> <span class="n">mul</span>
<span class="n">h8</span><span class="o">:</span> <span class="n">mul</span> <span class="n">une</span> <span class="n">une</span> <span class="bp">=</span> <span class="n">une</span>
<span class="n">h9</span><span class="o">:</span> <span class="n">mul</span> <span class="n">une</span> <span class="o">(</span><span class="n">plus</span> <span class="n">une</span> <span class="n">une</span><span class="o">)</span> <span class="bp">=</span> <span class="n">plus</span> <span class="o">(</span><span class="n">mul</span> <span class="n">une</span> <span class="n">une</span><span class="o">)</span> <span class="o">(</span><span class="n">mul</span> <span class="n">une</span> <span class="n">une</span><span class="o">)</span>
<span class="n">y</span><span class="o">:</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span>
<span class="n">hy</span><span class="o">:</span> <span class="n">une</span> <span class="bp">=</span> <span class="n">plus</span> <span class="n">y</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">false</span>
</code></pre></div>



<a name="221161558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221161558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221161558">(Dec 29 2020 at 19:51)</a>:</h4>
<p>OK I give up on the counterexamples, English only:</p>
<p>6a.  No because no 1.</p>
<p>6b. No because no 0.</p>
<p>6c. No because no 0.</p>
<p>6d. No. <code>&lt;a,b&gt; = a + b*5^(1/4)</code> so  <code>&lt;a,b&gt;*&lt;c,d&gt; = a*c + (a*d+b*c)*5^(1/2)+(b*d)*5(1/4)</code>.   No because of the <code>5^(1/2)</code> factor which is not an integer and not a multiple of <code>5^(1/4)</code>.</p>
<p>I should be able to do the positive examples in Lean:</p>
<p>6e. Yes.  <code>&lt;a,b&gt;=&lt;a+b*9^(1/4)</code> so <code>&lt;a,b&gt;*&lt;c,d&gt;=&lt;a*c+3*(a *d+b*d), b*d&gt;</code> and <code>&lt;a,b&gt;+&lt;c,d&gt;=&lt;a+c,b+d&gt;</code> and <code>0=&lt;0,0&gt;</code> and <code>1=&lt;1,0&gt;</code>.</p>
<p>6f. Yes. <code>&lt;a,b&gt;=a/2^b</code> so <code>0=&lt;0,0&gt;</code>, <code>1=&lt;1,0&gt;</code>, <code>&lt;a,b&gt;*&lt;c,d&gt;</code> = &lt;a<em>c,b+d&gt;<code> and </code>&lt;a,b&gt;+&lt;c,d&gt; = &lt;a</em>2^d+c*2^b,b+d&gt;`.</p>



<a name="221163498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221163498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221163498">(Dec 29 2020 at 20:15)</a>:</h4>
<p>I've lost track of what you want to prove. If you want to show that the set of even numbers is not a subring of Z, you can do this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>
<span class="kn">import</span> <span class="n">ring_theory.subring</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">even</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">decidable_of_iff'</span> <span class="n">_</span> <span class="n">even_iff_two_dvd</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">even</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">⟨</span><span class="n">S</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩,</span> <span class="n">absurd</span> <span class="o">((</span><span class="n">h</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">S.one_mem</span><span class="o">)</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="221163754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221163754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221163754">(Dec 29 2020 at 20:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364351">Lars Ericson</span> <a href="#narrow/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B)/near/221145780">said</a>:</p>
<blockquote>
<p>Mac Lane explicitly says "set".  He may believe that every object in mathematics can be represented as a set, as opposed to say a type or a category.  He has an informed view because he is also a category theorist, so I assume he is choosing his words carefully.   I'm just trying to do the translation exercise from that text to Lean.</p>
</blockquote>
<p>You are taking the text too literally. This is a common beginner mistake in formalization. Like they say in english class, "write it in your own words". Here I mean that you should use the native vocabulary of the library to express <em>essentially</em> the same point as the exercise. Any lingering not-exactly-the-same bits should be put off until you have to deal with the difference when stitching theorems together.</p>



<a name="221163988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221163988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221163988">(Dec 29 2020 at 20:22)</a>:</h4>
<p>In particular, regarding "set" vs "type", you will consistently find that mathematicians use set theory as the basis, at least nominally, and the terminology reflects that. Type theory is the new kid on the block, and it requires that you express things in a slightly different way. In any case the type <code>set R</code> is not the set theorist's notion of "set" so it wouldn't be appropriate to use here. (If you really really wanted to be literal about it you could pull out <code>set_theory.zfc</code>, but... please don't.)</p>



<a name="221189919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221189919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221189919">(Dec 30 2020 at 04:48)</a>:</h4>
<p>Following the lead of <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>'s proof for 6A, here  are 6B and 6C:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.subring</span>
<span class="kn">import</span> <span class="n">data.int.parity</span>

<span class="kd">theorem</span> <span class="n">ex6b</span> <span class="o">:</span>  <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">odd</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">S</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">h</span> <span class="mi">0</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h3</span> <span class="o">:=</span> <span class="n">h2.1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h4</span> <span class="o">:=</span> <span class="n">S.zero_mem</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h5</span> <span class="o">:=</span> <span class="n">h3</span> <span class="n">h4</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h6</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int.odd_iff_not_even</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h7</span> <span class="o">:=</span> <span class="n">h6</span> <span class="n">h5</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h8</span> <span class="o">:=</span> <span class="n">absurd</span> <span class="n">h7</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h8</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">ex6c</span> <span class="o">:</span>  <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℤ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">S</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℤ</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h3</span> <span class="o">:=</span> <span class="n">subring.zero_mem</span> <span class="n">S</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h4</span> <span class="o">:=</span> <span class="n">h2.1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h5</span> <span class="o">:=</span> <span class="n">h4</span> <span class="n">h3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h6</span> <span class="o">:=</span> <span class="n">lt_irrefl</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℤ</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">h6</span> <span class="n">h5</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>For 6DEF, I have 3 representations of numbers as pairs &lt;a,b&gt; where +, * operations on the pairs are defined and the pairs can be interpreted as real or rational numbers and the question is whether the + and * operations take numbers back into the set.  I'm not sure if I should make <code>structure</code>s for these numbers and put the +,* operation definitions in the structure, or what, because in the first case of 6D it is a counterexample.  I will play with it a little while.</p>



<a name="221190269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221190269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221190269">(Dec 30 2020 at 04:58)</a>:</h4>
<p>This seems like a reasonable problem statement:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kn">import</span> <span class="n">ring_theory.subring</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="mi">5</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">4</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="mi">9</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">4</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">ℚ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">x.denom</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="221190382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221190382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221190382">(Dec 30 2020 at 05:01)</a>:</h4>
<p>(deleted)</p>



<a name="221190433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%C2%AC%28ring%20%E2%84%95%2B%29/near/221190433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.C2.AC(ring.20.E2.84.95.2B).html#221190433">(Dec 30 2020 at 05:02)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> that's perfect, I will work on these.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>