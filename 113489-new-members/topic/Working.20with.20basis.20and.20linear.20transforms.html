---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html">Working with basis and linear transforms</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289958945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289958945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289958945">(Jul 18 2022 at 12:35)</a>:</h4>
<p>I'm going through the book "Linear Algebra Done Right", and thought I'd try to do some of the proof exercises from the book in Lean. I'm really struggling to understand how to deal with linear transforms and basis of vector spaces in lean. The proof I'm trying to write is of the following statement:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Suppose</span> <span class="n">V</span> <span class="n">and</span> <span class="n">W</span> <span class="n">are</span> <span class="n">finite</span><span class="bp">-</span><span class="n">dimensional</span> <span class="n">and</span> <span class="n">T</span> <span class="n">is</span> <span class="n">a</span> <span class="n">linear</span> <span class="n">transform</span> <span class="k">from</span> <span class="n">V</span> <span class="n">to</span> <span class="n">W.</span>
<span class="n">Show</span> <span class="n">that</span> <span class="k">with</span> <span class="n">respect</span> <span class="n">to</span> <span class="n">each</span> <span class="n">choice</span> <span class="n">of</span> <span class="n">bases</span> <span class="n">of</span> <span class="n">V</span> <span class="n">and</span> <span class="n">W</span><span class="o">,</span> <span class="n">the</span> <span class="n">matrix</span> <span class="n">of</span>
<span class="n">T</span> <span class="n">has</span> <span class="n">at</span> <span class="n">least</span> <span class="n">dim</span> <span class="n">range</span> <span class="n">T</span> <span class="n">nonzero</span> <span class="n">entries.</span>
</code></pre></div>
<p>I'm able to express V and W in Lean as the following, based on what I found in a Xena lecture on Youtube:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">W</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>
</code></pre></div>
<p>What I'm struggling to express is the idea of a Linear Transform <code>T</code> which maps from <code>V</code> to <code>W</code>, and how to write the basis of V and W. And then how to express the idea of the range of <code>T</code> in Lean. I see there's <code>linear_algebra/basis.lean</code>, and there's <code>linear_algebra/basic.lean</code> which mentions linear maps, but in a syntax I can't follow. I can't figure out how to use the concepts in these files though - are there examples somewhere of how to work with Linear Transforms and Basis of vector spaces in Lean?</p>



<a name="289959467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289959467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289959467">(Jul 18 2022 at 12:40)</a>:</h4>
<p>A linear transform is called <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map">docs#linear_map</a> in Mathlib, and a <code>K</code>-linear transform is written <code>(T : V →ₗ[K] W)</code>. You have to indicate which field (ring) it's linear over, because <code>V</code> and <code>W</code> could also be vector spaces over other fields.</p>



<a name="289959722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289959722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289959722">(Jul 18 2022 at 12:43)</a>:</h4>
<p>An arbitrary basis of <code>V</code> is written as <code>{ι : Type*} (b : basis ι K V)</code>. To choose a fixed, but unkown, basis for a vector space, use <a href="https://leanprover-community.github.io/mathlib_docs/find/basis.of_vector_space">docs#basis.of_vector_space</a>.</p>



<a name="289960356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289960356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289960356">(Jul 18 2022 at 12:48)</a>:</h4>
<p>More specifically, <code>basis ι K V</code> is the type of all <code>#ι</code>-dimensional bases for the <code>K</code>-vector space <code>V</code>, where <code>#ι</code> is the cardinality of <code>ι</code>. So <code>basis (fin 4) K V</code> is the type of all 4-dimensional bases.</p>



<a name="289960571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289960571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289960571">(Jul 18 2022 at 12:50)</a>:</h4>
<p>Aah thank you so much! I tried adding the following 2 lines:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">bV</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">basis.of_vector_space</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
</code></pre></div>
<p>The <code>T</code> definition seems to not give an error, but <code>variables {bV: Type} [basis.of_vector_space K V]</code> gives the following error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">basis</span> <span class="bp">↥</span><span class="o">(</span><span class="n">basis.of_vector_space_index</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span> <span class="n">K</span> <span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Sort</span> <span class="bp">?</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">?</span>
</code></pre></div>
<p>I don't understand what this means. Apologies I'm sure this is an extremely basic misunderstanding on my part!</p>



<a name="289960775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289960775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289960775">(Jul 18 2022 at 12:52)</a>:</h4>
<p>What do you want to say with <code>variables {bV: Type} [basis.of_vector_space K V]</code>? Do you want to fix a basis?</p>



<a name="289960799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289960799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289960799">(Jul 18 2022 at 12:52)</a>:</h4>
<p>I want to say "bv is a basis of V"</p>



<a name="289960889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289960889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289960889">(Jul 18 2022 at 12:53)</a>:</h4>
<p>So you need to say <code>variables (bv : basis (basis.of_vector_space_index K V) K V))</code></p>



<a name="289961051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961051">(Jul 18 2022 at 12:54)</a>:</h4>
<p>or just <code>(bv : basis I K V)</code></p>



<a name="289961073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961073">(Jul 18 2022 at 12:54)</a>:</h4>
<p>No need to specify that it's one particular arbitrary index set</p>



<a name="289961174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961174">(Jul 18 2022 at 12:55)</a>:</h4>
<p>Oh sure, that's even better. <code>basis I K V</code> is the type (read set) of <code>K</code>-basis of <code>V</code> indexed by <code>I</code> (you need to introduce <code>(I : Type*)</code> before naming it).</p>



<a name="289961412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961412">(Jul 18 2022 at 12:57)</a>:</h4>
<p>Note that in mathlib basis have this index set, that is usually irrelevant in math. You can have a basis indexed the set <code>{1,2,3}</code> and a basis indexed by <code>{a,b,c}</code> (this is not precise, basis are indexed by types, but still), and even if the two basis "choose" the same elements of <code>V</code>, they're different.</p>



<a name="289961493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961493">(Jul 18 2022 at 12:58)</a>:</h4>
<p>Amazing! Thank you so much! That worked! I don't think I would have ever come up with that on my own <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="289961767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289961767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289961767">(Jul 18 2022 at 13:00)</a>:</h4>
<p>This is because we usually think that a basis is a set, but this is incorrect, since then we order the elements to build the matrix. Also, at least in principle, we allow repetitions (as in the exercise "the set <code>{v, v}</code>" is not linear independent since <code>v-v = 0</code> is a non trivial linear combination equals to <code>0</code>). The way this idea is formalized is that a basis is a function <code>b : ι → V</code> for some index type <code>ι</code>. Usually only its cardinality matters, but technically it is there.</p>



<a name="289962543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289962543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289962543">(Jul 18 2022 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="479618">David Chanin</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/289961493">said</a>:</p>
<blockquote>
<p>Amazing! Thank you so much! That worked! I don't think I would have ever come up with that on my own <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>This is the way of things at the beginning. Even after I'd done 50 undergraduate problem sheet questions there were still plenty of problems where I couldn't even write down the question properly. Everything works, you just have to get the hang of the way mathlib thinks about mathematics.</p>



<a name="289990420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289990420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289990420">(Jul 18 2022 at 16:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/289962543">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="479618">David Chanin</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/289961493">said</a>:</p>
<blockquote>
<p>Amazing! Thank you so much! That worked! I don't think I would have ever come up with that on my own <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>This is the way of things at the beginning. Even after I'd done 50 undergraduate problem sheet questions there were still plenty of problems where I couldn't even write down the question properly. Everything works, you just have to get the hang of the way mathlib thinks about mathematics.</p>
</blockquote>
<p>That's encouraging to hear! I went through the natural number game and can do some basic proofs, but trying to prove things in the wild still feels really challenging</p>



<a name="289991550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289991550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289991550">(Jul 18 2022 at 16:41)</a>:</h4>
<p>I'm struggling now to express the idea of "the matrix of T has at least dim range T nonzero entries". I think this really boils down to the idea that T(x) can be expressed as a sum of the T(coeffients * basis_of_v), and there should be at least <code>dim range T</code> non-zero coefficients in that equation. Is there a way I can express that <code>T</code> can be expressed be as <code>∑  a_i* T(basis_of_v_i)</code>, so that at least <code>dim range T</code> of those <code>a_i</code> must be non-zero?</p>



<a name="289993926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289993926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289993926">(Jul 18 2022 at 16:58)</a>:</h4>
<p>Do you a <code>linear_map</code>? If so, you can make a matrix out of it, given a basis. Then you can form a multiset of the values in the matrix. And then you can say that <code>dim range T &lt;= multiset.card s - multiset.count s 0</code>.</p>



<a name="289994283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289994283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289994283">(Jul 18 2022 at 17:00)</a>:</h4>
<p>I have the following setup so far:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">W</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>
</code></pre></div>
<p>So, <code>T</code> is a linear map (I think), and <code>bv</code> and <code>bw</code> are bases. How can I form a matrix from <code>T</code> given <code>bv</code>?</p>



<a name="289994394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289994394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289994394">(Jul 18 2022 at 17:01)</a>:</h4>
<p>The guessable name <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.to_matrix">docs#linear_map.to_matrix</a></p>



<a name="289995521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289995521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289995521">(Jul 18 2022 at 17:09)</a>:</h4>
<p>Apologies this is probably really obvious, but I can't seem to get that function to work. I'm trying the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="n">T_matrix</span> <span class="o">:</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span>
</code></pre></div>



<a name="289995600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289995600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289995600">(Jul 18 2022 at 17:10)</a>:</h4>
<p>In the docs it seems like it takes 2 bases and the linear map, but this seems like the wrong inputs</p>



<a name="289995702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289995702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289995702">(Jul 18 2022 at 17:11)</a>:</h4>
<p>At this point, <code>linear_map.to_matrix bv bw</code> is a term, not a type</p>



<a name="289995953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289995953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289995953">(Jul 18 2022 at 17:12)</a>:</h4>
<p>Does that mean I can't use <code>variable</code> to name this?</p>



<a name="289995960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289995960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289995960">(Jul 18 2022 at 17:12)</a>:</h4>
<p>so you wouldn't say you have a variable of this type. you could have:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">T_matrix</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">V</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">T_matrix</span>  <span class="bp">=</span> <span class="n">T.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="o">:=</span> <span class="n">h</span>
</code></pre></div>
<p>There, I am using dot-notation to have a cleaner statement</p>



<a name="289996452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289996452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289996452">(Jul 18 2022 at 17:16)</a>:</h4>
<p>ooh interesting. Hrm this is giving an error as well,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">expected</span> <span class="n">at</span>
  <span class="n">matrix</span> <span class="n">V</span> <span class="n">W</span>
<span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="bp">?</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="bp">?</span>
</code></pre></div>



<a name="289996543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289996543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289996543">(Jul 18 2022 at 17:17)</a>:</h4>
<p>The full code is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.to_lin</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">W</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">T_matrix</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">V</span> <span class="n">W</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span><span class="o">)</span>
<span class="o">:</span>
  <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">T.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span>
<span class="o">:=</span>
  <span class="n">h</span>
</code></pre></div>



<a name="289996739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289996739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289996739">(Jul 18 2022 at 17:19)</a>:</h4>
<p>Ah, sorry. I was wrong about the syntax here.</p>



<a name="289996744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289996744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289996744">(Jul 18 2022 at 17:19)</a>:</h4>
<p>This works</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.to_lin</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">W</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>

<span class="kd">example</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">I</span><span class="o">]</span>
  <span class="o">[</span><span class="n">fintype</span> <span class="n">I</span><span class="o">]</span>
  <span class="o">(</span><span class="n">T_matrix</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">I</span> <span class="n">I</span> <span class="n">K</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span><span class="o">)</span>
<span class="o">:</span>
  <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span>
<span class="o">:=</span>
  <span class="n">h</span>
</code></pre></div>



<a name="289996983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289996983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289996983">(Jul 18 2022 at 17:20)</a>:</h4>
<p>So I couldn't get dot-notation working here. And I was missing the base ring argument of the <code>matrix</code> term, that was the error. And also I was confused about how to specify it -- I needed to give the indexing type. Then, I got errors about missing instances -- <code>linear_map.to_matrix</code> only really works on indexing types that can be finitely and distinctly enumerated, which is what <code>[decidable_eq I] [fintype I]</code> do.</p>



<a name="289997207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997207">(Jul 18 2022 at 17:22)</a>:</h4>
<p>I see so <code>I</code> refers to the length of the basis, so if I use the same <code>I</code> that means that both V and W are the same size space</p>



<a name="289997260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997260">(Jul 18 2022 at 17:23)</a>:</h4>
<p>How did you figure all of that out?</p>



<a name="289997295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997295">(Jul 18 2022 at 17:23)</a>:</h4>
<p>Going back to your original question about why <code>variables T_matrix : linear_map.to_matrix ...</code>, <code>variables</code> just means "let us have an x \mem X" in regular math speak</p>



<a name="289997337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997337">(Jul 18 2022 at 17:24)</a>:</h4>
<p>You are the one that said that both <code>V</code> and <code>W</code> are the same size space here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">I</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>
</code></pre></div>



<a name="289997474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997474">(Jul 18 2022 at 17:24)</a>:</h4>
<p>You're saying there "I have this data package I will call bv, which is a set of vectors indexed by <code>I</code> that is a basis for the vector space <code>V</code> over the base field <code>K</code>"</p>



<a name="289997534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997534">(Jul 18 2022 at 17:25)</a>:</h4>
<p>Similarly for <code>bw, W</code>. So you can have two different <code>I, I_prime</code> to generalize.</p>



<a name="289997736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289997736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289997736">(Jul 18 2022 at 17:26)</a>:</h4>
<p>That makes sense - I just updated the code to the following to fix that:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">Vi</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Vi</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">Vi</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">Wi</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Wi</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">Wi</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">Vi</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">Wi</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">T_matrix</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">Wi</span> <span class="n">Vi</span> <span class="n">K</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span><span class="o">)</span>
<span class="o">:</span>
  <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span>
<span class="o">:=</span>
  <span class="n">h</span>
</code></pre></div>



<a name="289999052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999052">(Jul 18 2022 at 17:38)</a>:</h4>
<p>hrm maybe this proof is too advanced for me. I'm still struggle to even write out the thing that I'm trying to prove <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> .  I think I want something like the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span>
  <span class="o">(</span><span class="n">T_matrix</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">Wi</span> <span class="n">Vi</span> <span class="n">K</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">T_matrix</span> <span class="bp">=</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span><span class="o">)</span>
<span class="o">:</span>
  <span class="c">/-</span><span class="cm"> number of non-zero entries in T_matrix -/</span> <span class="bp">≤</span> <span class="n">finrank</span> <span class="n">K</span> <span class="n">T.range</span>
<span class="o">:=</span>
  <span class="gr">sorry</span>
</code></pre></div>



<a name="289999142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999142">(Jul 18 2022 at 17:38)</a>:</h4>
<p>If you were programming, how you would get the entries of a matrix?</p>



<a name="289999567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999567">(Jul 18 2022 at 17:43)</a>:</h4>
<p>I'd loop over the indices of the matrix</p>



<a name="289999623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999623">(Jul 18 2022 at 17:43)</a>:</h4>
<p>Great, so how would it look like explicitly here? If you can write it out, we can translate it to lean</p>



<a name="289999727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999727">(Jul 18 2022 at 17:44)</a>:</h4>
<p>or do something like <code>(mat != 0).sum()</code></p>



<a name="289999900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999900">(Jul 18 2022 at 17:45)</a>:</h4>
<p>Using nested for-loops, it would be something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">total_non_zero</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">len</span><span class="o">(</span><span class="n">mat</span><span class="o">):</span>
  <span class="n">row</span> <span class="bp">=</span> <span class="n">mat</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
  <span class="n">for</span> <span class="n">j</span> <span class="k">in</span> <span class="n">len</span><span class="o">(</span><span class="n">row</span><span class="o">[</span><span class="n">i</span><span class="o">]):</span>
    <span class="k">if</span> <span class="n">row</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="bp">!=</span> <span class="mi">0</span><span class="o">:</span>
      <span class="n">total_non_zero</span> <span class="bp">+=</span> <span class="mi">1</span>
</code></pre></div>



<a name="289999982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/289999982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#289999982">(Jul 18 2022 at 17:46)</a>:</h4>
<p>OK, so here, we're going to express it as a map. Really, a map of maps</p>



<a name="290000580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290000580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290000580">(Jul 18 2022 at 17:51)</a>:</h4>
<p>I see a <a href="http://matrix.map">matrix.map</a> function. Is that the correct thing to use?</p>



<a name="290000706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290000706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290000706">(Jul 18 2022 at 17:52)</a>:</h4>
<p>Something like <code>mat.map(elm -&gt; elm == 0 ? 0 : 1)</code> and then sum it somehow?</p>



<a name="290000844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290000844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290000844">(Jul 18 2022 at 17:53)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">linear_algebra.fin</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.to_lin</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">V</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">W</span><span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">W</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Vi</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Vi</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">Vi</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">Wi</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Wi</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">Wi</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">W</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bv</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">Vi</span> <span class="n">K</span> <span class="n">V</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">bw</span> <span class="o">:</span> <span class="n">basis</span> <span class="n">Wi</span> <span class="n">K</span> <span class="n">W</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">values</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">finset.product</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">Vi</span><span class="o">)</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">Wi</span><span class="o">))</span><span class="bp">.</span><span class="n">val.map</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">linear_map.to_matrix</span> <span class="n">bv</span> <span class="n">bw</span> <span class="n">T</span> <span class="n">p.2</span> <span class="n">p.1</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">target</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">set.finrank</span> <span class="n">K</span> <span class="o">(</span><span class="n">T.range</span> <span class="o">:</span> <span class="n">set</span> <span class="n">W</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">values</span> <span class="n">T</span> <span class="n">bv</span> <span class="n">bw</span><span class="o">)</span><span class="bp">.</span><span class="n">card</span> <span class="bp">-</span> <span class="o">((</span><span class="n">values</span> <span class="n">T</span> <span class="n">bv</span> <span class="n">bw</span><span class="o">)</span><span class="bp">.</span><span class="n">count</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="290000908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290000908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290000908">(Jul 18 2022 at 17:54)</a>:</h4>
<p>Yeah you could also do that</p>



<a name="290000988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290000988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290000988">(Jul 18 2022 at 17:54)</a>:</h4>
<p>what does it mean to be noncomputable?</p>



<a name="290001016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001016">(Jul 18 2022 at 17:55)</a>:</h4>
<p>We don't have a <code>matrix.sum</code>, so even if we mapped the matrix, the count (which would be the sum), would require something similar</p>



<a name="290001082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001082">(Jul 18 2022 at 17:55)</a>:</h4>
<p>aah so I just need to prove the <code>target</code> lemma then!</p>



<a name="290001101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001101">(Jul 18 2022 at 17:55)</a>:</h4>
<p><code>noncomputable</code> here just means that it does not generate VM code to execute this definition. That is because the <code>linear_map.to_matrix</code> construction is a axiom-of-choice-based construction</p>



<a name="290001107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001107">(Jul 18 2022 at 17:55)</a>:</h4>
<p>OK, at least that's something for me to start with</p>



<a name="290001312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001312">(Jul 18 2022 at 17:57)</a>:</h4>
<p>I see, if I delete "noncomputable" it says I need to add it back , so at least I can't ever forget to write that if it's needed</p>



<a name="290001352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001352">(Jul 18 2022 at 17:57)</a>:</h4>
<p>It's axiom-of-choice, because, consider an arbitrary distinct finite set that indexes our matrix. Sure, but in what order? The order of the indexing doesn't matter for it being a linear map. But you have to choose _some_ order for the matrix to actually exist.</p>



<a name="290001371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001371">(Jul 18 2022 at 17:57)</a>:</h4>
<p>That's not the full story, but it's close enough</p>



<a name="290001493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001493">(Jul 18 2022 at 17:58)</a>:</h4>
<p>Does that mean you can write theorems about matrices, but can never actually instantiate a specific matrix and run a computation with it?</p>



<a name="290001553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001553">(Jul 18 2022 at 17:59)</a>:</h4>
<p>like, I could never create the matrix <code>[1 2; 3 4]</code> and then compute the determinant or something?</p>



<a name="290001806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001806">(Jul 18 2022 at 18:01)</a>:</h4>
<p>Oh, you definitely can:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="c1">-- 4</span>
</code></pre></div>



<a name="290001941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290001941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290001941">(Jul 18 2022 at 18:02)</a>:</h4>
<p>But in lean, there are different modes of computation. There is the kernel, the VM, and also tactic based. Like this is tactic based from <code>test/matrix.lean</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="n">i</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">matrix.det</span> <span class="bp">!!</span><span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="bp">;</span> <span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">f</span><span class="bp">;</span> <span class="n">g</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">i</span><span class="o">]</span> <span class="bp">=</span>
    <span class="n">a</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">i</span> <span class="bp">-</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">i</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">-</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">matrix.det_succ_row_zero</span><span class="o">,</span> <span class="n">fin.sum_univ_succ</span><span class="o">],</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  Try this: simp only [det_succ_row_zero, fin.sum_univ_succ, neg_mul, cons_append,</span>
<span class="cm">  mul_one, fin.default_eq_zero, fin.coe_zero, cons_vec_bit0_eq_alt0, one_mul, cons_val_one,</span>
<span class="cm">  cons_vec_alt0, fin.succ_succ_above_one, fin.coe_succ, univ_unique, minor_apply, pow_one,</span>
<span class="cm">  fin.zero_succ_above, fin.succ_zero_eq_one, fin.succ_succ_above_zero, nat.neg_one_sq,</span>
<span class="cm">  finset.sum_singleton, cons_val_zero, cons_val_succ, det_fin_zero, head_cons, pow_zero]</span>
<span class="cm">   -/</span>
  <span class="n">ring</span>
<span class="kd">end</span>
</code></pre></div>



<a name="290002001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002001">(Jul 18 2022 at 18:02)</a>:</h4>
<p>Note, the <code>#eval</code> example had concrete explicit types. In the <code>det</code> example, I "computed" the determinant on an arbitrary type of values.</p>



<a name="290002095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002095">(Jul 18 2022 at 18:03)</a>:</h4>
<p>And yes, one can compute the <code>det</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- -2</span>
</code></pre></div>



<a name="290002125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002125">(Jul 18 2022 at 18:03)</a>:</h4>
<p>Seeing this is really helpful</p>



<a name="290002180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002180">(Jul 18 2022 at 18:04)</a>:</h4>
<p>Thank you so much for taking the time to walk me through all of this stuff!</p>



<a name="290002220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002220">(Jul 18 2022 at 18:04)</a>:</h4>
<p>Sure thing! My first foray into mathlib was also trying to prove stuff about matrices and determinants</p>



<a name="290002302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002302">(Jul 18 2022 at 18:05)</a>:</h4>
<p>That 3x3 determinant example was one of my first pushes to get all the lemmas in place and make <code>simp; ring</code> be able to solve it</p>



<a name="290002305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002305">(Jul 18 2022 at 18:05)</a>:</h4>
<p>ooh excellent - is any of that online? I didn't see a lot of examples of proving linear algebra stuff online</p>



<a name="290002369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002369">(Jul 18 2022 at 18:05)</a>:</h4>
<p>I kinda abandoned it, but you could look at <a href="https://github.com/pechersky/e222/tree/master/src">https://github.com/pechersky/e222/tree/master/src</a></p>



<a name="290002428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002428">(Jul 18 2022 at 18:06)</a>:</h4>
<p>There are other people working on formalizing Axler</p>



<a name="290002609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002609">(Jul 18 2022 at 18:07)</a>:</h4>
<p>Here's another example of "computation": <a href="https://github.com/pechersky/e222/blob/master/src/problems02.lean#L49-L58">https://github.com/pechersky/e222/blob/master/src/problems02.lean#L49-L58</a></p>



<a name="290002683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002683">(Jul 18 2022 at 18:08)</a>:</h4>
<p>It's not only computing that these two matrices are the same, but also computing a proof certificate of that, that's via the <code>norm_num</code> tactic.</p>



<a name="290002773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002773">(Jul 18 2022 at 18:09)</a>:</h4>
<p>ah great, I'll take a look at these!</p>



<a name="290002803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002803">(Jul 18 2022 at 18:09)</a>:</h4>
<p>And here's the "proof-by-brute-force version":</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- -2</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">M.det</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="290002919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290002919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290002919">(Jul 18 2022 at 18:10)</a>:</h4>
<p>Watch how a tiny change breaks the "proof-by-force":</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℚ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- -2</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">M.det</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">dec_trivial</span> <span class="c1">-- no longer works</span>
</code></pre></div>



<a name="290003133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290003133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290003133">(Jul 18 2022 at 18:12)</a>:</h4>
<p>So instead, "proof-by-tactic":</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℚ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- -2</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">M.det</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">matrix.det_fin_two</span><span class="o">,</span> <span class="n">M</span><span class="o">]</span>
</code></pre></div>



<a name="290003343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290003343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290003343">(Jul 18 2022 at 18:14)</a>:</h4>
<p>And yet another change:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- uhhh, what?? it's showing underlying impl, not 2</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">M.det</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">matrix.det_fin_two</span><span class="o">,</span> <span class="n">M</span><span class="o">]</span>
</code></pre></div>



<a name="290005519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290005519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290005519">(Jul 18 2022 at 18:32)</a>:</h4>
<p>I can't get these examples to run, it doesn't seem to like the <code>!![1, 2; 3, 4]</code> syntax in Lean for me</p>



<a name="290005571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290005571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290005571">(Jul 18 2022 at 18:32)</a>:</h4>
<p>Do you have <code>data.matrix.notation</code> imported? What mathlib commit are you on?</p>



<a name="290005600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290005600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290005600">(Jul 18 2022 at 18:32)</a>:</h4>
<p>I am on current master, or maybe 13 commits behind</p>



<a name="290005925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290005925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290005925">(Jul 18 2022 at 18:35)</a>:</h4>
<p>Mine is 16 days old, let me try updating...</p>



<a name="290006277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290006277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290006277">(Jul 18 2022 at 18:38)</a>:</h4>
<p>oh yeah it works now! strange</p>



<a name="290006396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290006396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290006396">(Jul 18 2022 at 18:39)</a>:</h4>
<p>It was a recent PR</p>



<a name="290007194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290007194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290007194">(Jul 18 2022 at 18:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/290003343">said</a>:</p>
<blockquote>
<p>And yet another change:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">def</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="bp">;</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>

<span class="k">#eval</span> <span class="n">M.det</span> <span class="c1">-- uhhh, what?? it's showing underlying impl, not 2</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">M.det</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">matrix.det_fin_two</span><span class="o">,</span> <span class="n">M</span><span class="o">]</span>
</code></pre></div><br>
</p>
</blockquote>
<p>whoa why does the #eval break so hard with real numbers? Stuff only works correctly on integers?</p>



<a name="290008536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290008536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290008536">(Jul 18 2022 at 18:58)</a>:</h4>
<p>Reals are equivalence classes of Cauchy sequences of rational numbers - it's not so obvious to compute with those</p>



<a name="290008814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290008814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290008814">(Jul 18 2022 at 19:00)</a>:</h4>
<p>It's not obvious what it even means to print out a real!</p>



<a name="290009316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290009316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chanin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290009316">(Jul 18 2022 at 19:04)</a>:</h4>
<p>🤯 math is hard</p>



<a name="290011866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290011866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290011866">(Jul 18 2022 at 19:25)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span>, <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.to_matrix">docs#linear_map.to_matrix</a> uses choice for totally silly reasons (in order to <em>state</em> that a basis is a linear map to coordinates), the actual data is computed without it.</p>



<a name="290012026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290012026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290012026">(Jul 18 2022 at 19:26)</a>:</h4>
<blockquote>
<p>But you have to choose _some_ order for the matrix to actually exist.</p>
</blockquote>
<p>Not true, <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix">docs#matrix</a> and even <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.det">docs#matrix.det</a> requires no order</p>



<a name="290012317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290012317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290012317">(Jul 18 2022 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span>, I was planning a PR such that reals that are coerced naturals have a reasonable repr</p>



<a name="290012509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290012509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290012509">(Jul 18 2022 at 19:30)</a>:</h4>
<p>Sorry for the FUD. What's the silly reason for that <code>basis</code> issue?</p>



<a name="290014473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290014473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290014473">(Jul 18 2022 at 19:49)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finsupp.has_add">docs#finsupp.has_add</a></p>



<a name="290014558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290014558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290014558">(Jul 18 2022 at 19:50)</a>:</h4>
<p>To avoid earning a <span aria-label="butterfly" class="emoji emoji-1f98b" role="img" title="butterfly">:butterfly:</span>; by "totally silly" I mean "not mathematical" as opposed to "this was a bad design decision".</p>



<a name="290014743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290014743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290014743">(Jul 18 2022 at 19:52)</a>:</h4>
<p>As a tip: you can hover over the word "noncomputable" in the docs to see why something is noncomputable</p>



<a name="290020303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290020303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290020303">(Jul 18 2022 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/290012317">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span>, I was planning a PR such that reals that are coerced naturals have a reasonable repr</p>
</blockquote>
<p>And fractions too?</p>



<a name="290076504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20basis%20and%20linear%20transforms/near/290076504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms.html#290076504">(Jul 19 2022 at 09:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/290020303">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20basis.20and.20linear.20transforms/near/290012317">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span>, I was planning a PR such that reals that are coerced naturals have a reasonable repr</p>
</blockquote>
<p>And fractions too?</p>
</blockquote>
<p>Currently not possible, but should be doable after <a href="https://github.com/leanprover-community/mathlib/pull/14894">#14894</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>