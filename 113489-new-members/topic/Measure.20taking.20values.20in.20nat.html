---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html">Measure taking values in nat</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304033553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304033553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304033553">(Oct 14 2022 at 13:37)</a>:</h4>
<p>Hi, I'm new to Lean and trying to learn more by implementing point processes. I'm already stuck on the first definition. I want to create a new structure for measures that only take values in <code>\nat</code> and I am unsure why my approach doesn't work</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">finite_point_measure</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">measure</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">in_nats</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">measurable_set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">n</span> <span class="bp">∈</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">measure_of</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
</code></pre></div>
<p>any help would be appreciated. If this is the wrong place to ask please just point me in the right direction. thanks~</p>



<a name="304033856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304033856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304033856">(Oct 14 2022 at 13:39)</a>:</h4>
<p><code>ℕ</code> is a <strong>type</strong>, not a <strong>set</strong>, so <code>n ∈ ℕ</code> does not make sense. You want <code>n : ℕ</code> instead.</p>



<a name="304034821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304034821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304034821">(Oct 14 2022 at 13:43)</a>:</h4>
<p>Thanks, that is already helpful, sadly that did not fix the error yet. I'll play around a bit more and come back if I still can't fix it</p>



<a name="304035314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304035314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304035314">(Oct 14 2022 at 13:45)</a>:</h4>
<p>In any case try to post <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> (including the imports and so on, the idea is that we can copy/paste your code and see what happens). Note that <code>measure</code> refers to <a href="https://leanprover-community.github.io/mathlib_docs/find/measure">docs#measure</a>, that is probably not what you want.</p>
<p>Finally, it's probably a good idea to open a new conversation in the "new members" stream. I can move your message if you want.</p>



<a name="304035916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304035916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304035916">(Oct 14 2022 at 13:48)</a>:</h4>
<p>Yes, thanks, will keep in mind in the future. I got it working now. Yes, you can move this to the new members stream, didn't see it earlier</p>



<a name="304036820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304036820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304036820">(Oct 14 2022 at 13:52)</a>:</h4>
<p>Also, you might want your measure to take values in <a href="https://leanprover-community.github.io/mathlib_docs/find/enat">docs#enat</a> instead, since many (most?) point processes used in practice are only locally finite</p>



<a name="304037627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304037627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304037627">(Oct 14 2022 at 13:56)</a>:</h4>
<p>And probably you want to take in a function <code>set α → enat</code> rather than merely assuming it exists.</p>



<a name="304037699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304037699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304037699">(Oct 14 2022 at 13:56)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="330967">@Wrenna Robson</span> for similar considerations in <a href="https://leanprover-community.github.io/mathlib_docs/find/hamming_dist">docs#hamming_dist</a></p>



<a name="304038007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304038007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304038007">(Oct 14 2022 at 13:57)</a>:</h4>
<p>Hmm is this the mythical second example! I guess it's a measure not a metric.</p>



<a name="304038317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304038317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304038317">(Oct 14 2022 at 13:59)</a>:</h4>
<p>Is enat a complete linear order btw?</p>



<a name="304038359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304038359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304038359">(Oct 14 2022 at 13:59)</a>:</h4>
<p>10 messages were moved here from <a class="stream-topic" data-stream-id="113488" href="/#narrow/stream/113488-general/topic/measure.20theory">#general &gt; measure theory</a> by <span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span>.</p>



<a name="304038608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304038608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304038608">(Oct 14 2022 at 14:00)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/enat.complete_linear_order">docs#enat.complete_linear_order</a></p>



<a name="304066824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304066824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304066824">(Oct 14 2022 at 16:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat/near/304037627">said</a>:</p>
<blockquote>
<p>And probably you want to take in a function <code>set α → enat</code> rather than merely assuming it exists.</p>
</blockquote>
<p>I tried to do that, but I wasn't just able to overwrite the <code>measure_of</code> function. If there is a way to do it i'd be happy to implement it that way</p>



<a name="304067241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304067241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304067241">(Oct 14 2022 at 16:08)</a>:</h4>
<p>No, don't overwrite it. Simply state that they are compatible.</p>



<a name="304068923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304068923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304068923">(Oct 14 2022 at 16:15)</a>:</h4>
<p>You mean <code>{ \mu : measure \alpha // \exists f : set \alpha \to enat, \forall s, measurable s -&gt; \mu s = f s }</code> ?</p>



<a name="304069421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304069421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304069421">(Oct 14 2022 at 16:17)</a>:</h4>
<p>No, rather</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">measure_enat_of</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">enat</span><span class="o">)</span>
<span class="o">(</span><span class="n">coe_measure_enat_of</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">measurable</span> <span class="n">s</span> <span class="bp">→</span> <span class="bp">↑</span><span class="o">(</span><span class="n">measure_enat_of</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">measure_of</span> <span class="n">s</span><span class="o">)</span>
</code></pre></div>



<a name="304069532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304069532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304069532">(Oct 14 2022 at 16:18)</a>:</h4>
<p>Or even</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">measure_enat_of</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">enat</span><span class="o">)</span>
<span class="o">(</span><span class="n">coe_measure_enat_of</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span>  <span class="bp">↑</span><span class="o">(</span><span class="n">measure_enat_of</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">measure_of</span> <span class="n">s</span><span class="o">)</span>
</code></pre></div>
<p>because I think the junk value for <code>measure_of</code> will make it work out.</p>



<a name="304071400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304071400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304071400">(Oct 14 2022 at 16:27)</a>:</h4>
<p>What would be the difference in practice between <code>\exists f : set \alpha \to enat, \forall s : set \alpha, ...</code> and <code>\forall s : set \alpha, \exists n : enat, ...</code>? Those feel pretty isomorphic to each other. And if you have either, then <code>measure_enat_of</code> can be derived from <code>measure_of</code>.</p>



<a name="304071837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304071837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304071837">(Oct 14 2022 at 16:29)</a>:</h4>
<p>Well, you have to use choice every time you want to use one, while you can readily use the other.</p>



<a name="304113226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304113226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304113226">(Oct 14 2022 at 20:40)</a>:</h4>
<p>While I'm asking: would another option be to define a typeclass <code>[is_int_valued_measure \mu]</code> instead of a new type for int-valued measures?</p>



<a name="304116956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304116956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304116956">(Oct 14 2022 at 21:05)</a>:</h4>
<p>The question is whether you want to have an int-valued measure or merely know that there exists one.</p>



<a name="304116985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304116985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304116985">(Oct 14 2022 at 21:05)</a>:</h4>
<p>I highly doubt you want the latter.</p>



<a name="304117629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304117629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304117629">(Oct 14 2022 at 21:11)</a>:</h4>
<p>I would say that you want a plain old measure but know that it actually takes values in the integers. Something like this (but less clumsy):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">class</span> <span class="n">has_values_of_type</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_coe</span> <span class="n">γ</span> <span class="n">β</span><span class="o">]</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">eq</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">↑</span><span class="o">(</span><span class="n">to_fun</span> <span class="n">a</span><span class="o">))</span>

<span class="kd">instance</span> <span class="n">coe_enat_ennreal</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">enat</span> <span class="n">ennreal</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">refine</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span> <span class="n">refine</span> <span class="n">n.cases_on</span> <span class="bp">⊤</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n'</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span> <span class="n">exact</span> <span class="n">some</span> <span class="n">n'</span> <span class="o">}</span>

<span class="kd">class</span> <span class="n">is_integer_valued</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure_theory.measure</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">toto</span> <span class="o">:</span> <span class="n">has_values_of_type</span> <span class="n">μ</span> <span class="n">enat</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure_theory.measure</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">is_integer_valued</span> <span class="n">μ</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="n">enat</span><span class="o">,</span> <span class="n">μ</span> <span class="n">set.univ</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">is_integer_valued.toto.eq</span><span class="o">,</span> <span class="n">exists_apply_eq_apply'</span><span class="o">]</span>
</code></pre></div>



<a name="304119216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304119216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304119216">(Oct 14 2022 at 21:23)</a>:</h4>
<p>Still, why not just state the commutative diagram rather than its mere existence in an inconvenient form? Like, do you <em>really</em> not want to access the <code>enat</code>-valued function?</p>



<a name="304121201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304121201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304121201">(Oct 14 2022 at 21:40)</a>:</h4>
<p>In fact I don't know, it is not at all clear to me... but I think I would like to treat an int-valued measure as much like a usual measure for as long as possible, and only use the information that it is int-valued inside a few key lemmas, so a typeclass feels more natural. In my head, <code>[is_integer_valued \mu]</code> and <code>[is_probability_measure \mu]</code> have the same status; that one of them can be implemented as a <code>set \alpha \to enat</code> feels incidental.</p>
<p>Besides, I still kind of followed your suggestion, the function is right there as <code>has_values_of_type.to_fun</code> if you need it <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="304676874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304676874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304676874">(Oct 18 2022 at 13:22)</a>:</h4>
<p>Okay, so I have now tried to define a point measure as a sum of finite point measures and I am still running into problems. Lean seems to be complaining about my <code>sum_of_measures</code> condition, but I'm not sure why. Any help is appreciated, thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">measure_theory.measurable_space_def</span>
<span class="kn">import</span> <span class="n">measure_theory.measurable_space</span>
<span class="kn">import</span> <span class="n">measure_theory.measure.measure_space_def</span>

<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.nat.cast.defs</span>

<span class="kd">structure</span> <span class="n">finite_point_measure</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">measure</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">measure_enat_of</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">coe_measure_enat_of</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span>  <span class="bp">↑</span><span class="o">(</span><span class="n">measure_enat_of</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">measure_of</span> <span class="n">s</span><span class="o">)</span>

<span class="kd">structure</span> <span class="n">point_measure</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">measure</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fin_point_measures</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">finite_point_measure</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">sum_of_measures</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">measure_of</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∑'</span><span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">fin_point_measures</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">measure_enat_of</span> <span class="n">s</span><span class="o">)</span>
</code></pre></div>



<a name="304679273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304679273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304679273">(Oct 18 2022 at 13:35)</a>:</h4>
<p>I get no issue when I replace <code>measure α</code> with <code>measure_theory.measure α</code></p>



<a name="304679625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304679625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304679625">(Oct 18 2022 at 13:37)</a>:</h4>
<p>(Well, I do have a mathematical issue which is that you are not storing the sum but really an indexed family of finite point measures, but two such decompositions giving the same sum should probably be identical.)</p>



<a name="304680241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304680241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304680241">(Oct 18 2022 at 13:40)</a>:</h4>
<p>thanks, my issue was that I was using a <code>namespace</code> but forgot the <code>end</code> at the end</p>



<a name="304680544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304680544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304680544">(Oct 18 2022 at 13:41)</a>:</h4>
<p>How would you store the sum directly? I guess for my definition to be correct I would have to make some sort of equivalence class?</p>



<a name="304682775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304682775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304682775">(Oct 18 2022 at 13:52)</a>:</h4>
<p>I would avoid going down this road of defining equivalence relations for this. Rather, I would do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.enat</span>
<span class="kn">import</span> <span class="n">measure_theory.measurable_space</span>

<span class="kd">instance</span> <span class="n">with_top.has_coe_t'</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_coe_t</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_coe_t</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">with_top.map</span> <span class="n">has_coe_t.coe</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe_t</span> <span class="n">ℕ</span><span class="bp">∞</span> <span class="n">ennreal</span> <span class="o">:=</span> <span class="n">with_top.has_coe_t'</span>

<span class="kd">structure</span> <span class="n">point_measure</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">measure_theory.measure</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">measure_enat_of</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">enat</span><span class="o">)</span>
<span class="o">(</span><span class="n">coe_measure_enat_of</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">measure_of</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">measure_enat_of</span> <span class="n">s</span><span class="o">)</span>
</code></pre></div>
<p>(where the first two <code>coe</code> instances are probably somewhere in mathlib already but I couldn't find them)</p>



<a name="304682926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304682926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304682926">(Oct 18 2022 at 13:53)</a>:</h4>
<p>Don't call it <code>measure_enat_of</code> if it does not give you an <code>enat</code> <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="304763715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304763715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304763715">(Oct 18 2022 at 16:00)</a>:</h4>
<p>Thanks! If I now want to build the measurable space of point measures (where the sigma-algebra is generated by sets<br>
<code> ∀B∀k {η(B)=k}</code> where would I even begin? Should I implement that as an instance or a def. Also I'm not sure how to write sets of sets I guess.</p>



<a name="304830027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304830027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304830027">(Oct 18 2022 at 19:55)</a>:</h4>
<p>You can have a look at <a href="https://leanprover-community.github.io/mathlib_docs/find/measurable_space.generate_measurable">docs#measurable_space.generate_measurable</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/measurable_space.generate_from">docs#measurable_space.generate_from</a></p>



<a name="304831150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304831150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304831150">(Oct 18 2022 at 20:02)</a>:</h4>
<p>Maybe something like this,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">elementary</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">enat</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">point_measure</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">μ</span> <span class="bp">|</span> <span class="n">μ.measure_enat_of</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">k</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">elementaries</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="o">(</span><span class="n">point_measure</span> <span class="n">α</span><span class="o">))</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">S</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">B</span> <span class="n">k</span><span class="o">,</span> <span class="n">measurable_set</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">S</span> <span class="bp">=</span> <span class="n">elementary</span> <span class="n">B</span> <span class="n">k</span><span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="o">(</span><span class="n">point_measure</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">measurable_space.generate_from</span> <span class="o">(</span><span class="n">elementaries</span> <span class="n">α</span><span class="o">)</span>
</code></pre></div>
<p>but there has to be a better way of defining <code>elementaries</code>.</p>



<a name="304833621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304833621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304833621">(Oct 18 2022 at 20:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="242586">Vincent Beffara</span> <a href="#narrow/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat/near/304830027">said</a>:</p>
<blockquote>
<p>You can have a look at <a href="https://leanprover-community.github.io/mathlib_docs/find/measurable_space.generate_measurable">docs#measurable_space.generate_measurable</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/measurable_space.generate_from">docs#measurable_space.generate_from</a></p>
</blockquote>
<p>I tried this, but I wasn't quite able to get it to work</p>



<a name="304833676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/304833676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#304833676">(Oct 18 2022 at 20:19)</a>:</h4>
<p>Thanks for all the help!</p>



<a name="305156355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/305156355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#305156355">(Oct 20 2022 at 14:01)</a>:</h4>
<p>Hi, I'm trying to define a Poission random variable and am starting by defining the pmf, but I'm having problems with casting between <code>nat</code> and <code>real</code> and <code>nnreal</code>.  Also is this the right approach? thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">poission_pmf</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">real.exp</span> <span class="o">(</span><span class="bp">-</span><span class="n">l</span><span class="o">)</span> <span class="bp">*</span> <span class="n">l</span><span class="bp">^</span><span class="n">k</span><span class="o">)</span> <span class="bp">/</span> <span class="o">(</span><span class="n">nat.factorial</span> <span class="n">k</span><span class="o">)</span>
</code></pre></div>
<p>EDIT:<br>
nevermind: figured it out</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">poission_pmf</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">:=</span>
  <span class="o">((</span><span class="n">real.to_nnreal</span> <span class="o">(</span><span class="n">real.exp</span><span class="o">(</span><span class="bp">-</span><span class="n">l</span><span class="o">))</span> <span class="bp">*</span> <span class="n">l</span><span class="bp">^</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="bp">/</span> <span class="o">(</span><span class="n">nat.factorial</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">))</span>
</code></pre></div>



<a name="305224041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/305224041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#305224041">(Oct 20 2022 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="283896">Niclas Kupper</span> has marked this topic as unresolved.</p>



<a name="305224319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Measure%20taking%20values%20in%20nat/near/305224319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Niclas Kupper <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Measure.20taking.20values.20in.20nat.html#305224319">(Oct 20 2022 at 19:39)</a>:</h4>
<p>That might be a good idea, I'll try that tomorrow – still not that comfortable with writing proofs in lean, so I might try proving basic facts about Poission RVs first</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>