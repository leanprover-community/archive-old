---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/infinite.20loop.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html">infinite loop</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205599918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205599918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205599918">(Jul 31 2020 at 14:54)</a>:</h4>
<p>Hi all, I'm new to Lean and I'm going through the Number Game. At level 6/13 of Advanced Addition World, I noticed that given the hypothesis <code>h: t+a=t+b</code> if you type <code>repeat {rw add_comm at h}</code> it gets stuck an infinite loop :) Is this "intended" or ideally lean should detect and abort with a failure?</p>



<a name="205600012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600012">(Jul 31 2020 at 14:54)</a>:</h4>
<p>do you have a solution to the halting problem?</p>



<a name="205600095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600095">(Jul 31 2020 at 14:55)</a>:</h4>
<p>this is not a halting problem, this is just detecting that you've come back to the current state.</p>



<a name="205600201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600201">(Jul 31 2020 at 14:56)</a>:</h4>
<p>that would make the tactic slower</p>



<a name="205600252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600252">(Jul 31 2020 at 14:56)</a>:</h4>
<p>tactics are tools, not magic algorithms that prove every theorem</p>



<a name="205600272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600272">(Jul 31 2020 at 14:56)</a>:</h4>
<p>only the repeat tactic, though</p>



<a name="205600484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600484">(Jul 31 2020 at 14:58)</a>:</h4>
<p>of course it's a tool, I did not ask for a magic wand. Just that if I say <code>repeat {x}</code> it could, conceptually, determine that it's going round an infinite loop</p>



<a name="205600543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600543">(Jul 31 2020 at 14:58)</a>:</h4>
<p>and it makes sense to slow down only the repeat tactic in this case</p>



<a name="205600611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600611">(Jul 31 2020 at 14:58)</a>:</h4>
<p>That's not what <code>repeat</code> is defined to do, but also it's generally not that useful to detect loops anyways--what would it do if it detects one?</p>



<a name="205600680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600680">(Jul 31 2020 at 14:59)</a>:</h4>
<p>right, why not just use <code>iterate n { rw foo }</code> if you know it will be in a loop</p>



<a name="205600723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600723">(Jul 31 2020 at 14:59)</a>:</h4>
<p>I did not know about <code>iterate</code></p>



<a name="205600761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205600761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205600761">(Jul 31 2020 at 14:59)</a>:</h4>
<p>I'm literally just at level 6/13 of that world</p>



<a name="205601144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601144">(Jul 31 2020 at 15:02)</a>:</h4>
<p>Oh, you said raise an error--but I think that's too expensive in the non-erroring case, and usually it's pretty obvious where the problem is if you just added <code>repeat { foo }</code> to your proof and Lean starts taking a long time</p>



<a name="205601182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601182">(Jul 31 2020 at 15:03)</a>:</h4>
<p>So to answer your original question, this is intended behavior</p>



<a name="205601223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601223">(Jul 31 2020 at 15:03)</a>:</h4>
<p>there are in fact smarter tactics that can figure out how to apply commutativity,</p>



<a name="205601241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601241">(Jul 31 2020 at 15:03)</a>:</h4>
<p>but the point of the natural number game is to learn how to do things without them :)</p>



<a name="205601261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601261">(Jul 31 2020 at 15:03)</a>:</h4>
<p>well I understand where you are coming from</p>



<a name="205601266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601266">(Jul 31 2020 at 15:03)</a>:</h4>
<p>the NNG is marketed as a game</p>



<a name="205601318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601318">(Jul 31 2020 at 15:04)</a>:</h4>
<p>The original example isn't a good use of repeated <code>rw</code> anyways because the first rewrite will change <code>t+a=t+b</code> to <code>a+t=t+b</code> and the second one will change it back to <code>t+a=t+b</code>.</p>



<a name="205601322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601322">(Jul 31 2020 at 15:04)</a>:</h4>
<p>so in a game I would expect <code>rw</code> to have loop detection feature I guess</p>



<a name="205601718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601718">(Jul 31 2020 at 15:07)</a>:</h4>
<p>You mean <code>repeat</code>? I can just remove it if you like :-) Or replace with <code>iterate 37</code>, that should be enough for everyone</p>



<a name="205601761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601761">(Jul 31 2020 at 15:07)</a>:</h4>
<p>A few months ago the user would lose all their progress if they did this :-/</p>



<a name="205601945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601945">(Jul 31 2020 at 15:09)</a>:</h4>
<p>yeah so far the game did not mention <code>iterate</code> although even if it did I am sure I would have not used it :) was just food for thoughts and I understand this might have been a very trivial example that in real practice would not even actually happen</p>



<a name="205601965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raffaele Rossi <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601965">(Jul 31 2020 at 15:09)</a>:</h4>
<p>but I like that this community is very active</p>



<a name="205601973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205601973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205601973">(Jul 31 2020 at 15:09)</a>:</h4>
<p>i would probably have had a better time with the nng my first time if <code>repeat</code> were a synonym for <code>iterate 37</code> or maybe just <code>iterate 3</code></p>



<a name="205602750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205602750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205602750">(Jul 31 2020 at 15:13)</a>:</h4>
<p>One can see that you guys aren't computer scientists. ;)</p>



<a name="205605040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205605040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205605040">(Jul 31 2020 at 15:30)</a>:</h4>
<p>yes, the computer scientist's version of the nng might have ~none of the overrides that kevin made. thankfully the computer scientists have less trouble installing lean locally and playing more faithful tutorials</p>



<a name="205652395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205652395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205652395">(Jul 31 2020 at 23:36)</a>:</h4>
<p>I think <code>repeat</code> is actually defined as <code>iterate 100000</code></p>



<a name="205660846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205660846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205660846">(Aug 01 2020 at 03:06)</a>:</h4>
<p>I don't see <code>100000</code> in <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.repeat/src">src#tactic.repeat</a></p>



<a name="205661155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205661155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205661155">(Aug 01 2020 at 03:16)</a>:</h4>
<p>yeah it looks like it's a plain old infinite loop</p>



<a name="205663732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205663732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205663732">(Aug 01 2020 at 04:29)</a>:</h4>
<p>It appears that the definition of <code>repeat</code> has changed since <a href="https://github.com/leanprover-community/lean/blame/7b97e82fb38790a364095d28a7ab30118a1c9723/library/init/meta/tactic.lean#L128">my recollection</a>. It has since been renamed to <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.iterate/src">src#tactic.iterate</a>, which differs from the current <code>tactic.repeat</code> only in the abnormally high limit</p>



<a name="205667952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/infinite%20loop/near/205667952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/infinite.20loop.html#205667952">(Aug 01 2020 at 06:28)</a>:</h4>
<p>Yeah I think I even remember reading in some docs (maybe Programming in Lean?) that <code>repeat</code> was <code>iterate 10^n</code> for some n which should be enough for everyone</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>