---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html">Applying a hypothesis to just one term in tactic mode</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="181097242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Gilbey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097242">(Nov 19 2019 at 10:10)</a>:</h4>
<p>Hi!<br>
After a hiatus (paper deadline ;-), I've started trying to get my head around tactic mode (thanks for earlier advice).  So I thought I'd start with a really really easy example: prove that in a group G, the identity is the unique element to satisfy <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">x*x=x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>.  OK, here are two maths proofs for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">x*x = x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> implies <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>:</p>
<p>(1) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><msup><mi>x</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>∗</mo><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><msup><mi>x</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>∗</mo><mi>x</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mn>1</mn><mo>∗</mo><mi>x</mi><mo>=</mo><mn>1</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x*x=x \implies x^{-1}<em>x</em>x=x^{-1}<em>x \implies 1</em>x=1 \implies x=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66844em;vertical-align:-0.024em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> where the steps are "multiply on the left by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">x^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>", "use (associativity and) inverse property", "use 1 property".</p>
<p>(2) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi><mo>∗</mo><mn>1</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x<em>x=x \implies x</em>x=x*1 \implies x=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66844em;vertical-align:-0.024em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, where the steps are "multiply the right hand side on the right by 1" and "use the left cancellation property".</p>
<p>The other implication (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> implies <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∗</mo><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x*x=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>) is even simpler: substitute in the hypothesis and use the 1 property.</p>
<p>But I have so struggled to write this nicely in tactic mode :-(  For approach (1), I couldn't figure out how to multiply the whole equation on the left by something (though I wonder whether <code>congr_arg</code> is the right way to go?), and for (2) I couldn't figure out how to rewrite just one term in the equation.  The reverse implication also turned out to be much harder than it should have been.</p>
<p>Here's my best attempt so far, which is just ugly: any suggestions on how to improve it?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">init</span><span class="bp">.</span><span class="n">algebra</span><span class="bp">.</span><span class="n">group</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span>

<span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">iff</span><span class="bp">.</span><span class="n">intro</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="k">calc</span>
      <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>  <span class="o">:</span> <span class="n">h</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_left_cancel</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="k">calc</span>
    <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">h</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Many thanks!</p>



<a name="181097413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097413">(Nov 19 2019 at 10:13)</a>:</h4>
<p>There is no need to import <code>init.algebra.group</code>, because the zeroth line of a lean file imports all of <code>init</code></p>



<a name="181097474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097474">(Nov 19 2019 at 10:14)</a>:</h4>
<p>if you want to <em>not</em> import anything else, you should start the file with <code>prelude</code></p>



<a name="181097519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097519">(Nov 19 2019 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="242660">@Julian Gilbey</span> For the reverse direction: after <code>intro h</code>, you could do <code>subst h</code> or <code>rw h</code>. Maybe that helps?</p>



<a name="181097527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097527">(Nov 19 2019 at 10:15)</a>:</h4>
<p>Probably you can also close the goal directly with <code>simp [h]</code></p>



<a name="181097594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097594">(Nov 19 2019 at 10:16)</a>:</h4>
<p>For the forward direction. I agree that a step like "multiply both sides with ..." doesn't have a nice tactic-verb yet.</p>



<a name="181097744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097744">(Nov 19 2019 at 10:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_inv_cancel_right</span>
       <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">⁻¹</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">h</span>
       <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span>           <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_inv_self</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">h</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>



<a name="181097754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097754">(Nov 19 2019 at 10:18)</a>:</h4>
<p>just a slight cleanup of your proof</p>



<a name="181097795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097795">(Nov 19 2019 at 10:19)</a>:</h4>
<p>Here's how I'd do it, basically following your (2) for the first part:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">mul_right_cancel</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">],</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
</pre></div>


<p>(I've also deliberately avoided using <code>simp</code> and such so you can see what's going on)</p>



<a name="181097875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181097875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181097875">(Nov 19 2019 at 10:20)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">mul_on_left</span> <span class="o">{</span><span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">mul_left_cancel</span> <span class="n">h</span>

<span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">mul_on_left</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="n">mul_one</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">exact</span> <span class="n">mul_one</span> <span class="bp">_</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>



<a name="181098029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098029">(Nov 19 2019 at 10:22)</a>:</h4>
<p>The golfed proof:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="bp">@</span><span class="n">mul_left_cancel_iff</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">x</span> <span class="n">x</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
</pre></div>



<a name="181098133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098133">(Nov 19 2019 at 10:23)</a>:</h4>
<p>I wouldn't mind having <code>mul_on_left</code> and friends in mathlib</p>



<a name="181098192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098192">(Nov 19 2019 at 10:24)</a>:</h4>
<p>why do all theorems have to be tactics too</p>



<a name="181098200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098200">(Nov 19 2019 at 10:24)</a>:</h4>
<p>there is already a theorem for this, I used it</p>



<a name="181098213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098213">(Nov 19 2019 at 10:24)</a>:</h4>
<p>It's not a tactic. It's a an existing theorem but with different binders</p>



<a name="181098248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098248">(Nov 19 2019 at 10:25)</a>:</h4>
<p>And a name that mimics the informal language</p>



<a name="181098262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098262">(Nov 19 2019 at 10:25)</a>:</h4>
<p>Actually, core is violating mathlib conventions in this case. The variable being cancelled should be explicit</p>



<a name="181098295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098295">(Nov 19 2019 at 10:26)</a>:</h4>
<p>Luckily core doesn't depend on mathlib. So it doesn't have to give a thing for mathlib conventions (-;</p>



<a name="181098379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098379">(Nov 19 2019 at 10:26)</a>:</h4>
<p>it is sometimes problematic when people get the wrong idea from the way a theorem from core is stated</p>



<a name="181098388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098388">(Nov 19 2019 at 10:27)</a>:</h4>
<p>or named</p>



<a name="181098554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098554">(Nov 19 2019 at 10:29)</a>:</h4>
<p>But core doesn't depend on those people's ideas either. So again, it doesn't really care [/sarcasm]</p>



<a name="181098562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098562">(Nov 19 2019 at 10:29)</a>:</h4>
<p>We should have a tactic for applying <code>congr_arg</code> though. The term is finicky</p>



<a name="181098732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098732">(Nov 19 2019 at 10:32)</a>:</h4>
<p>That is, the <code>replace</code> line here:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>



<a name="181098878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098878">(Nov 19 2019 at 10:34)</a>:</h4>
<p>That's getting close to Kevin's modified <code>apply</code> that also works on hyps</p>



<a name="181098899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098899">(Nov 19 2019 at 10:34)</a>:</h4>
<p>Maybe this should be <code>congr (*) x at h</code>?</p>



<a name="181098945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098945">(Nov 19 2019 at 10:35)</a>:</h4>
<p>Or <code>congr'</code>, if the other is locked into ...</p>



<a name="181098959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181098959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181098959">(Nov 19 2019 at 10:35)</a>:</h4>
<p>I'm thinking something like <code>congr_hyp x * _ with h</code></p>



<a name="181099018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099018">(Nov 19 2019 at 10:36)</a>:</h4>
<p>You should be able to provide more than one placeholder, and more than one hypothesis</p>



<a name="181099054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099054">(Nov 19 2019 at 10:37)</a>:</h4>
<p>Wait, why <code>with</code> instead of <code>at</code>?</p>



<a name="181099065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099065">(Nov 19 2019 at 10:37)</a>:</h4>
<p>it's not rewriting <code>h</code></p>



<a name="181099092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099092">(Nov 19 2019 at 10:37)</a>:</h4>
<p>my example rewrote h but that's probably not always desirable, since this move loses information</p>



<a name="181099162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099162">(Nov 19 2019 at 10:38)</a>:</h4>
<p>A crazier idea is <code>congr_hyp x * h</code> but I don't know if we can typecheck that enough to figure out what's happening</p>



<a name="181099183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099183">(Nov 19 2019 at 10:38)</a>:</h4>
<p>If you don't replace <code>h</code> you need the user to supply a new name as well</p>



<a name="181099201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099201">(Nov 19 2019 at 10:38)</a>:</h4>
<p><code>congr_hyp h2 : x * h</code></p>



<a name="181099232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099232">(Nov 19 2019 at 10:39)</a>:</h4>
<p>the equalities might also be terms, they aren't necessarily from the context</p>



<a name="181099234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099234">(Nov 19 2019 at 10:39)</a>:</h4>
<p>Hmm.. I think I prefer <code>congr_hyp h2 : x * _ with h</code></p>



<a name="181099244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099244">(Nov 19 2019 at 10:39)</a>:</h4>
<p>so perhaps <code>using [h]</code></p>



<a name="181099250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099250">(Nov 19 2019 at 10:39)</a>:</h4>
<p>or maybe <code>using h</code>... I don't know the difference between <code>with</code> and <code>using</code></p>



<a name="181099296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099296">(Nov 19 2019 at 10:40)</a>:</h4>
<p><code>using</code> uses terms</p>



<a name="181099306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099306">(Nov 19 2019 at 10:40)</a>:</h4>
<p>Ok, then I prefer <code>using</code></p>



<a name="181099307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099307">(Nov 19 2019 at 10:40)</a>:</h4>
<p><code>with</code> is always names (usually new names generated by the tactic)</p>



<a name="181099335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099335">(Nov 19 2019 at 10:41)</a>:</h4>
<p>Downside of using placeholders is then you can't actually use literal placeholders</p>



<a name="181099357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099357">(Nov 19 2019 at 10:41)</a>:</h4>
<p>Aha... we need better syntax to distinguish those</p>



<a name="181099429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099429">(Nov 19 2019 at 10:42)</a>:</h4>
<p>something like <code>x * ‹h›</code> might work, but we need to be able to capture the notation and control elaboration</p>



<a name="181099699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099699">(Nov 19 2019 at 10:46)</a>:</h4>
<p>Eh, too much work. How about using placeholders for simple situations and another keyword for when you still need placeholders, i.e. <code>congr_hyp : x * a with a using [h]</code></p>



<a name="181099758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181099758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181099758">(Nov 19 2019 at 10:47)</a>:</h4>
<p>I don't really like that everything is separated here but I'm not sure if parsing will work with other setups, e.g. <code>congr_hyp : x * a using [a : h]</code></p>



<a name="181130052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181130052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181130052">(Nov 19 2019 at 16:40)</a>:</h4>
<p>I think you want to replace the hypothesis more often than not. If you don't want to, you could just copy the hypothesis with <code>have</code> first, right?</p>



<a name="181130846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181130846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181130846">(Nov 19 2019 at 16:49)</a>:</h4>
<blockquote>
<p>You should be able to provide more than one placeholder, and more than one hypothesis</p>
</blockquote>
<p>Could you give an example of how this would look?</p>



<a name="181130933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181130933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181130933">(Nov 19 2019 at 16:50)</a>:</h4>
<p>Oh, like if <code>h1 : a = b</code> and <code>h2 : c = d</code>, then you write something like <code>congr_hyp _ + _ using h1 h2</code> and you get a proof of <code>a + c = b + d</code>?</p>



<a name="181140496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181140496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Gilbey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181140496">(Nov 19 2019 at 18:33)</a>:</h4>
<blockquote>
<p>if you want to <em>not</em> import anything else, you should start the file with <code>prelude</code></p>
</blockquote>
<p>Ah, thanks <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> - I didn't know that!</p>



<a name="181140828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181140828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Gilbey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181140828">(Nov 19 2019 at 18:36)</a>:</h4>
<blockquote>
<p>Probably you can also close the goal directly with <code>simp [h]</code></p>
</blockquote>
<p>Ooh, <code>subst h</code> followed by <code>exact mul_one 1</code> works, and so does <code>rw [h, mul_one]</code>, and so does <code>simp [h]</code>.  Thanks!  So much nicer than what I did ;-)</p>



<a name="181140919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181140919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181140919">(Nov 19 2019 at 18:37)</a>:</h4>
<blockquote>
<p>For the forward direction. I agree that a step like "multiply both sides with ..." doesn't have a nice tactic-verb yet.</p>
</blockquote>
<p>This just happened to me again: I had <code>h : list.of_fn f = []</code> with <code>f : fin n -&gt; X</code> and I wanted to deduce that n was 0 (this was not the goal). The theorem <code>list.length_of_fn</code> tells me that <code>length(list.of_fn f) = n</code> so I just wanted to "apply list.length to h" and then rw list.length_of_fn. I don't know an easy way to do this in tactic mode without this apply idea.</p>



<a name="181141017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181141017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181141017">(Nov 19 2019 at 18:38)</a>:</h4>
<blockquote>
<blockquote>
<p>Probably you can also close the goal directly with <code>simp [h]</code></p>
</blockquote>
<p>Ooh, <code>subst h</code> followed by <code>exact mul_one 1</code> works, and so does <code>rw [h, mul_one]</code>, and so does <code>simp [h]</code>.  Thanks!  So much nicer than what I did ;-)</p>
</blockquote>
<p>Of course, the reason that <code>simp</code> might help is that someone already proved all or most of what you wanted, probably in term mode, and then tagged it <code>[@simp]</code>.</p>



<a name="181141584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181141584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Gilbey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181141584">(Nov 19 2019 at 18:44)</a>:</h4>
<blockquote>
<p>Here's how I'd do it, basically following your (2) for the first part:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">mul_right_cancel</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">],</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
</pre></div>


<p>(I've also deliberately avoided using <code>simp</code> and such so you can see what's going on)</p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> Now this is interesting: <code>apply mul_right_cancel</code> can apply the lemma backwards, which somewhat surprises me.  How does it know that it's a two-way implication?</p>



<a name="181142432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181142432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181142432">(Nov 19 2019 at 18:53)</a>:</h4>
<p>If you hover over <code>mul_right_cancel</code> you'll see its definition: <code>mul_right_cancel : ∀ {α : Type} [_inst_1 : right_cancel_semigroup α] {a b c : α}, a * b = c * b → a = c</code>. So it's a one way implication. And <code>apply</code> applies a function, so it's all consistent.</p>



<a name="181142632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181142632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181142632">(Nov 19 2019 at 18:55)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">mul_right_cancel</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">],</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>


<p>This way doesn't have metavariables in.</p>



<a name="181146014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181146014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181146014">(Nov 19 2019 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="242660">@Julian Gilbey</span> Kevin's answered the question well - I'll add that <code>apply</code> works by backwards reasoning using functions, so it essentially only applies lemmas backwards</p>



<a name="181146099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181146099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181146099">(Nov 19 2019 at 19:30)</a>:</h4>
<p>proposition world of the natural number game gets people proving theorems backwards.</p>



<a name="181146318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181146318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181146318">(Nov 19 2019 at 19:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- computer scientist</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hAB</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">hBC</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">hCD</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">D</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hCD</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hBC</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hAB</span><span class="o">,</span>
  <span class="n">assumption</span>
<span class="kn">end</span>

<span class="c1">-- mathematician</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hAB</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">hBC</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">hCD</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">D</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">hAB</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">hBC</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hCD</span> <span class="n">c</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="181146337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181146337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181146337">(Nov 19 2019 at 19:32)</a>:</h4>
<p>We think forwards, but it doesn't half clutter up the tactic state.</p>



<a name="181146412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181146412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181146412">(Nov 19 2019 at 19:33)</a>:</h4>
<p>I'd argue we do a bit of both</p>



<a name="181232019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181232019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Gilbey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181232019">(Nov 20 2019 at 17:54)</a>:</h4>
<p>Ah, thanks <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> and <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  - I think I'm getting it!  How does this sound: <code>apply</code> says something along the lines of "we're trying to prove B; we have a theorem of the form A =&gt; B, and we <code>apply</code> this theorem, then we only need to prove A in order to be done".  So in this case, we're trying to prove <code>x=1</code>, and applying <code>mul_right_cancel</code> therefore says "if we can reach <code>x*y=1*y</code> for some y, then we're done, because we can just apply <code>mul_right_cancel</code> at that point".  (And that explains why the state after <code>apply mul_right_cancel</code>looks like this.) So when the docs talk about "rewriting the target", it means something like: <code>apply</code> changes our target by saying "if we get to an earlier point, we are effectively done".</p>



<a name="181232125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181232125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181232125">(Nov 20 2019 at 17:56)</a>:</h4>
<p>you can think of <code>apply T</code> as saying "by <code>T</code>, it suffices to show..."</p>



<a name="181232191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181232191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181232191">(Nov 20 2019 at 17:56)</a>:</h4>
<p>It's doing the proof backwards. The CS people like it</p>



<a name="181232212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Applying%20a%20hypothesis%20to%20just%20one%20term%20in%20tactic%20mode/near/181232212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Applying.20a.20hypothesis.20to.20just.20one.20term.20in.20tactic.20mode.html#181232212">(Nov 20 2019 at 17:56)</a>:</h4>
<p>Because it's writing the function forward</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>