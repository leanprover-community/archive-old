---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html">✔ universe question: max u v = max v u?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273253683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273253683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273253683">(Feb 25 2022 at 16:54)</a>:</h4>
<p>I am trying to resolve the following universe error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">has</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_2</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">((</span><span class="n">max</span> <span class="n">u_2</span> <span class="n">u_1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_1</span> <span class="bp">?</span><span class="n">l_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">((</span><span class="n">max</span> <span class="n">u_1</span> <span class="bp">?</span><span class="n">l_1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>
<p>If I understand correctly, <code>?l_1</code> is a universe metavariable which can still be set, and the problem might be that <code>max u_2 u_1</code> and <code>max u_1 u_2</code>are different ?!<br>
(I can share more context, but felt like this should be a very generic problem independent of the concrete situation.)</p>



<a name="273253790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273253790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273253790">(Feb 25 2022 at 16:55)</a>:</h4>
<p>it's always nice to have a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> to try the solutions we suggest</p>



<a name="273254105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273254105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273254105">(Feb 25 2022 at 16:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.module.projective</span>
<span class="kn">import</span> <span class="n">ring_theory.principal_ideal_domain</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">free_module_natural_map</span> <span class="o">:</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→₀</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">finsupp.total</span> <span class="n">M</span> <span class="n">M</span> <span class="n">R</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">step_two</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→₀</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">free_module_natural_map</span> <span class="n">M</span><span class="o">)</span><span class="bp">.</span><span class="n">ker</span>

<span class="kd">lemma</span> <span class="n">step_two_projective</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">is_principal_ideal_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">module.projective</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">step_two</span> <span class="n">R</span> <span class="n">_</span> <span class="n">M</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="273254295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273254295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273254295">(Feb 25 2022 at 16:58)</a>:</h4>
<p>the statement of step_two_projective produces the type error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">module.projective.</span><span class="o">{</span><span class="n">u_1</span> <span class="bp">?</span><span class="n">l_1</span><span class="o">}</span> <span class="n">R</span> <span class="bp">↥</span><span class="o">(</span><span class="n">step_two.</span><span class="o">{</span><span class="n">u_1</span> <span class="n">u_2</span><span class="o">}</span> <span class="n">M</span><span class="o">)</span>
<span class="n">term</span>
  <span class="bp">↥</span><span class="o">(</span><span class="n">step_two.</span><span class="o">{</span><span class="n">u_1</span> <span class="n">u_2</span><span class="o">}</span> <span class="n">M</span><span class="o">)</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_2</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">((</span><span class="n">max</span> <span class="n">u_2</span> <span class="n">u_1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_1</span> <span class="bp">?</span><span class="n">l_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">((</span><span class="n">max</span> <span class="n">u_1</span> <span class="bp">?</span><span class="n">l_1</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>



<a name="273255178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255178">(Feb 25 2022 at 17:04)</a>:</h4>
<p><code>max u v = max v u</code> is known to lean, this isn't the problem</p>



<a name="273255245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255245">(Feb 25 2022 at 17:04)</a>:</h4>
<p>okay, good</p>



<a name="273255252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255252">(Feb 25 2022 at 17:04)</a>:</h4>
<p>The issue is that <code>max u v = max v ?l</code> does not have a unique solution for <code>?l</code>: <code>?l := max u v</code> is also a solution</p>



<a name="273255299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255299">(Feb 25 2022 at 17:05)</a>:</h4>
<p>because <code>max</code> isn't an injective function when you fix one of its arguments</p>



<a name="273255391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255391">(Feb 25 2022 at 17:05)</a>:</h4>
<p>so would i have to annotate the universes by hand?<br>
with the <code>.{u_2}</code> syntax?</p>



<a name="273255409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255409">(Feb 25 2022 at 17:05)</a>:</h4>
<p>It's possible</p>



<a name="273255503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255503">(Feb 25 2022 at 17:06)</a>:</h4>
<p>yes</p>



<a name="273255511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255511">(Feb 25 2022 at 17:06)</a>:</h4>
<p><code>lemma step_two_projective [is_domain R] [is_principal_ideal_ring R] : module.projective.{u_1 u_2} R (@step_two R _ M _ _) := sorry</code> works</p>



<a name="273255520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255520">(Feb 25 2022 at 17:06)</a>:</h4>
<p>It's also possible one of the lemmas has spurious universe arguments, there is a linter to check for this so try <code>#lint</code></p>



<a name="273255658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255658">(Feb 25 2022 at 17:07)</a>:</h4>
<p>your example isn't a MWE by the way, you don't have any imports</p>



<a name="273255732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255732">(Feb 25 2022 at 17:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F/near/273255520">said</a>:</p>
<blockquote>
<p>It's also possible one of the lemmas has spurious universe arguments, there is a linter to check for this so try <code>#lint</code></p>
</blockquote>
<p>no, only missing docstrings</p>



<a name="273255959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273255959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273255959">(Feb 25 2022 at 17:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F/near/273255658">said</a>:</p>
<blockquote>
<p>your example isn't a MWE by the way, you don't have any imports</p>
</blockquote>
<p>fixed for future reference,  and thanks</p>



<a name="273256104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273256104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273256104">(Feb 25 2022 at 17:10)</a>:</h4>
<p>Thank you, fixed</p>



<a name="273256110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273256110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273256110">(Feb 25 2022 at 17:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210057">Fabian Glöckle</span> has marked this topic as resolved.</p>



<a name="273256499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273256499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273256499">(Feb 25 2022 at 17:13)</a>:</h4>
<p>Oh I see, it looks like the culprit is <a href="https://leanprover-community.github.io/mathlib_docs/find/module.projective">docs#module.projective</a></p>



<a name="273256605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273256605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273256605">(Feb 25 2022 at 17:13)</a>:</h4>
<p>the <code>P : Type (max u v)</code> in the assumptions is sure to cause this issue, but it has been explicitly written like that in the source so I guess there is a reason for it</p>



<a name="273257149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273257149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273257149">(Feb 25 2022 at 17:17)</a>:</h4>
<p>Looks like this was done in <a href="https://github.com/leanprover-community/mathlib/commit/a617d0a61d6517258d88045c087f2f8c680c753a#diff-19b612d25c09e095a5127c64ec5f2dec8d39c3240dc76044f7520aea89c0a1e8">a617d0a</a> by <span class="user-mention" data-user-id="110087">@Scott Morrison</span> , perhaps he can speak to why the restriction is necessary. The code contains a comment</p>
<blockquote>
<p>We require that the module sits in at least as high a universe as the ring: without this, free modules don't even exist, and it's unclear if projective modules are even a useful notion.</p>
</blockquote>
<p>but I don't see why this needs to be a constraint on the definition itself</p>



<a name="273284245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273284245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273284245">(Feb 25 2022 at 20:59)</a>:</h4>
<p>Somewhere later I proved an equivalence with some other notion of equivalence (perhaps the general category theoretic one?), and my vague memory is that I had to put the universe description all the way back here on the definition in order to state the equivalence cleanly?? But that doesn't sound particularly plausible, so anyone should feel free to experiment with relaxing it if they can see a payoff.</p>



<a name="273307794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273307794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273307794">(Feb 26 2022 at 01:33)</a>:</h4>
<p>It's not clear to me that there is any good notion of projective R-module in universes smaller than that of R</p>



<a name="273307809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273307809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273307809">(Feb 26 2022 at 01:33)</a>:</h4>
<p>Anyways, just put your rings and modules in the same universe.</p>



<a name="273326570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273326570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273326570">(Feb 26 2022 at 08:12)</a>:</h4>
<p>That's easy to say until you want some theorem about abelian groups coming from the condensed sets work (or version zero of etale cohomology groups) which live in <code>Type 1</code> and the proof goes via ℤ-modules :-/</p>



<a name="273326642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273326642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273326642">(Feb 26 2022 at 08:15)</a>:</h4>
<p>I guess then you just <code>ulift</code> except that I learnt (from you) very recently that this comes with its own problems (eg apparently putting the order on <code>ulift ℤ</code> is currently an unsolved problem?)</p>



<a name="273331242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273331242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273331242">(Feb 26 2022 at 10:03)</a>:</h4>
<p>Right but this is a mathematically sensible thing to do anyways</p>



<a name="273332112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273332112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273332112">(Feb 26 2022 at 10:25)</a>:</h4>
<p>I think that <em>even if</em> there is no suitable notion of projective R-module when the universe of R is larger than P (and I'm not convinced this is the case, e.g. if R happens to be a ulifted type from a small universe), it would be better not to put the universe restriction in the definition using a <code>max</code>, and instead only use the definition when the universe of <code>P</code> is larger than <code>R</code> and ignore the other cases, like we do for definitions out of range.</p>



<a name="273332724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273332724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273332724">(Feb 26 2022 at 10:37)</a>:</h4>
<p>I think <code>v</code> is better than <code>max u v</code> (barring some technical reason for <code>max u v</code> that's a bit hard to imagine), but maybe <code>u</code> (i.e. the universe of the ring) is better than <code>v</code> if it prevents people from trying to think about the nonsense case <code>u &gt; v</code>.</p>



<a name="273332768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273332768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273332768">(Feb 26 2022 at 10:38)</a>:</h4>
<p>i.e. <code>v</code> is abstractly better than <code>u</code> in terms of first order effects, but maybe not actually better for humans</p>



<a name="273332972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273332972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273332972">(Feb 26 2022 at 10:43)</a>:</h4>
<p>The total effort I've seen people expend on trying to "generalize" to things like <code>Mod.{v u} R</code> far exceeds the amount of effort it would take even to manually add a bunch of instances for <code>ulift</code>, and the result isn't nicer because <code>Mod.{v u} R</code> will still need to use <code>ulift R</code> anyways (e.g. for the monoidal unit)</p>



<a name="273333023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273333023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273333023">(Feb 26 2022 at 10:44)</a>:</h4>
<p>So I'm inclined to conclude that this is the wrong path, and the earlier you don't go down it, the better</p>



<a name="273344141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273344141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273344141">(Feb 26 2022 at 14:34)</a>:</h4>
<p>But I'm confused now -- I thought that the discussion you and Gabriel had earlier this week about lifting total orders threw up the issue that this was going to cause diamonds?</p>



<a name="273344159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273344159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273344159">(Feb 26 2022 at 14:35)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="310045">@Eric Wieser</span> said something about that but I have no idea what it means.</p>



<a name="273344235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273344235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273344235">(Feb 26 2022 at 14:36)</a>:</h4>
<p>But clearly you should just be able to write instances for <code>ulift a</code>, it is just an ordinary type after all.</p>



<a name="273344680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273344680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273344680">(Feb 26 2022 at 14:47)</a>:</h4>
<p>For example, it's clearly easier than <a href="https://leanprover-community.github.io/mathlib_docs/find/with_top.linear_order">docs#with_top.linear_order</a></p>



<a name="273345282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273345282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273345282">(Feb 26 2022 at 14:58)</a>:</h4>
<p>(at a computer now -- sorry for delay in posting link) : <a href="#narrow/stream/270676-lean4/topic/universes/near/272699801">here</a> Gabriel lifted the linear order on <code>int</code>; Eric's objections to the code were explained a bit further down. Is this the sort of thing which is going to be sorted out in the end though?</p>



<a name="273345296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273345296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273345296">(Feb 26 2022 at 14:58)</a>:</h4>
<p>The diamonds in ulift instances are easy to fix, they're just easy to make a mess of</p>



<a name="273345745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273345745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273345745">(Feb 26 2022 at 15:05)</a>:</h4>
<p>What is the diamond?</p>



<a name="273346110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273346110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273346110">(Feb 26 2022 at 15:12)</a>:</h4>
<p>I see a reference to a comment on a PR but no link to the PR</p>



<a name="273346419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273346419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273346419">(Feb 26 2022 at 15:18)</a>:</h4>
<p>OTOH the "feet with holes" comment did make me laugh out loud</p>



<a name="273347317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273347317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273347317">(Feb 26 2022 at 15:36)</a>:</h4>
<p>In particular I wonder whether these are actual diamonds, or just "some two things which we would like to be defeq aren't"</p>



<a name="273350728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273350728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273350728">(Feb 26 2022 at 16:46)</a>:</h4>
<p>isn't that what a diamond means?</p>



<a name="273352184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273352184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273352184">(Feb 26 2022 at 17:17)</a>:</h4>
<p>If the two things are instances (that can be synthesized by instance search), then yes</p>



<a name="273352187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273352187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273352187">(Feb 26 2022 at 17:17)</a>:</h4>
<p>If they are random other terms, then no</p>



<a name="273428264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273428264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273428264">(Feb 27 2022 at 22:15)</a>:</h4>
<p>You get a diamond if you write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">monoid</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">function.injective.monoid_pow</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">comm_monoid</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">function.injective.comm_monoid</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
</code></pre></div>



<a name="273428337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/273428337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#273428337">(Feb 27 2022 at 22:17)</a>:</h4>
<p>In this case of ulift, mathlib has the first instance, and a collection of loaded footguns (pretty much everything in the <code>function.injective</code> namespace that is more structured than <code>monoid</code>) ready to trick you into creating an instance like the second one</p>



<a name="274426935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20universe%20question%3A%20max%20u%20v%20%3D%20max%20v%20u%3F/near/274426935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20universe.20question.3A.20max.20u.20v.20.3D.20max.20v.20u.3F.html#274426935">(Mar 07 2022 at 17:29)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/12126">#12126</a> removes all the loaded footguns mentioned above</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>