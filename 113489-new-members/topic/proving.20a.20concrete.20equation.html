---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/proving.20a.20concrete.20equation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html">proving a concrete equation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247511799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247511799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247511799">(Jul 28 2021 at 20:18)</a>:</h4>
<p>Could anyone give me a way to proving the following equation, which I need to establish first for a later theorem? <br>
As far as I know, the "proof" has largely to be a brute force computation. The vectors <code>a b c d</code> were also firstly found by a computer.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>

<span class="kd">def</span> <span class="n">circulant</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">v</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">a</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">c</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">d</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">A</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">a</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">B</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">b</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">C</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">c</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">D</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">d</span>

<span class="kd">lemma</span> <span class="n">want</span> <span class="o">:</span> <span class="n">A</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">B</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">C</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">D</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">92</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">23</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">23</span><span class="o">)</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247513028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247513028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247513028">(Jul 28 2021 at 20:29)</a>:</h4>
<p>Perhaps split a big computation task into several small computation tasks?</p>



<a name="247513699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247513699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247513699">(Jul 28 2021 at 20:35)</a>:</h4>
<p>You could do "ext i j, fin_cases i; fin_cases j; simp [circulant]". That would be the most brute force.</p>



<a name="247513816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247513816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247513816">(Jul 28 2021 at 20:36)</a>:</h4>
<p>You would want to prove some helper lemmas that proving that a matrix equal to some numeral coerced to a matrix requires solely proving it along the diagonal and zero values along nondiagonal entries.</p>



<a name="247513917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247513917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247513917">(Jul 28 2021 at 20:37)</a>:</h4>
<p>Why don't you instead prove that the product of circulant matrices is a circulant matrix?</p>



<a name="247514078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514078">(Jul 28 2021 at 20:38)</a>:</h4>
<p>Then you only have to show a vector of 23 elements is <code>![1, 0, 0, ...]</code> rather than having to show equality of a matrix of 529 elements</p>



<a name="247514150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514150">(Jul 28 2021 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span>, any ideas for  generalizing circulant matrices away from fin using permutations?</p>



<a name="247514490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514490">(Jul 28 2021 at 20:41)</a>:</h4>
<p>According to Wikipedia, using the matrix polynomial of the cyclic permutation matrix P</p>



<a name="247514622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514622">(Jul 28 2021 at 20:42)</a>:</h4>
<p>But that P is still over fin n, because of how it's sparse definition is.</p>



<a name="247514653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514653">(Jul 28 2021 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247514078">said</a>:</p>
<blockquote>
<p>Then you only have to show a vector of 23 elements is <code>![1, 0, 0, ...]</code> rather than having to show equality of a matrix of 529 elements</p>
</blockquote>
<p>Yeah! That's what I thought. I am trying to express A^2 and etc as a circulant v for some v first.</p>



<a name="247514802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514802">(Jul 28 2021 at 20:44)</a>:</h4>
<p>Alex, Wikipedia says that circulant matrices form a commutative algebra. Can you give it that instance?</p>



<a name="247514823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514823">(Jul 28 2021 at 20:44)</a>:</h4>
<p>Probably easier to do via the polynomial definition</p>



<a name="247514984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247514984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247514984">(Jul 28 2021 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247514823">said</a>:</p>
<blockquote>
<p>Probably easier to do via the polynomial definition</p>
</blockquote>
<p>Not quite sure about this. I considered using this as the definition. But used the direct one enventually. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">circulant</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">v</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span>
</code></pre></div>



<a name="247515096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247515096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247515096">(Jul 28 2021 at 20:46)</a>:</h4>
<p>Yakov, does using any permutation matrix that is an nth root of the identity work, rather than needing the cyclic permutation on fin n?</p>



<a name="247515243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247515243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247515243">(Jul 28 2021 at 20:47)</a>:</h4>
<p>Ah, I guess n has to match the cardinality of the index type</p>



<a name="247515541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247515541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247515541">(Jul 28 2021 at 20:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247515096">said</a>:</p>
<blockquote>
<p>Yakov, does using any permutation matrix that is an nth root of the identity work, rather than needing the cyclic permutation on fin n?</p>
</blockquote>
<p>I don't think so. For example, (1 2) ( 3 4 5) has order 6, but is not a cyclic permutation of order 6.</p>



<a name="247516020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516020">(Jul 28 2021 at 20:54)</a>:</h4>
<p>The polynomial definitions leads directly to the proof about the algebra. And encodes the sparsity better.</p>



<a name="247516057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516057">(Jul 28 2021 at 20:55)</a>:</h4>
<p>Eric, you can use fintype.card iota maybe?</p>



<a name="247516139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516139">(Jul 28 2021 at 20:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247516020">said</a>:</p>
<blockquote>
<p>The polynomial definitions leads directly to the proof about the algebra. And encodes the sparsity better.</p>
</blockquote>
<p>Good point!</p>



<a name="247516263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516263">(Jul 28 2021 at 20:56)</a>:</h4>
<p>I think I am to prove those things if I have time, and then add them into mathlib.</p>



<a name="247516417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516417">(Jul 28 2021 at 20:57)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span>  Btw, I have already tried to run </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">ext</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">any_goals</span> <span class="o">{</span><span class="n">fin_cases</span> <span class="n">j</span><span class="o">},</span>
</code></pre></div>
<p>to see what happens,<br>
but it hasn't finished yet.....</p>



<a name="247516504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516504">(Jul 28 2021 at 20:58)</a>:</h4>
<p>We have some stuff around matrix polynomials (because of proofs of cayley Hamilton) but not too much. I'm working on pushing some in, but have not been able to do any mathlib work due to real-life job. Just zulip.</p>



<a name="247516603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516603">(Jul 28 2021 at 20:59)</a>:</h4>
<p>Try to see if it works for just the first case on i first. That'll be 23 (+ 22) goals, instead of 23 squared.</p>



<a name="247516670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516670">(Jul 28 2021 at 20:59)</a>:</h4>
<p>I think I'm resigned to the fact that this only makes sense for fin n</p>



<a name="247516756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516756">(Jul 28 2021 at 21:00)</a>:</h4>
<p>Any fintype that has the appropriate order</p>



<a name="247516919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516919">(Jul 28 2021 at 21:01)</a>:</h4>
<p>Ah, I will have a look at the matrix polynomial part implemented.</p>



<a name="247516993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247516993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247516993">(Jul 28 2021 at 21:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247516417">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span>  Btw, I have already tried to run </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">ext</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">any_goals</span> <span class="o">{</span><span class="n">fin_cases</span> <span class="n">j</span><span class="o">},</span>
</code></pre></div>
<p>to see what happens,<br>
but it hasn't finished yet.....</p>
</blockquote>
<p>It hasn't finished... I am to kill it.</p>



<a name="247517135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247517135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247517135">(Jul 28 2021 at 21:02)</a>:</h4>
<p>Is that part done by you? <span class="user-mention" data-user-id="308899">@Yakov Pechersky</span></p>



<a name="247517456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247517456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247517456">(Jul 28 2021 at 21:05)</a>:</h4>
<p>I don't have mathlib access to run it for a week</p>



<a name="247518058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247518058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247518058">(Jul 28 2021 at 21:11)</a>:</h4>
<p><code>  ext i j, fin_cases i, fin_cases j,</code> is ok</p>



<a name="247518197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247518197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247518197">(Jul 28 2021 at 21:12)</a>:</h4>
<p>If I am facing the goal <code>(A * A + B * B + C * C + D * D) 0 0 = 92 0 0</code> or changing the <code>*</code> to <code>pow_two</code>, are there any tactics that will close such a goal in one or two steps?</p>



<a name="247519436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247519436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247519436">(Jul 28 2021 at 21:22)</a>:</h4>
<p><code>#eval (A * A + B * B + C * C + D * D) 0 0</code> prints <code>92</code>. But I am not able to use <code>#eval</code> in the proof. Does anyone know whether there is any alternative tactic that will be helpful if the goal is <br>
<code>example : (A * A + B * B + C * C + D * D) 0 0 = 92 := sorry</code></p>



<a name="247519583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247519583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247519583">(Jul 28 2021 at 21:24)</a>:</h4>
<p>Can you reduce it to a statement about numbers?</p>



<a name="247519677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247519677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247519677">(Jul 28 2021 at 21:25)</a>:</h4>
<p><code>simp</code> should be able to do most of the heavy lifting here</p>



<a name="247519828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247519828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247519828">(Jul 28 2021 at 21:27)</a>:</h4>
<p>If using <code>simp</code>, I will kind of be stuck here </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">A</span> <span class="bp">+</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">C</span> <span class="bp">+</span> <span class="n">D</span> <span class="bp">*</span> <span class="n">D</span><span class="o">)</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">92</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_apply</span><span class="o">,</span> <span class="n">circulant</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">],</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247560637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247560637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247560637">(Jul 29 2021 at 09:19)</a>:</h4>
<p>Could anyone give some suggestions on proving a goal which is a direct computation that <code>#eval</code> can do? Is it possible to expand <code>finset.sum</code> as the form<code>...+...+...+...</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">tactic.gptf</span>

<span class="kn">open</span> <span class="n">matrix</span>

<span class="kd">def</span> <span class="n">circulant</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">v</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">a</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">c</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">d</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="bp">!</span><span class="o">[</span> <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">,</span>  <span class="mi">1</span><span class="o">]</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">A</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">a</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">B</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">b</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">C</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">c</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">D</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">circulant</span> <span class="n">d</span>

<span class="kd">example</span> <span class="o">:</span>
  <span class="n">dot_product</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span>
         <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
           <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span>
         <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
           <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">A</span><span class="o">)</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247561638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247561638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247561638">(Jul 29 2021 at 09:31)</a>:</h4>
<p><code>simp only [dot_product, fin.sum_univ_succ],</code> expands the sum for you</p>



<a name="247561930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247561930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247561930">(Jul 29 2021 at 09:34)</a>:</h4>
<p>A way I can solve the first example without expanding the sum is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span>
  <span class="n">dot_product</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span>
         <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
           <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span>
         <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
           <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span>
  <span class="n">dot_product</span>
  <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
  <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">]</span>
  <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span><span class="n">norm_num</span><span class="o">},</span>
  <span class="n">nth_rewrite_rhs</span> <span class="mi">0</span> <span class="o">[</span><span class="bp">←</span> <span class="n">this</span><span class="o">],</span>
  <span class="n">congr</span><span class="bp">;</span>
  <span class="n">dec_trivial</span><span class="bp">!</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247562042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562042">(Jul 29 2021 at 09:36)</a>:</h4>
<p>I first use <code>#eval</code> outside the proof, and then copy the result into the proof to simplify terms.</p>



<a name="247562068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562068">(Jul 29 2021 at 09:36)</a>:</h4>
<p>Is it possible to add a tactic that does <code>#eval</code>? <span class="user-mention" data-user-id="310045">@Eric Wieser</span></p>



<a name="247562112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562112">(Jul 29 2021 at 09:37)</a>:</h4>
<p>What specifically did you eval?</p>



<a name="247562257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562257">(Jul 29 2021 at 09:39)</a>:</h4>
<p>I did</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span>
<span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span>
         <span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
           <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span>
</code></pre></div>
<p>and the other.</p>



<a name="247562633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562633">(Jul 29 2021 at 09:45)</a>:</h4>
<p>It would certainly be helpful if there was a tactic to convert  <code>![a, b, c, d] (-i)</code> into <code>![a, d, c, b]</code></p>



<a name="247562817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562817">(Jul 29 2021 at 09:47)</a>:</h4>
<p>You can use <code>norm_fin</code> to turn <code>-12 : fin 23</code> into <code>11</code></p>



<a name="247562890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562890">(Jul 29 2021 at 09:48)</a>:</h4>
<p>It is not hard to prove that<br>
<code>example : ![(1 : ℚ), 1, -1, -1, -1, 1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1, -1, -1, 1, -1, -1, -1, 1] (-1) = 1 := rfl</code><br>
But I don't know how to simplify or rewrite the LHS as the RHS in a more complicated expression.<br>
Do you have a clue?</p>



<a name="247562925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562925">(Jul 29 2021 at 09:49)</a>:</h4>
<p>doesn't <code>simp</code> prove that <code>![a, b, c, d] 3 = d</code>?</p>



<a name="247562954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247562954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247562954">(Jul 29 2021 at 09:49)</a>:</h4>
<p>I'm aware that <code>rfl</code> does it but the goal here is for <code>simp</code> to discover the rhs on its own</p>



<a name="247563049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563049">(Jul 29 2021 at 09:51)</a>:</h4>
<p>Ah, <code>simp</code> closes that <code>example {α} (a b c d : α): ![a, b, c, d] 3 = d := by simp</code>. Perhaps I should first use <code>norm_fin</code>.</p>



<a name="247563261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563261">(Jul 29 2021 at 09:53)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span>
<span class="bp">!</span><span class="o">[(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span><span class="n">norm_fin</span><span class="o">,}</span>
</code></pre></div>
<p><code>norm_fin</code> won't change <code>-1</code> in the goal <span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span></p>



<a name="247563340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563340">(Jul 29 2021 at 09:54)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="bp">⊢</span> <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>



<a name="247563523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563523">(Jul 29 2021 at 09:56)</a>:</h4>
<p><code>example : (-1 : fin 23) = 22 := by norm_fin</code> This also dose not work.</p>



<a name="247563665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563665">(Jul 29 2021 at 09:58)</a>:</h4>
<p>I don't think norm_fin knows about subtraction</p>



<a name="247563698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563698">(Jul 29 2021 at 09:58)</a>:</h4>
<p>Hm, it seems to be a gap in <code>norm_fin</code>, probably because <span class="user-mention" data-user-id="310045">@Eric Wieser</span> informed me only yesterday that fin subtraction isn't broken anymore</p>



<a name="247563763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563763">(Jul 29 2021 at 09:59)</a>:</h4>
<p>that's awkward; you can use <code>change (-1 : fin 23) with 22</code> but that's kind of verbose</p>



<a name="247563962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247563962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247563962">(Jul 29 2021 at 10:01)</a>:</h4>
<p>Yes, in a more involved computation. Doing all the <code>change (-1 : fin 23) with 22</code>type things manually is not practical.</p>



<a name="247564093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564093">(Jul 29 2021 at 10:02)</a>:</h4>
<p>well, you should have more lemmas to simplify this to something not using subtraction anyway</p>



<a name="247564118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564118">(Jul 29 2021 at 10:03)</a>:</h4>
<p>rather than just trying to power through the whole thing with <code>simp</code> et al</p>



<a name="247564157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564157">(Jul 29 2021 at 10:03)</a>:</h4>
<p>there aren't any tactics specifically designed for matrix computations</p>



<a name="247564253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564253">(Jul 29 2021 at 10:04)</a>:</h4>
<p>so you will have to either wait for the existing tactics to be upgraded, write them yourself, or write a lemma that says what you want</p>



<a name="247564266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564266">(Jul 29 2021 at 10:04)</a>:</h4>
<p>since we know that <code>rfl</code> closes the goal</p>



<a name="247564317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/247564317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#247564317">(Jul 29 2021 at 10:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247564093">said</a>:</p>
<blockquote>
<p>well, you should have more lemmas to simplify this to something not using subtraction anyway</p>
</blockquote>
<p>That is a good suggestions. I will try to write more lemmas first.</p>



<a name="248360236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248360236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248360236">(Aug 04 2021 at 14:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247562633">said</a>:</p>
<blockquote>
<p>It would certainly be helpful if there was a tactic to convert  <code>![a, b, c, d] (-i)</code> into <code>![a, d, c, b]</code></p>
</blockquote>
<p>Can we extend <code>norm_num</code> to do so somehow? <span class="user-mention" data-user-id="310045">@Eric Wieser</span></p>



<a name="248360489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248360489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248360489">(Aug 04 2021 at 14:48)</a>:</h4>
<p>Usually, <code>norm_num</code> extensions deal with normalizing numerical values, which can indicate many different types (as long as there is a <code>0</code> and <code>+</code>, in fact).</p>



<a name="248360563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248360563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248360563">(Aug 04 2021 at 14:49)</a>:</h4>
<p>And <code>norm_num</code> is helpful because it does VM calculation to help it decide what proofs to create.</p>



<a name="248360853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248360853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248360853">(Aug 04 2021 at 14:51)</a>:</h4>
<p>Is it possible to add some lemma or extend <code>simp</code> or <code>norm_num</code> to rewrite things like<br>
<code>(λ (j : fin 23), ![a,  b, c, d, ...] (i - j))</code>, where <code>i</code> is a given number (e.g. 0 or 1 or 4)?</p>



<a name="248360920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248360920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248360920">(Aug 04 2021 at 14:51)</a>:</h4>
<p>In this matrix rearrangement case, there are no calculations, just rewrites. So you could write a lemma to do so.</p>



<a name="248361067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248361067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248361067">(Aug 04 2021 at 14:52)</a>:</h4>
<p>Ah, I see, you want to do it for arbitrary vectors, and just have a rearrangement of terms. And the underlying calculation is some modular arithmetic.</p>



<a name="248361245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248361245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248361245">(Aug 04 2021 at 14:54)</a>:</h4>
<p>Yes, otherwise I need to write 23</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">A_0_dot_a</span> <span class="o">:</span> <span class="n">dot_product</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">23</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</code></pre></div>
<p>where <code>def a : fin 23 → ℚ :=  ![ 1,  1, -1, -1, -1,  1, -1, -1, -1,  1, -1,  1,  1, -1,  1, -1, -1, -1,  1, -1, -1, -1,  1]</code></p>



<a name="248361363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248361363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248361363">(Aug 04 2021 at 14:54)</a>:</h4>
<p>and actually 23 lemmas for each vector that I need.</p>



<a name="248361397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248361397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248361397">(Aug 04 2021 at 14:54)</a>:</h4>
<p>I guess first step would be to extend <code>norm_fin</code> to deal with negatives</p>



<a name="248362020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362020">(Aug 04 2021 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/248360236">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/247562633">said</a>:</p>
<blockquote>
<p>It would certainly be helpful if there was a tactic to convert  <code>![a, b, c, d] (-i)</code> into <code>![a, d, c, b]</code></p>
</blockquote>
<p>Can we extend <code>norm_num</code> to do so somehow? <span class="user-mention silent" data-user-id="310045">Eric Wieser</span></p>
</blockquote>
<p>In my opinion the way to solve this would be to have a tactic that converts <code>f</code> where <code>f : fin n → A</code> and <code>n</code> is a numeric literal into <code>![f 0, f 1, ..., f (n - 1)]</code>, at which point <code>norm_fin</code> could likely simplify <code>f 0</code> etc.</p>



<a name="248362062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362062">(Aug 04 2021 at 14:59)</a>:</h4>
<p>There may be a way that uses <code>norm_fin</code>, but my proof does not</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">A_5_dot_a</span> <span class="o">:</span> <span class="n">dot_product</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span>
  <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">],</span>
  <span class="o">{</span><span class="n">dec_trivial</span><span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">a</span><span class="o">],</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="248362316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362316">(Aug 04 2021 at 15:00)</a>:</h4>
<p>Can you write the correct form for this lemma?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">vec_cons_apply_neg</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">vec_cons</span> <span class="n">x</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">_</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="248362321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362321">(Aug 04 2021 at 15:00)</a>:</h4>
<p>Then you won't need any tactic</p>



<a name="248362401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362401">(Aug 04 2021 at 15:01)</a>:</h4>
<p>Writing an <code>expand_fin f</code> tactic that does as I describe above might be a good exercise in metaprogramming</p>



<a name="248362648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362648">(Aug 04 2021 at 15:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/248362316">said</a>:</p>
<blockquote>
<p>Can you write the correct form for this lemma?</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">vec_cons_apply_neg</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">vec_cons</span> <span class="n">x</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">_</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I don't quite understand why this can be helpful. There has not to be <code>(-i)</code>, it can be <code>(5-i)</code> for example.</p>



<a name="248362909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362909">(Aug 04 2021 at 15:04)</a>:</h4>
<p>Yes, I understand that you have <code>(j - i)</code> in your case. If you write the correct <code>(-i)</code> lemma then you will be able to use that to show the <code>(j - i)</code> case.</p>



<a name="248362963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248362963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248362963">(Aug 04 2021 at 15:05)</a>:</h4>
<p>I currently don't know how to write a tactic. I guess having a tactic that does <code>#eval</code> may be more helpful in general.</p>



<a name="248363047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248363047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248363047">(Aug 04 2021 at 15:05)</a>:</h4>
<p>The tactic doing <code>#eval</code> doesn't help if it can't also provide a proof term that the evaluation is correct.</p>



<a name="248363208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248363208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248363208">(Aug 04 2021 at 15:06)</a>:</h4>
<p><code>#eval</code> does correct evaluations, doesn't it?</p>



<a name="248363924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248363924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248363924">(Aug 04 2021 at 15:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/248362316">said</a>:</p>
<blockquote>
<p>Can you write the correct form for this lemma?</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">vec_cons_apply_neg</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">vec_cons</span> <span class="n">x</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">_</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I am not sure what is the correct term (in the sense that it makes the lemma helpful for the following problems) for the underscore.</p>



<a name="248363995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248363995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248363995">(Aug 04 2021 at 15:13)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">acc'</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">intro</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">r</span> <span class="n">y</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">acc'</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">acc'</span> <span class="n">x</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">string</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">acc'.rec_on</span> <span class="n">string</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="n">false</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">string</span><span class="o">)</span> <span class="s2">""</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="n">cc</span><span class="o">⟩</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">h</span> <span class="n">IH</span><span class="o">,</span> <span class="n">x</span>

<span class="k">#eval</span> <span class="n">foo</span>
</code></pre></div>



<a name="248364005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248364005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248364005">(Aug 04 2021 at 15:13)</a>:</h4>
<p>Try that</p>



<a name="248364510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248364510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248364510">(Aug 04 2021 at 15:16)</a>:</h4>
<p><code>#eval</code> reports error <code>vm check failed: is_external(o) (possibly due to incorrect axioms, or sorry)</code></p>



<a name="248364573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248364573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248364573">(Aug 04 2021 at 15:17)</a>:</h4>
<p>So <code>#eval</code> doesn't always work, even if the definitions are accepted by the kernel</p>



<a name="248364769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248364769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248364769">(Aug 04 2021 at 15:18)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">vec_cons_apply_neg_zero</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">vec_cons</span> <span class="n">x</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span>

<span class="kd">lemma</span> <span class="n">vec_cons_apply_neg_one</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">vec_cons</span> <span class="n">x</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">u</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="248365319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248365319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248365319">(Aug 04 2021 at 15:22)</a>:</h4>
<p>(deleted)</p>



<a name="248365434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248365434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248365434">(Aug 04 2021 at 15:23)</a>:</h4>
<p>I just tried to fix <code>norm_fin</code>; my conclusion is that the easiest way to do so is probably to normalize <code>fin</code> to an integer instead of to a natural</p>



<a name="248365568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248365568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248365568">(Aug 04 2021 at 15:24)</a>:</h4>
<p>Did you add something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="bp">@</span><span class="n">_root_.has_neg.neg</span> <span class="bp">.</span><span class="n">_</span> <span class="o">(</span><span class="bp">@</span><span class="n">fin.has_neg</span> <span class="bp">%%</span><span class="n">n</span><span class="o">)</span> <span class="bp">%%</span><span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">some</span> <span class="o">(</span><span class="n">neg</span> <span class="n">n</span> <span class="n">a</span><span class="o">)</span>
</code></pre></div>



<a name="248365708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248365708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248365708">(Aug 04 2021 at 15:25)</a>:</h4>
<p>Would <code>norm_fin</code> be helpful for proving</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">A_5_dot_a</span> <span class="o">:</span> <span class="n">dot_product</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span>
  <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">],</span>
  <span class="o">{</span><span class="n">dec_trivial</span><span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">a</span><span class="o">],</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>?<br>
As <code>j</code> is a variable, I didn't see what <code>norm_fin</code> can do for us.</p>



<a name="248366866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248366866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248366866">(Aug 04 2021 at 15:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/248364573">said</a>:</p>
<blockquote>
<p>So <code>#eval</code> doesn't always work, even if the definitions are accepted by the kernel</p>
</blockquote>
<p>I understand that <code>#eval</code> can fail in some cases, but when it fails, I think it just means we shouldn't use it in that case.</p>



<a name="248366946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248366946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248366946">(Aug 04 2021 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span>, <code>normalize_fin.sub</code> is hard to express with naturals</p>



<a name="248367235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248367235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248367235">(Aug 04 2021 at 15:37)</a>:</h4>
<p>Use the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">fin.neg_succ_eq</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">-</span><span class="n">i.succ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">fin.last</span> <span class="n">_</span> <span class="bp">-</span> <span class="n">i.cast_succ</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">fin.ext_iff</span><span class="o">,</span> <span class="n">fin.coe_neg</span><span class="o">,</span> <span class="n">fin.coe_sub</span><span class="o">,</span> <span class="n">nat.succ_sub_succ_eq_sub</span><span class="o">,</span> <span class="n">fin.coe_last</span><span class="o">,</span>
             <span class="n">fin.coe_succ</span><span class="o">,</span> <span class="n">fin.coe_cast_succ</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">nat.add_sub_assoc</span> <span class="o">(</span><span class="n">nat.le_succ_of_le</span> <span class="n">i.is_lt.le</span><span class="o">),</span> <span class="n">add_comm</span><span class="o">,</span>
      <span class="n">nat.add_sub_assoc</span> <span class="n">i.is_lt.le</span><span class="o">,</span> <span class="n">nat.add_mod</span><span class="o">,</span> <span class="n">nat.mod_self</span><span class="o">,</span>
      <span class="n">zero_add</span><span class="o">,</span> <span class="n">nat.mod_mod</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="248367316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248367316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248367316">(Aug 04 2021 at 15:38)</a>:</h4>
<p>And there, you know that the subtraction nat friendly.</p>



<a name="248368785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248368785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248368785">(Aug 04 2021 at 15:49)</a>:</h4>
<p>I don't know whether that was aimed at me or Alex. I pushed my half-baked attempt at <a href="https://github.com/leanprover-community/mathlib/tree/eric-wieser/norm_fin_sub">branch#eric-wieser/norm_fin_sub</a>, but do not intend to continue trying</p>



<a name="248369134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248369134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248369134">(Aug 04 2021 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> <a href="#narrow/stream/113489-new-members/topic/proving.20a.20concrete.20equation/near/248365708">said</a>:</p>
<blockquote>
<p>Would <code>norm_fin</code> be helpful for proving</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">A_5_dot</span> <span class="o">:</span> <span class="n">dot_product</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">23</span><span class="o">),</span> <span class="n">a</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">-</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span>
  <span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">],</span>
  <span class="o">{</span><span class="n">dec_trivial</span><span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">a</span><span class="o">],</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>?<br>
As <code>j</code> is a variable, I didn't see what <code>norm_fin</code> can do for us.</p>
</blockquote>
<p>Eric, would <code>norm_fin</code> be useful for lemmas like this? <span class="user-mention" data-user-id="310045">@Eric Wieser</span><br>
I currently have to write 23 lemmas for each <code>a</code>.</p>



<a name="248369745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248369745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248369745">(Aug 04 2021 at 15:58)</a>:</h4>
<p>things like <code>#eval (cir a) a</code> take an amazingly long time.</p>



<a name="248373437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248373437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248373437">(Aug 04 2021 at 16:27)</a>:</h4>
<p>Using integers will cause problems with the other reductions. Instead, I was thinking of reducing <code>a - b</code> in fin to <code>a - b</code> as naturals when <code>a &gt;= b</code>, and when <code>a &lt; b</code> then just fully reduce it to <code>c := ((a - b : fin n) : nat)</code> and prove <code>a + c = b + k * n</code></p>



<a name="248373610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248373610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248373610">(Aug 04 2021 at 16:28)</a>:</h4>
<p>Will this work with <code>(-a) - (-b)</code>?</p>



<a name="248373655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/proving%20a%20concrete%20equation/near/248373655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/proving.20a.20concrete.20equation.html#248373655">(Aug 04 2021 at 16:28)</a>:</h4>
<p>it goes one step at a time. <code>-a</code> would get reduced the same as <code>0 - a</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>