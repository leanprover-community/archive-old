---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/git.20handling.20of.20PRs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html">git handling of PRs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230757652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230757652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230757652">(Mar 17 2021 at 20:06)</a>:</h4>
<p>Can you recommend a good (git-wise) workflow in the following situation: besides the <code>exp_char</code> PR <a href="https://github.com/leanprover-community/mathlib/issues/6671">#6671</a> (which is currently under review, and which (eventually, possibly) introduces a new file to mathlib) I am working on a separate file in which I apply the newly minted <code>exp_char</code> in order to define and treat the separable degree of a polynomial. I want to make that second file part of another PR. Currently I have my own "private" git repo, and copy things over to the two PR-ready copies of mathlib, but this setup gets annoying ...</p>
<p>So, can one handle multiple PR's in the same git repo? Thanks!</p>



<a name="230757750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230757750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230757750">(Mar 17 2021 at 20:06)</a>:</h4>
<p>Yes, this is what "dependent PRs" are for (mentioned in the PR template)</p>



<a name="230757824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230757824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230757824">(Mar 17 2021 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="247154">@Jakob Scholbach</span> Yes, just create new branches.</p>



<a name="230757840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230757840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230757840">(Mar 17 2021 at 20:07)</a>:</h4>
<p>The second branch should start from the branch of the first PR</p>



<a name="230757942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230757942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230757942">(Mar 17 2021 at 20:08)</a>:</h4>
<p>I would suggest checking out the branch which you PR'd and then doing <code>git checkout -b my_derivative_branch</code>. Then make commits in that branch. If, in the PR process, you have to make edits to your PR, you checkout <code>git checkout PR_branch</code>, make commits, then to update your derivative branch you do <code>git checkout my_derivative_branch; git merge PR_branch</code>.</p>



<a name="230758142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230758142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230758142">(Mar 17 2021 at 20:09)</a>:</h4>
<p>We should probably document this somewhere as a tiny tutorial "How do I git multiple dependent PRs to mathlib?"</p>



<a name="230758425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230758425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230758425">(Mar 17 2021 at 20:11)</a>:</h4>
<p>Note, if one has a long complex chain (not a <code>long chain complex</code>) of branches, then merging in master as the PRs get approved can get a little hairy, if the derivative branches used some feature that is now gone/edited away. It is hairy because you have to be careful not to accidentally bring it back.</p>



<a name="230761281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230761281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230761281">(Mar 17 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/git.20handling.20of.20PRs/near/230758425">said</a>:</p>
<blockquote>
<p>a long complex chain (not a <code>long chain complex</code>)</p>
</blockquote>
<p><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="230764869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230764869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230764869">(Mar 17 2021 at 20:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/git.20handling.20of.20PRs/near/230758142">said</a>:</p>
<blockquote>
<p>We should probably document this somewhere as a tiny tutorial "How do I git multiple dependent PRs to mathlib?"</p>
</blockquote>
<p>I could use a tiny tutorial. I'm still using a separate mathlib folder for each PR, which is a bit painful.</p>



<a name="230768845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230768845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230768845">(Mar 17 2021 at 21:19)</a>:</h4>
<p>I'll see if I can find some time to write something this week</p>



<a name="230773911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230773911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230773911">(Mar 17 2021 at 21:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253861">Thomas Browning</span> <a href="#narrow/stream/113489-new-members/topic/git.20handling.20of.20PRs/near/230764869">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/git.20handling.20of.20PRs/near/230758142">said</a>:</p>
<blockquote>
<p>We should probably document this somewhere as a tiny tutorial "How do I git multiple dependent PRs to mathlib?"</p>
</blockquote>
<p>I could use a tiny tutorial. I'm still using a separate mathlib folder for each PR, which is a bit painful.</p>
</blockquote>
<p>There's possibly a related not-so-widely-known git trick that maybe one of you will find useful for mathlib development, which is <code>git worktree</code> -- it's not a thing I use often because compiling things in Python is not so useful, it's more useful in languages like JS where there's an annoying <code>node_modules</code> directory for you to manage -- but basically git worktree lets you have separate branches checked out at the same time into separate folders but the repo is "aware" of the other directories (so you can list them, delete them, etc.) -- <a href="https://www.youtube.com/watch?v=cRunWRC8ye0">https://www.youtube.com/watch?v=cRunWRC8ye0</a> is a good short video tutorial</p>
<div class="youtube-video message_inline_image"><a data-id="cRunWRC8ye0" href="https://www.youtube.com/watch?v=cRunWRC8ye0"><img src="https://i.ytimg.com/vi/cRunWRC8ye0/default.jpg"></a></div>



<a name="230780485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/git%20handling%20of%20PRs/near/230780485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/git.20handling.20of.20PRs.html#230780485">(Mar 17 2021 at 22:31)</a>:</h4>
<p>I use git worktree all the time. I have <code>mathlib</code> for quick and dirty visits to branches, and then <code>mathlib-X</code>, <code>mathlib-Y</code> all set up using <code>git worktree</code>, and so on for branches that hold my attention for more than a day.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>