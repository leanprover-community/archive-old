---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html">how to unfold let?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200467979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200467979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200467979">(Jun 10 2020 at 19:53)</a>:</h4>
<p>Sometimes, I end up needing a long term maybe as part of a <code>use</code>.  And to make things more legible, I'd introduce a term using a <code>let</code> binding. </p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">alsoTwo</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">-</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">alsoTwo</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">,</span>
  <span class="c1">--rw alsoTwo, -- doesn&#39;t work</span>
  <span class="c1">--unfold alsoTwo, -- doesn&#39;t work</span>
<span class="kn">end</span>
</code></pre></div>


<p>but at this point, only <code>refl</code>/ <code>simp</code> work anymore. Any idea how I can put back the <code>let</code>-binding?</p>



<a name="200468076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200468076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200468076">(Jun 10 2020 at 19:54)</a>:</h4>
<p>Try using <code>set</code> instead. <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#set">tactic#set</a></p>



<a name="200468154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200468154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200468154">(Jun 10 2020 at 19:54)</a>:</h4>
<p><code>set x := long_term with hx</code> gives you <code>hx</code> that you can explicitly rewrite with.</p>



<a name="200468441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200468441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200468441">(Jun 10 2020 at 19:56)</a>:</h4>
<p>cool, thx</p>



<a name="200471271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200471271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200471271">(Jun 10 2020 at 20:21)</a>:</h4>
<p>Is there a reason we can't make <code>let</code> have this <code>with</code> functionality too?</p>



<a name="200474702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200474702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200474702">(Jun 10 2020 at 20:51)</a>:</h4>
<p>IIRC <code>set</code> exists because I had the same problem as Daniel back in the days when we couldn't edit core Lean and Rob made <code>set</code> to stop me whining. Maybe you want to try editing core Bhavik? :-)</p>



<a name="200483959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200483959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200483959">(Jun 10 2020 at 22:10)</a>:</h4>
<p>I think as many quality of life improvements as possible should be made, even if it breaks a lot of stuff in the short term. This community is still small enough for this to be possible without too much of a hassle.</p>



<a name="200484036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484036">(Jun 10 2020 at 22:11)</a>:</h4>
<p>Deduplicating tactics where one is a straight improvement over the other would be a great start.</p>



<a name="200484145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484145">(Jun 10 2020 at 22:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/issues/124">lean#124</a> is along those lines.</p>



<a name="200484153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484153">(Jun 10 2020 at 22:12)</a>:</h4>
<ul>
<li><code>set</code> and <code>let</code></li>
<li><code>rintros</code> <code>intros</code> (I don't even think there should be a distinction between <code>intro</code> and <code>intros</code>, its just annoying tbh)</li>
</ul>



<a name="200484629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484629">(Jun 10 2020 at 22:17)</a>:</h4>
<p>there is a reason I made <code>rintros</code> an alias to <code>rintro</code></p>



<a name="200484680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484680">(Jun 10 2020 at 22:17)</a>:</h4>
<p>Patrick I think also wants to kill <code>intro</code> and <code>intros</code> and just rename <code>rintro</code> to <code>intro</code></p>



<a name="200484702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484702">(Jun 10 2020 at 22:17)</a>:</h4>
<p>Actually I think the same can be said about all the plural command keywords: <code>variables</code>, <code>axioms</code>, <code>parameters</code></p>



<a name="200484753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484753">(Jun 10 2020 at 22:18)</a>:</h4>
<p>they serve no useful parsing purpose</p>



<a name="200484808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484808">(Jun 10 2020 at 22:18)</a>:</h4>
<p>They could have made it so the plural versions don't work when there's exactly one thing following.</p>



<a name="200484823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484823">(Jun 10 2020 at 22:18)</a>:</h4>
<p>lol</p>



<a name="200484842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484842">(Jun 10 2020 at 22:18)</a>:</h4>
<p>Lean grammar police</p>



<a name="200484905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200484905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200484905">(Jun 10 2020 at 22:19)</a>:</h4>
<p>maybe we should use <code>variable(s)</code>... except that redeclares an explicit variable <code>s</code></p>



<a name="200485278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200485278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200485278">(Jun 10 2020 at 22:23)</a>:</h4>
<p>I vote for everything being singular and working as plurals to right now.</p>



<a name="200485346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200485346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200485346">(Jun 10 2020 at 22:23)</a>:</h4>
<p>Also, kill <code>intro</code>, <code>intros</code>, and <code>rintro</code> and rename <code>rintros</code> to <code>intro</code>. <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="200485511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200485511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200485511">(Jun 10 2020 at 22:24)</a>:</h4>
<p>I think there are some dependency hurdles to moving <code>rcases</code> to core, but otherwise I don't think there are any blockers for this</p>



<a name="200485560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200485560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200485560">(Jun 10 2020 at 22:25)</a>:</h4>
<p>oh, I had planned to extend rcases patterns with type ascriptions so that <code>obtain</code> is a generalization</p>



<a name="200495535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200495535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200495535">(Jun 11 2020 at 00:36)</a>:</h4>
<p>Technically <code>variable</code> has a "purpose": you don't need parentheses around the binder</p>



<a name="200495629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200495629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200495629">(Jun 11 2020 at 00:38)</a>:</h4>
<p>You don't necessarily need parenthesis around <code>variables</code> either:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="kn">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span>
</code></pre></div>



<a name="200495855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20unfold%20let%3F/near/200495855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20unfold.20let.3F.html#200495855">(Jun 11 2020 at 00:43)</a>:</h4>
<p>Oh interesting</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>