---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html">Proving that C2 inside Z/n has size 2</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208845267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208845267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208845267">(Sep 02 2020 at 15:47)</a>:</h4>
<p>Hi,</p>
<p>I have defined a usually-two-element subgroup C2 of zmod n:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">C2</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">{</span>
    <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">},</span>
    <span class="n">one_mem&#39;</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
    <span class="n">mul_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">})</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">}),</span> <span class="k">by</span> <span class="n">finish</span><span class="o">,</span>
    <span class="n">inv_mem&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">}),</span> <span class="k">by</span> <span class="n">finish</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>


<p>(I hope that this definition is correct. VSCode is not helping me in providing the context while writing this bit).</p>
<p>I want to prove that, if m &gt; 2, then C2 (m) has size 2:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">one_neq_minus_one</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span>  <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="err">\</span><span class="n">not</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">two_torsion_subgroup_has_two_elements</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span>  <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span>
   <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">C2</span> <span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>I know how to prove the first lemma, I just want to prove the second one (which has no mathematical content, given the definition of C2 and the first lemma). Any hints?</p>
<p>Aside: I know that <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> has twitched about finset, fincard,... and what I took of it is that it was a moving target mess. Is this still the case, or there have been any changes in mathlib?</p>



<a name="208845561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208845561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208845561">(Sep 02 2020 at 15:49)</a>:</h4>
<p>the strategy should be something like</p>
<ul>
<li><code>fintype.card s = finset.card s</code></li>
<li>if <code>x \notin s</code> then <code>finset.card (insert x s) = finset.card s + 1</code></li>
<li>if <code>x \ne y</code> then <code>x \notin {y}</code></li>
</ul>



<a name="208845599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208845599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208845599">(Sep 02 2020 at 15:49)</a>:</h4>
<p>There may also be some existing lemmas to shortcut the last steps</p>



<a name="208847880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208847880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208847880">(Sep 02 2020 at 16:03)</a>:</h4>
<p>I don't know how to write the first in Lean ( <code>finset.card C2(p^r)</code> does not typecheck)...</p>



<a name="208859735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208859735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208859735">(Sep 02 2020 at 17:32)</a>:</h4>
<p>Done! Thanks <span class="user-mention" data-user-id="110032">@Reid Barton</span> ! It took me a while to see how these three statements would help me, but it was a neat exercise.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">two_torsion_subgroup_has_two_elements</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span>
   <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">C2</span> <span class="o">(</span><span class="n">m</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">tactic</span><span class="bp">.</span><span class="n">unfreeze_local_instances</span><span class="o">,</span>
    <span class="n">dsimp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">↔</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">C2</span> <span class="n">m</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
        <span class="n">split</span><span class="bp">;</span>
        <span class="o">{</span>
            <span class="n">intro</span> <span class="n">hx</span><span class="o">,</span>
            <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">C2_mem</span> <span class="n">at</span> <span class="n">hx</span><span class="o">},</span>
            <span class="n">finish</span><span class="o">,</span>
        <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="n">S</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">rw</span> <span class="err">←</span><span class="n">this</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_of_subtype</span> <span class="n">S</span> <span class="n">H</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">)),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">finset</span><span class="o">(</span><span class="n">units</span><span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))),</span> <span class="o">(</span><span class="n">x</span> <span class="err">∉</span> <span class="n">T</span> <span class="bp">→</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">insert</span> <span class="n">x</span> <span class="n">T</span><span class="o">)</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="n">T</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
    <span class="o">{</span>
        <span class="n">intros</span> <span class="n">x</span> <span class="n">T</span> <span class="n">hx</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card_insert_of_not_mem</span> <span class="n">hx</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">)),</span> <span class="n">x</span> <span class="bp">≠</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∉</span> <span class="o">{</span><span class="n">y</span><span class="o">}</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">)},</span> <span class="n">finset</span><span class="bp">.</span><span class="n">not_mem_singleton</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">h2</span> <span class="mi">1</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">one_neq_minus_one</span> <span class="n">h</span><span class="o">),</span>
    <span class="k">let</span> <span class="n">S&#39;</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">m</span><span class="o">))</span> <span class="o">:=</span> <span class="o">{</span><span class="bp">-</span><span class="mi">1</span><span class="o">},</span>
    <span class="n">specialize</span> <span class="n">h1</span> <span class="mi">1</span> <span class="n">S&#39;</span> <span class="n">h2</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="208864980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208864980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208864980">(Sep 02 2020 at 18:13)</a>:</h4>
<p>Not sure how you defined the <code>fintype</code> instance on <code>C2</code>. What's the <code>unfreeze</code> step for?</p>



<a name="208916580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208916580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208916580">(Sep 03 2020 at 03:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="254058">Marc Masdeu</span> <a href="#narrow/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202/near/208845267">said</a>:</p>
<blockquote>
<p>(I hope that this definition is correct. VSCode is not helping me in providing the context while writing this bit).</p>
</blockquote>
<p>When you're writing strutures and want more context, you can:</p>
<ul>
<li>use an <code>_</code>, and Lean will show you the expected type at that position</li>
<li>use <code>begin ... end</code> to define a field, and you'll have the usual goal view. Usually once you've worked out what you're doing you'll want to "golf" this back to a term, if possible (at least for data fields)</li>
<li>you can also build structures entirely inside tactic mode, using <code>refine_struct { .. }</code> or indeed just <code>fsplit</code> (again, you may want to golf)</li>
<li>there is a hole command (type <code>{| |}</code>, and click on the light bulb) which can provide a "skeleton" for a structure definition, writing out the names of the fields you need to provide</li>
</ul>



<a name="208918834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20that%20C2%20inside%20Z/n%20has%20size%202/near/208918834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202.html#208918834">(Sep 03 2020 at 04:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202/near/208916580">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="254058">Marc Masdeu</span> <a href="#narrow/stream/113489-new-members/topic/Proving.20that.20C2.20inside.20Z.2Fn.20has.20size.202/near/208845267">said</a>:</p>
<blockquote>
<p>(I hope that this definition is correct. VSCode is not helping me in providing the context while writing this bit).</p>
</blockquote>
<ul>
<li>there is a hole command (type <code>{| |}</code>, and click on the light bulb) which can provide a "skeleton" for a structure definition, writing out the names of the fields you need to provide</li>
</ul>
</blockquote>
<p>The hole command also works with <code>_</code> nowadays, so you can combine this point with the first point.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>