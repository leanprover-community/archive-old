---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html">Constructing a term of `finset` from function from `fin (n)`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265551249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265551249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265551249">(Dec 20 2021 at 11:33)</a>:</h4>
<p>Given a finite dimensional field extension <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mi mathvariant="normal">/</mi><mi>K</mi></mrow><annotation encoding="application/x-tex">E/K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>, I would like to construct a term of <code>finset(polynomial K)</code>containing the minimum polynomials of a generating set. The idea is that I would then like to take the splitting field of their product to construct a normal closure of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>.  Here is my attempt so far: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.galois</span>

<span class="kd">def</span> <span class="n">min_polys</span> <span class="o">{</span><span class="n">K</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">coe_fn</span><span class="o">(</span><span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">minpoly_func</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">polynomial</span><span class="o">(</span><span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">minpoly</span> <span class="n">K</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">comp</span> <span class="o">:=</span> <span class="n">minpoly_func</span> <span class="bp">∘</span> <span class="n">B</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>So I have a function <code>comp : fin(finkrank K E) \to poly K</code>, and I would like to view its image as a finset, so that I can take the product of its elements. Does anyone have any suggestions for how to do this?</p>



<a name="265551361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265551361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265551361">(Dec 20 2021 at 11:34)</a>:</h4>
<p>I know we have <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.image">docs#finset.image</a> for the image of a finset, I don't think there's something specifically for the range of a function.</p>



<a name="265551362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265551362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265551362">(Dec 20 2021 at 11:35)</a>:</h4>
<p><code>finset.univ.image comp</code>?</p>



<a name="265552337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552337">(Dec 20 2021 at 11:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20.28n.29.60/near/265551362">said</a>:</p>
<blockquote>
<p><code>finset.univ.image comp</code>?</p>
</blockquote>
<p>I tried </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">min_polys</span> <span class="o">{</span><span class="n">K</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">coe_fn</span><span class="o">(</span><span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">minpoly_func</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">polynomial</span><span class="o">(</span><span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">minpoly</span> <span class="n">K</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">comp</span> <span class="o">:=</span> <span class="n">minpoly_func</span> <span class="bp">∘</span> <span class="n">B</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">thing</span> <span class="o">:=</span> <span class="n">finset.univ.image</span> <span class="n">comp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>and I got a type class inference error. I guess it's because Lean doesn't know that <code>fin (finite_dimensional.finrank K E)</code> is a <code>finset</code>?</p>



<a name="265552625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552625">(Dec 20 2021 at 11:50)</a>:</h4>
<p>Try <code>#check fin.fintype</code>. Maybe you're missing the import of <code>data.fintype.basic</code>.</p>



<a name="265552633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552633">(Dec 20 2021 at 11:50)</a>:</h4>
<p>I get the following error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">?</span><span class="o">,</span>
<span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">?</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">field</span> <span class="n">K</span><span class="o">,</span>
<span class="n">_inst_2</span> <span class="o">:</span> <span class="n">field</span> <span class="n">E</span><span class="o">,</span>
<span class="n">_inst_3</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">,</span>
<span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">,</span>
<span class="n">B</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">finite_dimensional.finrank</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="n">E</span> <span class="o">:=</span> <span class="bp">⇑</span><span class="o">(</span><span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">),</span>
<span class="n">minpoly_func</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">K</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">),</span> <span class="n">minpoly</span> <span class="n">K</span> <span class="n">x</span><span class="o">,</span>
<span class="n">comp</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">finite_dimensional.finrank</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">K</span> <span class="o">:=</span> <span class="n">minpoly_func</span> <span class="bp">∘</span> <span class="n">B</span>
<span class="bp">⊢</span> <span class="n">decidable_eq</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span>
</code></pre></div>



<a name="265552743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552743">(Dec 20 2021 at 11:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20.28n.29.60/near/265552633">said</a>:</p>
<blockquote>
<p>I get the following error:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">?</span><span class="o">,</span>
<span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">?</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">field</span> <span class="n">K</span><span class="o">,</span>
<span class="n">_inst_2</span> <span class="o">:</span> <span class="n">field</span> <span class="n">E</span><span class="o">,</span>
<span class="n">_inst_3</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">,</span>
<span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">,</span>
<span class="n">B</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">finite_dimensional.finrank</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="n">E</span> <span class="o">:=</span> <span class="bp">⇑</span><span class="o">(</span><span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">),</span>
<span class="n">minpoly_func</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">K</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">),</span> <span class="n">minpoly</span> <span class="n">K</span> <span class="n">x</span><span class="o">,</span>
<span class="n">comp</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">finite_dimensional.finrank</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">K</span> <span class="o">:=</span> <span class="n">minpoly_func</span> <span class="bp">∘</span> <span class="n">B</span>
<span class="bp">⊢</span> <span class="n">decidable_eq</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Yeah this is the same error I get</p>



<a name="265552825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552825">(Dec 20 2021 at 11:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20.28n.29.60/near/265552625">said</a>:</p>
<blockquote>
<p>Try <code>#check fin.fintype</code>. Maybe you're missing the import of <code>data.fintype.basic</code>.</p>
</blockquote>
<p>Gives me <code>fin (finite_dimensional.finrank K E)</code></p>



<a name="265552908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552908">(Dec 20 2021 at 11:53)</a>:</h4>
<p>The important line is the last one: the instance <code>decidable_eq (polynomial K)</code> was not found, which is needed to allow Lean to compute exactly which polynomials should be in the set. You can fix it in one of two ways: the easy way is to add a line <code>open_locale classical</code> after the imports that says we're not interested in computing, or add a <code>[decidable_eq K]</code> parameter to your definition that pushes this requirement to the user of your definition.</p>



<a name="265552963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552963">(Dec 20 2021 at 11:54)</a>:</h4>
<p>Wait hang on, <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.decidable_eq">docs#polynomial.decidable_eq</a> doesn't exist?</p>



<a name="265552990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265552990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265552990">(Dec 20 2021 at 11:54)</a>:</h4>
<p>So I guess the second solution doesn't apply, and <code>open_locale classical</code> it is:</p>



<a name="265553012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553012">(Dec 20 2021 at 11:55)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.adjoin</span>

<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">def</span> <span class="n">min_polys</span> <span class="o">{</span><span class="n">K</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">coe_fn</span><span class="o">(</span><span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">minpoly_func</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">polynomial</span><span class="o">(</span><span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">minpoly</span> <span class="n">K</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">comp</span> <span class="o">:=</span> <span class="n">minpoly_func</span> <span class="bp">∘</span> <span class="n">B</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">thing</span> <span class="o">:=</span> <span class="n">finset.univ.image</span> <span class="n">comp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265553026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553026">(Dec 20 2021 at 11:55)</a>:</h4>
<p>(Works on the community playground)</p>



<a name="265553148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553148">(Dec 20 2021 at 11:56)</a>:</h4>
<p>Completed definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.adjoin</span>

<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">min_polys</span> <span class="o">{</span><span class="n">K</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">h_findim</span> <span class="o">:</span> <span class="n">finite_dimensional</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">finset.univ.image</span> <span class="o">(</span><span class="n">minpoly</span> <span class="n">K</span> <span class="bp">∘</span> <span class="n">finite_dimensional.fin_basis</span> <span class="n">K</span> <span class="n">E</span><span class="o">)</span>
</code></pre></div>



<a name="265553265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553265">(Dec 20 2021 at 11:58)</a>:</h4>
<p>Note that I added <code>noncomputable</code> in front of <code>def</code>, which is required because we don't have an algorithm to determine the list of polynomials. You can also put <code>noncomputable theory</code> after the <code>open_locale</code> line, then Lean will automatically figure out where to put <code>noncomputable</code>.</p>



<a name="265553471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553471">(Dec 20 2021 at 12:01)</a>:</h4>
<p>Nice, thank you <span class="user-mention" data-user-id="238446">@Anne Baanen</span>. As an aside, is it a normal workflow for definitions to start off in tactic mode and then tidy things up to term mode? Obviously it's valid, but is it what most people do?</p>



<a name="265553518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265553518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265553518">(Dec 20 2021 at 12:01)</a>:</h4>
<p>Yes, I do that regularly. Generally you want definitions to be in term mode, so you know exactly what <code>unfold min_polys</code> will give you.</p>



<a name="265555522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265555522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265555522">(Dec 20 2021 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20.28n.29.60/near/265552963">said</a>:</p>
<blockquote>
<p>Wait hang on, <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.decidable_eq">docs#polynomial.decidable_eq</a> doesn't exist?</p>
</blockquote>
<p>Should we add it?</p>



<a name="265555666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Constructing%20a%20term%20of%20%60finset%60%20from%20function%20from%20%60fin%20%28n%29%60/near/265555666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Constructing.20a.20term.20of.20.60finset.60.20from.20function.20from.20.60fin.20(n).60.html#265555666">(Dec 20 2021 at 12:24)</a>:</h4>
<p>For proofs if I realise at the end that it's easy to rewrite in term mode, I often do, simply because it makes them compile a bit quicker. For definitions I try to stay in term mode at all times (unless I'm filling in a subproof) because I'm terrified about what random junk a tactic will add to my term</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>