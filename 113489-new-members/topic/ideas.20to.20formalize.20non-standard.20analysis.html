---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html">ideas to formalize non-standard analysis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304702568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304702568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304702568">(Oct 18 2022 at 14:56)</a>:</h4>
<p>I want to formalize some conclusions about non-standard analysis. What should I start with? Is there any ideas?<br>
(difficulties:The superstructures do not fit well in type theory... Should the transfer principle just be formalized as a tactic?)</p>



<a name="304759147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304759147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304759147">(Oct 18 2022 at 15:39)</a>:</h4>
<p>Are you sure that the superstructures can't be made to fit within type theory in a reasonable way? I feel like <span class="user-mention" data-user-id="459227">@Violeta Hernández</span> may be able to provide some pointers about how to go about this. Also, note that we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/hyperreal">docs#hyperreal</a></p>



<a name="304759839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304759839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304759839">(Oct 18 2022 at 15:43)</a>:</h4>
<p>I think Violeta is on an extended Lean hiatus, btw</p>



<a name="304762052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304762052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304762052">(Oct 18 2022 at 15:53)</a>:</h4>
<p>What's an example of a statement that you want to formulate? We have <a href="https://leanprover-community.github.io/mathlib_docs/find/ultraproduct">docs#ultraproduct</a>  (well, somewhere ;))</p>



<a name="304878907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304878907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304878907">(Oct 19 2022 at 04:39)</a>:</h4>
<p>I don't know a thing about how they're used in nonstandard analysis, but <a href="https://en.wikipedia.org/wiki/Nonstandard_analysis#Logical_framework">superstructure</a> seem very similar to <a href="#narrow/stream/116395-maths/topic/The.20consistency.20of.20NF/near/271768781">something that appears in the con-nf project</a>, so you might get some inspiration regarding how to formalize it in type theory from there.</p>



<a name="304884983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304884983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304884983">(Oct 19 2022 at 06:02)</a>:</h4>
<p>But I don't want to formalize the logic, which will make hyperreals hard to use. I think Lean itself is some formal logic, we can just use metaprogramming when we need to transfer from and to the non-std models.</p>



<a name="304885204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304885204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304885204">(Oct 19 2022 at 06:05)</a>:</h4>
<p>For example, when the goal is "forall x ∈ *R, there exists y ∈ *N s.t. y &gt; x". If a tactic <code>transfer</code> has been finished, I can just write <code>transfer</code> and then the goal becomes "forall x ∈ R, there exists y ∈ N s.t. y &gt; x".</p>



<a name="304885463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304885463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304885463">(Oct 19 2022 at 06:08)</a>:</h4>
<p>Is there any advice?</p>



<a name="304950570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304950570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304950570">(Oct 19 2022 at 13:02)</a>:</h4>
<p>I mean, a tactic has to supply Lean with the proof terms, so you first need to encode (some version of) the transfer principle in Lean. Then you can write a tactic that uses it.</p>



<a name="304952241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304952241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304952241">(Oct 19 2022 at 13:11)</a>:</h4>
<p>I have no idea how to express superstructures without formalizing logic.</p>



<a name="304952445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304952445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304952445">(Oct 19 2022 at 13:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304950570">said</a>:</p>
<blockquote>
<p>I mean, a tactic has to supply Lean with the proof terms, so you first need to encode (some version of) the transfer principle in Lean. Then you can write a tactic that uses it.</p>
</blockquote>
<p>I understand that. For example, I need to prove some lemmas like *(a + b) = *a + *b and so on.</p>



<a name="304954609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304954609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304954609">(Oct 19 2022 at 13:24)</a>:</h4>
<p>Pinging <span class="user-mention" data-user-id="302826">@Aaron Anderson</span> since he formalized Łos's theorem.</p>



<a name="304955508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304955508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304955508">(Oct 19 2022 at 13:29)</a>:</h4>
<p>I don't see the problem with formalising superstructures. As Junyan said, what we do in Con(NF) is almost what you want already.</p>



<a name="304959757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304959757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304959757">(Oct 19 2022 at 13:50)</a>:</h4>
<p>But do we need to formalize functions as sets?</p>



<a name="304962135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304962135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304962135">(Oct 19 2022 at 14:01)</a>:</h4>
<p>Absolutely not</p>



<a name="304998030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/304998030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#304998030">(Oct 19 2022 at 16:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304950570">said</a>:</p>
<blockquote>
<p>I mean, a tactic has to supply Lean with the proof terms, so you first need to encode (some version of) the transfer principle in Lean. Then you can write a tactic that uses it.</p>
</blockquote>
<p>I guess the point is that the transfer principle is in some sense a "meta theorem" (because you need to express the fact that the formula you're transfering is of first order), and we could absolutely have a tactic that does it in each concrete cases without being able to prove the general theorem. I actually tried to do exactly that one year and a half ago, and it seemed doable (you can see what I did <a href="https://github.com/ADedecker/nonstandard">here</a>), but I just got bored and came back from my mandatory nonstandard hype time :)</p>



<a name="305038305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305038305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305038305">(Oct 19 2022 at 20:38)</a>:</h4>
<p>A nonstandard extension can be thought of as an elementary extension, which we have in mathlib: <a href="https://leanprover-community.github.io/mathlib_docs/find/first_order.language.elementary_embedding">docs#first_order.language.elementary_embedding</a></p>



<a name="305038451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305038451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305038451">(Oct 19 2022 at 20:39)</a>:</h4>
<p>The trick is to choose your language carefully - you want a language where there's a symbol for every single n-ary function and relation on your Type (presumably R).</p>



<a name="305038617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305038617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305038617">(Oct 19 2022 at 20:40)</a>:</h4>
<p>The pain will be in showing that the things you want to transfer are first-order, as first-order formulas are weird-looking in our current implementation.</p>



<a name="305070489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305070489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305070489">(Oct 20 2022 at 02:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304998030">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304950570">said</a>:</p>
<blockquote>
<p>I mean, a tactic has to supply Lean with the proof terms, so you first need to encode (some version of) the transfer principle in Lean. Then you can write a tactic that uses it.</p>
</blockquote>
<p>I guess the point is that the transfer principle is in some sense a "meta theorem" (because you need to express the fact that the formula you're transfering is of first order), and we could absolutely have a tactic that does it in each concrete cases without being able to prove the general theorem. I actually tried to do exactly that one year and a half ago, and it seemed doable (you can see what I did <a href="https://github.com/ADedecker/nonstandard">here</a>), but I just got bored and came back from my mandatory nonstandard hype time :)</p>
</blockquote>
<p>Your code is inspiring! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="305624083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305624083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305624083">(Oct 23 2022 at 05:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304998030">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/304950570">said</a>:</p>
<blockquote>
<p>I mean, a tactic has to supply Lean with the proof terms, so you first need to encode (some version of) the transfer principle in Lean. Then you can write a tactic that uses it.</p>
</blockquote>
<p>I guess the point is that the transfer principle is in some sense a "meta theorem" (because you need to express the fact that the formula you're transfering is of first order), and we could absolutely have a tactic that does it in each concrete cases without being able to prove the general theorem. I actually tried to do exactly that one year and a half ago, and it seemed doable (you can see what I did <a href="https://github.com/ADedecker/nonstandard">here</a>), but I just got bored and came back from my mandatory nonstandard hype time :)</p>
</blockquote>
<p>Why does <code>linarith</code> not work on hyperreals?</p>



<a name="305632722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305632722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305632722">(Oct 23 2022 at 07:53)</a>:</h4>
<p>The problem is that <code>↑𝓗.germ ℝ</code> is not the same as <code>ℝ*</code> though they are def equal.</p>



<a name="305633419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305633419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305633419">(Oct 23 2022 at 08:03)</a>:</h4>
<p>Feel free to not quote large posts again and again, they're just above where everyone is reading on both the browser and mobile apps, and not hard to find. This isn't email, it's a conversation</p>



<a name="305633557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305633557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305633557">(Oct 23 2022 at 08:04)</a>:</h4>
<p>If you're working with hyperreals then you might find several things don't work because hyperreals haven't been given much love in mathlib. Maybe isolate some simple things which you'd like to work and which don't, post them as <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> s, and maybe someone can get them working</p>



<a name="305634612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305634612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305634612">(Oct 23 2022 at 08:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.hyperreal</span> <span class="n">analysis.normed.group.basic</span> <span class="n">tactic</span>
<span class="kn">open</span> <span class="n">filter</span> <span class="n">function</span>
<span class="kn">namespace</span> <span class="n">filter.germ</span>

<span class="kn">section</span> <span class="n">examples</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`𝓗`</span> <span class="o">:=</span> <span class="n">hyperfilter</span> <span class="n">ℕ</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">omega'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">𝓗</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">germ</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">↑</span><span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ω</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">omega'</span>

<span class="n">open_locale</span> <span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">hyperreal</span>

<span class="kd">lemma</span> <span class="n">abs_eq_map_abs</span> <span class="o">:</span> <span class="o">(</span><span class="n">abs</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">*</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">*</span><span class="o">)</span> <span class="bp">=</span> <span class="n">germ.map</span> <span class="n">abs</span> <span class="o">:=</span>
<span class="kd">begin</span>
   <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
   <span class="n">rw</span> <span class="o">[</span><span class="n">abs_eq_max_neg</span><span class="o">,</span> <span class="n">max_def</span><span class="o">],</span>
   <span class="n">refine</span> <span class="n">x.induction_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
   <span class="n">refl</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">goal</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">u</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">l</span><span class="o">))</span> <span class="o">:</span> <span class="n">is_st</span> <span class="o">(</span><span class="n">germ.map</span> <span class="n">u</span> <span class="n">ω</span><span class="o">)</span> <span class="n">l</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">metric.tendsto_at_top</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">N</span><span class="o">,</span> <span class="n">hN</span><span class="o">⟩,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">dist_eq_norm</span><span class="o">,</span> <span class="n">real.norm_eq_abs</span><span class="o">]</span> <span class="n">at</span> <span class="n">hN</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≥</span> <span class="n">N</span> <span class="bp">→</span> <span class="n">abs</span> <span class="o">(</span><span class="n">u</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">l</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">)</span> <span class="bp">↔</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓗</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">germ</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≥</span> <span class="bp">↑</span><span class="n">N</span> <span class="bp">→</span> <span class="n">germ.map</span> <span class="n">abs</span> <span class="o">(</span><span class="n">germ.map</span> <span class="n">u</span> <span class="n">n</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">l</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="bp">↑</span><span class="n">ε</span><span class="o">),</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">hN</span><span class="o">,</span>
  <span class="n">clear</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">hN</span> <span class="n">ω</span> <span class="o">(</span><span class="kd">begin</span>
    <span class="n">change</span> <span class="o">(</span><span class="bp">↑</span><span class="n">N</span> <span class="bp">≤</span> <span class="n">ω</span><span class="o">),</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">le_def</span><span class="o">],</span>
    <span class="n">apply</span> <span class="n">mem_hyperfilter_of_finite_compl</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">N</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">}</span><span class="bp">ᶜ</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">N</span><span class="o">},</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">set.finite_lt_nat</span> <span class="n">N</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">),</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">abs_eq_map_abs</span> <span class="n">at</span> <span class="n">hN</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">abs_lt</span> <span class="n">at</span> <span class="n">hN</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hN</span> <span class="k">with</span> <span class="n">hN₁</span> <span class="n">hN₂</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">change</span> <span class="bp">↑</span><span class="n">l</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">ε</span> <span class="bp">&lt;</span> <span class="n">germ.map</span> <span class="n">u</span> <span class="n">ω</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">germ.map</span> <span class="n">u</span> <span class="n">ω</span> <span class="bp">&lt;</span> <span class="bp">↑</span><span class="n">l</span> <span class="bp">+</span> <span class="bp">↑</span><span class="n">ε</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">examples</span>
<span class="kd">end</span> <span class="n">filter.germ</span>
</code></pre></div>
<p>Now I've solved the problem. This is one part of <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> 's code and I've just filled in two <code>sorry</code>s. (now the <code>sorry</code> part can be solved by <code>transfer</code>, but it needs more files, so I just write sorry to quote the code). The <code>change</code>s in the final lines seem very stupid <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>...</p>



<a name="305635187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305635187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305635187">(Oct 23 2022 at 08:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="478392">Jiatong Yang</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/305624083">said</a>:</p>
<blockquote>
<p>Why does <code>linarith</code> not work on hyperreals?</p>
</blockquote>
<p>That sounds like a bit of scope creep... Are the hyperreals actually amenable to <code>linarith</code>?</p>



<a name="305684126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305684126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305684126">(Oct 23 2022 at 16:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/305635187">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="478392">Jiatong Yang</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/305624083">said</a>:</p>
<blockquote>
<p>Why does <code>linarith</code> not work on hyperreals?</p>
</blockquote>
<p>That sounds like a bit of scope creep... Are the hyperreals actually amenable to <code>linarith</code>?</p>
</blockquote>
<p>We do have <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.germ.linear_ordered_comm_ring">docs#filter.germ.linear_ordered_comm_ring</a>, if that answers the question</p>



<a name="305684585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305684585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305684585">(Oct 23 2022 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="478392">Jiatong Yang</span> <a href="#narrow/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis/near/305634612">said</a>:</p>
<blockquote>
<p>[...]<br>
Now I've solved the problem. This is one part of <span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> 's code and I've just filled in two <code>sorry</code>s. (now the <code>sorry</code> part can be solved by <code>transfer</code>, but it needs more files, so I just write sorry to quote the code). The <code>change</code>s in the final lines seem very stupid <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>...</p>
</blockquote>
<p>Nice! Now I feel bad for leaving my code in such a bad state, I didn't think anyone would want to use it <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> I don't have a lot of time to work on that, but at least I'll try to add comments to pass it to you properly. Also, note that <code>transfer</code> is the first and only tactic I ever wrote in Lean3, so it's probably terribly unoptimal</p>



<a name="305725598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/ideas%20to%20formalize%20non-standard%20analysis/near/305725598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/ideas.20to.20formalize.20non-standard.20analysis.html#305725598">(Oct 24 2022 at 00:05)</a>:</h4>
<p>Thanks a lot! I have written no tactics before, so I need to learn tactic writing first <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>