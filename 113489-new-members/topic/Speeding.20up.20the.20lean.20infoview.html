---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html">Speeding up the lean infoview</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231864403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231864403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231864403">(Mar 25 2021 at 19:42)</a>:</h4>
<p>What are ways to speed up the interactive lean parser in VS Code?  I often have a situation where the program takes minutes to check if my code works. In the case I just have I have edited a file that was already part of mathlib (<code>category/arrows.lean</code>). That file does compile and the lean infoview is reasonably quick to update. However, another file that builds upon <code>arrows.lean</code> is extremely slowly / not at all reacting in the infoview. Thanks!</p>



<a name="231864768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231864768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231864768">(Mar 25 2021 at 19:44)</a>:</h4>
<p>Have you done <code>lean --make your/path/to/target.lean</code>? That will compile oleans for that file and all dependencies</p>



<a name="231865114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231865114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231865114">(Mar 25 2021 at 19:46)</a>:</h4>
<p>No, I have not. Do I need to do that regularly?</p>



<a name="231865505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231865505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231865505">(Mar 25 2021 at 19:49)</a>:</h4>
<p>By <code>your/path/to/target.lean/</code> you mean the git repo folder containing the mathlib copy? (I am working in a copy of mathlib).</p>



<a name="231867691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231867691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231867691">(Mar 25 2021 at 20:05)</a>:</h4>
<p>Oleans can help. If you're working on a branch of mathlib, then you can make your change to an existing file, push, wait a couple hours, and then do <code>leanproject get-cache</code></p>



<a name="231867909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231867909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231867909">(Mar 25 2021 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="247154">@Jakob Scholbach</span> Yeah, if there are 10 files between <code>arrows.lean</code> and the file you work on, Lean has to do a lot of work in between.</p>



<a name="231867972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231867972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231867972">(Mar 25 2021 at 20:07)</a>:</h4>
<p>So it makes sense to recompile before resuming work on your file</p>



<a name="231868028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868028">(Mar 25 2021 at 20:07)</a>:</h4>
<p>If you ever edit <code>logic.basic</code> you will have the joy of waiting for 2 hours before mathlib is recompiled <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="231868139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868139">(Mar 25 2021 at 20:08)</a>:</h4>
<p>Unless you use <code>lean --old</code></p>



<a name="231868327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868327">(Mar 25 2021 at 20:09)</a>:</h4>
<p>With <code>--old</code> Lean will assume that your changes to <code>logic/basic</code> don't affect the files you did not edit.</p>



<a name="231868412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868412">(Mar 25 2021 at 20:10)</a>:</h4>
<p>Of course, this doesn't work if you <em>change</em> the type of a def/lemma.</p>



<a name="231868480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868480">(Mar 25 2021 at 20:10)</a>:</h4>
<p>(as opposed to adding new defs/lemmas)</p>



<a name="231868528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231868528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231868528">(Mar 25 2021 at 20:10)</a>:</h4>
<p>Ah, that is good. In my case I just added a def to <code>arrow.lean</code>, which wouldn't affect anything else. So, I run <code>lean --old</code> in the terminal once and then this will do it?</p>



<a name="231869024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231869024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231869024">(Mar 25 2021 at 20:14)</a>:</h4>
<p>No, you need to pass <code>--old</code> argument to the lean server process.</p>



<a name="231869086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231869086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231869086">(Mar 25 2021 at 20:14)</a>:</h4>
<p>This should be somewhere in the lean extension settings (I'm using Emacs, so can't help with the details).</p>



<a name="231870940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231870940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231870940">(Mar 25 2021 at 20:28)</a>:</h4>
<p>In VS Code, you'd add <code>--old</code> to the box under "Extra command-line options for the Lean server" in the extension settings.</p>



<a name="231881786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231881786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231881786">(Mar 25 2021 at 21:49)</a>:</h4>
<p>I'd advise not getting too complicated with <code>lean --old</code>. If you're plugged into power, just leave <code>lean --make current_work.lean</code> buzzing along in a terminal...</p>



<a name="231890276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231890276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231890276">(Mar 25 2021 at 23:06)</a>:</h4>
<p>I always pass <code>--old</code> to lean server and run <code>lean --make current_work.lean</code> from time to time.</p>



<a name="231897427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Speeding%20up%20the%20lean%20infoview/near/231897427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Speeding.20up.20the.20lean.20infoview.html#231897427">(Mar 26 2021 at 00:31)</a>:</h4>
<p>Maybe I should try this more!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>