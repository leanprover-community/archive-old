---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html">Kevin Wilson: Introduction (+ a question on small examples)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269141116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269141116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269141116">(Jan 24 2022 at 17:36)</a>:</h4>
<p>Hi there,</p>
<p>My name is Kevin Wilson. Currently I run the data science group at The Policy Lab at Brown University and generally think about organizing and utilizing administrative data nowadays, but in a former life I got a Ph.D. in number theory. A friend of mine and I were discussing his work in theorem provers the other day, and he mentioned how much the lean and mathlib communities had grown, so I figured I'd check it out!</p>
<p>First off, thank you for all the wonderful resources. Lean and mathlib installed exactly as advertised in the docs, and both the tutorial and the natural number game were excellent introductions.</p>
<p>So I thought I'd try to prove something on my own from my own branch of math: The number of squarefree integers less than X is ~ X/zeta(2).  That seemed a good deal to bite off, so I figured I'd try an example:</p>
<p>The set of squarefree integers at most 9 is {1, 2, 3, 5, 6, 7}.</p>
<p>I quickly found myself lost in the thickets of the documentation of <code>finset</code> and so I wondered if I could prove the set of squarefree integers at most 1 has size 1. I got to here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">def</span> <span class="n">set_squarefree_le_x</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">):</span> <span class="n">finset</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">finset.filter</span> <span class="n">squarefree</span> <span class="o">(</span><span class="n">finset.range</span> <span class="o">(</span><span class="n">N</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="kd">lemma</span> <span class="n">sq_1_eq_1</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">set_squarefree_le_x</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">set_squarefree_le_x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">finset.card_eq_succ</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">use</span> <span class="bp">∅</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">finset.eq_singleton_iff_unique_mem</span><span class="o">,</span>
  <span class="c1">--- etc</span>
<span class="kd">end</span>
</code></pre></div>
<p>At this point I got this in the interactive pane:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rewrite</span> <span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">did</span> <span class="n">not</span> <span class="n">find</span> <span class="kd">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pattern</span> <span class="k">in</span> <span class="n">the</span> <span class="n">target</span> <span class="n">expression</span>
  <span class="bp">?</span><span class="n">m_2</span> <span class="bp">=</span> <span class="o">{</span><span class="bp">?</span><span class="n">m_3</span><span class="o">}</span>
<span class="n">state</span><span class="o">:</span>
<span class="mi">2</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="o">{</span><span class="mi">1</span><span class="o">}</span> <span class="bp">=</span> <span class="n">finset.filter</span> <span class="n">squarefree</span> <span class="o">(</span><span class="n">finset.range</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="bp">⊢</span> <span class="bp">∅.</span><span class="n">card</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>
<p>I stared at this for a long while (and eventually came up with a much longer proof to get around this), but I realized I must be approaching this the wrong way.</p>
<p>I was curious if there's some advice on approaching these sort of small, concrete examples, especially about subsets of the integers or subgroups of specific finite groups?</p>
<p>Thanks in advance for any help here, and thank you for the great work on this library!</p>
<p>Kevin</p>



<a name="269142178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142178">(Jan 24 2022 at 17:44)</a>:</h4>
<p>I would do this saying that <code>finset.filter squarefree (finset.range (N + 1))</code> is a subset of <code>finset.range (N + 1)</code>, so the cardinality is smaller.</p>



<a name="269142367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142367">(Jan 24 2022 at 17:46)</a>:</h4>
<p>The cardinality of <code>finset.range</code> is surely in mathlib, so you have that the cardinality is at most <code>2</code>.</p>



<a name="269142391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142391">(Jan 24 2022 at 17:46)</a>:</h4>
<p>Hey! Welcome. Small concrete calculations are usually the worst, so I'm not sure what to answer.</p>



<a name="269142518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142518">(Jan 24 2022 at 17:47)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.squarefree.decidable_pred">docs#nat.squarefree.decidable_pred</a>, so in such a small case the calculation can actually be done automatically.</p>



<a name="269142532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142532">(Jan 24 2022 at 17:47)</a>:</h4>
<p><span class="user-mention" data-user-id="474023">@Kevin Wilson</span> Welcome! There is something called <code>decidable_pred</code>. It basically means that there is an algorithm that you can run to find out the truth of a certain predicate/proposition. If you are lucky, someone has already shown that <code>squarefree</code> is a decidable predicate on the natural numbers. If so, your lemma should be provable in one line: <code>dec_trivial</code>.<br>
But this proof method will probably become unbearably slow for <code>N ≥ 10</code>. Maybe even earlier.</p>



<a name="269142670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269142670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269142670">(Jan 24 2022 at 17:48)</a>:</h4>
<p>But I agree with Yael, the rest is annoying, you have to prove that <code>0</code> is not in the filter, so it is actually a subset of <code>erase</code> and blah blah</p>



<a name="269143181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143181">(Jan 24 2022 at 17:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/269142532">said</a>:</p>
<blockquote>
<p>But this proof method will probably become unbearably slow for <code>N ≥ 10</code>. Maybe even earlier.</p>
</blockquote>
<p>Erhm...</p>



<a name="269143210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143210">(Jan 24 2022 at 17:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="k">#eval</span> <span class="o">(</span><span class="n">list.range</span> <span class="mi">50000</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span> <span class="n">squarefree</span>
</code></pre></div>



<a name="269143393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143393">(Jan 24 2022 at 17:53)</a>:</h4>
<p><code>list.length</code> of that yields <code>30401</code>.</p>



<a name="269143398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143398">(Jan 24 2022 at 17:53)</a>:</h4>
<p>(Sorry, not used to Zulip so sent this  before I saw the later messages! Please give me a moment while I read them!)</p>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I did think about that, but eventually you have to show that it's ≤ 1, so you'll eventually need to enumerate <code>finset.range (1 + 1)</code> and check each element. Hence I figured I'd just show in this case, it was equal to <code>{1}</code>. :-)</p>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Sadness. If there are examples, though, I'd be happy to take a look, even if they're the worst!</p>



<a name="269143607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143607">(Jan 24 2022 at 17:55)</a>:</h4>
<p>In that case, your pain also came from using <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.range">docs#finset.range</a> rather than <a href="https://leanprover-community.github.io/mathlib_docs/find/list.range">docs#list.range</a>. Finsets are unordered, so they lack an easy induction treatment, as opposed to lists. For small calculations, lists are usually better.</p>



<a name="269143792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269143792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269143792">(Jan 24 2022 at 17:56)</a>:</h4>
<p>If you're interested, here's a PR that does precisely this: small calculations in a smart way using lists. <a href="https://github.com/leanprover-community/mathlib/pull/10645">#10645</a></p>



<a name="269144131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144131">(Jan 24 2022 at 17:58)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Yeah I was confused by the <code>decideable_pred</code> because it was clearly already in the <code>algebra.squarefree</code> packages as <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> points out. It was unclear if I needed to hint that somehow to the rewriter and even how to do such things.</p>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> this makes sense. I was drawn to <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.range">docs#finset.range</a> because, well, it seemed like what I was going for. I'll take a look at this small Roth number computation and see if I can make this work! Thanks!</p>



<a name="269144174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144174">(Jan 24 2022 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> This doesn't work, do you know why?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sq_1_eq_1</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">set_squarefree_le_x</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">delta</span> <span class="n">set_squarefree_le_x</span><span class="o">,</span>
  <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269144226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144226">(Jan 24 2022 at 17:59)</a>:</h4>
<p>Because it's a <code>finset</code>, Johan. Replace that with a <code>list</code> and it will work out.</p>



<a name="269144353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144353">(Jan 24 2022 at 18:00)</a>:</h4>
<p>Why the heck is that a problem? Lean should be able to compute with <code>finset.range 2</code>.</p>



<a name="269144507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144507">(Jan 24 2022 at 18:01)</a>:</h4>
<p>Hmm, maybe I said bullshit. This doesn't work either</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">((</span><span class="n">list.range</span> <span class="mi">2</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span> <span class="n">squarefree</span><span class="o">)</span><span class="bp">.</span><span class="n">length</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="269144606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144606">(Jan 24 2022 at 18:01)</a>:</h4>
<p>Is it that <code>#eval</code> can do stuff that <code>rfl</code> or <code>dec_trivial</code> can't?</p>



<a name="269144630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269144630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269144630">(Jan 24 2022 at 18:02)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="474023">@Kevin Wilson</span> ! I'm also at Brown, new this year to the CS department, and taught a <a href="https://cs.brown.edu/courses/cs1951x/">course using Lean</a> this fall. Nice to see someone else nearby getting into it!</p>



<a name="269145019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269145019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269145019">(Jan 24 2022 at 18:04)</a>:</h4>
<p>But it's a problem with <code>squarefree</code>, because <code>example : ((list.range 2).filter ⊤).length = 2 := rfl</code> works</p>



<a name="269145233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269145233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269145233">(Jan 24 2022 at 18:05)</a>:</h4>
<p>Ahah! Is it some reducibility setting maybe?</p>



<a name="269145472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269145472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269145472">(Jan 24 2022 at 18:07)</a>:</h4>
<p>Nice to meet you, <span class="user-mention" data-user-id="110596">@Rob Lewis</span> ! I'll definitely take a look at this course. I might bug you for a coffee at some point as well!</p>



<a name="269147908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269147908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269147908">(Jan 24 2022 at 18:25)</a>:</h4>
<p>how do you trace dec_trivial calls? this is something I've wanted to know for a while and never found an answer sadly</p>



<a name="269147938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269147938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269147938">(Jan 24 2022 at 18:25)</a>:</h4>
<p>something is very weird in that example...</p>



<a name="269154533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269154533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269154533">(Jan 24 2022 at 19:07)</a>:</h4>
<p>Finsets have an induction on them, what do you mean Yael that they don't have an easy one?</p>



<a name="269154572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269154572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269154572">(Jan 24 2022 at 19:07)</a>:</h4>
<p>I think I got confused by the error.</p>



<a name="269169057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269169057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269169057">(Jan 24 2022 at 20:36)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="474023">@Kevin Wilson</span>, nice to see you here!</p>



<a name="269181893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269181893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269181893">(Jan 24 2022 at 22:29)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> ! Long time no see!!</p>



<a name="269182088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269182088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269182088">(Jan 24 2022 at 22:31)</a>:</h4>
<p>Indeed!  Well, if we get you addicted here, it may be short time much see!</p>



<a name="269184200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269184200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269184200">(Jan 24 2022 at 22:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/269145233">said</a>:</p>
<blockquote>
<p>Ahah! Is it some reducibility setting maybe?</p>
</blockquote>
<p>This is a sort of error I asked about a couple weeks ago, and Mario was saying it's something to do with which axioms appear in the definition, and some of them make it get "stuck."</p>
<p>Some examples to show some behavior (but not explaining what's wrong with <code>squarefree</code>):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">squarefree</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- ok</span>
<span class="kd">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">squarefree</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- fails</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- fails</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">squarefree</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">is_true</span> <span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">nat.squarefree_iff_nodup_factors</span> <span class="o">(</span><span class="n">dec_trivial</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">norm_num</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- ok</span>
</code></pre></div>



<a name="269184267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269184267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269184267">(Jan 24 2022 at 22:52)</a>:</h4>
<p>I suspect the problem is that <code>n.factors.nodup</code> gets stuck on <code>n.factors</code>, which involves division, so well-founded recursion. (But I don't really know.)</p>



<a name="269184453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269184453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269184453">(Jan 24 2022 at 22:53)</a>:</h4>
<p>New guess: it's that <code>factors</code> itself depends on well-founded recursion. Those don't seem to work with <code>dec_trivial</code>...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">factors</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">ℕ</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">n</span><span class="bp">@</span><span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">min_fac</span> <span class="n">n</span> <span class="k">in</span> <span class="k">have</span> <span class="n">n</span> <span class="bp">/</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">factors_lemma</span><span class="o">,</span>
  <span class="n">m</span> <span class="o">::</span> <span class="n">factors</span> <span class="o">(</span><span class="n">n</span> <span class="bp">/</span> <span class="n">m</span><span class="o">)</span>
</code></pre></div>



<a name="269185529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269185529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269185529">(Jan 24 2022 at 23:04)</a>:</h4>
<p>It looks like it's possible to get it to work with an auxiliary algorithm for <code>squarefree</code>. I wrote a terrible one that does trial division with a naive upper bound:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">squarefree'_aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">t'</span><span class="bp">@</span><span class="o">(</span><span class="n">t</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">%</span> <span class="o">(</span><span class="n">t'</span><span class="bp">*</span><span class="n">t'</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">ff</span> <span class="k">else</span> <span class="n">squarefree'_aux</span> <span class="n">t</span>

<span class="kd">def</span> <span class="n">squarefree'</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">squarefree'_aux</span> <span class="n">n</span> <span class="n">n</span>

<span class="kd">lemma</span> <span class="n">squarefree_iff_squarefree'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">squarefree</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">squarefree'</span> <span class="n">n</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">instance</span> <span class="n">foo</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">squarefree</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="k">if</span> <span class="n">hs</span> <span class="o">:</span> <span class="n">squarefree'</span> <span class="n">n</span> <span class="k">then</span> <span class="n">_</span> <span class="k">else</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">is_true</span><span class="o">,</span> <span class="n">rw</span> <span class="n">squarefree_iff_squarefree'</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">is_false</span><span class="o">,</span> <span class="n">rw</span> <span class="n">squarefree_iff_squarefree'</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">squarefree</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- works</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="mi">37</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- works</span>
</code></pre></div>



<a name="269185909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269185909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269185909">(Jan 24 2022 at 23:08)</a>:</h4>
<p>Can't you use <a href="https://leanprover-community.github.io/mathlib_docs/find/decidable_of_iff'">docs#decidable_of_iff'</a> to shorten <code>foo</code>?</p>



<a name="269186504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269186504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269186504">(Jan 24 2022 at 23:15)</a>:</h4>
<p>I thought when I'd tried that the examples got stuck, but I guess that works too. (I wrote it in a way where I could be sure it definitely wouldn't get stuck, since this isn't so fun to debug <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>). <em>Replaced in code block</em></p>



<a name="269186833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269186833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269186833">(Jan 24 2022 at 23:18)</a>:</h4>
<p>I think <code>decidable_of_iff</code> and <code>decidable_of_iff'</code> were explicitly designed not to get stuck.</p>



<a name="269187875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269187875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269187875">(Jan 24 2022 at 23:31)</a>:</h4>
<p>I wonder how you can write <code>factors</code> to be similarly efficient but still not get stuck. Maybe you can have an auxiliary function that you give "gas" (i.e., the number of recursive steps it will ever apply), and you can estimate how much gas you'll ever need? For example, <code>factors</code> won't ever give more factors than <code>n</code>, so that can serve as the gas to power the recursion. (And of course <code>nat.min_fac</code> uses well-founded recursion, too...)</p>



<a name="269302713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269302713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269302713">(Jan 25 2022 at 18:37)</a>:</h4>
<p>I'd be curious if there is, because by attempts at proving this squarefree number asymptotic seems to keep getting stymied at <code>dec_trivial</code>s that seemingly get stuck on things like <code>squarefree</code> and <code>factors</code> and <code>divisors</code>.</p>



<a name="269303744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269303744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269303744">(Jan 25 2022 at 18:43)</a>:</h4>
<p>If you are trying to prove an asymptotic dec_trivial likely won't be too helpful anyway, its just a way of forcing lean to evaluate closed expressions. So its useful to do small calculations when a problem is inherently finite, but will not be able to really prove much more than that. Where are you stuck exactly?</p>



<a name="269304951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269304951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269304951">(Jan 25 2022 at 18:52)</a>:</h4>
<p>There's a lot of induction lying around in proving some rearrangement equals some other rearrangement. So the base cases end up looking like needing to prove <code>f 1 = 1</code>. I can type <code>#eval f 1</code> and it shows me <code>1</code>. Writing it out by hand is, well, quite nightmarish!</p>



<a name="269305310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305310">(Jan 25 2022 at 18:54)</a>:</h4>
<p>Also I must tell you that you probably didn't pick the easiest problem to start with!</p>



<a name="269305341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305341">(Jan 25 2022 at 18:54)</a>:</h4>
<p>Gotta challenge yourself! :-)</p>



<a name="269305381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305381">(Jan 25 2022 at 18:55)</a>:</h4>
<p>(we don't even have the Zeta function)</p>



<a name="269305387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305387">(Jan 25 2022 at 18:55)</a>:</h4>
<p>But I'm definitely realizing that!</p>



<a name="269305576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305576">(Jan 25 2022 at 18:56)</a>:</h4>
<p>Conveniently, the standard proof doesn't directly use the zeta function. But it does involve proving things like $\sum_{d^2 \mid n} \mu(d) = 1$ if and only if $n$ is squarefree.</p>



<a name="269305864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269305864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269305864">(Jan 25 2022 at 18:58)</a>:</h4>
<p>And that proof essentially goes: a) prove that function is multiplicative; b) prove it for prime powers. I saw there were <code>arithmetic_functions</code>, <code>moebius</code>, and even the notion of a multiplicative arithmetic function, so I figured at least the foundation is there!</p>



<a name="269306309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269306309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269306309">(Jan 25 2022 at 19:00)</a>:</h4>
<p>Ok <code>dec_trivial</code> could be helpful but maybe another good way when the definitions are a bit more complicated is to coax <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_num">tactic#norm_num</a> into unfolding the right things and evaluating them (normally this involves passing it extra function names / lemmas, like for simp, so that it rewrites the right things until it gets to a point it can actually do the calculation)</p>



<a name="269306482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269306482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269306482">(Jan 25 2022 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="474023">@Kevin Wilson</span> Did you finish the proof in your first post? I took a stab at it and got through mostly with <code>simp</code>, <code>ext</code>, <code>norm_num</code>, and <code>interval_cases</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">def</span> <span class="n">set_squarefree_le_x</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">):</span> <span class="n">finset</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">finset.filter</span> <span class="n">squarefree</span> <span class="o">(</span><span class="n">finset.range</span> <span class="o">(</span><span class="n">N</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="kd">lemma</span> <span class="n">sq_1_eq_1</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">set_squarefree_le_x</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">set_squarefree_le_x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">finset.card_eq_succ</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">use</span> <span class="bp">∅</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="o">⟨</span><span class="n">ha</span><span class="o">,</span> <span class="n">hsf</span><span class="o">⟩,</span>
  <span class="n">norm_num</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">interval_cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">simpa</span> <span class="n">using</span> <span class="n">hsf</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269306963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269306963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269306963">(Jan 25 2022 at 19:04)</a>:</h4>
<p>With a somewhat cleaned-up proof (I <code>squeeze_simp</code>ed to fix non-terminal <code>simp</code>s, and I added braces for goals):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sq_1_eq_1</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">set_squarefree_le_x</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">set_squarefree_le_x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">finset.card_eq_succ</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="bp">∅</span><span class="o">],</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">true_and</span><span class="o">,</span> <span class="n">finset.not_mem_empty</span><span class="o">,</span> <span class="n">insert_emptyc_eq</span><span class="o">,</span> <span class="n">finset.card_empty</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span>
    <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">not_false_iff</span><span class="o">],</span>
  <span class="n">ext</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset.mem_singleton</span><span class="o">,</span> <span class="n">finset.mem_filter</span><span class="o">,</span> <span class="n">finset.mem_range</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">ha</span><span class="o">,</span> <span class="n">hsf</span><span class="o">⟩,</span>
    <span class="n">norm_num</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">interval_cases</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="n">using</span> <span class="n">hsf</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269307134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269307134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269307134">(Jan 25 2022 at 19:05)</a>:</h4>
<p>(Aside <span class="user-mention" data-user-id="474023">@Kevin Wilson</span>: on zulip you can write latex/math using double dollars: <code>$$a^2 + b^2 \in \mathbb R$$</code> yields <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">a^2 + b^2 \in \mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8532em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>.)</p>



<a name="269307311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269307311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269307311">(Jan 25 2022 at 19:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/269306309">said</a>:</p>
<blockquote>
<p>Ok <code>dec_trivial</code> could be helpful but maybe another good way when the definitions are a bit more complicated is to coax <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_num">tactic#norm_num</a> into unfolding the right things and evaluating them (normally this involves passing it extra function names / lemmas, like for simp, so that it rewrites the right things until it gets to a point it can actually do the calculation)</p>
</blockquote>
<p>I guess <code>norm_num</code> doesn't know what to do with <code>square_free</code> as of today, right?</p>



<a name="269307329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269307329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269307329">(Jan 25 2022 at 19:07)</a>:</h4>
<p>That is correct :-)</p>



<a name="269307444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269307444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269307444">(Jan 25 2022 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span>  I did finish a proof, but it was quite a bit longer. I hadn't come across the <code>ext</code> tactic, which does make this a lot easier! I ended up with several auxiliary lemmas whose purpose was essentially to get me <code>ext</code></p>



<a name="269309829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269309829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269309829">(Jan 25 2022 at 19:25)</a>:</h4>
<p>Here's a slightly different version, but still annoyingly long to be honest</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sq_1_eq_1</span> <span class="o">:</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">set_squarefree_le_x</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">set_squarefree_le_x</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">finset.filter</span> <span class="n">squarefree</span> <span class="o">(</span><span class="n">finset.range</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">ext</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">hh</span><span class="o">⟩,</span>
      <span class="n">interval_cases</span> <span class="n">a</span><span class="o">,</span> <span class="c1">-- reorders goals?</span>
      <span class="n">simpa</span> <span class="n">using</span> <span class="n">hh</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">finset.card_singleton</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269340737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269340737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269340737">(Jan 25 2022 at 23:24)</a>:</h4>
<p>And for a bit of fun I wrote a different decidable instance for squarefree, its also trial division I suppose, I just approach the setup a bit differently</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">instance</span> <span class="n">nat.decidable_is_unit</span> <span class="o">:</span> <span class="n">decidable_pred</span> <span class="o">(</span><span class="bp">@</span><span class="n">is_unit</span> <span class="n">ℕ</span> <span class="n">_</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">decidable_of_iff</span> <span class="n">_</span> <span class="n">nat.is_unit_iff.symm</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">instance</span> <span class="n">nat_sq</span> <span class="o">:</span> <span class="n">decidable_pred</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">squarefree</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">hz</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hz</span><span class="o">,</span> <span class="n">not_squarefree_zero</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">decidable.false</span><span class="o">,</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="n">n</span> <span class="bp">↔</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">is_unit</span> <span class="n">x</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">squarefree</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">forall_congr</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">split</span><span class="bp">;</span> <span class="n">intros</span> <span class="n">hx</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">hx</span><span class="o">,</span> <span class="o">},</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">hx</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hl</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat.le_of_dvd</span> <span class="o">(</span><span class="n">zero_lt_iff.mpr</span> <span class="n">hz</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">by_contra</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">not_le</span><span class="o">,</span> <span class="n">nat.lt_one_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">hz</span><span class="o">,</span>
      <span class="n">simpa</span> <span class="o">[</span><span class="n">hn</span><span class="o">]</span> <span class="n">using</span> <span class="n">h</span><span class="o">,</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">h'</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">mul_le_mul'</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">x</span><span class="o">)</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_one</span><span class="o">]</span> <span class="n">at</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h'.trans</span> <span class="n">hl</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">decidable_of_iff</span> <span class="n">_</span> <span class="n">this.symm</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="mi">130</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="269342952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269342952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269342952">(Jan 25 2022 at 23:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/269307311">said</a>:</p>
<blockquote>
<p>I guess <code>norm_num</code> doesn't know what to do with <code>square_free</code> as of today, right?</p>
</blockquote>
<p>Already on the case</p>



<a name="269355486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269355486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269355486">(Jan 26 2022 at 02:37)</a>:</h4>
<p>This is very cool! Thank you for the intro to all the internals as well!</p>



<a name="269356889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269356889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269356889">(Jan 26 2022 at 03:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11666">#11666</a></p>



<a name="269357488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269357488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269357488">(Jan 26 2022 at 03:18)</a>:</h4>
<p>And here's an application to use <code>norm_num</code> to sum up all the squarefrees up to a bound:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">((</span><span class="n">list.range</span> <span class="mi">50</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">squarefree</span><span class="o">)</span><span class="bp">.</span><span class="n">count</span> <span class="n">true</span> <span class="bp">=</span> <span class="mi">31</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">list.range</span><span class="o">,</span> <span class="n">list.range_core</span><span class="o">]</span>
</code></pre></div>
<p>I had to write it in a slightly funny way because this is just relying on <code>simp</code> to simplify the list stuff, there isn't any custom evaluation code for it. It also doesn't seem be be able to handle very large numbers; there are much better algorithms for calculating the sum of squarefrees up to a bound than just expanding out the list and simplifying.</p>



<a name="269357619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/269357619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#269357619">(Jan 26 2022 at 03:20)</a>:</h4>
<p>The actual underlying algorithm seems to be able to handle pretty large numbers so I guess it is the surrounding simp stuff that is expensive</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="mi">99302206</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</code></pre></div>



<a name="275156281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275156281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275156281">(Mar 13 2022 at 14:09)</a>:</h4>
<p>So I finished my goal: the "usual" proof on the asymptotics of squarefree numbers. <a href="https://github.com/khwilson/squarefree_asymptotics">https://github.com/khwilson/squarefree_asymptotics</a></p>
<p>It turned out to be quite long, but I'd love to record my experiences somewhere at least as a tutorial for others. And I'd love any comments on how this could have been done better. Indeed, I think my biggest conundrum was that it was hard to find good examples of "how to approach an integral problem" or "how to prove that two functions differ on a set of measure 0."</p>
<p>Thanks again for all the early help!</p>



<a name="275156713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275156713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275156713">(Mar 13 2022 at 14:18)</a>:</h4>
<p>Wow, that's amazing!</p>



<a name="275156715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275156715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275156715">(Mar 13 2022 at 14:18)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span></p>



<a name="275156734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275156734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275156734">(Mar 13 2022 at 14:19)</a>:</h4>
<p>(we were originally a bit sorry for you that you had chosen such a hard item)</p>



<a name="275157228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275157228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275157228">(Mar 13 2022 at 14:30)</a>:</h4>
<p>Never underestimate the power of "doing things while watching Downton Abbey [or your preferred mindless television show]" :-)</p>



<a name="275157311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275157311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275157311">(Mar 13 2022 at 14:31)</a>:</h4>
<p>Congratulations!! A good way to get feedback is to try to PR what you proved.</p>
<p>You can start with some preliminary lemmas (try to open several short PRs rather than a big one).</p>



<a name="275161190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275161190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275161190">(Mar 13 2022 at 15:54)</a>:</h4>
<p>I was having a look at the readme on your page, and I see there that you are asking if there is a good way of formalising the notion of "for sufficiently large parameters, ...". The answer is that we are already using this a lot, and this is called filters. You can grep the library for <code>∀ᶠ.*in at_top</code> to see how it is used.</p>



<a name="275173319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275173319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275173319">(Mar 13 2022 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> great idea! Do you have a recommendation for a PR that was good in your opinion? Especially for PRs that depend on each other? (Always a problem in software!) </p>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span>  Yeah with the filters, I spent a lot of time in the code and in the docs trying to find good examples and I couldn’t quite figure out how to put it altogether, at least in an elegant way. Hence the notes at the bottom that I couldn’t quite grok them or how to prove that two sets differ on a set of measure 0 😅</p>
<p>If you have a favorite example, I’d love a pointer!</p>
<p>Thanks again!</p>



<a name="275205111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275205111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275205111">(Mar 14 2022 at 08:26)</a>:</h4>
<p>You can just open one or two PR with the basic material (mentioning what the final goal is), and once they are accepted you can remove the result from your repository. There is no need to PR everything at the same time, especially if this means a lot of dependent PR.</p>



<a name="275206486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275206486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275206486">(Mar 14 2022 at 08:41)</a>:</h4>
<p>I briefly looked at <code>general.lean</code> to see if there were a lemma or two that could be a small PR, but I got sidetracked with <code>one_le_of_ne_zero</code>, since it seemed like it just had to be in mathlib already in some form. If you do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">one_le_of_ne_zero</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">↔</span> <span class="n">m</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>
<p>it gives <code>nat.one_le_iff_ne_zero</code>.  Similarly, the lemma <code>two_le_prime</code> is <code>nat.prime.two_le</code>. I couldn't find <code>prime_squarefree</code> immediately by the same tactic, but searching for "prime squarefree" in the online docs turned up <a href="https://leanprover-community.github.io/mathlib_docs/find/prime.squarefree">docs#prime.squarefree</a></p>
<p>These seem to be new:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sqrt_one_eq_one</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">sqrt</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">eq_sqrt</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">one_le_sqrt</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">sqrt</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">sqrt_one_eq_one</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">sqrt_le_sqrt</span> <span class="n">hn</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="275206949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275206949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275206949">(Mar 14 2022 at 08:47)</a>:</h4>
<p>Btw, <code>lemma sqrt_one_eq_one</code> is probably more mathlib-like formulated with the equality in the opposite way: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">sqrt_one_eq_one</span> <span class="o">:</span> <span class="n">sqrt</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span>
</code></pre></div>
<p>The guiding principle being that the RHS should be "<code>simp</code>ler" than the LHS.</p>



<a name="275207357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275207357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275207357">(Mar 14 2022 at 08:52)</a>:</h4>
<p>Also, <code>convert nat.sqrt_eq 1</code> might simplify the proof, leaving only a <code>mul_one</code> (untested).<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/nat.sqrt_eq">docs#nat.sqrt_eq</a></p>



<a name="275207837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275207837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275207837">(Mar 14 2022 at 08:58)</a>:</h4>
<p>I swear <code>sqrt 1 = 1</code> has to be <code>rfl</code> (if we're talking about <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.sqrt">docs#nat.sqrt</a>)</p>



<a name="275208810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275208810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275208810">(Mar 14 2022 at 09:08)</a>:</h4>
<p>well you would be wrong</p>



<a name="275230073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275230073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275230073">(Mar 14 2022 at 12:46)</a>:</h4>
<p>Thank you for the comments. I'll take a stab at migrating some of those!</p>
<p>One thing that was confusing to me throughout was when the naming convention called for "object notation" (e.g., <code>prime.two_le</code>) versus [not sure what it should be called but the opposite] notation, (e.g., <code>two_le_prime</code>). Never quite figured out the patter!</p>



<a name="275230586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275230586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275230586">(Mar 14 2022 at 12:51)</a>:</h4>
<p>You can look on zulip for "<del>not</del> dot notation", there are quite a lot of threads, but the idea is that we like it and we try to use it.</p>
<p>Take for example <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.monic.pow">docs#polynomial.monic.pow</a>: it says that the power of a monic polynomial is monic, so it has as an assumption <code>hp : p.monic</code>. The idea of dot notation is that we can use it writing <code>hp.pow n</code> instead of <code>monic.pow hp n</code>.</p>



<a name="275230704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275230704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275230704">(Mar 14 2022 at 12:52)</a>:</h4>
<p>But at beginning don't worry too much about this, it will be part of the review process</p>



<a name="275230933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275230933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275230933">(Mar 14 2022 at 12:54)</a>:</h4>
<blockquote>
<p>"not notation"</p>
</blockquote>
<p>dot notation :-)</p>



<a name="275231247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275231247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275231247">(Mar 14 2022 at 12:56)</a>:</h4>
<p>Made <span class="user-mention" data-user-id="306601">@Kyle Miller</span> 's changes (love small change requests that reduce code!) <a href="https://github.com/khwilson/squarefree_asymptotics/pull/1">https://github.com/khwilson/squarefree_asymptotics/pull/1</a></p>



<a name="275232032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232032">(Mar 14 2022 at 13:02)</a>:</h4>
<p>Also, I think I found <code>prime.squarfree</code> but everything fails to unify if you use that. I think because N isn't a monoid according to Lean? (I hit this sort of thing several times.)</p>



<a name="275232043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232043">(Mar 14 2022 at 13:02)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prime_squarfree</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">prime.squarefree</span> <span class="n">hp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="275232063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232063">(Mar 14 2022 at 13:03)</a>:</h4>
<p>Leads to</p>



<a name="275232065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232065">(Mar 14 2022 at 13:03)</a>:</h4>
<p>Surely N is a monoid?</p>



<a name="275232080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232080">(Mar 14 2022 at 13:03)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">prime.squarefree</span> <span class="n">hp</span>
<span class="n">term</span>
  <span class="n">hp</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">prime</span> <span class="n">p</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">prime</span> <span class="n">ℕ</span> <span class="o">(</span><span class="bp">@</span><span class="n">cancel_comm_monoid_with_zero.to_comm_monoid_with_zero</span> <span class="n">ℕ</span> <span class="n">nat.cancel_comm_monoid_with_zero</span><span class="o">)</span> <span class="n">p</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span>
<span class="n">hp</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">p</span>
<span class="bp">⊢</span> <span class="n">squarefree</span> <span class="n">p</span>
</code></pre></div>



<a name="275232122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232122">(Mar 14 2022 at 13:03)</a>:</h4>
<p>The issue there I suspect is that there is more than one notion of prime in play.</p>



<a name="275232186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232186">(Mar 14 2022 at 13:04)</a>:</h4>
<p>We have a bit of description of how nice dot notation can be at the end of the section <a href="https://leanprover-community.github.io/tips_and_tricks.html#avoiding-many-nested-parentheses-with-">https://leanprover-community.github.io/tips_and_tricks.html#avoiding-many-nested-parentheses-with-</a> of the tips and tricks page</p>



<a name="275232264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232264">(Mar 14 2022 at 13:05)</a>:</h4>
<p>Also, I definitely agree the dot notation is nice! I just couldn't quite grok when to use dot notation instead of the <code>_of_</code> notation (and especially when to search with the dot notation instead of the <code>_of_</code> notation :-) )</p>



<a name="275232316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232316">(Mar 14 2022 at 13:05)</a>:</h4>
<p>Yes, <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.prime">docs#nat.prime</a> is not the same as <a href="https://leanprover-community.github.io/mathlib_docs/find/prime">docs#prime</a></p>



<a name="275232339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232339">(Mar 14 2022 at 13:05)</a>:</h4>
<p>But we surely know somewhere that they are equivalent</p>



<a name="275232340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232340">(Mar 14 2022 at 13:05)</a>:</h4>
<p>Can you post fully working code? I can't reproduce your error. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>
<span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">lemma</span> <span class="n">prime_squarfree</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">prime.squarefree</span> <span class="n">hp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>gives the problem I'm flagging -- <code>nat.prime</code> isn't the same as <code>prime</code> (but my error is much more sensible than yours)</p>



<a name="275232403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232403">(Mar 14 2022 at 13:06)</a>:</h4>
<p>And <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> yes, you're correct. Reading that error it definitely seems that N is a monoid! But perhaps there's some Lean magic to get it to work</p>



<a name="275232408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232408">(Mar 14 2022 at 13:06)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.prime_iff">docs#nat.prime_iff</a></p>



<a name="275232526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232526">(Mar 14 2022 at 13:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.squarefree</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">nat</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">lemma</span> <span class="n">prime_squarfree</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">prime.squarefree</span> <span class="n">hp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="275232546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232546">(Mar 14 2022 at 13:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> ^^^</p>



<a name="275232566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232566">(Mar 14 2022 at 13:07)</a>:</h4>
<p>Oh you have <code>open nat</code>, yeah that makes the same error look a lot more exotic :-)</p>



<a name="275232664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232664">(Mar 14 2022 at 13:08)</a>:</h4>
<p>Hah still not exactly sure what counts as "minimum" and how to debug :-)</p>



<a name="275232696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232696">(Mar 14 2022 at 13:08)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prime_squarfree</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">squarefree</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">nat.prime_iff</span> <span class="n">at</span> <span class="n">hp</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">prime.squarefree</span> <span class="n">hp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>as Riccardo said. There are two primes here, and with <code>open nat</code> they're both called <code>prime</code>.</p>



<a name="275232785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232785">(Mar 14 2022 at 13:09)</a>:</h4>
<p>Ah well that would explain that. I'm guessing <code>nat.prime</code> has special features that <code>prime</code> doesn't have?</p>



<a name="275232798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232798">(Mar 14 2022 at 13:09)</a>:</h4>
<p>By the way I would recommend you avoid <code>open_locale classical</code>, it was a "hammer" approach to decidability problems popular a few years ago; we now have far more precise tools to deal with these issues.</p>



<a name="275232823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232823">(Mar 14 2022 at 13:09)</a>:</h4>
<p><code>nat.prime</code> and <code>prime</code> are simply two different things.</p>



<a name="275232930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232930">(Mar 14 2022 at 13:10)</a>:</h4>
<p>Oh I just meant that why don't you just <em>define</em> <code>nat.prime</code> via <code>nat.prime_iff</code> ?</p>



<a name="275232935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275232935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275232935">(Mar 14 2022 at 13:10)</a>:</h4>
<p><code>nat.prime</code> is about naturals, <code>prime</code> is a far more general algebraic concept which works for commutative rings and has a different definition. This is why you need <code>nat.prime_iff</code> to glue the two concepts together.</p>



<a name="275233012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233012">(Mar 14 2022 at 13:11)</a>:</h4>
<p>It's not for me to say why definitions are as they are. Perhaps historical? <code>nat.prime</code> was defined by the computer scientists before we mathematicians came along telling them that there was a far more general concept of primality?</p>



<a name="275233048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233048">(Mar 14 2022 at 13:11)</a>:</h4>
<p>Hah! "Path dependence" is almost always the answer</p>



<a name="275233065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233065">(Mar 14 2022 at 13:11)</a>:</h4>
<p>Yeah, it might also be that :-)</p>



<a name="275233141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233141">(Mar 14 2022 at 13:12)</a>:</h4>
<p>yeah, that's what happened</p>



<a name="275233152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233152">(Mar 14 2022 at 13:12)</a>:</h4>
<p>We changed the definition recently, didn't we? Using <code>irreducible</code>.</p>



<a name="275233175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233175">(Mar 14 2022 at 13:12)</a>:</h4>
<p>But I may be wrong</p>



<a name="275233225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233225">(Mar 14 2022 at 13:12)</a>:</h4>
<p>Indeed it seems that <code>nat.prime</code> was refactored 3 months ago in <a href="https://github.com/leanprover-community/mathlib/pull/11031">#11031</a></p>



<a name="275233233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233233">(Mar 14 2022 at 13:13)</a>:</h4>
<p>Yeah, but it takes &gt; 500 lines to prove that irreducible implies prime for nat</p>



<a name="275233258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233258">(Mar 14 2022 at 13:13)</a>:</h4>
<p>...by Ruben :-)</p>



<a name="275233291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233291">(Mar 14 2022 at 13:13)</a>:</h4>
<p>We could probably turn it around, but that was more work than I wanted to take on at that point</p>



<a name="275233310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233310">(Mar 14 2022 at 13:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/81a31ca4a8c0287bf0b0ce40f1a0df16543b7abe/src/data/nat/prime.lean">https://github.com/leanprover-community/mathlib/blob/81a31ca4a8c0287bf0b0ce40f1a0df16543b7abe/src/data/nat/prime.lean</a> this is the old version, which also isn't <code>prime</code></p>



<a name="275233426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233426">(Mar 14 2022 at 13:14)</a>:</h4>
<p>there's like a zillion things in the library that are specialised for nat just so we can get the rest of the theory going, which is annoying but I guess how it has to be</p>



<a name="275233803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275233803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275233803">(Mar 14 2022 at 13:17)</a>:</h4>
<p>Gotta start somewhere :-)</p>



<a name="275234099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275234099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275234099">(Mar 14 2022 at 13:20)</a>:</h4>
<p>It would be "neat" (and very probably terrible) if there was some sort of shim overtop "CS nat" that obviated this for folks like me, but I guess if mathlib is C in this analogy,  this would be asking for Python [or your even higher level language of choice]</p>



<a name="275236368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275236368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275236368">(Mar 14 2022 at 13:39)</a>:</h4>
<p>Anyway, <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> removed the <code>open_locale classical</code>'s. They showed up early due to an auxiliary function.</p>



<a name="275236371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275236371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275236371">(Mar 14 2022 at 13:39)</a>:</h4>
<p><a href="https://github.com/khwilson/squarefree_asymptotics/pull/2">https://github.com/khwilson/squarefree_asymptotics/pull/2</a></p>



<a name="275236688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275236688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275236688">(Mar 14 2022 at 13:42)</a>:</h4>
<p>Before disappearing to the day job, the contributing notice for mathlib notes that I'm supposed to "ask for write access to non-master branches of the mathlib repository." Where do I ask this question? (If it is here, I'm <code>khwilson</code> on github. :-) )</p>



<a name="275237530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275237530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275237530">(Mar 14 2022 at 13:48)</a>:</h4>
<p>Let me see if I am able to do it with my phone</p>



<a name="275237805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275237805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275237805">(Mar 14 2022 at 13:51)</a>:</h4>
<p>You should have an invitation</p>



<a name="275238036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275238036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275238036">(Mar 14 2022 at 13:52)</a>:</h4>
<p>Invitation received! Thank you!</p>



<a name="275238125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275238125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275238125">(Mar 14 2022 at 13:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="474023">Kevin Wilson</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/275236368">said</a>:</p>
<blockquote>
<p>Anyway, <span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> removed the <code>open_locale classical</code>'s. They showed up early due to an auxiliary function.</p>
</blockquote>
<p>If you need classical assumptions (e.g. decidability) in the statement of a theorem or definition, put them in explicltly; if you just need them in a proof, use the <code>classical</code> tactic beforehand. That's the (simplified version of the) modern mantra.</p>



<a name="275238413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275238413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275238413">(Mar 14 2022 at 13:55)</a>:</h4>
<p>Makes a lot of sense. As you can see from the start of this thread, decidability was a lot to grok early on! ("Why is this red squiggly appearing just because I wrote <code>ite</code> ?!?! )</p>



<a name="275242906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275242906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275242906">(Mar 14 2022 at 14:25)</a>:</h4>
<p>It seems like redefining <a href="http://nat.prime">nat.prime</a> := prime might be workable after all - I'll see if I have time to work it out thus week</p>



<a name="275244365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275244365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275244365">(Mar 14 2022 at 14:37)</a>:</h4>
<p>I'd argue that <code>nat.prime</code> and <code>prime</code> are different definitions in mathematics too, as reflected in almost any number theory book (e.g., Apostol). That is, if you say "the definition of <code>nat.prime</code> is is really the definition for <code>irreducible</code> in a more general context", I think this will ring a bell for most mathematicians.</p>



<a name="275245901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275245901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275245901">(Mar 14 2022 at 14:48)</a>:</h4>
<p>It's unfortunate that what we call a prime number in primary school is actually an irreducible element in N. But that's life I guess</p>



<a name="275246579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275246579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275246579">(Mar 14 2022 at 14:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="325367">Mauricio Collares</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/275244365">said</a>:</p>
<blockquote>
<p>I'd argue that <code>nat.prime</code> and <code>prime</code> are different definitions in mathematics too, as reflected in almost any number theory book (e.g., Apostol). That is, if you say "the definition of <code>nat.prime</code> is is really the definition for <code>irreducible</code> in a more general context", I think this will ring a bell for most mathematicians.</p>
</blockquote>
<p>sure, but they're equivalent, and considering we have <code>prime.irreducible</code> things work out pretty nicely in the general case</p>



<a name="275286826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275286826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275286826">(Mar 14 2022 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/275232935">said</a>:</p>
<blockquote>
<p><code>nat.prime</code> is about naturals, <code>prime</code> is a far more general algebraic concept which works for commutative rings and has a different definition. This is why you need <code>nat.prime_iff</code> to glue the two concepts together.</p>
<p>It's not for me to say why definitions are as they are. Perhaps historical? <code>nat.prime</code> was defined by the computer scientists before we mathematicians came along telling them that there was a far more general concept of primality?</p>
</blockquote>
<p>I very much doubt "computer science" motivations are at play here. Most likely this is something like <span class="user-mention silent" data-user-id="110865">Jeremy Avigad</span> wanting simple proofs about primality like <code>exists_infinite_primes</code> to actually be comprehensible as an introductory example to first-year students. This tends not to last long before being refactored away in current mathlib, though.</p>



<a name="275467452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275467452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275467452">(Mar 16 2022 at 04:54)</a>:</h4>
<p>OK, I have started migrating various lemmas over to mathlib with some success (two PRs in!). But in the process I figured I'd try to generalize and simplify various things. Then I hit a weird issue I'm not sure how to debug. Specifically, I need the following lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter</span>
<span class="kn">import</span> <span class="n">topology.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">topology.instances.real</span>
<span class="kn">import</span> <span class="n">order</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">filter</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="kd">lemma</span> <span class="n">real_tendsto_implies_nat_tendsto</span>
<span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span>
<span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span>
<span class="n">filter.tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">filter.tendsto_at_top'</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">filter.tendsto_at_top'</span> <span class="n">at</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">hf</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">use</span> <span class="bp">⌈</span><span class="n">a</span><span class="bp">⌉₊</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">ha</span> <span class="bp">↑</span><span class="n">b</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">hb</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">⌈</span><span class="n">a</span><span class="bp">⌉₊</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hb</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="bp">↑</span><span class="n">b</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">a</span> <span class="bp">≤</span> <span class="bp">↑⌈</span><span class="n">a</span><span class="bp">⌉₊</span> <span class="o">:</span> <span class="n">nat.le_ceil</span> <span class="n">a</span>
      <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">↑</span><span class="n">b</span> <span class="o">:</span> <span class="n">nat.cast_le.mpr</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">ha</span> <span class="n">this</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Of course, this should be true for basically anything where all the elements are defined, so I attempted to do the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter</span>
<span class="kn">import</span> <span class="n">topology.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">topology.instances.real</span>
<span class="kn">import</span> <span class="n">order</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">filter</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="kd">lemma</span> <span class="n">real_tendsto_implies_nat_tendsto'</span>
  <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">linear_ordered_semiring</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">order_closed_topology</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">filter.tendsto_at_top'</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="c1">-- Fails</span>
  <span class="n">rw</span> <span class="n">filter.tendsto_at_top'</span> <span class="n">at</span> <span class="n">hf</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>This seemed odd, so I did some experimentation and it seems to be failing with a bit of a strange (to me!) error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter</span>
<span class="kn">import</span> <span class="n">topology.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">topology.instances.real</span>
<span class="kn">import</span> <span class="n">order</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">filter</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="kd">lemma</span> <span class="n">real_tendsto_implies_nat_tendsto''</span>
  <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">aa</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">bb</span> <span class="o">:</span> <span class="n">semilattice_sup</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">linear_ordered_semiring</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">order_closed_topology</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">filter.tendsto_at_top'</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span>
  <span class="c1">-- Fails with detailed error</span>
  <span class="c1">-- type mismatch at application</span>
  <span class="c1">--   tendsto_at_top'.mp hf</span>
  <span class="c1">-- term</span>
  <span class="c1">--   hf</span>
  <span class="c1">-- has type</span>
  <span class="c1">--   @tendsto α β f</span>
  <span class="c1">--     (@at_top α</span>
  <span class="c1">--       (@partial_order.to_preorder α</span>
  <span class="c1">--           (@ordered_cancel_add_comm_monoid.to_partial_order α</span>
  <span class="c1">--             (@ordered_semiring.to_ordered_cancel_add_comm_monoid α</span>
  <span class="c1">--                 (@linear_ordered_semiring.to_ordered_semiring α _inst_1)))))</span>
  <span class="c1">--     (𝓝 a)</span>
  <span class="c1">-- but is expected to have type</span>
  <span class="c1">--   @tendsto α β f (@at_top α (@partial_order.to_preorder α (@semilattice_sup.to_partial_order α bb))) (𝓝 a)</span>
  <span class="k">let</span> <span class="n">foo</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">filter.tendsto_at_top'</span> <span class="n">α</span> <span class="n">β</span> <span class="n">aa</span> <span class="n">bb</span> <span class="n">f</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">))</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hf</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Which I interpret as an issue that the preorder can arise either from the explicit <code>semilattice_sup</code> or the implicit <code>linear_order</code>coming from a <code>linear_ordered_ring</code>. This works fine for <code>α = ℝ</code> because <code>ℝ</code>'s <code>semilattice_sup</code> structure explicitly comes from its <code>linear_order</code> structure <a href="https://leanprover-community.github.io/mathlib_docs/data/real/basic.html#real.semilattice_sup">https://leanprover-community.github.io/mathlib_docs/data/real/basic.html#real.semilattice_sup</a></p>
<p>So my question is: what's the right way to specify, "I mean things where the <code>semilattice_sup</code> structure comes from the <code>linear_order</code> structure?"</p>
<p>Thanks again!</p>



<a name="275469498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275469498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275469498">(Mar 16 2022 at 05:41)</a>:</h4>
<p><span class="user-mention" data-user-id="474023">@Kevin Wilson</span> To jump immediately to your original motivation:</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">real_tendsto_implies_nat_tendsto</span>
  <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">filter.tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">hf.comp</span> <span class="n">tendsto_coe_nat_at_top_at_top</span>
</code></pre></div>
</div></div>



<a name="275469853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275469853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275469853">(Mar 16 2022 at 05:48)</a>:</h4>
<p>And to answer the question you asked:  <code>linear_order</code> implies <code>semilattice_sup</code>, so you can assume just the former and the latter will be silently inferred where needed.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">semilattice_sup</span> <span class="n">α</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="275512820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275512820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275512820">(Mar 16 2022 at 13:52)</a>:</h4>
<p><code>example</code> is the keyword! Very cool :-)</p>
<p>As for the spoiler proof, that's amazing. Half the battle is searching for the right lemma :-)</p>
<p>Though, notably, the lemma I wrote supposes a <code>linear_ordered_semiring</code>, whereas <code>archimedean</code> (an assumption of <code>tendsto_coe_nat_at_top_at_top</code>) implies <code>floor_ring</code>(<a href="https://leanprover-community.github.io/mathlib_docs/algebra/order/archimedean.html#archimedean.floor_ring">https://leanprover-community.github.io/mathlib_docs/algebra/order/archimedean.html#archimedean.floor_ring</a>).</p>



<a name="275539396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275539396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275539396">(Mar 16 2022 at 16:35)</a>:</h4>
<p><span class="user-mention" data-user-id="474023">@Kevin Wilson</span> I think it's the other way, right?  <code>floor_ring</code> implies <code>archimedean</code>.  And the lemma <code>tendsto_coe_nat_at_top_at_top</code> is stated for <code>archimedean</code>, the weaker one, so it applies for (eg) the nonnegative reals, too.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.nnreal</span>
<span class="kn">import</span> <span class="n">order.filter.archimedean</span>

<span class="n">open_locale</span> <span class="n">nnreal</span>
<span class="kn">open</span> <span class="n">filter</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">))</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span> <span class="n">tendsto_coe_nat_at_top_at_top</span>
</code></pre></div>



<a name="275540562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275540562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275540562">(Mar 16 2022 at 16:42)</a>:</h4>
<p>No, Heather. <code>archimedean</code> also noncomputably imply <code>floor_ring</code>.</p>



<a name="275542072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275542072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275542072">(Mar 16 2022 at 16:52)</a>:</h4>
<p>I suspect that you can make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{R}[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> into a linear ordered ring by demanding that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">0&lt;|X|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span></span></span></span> but that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">|X|&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span> for all positive <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>, and then following your nose (I didn't check this but I think I've checked it in the past). This might well be a <code>floor_ring</code> which is not archimedean -- something for the <code>counterexamples</code> folder? (there might be simpler examples)</p>



<a name="275542578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275542578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275542578">(Mar 16 2022 at 16:55)</a>:</h4>
<p>Ridiculously, the reason I was thinking about this a few years ago was working with <span class="user-mention" data-user-id="132603">@Calle Sönne</span> on decimal expansions! He started off wanting to define them for the reals, but I pointed out that it should work for the rationals, and then we started wondering exactly which rings decimal expansions should work for, and we thought that <code>floor_ring</code>s were an excellent choice! And then realised that perhaps the decimal expansion of a number might not sum back up to the number again because of examples like this :-)</p>



<a name="275543331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275543331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275543331">(Mar 16 2022 at 16:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/275542072">said</a>:</p>
<blockquote>
<p>I suspect that you can make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{R}[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> into a linear ordered ring by demanding that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">0&lt;|X|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span></span></span></span> but that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">|X|&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span> for all positive <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>, and then following your nose (I didn't check this but I think I've checked it in the past). This might well be a <code>floor_ring</code> which is not archimedean -- something for the <code>counterexamples</code> folder? (there might be simpler examples)</p>
</blockquote>
<p>This would be a fun counterexample to try to construct using what we have in mathlib for model theory! Take an ultrapower of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> w.r.t. a nonprincipal ultrafilter on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span>, and let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>n</mi><msub><mo stretchy="false">)</mo><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\epsilon = (1/n)_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1/</span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> be an infinitesimal element in this ultrapower. Now prove that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span> is transcendental over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>, etc.</p>



<a name="275570463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275570463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275570463">(Mar 16 2022 at 20:10)</a>:</h4>
<p>Wait I'm confused now--I think there are multiple notions of archimedean here (I mean besides the p-adic related one).</p>



<a name="275570548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275570548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275570548">(Mar 16 2022 at 20:10)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/archimedean">docs#archimedean</a></p>



<a name="275570571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275570571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275570571">(Mar 16 2022 at 20:10)</a>:</h4>
<p>I would argue this isn't the definition that most people would guess</p>



<a name="275570581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275570581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275570581">(Mar 16 2022 at 20:10)</a>:</h4>
<p>Yes, have a look at the WIkipedia page.</p>



<a name="275570587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275570587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275570587">(Mar 16 2022 at 20:10)</a>:</h4>
<p>but it doesn't matter for fields</p>



<a name="275575517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275575517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275575517">(Mar 16 2022 at 20:52)</a>:</h4>
<p>To <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> , I think that is correct. All sorts of weird orderings on polynomial rings that Groebner bases make use of! See theorem 2.5 <a href="https://people.math.wisc.edu/hans/paper_archive/scanned_papers/hs021.pdf">here</a> and then take the floor to be the floor of the constant coefficient.</p>



<a name="275590078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275590078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275590078">(Mar 16 2022 at 23:25)</a>:</h4>
<p>Speaking of, <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> everything in <a href="https://github.com/leanprover-community/mathlib/blob/c459d2b5a246e2e14aebd7713daec2b71cc6c144/src/order/filter/archimedean.lean#L31">the file</a> with <code>tendsto_coe_nat_at_top_at_top</code> seems to be implied by the lemma <a href="https://leanprover-community.github.io/mathlib_docs/algebra/order/archimedean.html#exists_nat_ge"><code>exists_nat_ge</code></a>. Now this lemma is _also_ true in a <code>floor_semiring</code> (just take the <code>ceil</code> of an element and use the Galois connection).</p>
<p>I don't actually use this lemma at this level of generality, but I'm happy while I'm here to swap out the lemmas in the file to use this (slightly) more general lemma. However, as <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> pointed out, archimedean rings are only _noncomputably_ <code>floor_ring</code>s. I honestly do not know the implications of this for the library, so I'm also happy _not_ to do this and just use Heather's trick for my purposes!</p>



<a name="275591681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275591681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275591681">(Mar 16 2022 at 23:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20.28.2B.20a.20question.20on.20small.20examples.29/near/275542072">said</a>:</p>
<blockquote>
<p>I suspect that you can make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\mathbb{R}[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> into a linear ordered ring by demanding that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">0&lt;|X|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span></span></span></span> but that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>X</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">|X|&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span> for all positive <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>, and then following your nose</p>
</blockquote>
<p>This is just the lexicographic order on R^(order_dual N) (restricted to finsupp), right?</p>



<a name="275591742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/275591742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#275591742">(Mar 16 2022 at 23:49)</a>:</h4>
<p><span class="user-mention" data-user-id="474023">@Kevin Wilson</span> Please go ahead!  I (I'll even say "we") don't care about noncomputability at all.</p>



<a name="276744360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744360">(Mar 26 2022 at 20:32)</a>:</h4>
<p>Hi again! I've now gotten several PRs merged, including the fact that <code>sqrt 1 = 1</code> and Moebius function is multiplicative! Always amazing to be a first time contributor to a project :-)</p>
<p>A quick question as I continue slowly merging in these 3kloc: I still have a lot of lemmas that I couldn't find a good representation of in mathlib but which are very useful for analytic number theory. For instance, these two:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">integral_tendsto_of_has_deriv_at</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="n">f'</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hderiv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">Ici</span> <span class="n">a</span><span class="o">,</span> <span class="n">has_deriv_at</span> <span class="n">f</span> <span class="o">(</span><span class="n">f'</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hvanish</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="n">b</span><span class="o">))</span>
  <span class="o">(</span><span class="n">hint</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">Ici</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">interval_integrable</span> <span class="n">f'</span> <span class="n">volume</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="n">y</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f'</span> <span class="n">y</span><span class="o">)</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>
<p>and its consequence:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">integral_rpow_tendsto_at_top</span> <span class="o">(</span><span class="n">a</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="mi">1</span><span class="o">):</span>
<span class="n">tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">a..y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">r</span><span class="o">)</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">𝓝</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span> <span class="bp">^</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>
<p>My general question: What is the etiquette for figuring out _where_ a lemma should go? E.g., should I just continue posting on this now very long thread, or should I post in something like "Is there code for X?"</p>
<p>And a follow up: If this is the appropriate forum, where's the best place to put those above lemmas? :-)</p>
<p>Thanks again!</p>



<a name="276744398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744398">(Mar 26 2022 at 20:33)</a>:</h4>
<p>A great way to figure this out is to look up the lemmas you used in the proof and see whether you can stick yours in their file.</p>



<a name="276744617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744617">(Mar 26 2022 at 20:38)</a>:</h4>
<p>Thanks! That's been my strategy so far, but this one had me a little stumped b/c OTOH, it's basically identical to a lemma in the <a href="https://leanprover-community.github.io/mathlib_docs/find/interval_integral">docs#interval_integral</a> and OTOH, there's an entire file <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_theory.ae_cover">docs#measure_theory.ae_cover</a> which is sort of meant to handle these things.</p>
<p>Is it better to "take a guess" and post a PR and discuss there, or would you all prefer a discussion on Zulip?</p>



<a name="276744631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744631">(Mar 26 2022 at 20:39)</a>:</h4>
<p>Asking doesn't hurt <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="276744695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744695">(Mar 26 2022 at 20:40)</a>:</h4>
<p>:-)</p>



<a name="276744716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744716">(Mar 26 2022 at 20:41)</a>:</h4>
<p>(Also, sorry about the docs links, was trying to figure out how exactly they worked!)</p>
<p>In the spirit of asking, do y'all have a preference before I make a PR for those two lemmas?</p>



<a name="276744950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276744950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276744950">(Mar 26 2022 at 20:46)</a>:</h4>
<p>Personally, no. The measure theory library is quite alien to me! <span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> will have opinions, however.</p>



<a name="276745173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Kevin%20Wilson%3A%20Introduction%20%28%2B%20a%20question%20on%20small%20examples%29/near/276745173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Wilson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Kevin.20Wilson.3A.20Introduction.20(.2B.20a.20question.20on.20small.20examples).html#276745173">(Mar 26 2022 at 20:52)</a>:</h4>
<p>Excellent. I'll wait for a ruling before barging ahead on those!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>