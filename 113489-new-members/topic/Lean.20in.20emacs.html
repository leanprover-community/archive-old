---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20in.20emacs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html">Lean in emacs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200892858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200892858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200892858">(Jun 15 2020 at 14:03)</a>:</h4>
<p>Is there a good way to use Emacs and lean-mode with mathlib? I'm pretty sure I haven't got it working properly yet.  For the first example in _Mathematics in Lean_ &lt;<a href="https://leanprover-community.github.io/mathematics_in_lean/introduction.html#overview">https://leanprover-community.github.io/mathematics_in_lean/introduction.html#overview</a>&gt; , I get</p>
<div class="codehilite"><pre><span></span><code><span class="mi">7</span><span class="o">:</span><span class="mi">6</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">identifier</span> <span class="err">&#39;</span><span class="n">mul_left_comm&#39;</span>
</code></pre></div>



<a name="200902689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200902689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Earnshaw <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200902689">(Jun 15 2020 at 15:14)</a>:</h4>
<p>this is a problem with the documentation, a bunch of algebra was recently moved from core to mathlib, so you need to <code>import algebra.group.basic</code> to use <code>mul_left_comm</code></p>



<a name="200904965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200904965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200904965">(Jun 15 2020 at 15:28)</a>:</h4>
<p>The example works for me as is in VS Code and even in the web editor. Did you copy the entire code snippet?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">parity</span>
<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">even</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">even</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="n">hk</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span><span class="bp">⟩</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hmn</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">k</span><span class="o">),</span>
  <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hk</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">],</span>
<span class="k">show</span> <span class="bp">∃</span> <span class="n">l</span><span class="o">,</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">l</span><span class="o">,</span>
  <span class="k">from</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">hmn</span><span class="bp">⟩</span>
</code></pre></div>



<a name="200925617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200925617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200925617">(Jun 15 2020 at 18:11)</a>:</h4>
<p>Yes, I copied the whole snippet. <code>import algebra.group.basic</code> doesn't help, and the version of <code>mathlib</code> in my <code>_target</code> directory doesn't seem to define it anywhere</p>



<a name="200925927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200925927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200925927">(Jun 15 2020 at 18:13)</a>:</h4>
<p>What does the <code>leanpkg.toml</code> say in your <code>mathematics_in_lean</code> directory? Mine says this:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[package]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;mathematics_in_lean_source&quot;</span>
<span class="n">version</span> <span class="o">=</span> <span class="s">&quot;0.1&quot;</span>
<span class="n">lean_version</span> <span class="o">=</span> <span class="s">&quot;leanprover-community/lean:3.14.0&quot;</span>
<span class="n">path</span> <span class="o">=</span> <span class="s">&quot;src&quot;</span>

<span class="k">[dependencies]</span>
<span class="n">mathlib</span> <span class="o">=</span> <span class="p">{</span><span class="n">git</span> <span class="o">=</span> <span class="s">&quot;https://github.com/leanprover-community/mathlib&quot;</span><span class="p">,</span> <span class="n">rev</span> <span class="o">=</span> <span class="s">&quot;e9ba32d122e65de435e8a3c78a34992c3b506cb3&quot;</span><span class="p">}</span>
</code></pre></div>



<a name="200926002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200926002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200926002">(Jun 15 2020 at 18:14)</a>:</h4>
<p>which I guess agrees with the latest master on github: <a href="https://github.com/leanprover-community/mathematics_in_lean/blob/master/leanpkg.toml">https://github.com/leanprover-community/mathematics_in_lean/blob/master/leanpkg.toml</a></p>



<a name="200926193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200926193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200926193">(Jun 15 2020 at 18:16)</a>:</h4>
<p>I have a different rev. pasting in your rev...</p>



<a name="200927053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200927053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200927053">(Jun 15 2020 at 18:23)</a>:</h4>
<p>same error message still. hmm.</p>



<a name="200927708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200927708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200927708">(Jun 15 2020 at 18:29)</a>:</h4>
<p>(did you paste in the rev _and_ have leanproject update your _target folder to that revision?)</p>



<a name="200928619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928619">(Jun 15 2020 at 18:37)</a>:</h4>
<p>Everything I try to do from the command line says <code>[Errno 2] No such file or directory: 'leanpkg': 'leanpkg'</code></p>



<a name="200928731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928731">(Jun 15 2020 at 18:38)</a>:</h4>
<p>what about <code>leanproject -h</code>?</p>



<a name="200928742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928742">(Jun 15 2020 at 18:38)</a>:</h4>
<p>That works, in that it prints the help</p>



<a name="200928749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928749">(Jun 15 2020 at 18:39)</a>:</h4>
<p><code>leanproject --version</code> says 0.0.8</p>



<a name="200928767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928767">(Jun 15 2020 at 18:39)</a>:</h4>
<p>OK, I did a fresh <code>leanproject get mathematics_in_lean</code> and opened it in VS Code, and it works in Code, no errors</p>



<a name="200928820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928820">(Jun 15 2020 at 18:39)</a>:</h4>
<p>yay!</p>



<a name="200928914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200928914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200928914">(Jun 15 2020 at 18:40)</a>:</h4>
<p>It did a <code>leanpkg configure</code> that I don't know how to do myself</p>



<a name="200929013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929013">(Jun 15 2020 at 18:41)</a>:</h4>
<p>i'd guess that if want to type <code>leanpkg configure</code> then in fact you're always happy to type <code>leanproject build</code> instead</p>



<a name="200929194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929194">(Jun 15 2020 at 18:43)</a>:</h4>
<p>I think that if you just use <code>leanproject get</code>, <code>leanproject new</code>, and <code>leanproject up</code>, and don't manually mess with <code>*.olean</code> or <code>_target</code>, then you don't run into problems.</p>



<a name="200929460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929460">(Jun 15 2020 at 18:45)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">$</span> <span class="n">leanproject</span> <span class="n">new</span> <span class="n">example2</span>
<span class="o">[</span><span class="n">Errno</span> <span class="mi">2</span><span class="o">]</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="n">or</span> <span class="n">directory</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">leanpkg&#39;</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">leanpkg&#39;</span>
</code></pre></div>



<a name="200929596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929596">(Jun 15 2020 at 18:46)</a>:</h4>
<p>weird I feel like leanproject needs to do the same sorts of work when it runs <code>new</code> and when it runs <code>get</code></p>



<a name="200929770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929770">(Jun 15 2020 at 18:48)</a>:</h4>
<p><code>leanpkg</code> was not in my $PATH</p>



<a name="200929935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200929935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200929935">(Jun 15 2020 at 18:50)</a>:</h4>
<p><code>leanproject new</code> works now...</p>



<a name="200930183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200930183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200930183">(Jun 15 2020 at 18:52)</a>:</h4>
<p>The example works in emacs! So happy</p>



<a name="200930497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20in%20emacs/near/200930497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20in.20emacs.html#200930497">(Jun 15 2020 at 18:55)</a>:</h4>
<p>thanks for being there :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>