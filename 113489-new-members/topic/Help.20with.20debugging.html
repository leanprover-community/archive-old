---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Help.20with.20debugging.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html">Help with debugging</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="285845615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285845615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285845615">(Jun 12 2022 at 14:30)</a>:</h4>
<p>Hello,</p>
<p>I have a goal and a hypothesis that appears to be exactly the same as the goal, yet when I use the exact tactic, I end up with a "deterministic (timeout)" error, and if I use rw it gives an error where it doesn't find an instance of the hypothesis, even though they appear to be the same. Is there a way to better examine the hypothesis and goal to see where they exactly differ? I was also wondering if there was a way to see exactly how long Lean is taking with each line. I've noticed that the proof I'm working on now takes a lot longer to compile and is sluggish to work in compared to other stuff I've worked on. I've even commented out all of my "have" proofs with sorry but that doesn't fix the sluggishness. I've had a problem before where Lean had a timeout error because it didn't properly compile a comment and I wanted to see how long Lean was taking with each line to see if I could pinpoint the problem.</p>



<a name="285846057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285846057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285846057">(Jun 12 2022 at 14:41)</a>:</h4>
<p>You can click around on the term in the info-view to zoom in and try and see differences in the implicit arguments. Setting <code>set_option pp.all true</code> will show you everything, which is sometimes overwhelming, but the ultimate way to see what lean sees.<br>
You might also want to try <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#convert">tactic#convert</a>, to get goals for the differences between the hypothesis and original goal.<br>
If you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> here people can try and help more.</p>



<a name="285846585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285846585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285846585">(Jun 12 2022 at 14:54)</a>:</h4>
<p>Thank you! I will look at that setting. How do I turn that on? Is it something I type in my proof?</p>



<a name="285846834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285846834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285846834">(Jun 12 2022 at 14:59)</a>:</h4>
<p>Just before the lemma statement</p>



<a name="285846841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285846841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285846841">(Jun 12 2022 at 14:59)</a>:</h4>
<p>E.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">set_option</span> <span class="n">pp.all</span> <span class="n">true</span>

<span class="kd">lemma</span> <span class="n">hi</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="285848429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285848429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285848429">(Jun 12 2022 at 15:39)</a>:</h4>
<p>Before getting your hands dirty with pp.all I would try <code>convert h</code> if the type of <code>h</code> looks identical to the goal. This will give you new goals indicating where the types diverged.</p>



<a name="285848971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285848971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285848971">(Jun 12 2022 at 15:55)</a>:</h4>
<p>So i tried convert h and I still get a (deterministic) timeout error. Do I need to allocate more resources to Lean?</p>



<a name="285849210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285849210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285849210">(Jun 12 2022 at 16:01)</a>:</h4>
<p>If I create a minimum working example by copying over the hypothesis and goal, convert h works perfectly. So, my guess is theres another underlying problem in my code that is messing things up and causing the timeout error</p>



<a name="285849568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285849568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285849568">(Jun 12 2022 at 16:09)</a>:</h4>
<p>If you put <code>pp.all</code> on then you'll see that what you see as an end user is sometimes only a very small percentage of what the term actually is; there are all sorts of things which are suppressed by default. I don't know what you mean by "copying the goal" but unless you're copying it with pp.all on, you have no guarantee that what you're copying is what the goal really is. I wouldn't bother allocating more resources to Lean -- why not post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ?</p>



<a name="285849789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285849789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285849789">(Jun 12 2022 at 16:15)</a>:</h4>
<p>What happens if after the <code>exact h</code> you put another tactic, like <code>sorry</code>?</p>



<a name="285850491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285850491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285850491">(Jun 12 2022 at 16:33)</a>:</h4>
<p>I worked on creating a mwe. I took out the hypothesises needed for my have statements and sorryed them out and no longer go a timeout error. So, I think I know where Lean is having a problem. With convert, I now see how the two differ. Here is the mwe</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">analysis.calculus.fderiv</span>
<span class="kn">import</span> <span class="n">analysis.calculus.deriv</span>
<span class="kn">import</span> <span class="n">measure_theory.integral.interval_integral</span>
<span class="kn">import</span> <span class="n">analysis.calculus.parametric_integral</span>
<span class="kn">import</span> <span class="n">measure_theory.function.strongly_measurable</span>
<span class="kn">import</span> <span class="n">measure_theory.integral.divergence_theorem</span>

<span class="kn">open</span> <span class="n">topological_space</span> <span class="n">measure_theory</span> <span class="n">filter</span> <span class="n">metric</span>
<span class="n">open_locale</span> <span class="n">big_operators</span> <span class="n">topological_space</span> <span class="n">filter</span> <span class="n">interval</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℝ</span><span class="bp">³`</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℝ</span><span class="bp">²</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="c1">--set_option pp.all true</span>
<span class="kd">theorem</span> <span class="n">some_name</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure_theory.measure</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span>
<span class="o">{</span><span class="n">V1</span> <span class="n">V2</span> <span class="n">V</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)}{</span><span class="n">t0</span> <span class="n">ε</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">]</span>
<span class="o">{</span><span class="n">ρ</span> <span class="n">ρ'</span><span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">³</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}{</span><span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}(</span><span class="n">hV</span> <span class="o">:</span> <span class="n">V1</span> <span class="bp">≤</span> <span class="n">V2</span><span class="o">)</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">}{</span><span class="n">F'</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">}</span>
<span class="o">(</span><span class="n">hM</span> <span class="o">:</span><span class="n">M</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span><span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,(</span><span class="n">ρ</span> <span class="n">t</span> <span class="n">V</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span>
<span class="c1">--differential form of the continuity equation</span>
<span class="o">(</span><span class="n">DiffCont</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="n">M</span> <span class="n">t</span> <span class="bp">=</span> <span class="bp">-</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)),</span> <span class="o">((</span><span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V2</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span>  <span class="bp">-</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V1</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span>
<span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span> <span class="bp">+</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="bp">∑</span><span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span><span class="o">),</span> <span class="o">(</span><span class="n">F'</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">pi.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">hM'</span> <span class="o">:</span>  <span class="n">deriv</span> <span class="n">M</span> <span class="n">t0</span> <span class="bp">=</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,(</span><span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="o">(</span><span class="n">ρ'</span> <span class="n">t0</span><span class="o">)</span> <span class="n">μ</span> <span class="n">V1</span> <span class="n">V2</span> <span class="bp">∧</span> <span class="n">has_deriv_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ</span> <span class="n">t</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span> <span class="o">(</span><span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span> <span class="n">t0</span><span class="o">,</span>
      <span class="o">{</span>
        <span class="gr">sorry</span><span class="o">,</span>
      <span class="o">},</span>
    <span class="n">rw</span> <span class="n">hM</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">has_deriv_at.deriv</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">h3</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">specialize</span> <span class="n">DiffCont</span> <span class="n">t0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hM'</span> <span class="n">at</span> <span class="n">DiffCont</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">DiffCont'</span> <span class="o">:</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span> <span class="bp">=</span> <span class="bp">-∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="n">finset.univ.sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span><span class="o">),</span> <span class="o">(</span><span class="n">F'</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">pi.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="n">i</span><span class="o">),</span>
  <span class="o">{</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="n">interval_integral.integral_of_le</span> <span class="n">at</span> <span class="n">DiffCont'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc</span> <span class="n">at</span> <span class="n">DiffCont'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">add_eq_zero_iff_eq_neg</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">DiffCont'</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="285850523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285850523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285850523">(Jun 12 2022 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Help.20with.20debugging/near/285849789">said</a>:</p>
<blockquote>
<p>What happens if after the <code>exact h</code> you put another tactic, like <code>sorry</code>?</p>
</blockquote>
<p>I still get the timeout error, but from my post above, I think theres something funny happening in my have statements</p>



<a name="285850552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285850552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285850552">(Jun 12 2022 at 16:35)</a>:</h4>
<p>this is the full proof</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">--The continuity equation for mass over a control volume</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">analysis.calculus.fderiv</span>
<span class="kn">import</span> <span class="n">analysis.calculus.deriv</span>
<span class="kn">import</span> <span class="n">measure_theory.integral.interval_integral</span>
<span class="kn">import</span> <span class="n">analysis.calculus.parametric_integral</span>
<span class="kn">import</span> <span class="n">measure_theory.function.strongly_measurable</span>
<span class="kn">import</span> <span class="n">measure_theory.integral.divergence_theorem</span>
<span class="kn">open</span> <span class="n">topological_space</span> <span class="n">measure_theory</span> <span class="n">filter</span> <span class="n">metric</span>
<span class="n">open_locale</span> <span class="n">big_operators</span> <span class="n">topological_space</span> <span class="n">filter</span> <span class="n">interval</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℝ</span><span class="bp">³`</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℝ</span><span class="bp">²</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="c1">--set_option pp.all true</span>
<span class="kd">theorem</span> <span class="n">some_name</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure_theory.measure</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span>
<span class="o">{</span><span class="n">V1</span> <span class="n">V2</span> <span class="n">V</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)}{</span><span class="n">t0</span> <span class="n">ε</span><span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">]</span> <span class="o">(</span><span class="n">ε_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">)</span> <span class="o">{</span><span class="n">bound</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span>
<span class="o">(</span><span class="n">ρ</span> <span class="n">ρ'</span><span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">³</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">)(</span><span class="n">M</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hV</span> <span class="o">:</span> <span class="n">V1</span> <span class="bp">≤</span> <span class="n">V2</span><span class="o">)</span>
<span class="c1">--differential form of the continuity equation</span>
<span class="o">(</span><span class="n">DiffCont</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="n">M</span> <span class="n">t</span> <span class="bp">=</span> <span class="bp">-</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)),</span> <span class="o">((</span><span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V2</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span>  <span class="bp">-</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V1</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">))</span>

<span class="c1">--stuff for hM'</span>
<span class="o">(</span><span class="n">hρ_meas</span> <span class="o">:</span> <span class="bp">∀ᶠ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">nhds</span> <span class="n">t0</span><span class="o">,</span> <span class="n">ae_measurable</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">μ.restrict</span> <span class="o">(</span><span class="n">set.interval_oc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">)))</span>
<span class="o">(</span><span class="n">hρ_int</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">t0</span><span class="o">)</span> <span class="n">μ</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">)</span>
<span class="o">(</span><span class="n">hρ'_meas</span> <span class="o">:</span> <span class="n">ae_measurable</span> <span class="o">(</span><span class="n">ρ'</span> <span class="n">t0</span><span class="o">)</span> <span class="o">(</span><span class="n">μ.restrict</span> <span class="o">(</span><span class="n">set.interval_oc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">)))</span>
<span class="o">(</span><span class="n">h_bound</span> <span class="o">:</span> <span class="bp">∀ᵐ</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">,</span> <span class="n">V</span> <span class="bp">∈</span> <span class="n">set.interval_oc</span> <span class="n">V1</span> <span class="n">V2</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">∈</span> <span class="n">metric.ball</span> <span class="n">t0</span> <span class="n">ε</span> <span class="bp">→</span> <span class="bp">∥</span><span class="n">ρ'</span> <span class="n">t</span> <span class="n">V</span><span class="bp">∥</span> <span class="bp">≤</span> <span class="n">bound</span> <span class="n">V</span><span class="o">)</span>
<span class="o">(</span><span class="n">bound_integrable</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="n">bound</span> <span class="n">μ</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">)</span>
<span class="o">(</span><span class="n">h_diff</span> <span class="o">:</span> <span class="bp">∀ᵐ</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">,</span> <span class="n">V</span> <span class="bp">∈</span> <span class="n">set.interval_oc</span> <span class="n">V1</span> <span class="n">V2</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">t</span> <span class="bp">∈</span> <span class="n">ball</span> <span class="n">t0</span> <span class="n">ε</span> <span class="bp">→</span> <span class="n">has_deriv_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">t</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">ρ'</span> <span class="n">t</span> <span class="n">V</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span>

<span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="c1">-- flux of our fluid</span>
<span class="o">(</span><span class="n">F'</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="c1">-- a partial derivatvie of our vector</span>
<span class="c1">--define how our flux term F relates to density and velocity</span>

<span class="c1">--define how mass relates to density</span>
<span class="o">(</span><span class="n">hM</span> <span class="o">:</span><span class="n">M</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span><span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,(</span><span class="n">ρ</span> <span class="n">t</span> <span class="n">V</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span> <span class="c1">--Mass of control volume at time t is equal to triple integral</span>
<span class="c1">-- of density at time t over the control volume</span>
<span class="c1">--(hM' : ∀ (t:ℝ), fderiv ℝ M t = ∫(V : ℝ³) in set.Icc V1 V2, (fderiv ℝ ρ t) V) --the time derivative version of hM</span>

<span class="c1">--stuff for divergence theorem</span>
<span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">ℝ</span><span class="bp">³</span><span class="o">))</span> <span class="c1">-- set of ℝ³ whcih are the variables of our function (like our dimensions mass can flow)</span>
<span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">s.countable</span><span class="o">)</span> <span class="c1">-- the set is finite (we don't have infinite dimensions)</span>
<span class="o">(</span><span class="n">Hc</span> <span class="o">:</span> <span class="n">continuous_on</span> <span class="n">F</span> <span class="o">(</span><span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">))</span> <span class="c1">--Our function is continous inside the control volume</span>
<span class="c1">-- Hd says that f is differentiable on the interior</span>
<span class="o">(</span><span class="n">Hd</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">set.pi</span> <span class="n">set.univ</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)),</span> <span class="n">set.Ioo</span> <span class="o">(</span><span class="n">V1</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">V2</span> <span class="n">i</span><span class="o">))</span> <span class="bp">\</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">has_fderiv_at</span> <span class="n">F</span> <span class="o">(</span><span class="n">F'</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
<span class="c1">-- Hi defines the divergence and says it is integrable on our control volume</span>
<span class="o">(</span><span class="n">Hi</span> <span class="o">:</span><span class="n">measure_theory.integrable_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">),</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)),</span> <span class="o">(</span><span class="n">F'</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">pi.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">)</span> <span class="n">volume</span><span class="o">)</span>

<span class="c1">--differential form of the continuity equation</span>
<span class="o">(</span><span class="n">DiffCont</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">deriv</span> <span class="n">M</span> <span class="n">t</span> <span class="bp">=</span> <span class="bp">-</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">3</span><span class="o">)),</span> <span class="o">((</span><span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V2</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span>  <span class="bp">-</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="o">(</span><span class="n">V1</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">))</span> <span class="o">(</span><span class="n">V2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">i.succ_above</span><span class="o">)),</span> <span class="n">F</span> <span class="o">(</span><span class="n">i.insert_nth</span> <span class="o">(</span><span class="n">V1</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span>
<span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span> <span class="bp">+</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="bp">∑</span><span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span><span class="o">),</span> <span class="o">(</span><span class="n">F'</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">pi.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">hM'</span> <span class="o">:</span>  <span class="n">deriv</span> <span class="n">M</span> <span class="n">t0</span> <span class="bp">=</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,(</span><span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span><span class="o">)</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="o">(</span><span class="n">ρ'</span> <span class="n">t0</span><span class="o">)</span> <span class="n">μ</span> <span class="n">V1</span> <span class="n">V2</span> <span class="bp">∧</span> <span class="n">has_deriv_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ</span> <span class="n">t</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span> <span class="o">(</span><span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span><span class="o">)</span> <span class="n">t0</span><span class="o">,</span>
      <span class="o">{</span>
        <span class="n">rw</span> <span class="bp">←</span> <span class="n">ae_restrict_iff</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
        <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">interval_integrable_iff</span><span class="o">,</span> <span class="n">interval_integral.interval_integral_eq_integral_interval_oc</span><span class="o">,</span> <span class="bp">←</span> <span class="n">ae_restrict_iff</span> <span class="n">measurable_set_interval_oc</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
        <span class="k">have</span> <span class="o">:=</span> <span class="n">has_deriv_at_integral_of_dominated_loc_of_deriv_le</span> <span class="n">ε_pos</span> <span class="n">hρ_meas</span> <span class="n">hρ_int</span> <span class="n">hρ'_meas</span> <span class="n">h_bound</span> <span class="n">bound_integrable</span> <span class="n">h_diff</span><span class="o">,</span>
        <span class="n">exact</span> <span class="o">⟨</span><span class="n">this.1</span><span class="o">,</span> <span class="n">this.2.const_smul</span> <span class="n">_</span><span class="o">⟩,</span>
        <span class="gr">sorry</span><span class="o">,</span>
        <span class="gr">sorry</span><span class="o">,</span>
      <span class="o">},</span>
    <span class="n">rw</span> <span class="n">hM</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">has_deriv_at.deriv</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">h3</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">specialize</span> <span class="n">DiffCont</span> <span class="n">t0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hM'</span> <span class="n">at</span> <span class="n">DiffCont</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">DiffCont'</span> <span class="o">:</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">V1..V2</span><span class="o">,</span> <span class="n">ρ'</span> <span class="n">t0</span> <span class="n">V</span> <span class="bp">∂</span><span class="n">μ</span> <span class="bp">=</span> <span class="bp">-∫</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">³</span><span class="o">)</span> <span class="k">in</span> <span class="n">set.Icc</span> <span class="n">V1</span> <span class="n">V2</span><span class="o">,</span> <span class="n">finset.univ.sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span><span class="o">),</span> <span class="o">(</span><span class="n">F'</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">pi.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="n">i</span><span class="o">),</span>
  <span class="o">{</span>
    <span class="n">rw</span> <span class="n">integral_divergence_of_has_fderiv_within_at_off_countable</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">DiffCont</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hV</span><span class="o">,</span>
    <span class="n">finish</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">Hc</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">Hd</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">Hi</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="n">interval_integral.integral_of_le</span> <span class="n">at</span> <span class="n">DiffCont'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc</span> <span class="n">at</span> <span class="n">DiffCont'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">integral_Icc_eq_integral_Ioc'</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">add_eq_zero_iff_eq_neg</span><span class="o">,</span>


<span class="kd">end</span>
</code></pre></div>



<a name="285850977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285850977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285850977">(Jun 12 2022 at 16:45)</a>:</h4>
<p>Ok, to update, it is the have DiffCont' statement that is causing the timeout error</p>



<a name="285861043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285861043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285861043">(Jun 12 2022 at 20:44)</a>:</h4>
<p>Just to note that neither of your <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> s work for me: when I copy and paste them into a fresh file I get a <code>type mismatch</code> error at line 19 in the first one, and a <code>unknown identifier 'F'</code> error at line 19 of the second.</p>



<a name="285861046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285861046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285861046">(Jun 12 2022 at 20:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="474115">Max Bobbin</span> <a href="#narrow/stream/113489-new-members/topic/Help.20with.20debugging/near/285845615">said</a>:</p>
<blockquote>
<p>I have a goal and a hypothesis that appears to be exactly the same as the goal, yet when I use the exact tactic, I end up with a "deterministic (timeout)" error</p>
</blockquote>
<p>If your hypothesis and goal were really exactly the same (as they appear) then <code>exact</code> ought to be able to close the goal (unless there's some extra complication with <code>exact</code> that I'm not aware of, which is quite possible!)  So perhaps there are details behind the scenes in the hypothesis and goal that differ.</p>
<p>Without setting <code>pp.all true</code>, you could try clicking on the goal and on the hypothesis in the Info View.  In each case you should get a pop-up showing in more verbose detail what Lean thinks these terms are.</p>



<a name="285861895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20debugging/near/285861895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Help.20with.20debugging.html#285861895">(Jun 12 2022 at 21:05)</a>:</h4>
<p>Interesting, I'm rewriting the proof now because I'm unhappy with its current state anyway. Hopefully, as I rewrite it I can fix the problems that I came across. In its current state, its too all across the place</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>