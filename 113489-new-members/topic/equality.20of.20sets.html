---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/equality.20of.20sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html">equality of sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="210181945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210181945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210181945">(Sep 15 2020 at 19:58)</a>:</h4>
<p>I feel like it should be trivial to prove (something like) the following equality, but I can't seem to do it with basic tactics and I can't seem to find anything in the library that helps. Any suggestions?</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">S₁</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">}</span>
<span class="n">def</span> <span class="n">S₂</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">3</span><span class="o">}</span>

<span class="n">def</span> <span class="n">fin_S</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">!</span><span class="o">[</span><span class="n">S₁</span><span class="o">,</span> <span class="n">S₂</span><span class="o">]</span>

<span class="n">def</span> <span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">S₁</span> <span class="err">∪</span> <span class="n">S₂</span>

<span class="n">def</span> <span class="n">sets_complete</span> <span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">,</span> <span class="n">fin_S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">sorry</span>
</code></pre></div>



<a name="210182109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210182109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210182109">(Sep 15 2020 at 19:59)</a>:</h4>
<p>Can you post an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> please? Your code doesn't work for me.</p>



<a name="210184225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210184225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210184225">(Sep 15 2020 at 20:14)</a>:</h4>
<p>edit: was not expecting that to be matrix.vec_cons</p>
<p><span class="user-mention" data-user-id="319223">@Logan Murphy</span>  sets are defined as their membership predicate, so basic equality of sets stuff comes from functional and propositional extensionality (see <code>set.ext</code>). You can find some of the definitions and lemmas in the documentation for <code>data.set</code> :<br>
<a href="https://leanprover-community.github.io/mathlib_docs/data/set/basic.html">https://leanprover-community.github.io/mathlib_docs/data/set/basic.html</a></p>



<a name="210184749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210184749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Logan Murphy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210184749">(Sep 15 2020 at 20:18)</a>:</h4>
<p>Thank you Chris, </p>
<p>Sorry Kevin, forgot my transitive imports,</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">matrix</span><span class="bp">.</span><span class="kn">notation</span>
<span class="n">def</span> <span class="n">S₁</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">}</span>
<span class="n">def</span> <span class="n">S₂</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">3</span><span class="o">}</span>

<span class="n">def</span> <span class="n">fin_S</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">!</span><span class="o">[</span><span class="n">S₁</span><span class="o">,</span> <span class="n">S₂</span><span class="o">]</span>

<span class="n">def</span> <span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">S₁</span> <span class="err">∪</span> <span class="n">S₂</span>

<span class="n">def</span> <span class="n">sets_complete</span> <span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">,</span> <span class="n">fin_S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">sorry</span>
</code></pre></div>



<a name="210189135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210189135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210189135">(Sep 15 2020 at 20:54)</a>:</h4>
<p>This boils down to proving that every term of <code>fin 2</code> is either <code>0</code> or <code>1</code> (also for arbitrary S_1, S_2). Is there a one-line proof of this?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">matrix</span><span class="bp">.</span><span class="kn">notation</span>
<span class="n">def</span> <span class="n">S₁</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">}</span>
<span class="n">def</span> <span class="n">S₂</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">3</span><span class="o">}</span>

<span class="n">def</span> <span class="n">fin_S</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">!</span><span class="o">[</span><span class="n">S₁</span><span class="o">,</span> <span class="n">S₂</span><span class="o">]</span>

<span class="n">def</span> <span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">S₁</span> <span class="err">∪</span> <span class="n">S₂</span>

<span class="kn">lemma</span> <span class="n">fin_2_eq</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="n">sets_complete</span> <span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">,</span> <span class="n">fin_S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨_</span><span class="o">,</span><span class="bp">⟨</span><span class="n">i</span><span class="o">,</span><span class="n">rfl</span><span class="bp">⟩</span><span class="o">,</span><span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">fin_2_eq</span> <span class="n">i</span> <span class="k">with</span> <span class="n">rfl</span><span class="bp">|</span><span class="n">rfl</span><span class="o">,</span>
    <span class="n">left</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">right</span><span class="o">,</span>
    <span class="n">assumption</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">h</span><span class="bp">|</span><span class="n">h</span><span class="o">),</span>
    <span class="n">use</span> <span class="n">S₁</span><span class="o">,</span>
    <span class="n">use</span> <span class="mi">0</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">S₂</span><span class="o">,</span>
    <span class="n">use</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span>
    <span class="n">assumption</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="210189527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210189527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210189527">(Sep 15 2020 at 20:57)</a>:</h4>
<p>Maybe there is a much shorter proof for <code>sets_complete</code> in your specific case where S_1 and S_2 are explicit singletons. I dont know.</p>



<a name="210191046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210191046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210191046">(Sep 15 2020 at 21:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">fin_2_eq</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">}</span>
</code></pre></div>



<a name="210191106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210191106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210191106">(Sep 15 2020 at 21:09)</a>:</h4>
<p>Ah, <code>fin_cases</code> was the tactic I was missing :)</p>



<a name="210192088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210192088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210192088">(Sep 15 2020 at 21:19)</a>:</h4>
<p>We were all missing it until Scott wrote it a few months ago</p>



<a name="210195897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210195897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210195897">(Sep 15 2020 at 21:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/equality.20of.20sets/near/210191046">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">fin_2_eq</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">}</span>
</code></pre></div>


</blockquote>
<p>I thought this was something the equation compiler could solve, but I guess not.  There needed to be a third case with a proof of impossibility:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">fin_2_eq</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">),</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">i</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="k">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h_a</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h_a_a</span> <span class="o">})</span>
</code></pre></div>



<a name="210196236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210196236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210196236">(Sep 15 2020 at 21:55)</a>:</h4>
<p>if you want good inductions, use <code>fin2</code></p>



<a name="210196777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210196777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210196777">(Sep 15 2020 at 22:01)</a>:</h4>
<p>Does <code>omega</code> do the n+2 case?</p>



<a name="210200902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210200902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210200902">(Sep 15 2020 at 22:44)</a>:</h4>
<p>Looks like <code>omega</code> can't do it</p>



<a name="210204083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210204083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210204083">(Sep 15 2020 at 23:20)</a>:</h4>
<p><code>by simp [fin.ext_iff]; omega</code> works, omega just needs a little help from simp.</p>



<a name="210204229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equality%20of%20sets/near/210204229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equality.20of.20sets.html#210204229">(Sep 15 2020 at 23:22)</a>:</h4>
<p>Actually thats a bit of a red herring I guess.</p>
<div class="codehilite"><pre><span></span><code><span class="k">by</span> <span class="n">exfalso</span><span class="bp">;</span> <span class="n">revert</span> <span class="n">h</span><span class="bp">;</span> <span class="n">omega</span>
</code></pre></div>


<p>also works.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>