---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Ambiguous.20overload.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html">Ambiguous overload</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="237940947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237940947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237940947">(May 08 2021 at 09:15)</a>:</h4>
<p>I have a little annoying thing happen every time I refer to a natural prime: <br>
ambiguous overload, possible interpretations<br>
  prime x<br>
<a href="http://nat.prime">nat.prime</a> x<br>
The only thing I find that works is to replace prime x with its definition (p ≠ 0 ∧ ¬is_unit p ∧ ∀ (a b : ℕ), p ∣ a * b → p ∣ a ∨ p ∣ b)), which is very ugly. How do I specify that I mean 'prime' and not '<a href="http://nat.prime">nat.prime</a>' is a non-ugly way?</p>



<a name="237941371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941371">(May 08 2021 at 09:22)</a>:</h4>
<p>Probably, <code>_root_.prime</code> works, but is still clunky</p>



<a name="237941393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941393">(May 08 2021 at 09:23)</a>:</h4>
<p>Does your file do <code>open nat</code> somewhere? Because if it does, maybe removing that line would help</p>



<a name="237941398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941398">(May 08 2021 at 09:23)</a>:</h4>
<p>This may be happening because you have <code>open nat</code>: removing that might also work, but then you have to explicitly say <code>nat.</code> all the time.</p>



<a name="237941474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941474">(May 08 2021 at 09:24)</a>:</h4>
<p><span class="user-mention" data-user-id="407114">@Stepan Nesterov</span> Instead of <code>nat.prime x</code> you can write <code>x.prime</code>.</p>



<a name="237941513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941513">(May 08 2021 at 09:25)</a>:</h4>
<p>So that we you can do without <code>open nat</code> and still have "nice" notation for primes in <code>nat</code></p>



<a name="237941518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237941518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237941518">(May 08 2021 at 09:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Ambiguous.20overload/near/237941393">said</a>:</p>
<blockquote>
<p>Does your file do <code>open nat</code> somewhere? Because if it does, maybe removing that line would help</p>
</blockquote>
<p>Oh yes, it did for some reason and I never noticed. Thanks!</p>



<a name="237942161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237942161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237942161">(May 08 2021 at 09:37)</a>:</h4>
<p>So next I am trying to define a set of primes up to a certain point, but<br>
'''noncomputable def primes : ℕ → finset ℕ :=<br>
λ n, filter (λ p, prime p) (range (primecount n))'''<br>
results in<br>
'''failed to synthesize type class instance for<br>
n : ℕ<br>
⊢ decidable_pred (λ (p : ℕ), prime p)'''<br>
What does that mean?</p>



<a name="237942776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237942776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237942776">(May 08 2021 at 09:47)</a>:</h4>
<p><code>filter</code> needs a decision procedure to computably work, and for some reason there doesn't seem to be one for <code>prime</code>; can you try removing the lambda abstraction and see if it works? there should be one</p>



<a name="237942968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237942968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237942968">(May 08 2021 at 09:50)</a>:</h4>
<p>There might be one for <code>nat.prime</code>, not <code>_root_.prime</code></p>



<a name="237942979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237942979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237942979">(May 08 2021 at 09:51)</a>:</h4>
<p>How do I remove the lambda-abstraction? filter requires a function as an input</p>



<a name="237943005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943005">(May 08 2021 at 09:51)</a>:</h4>
<p>just write <code>prime</code> instead of <code>λ p, prime p</code></p>



<a name="237943006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943006">(May 08 2021 at 09:51)</a>:</h4>
<p>but I fear Ruben is right</p>



<a name="237943097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943097">(May 08 2021 at 09:52)</a>:</h4>
<p>Oh, right</p>



<a name="237943106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943106">(May 08 2021 at 09:52)</a>:</h4>
<p>failed to synthesize type class instance for<br>
n : ℕ<br>
⊢ decidable_pred prime</p>



<a name="237943110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943110">(May 08 2021 at 09:53)</a>:</h4>
<p>The same</p>



<a name="237943134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943134">(May 08 2021 at 09:53)</a>:</h4>
<p>So does</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">primes</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">finset</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">filter</span> <span class="n">nat.prime</span> <span class="o">(</span><span class="n">range</span> <span class="o">(</span><span class="n">primecount</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>work?</p>



<a name="237943206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943206">(May 08 2021 at 09:54)</a>:</h4>
<p>Though if your def is <code>noncomputable</code> anyway, you might as well use <code>open_locale classical</code> before it, I suspect</p>



<a name="237943267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943267">(May 08 2021 at 09:55)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">primes</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">classical</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">filter</span> <span class="o">(</span><span class="n">_root_.prime</span><span class="o">)</span> <span class="o">(</span><span class="n">range</span> <span class="o">(</span><span class="n">primecount</span> <span class="n">n</span><span class="o">))</span> <span class="o">}</span>
</code></pre></div>
<p>will do</p>



<a name="237943345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943345">(May 08 2021 at 09:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/113489-new-members/topic/Ambiguous.20overload/near/237943206">said</a>:</p>
<blockquote>
<p>Though if your def is <code>noncomputable</code> anyway, you might as well use <code>open_locale classical</code> before it, I suspect</p>
</blockquote>
<p>Yes, that does the trick :)</p>



<a name="237943502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943502">(May 08 2021 at 09:59)</a>:</h4>
<p>i do wonder why you're using this <code>prime</code> over <code>nat.prime</code>, especially as <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.prime_iff_prime">docs#nat.prime_iff_prime</a> exists</p>



<a name="237943673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943673">(May 08 2021 at 10:01)</a>:</h4>
<p>Because the API for the fundamental theorem of arithmetic is for unique factorization monoids, basically</p>



<a name="237943740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Ambiguous%20overload/near/237943740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stepan Nesterov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Ambiguous.20overload.html#237943740">(May 08 2021 at 10:02)</a>:</h4>
<p>But I guess I have to use this equivalence at some point anyway, because infinitely many primes uses <a href="http://nat.prime">nat.prime</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>