---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html">6:14 PM  Placeholder context error in class extends</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="286097153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286097153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286097153">(Jun 14 2022 at 16:17)</a>:</h4>
<p>I am trying to implement <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span>-metric spaces which are like metric spaces but <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> replaced by an ordered abelian group <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span>. I am running into the following error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">don't</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="n">context</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="bp">⊢</span> <span class="kt">Type</span> <span class="n">uLean</span>
</code></pre></div>
<p>here is a minimal working example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.order.group</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kn">namespace</span> <span class="n">algebra.order.group</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span>
<span class="kd">class</span> <span class="n">has_lambda_dist</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Λ</span><span class="o">)</span>
<span class="kd">class</span> <span class="n">lambda_metric_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
  <span class="kd">extends</span> <span class="n">has_lambda_dist</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">sym</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span>
</code></pre></div>
<p>Does anyone know what goes wrong?</p>



<a name="286099367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286099367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286099367">(Jun 14 2022 at 16:32)</a>:</h4>
<p>Lean can't guess Lambda from the information you gave it so it's asking you to supply it</p>



<a name="286100015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286100015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286100015">(Jun 14 2022 at 16:36)</a>:</h4>
<p>Aha. And having defined <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span> as a variable does not allow me to use it in all definitions afterwards? Do I have to give <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span> as an input to <code>has_lambda_dist</code> and <code>lambda_metric_space</code>?</p>



<a name="286100040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286100040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286100040">(Jun 14 2022 at 16:36)</a>:</h4>
<p>Why not make <code>Λ</code> explicit? This typechecks:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.order.group</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span>

<span class="kd">class</span> <span class="n">has_lambda_dist</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Λ</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">lambda_metric_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_lambda_dist</span> <span class="bp">Λ</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">sym</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">q</span> <span class="n">p</span><span class="o">)</span>
</code></pre></div>



<a name="286100133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286100133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286100133">(Jun 14 2022 at 16:37)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.order.group</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kn">namespace</span> <span class="n">algebra.order.group</span>

<span class="kd">class</span> <span class="n">has_lambda_dist</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Λ</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span>

<span class="kd">class</span> <span class="n">lambda_metric_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
  <span class="kd">extends</span> <span class="n">has_lambda_dist</span> <span class="n">α</span> <span class="bp">Λ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">sym</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">algebra.order.group</span>
</code></pre></div>
<p>might be a way to do it. <code>variable {Lambda...}</code> doesn't mean "Let Lambda be a fixed ordered group", it means "do nothing, but whenever you see a Lambda later on, add {Lambda : Type u} and all the extra stuff which comes with it to the beginning of the theorem or definition"</p>



<a name="286100913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286100913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286100913">(Jun 14 2022 at 16:44)</a>:</h4>
<p>Aha. My problem was that I took curly brackets {} when I wanted round ones ( ) . But it might also be better to make the definitions depend on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Λ</span></span></span></span> explicitly.</p>
<p>Thanks!</p>



<a name="286741748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286741748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286741748">(Jun 20 2022 at 02:00)</a>:</h4>
<p>I am running into more problems. I try to define an isometry, but Lean forgot what <code>dist</code> means. Specifying <code>Y.dist</code> and <code>X.dist</code>  does not help. Any cues for how to fix it?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.order.group</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span>

<span class="kd">class</span> <span class="n">has_lambda_dist</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Λ</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">lambda_metric_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_lambda_dist</span> <span class="bp">Λ</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">sym</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">dist</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">q</span> <span class="n">p</span><span class="o">)</span>
<span class="c1">-- more axioms omitted</span>

<span class="kd">class</span> <span class="n">lambda_isometry</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">Y</span><span class="o">]</span>  <span class="o">:=</span>
<span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>
<span class="o">(</span><span class="n">isom</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x1</span> <span class="n">x2</span> <span class="o">:</span> <span class="n">X</span> <span class="o">,</span> <span class="n">dist</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">x1</span><span class="o">)</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">x2</span><span class="o">)</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">x1</span> <span class="n">x2</span><span class="o">)</span>
</code></pre></div>



<a name="286748190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286748190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286748190">(Jun 20 2022 at 04:14)</a>:</h4>
<p>Does adding <code>open lambda_metric_space</code> before the last class work?</p>



<a name="286761845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286761845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286761845">(Jun 20 2022 at 07:59)</a>:</h4>
<p>Thank you for the suggestion. It unfortunately does not work. The error I am getting is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">dist'</span>
</code></pre></div>
<p>and here is the Lean state:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">don't</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="n">context</span><span class="o">:</span>
<span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">,</span>
<span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">,</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_2</span> <span class="o">:</span> <span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">X</span><span class="o">,</span>
<span class="n">_inst_3</span> <span class="o">:</span> <span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">to_fun</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">x1</span> <span class="n">x2</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="kt">Sort</span> <span class="bp">?</span>
</code></pre></div>



<a name="286762384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286762384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286762384">(Jun 20 2022 at 08:06)</a>:</h4>
<p><code>X.dist</code> can't work, right? It is being resolved to <code>Type.dist X</code> because <code>X : Type*</code>.</p>



<a name="286763000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286763000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286763000">(Jun 20 2022 at 08:14)</a>:</h4>
<p>Yes. I somehow need Lean to see X as a <code>lambda_metric_space</code> instead of as a <code>Type u</code>. <br>
I would need to be able to access <code>_inst_2</code> in the class statement. Is there a way to do this?</p>



<a name="286763269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286763269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286763269">(Jun 20 2022 at 08:18)</a>:</h4>
<p>The problem is that <code>dist x y</code> could be of type <code>Λ₁</code> or <code>Λ₂</code> if <code>lambda_metric_space Λ₁ X</code> and <code>lambda_metric_space Λ₂ X</code>, so Lean can't decide which one you mean. Instead, you should define</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">dist</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">[</span><span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">X</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="bp">Λ</span> <span class="o">:=</span>
<span class="n">lambda_metric_space.dist</span>
</code></pre></div>



<a name="286764996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286764996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286764996">(Jun 20 2022 at 08:34)</a>:</h4>
<p>Thanks. But when I write your definition I get the same error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">lambda_metric_space.dist'</span>
</code></pre></div>
<p>Now the problem is that <code>lambda_metric_space</code> is not a constant.</p>



<a name="286765100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286765100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286765100">(Jun 20 2022 at 08:35)</a>:</h4>
<p>Add <code>set_option old_structure_cmd true</code> at the top of the file.</p>



<a name="286766373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286766373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raphael Appenzeller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286766373">(Jun 20 2022 at 08:49)</a>:</h4>
<p>Thanks. Together with <code>open lambda_metric_space</code>, this fixes the problem with <code>dist</code>. (What does that <code>set_option</code>-incantation do? How could I have found out about it?) However now there is a problem with the equality.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">don't</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="n">context</span><span class="o">:</span>
<span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">,</span>
<span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_1</span> <span class="o">:</span> <span class="n">linear_ordered_add_comm_group</span> <span class="bp">Λ</span><span class="o">,</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">_inst_2</span> <span class="o">:</span> <span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">X</span><span class="o">,</span>
<span class="n">_inst_3</span> <span class="o">:</span> <span class="n">lambda_metric_space</span> <span class="bp">Λ</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">to_fun</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">x1</span> <span class="n">x2</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="kt">Type</span> <span class="n">u</span>
</code></pre></div>
<p>For reference, <a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20algebra.order.group%0Aset_option%20old_structure_cmd%20true%0A%0Auniverse%20u%0Avariables%20%28%CE%9B%20%3A%20Type%20u%29%20%5Blinear_ordered_add_comm_group%20%CE%9B%5D%0A%0Aclass%20has_lambda_dist%20%28%CE%B1%20%3A%20Type%20u%29%20%3A%3D%0A%28dist%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1%20%E2%86%92%20%CE%9B%29%0A%0Aclass%20lambda_metric_space%20%28%CE%B1%20%3A%20Type%20u%29%20extends%20has_lambda_dist%20%CE%9B%20%CE%B1%20%3A%3D%0A%28sym%20%3A%20%E2%88%80%20%28p%20q%20%3A%20%CE%B1%29%2C%20dist%20p%20q%20%3D%20dist%20q%20p%29%0A--%20more%20axioms%20omitted%0A%0Aopen%20lambda_metric_space%0A%0Adef%20dist%20%28%CE%9B%20%3A%20Type*%29%20%28X%20%3A%20Type*%29%20%5Blinear_ordered_add_comm_group%20%CE%9B%5D%20%5Blambda_metric_space%20%CE%9B%20X%5D%20%3A%20X%20%E2%86%92%20X%20%E2%86%92%20%CE%9B%20%3A%3D%0Alambda_metric_space.dist%0A%0Aclass%20lambda_isometry%20%28X%20Y%3A%20Type*%20%29%20%5Blambda_metric_space%20%CE%9B%20X%5D%20%5Blambda_metric_space%20%CE%9B%20Y%5D%20%20%3A%3D%0A%28to_fun%20%3A%20X%20%E2%86%92%20Y%29%0A%28isom%20%3A%20%E2%88%80%20x1%20x2%20%3A%20X%20%2C%20dist%20%28to_fun%20x1%29%20%28to_fun%20x2%29%20%3D%20dist%20x1%20x2%29%0A">here</a> is a mwe.</p>



<a name="286766499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286766499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286766499">(Jun 20 2022 at 08:50)</a>:</h4>
<p>It is because, with new structures, <code>extends has_lambda_dist Λ α</code> means "create a field <code>to_has_lambda_dist</code>", not "copy over the fields from <code>has_lambda_dist</code>".</p>



<a name="286766552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/6%3A14%20PM%20%20Placeholder%20context%20error%20in%20class%20extends/near/286766552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/6.3A14.20PM.20.20Placeholder.20context.20error.20in.20class.20extends.html#286766552">(Jun 20 2022 at 08:51)</a>:</h4>
<p>So what you think is <code>lambda_metric_space.dist</code> is actually <code>has_lambda_dist.dist ∘ lambda_metric_space.to_has_lambda_dist</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>