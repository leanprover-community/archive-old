---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html">Match lhs and rhs of inequality</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242178896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242178896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242178896">(Jun 10 2021 at 09:17)</a>:</h4>
<p>Hello! Currently I am trying to formalizing some inequality exercises involving amgm. Here is the first draft that works.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">analysis.mean_inequalities</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">theorem</span> <span class="n">algebra_amgm2_a2oncpc2onbpb2onaleqa3conb3pb3aonc3pc3bona3</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">ha₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.1</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hb₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.2.1</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hc₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.2.2</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">hb₃</span> <span class="n">h₀.1</span><span class="o">)</span> <span class="n">hc₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">hc₃</span> <span class="n">h₀.2.1</span><span class="o">)</span> <span class="n">ha₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₃</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">ha₃</span> <span class="n">h₀.2.2</span><span class="o">)</span> <span class="n">hb₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">),</span> <span class="n">ring</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₆</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₁</span> <span class="n">h₂</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₇</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₁</span> <span class="n">h₃</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₈</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₂</span> <span class="n">h₃</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₉</span> <span class="o">:=</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">add_le_add</span> <span class="n">h₇</span> <span class="n">h₈</span><span class="o">)</span> <span class="n">h₆</span><span class="o">,</span>
  <span class="n">clear</span> <span class="n">h₆</span> <span class="n">h₇</span> <span class="n">h₈</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">lhs</span> <span class="o">:</span> <span class="o">(</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span>
   <span class="o">(</span><span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span>
   <span class="o">(</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span>
    <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span><span class="o">,</span> <span class="o">{</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.mul_rpow</span><span class="o">,</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">h₃</span><span class="o">],</span>
    <span class="n">refine</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">has_add.add</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">has_add.add</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="k">have</span> <span class="n">pow_can₁</span><span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">((</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span><span class="o">)</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">2</span><span class="o">:</span><span class="n">ℕ</span><span class="o">):</span><span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="o">{</span>
        <span class="n">simp</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.rpow_mul</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.1</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.2.2</span><span class="o">)],</span>
      <span class="o">},</span>
      <span class="n">rw</span> <span class="n">pow_can₁</span><span class="o">,</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">real.rpow_nat_cast</span><span class="o">],</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hc₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">c</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.2.2</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="k">have</span> <span class="n">pow_can₂</span><span class="o">:</span> <span class="n">c</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span> <span class="bp">=</span> <span class="o">((</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span><span class="o">)</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">2</span><span class="o">:</span><span class="n">ℕ</span><span class="o">):</span><span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="o">{</span>
        <span class="n">simp</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.rpow_mul</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.2.2</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.2.1</span><span class="o">)],</span>
      <span class="o">},</span>
      <span class="n">rw</span> <span class="n">pow_can₂</span><span class="o">,</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">real.rpow_nat_cast</span><span class="o">],</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">ha₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.2.1</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="k">have</span> <span class="n">pow_can₃</span><span class="o">:</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">((</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span><span class="o">)</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">2</span><span class="o">:</span><span class="n">ℕ</span><span class="o">):</span><span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="o">{</span>
        <span class="n">simp</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.rpow_mul</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.2.1</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.1</span><span class="o">)],</span>
      <span class="o">},</span>
      <span class="n">rw</span> <span class="n">pow_can₃</span><span class="o">,</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">real.rpow_nat_cast</span><span class="o">],</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">hc₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">a</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.1</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
  <span class="o">},</span>
  <span class="k">have</span> <span class="n">rhs</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">+</span>
    <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span><span class="o">))</span> <span class="bp">+</span>
    <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">,</span> <span class="o">{</span>
      <span class="n">ring_nf</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span><span class="n">lhs</span><span class="o">,</span> <span class="bp">←</span><span class="n">rhs</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>
<p>The roadmap is to construct an inequality forwardly (h₉) then prove its lhs and rhs can simplify to the goal's.  I have to state explicitly the lhs and rhs here because I didn't find any tactic that helps with this kind of situation, something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span>
    <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
    <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>can help me use the <code>refine</code> tactic to generate 2 subgoals of equalities. But I can only find tactic for 1 equality like <code>eq.trans_le</code>. Also, my proof is very forward reasony so I wonder if you have any advice on the proof itself.</p>



<a name="242179690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242179690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242179690">(Jun 10 2021 at 09:25)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
  <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="242189437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242189437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242189437">(Jun 10 2021 at 11:07)</a>:</h4>
<p>Do we have <a href="https://leanprover-community.github.io/mathlib_docs/find/has_le.le.trans_eq">docs#has_le.le.trans_eq</a>?</p>



<a name="242189582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242189582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242189582">(Jun 10 2021 at 11:08)</a>:</h4>
<p><code>j.symm.le.trans (h.trans k.le)</code> is a short term-mode proof</p>



<a name="242190045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190045">(Jun 10 2021 at 11:14)</a>:</h4>
<p><code>j.symm.le</code> is <code>j.ge</code></p>



<a name="242190072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190072">(Jun 10 2021 at 11:14)</a>:</h4>
<p>But I guess we don't get a <code>trans</code> then?</p>



<a name="242190205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190205">(Jun 10 2021 at 11:16)</a>:</h4>
<p>Of course <code>by rwa [j, k] at h</code> also works</p>



<a name="242190310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190310">(Jun 10 2021 at 11:17)</a>:</h4>
<p>I find that what is below is closer to how I think of it:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span>
    <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
    <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">convert</span> <span class="n">h</span><span class="o">,</span>  <span class="c1">--  I know the correct inequality is this one</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">j.symm</span> <span class="o">},</span>  <span class="c1">-- now fix it!</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">k.symm</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="242190455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190455">(Jun 10 2021 at 11:19)</a>:</h4>
<p>For increased opacity, this also works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">by</span> <span class="n">convert</span> <span class="n">h</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">eq.symm</span> <span class="o">‹</span><span class="n">_</span><span class="o">›</span>
</code></pre></div>



<a name="242190565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190565">(Jun 10 2021 at 11:20)</a>:</h4>
<p>Although, while the term mode proofs that have been given earlier are probably closer to mathlib proofs (and also how I would write them), using <code>convert</code> is often more "mathematical".</p>



<a name="242190768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242190768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242190768">(Jun 10 2021 at 11:22)</a>:</h4>
<p>In particular, my impression is that the role of <code>h</code> is <em>fundamental</em>, while the extra equalities are <em>noise</em>.  Beginning a proof with <code>convert h</code> is bringing the attention to what matters.  After that, what is left is figuring out that you do indeed have the pieces of the puzzle.</p>



<a name="242192174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242192174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242192174">(Jun 10 2021 at 11:36)</a>:</h4>
<p>You can also use the equation compiler for this type of thing:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span> <span class="o">:</span> <span class="bp">∀</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
  <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">rfl</span> <span class="n">rfl</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">h</span>
</code></pre></div>



<a name="242192287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242192287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242192287">(Jun 10 2021 at 11:37)</a>:</h4>
<p>But <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#linarith">tactic#linarith</a> is the best "I don't care about this stuff just solve it for me" solution.</p>



<a name="242192555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242192555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242192555">(Jun 10 2021 at 11:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality/near/242192174">said</a>:</p>
<blockquote>
<p>You can also use the equation compiler for this type of thing:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span> <span class="o">:</span> <span class="bp">∀</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
  <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">rfl</span> <span class="n">rfl</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">h</span>
</code></pre></div><br>
</p>
</blockquote>
<p>could you please explain more about this syntax? I don't quite understand what's going on here (especially the <code>|</code> and the <code>,</code> after <code>(h : a ≤ b)</code>)</p>



<a name="242192615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242192615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242192615">(Jun 10 2021 at 11:41)</a>:</h4>
<p><span class="user-mention" data-user-id="408484">@Kunhao Zheng</span> Note that the is now a <code>\forall</code> on the first line of the lemma</p>



<a name="242192628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242192628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242192628">(Jun 10 2021 at 11:41)</a>:</h4>
<p>So the <code>,</code> is just <code>\forall bla, blabla</code></p>



<a name="242193022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242193022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242193022">(Jun 10 2021 at 11:46)</a>:</h4>
<p>Also possible term mode is to use eq.subst, I think (k.subst (j.subst h)) will work. The rw triangle.</p>



<a name="242193308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242193308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242193308">(Jun 10 2021 at 11:49)</a>:</h4>
<p>Regarding the proof and reverse reasoning, untested, but after you prove that the cubes are nonnegative, can you try field_simp? That should multiply everything out</p>



<a name="242194580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242194580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242194580">(Jun 10 2021 at 12:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality/near/242193308">said</a>:</p>
<blockquote>
<p>Regarding the proof and reverse reasoning, untested, but after you prove that the cubes are nonnegative, can you try field_simp? That should multiply everything out</p>
</blockquote>
<p>Now my proof looks like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">analysis.mean_inequalities</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span>
  <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
  <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">k.subst</span><span class="o">(</span><span class="n">j.subst</span> <span class="n">h</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">pow_two_pow_half</span>
  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">^</span><span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.rpow_mul</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="n">h</span><span class="o">,</span> <span class="bp">←</span><span class="n">real.rpow_nat_cast</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">algebra_amgm2_a2oncpc2onbpb2onaleqa3conb3pb3aonc3pc3bona3</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="n">c</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">ha₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.1</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hb₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.2.1</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hc₃</span> <span class="o">:=</span> <span class="n">pow_pos</span> <span class="n">h₀.2.2</span> <span class="mi">3</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">hb₃</span> <span class="n">h₀.1</span><span class="o">)</span> <span class="n">hc₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">hc₃</span> <span class="n">h₀.2.1</span><span class="o">)</span> <span class="n">ha₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₃</span> <span class="o">:=</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">div_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="n">ha₃</span> <span class="n">h₀.2.2</span><span class="o">)</span> <span class="n">hb₃</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">),</span> <span class="n">ring</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₆</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₁</span> <span class="n">h₂</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₇</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₁</span> <span class="n">h₃</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₈</span> <span class="o">:=</span> <span class="n">real.geom_mean_le_arith_mean2_weighted</span> <span class="n">h₄</span> <span class="n">h₄</span> <span class="n">h₂</span> <span class="n">h₃</span> <span class="n">h₅</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₉</span> <span class="o">:=</span> <span class="n">add_le_add</span> <span class="o">(</span><span class="n">add_le_add</span> <span class="n">h₇</span> <span class="n">h₈</span><span class="o">)</span> <span class="n">h₆</span><span class="o">,</span>
  <span class="n">clear</span> <span class="n">h₆</span> <span class="n">h₇</span> <span class="n">h₈</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">trans_le_trans</span> <span class="n">h₉</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span><span class="n">real.mul_rpow</span><span class="o">,</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">h₃</span><span class="o">],</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_two_pow_half</span> <span class="o">(</span><span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">c</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span> <span class="n">pow_two_pow_half</span> <span class="o">(</span><span class="n">c</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">b</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span> <span class="n">pow_two_pow_half</span> <span class="o">(</span><span class="n">b</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">a</span><span class="o">)</span> <span class="n">_</span><span class="o">],</span>
    <span class="n">refine</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">has_add.add</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">has_add.add</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hc₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">c</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.2.2</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">ha₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.2.1</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">refine</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">pow</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">ne_of_gt</span> <span class="n">hc₃</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">hb₃</span><span class="o">,</span> <span class="n">pow_succ'</span> <span class="n">a</span> <span class="mi">2</span><span class="o">,</span> <span class="n">ne_of_gt</span> <span class="n">h₀.1</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">],</span>
      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">exact</span> <span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.2.1</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.1</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.2.2</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.2.1</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">div_pos</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">h₀.1</span> <span class="mi">2</span><span class="o">)</span> <span class="n">h₀.2.2</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>The line of <code>field_simp [ne_of_gt hb₃, ne_of_gt hc₃, pow_succ' c 2, ne_of_gt h₀.2.2, mul_div_cancel_left],</code> helps me out to convert an equality of <code>b ^ 3 * a / c ^ 3 * (a ^ 3 * c / b ^ 3) = (a ^ 2 / c) ^ 2</code> to <code>b ^ 3 * a * (a ^ 3 * c) * c ^ 2 = (a ^ 2) ^ 2 * (c ^ 2 * c * b ^ 3)</code>. Not sure if this you're referring to?</p>



<a name="242197004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242197004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242197004">(Jun 10 2021 at 12:23)</a>:</h4>
<p>Just wondering: what's with the absurdly long theorem name? Mathlib theorem names tend to encode the formal statement of the theorem and I understand that you want to follow that convention, however I think this is very extreme.</p>



<a name="242197215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242197215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242197215">(Jun 10 2021 at 12:24)</a>:</h4>
<p>As a side note, I tend to call everything a lemma because I'm not a mathematician, LOL. Only mathematicians can prove theorems. I'm just a mere programmer knowing absolutely nothing about proper mathematics.</p>



<a name="242197240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242197240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242197240">(Jun 10 2021 at 12:25)</a>:</h4>
<p>Even though I know how to prove this inequality <span aria-label="clown" class="emoji emoji-1f921" role="img" title="clown">:clown:</span></p>



<a name="242197245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242197245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242197245">(Jun 10 2021 at 12:25)</a>:</h4>
<p>you won't like Lean 4 then :-)</p>



<a name="242198206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242198206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242198206">(Jun 10 2021 at 12:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="270523">Huỳnh Trần Khanh</span> <a href="#narrow/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality/near/242197004">said</a>:</p>
<blockquote>
<p>Just wondering: what's with the absurdly long theorem name? Mathlib theorem names tend to encode the formal statement of the theorem and I understand that you want to follow that convention, however I think this is very extreme.</p>
</blockquote>
<p>Somehow that's a naming convention we adapt from the metamath system to keep it aligned with statements written in that system (<a href="https://github.com/openai/miniF2F">https://github.com/openai/miniF2F</a>), I admit it's a bit tedious and longer but you could know what it tells us by reading the name. I once wanted to come up with another naming convention but I fell back into it:( so if you have any suggestions I will be very happy!</p>



<a name="242198960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242198960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242198960">(Jun 10 2021 at 12:39)</a>:</h4>
<p><span class="user-mention" data-user-id="408484">@Kunhao Zheng</span> The mathlib name would probably be <code>sq_div_add_sq_div_add_sq_div_le</code></p>



<a name="242204510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242204510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242204510">(Jun 10 2021 at 13:22)</a>:</h4>
<p><span class="user-mention" data-user-id="408484">@Kunhao Zheng</span> When you have a goal that can be closed simply by substituting variables, try <code>cc</code>. The <code>cc</code> (congruence closure) tactic is specifically designed for this.</p>



<a name="242204632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242204632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242204632">(Jun 10 2021 at 13:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">lemma</span> <span class="n">trans_le_trans</span>
    <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
    <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">c</span> <span class="bp">≤</span> <span class="n">d</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">cc</span>
</code></pre></div>



<a name="242204900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242204900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242204900">(Jun 10 2021 at 13:25)</a>:</h4>
<p>The congruence closure tactic is based on the union-find data structure, which is very popular in competitive programming. You are from China, right? I know Chinese people are competitive programming gods!</p>



<a name="242232289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Match%20lhs%20and%20rhs%20of%20inequality/near/242232289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kunhao Zheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality.html#242232289">(Jun 10 2021 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="270523">Huỳnh Trần Khanh</span> <a href="#narrow/stream/113489-new-members/topic/Match.20lhs.20and.20rhs.20of.20inequality/near/242204900">said</a>:</p>
<blockquote>
<p>The congruence closure tactic is based on the union-find data structure, which is very popular in competitive programming. You are from China, right? I know Chinese people are competitive programming gods!</p>
</blockquote>
<p>Thank you for the hint! You're right. Though I have a CS background but I'm not so good at the competition <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>