---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Installation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html">Installation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259003733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259003733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259003733">(Oct 25 2021 at 18:51)</a>:</h4>
<p>I just attempted to install Lean 4, but I don't think it's installed properly.  I started a file with "import data.real.basic" and got an error message "unknown package 'data' ".  What am I doing wrong?</p>



<a name="259004891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259004891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259004891">(Oct 25 2021 at 19:01)</a>:</h4>
<p>That's lean 3</p>



<a name="259005072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005072">(Oct 25 2021 at 19:02)</a>:</h4>
<p>an import that exists in lean 4 is <code>import Std.Data.HashMap</code></p>



<a name="259005117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005117">(Oct 25 2021 at 19:02)</a>:</h4>
<p>Thanks.</p>



<a name="259005126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005126">(Oct 25 2021 at 19:02)</a>:</h4>
<p>If you want to do mathematics then <a href="https://leanprover-community.github.io/get_started.html">start here</a> with Lean 3.</p>



<a name="259005175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005175">(Oct 25 2021 at 19:03)</a>:</h4>
<p>Right now the big maths library is Lean 3 only; this will change, but not for a few months at least.</p>



<a name="259005269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005269">(Oct 25 2021 at 19:04)</a>:</h4>
<p>Is there a list of imports that exist in Lean 4?</p>



<a name="259005344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005344">(Oct 25 2021 at 19:04)</a>:</h4>
<p>Is it possible to have both Lean 3 and Lean 4 installed and switch between them?</p>



<a name="259005358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005358">(Oct 25 2021 at 19:05)</a>:</h4>
<p>Yes</p>



<a name="259005435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005435">(Oct 25 2021 at 19:05)</a>:</h4>
<p>Each Lean repository has a file in the root directory which says exactly which version of Lean it compiles against</p>



<a name="259005605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259005605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259005605">(Oct 25 2021 at 19:06)</a>:</h4>
<p>For example <a href="https://github.com/leanprover-community/lean-liquid/blob/master/leanpkg.toml">here</a> is the file corresponding to a repository I've done some work with -- the file says it uses Lean 3.34 and also a specific commit of mathlib, Lean 3's maths library. On the other hand I can also open another github repo which says it works with Lean 4 (e.g. <a href="https://github.com/leanprover-community/mathlib4/blob/master/lean-toolchain">this file</a> in a Lean 4 repo) and this just works out of the box too.</p>



<a name="259006375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006375">(Oct 25 2021 at 19:13)</a>:</h4>
<p>I see there's something called mathlib4 at GitHub.  Is that the Lean 4 library?  Was it supposed to be installed on my computer as part of the Lean 4 installation?  Or is there something I'm supposed to do to install it?</p>



<a name="259006424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006424">(Oct 25 2021 at 19:13)</a>:</h4>
<p>mathlib4 is a playground for experimenting with manual ports of part of mathlib, Lean 3's maths library,</p>



<a name="259006563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006563">(Oct 25 2021 at 19:14)</a>:</h4>
<p>If you installed Lean 4 then all you got was Lean 4. You can clone repos from github and work on them, although the actual procedure for how to do this is changing rapidly right now (e.g. I don't think I know how to do it myself right now with Lean 4).</p>



<a name="259006678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006678">(Oct 25 2021 at 19:15)</a>:</h4>
<p>I installed Lean 3 first and played with it a little bit, but I have a project that I think is going to need to be done in Lean 4, so I installed that.  I don't know if I still have Lean 3, or how to go back to it if I do.</p>



<a name="259006776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006776">(Oct 25 2021 at 19:16)</a>:</h4>
<p>There is something called <code>lakefile.lean</code> in mathlib4 as of a week ago, and this is some kind of "Lean makefile" but I don't know any more than that (although there are oodles of details in the <a class="stream" data-stream-id="270676" href="/#narrow/stream/270676-lean4">#lean4</a> stream about it)</p>



<a name="259006799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006799">(Oct 25 2021 at 19:16)</a>:</h4>
<p>What's the nature of your project?</p>



<a name="259006868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006868">(Oct 25 2021 at 19:17)</a>:</h4>
<p>Both Lean 3 and Lean 4 can certainly coexist on a machine and there won't be any problems; a little program called <code>elan</code> will do the job of deciding which version of Lean you will be using.</p>



<a name="259006953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259006953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259006953">(Oct 25 2021 at 19:18)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>buzzard@bob:~$ <span class="nb">cd</span> active-lean-projects/
buzzard@bob:~/active-lean-projects$ <span class="nb">cd</span> mathlib4
buzzard@bob:~/active-lean-projects/mathlib4$ lean --version
Lean <span class="o">(</span>version <span class="m">4</span>.0.0-nightly-2021-07-27, commit 0bea52d1b535, Release<span class="o">)</span>
buzzard@bob:~/active-lean-projects/mathlib4$ <span class="nb">cd</span> ..
buzzard@bob:~/active-lean-projects$ <span class="nb">cd</span> mathlib
buzzard@bob:~/active-lean-projects/mathlib$ lean --version
Lean <span class="o">(</span>version <span class="m">3</span>.33.0, commit a0fb1e8c7ac8, Release<span class="o">)</span>
buzzard@bob:~/active-lean-projects/mathlib$
</code></pre></div>
<p>Works by magic</p>



<a name="259007384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259007384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259007384">(Oct 25 2021 at 19:21)</a>:</h4>
<p>If I understand the commands you displayed, different projects can use different versions of lean.  But then how do I determine which version of Lean a project will use?</p>



<a name="259007972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259007972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259007972">(Oct 25 2021 at 19:26)</a>:</h4>
<p>Are there completely different procedures for creating projects in Lean 3 and Lean 4?  It looks like in Lean 3 I'm supposed to use leanproject new, and in Lean 4 I'm supposed to use leanpkg init.  Is that right?</p>



<a name="259008064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259008064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259008064">(Oct 25 2021 at 19:27)</a>:</h4>
<p>If you're downloading the package from github then you look in the leanpkg.toml or (for projects which are only a week or two old) then <code>lean-toolchain</code> file (so it seems -- I don't know anything about this file). Yes, there are completely different procedures for creating projects in Lean 3 and Lean 4. <code>leanproject</code> is supposed to be a one size fits all so-easy-even-mathematicians-can-use-it program which sets up Lean 3 projects.</p>



<a name="259008140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259008140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259008140">(Oct 25 2021 at 19:27)</a>:</h4>
<p>We'll worry about making Lean 4 project initialisation so easy even mathematicians can do it once we've solved the problem of porting the maths library. You didn't say what the nature of your project was.</p>



<a name="259008799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259008799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259008799">(Oct 25 2021 at 19:33)</a>:</h4>
<p>Sorry, it is not "so-easy-even-mathematicians-can-use-it."  I just tried the command "leanproject new &lt;project name&gt;", which I thought was what I was supposed to use to create a Lean 3 project, and got an error message: "uncaught exception: Lean package manager, version 4.0.0"</p>



<a name="259009200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259009200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259009200">(Oct 25 2021 at 19:37)</a>:</h4>
<p>I suspect that's because you've run it inside a directory which contains some lean 4 files</p>



<a name="259009296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259009296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259009296">(Oct 25 2021 at 19:38)</a>:</h4>
<p>Mathematicians aren't supposed to be messing with lean 4 yet :-)</p>



<a name="259009368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259009368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259009368">(Oct 25 2021 at 19:39)</a>:</h4>
<p>OK, I'll try in a different directory.  Thanks for all your help.</p>



<a name="259009440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259009440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259009440">(Oct 25 2021 at 19:39)</a>:</h4>
<p>Just like a file explorer, the command line knows which directory it's in. You want to make sure that it's in C:/my_lean_projects or whatever</p>



<a name="259009570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259009570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259009570">(Oct 25 2021 at 19:41)</a>:</h4>
<p>(ps just to be clear, I am unashamedly a mathematician)</p>



<a name="259010039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259010039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259010039">(Oct 25 2021 at 19:45)</a>:</h4>
<p>Both Lean installation instructions install a program called <code>elan</code> which magically decides which version of Lean to run, and even fetches it if necessary. When you are in a directory that has been set up right with a <code>leanpkg.toml</code> file, it uses that information to determine the right version. If you type <code>elan</code> at the command line, you can see some options. For example, <code>elan show</code> will show you all the versions of Lean that it has fetched over time. You can say e.g. <code>elan default leanprover-community/lean:3.32.1</code> to set a specific default, but it should be overridden by a <code>toml</code> file when there is one. Note that typing <code>lean</code> really runs <code>elan</code>. If you type <code>lean --version</code>, it will tell you which version of Lean is being run.</p>



<a name="259014891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259014891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259014891">(Oct 25 2021 at 20:19)</a>:</h4>
<p>Perhaps <code>leanproject</code> should run <code>lean --version</code> and check it's on Lean 3, assuming it doesn't know anything about lean 4</p>



<a name="259022041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022041">(Oct 25 2021 at 21:18)</a>:</h4>
<p>Thanks Jeremy.  When I type elan show I get the following list of installed toolchains:<br>
stable<br>
leanprover-community/lean:3.26.0<br>
leanprover-community/lean:3.33.0<br>
leanprover/lean4:stable (default)</p>
<p>You say that Lean will use the right version in a directory with a leanpkg.toml file.  OK, so how do I set up a directory with such a file to use Lean 3?  The Lean 3 instructions for setting up a project say to use the command leanproject new &lt;name&gt;, but that now gives me an error message.  The Lean 4 instructions for setting up a project say to use the command leanpkg init &lt;name&gt;.  That command doesn't give an error message, but the leanpkg.toml file it creates says nothing about what version of Lean it should use.  I can see in the mathematics_in_lean leanpkg.toml file how the lean version should be specified.  Do I have to open my .toml file and add a "lean_version" line?</p>
<p>Maybe I should just use elan default to go back to Lean 3 and stick to that for the moment.</p>
<p>I'm sorry if I sound a little frustrated, but when I try to follow the installation instructions, nothing works as described online.  <br>
I often get error messages, and the instructions give almost no information about what to do when you get error messages.</p>



<a name="259022618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022618">(Oct 25 2021 at 21:23)</a>:</h4>
<p>The instructions for lean 3 should be fine for lean 3 projects. Can you be more specific about the problem you're having with <code>leanproject new my_cool_project</code>? Saying "it gives me an error message" isn't very helpful</p>



<a name="259022819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022819">(Oct 25 2021 at 21:25)</a>:</h4>
<p>Here's the error message:<br>
uncaught exception: Lean package manager, version 4.0.0</p>
<p>Usage: leanpkg &lt;command&gt;</p>
<p>init &lt;name&gt;      create a Lean package in the current directory<br>
configure        download and build dependencies<br>
build [&lt;args&gt;]   configure and build *.olean files</p>
<p>See <code>leanpkg help &lt;command&gt;</code> for more information on a specific command.<br>
Command '['leanpkg', 'new', 'HTPI']' returned non-zero exit status 1.</p>



<a name="259022858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022858">(Oct 25 2021 at 21:25)</a>:</h4>
<p>If the directory you're running this command in, or if <em>any directory containing this directory</em> as a subdirectory, contains a  <code>leanpkg.toml</code> file, then there will be trouble of this nature</p>



<a name="259022875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022875">(Oct 25 2021 at 21:26)</a>:</h4>
<p>This looks like a bug in leanproject to me</p>



<a name="259022967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022967">(Oct 25 2021 at 21:26)</a>:</h4>
<p>If you have lean4 as a default and no existing projects, then when <code>leanproject</code> calls out to <code>leanpkg init</code> internally, it's in for a shock</p>



<a name="259022971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259022971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259022971">(Oct 25 2021 at 21:26)</a>:</h4>
<p>Can you also confirm which version of <code>leanproject</code> you're using, with <code>leanproject --version</code>?</p>



<a name="259023075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023075">(Oct 25 2021 at 21:27)</a>:</h4>
<p>Maybe the issue is simply that when you installed lean 4 the default lean changed and you have to manually change it back using elan?</p>



<a name="259023078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023078">(Oct 25 2021 at 21:28)</a>:</h4>
<p>There's no leanpkg.toml file in either this directory or any directory that contains it (although there are leanpkg.toml files in another subdirectory of the directory containing this directory).  I'll try changing my default and see if that solves it.</p>



<a name="259023249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023249">(Oct 25 2021 at 21:29)</a>:</h4>
<p>I'll get to a computer and see if I can reproduce. Toml files in other subdirectories should be fine, I have those too (all my lean 3 and lean 4 repos are in a <code>lean-stuff</code> directory)</p>



<a name="259023737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023737">(Oct 25 2021 at 21:34)</a>:</h4>
<p>OK, I changed my default to leanprover-community/lean:3.33.0, and now leanproject new &lt;name&gt; seems to work.</p>



<a name="259023743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023743">(Oct 25 2021 at 21:34)</a>:</h4>
<p>Indeed I can confirm that having elan default to a Lean 4 binary breaks <code>leanproject</code>. Hopefully you can fix it with <code>elan default leanprover-community/lean:3.33.0</code> and then <code>leanproject new my_cool_project</code> should hopefully eotk.</p>



<a name="259023781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259023781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259023781">(Oct 25 2021 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I have a vague memory that this came up before...</p>



<a name="259024132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024132">(Oct 25 2021 at 21:38)</a>:</h4>
<p>Does every project contain a copy of mathlib?  I wasn't expecting that.</p>



<a name="259024167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024167">(Oct 25 2021 at 21:38)</a>:</h4>
<p>Every project you make with <code>leanproject</code> does because it's supposed to be mathematician-proof</p>



<a name="259024195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024195">(Oct 25 2021 at 21:38)</a>:</h4>
<p>You can just remove it if you want -- do you want to know how?</p>



<a name="259024247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024247">(Oct 25 2021 at 21:39)</a>:</h4>
<p>It involves manually editing leanpkg.html and then deleting _target</p>



<a name="259024384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024384">(Oct 25 2021 at 21:40)</a>:</h4>
<p>You leave the <code>[dependencies]</code> line but delete the <code>mathlib = ...</code> line after it</p>



<a name="259024423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024423">(Oct 25 2021 at 21:40)</a>:</h4>
<p>I've asked several times what you're planning on doing, but because you never responded I can't give any advice on whether this would be a good or bad idea for you</p>



<a name="259024436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024436">(Oct 25 2021 at 21:41)</a>:</h4>
<p>To be clear; are you surprised that new projects depend on mathlib, or that that dependency is handled by making a full copy?</p>



<a name="259024447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024447">(Oct 25 2021 at 21:41)</a>:</h4>
<p>mathlib isn't just a maths library, it contains a lot of useful tactics too.</p>



<a name="259024545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259024545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259024545">(Oct 25 2021 at 21:42)</a>:</h4>
<p>Also non-mathlib lean3 core gets smaller and smaller; currently Yaël is PRing removing integers from core!</p>



<a name="259026479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026479">(Oct 25 2021 at 22:03)</a>:</h4>
<p>Kevin:  Perhaps I shouldn't have said "project".  More of a vague, unformed idea at the moment, and I didn't want to try to explain.  At this point, I'm just trying to learn Lean.<br>
Eric:  I'm not surprised that new projects depend on mathlib, but I assumed that there would be one copy of mathlib on my computer in a place that is accessible to all projects.  Perhaps the issue is that mathlib changes often, so there isn't a single, stable "mathlib" that all projects can use?</p>



<a name="259026594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026594">(Oct 25 2021 at 22:04)</a>:</h4>
<p>Yes that's exactly it -- mathlib master can change 10 times a day and as it grows people want to use the latest features. I probably have 50 copies of mathlib on the machine I'm typing on now</p>



<a name="259026609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026609">(Oct 25 2021 at 22:04)</a>:</h4>
<p>and they're probably all different</p>



<a name="259026618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026618">(Oct 25 2021 at 22:04)</a>:</h4>
<p>Got it.  Thanks.</p>



<a name="259026764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026764">(Oct 25 2021 at 22:06)</a>:</h4>
<p><a href="https://github.com/ImperialCollegeLondon/M40001_lean/blob/master/src/2021/README.md">Here</a> is what I'm subjecting the 1st year UGs at my university to, and <a href="https://github.com/ImperialCollegeLondon/formalising-mathematics">here</a> is what I subjected some PhD students to earlier this year (all mathematicians)</p>



<a name="259026795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026795">(Oct 25 2021 at 22:06)</a>:</h4>
<p>And if you want something more type-theoretic then <a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a> is a fantastic resource</p>



<a name="259026915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259026915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259026915">(Oct 25 2021 at 22:08)</a>:</h4>
<p>Thanks Kevin.</p>



<a name="259027068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259027068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259027068">(Oct 25 2021 at 22:09)</a>:</h4>
<p>My stuff is often quite alegbraic -- the <a href="https://github.com/leanprover-community/tutorials">official tutorials</a> are more analytic</p>



<a name="259030899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259030899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259030899">(Oct 25 2021 at 22:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Installation/near/259024545">said</a>:</p>
<blockquote>
<p>Also non-mathlib lean3 core gets smaller and smaller; currently Yaël is PRing removing integers from core!</p>
</blockquote>
<p>Not to lower your expectations, but I think this is <strong>not</strong> happening <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span><br>
I got terribly misled by faulty docgen.</p>



<a name="259030928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259030928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259030928">(Oct 25 2021 at 22:49)</a>:</h4>
<p>In particular, they are used for widgets, which I think should stay in core?</p>



<a name="259059936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Installation/near/259059936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Installation.html#259059936">(Oct 26 2021 at 07:21)</a>:</h4>
<p>It's true that <code>leanproject</code> was written long before Lean4 came out and it was never updated to cooperate with Lean 4. PRs are welcome. Also note that you can actually have a central copy of mathlib used by all projects, this is explained in the documentation. But it's so useless (for reasons explained by Kevin) that nobody does it.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>