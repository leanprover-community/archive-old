---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html">extracting entries from matrices</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204795128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795128">(Jul 23 2020 at 13:15)</a>:</h4>
<p>Given a matrix <code>A</code>, I want to define a new matrix obtained by adding a row and column to <code>A</code>. <br>
I tried the following but it fails because of type mismatch. Dunno how to fix it.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">matrix</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">open_locale</span> <span class="n">matrix</span>

<span class="n">def</span> <span class="n">matrix_extension</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">k</span><span class="o">)</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">ℕ</span>
<span class="o">:=</span>
<span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span>
<span class="k">match</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="k">with</span>
<span class="bp">|</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">_</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span><span class="o">,</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">A</span> <span class="n">x</span> <span class="n">y</span>
<span class="kn">end</span>
</code></pre></div>



<a name="204795244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795244">(Jul 23 2020 at 13:16)</a>:</h4>
<p><code>A x y</code> doesn't work because <code>A</code> is expecting a pair of <code>fintype</code></p>



<a name="204795328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795328">(Jul 23 2020 at 13:17)</a>:</h4>
<p>I think <code>A</code> is expecting a pair of <code>fin k</code></p>



<a name="204795369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795369">(Jul 23 2020 at 13:17)</a>:</h4>
<p>does something like <code>A ⟨x, _ ⟩ ⟨y, _⟩</code> work?</p>



<a name="204795489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795489">(Jul 23 2020 at 13:18)</a>:</h4>
<p>Instead of writing a <code>match</code> statement, you can also try <code>fin.cons : α -&gt; (fin n -&gt; α) -&gt; fin (n+1) -&gt; α</code>.</p>



<a name="204795523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795523">(Jul 23 2020 at 13:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/113489-new-members/topic/extracting.20entries.20from.20matrices/near/204795328">said</a>:<br>
It says don't know how to synthesize placeholder<br>
context:</p>



<a name="204795712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204795712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204795712">(Jul 23 2020 at 13:20)</a>:</h4>
<p>Here is one way to do it using a <code>match</code>, but <span class="user-mention" data-user-id="238446">@Anne Baanen</span>'s way is almost certainly better.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">matrix</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">open_locale</span> <span class="n">matrix</span>

<span class="n">def</span> <span class="n">matrix_extension</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">k</span><span class="o">)</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">ℕ</span>
<span class="o">:=</span>
<span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span>
<span class="k">match</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span> <span class="k">with</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span>       <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span> <span class="bp">_</span>            <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span>            <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">hx</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">hy</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">A</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_of_succ_lt_succ</span> <span class="n">hx</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_of_succ_lt_succ</span> <span class="n">hy</span><span class="bp">⟩</span>
<span class="kn">end</span>
</code></pre></div>



<a name="204796211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204796211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204796211">(Jul 23 2020 at 13:24)</a>:</h4>
<p>Thank you!!!</p>
<p>This definitely works, with the added bonus that I understand what's going on :P <br>
I will give it a try using <code>fin.cons</code>as well</p>



<a name="204798244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20entries%20from%20matrices/near/204798244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20entries.20from.20matrices.html#204798244">(Jul 23 2020 at 13:43)</a>:</h4>
<p>Are you always adding on an edge, or inserting?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>