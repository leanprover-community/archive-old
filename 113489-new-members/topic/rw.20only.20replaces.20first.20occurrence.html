---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html">rw only replaces first occurrence</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="293332808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293332808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293332808">(Aug 14 2022 at 00:41)</a>:</h4>
<p>Hello, I just came across this game thing called the natural number game, which teaches you lean (I never heard of it before today). I was going through it, and I came across a situation that doesn't feel right - but I have no idea how you would do this differently. </p>
<p>I have this situation (mynat is just the natural numbers defined by the lesson - I did not make it).</p>
<p>a b : mynat<br>
⊢ a + b + 0 = a + (b + 0)</p>
<p>I also have this definition:</p>
<p>add_zero (a : mynat) :<br>
  a + 0 = a</p>
<p>now here is my question: when I type rw add_zero, it replaces the first b + 0 - but why I type rw add_zero b, it get rids of the second. Why is this? And why does it not get rid of both? Is there a way to replace all instances at once? Is there a way to replace a specific instance</p>



<a name="293332946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293332946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293332946">(Aug 14 2022 at 00:45)</a>:</h4>
<p>Online it says rw rewites all terms simultaneously - so what am I doing wrong?</p>



<a name="293333307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333307">(Aug 14 2022 at 00:54)</a>:</h4>
<p><code>a + b + 0</code> is actually <code>(a + b) + 0</code>, so "the first b + 0" doesn't exist, and what rewrite does there is <code>rw add_zero (a + b)</code>. If there were actually two <code>b + 0</code>s, they would be both replaced, but here it's not the case.</p>
<p><span class="user-group-mention" data-user-group-id="2494">@maintainers</span>  These should be moved to another thread.</p>



<a name="293333523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333523">(Aug 14 2022 at 01:00)</a>:</h4>
<p>anyone can move posts to another thread</p>



<a name="293333623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333623">(Aug 14 2022 at 01:02)</a>:</h4>
<p>It seems I cannot<br>
<a href="https://zulip.com/help/move-content-to-another-topic">https://zulip.com/help/move-content-to-another-topic</a><br>
<a href="/user_uploads/3121/llm9zrI9m55l4a-3jskvzW9V/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/llm9zrI9m55l4a-3jskvzW9V/image.png" title="image.png"><img src="/user_uploads/3121/llm9zrI9m55l4a-3jskvzW9V/image.png"></a></div>



<a name="293333715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333715">(Aug 14 2022 at 01:04)</a>:</h4>
<p>oh, I guess that got changed to mod-only</p>



<a name="293333716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333716">(Aug 14 2022 at 01:04)</a>:</h4>
<p>I mean I can presumably move my own post by Edit the title, but not <span class="user-mention" data-user-id="522827">@Lucy M</span>'s posts.</p>



<a name="293333754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333754">(Aug 14 2022 at 01:05)</a>:</h4>
<p>I apologise, I did not mean to make the post here. i clicked on 'new members' so I thought it would create a new thread. I tried to move it after I posted it but I can't.</p>



<a name="293333868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293333868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293333868">(Aug 14 2022 at 01:07)</a>:</h4>
<p>it's all good!</p>



<a name="293334116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293334116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293334116">(Aug 14 2022 at 01:12)</a>:</h4>
<p>I have one more question if that is alright</p>
<p>my solution was this:</p>
<p>induction c with d hd,<br>
  rw add_zero (a + b),<br>
  rw add_zero b,<br>
  refl,</p>
<p>rw add_succ b d,<br>
  rw add_succ a (b + d),<br>
  rw add_succ (a+b),<br>
  rw ← hd,<br>
  refl,</p>
<p>and the 'offical'  solution was this</p>
<p>induction c with d hd,<br>
  { -- ⊢ a + b + 0 = a + (b + 0)<br>
    rw add_zero,<br>
    rw add_zero,<br>
    refl<br>
  },<br>
  { -- ⊢ (a + b) + succ d = a + (b + succ d)<br>
    rw add_succ,<br>
    rw add_succ,<br>
    rw add_succ,<br>
    rw hd,<br>
    refl,<br>
  }</p>
<p>my question is what are the braces for? I tried again to search on google - but I could only get results about the braces being used in different contexts</p>



<a name="293334129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293334129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293334129">(Aug 14 2022 at 01:12)</a>:</h4>
<p>(<a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a>)</p>



<a name="293334161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293334161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293334161">(Aug 14 2022 at 01:13)</a>:</h4>
<p>The braces denote subgoals. They ensure that the subgoal is closed at the close brace, so they provide better structuring of the proof</p>



<a name="293334212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293334212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293334212">(Aug 14 2022 at 01:14)</a>:</h4>
<p>you simulated that with an extra newline, but the braces are checked by lean</p>



<a name="293334226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293334226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293334226">(Aug 14 2022 at 01:14)</a>:</h4>
<p>Ah, thank you - I understand, and thank you for letting me know ``` works as well!</p>



<a name="293335892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293335892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293335892">(Aug 14 2022 at 01:55)</a>:</h4>
<p>Is there a way to put a lemma inside a lemma. There is a small theorem I want to make in order to make the puzzle easier but I get lots of errors when I try it</p>



<a name="293335947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293335947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293335947">(Aug 14 2022 at 01:56)</a>:</h4>
<p><code>have my_lemma : statement, { proof },</code></p>



<a name="293336229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336229">(Aug 14 2022 at 02:02)</a>:</h4>
<p>thank you, but I think I've done it wrong</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="n">add_succ_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">mynat</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">succ</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">induction</span> <span class="n">a</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">rw</span> <span class="n">zero_add</span> <span class="o">(</span><span class="n">succ</span> <span class="mi">0</span><span class="o">),</span>
    <span class="o">},</span>
    <span class="o">{</span>
    <span class="n">rw</span> <span class="n">add_succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">d</span><span class="o">)</span> <span class="mi">0</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">add_zero</span> <span class="o">(</span><span class="n">succ</span> <span class="n">d</span><span class="o">),</span>
    <span class="o">},</span>
  <span class="o">},</span>
</code></pre></div>
<p>This is what I've wrote but I get an "unexpected identifier a" error on line 35 and "sync" on line 36</p>



<a name="293336410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336410">(Aug 14 2022 at 02:07)</a>:</h4>
<p>"<code>my_lemma : statement</code>" needs to be an ordinary type signature, not the syntax found in a top-level <code>lemma</code>. So</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="k">have</span> <span class="n">add_succ_zero</span> <span class="o">:</span> <span class="bp">\</span><span class="n">all</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">mynat</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">succ</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">a</span><span class="o">,</span>
</code></pre></div>
<p>then you will need to <code>intro a</code> in the proof</p>



<a name="293336460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucy M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336460">(Aug 14 2022 at 02:08)</a>:</h4>
<p>Thank you, I'm having a lot of trouble googling for this language - do you have any online resources I can use to learn the syntax?</p>



<a name="293336485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336485">(Aug 14 2022 at 02:09)</a>:</h4>
<p>Have you read <a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a>?</p>



<a name="293336628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336628">(Aug 14 2022 at 02:12)</a>:</h4>
<p>note that you might want to leave NNG and use lean proper if you are going to learn the syntax</p>



<a name="293336737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293336737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293336737">(Aug 14 2022 at 02:14)</a>:</h4>
<p>NNG is designed so that you don't have to really interact with the syntax of the language except for the small tactic vocabulary it teaches. I don't think it even teaches braces</p>



<a name="293362833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293362833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293362833">(Aug 14 2022 at 10:06)</a>:</h4>
<p>No, I sometimes regret not teaching braces but students seemed to be happy with the idea that tactics just worked on the top goal so what the heck. I just feel a bit guilty that in some sense it's actively teaching bad style.</p>



<a name="293378690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20replaces%20first%20occurrence/near/293378690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20only.20replaces.20first.20occurrence.html#293378690">(Aug 14 2022 at 12:42)</a>:</h4>
<p>I never teach braces because students are so confused when they get braces wrong. Error messages in Lean 3 are not very helpful when your braces aren't balanced or when you forget a comma after a closing brace.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>