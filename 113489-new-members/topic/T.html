---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/T.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html">T</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201783598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201783598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201783598">(Jun 23 2020 at 21:10)</a>:</h4>
<p>I am trying to show that, in with_top \Z , T \neq 0. </p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">with_top</span><span class="bp">.</span><span class="n">coe_zero</span><span class="o">,</span>
<span class="c">/-</span><span class="cm">apply with_top.top_ne_zero,  does not work out-/</span>
 <span class="c">/-</span><span class="cm">apply with_top.none_lt_some, does not work out -/</span>
<span class="n">exfalso</span><span class="o">,</span>
 <span class="c">/-</span><span class="cm">apply with_top.zero_lt_top,  dows not work out-/</span>
<span class="n">apply</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">top_ne_coe</span><span class="o">,</span>
</code></pre></div>


<p>does not work. This code gives me 3 goals,</p>
<div class="codehilite"><pre><span></span><code><span class="err">⊢</span> <span class="err">⊤</span> <span class="bp">=</span> <span class="err">↑?</span><span class="n">m_2</span>
<span class="err">⊢</span> <span class="kt">Type</span> <span class="err">?</span>
<span class="err">⊢</span> <span class="err">?</span><span class="n">m_1</span>
</code></pre></div>


<p>I don't know how to solve this. Any help is appreciated. Thank you!</p>



<a name="201784152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201784152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201784152">(Jun 23 2020 at 21:14)</a>:</h4>
<p>This works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="err">⊤</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨⟩</span><span class="o">,</span>  <span class="c1">-- you can do intro h, then cases h, or combine this into the line here</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201784520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201784520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201784520">(Jun 23 2020 at 21:16)</a>:</h4>
<p>The idea is that <code>with_top \Z</code> has two constructors, one from an element of <code>\Z</code> or <code>\top</code>, which are then the two possible (disjoint) cases for what an element of <code>with_top \Z</code> can be. <code>cases</code> splits into the different possibilities for the equality, but in this case there are none, so <code>intro h, cases h</code> does it, using <code>rintro</code> instead is just a fancy lazy (shorter) way of doing the same thing.</p>



<a name="201785277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201785277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201785277">(Jun 23 2020 at 21:23)</a>:</h4>
<p>Is there a way of making cases for a goal?</p>



<a name="201785508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201785508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201785508">(Jun 23 2020 at 21:25)</a>:</h4>
<p>Can you give an example?</p>



<a name="201785647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201785647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201785647">(Jun 23 2020 at 21:26)</a>:</h4>
<p>I think what you want is <code>split</code>, but not sure of what you're looking for</p>



<a name="201785773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201785773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201785773">(Jun 23 2020 at 21:27)</a>:</h4>
<p>That does not seem to be working out :(</p>



<a name="201785882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201785882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201785882">(Jun 23 2020 at 21:28)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ?</p>



<a name="201786333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201786333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201786333">(Jun 23 2020 at 21:32)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">ideals</span>

<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">principal_ideal_domain</span>

<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">localization</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">class</span> <span class="n">discrete_valuation_field</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">-&gt;</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="o">)</span>
<span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="n">y</span><span class="o">)</span> <span class="o">)</span>
<span class="o">(</span><span class="n">add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≥</span> <span class="n">min</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="n">y</span><span class="o">))</span> <span class="o">)</span>
<span class="o">(</span><span class="n">non_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">)</span>

<span class="kn">namespace</span> <span class="n">discrete_valuation_field</span>

<span class="kn">definition</span> <span class="n">discrete_valuation_field</span><span class="bp">.</span><span class="n">valuation</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span> <span class="n">discrete_valuation_field</span> <span class="n">K</span> <span class="o">]</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">-&gt;</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">discrete_valuation_field</span><span class="bp">.</span><span class="n">val</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">discrete_valuation_field</span> <span class="n">K</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- a = ⊤ case</span>
    <span class="n">left</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span> <span class="c1">-- true by definition</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- ℤ case</span>
    <span class="n">right</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span> <span class="c1">-- true by definition</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
<span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
<span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
<span class="n">cases</span> <span class="o">(</span><span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)))</span> <span class="k">with</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">h1</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">h1</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">g</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201786431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201786431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201786431">(Jun 23 2020 at 21:33)</a>:</h4>
<p>(deleted)</p>



<a name="201787856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201787856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201787856">(Jun 23 2020 at 21:45)</a>:</h4>
<p>in your example, this line fails for me</p>
<div class="codehilite"><pre><span></span><code><span class="n">cases</span> <span class="o">(</span><span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)))</span> <span class="k">with</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
</code></pre></div>


<p>with error unknown identifier 'with_top.cases'</p>



<a name="201788033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201788033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201788033">(Jun 23 2020 at 21:47)</a>:</h4>
<p>Edited</p>



<a name="201788250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201788250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201788250">(Jun 23 2020 at 21:49)</a>:</h4>
<p>I think you need to use <code>non_zero</code> in the first case.</p>



<a name="201788782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201788782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201788782">(Jun 23 2020 at 21:54)</a>:</h4>
<p>And here is how you could use the built in cases instead of your lemma, its a bit weird though, because it writes <code>none</code> instead of top everywhere, so using the lemma might be nicer.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
<span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
<span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">t</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">none_eq_top</span> <span class="n">at</span> <span class="n">t</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">non_zero</span> <span class="n">at</span> <span class="n">t</span><span class="o">,</span>
<span class="n">exfalso</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">one_ne_zero</span> <span class="n">t</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201788919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201788919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201788919">(Jun 23 2020 at 21:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/T/near/201788250">said</a>:</p>
<blockquote>
<p>I think you need to use <code>non_zero</code> in the first case.</p>
</blockquote>
<p>Oh yes, I had tried this. But some error kept coming up.</p>



<a name="201788984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201788984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201788984">(Jun 23 2020 at 21:56)</a>:</h4>
<p>did you read the error?</p>



<a name="201789132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201789132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201789132">(Jun 23 2020 at 21:58)</a>:</h4>
<p>Well, as soon as I proved 1 \neq 0, I think g disappeared, which was no help.</p>



<a name="201789197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201789197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201789197">(Jun 23 2020 at 21:58)</a>:</h4>
<p>you'll have less problems with "disappearing lemmas" if you use focusing braces</p>



<a name="201789274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201789274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201789274">(Jun 23 2020 at 21:59)</a>:</h4>
<p>like this</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">f</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span> <span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
  <span class="n">cases</span> <span class="o">(</span><span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)))</span> <span class="k">with</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">contrapose</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">discrete_valuation_field</span><span class="bp">.</span><span class="n">non_zero</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201789720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201789720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201789720">(Jun 23 2020 at 22:03)</a>:</h4>
<p>Oh ok. I will keep that in mind. Thank you!</p>



<a name="201790021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201790021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201790021">(Jun 23 2020 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/T/near/201788782">said</a>:</p>
<blockquote>
<p>And here is how you could use the built in cases instead of your lemma, its a bit weird though, because it writes <code>none</code> instead of top everywhere, so using the lemma might be nicer.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
<span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
<span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">t</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">none_eq_top</span> <span class="n">at</span> <span class="n">t</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">non_zero</span> <span class="n">at</span> <span class="n">t</span><span class="o">,</span>
<span class="n">exfalso</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">one_ne_zero</span> <span class="n">t</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


</blockquote>
<p>Thank you!</p>



<a name="201790876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/T/near/201790876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/T.html#201790876">(Jun 23 2020 at 22:15)</a>:</h4>
<p>here's what I would write. probably the thing of most interest is the use of the <code>lift</code> tactic.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">ideals</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">principal_ideal_domain</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">localization</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">class</span> <span class="n">discrete_valuation_field</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">-&gt;</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="o">)</span>
<span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="n">y</span><span class="o">)</span> <span class="o">)</span>
<span class="o">(</span><span class="n">add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≥</span> <span class="n">min</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">val</span><span class="o">(</span><span class="n">y</span><span class="o">))</span> <span class="o">)</span>
<span class="o">(</span><span class="n">non_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">val</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">)</span>

<span class="kn">namespace</span> <span class="n">discrete_valuation_field</span>

<span class="n">def</span> <span class="n">discrete_valuation_field</span><span class="bp">.</span><span class="n">valuation</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span> <span class="n">discrete_valuation_field</span> <span class="n">K</span> <span class="o">]</span> <span class="o">:</span>
<span class="n">K</span> <span class="bp">-&gt;</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">discrete_valuation_field</span><span class="bp">.</span><span class="n">val</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">discrete_valuation_field</span> <span class="n">K</span><span class="o">]</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">α</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">coe</span> <span class="o">:=</span> <span class="n">some</span><span class="o">}</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">can_lift</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="o">{</span><span class="n">coe</span> <span class="o">:=</span> <span class="n">coe</span><span class="o">,</span> <span class="n">cond</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≠</span> <span class="err">⊤</span><span class="o">,</span> <span class="n">prf</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
  <span class="n">intros</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="o">{</span> <span class="n">contrapose</span><span class="bp">!</span> <span class="n">a</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">f</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span> <span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
  <span class="n">lift</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span> <span class="n">to</span> <span class="bp">ℤ</span> <span class="k">with</span> <span class="n">d</span><span class="o">,</span>
  <span class="n">swap</span><span class="o">,</span> <span class="o">{</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">non_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">norm_cast</span><span class="o">,</span> <span class="n">norm_cast</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>