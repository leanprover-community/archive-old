---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Non-terminal.20rings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html">Non-terminal rings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207136074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Arthur <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136074">(Aug 17 2020 at 12:21)</a>:</h4>
<p>I've heard about non-terminal <code>simp</code>s, but is there a similar rule for <code>ring</code>s ? Its mentioned in <a href="https://github.com/leanprover-community/mathlib/issues/3801">#3801</a> and I thought I'd ask here. <span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> looked through mathlib and saw it never happened.</p>



<a name="207136254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136254">(Aug 17 2020 at 12:23)</a>:</h4>
<p>non-terminal rings are also uncool I think. Why would you need one?</p>



<a name="207136345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136345">(Aug 17 2020 at 12:24)</a>:</h4>
<p>I suspect it's less brittle - <code>simp</code> output could change as a result of simp lemmas changing (and maybe imports?), but I think <code>ring</code> output will only change if the tactic itself changes. They both do have the issue that the output is not clearly specified, though</p>



<a name="207136379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136379">(Aug 17 2020 at 12:24)</a>:</h4>
<p>I don't remember where, but I've had cases where I needed to do <code>ring, ring</code> to finish</p>



<a name="207136407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136407">(Aug 17 2020 at 12:25)</a>:</h4>
<p><code>ring</code> uses <code>simp</code> I believe, which is probably why it's not an ideal tactic if you're not finishing. The <code>ring, ring</code> thing is a bug, this is to do with metavariables</p>



<a name="207136456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136456">(Aug 17 2020 at 12:25)</a>:</h4>
<p>Oh, does it? That makes sense, then</p>



<a name="207136530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207136530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207136530">(Aug 17 2020 at 12:26)</a>:</h4>
<p>I might be wrong, but I think it uses <code>simp</code> to try and tidy up if it doesn't close the goal</p>



<a name="207137656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207137656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Arthur <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207137656">(Aug 17 2020 at 12:39)</a>:</h4>
<p>If its bad, I can refactor code. I kind of used it as a short cut not to write out a load of rewrites. Thanks, I'll go refactor some code.</p>



<a name="207139184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207139184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207139184">(Aug 17 2020 at 12:54)</a>:</h4>
<p><span class="user-mention" data-user-id="304228">@James Arthur</span> there's always a smarter way to use less automation:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">special_functions</span><span class="bp">.</span><span class="n">trigonometric</span>

<span class="kn">open</span> <span class="n">real</span>
<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="kn">private</span> <span class="kn">lemma</span> <span class="n">aux_lemma</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span><span class="o">))</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="o">(</span><span class="n">eq_one_div_of_mul_eq_one</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">add_nonneg</span> <span class="n">zero_le_one</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="n">x</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="err">←</span> <span class="n">sub_eq_neg_add</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_self_sub_mul_self</span><span class="o">,</span>
      <span class="n">mul_self_sqrt</span> <span class="n">this</span><span class="o">,</span> <span class="n">pow_two</span><span class="o">,</span> <span class="n">add_sub_cancel</span><span class="o">]</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207155929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207155929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207155929">(Aug 17 2020 at 15:15)</a>:</h4>
<p><code>ring</code> actually has a separate tidying step, not <code>simp</code>, that is done if it can't close the goal. The idea is to write the polynomial more plainly so you can see why it's not zero. It is intended primarily for debugging your proof, I wouldn't suggest using it non-terminally.</p>



<a name="207156337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Non-terminal%20rings/near/207156337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Non-terminal.20rings.html#207156337">(Aug 17 2020 at 15:17)</a>:</h4>
<p>ring uses the core simplifier routine internally but not anything that makes it <code>simp</code>, i.e. the default simp set</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>