---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html">equivalence relations of matrices</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269137837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269137837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Packer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269137837">(Jan 24 2022 at 17:13)</a>:</h4>
<p>Hi,<br>
I'm trying to show the matrix (unitary) similarity is an equivalence relation, but I keep running into the problem that Lean can't infer the size of the matrices I'm declaring the equivalence relation on, and I'm not sure how to tell it to use 'n' and 'F'</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.inner_product_space.pi_L2</span>
<span class="kn">import</span> <span class="n">linear_algebra.dimension</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix</span>

<span class="n">open_locale</span> <span class="n">big_operators</span> <span class="n">matrix</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">F</span> <span class="n">m</span> <span class="n">n</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">is_R_or_C</span> <span class="n">F</span><span class="o">]</span>
  <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">[</span><span class="n">has_lt</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">has_lt</span> <span class="n">n</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">F</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">unitarily_similar</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">U</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">F</span><span class="o">,</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">U</span> <span class="bp">⬝</span> <span class="n">B</span> <span class="bp">⬝</span> <span class="n">U</span><span class="bp">ᴴ</span>

<span class="kd">def</span> <span class="n">equality</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>

<span class="kd">def</span> <span class="n">matrix_equal</span> <span class="o">:=</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">B</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">matrix_equal</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269137932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269137932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Packer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269137932">(Jan 24 2022 at 17:13)</a>:</h4>
<p>This throws the error: <a href="/user_uploads/3121/Sz2AzsiDeE9NlSmg91rnd9Te/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Sz2AzsiDeE9NlSmg91rnd9Te/image.png" title="image.png"><img src="/user_uploads/3121/Sz2AzsiDeE9NlSmg91rnd9Te/image.png"></a></div>



<a name="269138039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269138039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Packer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269138039">(Jan 24 2022 at 17:14)</a>:</h4>
<p>(I'm using matrix_equal in case the existential quantifier had something to do with the error)</p>



<a name="269139173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269139173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269139173">(Jan 24 2022 at 17:22)</a>:</h4>
<p>The error message says it all. How could it know what the type of <code>matrix_equal</code> is? You need to type-ascript.</p>



<a name="269139273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269139273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269139273">(Jan 24 2022 at 17:23)</a>:</h4>
<p>One way to do it is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">@</span><span class="n">equivalence</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">F</span><span class="o">)</span> <span class="n">matrix_equal</span> <span class="o">:=</span>
</code></pre></div>



<a name="269139667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269139667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Packer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269139667">(Jan 24 2022 at 17:25)</a>:</h4>
<p>Ah! Thank you so much. I was trying various versions of that, but I couldn't figure out the right one</p>



<a name="269142411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269142411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269142411">(Jan 24 2022 at 17:46)</a>:</h4>
<p>You might also consider making <code>F</code> and <code>n</code> be explicit arguments:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.inner_product_space.pi_L2</span>
<span class="kn">import</span> <span class="n">linear_algebra.dimension</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix</span>

<span class="n">open_locale</span> <span class="n">big_operators</span> <span class="n">matrix</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="o">[</span><span class="n">is_R_or_C</span> <span class="n">F</span><span class="o">]</span>
  <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">[</span><span class="n">has_lt</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">has_lt</span> <span class="n">n</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">F</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">unitarily_similar</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">U</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">F</span><span class="o">,</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">U</span> <span class="bp">⬝</span> <span class="n">B</span> <span class="bp">⬝</span> <span class="n">U</span><span class="bp">ᴴ</span>

<span class="kd">def</span> <span class="n">equality</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>

<span class="kd">def</span> <span class="n">matrix_equal</span> <span class="o">:=</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">B</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="o">(</span><span class="n">matrix_equal</span> <span class="n">n</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="269172656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269172656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269172656">(Jan 24 2022 at 21:04)</a>:</h4>
<p>Note the proof should be one line, it's <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_equivalence">docs#eq_equivalence</a> or similar</p>



<a name="269174308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/equivalence%20relations%20of%20matrices/near/269174308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Packer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/equivalence.20relations.20of.20matrices.html#269174308">(Jan 24 2022 at 21:19)</a>:</h4>
<p>I assume you mean for the matrix equality one? For unitarily similar, my proof was longer</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>