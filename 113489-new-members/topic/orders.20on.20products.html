---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/orders.20on.20products.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html">orders on products</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="151190056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190056">(Dec 08 2018 at 19:06)</a>:</h4>
<p>I want definitions like</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">prod_has_le</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">has_le</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_le</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_le</span> <span class="o">(</span><span class="n">prod</span> <span class="n">α</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le</span>            <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">∧</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">.</span><span class="mi">2</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="n">prod_preorder</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">preorder</span> <span class="o">(</span><span class="n">prod</span> <span class="n">α</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le_refl</span>       <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">le_refl</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">le_refl</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">le_trans</span>      <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">le_trans</span> <span class="n">h₁</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">le_trans</span> <span class="n">h₁</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">prod_has_le</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="n">prod_partial_order</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">partial_order</span> <span class="o">(</span><span class="n">prod</span> <span class="n">α</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le_antisymm</span>   <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">prod</span><span class="bp">.</span><span class="n">ext</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h₁</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">le_antisymm</span> <span class="n">h₁</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h₂</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
  <span class="bp">..</span> <span class="n">prod_preorder</span> <span class="o">}</span>
</pre></div>


<p>(At the moment just for ℕ × ℕ, Cauchy sequences and contraction mapping theorem, but probably for more later on.)</p>
<p>These don't seem already to be in mathlib, so should I assume there is some good reason to exclude them? And if so, can I use some namespace trick to define them 'locally'?</p>



<a name="151190145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190145">(Dec 08 2018 at 19:08)</a>:</h4>
<p>I think <code>attribute local instance</code> works for something which is already defined.</p>



<a name="151190211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190211">(Dec 08 2018 at 19:09)</a>:</h4>
<p>For example this is from TPIL:</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">classical</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">prop_decidable</span>
</pre></div>


<p>(after <code>prop_decidable</code> has been defined)</p>



<a name="151190359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190359">(Dec 08 2018 at 19:12)</a>:</h4>
<p>"However, such commands can often be prefixed with the local modifier, which indicates that they only have effect until the current section or namespace is closed, or until the end of the current file."</p>



<a name="151190458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190458">(Dec 08 2018 at 19:14)</a>:</h4>
<p>Thanks, I'll do that then.</p>



<a name="151190659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190659">(Dec 08 2018 at 19:19)</a>:</h4>
<p>It would not surprise me if there were a trick to do it all in one go. Does <code>local instance...</code> not work?</p>



<a name="151190672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151190672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151190672">(Dec 08 2018 at 19:19)</a>:</h4>
<p>Oh! Do you need to import <code>pi_instances</code> or something? Maybe they're there?</p>



<a name="151194606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151194606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151194606">(Dec 08 2018 at 20:52)</a>:</h4>
<p>Hmm possibly. I didn't know about pi_instances.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">pi_instances</span>

<span class="n">def</span> <span class="n">a</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">i</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">2</span>
<span class="n">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">i</span> <span class="k">then</span> <span class="mi">3</span> <span class="k">else</span> <span class="mi">4</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span>
</pre></div>



<a name="151194675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151194675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151194675">(Dec 08 2018 at 20:54)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">pi_instances</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span>
<span class="n">partial_order</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span> <span class="c1">-- fails</span>
</pre></div>


<p>I thought it might work out of the box. But no.</p>



<a name="151194686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/orders%20on%20products/near/151194686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/orders.20on.20products.html#151194686">(Dec 08 2018 at 20:55)</a>:</h4>
<p>Maybe the reason it's not an instance is that some people might want to use lex order in some cases</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>