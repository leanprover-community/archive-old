---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/emacs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html">emacs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="136338426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136338426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136338426">(Oct 23 2018 at 14:02)</a>:</h4>
<p>how to show a type info of a region? If I have a cursor on a symbol it shows me in the mini-buffer the type, but if I select an expression I don't have the type in the mini-buffer.</p>



<a name="136338688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136338688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136338688">(Oct 23 2018 at 14:07)</a>:</h4>
<p>There's a hole command for doing this -- put <code>{! !}</code> around the expression. Then there's a key command to trigger the hole command but I forget what it is in emacs.</p>



<a name="136338703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136338703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136338703">(Oct 23 2018 at 14:07)</a>:</h4>
<p><code>C-c SPC</code></p>



<a name="136339059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136339059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136339059">(Oct 23 2018 at 14:13)</a>:</h4>
<p>hum, it didn't find one valid identifier. Assuming that once the mini-buffer is called I have to use the <code>Infer</code></p>



<a name="136339372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136339372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136339372">(Oct 23 2018 at 14:17)</a>:</h4>
<p>It should say "Infer type of the expression in the hole", maybe it's not displaying properly. Hole commands are slightly buggy sometimes. Do you have a small example I could try?</p>



<a name="136339447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136339447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136339447">(Oct 23 2018 at 14:18)</a>:</h4>
<p>I'm on VS Code, so we can at least see if it's an editor issue.</p>



<a name="136339920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/136339920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#136339920">(Oct 23 2018 at 14:25)</a>:</h4>
<p>I will try with VS. Maybe I can isolate a fragment to show here. I will try</p>



<a name="197815237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815237">(May 16 2020 at 21:06)</a>:</h4>
<p>I'm trying to edit some files in mathlib in emacs with lean-mode, and I'm getting a ton of "excessive memory consumption detected" errors. I don't normally get these errors when editing lean files in smaller projects.</p>



<a name="197815249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815249">(May 16 2020 at 21:07)</a>:</h4>
<p>you ran out of memory, random things are failing. Restart lean</p>



<a name="197815256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815256">(May 16 2020 at 21:07)</a>:</h4>
<p>Sorry, what does "restart lean" mean? Should I restart emacs?</p>



<a name="197815259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815259">(May 16 2020 at 21:07)</a>:</h4>
<p>ah, I don't know what the emacs command for this is</p>



<a name="197815299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815299">(May 16 2020 at 21:08)</a>:</h4>
<p>in vscode there is a "Lean: Restart" command</p>



<a name="197815319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815319">(May 16 2020 at 21:09)</a>:</h4>
<p>C-c C-r</p>



<a name="197815370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815370">(May 16 2020 at 21:10)</a>:</h4>
<p>The cause could also be you accidentally modified something in mathlib and need to rebuild it</p>



<a name="197815374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815374">(May 16 2020 at 21:10)</a>:</h4>
<p>That worked, ty!</p>



<a name="197815396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815396">(May 16 2020 at 21:11)</a>:</h4>
<p>Can I increase the memory consumption limit to prevent the error from occuring again?</p>



<a name="197815399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815399">(May 16 2020 at 21:11)</a>:</h4>
<p>Yes</p>



<a name="197815418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815418">(May 16 2020 at 21:11)</a>:</h4>
<p>I have this among my custom-set-variables:</p>
<div class="codehilite"><pre><span></span><code> <span class="o">&#39;</span><span class="p">(</span><span class="nv">lean-memory-limit</span> <span class="mi">8192</span><span class="p">)</span>
</code></pre></div>



<a name="197815422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815422">(May 16 2020 at 21:11)</a>:</h4>
<p>I think it means 8G</p>



<a name="197815460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197815460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197815460">(May 16 2020 at 21:12)</a>:</h4>
<p>The default is ridiculously low</p>



<a name="197819159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197819159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197819159">(May 16 2020 at 22:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/emacs/near/197815418">said</a>:</p>
<blockquote>
<p>I have this among my custom-set-variables:</p>
<div class="codehilite"><pre><span></span><code> <span class="o">&#39;</span><span class="p">(</span><span class="nv">lean-memory-limit</span> <span class="mi">8192</span><span class="p">)</span>
</code></pre></div>


</blockquote>
<p>should VSCode users also worry about increasing the memory budget?</p>



<a name="197819582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197819582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sam Lichtenstein <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197819582">(May 16 2020 at 23:07)</a>:</h4>
<p>How does one set the VSCode analog of the lean-memory-limit emacs variable that Reid alludes to below?</p>



<a name="197821107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197821107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197821107">(May 16 2020 at 23:53)</a>:</h4>
<p>I'm not sure whether VSCode has the same default</p>



<a name="197821742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197821742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197821742">(May 17 2020 at 00:10)</a>:</h4>
<p><a href="https://github.com/leanprover/vscode-lean/blob/429eb5e182e4e31c618e6c2bdcc6b8feef1286d4/package.json#L34">The default for vscode-lean is 4096</a>. I've never had to change it.</p>



<a name="197833549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/197833549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#197833549">(May 17 2020 at 06:25)</a>:</h4>
<p>I think in emacs it's 1G for some reason.</p>



<a name="199279272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199279272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199279272">(May 30 2020 at 22:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113489-new-members/topic/emacs/near/197821742">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover/vscode-lean/blob/429eb5e182e4e31c618e6c2bdcc6b8feef1286d4/package.json#L34">The default for vscode-lean is 4096</a>. I've never had to change it.</p>
</blockquote>
<p>any advice on how to change it? my only strategy was to try <code>ctrl-shift-p: lean</code> in vscode and see if it had a button for "open the settings file"<br>
I'm currently in a state where I can use lean for a few minutes after restarting the server, but memory slowly leaks until it hits the limit, then i can't do anything and have to restart it. I have enough memory on my machine that "give it 3x more space" would be fine, and would let me live with this state for a while longer until i can figure out the cause</p>



<a name="199279426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199279426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199279426">(May 30 2020 at 22:43)</a>:</h4>
<p>Click the cog on the lean extension in the sidebar to open the extension settings, then scroll down to Lean: Memory limit</p>



<a name="199279489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199279489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199279489">(May 30 2020 at 22:45)</a>:</h4>
<p>hmm i'm not sure what "cog on the lean extension in the sidebar" means, actually I'm not sure I know "sidebar" means</p>



<a name="199279820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199279820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199279820">(May 30 2020 at 22:54)</a>:</h4>
<p>You can just go file -&gt; preferences -&gt; settings and then search for lean</p>



<a name="199280046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199280046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199280046">(May 30 2020 at 23:01)</a>:</h4>
<p>Here's a screenshot of the sidebar. The cog is at the very bottom. <a href="/user_uploads/3121/L21r8ZIiEViT_Grr_YvUgpX2/Screenshot-2020-05-30-19.00.46.png">Screenshot-2020-05-30-19.00.46.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/L21r8ZIiEViT_Grr_YvUgpX2/Screenshot-2020-05-30-19.00.46.png" title="Screenshot-2020-05-30-19.00.46.png"><img src="/user_uploads/3121/L21r8ZIiEViT_Grr_YvUgpX2/Screenshot-2020-05-30-19.00.46.png"></a></div>



<a name="199280068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199280068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199280068">(May 30 2020 at 23:01)</a>:</h4>
<p>I guess it's officially called the "Activity bar": <a href="https://code.visualstudio.com/docs/getstarted/userinterface">https://code.visualstudio.com/docs/getstarted/userinterface</a></p>



<a name="199280114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199280114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199280114">(May 30 2020 at 23:02)</a>:</h4>
<p>Thanks, I feel pretty silly. I clicked on that cog, but I thought I was looking for something lean specific</p>



<a name="199280126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199280126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199280126">(May 30 2020 at 23:03)</a>:</h4>
<p>Yeah, the way VS Code organizes settings definitely takes some getting used to.</p>



<a name="199280829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/emacs/near/199280829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/emacs.html#199280829">(May 30 2020 at 23:24)</a>:</h4>
<p>now that I've set my memory to 16k MB, i'm not getting weird errors, and <code>suggest</code> and <code>library_search</code> seem to be running significantly faster. my lean memory usage seems to hover just above 4GB most of the time and spike when i use the aforementiond search tactics</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>