---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html">what does motive is not type correct mean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="232853317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232853317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232853317">(Apr 02 2021 at 02:48)</a>:</h4>
<p>i encounter that error quite often and yeah i know there are like 998244353 ways to get around the error but I don't know what the error REALLY means</p>



<a name="232853340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232853340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232853340">(Apr 02 2021 at 02:49)</a>:</h4>
<p>thanks in advance lol</p>



<a name="232853452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232853452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232853452">(Apr 02 2021 at 02:51)</a>:</h4>
<p>I remember liking this discussion of the error and how to work around it in <a href="#narrow/stream/113488-general/topic/How.20to.20work.20with.20nth_le.3F/near/216451081">this older thread</a>.</p>



<a name="232879781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232879781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232879781">(Apr 02 2021 at 09:36)</a>:</h4>
<p>My impression is that the error is just because the rewrite tactic is not powerful enough rather than there being any profound reason for its failure. Prove me wrong!</p>



<a name="232879894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232879894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232879894">(Apr 02 2021 at 09:38)</a>:</h4>
<p>I would say it fails for a fundamental reason, but there are more clever ways to do <em>different</em> things that may not encounter this issue and instead suffer from different problems</p>



<a name="232881810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232881810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232881810">(Apr 02 2021 at 10:01)</a>:</h4>
<p>We have <code>congr_arg</code> (is it that one? The one that says if a=b then f(a)=f(b) ) so I don't see why this can't just be recursively applied everywhere until the motive is type correct. What am I missing?</p>



<a name="232881953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232881953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232881953">(Apr 02 2021 at 10:03)</a>:</h4>
<p>The issue is when <code>f</code> has a dependent type like <code>\all a : X, P a -&gt; B</code> and you want to rewrite <code>f a x = f b y</code> using <code>a = b</code></p>



<a name="232881998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232881998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232881998">(Apr 02 2021 at 10:03)</a>:</h4>
<p>you can't use <code>x = y</code> as a hypothesis because it is not type correct</p>



<a name="232882090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882090">(Apr 02 2021 at 10:04)</a>:</h4>
<p>You can use <code>x == y</code> and this is what the <code>congr</code> tactic does in practice, but <code>==</code> lacks a lot of properties of <code>=</code> that you would like here and in particular you can't rewrite with it or use <code>congr</code> on it to traverse further into subterms</p>



<a name="232882634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882634">(Apr 02 2021 at 10:10)</a>:</h4>
<p><code>x : P a</code> and <code>a=b</code> so <code>P a = P b</code> by <code>congr_arg</code> so <code>x : P b</code>. What is the problem here? I don't get it. I say again that a more powerful rewrite tactic could do this and that this whole motive not type correct thing is just a myth</p>



<a name="232882759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882759">(Apr 02 2021 at 10:12)</a>:</h4>
<blockquote>
<p>so <code>x : P b</code></p>
</blockquote>
<p>This is the problem. <code>x : P a</code> and <code>P a = P b</code> does not imply <code>x : P b</code> in intensional type theories</p>



<a name="232882792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882792">(Apr 02 2021 at 10:12)</a>:</h4>
<p>You can just rewrite the proof of P a = P b at x</p>



<a name="232882829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882829">(Apr 02 2021 at 10:13)</a>:</h4>
<p>What am I missing?</p>



<a name="232882832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882832">(Apr 02 2021 at 10:13)</a>:</h4>
<p>That won't prove <code>x : P b</code>, it will construct a new value of type <code>P b</code> which is not <code>x</code> but rather <code>eq.rec h x</code></p>



<a name="232882857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882857">(Apr 02 2021 at 10:13)</a>:</h4>
<p>The tactic state does some smoke and mirrors so that you don't notice this</p>



<a name="232882925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232882925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232882925">(Apr 02 2021 at 10:14)</a>:</h4>
<p>but this trick doesn't work when you are rewriting inside a term</p>



<a name="232883019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883019">(Apr 02 2021 at 10:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean/near/232882759">said</a>:</p>
<blockquote>
<blockquote>
<p>so <code>x : P b</code></p>
</blockquote>
<p>This is the problem. <code>x : P a</code> and <code>P a = P b</code> does not imply <code>x : P b</code> in intensional type theories</p>
</blockquote>
<p>This is not an issue that set theory, or extensional type theory, have</p>



<a name="232883098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883098">(Apr 02 2021 at 10:16)</a>:</h4>
<p>extensional type theory is where you add a rule that says that from <code>x = y</code> conclude that <code>x</code> is defeq to <code>y</code></p>



<a name="232883142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883142">(Apr 02 2021 at 10:17)</a>:</h4>
<p>I see. But then we could still have a tactic which does the rewrite rather than bailing out. We'd get <code>f b (h.rec x) = f b y</code></p>



<a name="232883154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883154">(Apr 02 2021 at 10:17)</a>:</h4>
<p>yep, that's <code>simp</code></p>



<a name="232883187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883187">(Apr 02 2021 at 10:17)</a>:</h4>
<p>I see!</p>



<a name="232883240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883240">(Apr 02 2021 at 10:18)</a>:</h4>
<p>The drawback is that some subterms are not accessible to <code>simp</code></p>



<a name="232883282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883282">(Apr 02 2021 at 10:18)</a>:</h4>
<p>I don't get this bit. You've still not given an example where the rewrite can't happen</p>



<a name="232883312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883312">(Apr 02 2021 at 10:19)</a>:</h4>
<p>Or are you just saying that we could have a better tactic?</p>



<a name="232883347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883347">(Apr 02 2021 at 10:19)</a>:</h4>
<p><code>congr</code> doesn't actually rewrite in all subterms, it will hold some things fixed when it thinks that it would be a bad idea to rewrite them because the recs upon recs get out of hand</p>



<a name="232883378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883378">(Apr 02 2021 at 10:20)</a>:</h4>
<p>for example, when rewriting <code>add A x y</code>, it will not rewrite at <code>A</code></p>



<a name="232883500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883500">(Apr 02 2021 at 10:21)</a>:</h4>
<p>because you would end up with <code>add B (h.rec x) (h.rec y)</code>, and now rewriting at <code>x</code> will only make things worse</p>



<a name="232883551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883551">(Apr 02 2021 at 10:22)</a>:</h4>
<p>let's say <code>x</code> is <code>a + b</code>, now associativity doesn't fire because you have <code>h.rec (a + b) + h.rec y</code> instead of <code>(a + b) + y</code></p>



<a name="232883630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883630">(Apr 02 2021 at 10:22)</a>:</h4>
<p>I would imagine that in the HoTT provers they are having to deal with recs upon recs all the time. We've been jumping through all sorts of hoops to define cohomology of a complex because of this. Should we just be much less scared of eq.rec and have an API for it making it something we can deal with more easily?</p>



<a name="232883637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883637">(Apr 02 2021 at 10:22)</a>:</h4>
<p>plus, <code>h</code> has some occurrences of <code>x</code> too, so you want to rewrite that too</p>



<a name="232883687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883687">(Apr 02 2021 at 10:23)</a>:</h4>
<p>yeah, this is a nightmare in HoTT, half the library has to be lemmas about how <code>h.rec</code> commutes with everything</p>



<a name="232883774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883774">(Apr 02 2021 at 10:24)</a>:</h4>
<p>We have an API for eq.rec in category theory, that's <code>eq_to_hom</code></p>



<a name="232883838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883838">(Apr 02 2021 at 10:25)</a>:</h4>
<p>For example I assume it's a theorem that h.rec (a+b) = h.rec a + h.rec b? Oh -- the point is that this isn't formal, right? If I have P : X -&gt; Type and then an add_group structure on P x then in practice I will know that the equality P a = P b is an isomorphism of groups, but am I right in thinking that this is not forced upon us by the type theory?</p>



<a name="232883842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883842">(Apr 02 2021 at 10:25)</a>:</h4>
<p>but it makes things only slightly less painful, by making it more explicit (instead of making it completely invisible like we would like)</p>



<a name="232883957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883957">(Apr 02 2021 at 10:26)</a>:</h4>
<blockquote>
<p>For example I assume it's a theorem that h.rec (a+b) = h.rec a + h.rec b?</p>
</blockquote>
<p>This is true, but not automatic. This is essentially saying that <code>+</code> is parametric in a certain way (keep in mind that the implicit args there are different in the two occurrences)</p>



<a name="232883996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232883996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232883996">(Apr 02 2021 at 10:27)</a>:</h4>
<p>Oh so it is true??</p>



<a name="232884004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884004">(Apr 02 2021 at 10:27)</a>:</h4>
<p>Equality is an isomorphism of groups</p>



<a name="232884360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884360">(Apr 02 2021 at 10:31)</a>:</h4>
<p>I think the issues come up when you can't just commute the <code>h.rec</code> because of the form of the function. For example if <code>f : A -&gt; T A</code>, and you have <code>h.rec (f a)</code> where <code>h : T A = T B</code>, you can't commute that to <code>f (h'.rec a)</code> where <code>h' : A = B</code> because you need <code>h'</code> to come from somewhere, and it isn't necessarily the case that <code>T</code> is injective</p>



<a name="232884462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884462">(Apr 02 2021 at 10:32)</a>:</h4>
<p>In ETT you wouldn't have any <code>h.rec</code> term so the commutation is trivial, <code>f a = f a</code></p>



<a name="232884537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884537">(Apr 02 2021 at 10:33)</a>:</h4>
<p>Right now in the homology2 branch Scott is trying the n'th iteration of this crazy idea of Johan to define a complex (which in a mathematician's mind is a bunch of groups <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> equipped with group homomorphisms <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>:</mo><msub><mi>A</mi><mi>i</mi></msub><mo>→</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">d:A_i\to A_{i+1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> satisfying <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>d</mi><mn>2</mn></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">d^2=0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>) by letting there be maps from <code>A i</code> to <code>A j</code> for all <code>i j : int</code> just to get around this motive nonsense. In some sense this is mathematicians giving up because they're scared of <code>eq_to_hom</code> but what really seems to be going on is that the decision to allow junk d's has just been deemed by the community to be the lesser of two evils.</p>



<a name="232884681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884681">(Apr 02 2021 at 10:34)</a>:</h4>
<p>I daren't ask what ETT is, I'm assuming it's not Lean</p>



<a name="232884694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884694">(Apr 02 2021 at 10:34)</a>:</h4>
<p>extensional type theory</p>



<a name="232884712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884712">(Apr 02 2021 at 10:35)</a>:</h4>
<p>like I said, make defeq just plain equality</p>



<a name="232884761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232884761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232884761">(Apr 02 2021 at 10:35)</a>:</h4>
<p>aka "set theory with types"</p>



<a name="232885414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232885414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232885414">(Apr 02 2021 at 10:45)</a>:</h4>
<p>Going back to this <code>T</code> example above, it looks spurious to me.  If you have <code>h : T A = T B</code> and if <code>T</code> isn't injective, a mathematician wouldn't expect to be able to turn <code>h.rec (f a)</code> into <code>f (h'.rec  a)</code> in general because maybe <code>A</code> doesn't equal <code>B</code>. However if <code>A</code> <em>does</em> equal <code>B</code> then we have <code>h' : A = B</code> and now one can prove that <code>h = congr_arg T h'</code> because they're terms of a proposition, and now <code>h.rec (f a) =  (h'.rec a)</code> is I guess unproblematic.</p>



<a name="232886142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232886142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232886142">(Apr 02 2021 at 10:55)</a>:</h4>
<blockquote>
<p>then we have <code>h' : A = B</code></p>
</blockquote>
<p>Who is "we" here? Somehow the tactic needs to know or discover this</p>



<a name="232886210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232886210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232886210">(Apr 02 2021 at 10:56)</a>:</h4>
<p>You could have a lemma that says <code>(congr_arg T h').rec (f a) = f (h'.rec a)</code> but that won't fire as a simp lemma</p>



<a name="232888403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232888403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232888403">(Apr 02 2021 at 11:25)</a>:</h4>
<p>Right -- I guess what I am trying to understand right now is what things would look like if we just defined complexes the way mathematicians would like to define them and then instead of just giving up with the first eq.rec we instead learn how to battle it.</p>



<a name="232888671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232888671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232888671">(Apr 02 2021 at 11:29)</a>:</h4>
<p>I don't think I can say anything in particular without a more concrete setting - there will be battles to be had, and they can be overcome by various application-specific techniques</p>



<a name="232888685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232888685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232888685">(Apr 02 2021 at 11:29)</a>:</h4>
<p>please feel free to try</p>



<a name="232889529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232889529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232889529">(Apr 02 2021 at 11:41)</a>:</h4>
<p>Basically I think I am saying that now I actually understand what's going on a bit better I should try the cdga game again but in a different way -- battling the recs head on. Or maybe I'll just play the homology game. Maybe it will just be horrible!</p>



<a name="232958475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232958475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232958475">(Apr 02 2021 at 22:19)</a>:</h4>
<p>I played around with some lemmas about eq.rec in <a href="https://github.com/leanprover-community/mathlib/issues/6837">#6837</a></p>



<a name="232958497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232958497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232958497">(Apr 02 2021 at 22:19)</a>:</h4>
<p>The rest of the PR is junk, but those lemmas may be worth salvaging</p>



<a name="232958625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232958625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232958625">(Apr 02 2021 at 22:21)</a>:</h4>
<p>Notably this one covered some versions of <span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span>'s addition example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">rec_apply₂</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span><span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ι</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">C</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">B</span> <span class="n">i</span><span class="o">),</span>
  <span class="n">h.rec</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">j</span> <span class="o">(</span><span class="n">h.rec</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h.rec</span> <span class="n">y</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">_</span> <span class="n">rfl</span> <span class="n">f</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="232960835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232960835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232960835">(Apr 02 2021 at 22:49)</a>:</h4>
<p>I'm not sure whether in pushing for more eq.rec or less. I was talking to Amelia recently who has been avoiding == in her MSc thesis but then Chris Hughes told her that it wasn't that hard to work with really; on the other hand it gets a lot of bad press around here.</p>



<a name="232962541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232962541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232962541">(Apr 02 2021 at 23:10)</a>:</h4>
<p>If you are in DTT hell then heq is certainly going to be one of the tools in your tool belt. There are a couple different things like <code>subst</code> and <code>eq.rec</code> and <code>==</code> and pattern matching on <code>rfl</code> and <code>congr_arg</code> that get used in these kinds of proofs, and they are all problematic in entirely different ways. If you are lucky you can navigate between them and avoid the pitfalls</p>



<a name="232962575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232962575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232962575">(Apr 02 2021 at 23:11)</a>:</h4>
<p>For example, notice that theorems like <code>rec_apply</code> are always very easy to prove, they are always just "case on rfl, rfl"</p>



<a name="232962605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232962605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232962605">(Apr 02 2021 at 23:11)</a>:</h4>
<p>however, the stating the theorem is complex, and it's difficult to create these theorems on the fly in the middle of a proof, you have to generalize exactly the right things</p>



<a name="232962803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232962803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232962803">(Apr 02 2021 at 23:14)</a>:</h4>
<p>For example, take a look at this file from the lean 2 hott library: <a href="https://github.com/leanprover/lean2/blob/master/hott/init/path.hlean">https://github.com/leanprover/lean2/blob/master/hott/init/path.hlean</a> and notice how many theorems are proved <code>by induction p; refl</code></p>



<a name="232963118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232963118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232963118">(Apr 02 2021 at 23:18)</a>:</h4>
<p>but it's also believed that the (first order) theory of equality is not "finitely axiomatizable" with a fixed number of theorems like the ones in that file, you get associators that commute with inverses, and these operators are themselves objects that cohere in some complicated way in the next level up, and all the proofs are <code>by induction p; refl</code> but the library is forever incomplete, so you can't just write <code>rec_apply</code> once and be done with it because you will need <code>rec_apply3</code> or <code>rec_rec_apply</code> and so on</p>



<a name="232963372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232963372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232963372">(Apr 02 2021 at 23:21)</a>:</h4>
<p>By the way, <code>==</code> is basically equivalent to a theorem about <code>eq.rec</code>. For example that theorem above can also be stated as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">rec_apply₂</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span><span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ι</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">A</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">C</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">B</span> <span class="n">i</span><span class="o">),</span>
 <span class="n">f</span> <span class="n">i</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">==</span> <span class="n">f</span> <span class="n">j</span> <span class="o">(</span><span class="n">h.rec</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h.rec</span> <span class="n">y</span><span class="o">)</span>
</code></pre></div>
<p>The main difference is that <code>==</code> forgets the proof that <code>i = j</code> or <code>C i = C j</code> (it existentially quantifies over a proof of <code>C i = C j</code>), so you have to supply the proof when you want to get back to a regular equality</p>



<a name="232992565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/what%20does%20motive%20is%20not%20type%20correct%20mean/near/232992565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/what.20does.20motive.20is.20not.20type.20correct.20mean.html#232992565">(Apr 03 2021 at 08:55)</a>:</h4>
<p>Thanks for this. I was trying to turn it all into a blog post yesterday but I'm now thinking of writing two -- one on induction and then one on this stuff</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>