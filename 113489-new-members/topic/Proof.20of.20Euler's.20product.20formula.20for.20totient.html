---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html">Proof of Euler's product formula for totient</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261380117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380117">(Nov 13 2021 at 21:08)</a>:</h4>
<p>I've formalised a proof of Euler's product formula for the totient function <code>φ</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">↑</span><span class="o">(</span><span class="n">φ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">*</span> <span class="bp">∏</span> <span class="n">p</span> <span class="k">in</span> <span class="o">(</span><span class="n">prime_divisors</span> <span class="n">n</span><span class="o">),</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">p</span><span class="bp">⁻¹</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span>
</code></pre></div>
<p>I've separately defined <code>prime_divisors</code> and proved a few basic lemmas that are used in the above proof</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">prime_divisors</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">divisors</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span> <span class="n">prime</span>
</code></pre></div>
<p>which I guess best belongs in <code>number_theory/divisors</code>.</p>
<p>I'm guessing it would be best to submit the latter material as a PR first, and then if that's accepted I'll submit the product formula proof as another PR separately.</p>



<a name="261380429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380429">(Nov 13 2021 at 21:16)</a>:</h4>
<p>Is <code>divisors</code> available in <code>data.nat.prime</code>? If so, I would add <code>prime_divisors</code> there.</p>



<a name="261380440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380440">(Nov 13 2021 at 21:17)</a>:</h4>
<p>Hmm, I'm surprised we don't have anything like <code>prime_divisors</code> yet - I was looking at <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.factors">docs#nat.factors</a>, but that's with multiplicity</p>



<a name="261380504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380504">(Nov 13 2021 at 21:18)</a>:</h4>
<p>Would it be equal to <code>n.factors.to_finset</code>?</p>



<a name="261380575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380575">(Nov 13 2021 at 21:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient/near/261380429">said</a>:</p>
<blockquote>
<p>Is <code>divisors</code> available in <code>data.nat.prime</code>? If so, I would add <code>prime_divisors</code> there.</p>
</blockquote>
<p>Looks like <code>divisors</code> isn't available in <code>data.nat.prime</code>.</p>



<a name="261380652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380652">(Nov 13 2021 at 21:22)</a>:</h4>
<p>I've seen one or two Zulip threads on the lack of a <code>finset</code>-valued prime divisors function, which no-one seemed to have acted on since the topic came up.</p>



<a name="261380736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261380736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261380736">(Nov 13 2021 at 21:24)</a>:</h4>
<p>I briefly had a go at proving that it's equal to <code>list.to_finset (factors n)</code> but didn't finish it, mostly because I didn't need that for what I was doing.</p>



<a name="261381314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261381314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261381314">(Nov 13 2021 at 21:41)</a>:</h4>
<p>Ok, I've just added the proof that <code>n.prime_divisors = n.factors.to_finset</code>.</p>



<a name="261381555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261381555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261381555">(Nov 13 2021 at 21:47)</a>:</h4>
<p>Would it be better for some reason to define <code>prime_divisors</code> as <code>n.factors.to_finset</code> (and then prove the equality with <code>(divisors n).filter prime</code> as a lemma)?  <br>
[Of course, one answer to that question is "Try it and see if it makes anything easier"!  But I'm hoping the voice of experience can swoop in to save me from having to try that experiment. :) ]</p>



<a name="261382052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261382052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261382052">(Nov 13 2021 at 21:59)</a>:</h4>
<p>Submitted the material on <code>prime_divisors</code> as PR <a href="https://github.com/leanprover-community/mathlib/issues/10318">#10318</a></p>



<a name="261384625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261384625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261384625">(Nov 13 2021 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> the product formula should make the "classify roots of unity in cyclotomic fields" question from <a class="stream" data-stream-id="304774" href="/#narrow/stream/304774-FLT-regular">#FLT regular</a> much easier</p>



<a name="261384900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261384900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261384900">(Nov 13 2021 at 22:58)</a>:</h4>
<p>Yes, this should hopefully help with one of the totient proofs I've been stuck on :)</p>



<a name="261386419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261386419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261386419">(Nov 13 2021 at 23:35)</a>:</h4>
<p>Is it easy/reasonable to submit the proof as a PR that depends on the one that's currently under submission (<a href="https://github.com/leanprover-community/mathlib/issues/10318">#10318</a>)?  Or should I wait until that's accepted and merged?</p>



<a name="261386558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261386558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261386558">(Nov 13 2021 at 23:39)</a>:</h4>
<p>While I'm waiting to decide what to do, maybe I can ask for some help in improving the proof.  At one point I end up needing to prove the following equality.  My first draft was quite messy so I took it out as a lemma to work on it separately.  Here's what I ended up with:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">euler_lemma1</span> <span class="o">{</span><span class="n">p</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">↑</span><span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="n">m</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">↑</span><span class="n">p</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span><span class="bp">⁻¹</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">hp'</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">p</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[(</span><span class="n">nat.cast_sub</span> <span class="n">hp'</span><span class="o">),</span> <span class="n">mul_sub</span><span class="o">],</span>

  <span class="k">have</span> <span class="n">hm'</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">pow_sub_mul_pow</span> <span class="bp">↑</span><span class="n">p</span> <span class="n">hm'</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">rw</span> <span class="n">this</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">this</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">],</span>

  <span class="k">have</span> <span class="n">hp'</span> <span class="o">:</span> <span class="o">(</span><span class="bp">↑</span><span class="n">p</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span><span class="n">intro</span> <span class="n">H</span><span class="o">,</span> <span class="n">finish</span><span class="o">},</span>
  <span class="n">rw</span> <span class="n">mul_inv_cancel</span> <span class="n">hp'</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Is there a nicer way to prove this — some clever tactics for working in <code>ℚ</code> that I've missed?</p>



<a name="261387124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387124">(Nov 13 2021 at 23:54)</a>:</h4>
<p>Yes its possible to submit PRs that build on each other, and we have tools to help organise this, see e.g. <a href="https://github.com/leanprover-community/mathlib/pull/10255">https://github.com/leanprover-community/mathlib/pull/10255</a> you just have to put</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">-</span> <span class="o">[</span> <span class="o">]</span> <span class="n">depends</span> <span class="n">on</span><span class="o">:</span> <span class="bp">#</span><span class="mi">10318</span>
</code></pre></div>
<p>below the </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">---</span>
</code></pre></div>
<p>line in the PR message, and the bots will automatically tag it with appropriate labels and let you know when its ready</p>



<a name="261387157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387157">(Nov 13 2021 at 23:56)</a>:</h4>
<p>In this case you should make the second branch based off of the branch for the first PR so that it all builds sucessfully in both PRs, then when the first is merged you can do <code>git pull master</code> and <code>git push</code> in the second branch to make the new diff against master now</p>



<a name="261387223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387223">(Nov 13 2021 at 23:57)</a>:</h4>
<p>I haven't tried to play with the code, bu I see some casts, so the <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_cast">tactic#norm_cast</a> family (<a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#exact_mod_cast">tactic#exact_mod_cast</a> <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#push_cast">tactic#push_cast</a> <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#rw_mod_cast">tactic#rw_mod_cast</a> etc) might be useful to you. Maybe <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#field_simps">tactic#field_simps</a> too, which is good for putting things over a common denominator.</p>



<a name="261387228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387228">(Nov 13 2021 at 23:58)</a>:</h4>
<p>Great, thanks very much</p>



<a name="261387280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387280">(Nov 13 2021 at 23:59)</a>:</h4>
<p>There is also <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#assoc_rw">tactic#assoc_rw</a>, which might shave a line off your proof, but it becomes very useful when you have to do a lot of manual <code>mul_assoc</code>s</p>



<a name="261387286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387286">(Nov 13 2021 at 23:59)</a>:</h4>
<p>I'd try to avoid using finish in a PR to mathlib if I could, it can be quite slow unfortunately</p>



<a name="261387417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387417">(Nov 14 2021 at 00:01)</a>:</h4>
<p>Also it looks like you have a <a href="https://leanprover-community.github.io/glossary.html#non-terminal-simp">glossary#non-terminal-simp</a>, which can be quite brittle so we avoid that pattern in mathlib</p>



<a name="261387957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261387957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261387957">(Nov 14 2021 at 00:13)</a>:</h4>
<p>Thanks so much for your help!</p>



<a name="261388169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261388169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261388169">(Nov 14 2021 at 00:18)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">data.rat.basic</span>

<span class="kd">lemma</span> <span class="n">euler_lemma1</span> <span class="o">{</span><span class="n">p</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">↑</span><span class="o">(</span><span class="n">p</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="n">m</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">^</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">↑</span><span class="n">p</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span><span class="bp">⁻¹</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[(</span><span class="n">ne_of_lt</span> <span class="n">hp</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">],</span>
  <span class="n">field_simp</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">m</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hm</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">p</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hp</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">nat.succ_eq_add_one</span><span class="o">],</span>
  <span class="n">ring_exp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261388562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261388562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261388562">(Nov 14 2021 at 00:28)</a>:</h4>
<p>Wow, that's so much nicer!  Thanks!</p>



<a name="261388726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261388726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261388726">(Nov 14 2021 at 00:32)</a>:</h4>
<p>It's a lazy proof -- I want to solve this by <code>ring</code> so I just keep trying <code>ring</code> until it works. The first problem is that I need to clear denominators so I do this with <code>field_simp</code> but that tactic isn't smart enough to construct the proof that (p : Q) isn't zero so I have to do it myself (I feed in the proof that it's non-zero as a natural because I knew <code>simp</code> could take it from there). The next issue is that you have used natural subtraction twice. For me, this is unidiomatic, because natural subtraction is not a sensible function; lots of things aren't true for it and it screws up automation. For me, <code>hm : 0 &lt; m</code> and <code>m-1</code> together tell me that you've stated this lemma suboptimally: <code>m</code> should be <code>n+1</code> and there should be no inequality or natural subtraction, if you can possibly help it; that would save the <code>cases m</code> line and the <code>succ_eq_add_one</code> line; I was proving what was put in front of me, not what I would have formalised myself. Having eliminated both nat subtractions with this cases hack I then have to deal with the fact that my hack introduced succs, which I removed and then finally it worked.</p>



<a name="261389060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261389060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261389060">(Nov 14 2021 at 00:40)</a>:</h4>
<p>Ok, I'll see what I can do to reformulate it.  I think I can see what I need to change.</p>



<a name="261502464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261502464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261502464">(Nov 15 2021 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> suggested a couple of days ago that my definition of <code>prime_divisors</code> should be equal to <code>factors.to_finset</code>, which it turned out was correct, and I might have saved myself some work if I'd paid more attention to that point.</p>
<p>With that in mind I'd like to check whether another definition would be worth having: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">prime_factorization</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n.factors.to_finset</span><span class="o">)</span><span class="bp">.</span><span class="n">image</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="n">n.factors.count</span> <span class="n">p</span><span class="o">))</span>
<span class="k">#eval</span> <span class="o">(</span><span class="n">prime_factorization</span> <span class="mi">1200</span><span class="o">)</span>     <span class="c1">-- {(2, 4), (3, 1), (5, 2)}   since 1200 = 2^4 * 3^1 * 5^2</span>
</code></pre></div>
<p>Is something like this already defined in mathlib?  Is there a nicer way to express it?</p>



<a name="261502981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261502981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261502981">(Nov 15 2021 at 14:26)</a>:</h4>
<p>just don't <code>to_finset</code> it ;b <code>factors</code> is an ordered list of the prime factors, including multiplicity</p>



<a name="261503082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261503082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261503082">(Nov 15 2021 at 14:27)</a>:</h4>
<p>oh, sorry, I read it wrong. anyways, I'm sure there must be a list/multiset function that counts and places them in a pair like that</p>



<a name="261504485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261504485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261504485">(Nov 15 2021 at 14:36)</a>:</h4>
<p>Is it <a href="https://leanprover-community.github.io/mathlib_docs/find/prime_multiset">docs#prime_multiset</a> or something like that?</p>



<a name="261505562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261505562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261505562">(Nov 15 2021 at 14:45)</a>:</h4>
<p>In <code>data/pnat/factors</code> we have </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">factor_multiset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">)</span> <span class="o">:</span> <span class="n">prime_multiset</span>
</code></pre></div>
<p>where <code>prime_multiset := multiset nat.primes</code>.  So this gives the multiset of prime factors but not explicitly the counts.  </p>
<p>Similarly, in <code>data/nat/prime</code> we have </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">factors</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">ℕ</span>
</code></pre></div>
<p>which is the list of all the prime factors but again not the counts.</p>



<a name="261506344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261506344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261506344">(Nov 15 2021 at 14:50)</a>:</h4>
<p>So I suppose whatever purpose might be served by <code>prime_factorization</code> could just as well be served by using <code>factors.to_finset</code> to get the set of prime factors and then extracting the count information by <code>list.count p (factors n)</code>.</p>



<a name="261506385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261506385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261506385">(Nov 15 2021 at 14:50)</a>:</h4>
<p><code>prime_multiset</code> should be burnt to the ground, IMO. and I think if this should exist, this should exist in the form of a function that maps a multiset to a finset of the original thing and its multiplicity</p>



<a name="261507918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261507918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261507918">(Nov 15 2021 at 15:00)</a>:</h4>
<p>Ha!  It certainly seemed a bit unwieldy when I tried using it, and the fact that <code>factor_multiset</code> takes a <code>pnat</code> rather than a <code>nat</code> added an extra little inconvenience.</p>
<p>Is there not already a function that takes a list <code>L</code> to a list (or finset) of pairs <code>(x, count L x)</code>?  (I don't know how I would go about searching for such a function.)</p>



<a name="261509422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261509422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261509422">(Nov 15 2021 at 15:09)</a>:</h4>
<p>Yes for multiset you still need to take counts, it just seems a more reasonable data type for a prime factorisation than a list</p>



<a name="261515114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261515114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261515114">(Nov 15 2021 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient/near/261506385">said</a>:</p>
<blockquote>
<p><code>prime_multiset</code> should be burnt to the ground.</p>
</blockquote>
<p>Yes please</p>



<a name="261559926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261559926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261559926">(Nov 15 2021 at 21:13)</a>:</h4>
<p>Are you looking for <a href="https://leanprover-community.github.io/mathlib_docs/find/multiset.to_finsupp">docs#multiset.to_finsupp</a>?</p>



<a name="261564639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261564639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261564639">(Nov 15 2021 at 21:51)</a>:</h4>
<p>There's no reason it should be noncomputable.</p>



<a name="261565028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261565028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261565028">(Nov 15 2021 at 21:54)</a>:</h4>
<p>Finsupp isn't a particularly computable representation of this data though right?</p>



<a name="261565115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261565115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261565115">(Nov 15 2021 at 21:55)</a>:</h4>
<p>Like if you really wanted to compute something a list of pairs seems much more efficient</p>



<a name="261565288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261565288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261565288">(Nov 15 2021 at 21:56)</a>:</h4>
<p>That said, I agree a better def than <code>finsupp.to_multiset.symm</code> wouldn't go amiss</p>



<a name="261565522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261565522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261565522">(Nov 15 2021 at 21:58)</a>:</h4>
<p>I agree that finsupp isn't a useful computable notion. But going from multiset X to finset (X x pnat), which is isomorphic to a subset of finsupp, is what was originally asked for.</p>



<a name="261566247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261566247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261566247">(Nov 15 2021 at 22:04)</a>:</h4>
<p>So on the one hand we have <code>factors : ℕ → list ℕ</code> with <code>list.count</code> to extract the multiplicities.  And on the other hand we have <code>factor_multiset : nat → prime_multiset</code> with <code>multiset.to_finsupp</code> to extract the multiplicities.  Given the choice, it seems like <code>factors</code> and <code>count</code> is nicer all round.  Are there any advantages to going the <code>multiset</code> route that I'm missing?</p>



<a name="261567501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261567501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261567501">(Nov 15 2021 at 22:13)</a>:</h4>
<p>Did you look at the implementation of multiset.to_finsupp? It also goes through count. What will you be using the counts for? The multiset is more "basic" since there's no inherent order to the prime factorization. The list, iirc, is the result of sorting the prime factors.</p>



<a name="261567797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261567797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261567797">(Nov 15 2021 at 22:15)</a>:</h4>
<p>So I think your proposed implementation above via image is the appropriate one.</p>



<a name="261567906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261567906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261567906">(Nov 15 2021 at 22:16)</a>:</h4>
<p>Yeah you gain some API by using multiset is all, like a notion of less than or equal (which corresponds to the original numbers being divisible by each other), or being able to take unions and sums of multisets, whats better depends on your use case</p>



<a name="261570234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261570234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261570234">(Nov 15 2021 at 22:38)</a>:</h4>
<p>Thanks everyone.  I think for now I'll stick with the <code>list</code>-based implementation and see how that goes.</p>



<a name="261583855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261583855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261583855">(Nov 16 2021 at 00:53)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span>, its noncomputable because <a href="https://leanprover-community.github.io/mathlib_docs/find/finsupp.has_add">docs#finsupp.has_add</a> is noncomputable and that's one of the arguments to <code>add_equiv.mk</code></p>



<a name="261584723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261584723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261584723">(Nov 16 2021 at 01:02)</a>:</h4>
<p>Yes, that makes sense. I'm just saying the inv_fun of the equiv, which is the forward direction desired here, is computable.</p>



<a name="261904615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261904615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261904615">(Nov 18 2021 at 09:37)</a>:</h4>
<p>After building lots of infrastructure (mostly around <code>prime_factorization</code>) and filling in lots of <code>sorry</code>s I finally have a working <code>sorry</code>-free first draft of the proof.  :D</p>



<a name="261904749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20of%20Euler%27s%20product%20formula%20for%20totient/near/261904749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient.html#261904749">(Nov 18 2021 at 09:38)</a>:</h4>
<p>Now I have a bunch of refactoring and tidying up to do, then I'll be ready to submit it as a PR.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>