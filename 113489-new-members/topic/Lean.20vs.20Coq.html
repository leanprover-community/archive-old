---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20vs.20Coq.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html">Lean vs Coq</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265964420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/265964420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#265964420">(Dec 24 2021 at 00:01)</a>:</h4>
<p>Hi, I work exclusively on embedded systems and am therefore looking for tools that can be used for verification and have code generation for C/C++.<br>
Looking at what is out there, the question I have at this point is what can be better to use for code verification of C/C++-based code for embedded systems: Coq or Lean? The answer is probably both, but I am somewhat encouraged by the syntax of Lean as opposed to the syntax of Coq.</p>



<a name="265965423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/265965423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#265965423">(Dec 24 2021 at 00:22)</a>:</h4>
<p>coq has more mature tooling for what you're trying to do, see <a href="https://softwarefoundations.cis.upenn.edu/vc-current/index.html">https://softwarefoundations.cis.upenn.edu/vc-current/index.html</a></p>



<a name="265992212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/265992212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#265992212">(Dec 24 2021 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="466140">@Anton Hristozov</span> Lean 3 does not have code generation to C. But Lean 4 does. There is a lot going on with Lean 4 right now, and I don't think it's ready for production (there's no official release yet). But it shouldn't be long and then Lean 4 will also be a good system for this.</p>



<a name="266018966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266018966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266018966">(Dec 24 2021 at 19:02)</a>:</h4>
<p><span class="user-mention" data-user-id="466140">@Anton Hristozov</span> I worked on a proof of concept where we ported a robotic car controller from C to Lean 4, and got it running on a Rasberry Pi.  The writeup with a link to the source is avalable <a href="https://galois.com/blog/2021/03/real-time-robotics-control-in-the-lean-language/">here</a>.</p>



<a name="266019060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266019060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266019060">(Dec 24 2021 at 19:04)</a>:</h4>
<p>If you want to verify or look for bugs in existing C/C++ code, then in addition to the Coq work, you may want to take a look at CBMC, Galois's Software Analysis Workbench, Facebook Infer, and/or FramaC among others.</p>



<a name="266021145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021145">(Dec 24 2021 at 19:53)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="112680">@Johan Commelin</span> <br>
I installed and ran lean 3.4.2 on my Linux box, but Lean 4 had issues after following the build instructions. Looks like it is still work in progress.</p>



<a name="266021202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021202">(Dec 24 2021 at 19:54)</a>:</h4>
<p>Lean 3 is now maintained by the community and has come many versions since 3.4.2 check out <a href="https://leanprover-community.github.io/get_started.html#regular-install">#install</a> for the latest instructions for community lean 3</p>



<a name="266021292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021292">(Dec 24 2021 at 19:57)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="110994">@Joe Hendrix</span>  <br>
I saw the robotic car controller on the web you mention. <br>
I am also interested in the opposite direction of defining higher-level logic in Lean and generating C/C++ code that implements that logic. I am not sure if Lean is meant to be used that way. Possibly this would require some extensions to the language, but it appears that this is supported.</p>



<a name="266021582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021582">(Dec 24 2021 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="466140">@Anton Hristozov</span> I think this is related: <a href="https://github.com/tydeu/lean4-alloy">https://github.com/tydeu/lean4-alloy</a><br>
<span class="user-mention" data-user-id="315577">@Mac</span> is the one developing it</p>



<a name="266021660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021660">(Dec 24 2021 at 20:04)</a>:</h4>
<p>I'm not sure if he intends to support the entire C syntax in Lean, but he's got <a href="https://github.com/tydeu/lean4-alloy/blob/master/Alloy/C/Syntax.lean">a nice chunk</a> of it already in.</p>



<a name="266021733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021733">(Dec 24 2021 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="346070">@Tomas Skrivan</span> and I are also working on something similar. Our current code can turn <a href="https://github.com/lecopivo/lean4-karray/blob/master/examples/Test.lean">this</a> into <a href="https://github.com/lecopivo/lean4-karray/blob/master/examples/output.cpp">this</a>.</p>



<a name="266021822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266021822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266021822">(Dec 24 2021 at 20:08)</a>:</h4>
<p>One thing I like about Lean 4 is that it really feels like a programming language that can be used for all sorts of generic applications. For example, reading and writing files feels satisfactorily smooth.</p>



<a name="266022468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266022468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266022468">(Dec 24 2021 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span> All these projects on Github are great directions. Nice to see them. <br>
I agree with the syntax of Lean being readable and the feel of a language.</p>



<a name="266022846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266022846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266022846">(Dec 24 2021 at 20:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/113489-new-members/topic/Lean.20vs.20Coq/near/266021660">said</a>:</p>
<blockquote>
<p>I'm not sure if he intends to support the entire C syntax in Lean</p>
</blockquote>
<p>I do. In fact, It should already be there (and if its not that is a bug). The two caveats are that preprocessor macros don't actually define usable syntax within the DSL (i.e., you can't <code>#define BRACE {</code> and then use <code>BRACE</code> in place of <code>{</code> like you could in C) and that type names need to be manually added to the syntax for disambiguation (see <a href="https://github.com/tydeu/lean4-alloy/blob/afa3332a21d34bc832c10f6b1a82173a2e7f3990/Alloy/C/Typedefs.lean"><code>Typdefs.lean</code></a> for examples).</p>



<a name="266023096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266023096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266023096">(Dec 24 2021 at 20:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="466140">Anton Hristozov</span> <a href="#narrow/stream/113489-new-members/topic/Lean.20vs.20Coq/near/266022468">said</a>:</p>
<blockquote>
<p>I agree with the syntax of Lean being readable and the feel of a language.</p>
</blockquote>
<p>Oh sorry. I meant more in the sense of reading text files as strings or writing strings to text files. But yeah, Lean code is nicely readable once you get more used to it</p>



<a name="266026038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266026038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266026038">(Dec 24 2021 at 21:55)</a>:</h4>
<p><span class="user-mention" data-user-id="466140">@Anton Hristozov</span> Maybe I misunderstand, but the robotics control code was written in Lean (see <a href="https://github.com/GaloisInc/lean4-balance-car/blob/main/BalanceCar.lean">here</a>) and compiled to C.   You currently do still need some C to write the bindings, but maybe Alloy could replace that as well.</p>



<a name="266059305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266059305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266059305">(Dec 25 2021 at 13:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110994">@Joe Hendrix</span>  I looked at the code and see that you have the controller code in Lean and the additional C code to make everything work. This is a great example. <br>
So if we want to make this work for certain aspects of an existing autopilot system, such as PX4, Ardupilot, or ROS, we can use Lean and generate C code to integrate with the rest of the system. I had trouble making Lean 4 run on my Ubuntu 20.04, though, where 3.4.2 worked right out of the box.<br>
Is there an official release date for Lean 4?</p>



<a name="266066290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266066290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Karl Palmskog <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266066290">(Dec 25 2021 at 16:43)</a>:</h4>
<ul>
<li>C++ semantics and verification in Coq: <a href="https://github.com/bedrocksystems/BRiCk">https://github.com/bedrocksystems/BRiCk</a></li>
<li>C semantics and verification in Coq: <a href="https://github.com/absint/compcert">https://github.com/absint/compcert</a> <a href="https://github.com/PrincetonUniversity/VST">https://github.com/PrincetonUniversity/VST</a></li>
<li>C code generation focused on cryptography in Coq: <a href="https://github.com/mit-plv/fiat-crypto">https://github.com/mit-plv/fiat-crypto</a></li>
</ul>



<a name="266070737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266070737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Karl Palmskog <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266070737">(Dec 25 2021 at 18:47)</a>:</h4>
<p>Andrew Appel's recent overview of program verification tooling in Coq has more C+Coq references: <a href="https://www.cs.princeton.edu/~appel/papers/ecosystem.pdf">https://www.cs.princeton.edu/~appel/papers/ecosystem.pdf</a></p>



<a name="266072269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266072269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266072269">(Dec 25 2021 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="466140">@Anton Hristozov</span> I'm glad you are able to get it installed.  I'd recommend trying out the Lake build system also if you haven't already.  It makes it a lot easier to build both C and Lean in the same project.</p>



<a name="266073638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266073638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anton Hristozov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266073638">(Dec 25 2021 at 20:06)</a>:</h4>
<p>Well, I was able to run the lean binary, but lake and leanc had a runtime error after following the installation instructions for Linux.<br>
Most tools I install on Linux just work. I am going to look at other avenues first and then see if it is worth spending the time with this tool.</p>



<a name="266083758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20vs%20Coq/near/266083758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20vs.20Coq.html#266083758">(Dec 26 2021 at 01:03)</a>:</h4>
<p>head over to <a class="stream" data-stream-id="270676" href="/#narrow/stream/270676-lean4">#lean4</a> if you have trouble installing</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>