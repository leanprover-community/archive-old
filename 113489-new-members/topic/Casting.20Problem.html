---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Casting.20Problem.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html">Casting Problem</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199748377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199748377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Stanescu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199748377">(Jun 04 2020 at 13:43)</a>:</h4>
<p>This example may be a little more verbose than needed, but is there a way to solve it? </p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hN</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">=</span> <span class="n">nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span> <span class="n">a</span> <span class="o">)</span> <span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">N</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">H1</span> <span class="o">:=</span> <span class="n">lt_of_lt_of_le</span> <span class="n">ha</span> <span class="o">(</span><span class="n">le_nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span><span class="n">a</span> <span class="o">)),</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">hN</span> <span class="n">at</span> <span class="n">H1</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">N</span><span class="o">,</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">rw</span> <span class="n">H2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">H1</span><span class="o">,</span> <span class="c1">-- fails</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199748574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199748574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199748574">(Jun 04 2020 at 13:44)</a>:</h4>
<p>i haven't tried your code yet because I"m not at a computer, but I bet things will be easier for you if you use integers instead of naturals</p>



<a name="199748865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199748865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199748865">(Jun 04 2020 at 13:46)</a>:</h4>
<p>I don't think <code>H2</code> means what you want it to mean</p>



<a name="199748939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199748939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Stanescu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199748939">(Jun 04 2020 at 13:47)</a>:</h4>
<p>Yes but I just can't in this example. It's part of a bigger proof. I can bet you're right about H2.</p>



<a name="199749511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199749511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199749511">(Jun 04 2020 at 13:51)</a>:</h4>
<p>this works</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hN</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">=</span> <span class="n">nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span> <span class="n">a</span> <span class="o">)</span> <span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">N</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">H1</span> <span class="o">:=</span> <span class="n">lt_of_lt_of_le</span> <span class="n">ha</span> <span class="o">(</span><span class="n">le_nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span><span class="n">a</span> <span class="o">)),</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">hN</span> <span class="n">at</span> <span class="n">H1</span><span class="o">,</span>
    <span class="n">revert</span> <span class="n">H1</span><span class="o">,</span> <span class="n">norm_cast</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">id</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199749611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199749611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199749611">(Jun 04 2020 at 13:52)</a>:</h4>
<p>the only way I know to get <code>norm_cast</code> to do what i want is to put all the information it needs into the goal state</p>



<a name="199749988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199749988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199749988">(Jun 04 2020 at 13:55)</a>:</h4>
<p>actually in this case <code>norm_cast at H1</code> does fine</p>



<a name="199750147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199750147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199750147">(Jun 04 2020 at 13:56)</a>:</h4>
<p>here's my final answer</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hN</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">=</span> <span class="n">nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span> <span class="n">a</span> <span class="o">)</span> <span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">N</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">lt_of_lt_of_le</span> <span class="n">ha</span> <span class="o">(</span><span class="n">le_nat_ceil</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span><span class="bp">/</span><span class="n">a</span> <span class="o">)),</span>
    <span class="n">norm_cast</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">rwa</span> <span class="n">hN</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199750705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199750705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Stanescu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199750705">(Jun 04 2020 at 14:00)</a>:</h4>
<p>And I thought I had exhausted all ways to ask <code>norm_cast</code> to do the job!</p>



<a name="199750754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199750754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Stanescu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199750754">(Jun 04 2020 at 14:00)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="252300">@Jalex Stark</span> !</p>



<a name="199750797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Casting%20Problem/near/199750797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Casting.20Problem.html#199750797">(Jun 04 2020 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/113489-new-members/topic/Casting.20Problem/near/199749611">said</a>:</p>
<blockquote>
<p>the only way I know to get <code>norm_cast</code> to do what i want is to put all the information it needs into the goal state</p>
</blockquote>
<p>actually it's <code>push_cast</code> that I get this headache with. I think <code>norm_cast</code> always tries to remove coercions</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>