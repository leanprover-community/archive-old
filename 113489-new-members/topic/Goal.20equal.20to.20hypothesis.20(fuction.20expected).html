---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html">Goal equal to hypothesis (fuction expected)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247567115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247567115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247567115">(Jul 29 2021 at 10:41)</a>:</h4>
<p>Hi,</p>
<p>I'm trying to prove something for which I got (via some rewrites) the goal as an hypothesis <code>p</code>. When I tell Lean to close it with <code>exact  p</code>, it tells me it expects a function, but I don't understand why.  Does anyone have a clue what might be happening? A bit more concretely, my proof state looks something like: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">...</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">l₁</span> <span class="bp">~</span> <span class="n">l₂</span>
<span class="bp">...</span>
<span class="bp">⊢</span> <span class="n">l₁</span> <span class="bp">~</span> <span class="n">l₂</span>
</code></pre></div>
<p>And I get the error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">function</span> <span class="n">expected</span> <span class="n">at</span>
  <span class="n">p</span>
<span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">l₁</span> <span class="bp">~</span> <span class="n">l₂</span>
</code></pre></div>
<p>Why does exact expect a function? I thought it should expect (a witness of) the proof of the goal, which is what I'm giving it.</p>
<p>Just in case that matters, this is with Lean4 (version 4.0.0-m2, commit 26dda3f63d88, to use Mathlib4)</p>



<a name="247567364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247567364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247567364">(Jul 29 2021 at 10:44)</a>:</h4>
<p>Can you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>?</p>



<a name="247567382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247567382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247567382">(Jul 29 2021 at 10:44)</a>:</h4>
<p>(Not that I have a clue about lean4)</p>



<a name="247567438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247567438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247567438">(Jul 29 2021 at 10:45)</a>:</h4>
<p>There isn't anything left after the <code>exact p</code>? That sometimes catches me out in lean3</p>



<a name="247567840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247567840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247567840">(Jul 29 2021 at 10:51)</a>:</h4>
<p>What do you mean anything left? The <code>exact p</code> fails with that error. I'll try to construct a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="247568061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247568061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247568061">(Jul 29 2021 at 10:54)</a>:</h4>
<p>You could precede the theorem with <code>set_option pp.all true in</code> to get more info from the output, maybe there's a wrong implicit argument or type class instance in <code>p</code>.</p>



<a name="247568373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247568373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247568373">(Jul 29 2021 at 10:59)</a>:</h4>
<p>That seems like a useful tool for debugging, thanks :) It seems there isn't a wrong implicit argument there:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">p</span> <span class="o">:</span> <span class="bp">@</span><span class="n">List.perm.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="n">l₁</span> <span class="n">l₂</span>
<span class="bp">...</span>
<span class="bp">⊢</span> <span class="bp">@</span><span class="n">List.perm.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="n">l₁</span> <span class="n">l₂</span>
</code></pre></div>



<a name="247568889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247568889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247568889">(Jul 29 2021 at 11:05)</a>:</h4>
<p>What does the line before the <code>exact p</code> look like?</p>



<a name="247568994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247568994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247568994">(Jul 29 2021 at 11:06)</a>:</h4>
<p>Hm, the problem somehow disappeared when trying to construct a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> and I don't know exactly why. I think Lean accepted my <code>exact</code> and was complaining about what is afterwards? Now it says <code>goals accomplished</code> and I have no idea what changed... Sorry for the confusion and thanks for the help!</p>



<a name="247569053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247569053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247569053">(Jul 29 2021 at 11:07)</a>:</h4>
<p>It was probably more something about the sequences of tactics, that confused the parser. Maybe indentation?</p>



<a name="247569188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247569188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247569188">(Jul 29 2021 at 11:09)</a>:</h4>
<p>Indentation matters in Lean? That sounds like a very plausible suspect! Do you know if how indentation works is documented somewhere?</p>



<a name="247569394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Goal%20equal%20to%20hypothesis%20%28fuction%20expected%29/near/247569394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Goal.20equal.20to.20hypothesis.20(fuction.20expected).html#247569394">(Jul 29 2021 at 11:12)</a>:</h4>
<p>Yes, it does in Lean 4. Because we don't have tactic blocks scoped by <code>begin ... end</code> anymore</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>