---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/fin_sum.2Ffin_prod.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html">fin_sum/fin_prod</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="244811733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/244811733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#244811733">(Jul 03 2021 at 15:43)</a>:</h4>
<p>Is there any lemma(s) that helps to close the goal</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">I</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">I</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">j</span> <span class="bp">=</span> <span class="n">i</span><span class="o">)</span> <span class="n">a</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="244813016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/244813016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#244813016">(Jul 03 2021 at 16:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">I</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">I</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span> <span class="n">a</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">finset.sum_ite_eq</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>with <code>i = j</code> instead of <code>j = i</code></p>



<a name="246140229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246140229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246140229">(Jul 15 2021 at 19:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> has marked this topic as resolved.</p>



<a name="246140237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246140237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246140237">(Jul 15 2021 at 19:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> has marked this topic as unresolved.</p>



<a name="246692399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246692399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246692399">(Jul 21 2021 at 08:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> has marked this topic as resolved.</p>



<a name="246692410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246692410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246692410">(Jul 21 2021 at 08:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="408694">Alex Zhang</span> has marked this topic as unresolved.</p>



<a name="246692615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246692615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246692615">(Jul 21 2021 at 08:36)</a>:</h4>
<p>If I want to "reindex" the terms of a sum like the following e.g.:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">algebra.big_operators</span>
<span class="kn">import</span> <span class="n">data.fintype.card</span>
<span class="kn">import</span> <span class="n">data.finset.basic</span>
<span class="kn">import</span> <span class="n">field_theory.finite.basic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">F</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">F</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">F</span><span class="o">),</span> <span class="n">f</span> <span class="n">k</span> <span class="o">:=</span>  <span class="gr">sorry</span>
</code></pre></div>
<p>Is <code>#check finset.sum_map</code> the lemma I am supposed to use for showing this?</p>



<a name="246693260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693260">(Jul 21 2021 at 08:44)</a>:</h4>
<p>Can you show that (finset.univ : finset F).image ((-) i) = finset.univ?</p>



<a name="246693422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693422">(Jul 21 2021 at 08:46)</a>:</h4>
<p>Do you mean to use <code>finset.sum_map</code> is the right way?</p>



<a name="246693486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693486">(Jul 21 2021 at 08:46)</a>:</h4>
<p><del>I would use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_congr">docs#finset.sum_congr</a></del> (no, it's not strong enough)</p>



<a name="246693504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693504">(Jul 21 2021 at 08:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_map">docs#finset.sum_map</a></p>



<a name="246693840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693840">(Jul 21 2021 at 08:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/fin_sum.2Ffin_prod/near/246693260">said</a>:</p>
<blockquote>
<p>Can you show that (finset.univ : finset F).image ((-) i) = finset.univ?</p>
</blockquote>
<p>It is true. I will try the proof.</p>



<a name="246693896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693896">(Jul 21 2021 at 08:52)</a>:</h4>
<p>I could imagine a specialisation of sum_map which deals with a sum over a permutation of a fintype</p>



<a name="246693980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246693980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246693980">(Jul 21 2021 at 08:53)</a>:</h4>
<p>Ie proves that for a permutation sigma of a base fintype X, sum of f(x) equals sum of f(sigma(X))</p>



<a name="246694013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246694013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246694013">(Jul 21 2021 at 08:53)</a>:</h4>
<p>Do we have that?</p>



<a name="246694088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246694088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246694088">(Jul 21 2021 at 08:54)</a>:</h4>
<p>If you used finsum instead of all this constructivist nonsense you wouldn't even need the fintype :-)</p>



<a name="246699694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246699694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246699694">(Jul 21 2021 at 10:01)</a>:</h4>
<p>Yes, it's <del>docs#equiv.sum_congr I think?</del> somewhere I can't find</p>



<a name="246699803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246699803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246699803">(Jul 21 2021 at 10:02)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.sum_equiv">docs#fintype.sum_equiv</a></p>



<a name="246700005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246700005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246700005">(Jul 21 2021 at 10:05)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.field</span>
<span class="kn">import</span> <span class="n">data.fintype.basic</span>
<span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">F</span><span class="o">]</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">F</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">F</span><span class="o">),</span> <span class="n">f</span> <span class="n">k</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">fintype.sum_equiv</span> <span class="o">((</span><span class="n">equiv.add_left</span> <span class="o">(</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">equiv.neg</span> <span class="n">_</span><span class="o">))</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">sub_eq_add_neg</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="246700051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246700051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246700051">(Jul 21 2021 at 10:05)</a>:</h4>
<p>We could do with an <code>equiv.sub_left</code> and <code>equiv.sub_right</code> to complement <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.add_left">docs#equiv.add_left</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.add_right">docs#equiv.add_right</a>, which would make the <code>simp</code> just <code>refl</code></p>



<a name="246702068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fin_sum/fin_prod/near/246702068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fin_sum.2Ffin_prod.html#246702068">(Jul 21 2021 at 10:32)</a>:</h4>
<p>PR'd as <a href="https://github.com/leanprover-community/mathlib/issues/8385">#8385</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>