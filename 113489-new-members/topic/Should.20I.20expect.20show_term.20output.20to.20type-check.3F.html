---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html">Should I expect show_term output to type-check?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201392661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201392661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201392661">(Jun 19 2020 at 13:53)</a>:</h4>
<p>If I add <code>by show_term</code> to the beginning of this proof, the output looks fairly sensible, but it fails to type-check in a couple places. Is that expected? <a href="https://gist.github.com/jorendorff/8229ce03eb29e6031602f4003bfbf153">https://gist.github.com/jorendorff/8229ce03eb29e6031602f4003bfbf153</a></p>



<a name="201392835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201392835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201392835">(Jun 19 2020 at 13:54)</a>:</h4>
<p>Both errors are around <code>eq.rec</code>, which I guess has special elaborator support. I wasn't able to fix either one just by adding type-annotations; one I was able to fix by adding a call to <code>iff_of_eq</code> <em>and</em> a type annotation</p>



<a name="201392881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201392881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201392881">(Jun 19 2020 at 13:54)</a>:</h4>
<p>the other one, I gave up</p>



<a name="201393333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201393333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201393333">(Jun 19 2020 at 13:58)</a>:</h4>
<p>Did it try to use dot notation for <code>eq.rec</code>?</p>



<a name="201399813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201399813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201399813">(Jun 19 2020 at 14:48)</a>:</h4>
<p>The general answer is unfortunately "No, you should not expect output from the pretty printer to always round-trip. There's no perfect balance between readable output and correct output." But special cases may be fixable!</p>



<a name="201401314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401314">(Jun 19 2020 at 14:59)</a>:</h4>
<blockquote>
<p>Did it try to use dot notation for <code>eq.rec</code>?</p>
</blockquote>
<p>No, that wasn't the problem. Here's the output, with comments telling what the errors were <a href="https://gist.github.com/jorendorff/8229ce03eb29e6031602f4003bfbf153#file-uniqueness_show_term_output-lean">https://gist.github.com/jorendorff/8229ce03eb29e6031602f4003bfbf153#file-uniqueness_show_term_output-lean</a></p>



<a name="201401567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401567">(Jun 19 2020 at 15:00)</a>:</h4>
<p>I find those sorts of puzzles quite messy to solve. You can probably get everything compiling if you tell Lean the types of a few terms (i.e. replace <code>x</code> with <code>(x : X)</code>) but if you don't understand the proof properly it's difficult to fathom out what the terms are (for me, at least)</p>



<a name="201401677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401677">(Jun 19 2020 at 15:01)</a>:</h4>
<p>I was really surprised that I wasn't able to fix these errors using type annotations.</p>



<a name="201401713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401713">(Jun 19 2020 at 15:01)</a>:</h4>
<p>If you <code>set_option pp.all true</code> you are much more likely to get something which survives the round trip -- and also much more likely to get something which is unwieldy and incomprehensible</p>



<a name="201401797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401797">(Jun 19 2020 at 15:02)</a>:</h4>
<p>oh! but i can be selective... thanks</p>



<a name="201401826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401826">(Jun 19 2020 at 15:02)</a>:</h4>
<p>if you can see the wood from the trees</p>



<a name="201401877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401877">(Jun 19 2020 at 15:02)</a>:</h4>
<p>it actually translates pretty cleanly, because almost all of my proof uses extremely simple tactics</p>



<a name="201401897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401897">(Jun 19 2020 at 15:02)</a>:</h4>
<p>I think I'll try again with the type annotations; I was tired when I tried it last night</p>



<a name="201401926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201401926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201401926">(Jun 19 2020 at 15:03)</a>:</h4>
<p>(probably 97% of the problem honestly)</p>



<a name="201402014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201402014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201402014">(Jun 19 2020 at 15:03)</a>:</h4>
<p>This is basically the stupidity of the stupid triangle in action</p>



<a name="201402048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201402048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201402048">(Jun 19 2020 at 15:03)</a>:</h4>
<p><code>rw</code> is just better than the Lean elaborator</p>



<a name="201403602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201403602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201403602">(Jun 19 2020 at 15:15)</a>:</h4>
<p><span class="user-mention" data-user-id="306644">@Jason Orendorff</span> do you know about the widgety VS Code extension? This makes your job a lot easier.</p>



<a name="201404433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201404433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201404433">(Jun 19 2020 at 15:21)</a>:</h4>
<p>The widget version of the VS Code extension shows you the expected type of everything in that pp.all mess.</p>



<a name="201405257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405257">(Jun 19 2020 at 15:28)</a>:</h4>
<p>I pasted in the @eq.rec stuff in the two places where you had an error, and now I get another error in a new place :-(</p>



<a name="201405304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405304">(Jun 19 2020 at 15:28)</a>:</h4>
<p>heh!!</p>



<a name="201405321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405321">(Jun 19 2020 at 15:28)</a>:</h4>
<p>The first one is big</p>



<a name="201405328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405328">(Jun 19 2020 at 15:28)</a>:</h4>
<p>stupid computer</p>



<a name="201405418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405418">(Jun 19 2020 at 15:29)</a>:</h4>
<p>pasting it worked for me just now</p>



<a name="201405439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201405439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201405439">(Jun 19 2020 at 15:29)</a>:</h4>
<p>Nice! I might well have slipped up then.</p>



<a name="201408926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201408926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201408926">(Jun 19 2020 at 15:56)</a>:</h4>
<p>hmm, even the fully expanded version times out on <a href="http://codewars.com">codewars.com</a>, but that's a separate issue...</p>



<a name="201408976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201408976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201408976">(Jun 19 2020 at 15:57)</a>:</h4>
<p>Give an upvote to the codewars version upgrade which will make everything twice as fast :-)</p>



<a name="201409093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201409093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201409093">(Jun 19 2020 at 15:58)</a>:</h4>
<p>is that ... an issue somewhere that i can vote on, or...?</p>



<a name="201409118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201409118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201409118">(Jun 19 2020 at 15:58)</a>:</h4>
<p>I think it was mentioned in <a class="stream" data-stream-id="238266" href="/#narrow/stream/238266-Codewars">#Codewars</a></p>



<a name="201415090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201415090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201415090">(Jun 19 2020 at 16:51)</a>:</h4>
<p>making things faster is a good exercise <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="201417434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201417434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201417434">(Jun 19 2020 at 17:12)</a>:</h4>
<p>I'm very surprised that the original proof times out</p>



<a name="201425711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201425711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201425711">(Jun 19 2020 at 18:30)</a>:</h4>
<p>Submitting an empty program times out! Apparently it is timing out trying to check mathlib's basic topology definitions and lemmas</p>



<a name="201425764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201425764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201425764">(Jun 19 2020 at 18:31)</a>:</h4>
<p>Well then</p>



<a name="201425767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Should%20I%20expect%20show_term%20output%20to%20type-check%3F/near/201425767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Orendorff <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Should.20I.20expect.20show_term.20output.20to.20type-check.3F.html#201425767">(Jun 19 2020 at 18:31)</a>:</h4>
<p>Details in <a href="https://github.com/codewars/codewars-runner-cli/issues/824#issuecomment-646731296">https://github.com/codewars/codewars-runner-cli/issues/824#issuecomment-646731296</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>