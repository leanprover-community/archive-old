---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/congr.20under.20an.20existential.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html">congr under an existential</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="210806099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210806099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210806099">(Sep 21 2020 at 22:03)</a>:</h4>
<p>Is there an existing lemma that says the following? Is it a <code>pi</code> lemma?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">δ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">obtain</span> <span class="bp">⟨</span><span class="n">z</span><span class="o">,</span> <span class="n">hz</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">z</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hz</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="210807349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210807349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210807349">(Sep 21 2020 at 22:17)</a>:</h4>
<p>I guess the reverse, with a hypothesis about injectivity of <code>g</code> is what I really want.</p>



<a name="210807633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210807633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210807633">(Sep 21 2020 at 22:20)</a>:</h4>
<p>Ah, a variant of <code>exists.imp</code></p>



<a name="210808165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210808165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210808165">(Sep 21 2020 at 22:27)</a>:</h4>
<p>So, why does the first example work but not the second?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">exists_inj</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">Exists</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span> <span class="n">H</span><span class="o">,</span> <span class="bp">@</span><span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">z</span> <span class="n">H</span><span class="o">)</span> <span class="n">h</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">exists_inj</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">Exists</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span> <span class="n">H</span><span class="o">,</span> <span class="n">hg</span> <span class="n">H</span><span class="o">)</span> <span class="n">h</span>
</code></pre></div>



<a name="210808936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210808936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210808936">(Sep 21 2020 at 22:37)</a>:</h4>
<p><code>function.injective</code> is a definition that wraps something like <code>\forall {{x y}}, f x = f y -&gt; x = y</code></p>



<a name="210809040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809040">(Sep 21 2020 at 22:38)</a>:</h4>
<p>So it can't infer the <code>(f x)</code> or <code>z</code>. Got it. In any case, this isn't leading me down to where I want because of the "exists can only elim into prop" issue.</p>



<a name="210809053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809053">(Sep 21 2020 at 22:38)</a>:</h4>
<p>Oh, it's the elab order</p>



<a name="210809068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809068">(Sep 21 2020 at 22:38)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">exists_inj</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="n">δ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">h</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span> <span class="n">H</span><span class="o">,</span> <span class="n">hg</span> <span class="n">H</span><span class="o">)</span>
</code></pre></div>


<p>this works fine</p>



<a name="210809146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809146">(Sep 21 2020 at 22:39)</a>:</h4>
<p>What are you trying to do?</p>



<a name="210809208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809208">(Sep 21 2020 at 22:40)</a>:</h4>
<p>I'm basically trying to do the equivalent of an <code>apply_fun</code> on both sides of an equality that is behind an existential.</p>



<a name="210809349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809349">(Sep 21 2020 at 22:42)</a>:</h4>
<p>but you did that</p>



<a name="210809370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809370">(Sep 21 2020 at 22:42)</a>:</h4>
<p>so that must not be the problem</p>



<a name="210809405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809405">(Sep 21 2020 at 22:42)</a>:</h4>
<p>I'm going to try something, will be back later with attempts.</p>



<a name="210809424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/congr%20under%20an%20existential/near/210809424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/congr.20under.20an.20existential.html#210809424">(Sep 21 2020 at 22:43)</a>:</h4>
<p>Generally, you should open an existential if you want to work on the contents</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>