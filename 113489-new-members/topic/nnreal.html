---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/nnreal.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html">nnreal</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276483816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276483816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276483816">(Mar 24 2022 at 14:32)</a>:</h4>
<p>Hi,<br>
I want to use this assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><mi>i</mi><mo>∗</mo><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mfrac><mi>x</mi><mrow><mn>1</mn><mo>−</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \sum_{i=0}^{+\infty} i*x_{i} = \frac{x}{1-x} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2109em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9112em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0987em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> for R&gt;=0<br>
I find this tactics tsum_coe_mul_geometric_of_norm_lt_1 , but it doesn't work for nnreal. Is there similar tactic for R&gt;=0, or I should prove it for nnreal?</p>



<a name="276486208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276486208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276486208">(Mar 24 2022 at 14:48)</a>:</h4>
<p>Do you mean the geometric series?  <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_geometric_nnreal">docs#tsum_geometric_nnreal</a></p>



<a name="276486263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276486263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276486263">(Mar 24 2022 at 14:48)</a>:</h4>
<p>Note that that's not what you wrote (you have some unspecified sequence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</p>



<a name="276486797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276486797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276486797">(Mar 24 2022 at 14:52)</a>:</h4>
<p>Note that that's a theorem, not a tactic. Converting is a little annoying:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">nnreal.tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∑'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">r</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">r</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">hr'</span> <span class="o">:</span> <span class="bp">∥</span><span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">∥</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">abs_lt</span><span class="o">],</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="n">_</span> <span class="n">r.coe_nonneg</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">hr</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">nnreal.coe_injective</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="n">hr'</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">norm_cast</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">push_cast</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">nnreal.coe_sub</span> <span class="n">hr.le</span><span class="o">,</span>
    <span class="n">norm_cast</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="276497070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276497070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276497070">(Mar 24 2022 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <br>
Thanks for your response, yes your right that's for <span class="tex-error">$$ \sum_{i=o}{\infity}x_{i} = \frac{1}{1-x} $$</span> but I'm looking for another one.</p>



<a name="276497518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276497518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276497518">(Mar 24 2022 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> <br>
I really appreciated. Yes, That's the one I'm looking. Thank you</p>



<a name="276699478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276699478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276699478">(Mar 26 2022 at 02:09)</a>:</h4>
<p>What is the tactic for multiplying both side of equation to a constant. like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>q</mi><mi>v</mi></mfrac><mo>=</mo><mfrac><mi>m</mi><mi>n</mi></mfrac></mrow><annotation encoding="application/x-tex"> \frac {q}{v} = \frac{m}{n} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0925em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> is equal to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mfrac><mi>m</mi><mi>n</mi></mfrac><mo>×</mo><mi>v</mi></mrow><annotation encoding="application/x-tex"> q = \frac{m}{n} \times v </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></p>



<a name="276699873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276699873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276699873">(Mar 26 2022 at 02:19)</a>:</h4>
<p>If you have a proof <code>hv : v ≠ 0</code>, then <code>field_simp [hv]</code> will usually do this for you.</p>



<a name="276731044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/276731044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#276731044">(Mar 26 2022 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <br>
Great, Thanks</p>



<a name="277083202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277083202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277083202">(Mar 30 2022 at 01:05)</a>:</h4>
<p>I want to use this assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mfrac><mi>x</mi><mrow><mn>1</mn><mo>−</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{+\infty} x_{i} = \frac{x}{1-x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2109em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9112em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0987em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br>
I find this tactic (tsum_geometric_nnreal), but it starts from zero instead of one. How can I tackle this issue?</p>



<a name="277096977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277096977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277096977">(Mar 30 2022 at 05:47)</a>:</h4>
<p><span class="user-mention" data-user-id="459354">@Parivash</span> Do you already know how you would like to write your statement in Lean? Is it an issue to start the sum from <code>i = 0</code>? You will probably find that a lot of lemmas work more smoothly if you start from <code>i = 0</code>.</p>



<a name="277098733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277098733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277098733">(Mar 30 2022 at 06:21)</a>:</h4>
<p>Start from zero and then take away the zero term</p>



<a name="277142442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277142442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277142442">(Mar 30 2022 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <br>
Actually, my handwriting proof was arranged in this shape. And, this is the last step of my proofing.</p>



<a name="277143818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277143818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277143818">(Mar 30 2022 at 13:25)</a>:</h4>
<p>Write a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> if you're not sure how to prove something, so it's clear what the statement you want is.</p>



<a name="277143872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277143872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277143872">(Mar 30 2022 at 13:26)</a>:</h4>
<p>There are several ways to sum from 1 in Lean</p>



<a name="277143918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277143918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277143918">(Mar 30 2022 at 13:26)</a>:</h4>
<p>PS <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_geometric_nnreal">docs#tsum_geometric_nnreal</a> is a theorem, not a tactic.</p>



<a name="277415812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277415812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277415812">(Apr 01 2022 at 13:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
would you please introduce one of them which start from one and works for nnreal</p>



<a name="277435575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277435575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277435575">(Apr 01 2022 at 15:31)</a>:</h4>
<p>Can you formalise the statement which you would like a proof of via a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? In Lean it's not good enough just to say "how do I prove <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mrow><mi>n</mi><mo>≥</mo><mn>1</mn></mrow></msub><msup><mi>x</mi><mi>n</mi></msup><mo>=</mo><mi>x</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{n\geq1}x^n=x/(1-x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1449em;vertical-align:-0.3949em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3949em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>?" -- there are different ways of formalising this statement.</p>



<a name="277494818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277494818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277494818">(Apr 02 2022 at 00:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"> Background Copy-/</span>
<span class="kn">import</span> <span class="n">analysis.specific_limits</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">algebra.group.defs</span>
<span class="kn">import</span> <span class="n">logic.function.basic</span>
<span class="kn">import</span> <span class="n">topology.algebra.infinite_sum</span>
<span class="kn">import</span> <span class="n">topology.algebra.group_with_zero</span>
<span class="kn">import</span> <span class="n">set_theory.ordinal_arithmetic</span>
<span class="kn">import</span> <span class="n">algebra.geom_sum</span>
<span class="kn">import</span> <span class="n">order.filter.archimedean</span>
<span class="kn">import</span> <span class="n">order.iterate</span>
<span class="kn">import</span> <span class="n">topology.instances.ennreal</span>
<span class="kn">import</span> <span class="n">algebra.ring.boolean_ring</span>
<span class="kn">open</span> <span class="n">ordinal</span>
<span class="c">/-</span><span class="cm"> left_comm has_mul.mul mul_comm mul_assoc-/</span>
<span class="n">mul_eq_of_eq_div'</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">/</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span> <span class="n">c</span><span class="o">,</span> <span class="n">mul_inv_cancel_left</span><span class="o">]</span> <span class="kd">end</span>
<span class="c">/-</span><span class="cm">!</span>
<span class="cm"># Topology on `ℝ≥0`</span>
<span class="cm">The natural topology on `ℝ≥0` (the one induced from `ℝ`), and a basic API.</span>
<span class="cm">## Main definitions</span>
<span class="cm">Instances for the following typeclasses are defined:</span>
<span class="cm">* `topological_space ℝ≥0`</span>
<span class="cm">* `topological_semiring ℝ≥0`</span>
<span class="cm">* `second_countable_topology ℝ≥0`</span>
<span class="cm">* `order_topology ℝ≥0`</span>
<span class="cm">* `has_continuous_sub ℝ≥0`</span>
<span class="cm">* `has_continuous_inv' ℝ≥0` (continuity of `x⁻¹` away from `0`)</span>
<span class="cm">Everything is inherited from the corresponding structures on the reals.</span>
<span class="cm">## Main statements</span>
<span class="cm">Various mathematically trivial lemmas are proved about the compatibility</span>
<span class="cm">of limits and sums in `ℝ≥0` and `ℝ`. For example</span>
<span class="cm">* `tendsto_coe {f : filter α} {m : α → ℝ≥0} {x : ℝ≥0} :</span>
<span class="cm">tendsto (λa, (m a : ℝ)) f (𝓝 (x : ℝ)) ↔ tendsto m f (𝓝 x)`</span>
<span class="cm">says that the limit of a filter along a map to `ℝ≥0` is the same in `ℝ` and `ℝ≥0`, and</span>
<span class="cm">* `coe_tsum {f : α → ℝ≥0} : ((∑'a, f a) : ℝ) = (∑'a, (f a : ℝ))`</span>
<span class="cm">says that says that a sum of elements in `ℝ≥0` is the same in `ℝ` and `ℝ≥0`.</span>
<span class="cm">Similarly, some mathematically trivial lemmas about infinite sums are proved,</span>
<span class="cm">a few of which rely on the fact that subtraction is continuous.</span>
<span class="cm">-/</span>
<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">topological_space</span> <span class="n">metric</span> <span class="n">filter</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">:=</span> <span class="n">infer_instance</span> <span class="c1">-- short-circuit type class inference</span>
<span class="kn">section</span> <span class="n">coe</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">t2_space</span> <span class="n">α</span><span class="o">]</span>
<span class="c1">-- Definitions of nnreal.tsum_coe_mul_geometric_of_norm_lt_1</span>
<span class="kd">theorem</span> <span class="n">nnreal.tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">r</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">r</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="k">have</span> <span class="n">hr'</span> <span class="o">:</span> <span class="bp">∥</span><span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">∥</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
<span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">abs_lt</span><span class="o">],</span>
<span class="n">split</span><span class="o">,</span>
<span class="o">{</span> <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="n">_</span> <span class="n">r.coe_nonneg</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">hr</span> <span class="o">}</span> <span class="o">},</span>
<span class="n">apply</span> <span class="n">nnreal.coe_injective</span><span class="o">,</span>
<span class="n">convert</span> <span class="n">tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="n">hr'</span><span class="o">,</span>
<span class="o">{</span> <span class="n">norm_cast</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">push_cast</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">nnreal.coe_sub</span> <span class="n">hr.le</span><span class="o">,</span>
<span class="n">norm_cast</span> <span class="o">},</span>
<span class="kd">end</span>
<span class="c1">-- k1 : constant rate of condensation onto bare surface</span>
<span class="c1">-- k2: constant rate of evaporation from first layer</span>
<span class="c1">-- kads: Constant rate of Adsorption</span>
<span class="c1">-- kdes: Constant rate of Adsorption</span>
<span class="c1">-- P: Gas Pressure</span>
<span class="c1">-- q: Loading</span>
<span class="c1">-- A: Surface Area</span>
<span class="c1">-- Vads: volume adsorbed</span>
<span class="c1">-- V₀ : the volume of one adsorbed molecule</span>
<span class="c1">-- a, b, c, C, x, y : variables</span>
<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">k1</span> <span class="n">k2</span> <span class="n">kads</span> <span class="n">kdes</span> <span class="n">a</span> <span class="n">b</span> <span class="n">C</span> <span class="n">P</span> <span class="n">q</span> <span class="n">A</span> <span class="n">V₀</span> <span class="n">Vads</span> <span class="n">x</span> <span class="n">y</span> <span class="n">c</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)</span>
<span class="c1">-- Equations</span>
<span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">))</span> <span class="c1">-- Total Surface Area</span>
<span class="o">(</span><span class="n">hVads</span> <span class="o">:</span> <span class="n">Vads</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)))</span> <span class="c1">-- total volume of adsorbed molecules</span>
<span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q</span><span class="bp">/</span><span class="n">V₀</span> <span class="bp">=</span> <span class="n">Vads</span> <span class="bp">/</span> <span class="n">A</span><span class="o">)</span> <span class="c1">-- The experimental observable loading</span>
<span class="c1">-- Definitions</span>
<span class="o">(</span><span class="n">hC</span><span class="o">:</span> <span class="n">C</span><span class="bp">=</span> <span class="n">y</span><span class="bp">/</span><span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">hy</span><span class="o">:</span> <span class="n">y</span><span class="bp">=</span> <span class="o">(</span><span class="n">k1</span><span class="bp">/</span><span class="n">k2</span><span class="o">)</span><span class="bp">*</span><span class="n">P</span><span class="o">)</span>
<span class="o">(</span><span class="n">hx</span><span class="o">:</span> <span class="n">x</span><span class="bp">=</span><span class="o">(</span><span class="n">kads</span><span class="bp">/</span><span class="n">kdes</span><span class="o">)</span><span class="bp">*</span><span class="n">P</span><span class="o">)</span>
<span class="c1">--</span>
<span class="o">(</span><span class="n">hc</span><span class="o">:</span> <span class="n">c</span><span class="bp">=</span><span class="n">k1</span><span class="bp">/</span><span class="n">k2</span><span class="o">)</span>
<span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="n">a</span><span class="bp">=</span><span class="n">c</span><span class="bp">*</span><span class="n">V₀</span><span class="o">)</span>
<span class="o">(</span><span class="n">hb</span><span class="o">:</span> <span class="n">b</span><span class="bp">=</span> <span class="n">kads</span><span class="bp">/</span><span class="n">kdes</span><span class="o">)</span>
<span class="c1">-- Constraints</span>
<span class="o">(</span><span class="n">hθ</span><span class="o">:</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">hx2</span><span class="o">:</span> <span class="n">x</span><span class="bp">&lt;</span><span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="n">hp</span><span class="o">:</span> <span class="n">P</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">hx1</span><span class="o">:</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">hv</span><span class="o">:</span> <span class="n">V₀</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">:</span>
<span class="n">q</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">P</span><span class="bp">/</span><span class="o">((</span><span class="mi">1</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">P</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">P</span><span class="bp">+</span><span class="n">c</span><span class="bp">/</span><span class="n">b</span><span class="o">))</span>
<span class="o">:=</span>

<span class="kd">begin</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">C</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_one</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">zero_mul</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">zero_add</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">C</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hA</span> <span class="n">at</span> <span class="n">hq</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hVads</span> <span class="n">at</span> <span class="n">hq</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_div_mul_left</span> <span class="n">at</span> <span class="n">hq</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_geometric_nnreal</span> <span class="n">at</span> <span class="n">hq</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>In the last line I used tsum_geometric_nnreal, which it starts from zero. While I want to change it to one, so it should be x/(1-x)  instead of 1/(1-x)</p>



<a name="277512204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277512204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277512204">(Apr 02 2022 at 07:12)</a>:</h4>
<p>Thanks. I'm not at lean right now and Zulip doesn't have a "mark message unread" functionality do hopefully I'll remember to take a look later if nobody else does beforehand</p>



<a name="277512232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277512232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277512232">(Apr 02 2022 at 07:13)</a>:</h4>
<p>you can star messages you want to get back to</p>



<a name="277514074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277514074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277514074">(Apr 02 2022 at 07:58)</a>:</h4>
<p>My number of starred messages is about to hit four figures :-/</p>



<a name="277514096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277514096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277514096">(Apr 02 2022 at 07:59)</a>:</h4>
<p>you need <code>git stash</code> for zulip messages</p>



<a name="277514328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277514328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277514328">(Apr 02 2022 at 08:03)</a>:</h4>
<p>"I'm not at Lean right now" is (for me) usually a euphemism for "I'm still in bed". OK so I got up. <span class="user-mention" data-user-id="459354">@Parivash</span> your code doesn't compile for me. Maybe test it on a new file?</p>



<a name="277514868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277514868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277514868">(Apr 02 2022 at 08:15)</a>:</h4>
<p><span class="user-mention" data-user-id="459354">@Parivash</span> here is a more helpful way to ask your question:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.instances.ennreal</span>

<span class="n">open_locale</span> <span class="n">nnreal</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">k1</span> <span class="n">k2</span> <span class="n">kads</span> <span class="n">kdes</span> <span class="n">a</span> <span class="n">b</span> <span class="n">C</span> <span class="n">P</span> <span class="n">q</span> <span class="n">A</span> <span class="n">V₀</span> <span class="n">Vads</span> <span class="n">x</span> <span class="n">y</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">/</span> <span class="n">V₀</span> <span class="bp">=</span>
          <span class="o">(</span><span class="n">C</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">x_1</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)</span> <span class="bp">/</span>
            <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">))</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">--rw tsum_geometric_nnreal at hq,</span>
  <span class="gr">admit</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>This is called a minimal working example, a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> . I have removed all the irrelevant junk from your question (using the <code>extract_goal</code> tactic and the delete key) and we now have a question which hopefully represents something close to what you're asking about. Please learn these tricks in future, because if you don't ask good questions then multiple users have to take time doing the same work which you could have done.</p>



<a name="277516421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277516421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277516421">(Apr 02 2022 at 08:48)</a>:</h4>
<p>The rewrite works fine for me.</p>



<a name="277524437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277524437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277524437">(Apr 02 2022 at 11:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Yes, your right. I'll do it. <br>
Thanks</p>



<a name="277637256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277637256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277637256">(Apr 03 2022 at 14:46)</a>:</h4>
<p>Is there any other thought for taking out zero from this lemma <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_geometric_nnreal">docs#tsum_geometric_nnreal</a>, or proving it for nnreal?</p>



<a name="277637771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277637771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277637771">(Apr 03 2022 at 14:50)</a>:</h4>
<p>Can you write the <em>lean code</em> for what you actually want, rather than just repeating an informal description? Please read about <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="277650641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277650641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277650641">(Apr 03 2022 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Okay, got it.<br>
I'm seeking a way to prove this one: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.specific_limits</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>
<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">C</span> <span class="n">q</span> <span class="n">A</span> <span class="n">B</span> <span class="n">x</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)</span>
<span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">))</span> <span class="o">:</span>
<span class="n">q</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span><span class="bp">/</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">x</span><span class="o">)))</span>
<span class="o">:=</span>
<span class="kd">begin</span>
<span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="277652926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277652926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277652926">(Apr 03 2022 at 18:08)</a>:</h4>
<p>That's untrue (choose <code>q = 1</code>, <code>θ = 0</code>)</p>



<a name="277652952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277652952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277652952">(Apr 03 2022 at 18:09)</a>:</h4>
<p>It's like saying "A = 1, prove q = 2` when you've given absolutely no information linking A and q.</p>



<a name="277653031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653031">(Apr 03 2022 at 18:10)</a>:</h4>
<p>Oh, I guess you meant to write <code>A</code> in both places?</p>



<a name="277653331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653331">(Apr 03 2022 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
Actually, the only thing that is important here is that applying this assumption <span class="tex-error">$$\sum{i=1}{\+ infinity} x ^ i = x/(1-x) $$</span> of course this condition is true there (x&lt;1)</p>



<a name="277653415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653415">(Apr 03 2022 at 18:19)</a>:</h4>
<p>Parivash, do you understand why your statement above is unprovable?</p>



<a name="277653473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653473">(Apr 03 2022 at 18:20)</a>:</h4>
<p>It's for the same reason that this is unprovable</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">A</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="277653644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653644">(Apr 03 2022 at 18:24)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
Eric, this is just part of proofing, I write this one to show what lemma I'm looking for, you know what I mean!</p>



<a name="277653702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653702">(Apr 03 2022 at 18:25)</a>:</h4>
<p>The idea behind a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> is that I don't have to try and work out what you mean, because the mwe should contain everything I need to know</p>



<a name="277653756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653756">(Apr 03 2022 at 18:26)</a>:</h4>
<p>So in this case, your <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> is too minimized to actually demonstrate your problem any more</p>



<a name="277653761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277653761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277653761">(Apr 03 2022 at 18:26)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>
<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">C</span> <span class="n">q</span> <span class="n">A</span> <span class="n">B</span> <span class="n">x</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)</span>
<span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">))</span> <span class="o">:</span>
<span class="n">q</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span><span class="bp">/</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">x</span><span class="o">)))</span>
<span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">tsum_geometric_nnreal</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
  <span class="c1">-- works fine</span>
<span class="gr">sorry</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
<span class="kd">end</span> <span class="n">nnreal</span>
</code></pre></div>



<a name="277654179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277654179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277654179">(Apr 03 2022 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Thanks. <br>
But actually, I need to use this assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><msup><mi>x</mi><mi>i</mi></msup><mo>=</mo><mfrac><mi>x</mi><mrow><mn>1</mn><mo>−</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \sum_{i=1}^{+\infty} x^{i} = \frac{x}{1-x} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2109em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9112em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0987em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> <br>
not this one :<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow></msubsup><msup><mi>x</mi><mi>i</mi></msup><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \sum_{i=0}^{+\infty} x^{i} = \frac{1}{1-x} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2109em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9112em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br>
Just we should change its starting point that I cannot find the lemma for it</p>



<a name="277654466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277654466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277654466">(Apr 03 2022 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/nnreal/near/277637771">said</a>:</p>
<blockquote>
<p>Can you write the <em>lean code</em> for what you actually want, rather than just repeating an informal description? Please read about <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>
</blockquote>
<p>@Parivash, the lean code you wrote didn't express what you actually wanted, which is why Kevin's answer didn't help you</p>



<a name="277654486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277654486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277654486">(Apr 03 2022 at 18:43)</a>:</h4>
<p>Do you know how to <em>state</em> the assumption you actually want in lean?</p>



<a name="277654550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277654550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277654550">(Apr 03 2022 at 18:44)</a>:</h4>
<p>You want <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_eq_zero_add">docs#tsum_eq_zero_add</a></p>



<a name="277654563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277654563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277654563">(Apr 03 2022 at 18:45)</a>:</h4>
<p>You certainly <em>will</em> want that, but far more useful will be to first work out precisely how to state your question in lean</p>



<a name="277659677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277659677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277659677">(Apr 03 2022 at 20:36)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> <br>
Yes, in order to use this one I defined this one: (h1 : ∀ k, θ (k) = C * x ^ k * θ 0) and then use this:  (hA : A = ∑' k, θ k)<br>
But this doesn't work here because <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mi>k</mi></mrow><annotation encoding="application/x-tex"> \theta k </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> starts from one not zero. So, I cannot use:  <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_eq_zero_add">docs#tsum_eq_zero_add</a>.<br>
Does it make sense?</p>



<a name="277659703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277659703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277659703">(Apr 03 2022 at 20:37)</a>:</h4>
<p>Once again, we are lacking context. Why does <code>θ</code> start at <code>1</code>. Does that mean you're using <a href="https://leanprover-community.github.io/mathlib_docs/find/pnat">docs#pnat</a>?</p>



<a name="277661033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277661033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277661033">(Apr 03 2022 at 21:04)</a>:</h4>
<blockquote>
<p>Does it make sense?</p>
</blockquote>
<p>No. The <em>only</em> thing that makes sense here is a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> . Click on the link.</p>



<a name="277661424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277661424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277661424">(Apr 03 2022 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> <br>
base on the equation 18 from this article <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex"> \theta </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> must be start from one (in this article S represent <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex"> \theta </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span><br>
<a href="/user_uploads/3121/qDsVaescHZKl_t-Bjno7rLgR/Brunauer38-BET-theory1.pdf">Brunauer38-BET-theory1.pdf</a> <br>
Moreover, if we check this formula for k=0 we have θ 0 = C  * θ 0, which is not correct. That's why I need to change starting point</p>



<a name="277661548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277661548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277661548">(Apr 03 2022 at 21:16)</a>:</h4>
<p>So what about formulating it as <code>∀ n, θ (n + 1) = C * θ 0 * x ^ (n + 1)</code>? This will be much easier to use in the proof.</p>



<a name="277667755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277667755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277667755">(Apr 03 2022 at 23:40)</a>:</h4>
<p>(deleted)</p>



<a name="277690050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277690050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277690050">(Apr 04 2022 at 07:11)</a>:</h4>
<p>@Parivash, your deleted comment looks like a valid point to me</p>



<a name="277690177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277690177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277690177">(Apr 04 2022 at 07:13)</a>:</h4>
<p>The lemma in question requires <code>add_comm_group</code>, which nnreal is not</p>



<a name="277718016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277718016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277718016">(Apr 04 2022 at 11:42)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
Yes, <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_eq_zero_add">docs#tsum_eq_zero_add</a> cannot be applied for nnreal. So, first, we should define such lemma for nnreal.</p>



<a name="277725814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277725814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277725814">(Apr 04 2022 at 12:51)</a>:</h4>
<p>For your own work, that would be fine</p>



<a name="277725852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277725852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277725852">(Apr 04 2022 at 12:51)</a>:</h4>
<p>But for mathlib, we might want to think about whether the lemma is still true under weaker assumptions</p>



<a name="277760126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277760126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277760126">(Apr 04 2022 at 16:46)</a>:</h4>
<p>Here's a hack which proves it in the nnreal case:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.algebra.infinite_sum</span>
<span class="kn">import</span> <span class="n">topology.instances.nnreal</span>

<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>I just reduce to the case of reals and then use <code>tsum_eq_zero_add</code> there.</p>



<a name="277772904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277772904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277772904">(Apr 04 2022 at 18:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Thank you, professor Kevin Buzzard :)</p>



<a name="277785247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277785247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277785247">(Apr 04 2022 at 19:57)</a>:</h4>
<p>First, I hope that I followed <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> rules here. If else, please give me some suggestions that I learn better.<br>
<span class="user-mention" data-user-id="387244">@Yaël Dillies</span> , I followed <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_eq_zero_add">docs#tsum_eq_zero_add</a>, and finally reach the below code. It was useful, but still, my problem doesn't solve. <br>
As you see, tsum_geometric_nnreal, doesn't work here. Because instead of x^n, now we have x^(n+1)! Please look at the below code. So, do you have any suggestions to tackle this issue?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">A</span> <span class="n">C</span> <span class="n">x</span> <span class="n">q</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)</span>
<span class="c1">-- Equations</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">k</span><span class="o">,</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">θ</span> <span class="n">k</span><span class="o">)</span> <span class="c1">-- Total Surface Area</span>
<span class="o">(</span><span class="n">hx2</span><span class="o">:</span> <span class="n">x</span><span class="bp">&lt;</span><span class="mi">1</span><span class="o">)</span>
<span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="bp">+</span><span class="n">C</span><span class="bp">*</span><span class="o">(</span><span class="n">x</span><span class="bp">/</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">x</span><span class="o">)))</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">rw</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h1</span><span class="o">]</span> <span class="n">at</span> <span class="n">hA</span> <span class="o">{</span><span class="n">single_pass</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">C</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_one</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_assoc</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="c1">--rw tsum_geometric_nnreal at hA,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="277792091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277792091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277792091">(Apr 04 2022 at 20:53)</a>:</h4>
<p>Just rewrite <code>x^(n+1)</code> as <code>x^n*x</code> and then take out the common factor of <code>x</code> from the sum. You see that you don't need the sum from 1?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">simp_rw</span> <span class="o">[</span><span class="n">pow_add</span><span class="o">,</span> <span class="n">pow_one</span><span class="o">,</span> <span class="n">tsum_mul_right</span><span class="o">]</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_geometric_nnreal</span> <span class="n">hx2</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
</code></pre></div>



<a name="277798238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/277798238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#277798238">(Apr 04 2022 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Excellent, good point!</p>



<a name="278920342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/278920342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#278920342">(Apr 14 2022 at 03:55)</a>:</h4>
<p>Hi,<br>
How can I use # mul_assoc inside the summation? <br>
Please fine code here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.algebra.infinite_sum</span>
<span class="kn">import</span> <span class="n">topology.instances.nnreal</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">C</span> <span class="n">Vads</span> <span class="n">x</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span>  <span class="o">)</span>
<span class="c1">-- Equations</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">k</span><span class="o">,</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
<span class="o">(</span><span class="n">hVads</span> <span class="o">:</span> <span class="n">Vads</span> <span class="bp">=</span>  <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span>  <span class="n">k</span> <span class="bp">*</span> <span class="n">θ</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:</span>
<span class="n">Vads</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">C</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">rw</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h1</span><span class="o">]</span> <span class="n">at</span> <span class="n">hVads</span> <span class="o">{</span><span class="n">single_pass</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
<span class="n">simp</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">C</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="c1">--rw mul_assoc at hVads, !!</span>
<span class="kd">end</span>
</code></pre></div>



<a name="278920922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/278920922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#278920922">(Apr 14 2022 at 04:04)</a>:</h4>
<p>A message was moved here from <a class="stream-topic" data-stream-id="116290" href="/#narrow/stream/116290-rss/topic/Recent.20Commits.20to.20mathlib.3Amaster">#rss &gt; Recent Commits to mathlib:master</a> by <span class="user-mention silent" data-user-id="306601">Kyle Miller</span>.</p>



<a name="278921041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/278921041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#278921041">(Apr 14 2022 at 04:06)</a>:</h4>
<p><span class="user-mention" data-user-id="459354">@Parivash</span> Does <code>simp_rw [mul_assoc] at hVads</code> work?</p>



<a name="278921303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/278921303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#278921303">(Apr 14 2022 at 04:12)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> <br>
Great!<br>
Yes, it works!<br>
Thanks</p>



<a name="278971440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/278971440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#278971440">(Apr 14 2022 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> <br>
Is there any way for changing the location of x^(x_1+1) with (x_+1).<br>
Note: The above code is edited based on my new request.</p>



<a name="279226924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279226924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279226924">(Apr 17 2022 at 15:36)</a>:</h4>
<p>Hi, <br>
I faced with an issue in closing this goal. Please find it here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>


<span class="kd">theorem</span> <span class="n">nnreal.tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="bp">↑</span><span class="n">n</span><span class="o">)</span> <span class="bp">*</span> <span class="n">r</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">r</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="k">have</span> <span class="n">hr'</span> <span class="o">:</span> <span class="bp">∥</span><span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">∥</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
<span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">real.norm_eq_abs</span><span class="o">,</span> <span class="n">abs_lt</span><span class="o">],</span>
<span class="n">split</span><span class="o">,</span>
<span class="o">{</span> <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="n">_</span> <span class="n">r.coe_nonneg</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">hr</span> <span class="o">}</span> <span class="o">},</span>
<span class="n">apply</span> <span class="n">nnreal.coe_injective</span><span class="o">,</span>
<span class="n">convert</span> <span class="n">tsum_coe_mul_geometric_of_norm_lt_1</span> <span class="n">hr'</span><span class="o">,</span>
<span class="o">{</span> <span class="n">norm_cast</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">push_cast</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">nnreal.coe_sub</span> <span class="n">hr.le</span><span class="o">,</span>
<span class="n">norm_cast</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="c1">--- repeat</span>
<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">C</span> <span class="n">Vads</span> <span class="n">x</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span>  <span class="o">)</span>
<span class="c1">-- Equations</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">k</span><span class="o">,</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
<span class="o">(</span><span class="n">hVads</span> <span class="o">:</span> <span class="n">Vads</span> <span class="bp">=</span>  <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span>  <span class="n">k</span> <span class="bp">*</span> <span class="o">(</span><span class="n">θ</span> <span class="n">k</span><span class="o">))</span>
<span class="o">:</span>
<span class="n">Vads</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span><span class="bp">/</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span><span class="o">))</span>
<span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">rw</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h1</span><span class="o">]</span> <span class="n">at</span> <span class="n">hVads</span> <span class="o">{</span><span class="n">single_pass</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
<span class="n">simp</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">simp_rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">simp_rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">simp_rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">tsum_mul_left</span> <span class="n">at</span> <span class="n">hVads</span><span class="o">,</span>
<span class="c1">--- rw [mul_comm] at hVads, !!!</span>
<span class="c1">--- rw nnreal.tsum_coe_mul_geometric_of_norm_lt_1 at hVads, !!!</span>
<span class="kd">end</span>
</code></pre></div>



<a name="279233150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279233150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279233150">(Apr 17 2022 at 18:09)</a>:</h4>
<p>What's your goal state at the end of that lemma?</p>



<a name="279291451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279291451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279291451">(Apr 18 2022 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
It is a formula in Chemical Engineering, and I want to formalize it. I edited it, now just I don't know how to apply # tsum_geometric_nnreal and # nnreal.tsum_coe_mul_geometric_of_norm_lt_1.<br>
Actually, I think I should rearrange it, but since it is inside the summation mul_comm, and mul_ assoc don't work! This is my issue!</p>



<a name="279293056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279293056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279293056">(Apr 18 2022 at 14:48)</a>:</h4>
<p>By "what's your goal state", I mean "please paste what's in your 'Lean infoview' at the point where you get stuck"</p>



<a name="279293134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279293134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279293134">(Apr 18 2022 at 14:49)</a>:</h4>
<p>(note that to link to a lemma, you need <code>docs#</code> before it, not just <code>#</code>)</p>



<a name="279294232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294232">(Apr 18 2022 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
Thanks for clarifying, I hope that now I answere your question!<br>
This is the error after applying docs# tsum_geometric_nnreal :<br>
rewrite tactic failed, did not find instance of the pattern in the target expression<br>
  ∑' (n : ℕ), x ^ n</p>



<a name="279294336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294336">(Apr 18 2022 at 15:01)</a>:</h4>
<p>(no space after <code>docs#</code>)</p>



<a name="279294369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294369">(Apr 18 2022 at 15:01)</a>:</h4>
<p>That's not the entire goal state, that's just the error</p>



<a name="279294395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294395">(Apr 18 2022 at 15:01)</a>:</h4>
<p>Can you paste the whole thing in <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="279294465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294465">(Apr 18 2022 at 15:02)</a>:</h4>
<p>The bit including the <code>⊢</code> and the <code>:</code> lines before it is the "goal state</p>



<a name="279294530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294530">(Apr 18 2022 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> <br>
Sure,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rewrite</span> <span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">did</span> <span class="n">not</span> <span class="n">find</span> <span class="kd">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pattern</span> <span class="k">in</span> <span class="n">the</span> <span class="n">target</span> <span class="n">expression</span>
  <span class="bp">∑'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">*</span> <span class="bp">?</span><span class="n">m_1</span> <span class="bp">^</span> <span class="n">n</span>
<span class="n">state</span><span class="o">:</span>
<span class="mi">2</span> <span class="n">goals</span>
<span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">,</span>
<span class="n">C</span> <span class="n">Vads</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
<span class="n">hx2</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">hVads</span> <span class="o">:</span> <span class="n">Vads</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">x_1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">x_1</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">x_1</span><span class="o">)))</span>
<span class="bp">⊢</span> <span class="n">Vads</span> <span class="bp">=</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">C</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">))</span>

<span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">,</span>
<span class="n">C</span> <span class="n">Vads</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
<span class="n">hVads</span> <span class="o">:</span> <span class="n">Vads</span> <span class="bp">=</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">k</span> <span class="bp">*</span> <span class="n">θ</span> <span class="n">k</span><span class="o">,</span>
<span class="n">hx2</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span>
<span class="bp">⊢</span> <span class="n">summable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">b</span> <span class="bp">*</span> <span class="n">θ</span> <span class="n">b</span><span class="o">)</span>
</code></pre></div>



<a name="279294778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294778">(Apr 18 2022 at 15:04)</a>:</h4>
<p>Yes, the problem is that it doesn't match! The sum in <code>hVads</code> has a <code>+</code> in it, you probably want to try and pull that out of the sum</p>



<a name="279294822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279294822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279294822">(Apr 18 2022 at 15:05)</a>:</h4>
<p>(note you should be looking at the first goal, not the second)</p>



<a name="279295202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279295202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279295202">(Apr 18 2022 at 15:08)</a>:</h4>
<p>Yes, I'm seeking a way to apply <a href="https://leanprover-community.github.io/mathlib_docs/find/tsum_geometric_nnreal">docs#tsum_geometric_nnreal</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/nnreal.tsum_coe_mul_geometric_of_norm_lt_1">docs#nnreal.tsum_coe_mul_geometric_of_norm_lt_1</a>. <br>
I cannot rearrange hVads in a way to apply these!</p>



<a name="279295312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279295312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279295312">(Apr 18 2022 at 15:09)</a>:</h4>
<p><code>rw tsum_geometric_nnreal hx2 at hVads</code> -- do you understand why this fails?</p>



<a name="279295707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279295707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279295707">(Apr 18 2022 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Yes, I think, I need to change the location of  x^x_1 with x_1 and of course, separate this assumption after <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex"> + </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">+</span></span></span></span></p>



<a name="279302653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279302653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279302653">(Apr 18 2022 at 16:15)</a>:</h4>
<p>Right, so you will need to find a result which says that the sum of (a_n + b_n) equals the sum of the a_n plus the sum of the b_n, and rewrite that first, and then you will be able to do the rewrite you want to do on the term which matches. The lemma you need will be called something like <code>tsum_add</code> or something like this, because we have a naming convention which says what lemmas like this should be called.</p>



<a name="279983937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279983937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279983937">(Apr 24 2022 at 14:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/nnreal/near/277760126">said</a>:</p>
<blockquote>
<p>Here's a hack which proves it in the nnreal case:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.algebra.infinite_sum</span>
<span class="kn">import</span> <span class="n">topology.instances.nnreal</span>

<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>I just reduce to the case of reals and then use <code>tsum_eq_zero_add</code> there.</p>
</blockquote>
<p>Actually, as I applied this: nnreal.tsum_eq_zero_add , it added another goal like summable. How can I close this goal?</p>



<a name="279984005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984005">(Apr 24 2022 at 14:36)</a>:</h4>
<p>I don't know -- what's the goal? What's the tactic state? Do you know the maths proof?</p>



<a name="279984034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984034">(Apr 24 2022 at 14:37)</a>:</h4>
<p>let me provide its code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">namespace</span> <span class="n">nnreal</span>
<span class="n">open_locale</span> <span class="n">nnreal</span> <span class="n">big_operators</span>

<span class="kd">theorem</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">+</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">subtype.ext</span><span class="o">,</span>
  <span class="n">push_cast</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">summable</span> <span class="n">g</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">summable.map</span> <span class="n">hf</span> <span class="o">(</span><span class="n">nnreal.to_real_hom</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="bp">→+</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">continuous_induced_dom</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">tsum_eq_zero_add</span> <span class="n">hg</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">some_name</span> <span class="o">(</span><span class="n">θ</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span> <span class="o">)(</span><span class="n">k1</span> <span class="n">k2</span> <span class="n">kads</span> <span class="n">kdes</span> <span class="n">a</span> <span class="n">b</span> <span class="n">C</span> <span class="n">P</span> <span class="n">q</span> <span class="n">A</span> <span class="n">V₀</span> <span class="n">Vads</span> <span class="n">x</span> <span class="n">y</span> <span class="n">c</span><span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span>  <span class="o">)</span>
<span class="c1">-- Equations</span>
<span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">k</span><span class="o">,</span> <span class="n">θ</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">θ</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="bp">∑'</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">θ</span> <span class="n">k</span><span class="o">)</span>
<span class="c1">-- Definitions</span>

<span class="o">:</span>
<span class="n">q</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">*</span><span class="n">P</span><span class="bp">/</span><span class="o">((</span><span class="mi">1</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">P</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">P</span><span class="bp">+</span><span class="n">c</span><span class="bp">*</span><span class="n">P</span><span class="o">))</span>
<span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">rw</span> <span class="n">nnreal.tsum_eq_zero_add</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="279984090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Parivash <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984090">(Apr 24 2022 at 14:38)</a>:</h4>
<p>I could close the first goal, but I don't have any idea about the second one!</p>



<a name="279984109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984109">(Apr 24 2022 at 14:39)</a>:</h4>
<p>This is not a Lean question -- this is a mathematics question. your strategy is only mathematically valid if that sum converges so you need to find a maths proof that it conerges.</p>



<a name="279984252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984252">(Apr 24 2022 at 14:42)</a>:</h4>
<p>In maths we would not normally talk about an infinite sum <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\sum_n a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0017em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> unless it converges. But Lean is different. It will allow you to write <code>∑' (b : ℕ), f b </code> whether or not the sum converges, and it just defines the sum to be 0 if mathematically the sum doesn't converge. The convergence assumptions are still needed though, it's just that the theorems ask for them rather than the definitions.</p>



<a name="279984279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nnreal/near/279984279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nnreal.html#279984279">(Apr 24 2022 at 14:43)</a>:</h4>
<p>You have a hypothesis <code>A = ∑' (k : ℕ), θ k</code> but perhaps this doesn't mean what you think it means. It doesn't mean "the sum is convergent and equals A", it means "either the sum is convergent and it equals A, or the sum does not converge and A=0".</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>