---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/range.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html">range</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="226826865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226826865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226826865">(Feb 18 2021 at 15:26)</a>:</h4>
<p>Is there somewhere in the stdlib <code>range</code> function?</p>
<p>Right now I make it myself</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">has_range</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">range</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span> <span class="o">}</span>
<span class="kd">infix</span> <span class="bp">`..`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">has_range.range</span>

<span class="kn">namespace</span> <span class="n">nat</span>
  <span class="kn">private</span> <span class="kd">def</span> <span class="n">range'</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">ℕ</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">:=</span> <span class="o">[</span><span class="mi">0</span><span class="o">]</span>
  <span class="bp">|</span> <span class="n">a</span> <span class="mi">0</span> <span class="o">:=</span> <span class="o">[]</span>
  <span class="bp">|</span> <span class="n">a</span> <span class="n">b</span><span class="bp">@</span><span class="o">(</span><span class="n">b'</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">b</span> <span class="bp">&gt;=</span> <span class="n">a</span> <span class="k">then</span> <span class="n">b</span><span class="o">::</span><span class="n">range'</span> <span class="n">a</span> <span class="n">b'</span> <span class="k">else</span> <span class="o">[]</span>

  <span class="kn">protected</span> <span class="kd">def</span> <span class="n">range</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">range'</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">reverse</span>

  <span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">range</span> <span class="o">:=</span> <span class="n">nat.range</span> <span class="o">}</span>
<span class="kd">end</span> <span class="n">nat</span>

<span class="kn">namespace</span> <span class="n">char</span>
  <span class="kn">protected</span> <span class="kd">def</span> <span class="n">range</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">char</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">char</span> <span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">char</span> <span class="o">:=</span>
  <span class="n">char.of_nat</span> <span class="bp">&lt;$&gt;</span> <span class="o">(</span><span class="n">a.to_nat</span> <span class="bp">..</span> <span class="n">b.to_nat</span><span class="o">)</span>

  <span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">char</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">range</span> <span class="o">:=</span> <span class="n">char.range</span> <span class="o">}</span>
<span class="kd">end</span> <span class="n">char</span>

<span class="k">#eval</span> <span class="sc">'a'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="sc">'A'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="mi">10</span><span class="bp">..</span><span class="mi">20</span>
<span class="k">#eval</span> <span class="mi">1</span><span class="bp">..</span><span class="mi">0</span>
</code></pre></div>



<a name="226827519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226827519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226827519">(Feb 18 2021 at 15:30)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> had a branch where they were working on this (edit: <a href="https://github.com/leanprover-community/mathlib/tree/fin_range">branch#fin_range</a>)</p>



<a name="226829270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226829270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226829270">(Feb 18 2021 at 15:42)</a>:</h4>
<p>In the meantime, you can use <a href="http://list.map">list.map</a> of list.range or list.range'</p>



<a name="226831042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226831042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226831042">(Feb 18 2021 at 15:52)</a>:</h4>
<p>Thanks. No I have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">has_range</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">range</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">infix</span> <span class="bp">`..`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">has_range.range</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">range</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="bp">&lt;$&gt;</span> <span class="n">list.range</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">char</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">range</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">char.of_nat</span> <span class="bp">&lt;$&gt;</span> <span class="o">(</span><span class="n">a.to_nat</span> <span class="bp">..</span> <span class="n">b.to_nat</span><span class="o">)</span> <span class="o">}</span>

<span class="k">#eval</span> <span class="sc">'a'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="sc">'A'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="mi">10</span><span class="bp">..</span><span class="mi">20</span>
<span class="k">#eval</span> <span class="mi">1</span><span class="bp">..</span><span class="mi">2</span>
</code></pre></div>



<a name="226831219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226831219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226831219">(Feb 18 2021 at 15:53)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/list.range'">docs#list.range'</a> is a better match for your <code>has_range ℕ</code></p>



<a name="226831599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226831599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226831599">(Feb 18 2021 at 15:55)</a>:</h4>
<p>I've updated my comment above with a link to the branch I'm thinking of. <a href="https://github.com/leanprover-community/mathlib/blob/2a99682ce7095ccdad56cfcec367c34ac04fa17a/src/data/list/enum.lean#L24-L25">Here's a definition</a> basically equal to your <code>has_range</code></p>



<a name="226832286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226832286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226832286">(Feb 18 2021 at 16:00)</a>:</h4>
<p>Hm, is mathlib something like community stdlib now? I have only default lean lib, with init.data.list without range'.</p>



<a name="226833223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226833223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226833223">(Feb 18 2021 at 16:02)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.equiv.basic</span>

<span class="kd">class</span> <span class="n">has_range</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">range</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">infix</span> <span class="bp">`..`</span><span class="o">:</span><span class="mi">50</span> <span class="o">:=</span> <span class="n">has_range.range</span>

<span class="kd">def</span> <span class="n">has_range.of_equiv</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">list.map</span> <span class="n">e.symm</span> <span class="bp">$</span> <span class="n">list.range'</span> <span class="o">(</span><span class="n">e</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">e</span> <span class="n">x</span><span class="o">)⟩</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">has_range.of_equiv</span> <span class="o">(</span><span class="n">equiv.refl</span> <span class="n">_</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_range</span> <span class="n">char</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">range</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">char.of_nat</span> <span class="bp">&lt;$&gt;</span> <span class="o">(</span><span class="n">a.to_nat</span> <span class="bp">..</span> <span class="n">b.to_nat</span><span class="o">)</span> <span class="o">}</span>

<span class="k">#eval</span> <span class="sc">'a'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="sc">'A'</span><span class="bp">..</span><span class="sc">'z'</span>
<span class="k">#eval</span> <span class="mi">10</span><span class="bp">..</span><span class="mi">20</span>
<span class="k">#eval</span> <span class="mi">1</span><span class="bp">..</span><span class="mi">2</span>
</code></pre></div>



<a name="226880787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226880787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226880787">(Feb 18 2021 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="390421">@kana</span> Yes, there isn't really anything called stdlib in lean 3, there is the core library in the lean repo and then there is mathlib, and for the most part all of us on zulip are going to assume you have mathlib (it's a monorepo development style)</p>



<a name="226880943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226880943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226880943">(Feb 18 2021 at 21:08)</a>:</h4>
<p>the core library is intentionally minimal, so I would recommend you use mathlib for operations on lists and such, like list.range'</p>



<a name="226881143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/range/near/226881143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/range.html#226881143">(Feb 18 2021 at 21:09)</a>:</h4>
<p>The reason why <code>list.range'</code> takes a start and length instead of start and end is because the latter makes the implicit assumption that the start is less or equal to the end, and this complicates proofs and reasoning about the function</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>