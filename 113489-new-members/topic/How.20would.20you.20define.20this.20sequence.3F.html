---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html">How would you define this sequence?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222555110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222555110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222555110">(Jan 13 2021 at 09:35)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sequence1</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">6</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="o">:=</span> <span class="k">have</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">,</span> <span class="k">from</span> <span class="gr">sorry</span><span class="o">,</span>
    <span class="mi">5</span> <span class="bp">+</span> <span class="n">sequence1</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
</code></pre></div>



<a name="222555258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222555258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222555258">(Jan 13 2021 at 09:36)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sequence1</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">6</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">sequence1</span> <span class="n">n</span>
</code></pre></div>



<a name="222565375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222565375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222565375">(Jan 13 2021 at 11:16)</a>:</h4>
<p>One more question: how does Lean know that this recursion is well founded without me having to supply a proof?</p>



<a name="222568624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222568624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222568624">(Jan 13 2021 at 11:50)</a>:</h4>
<p>It runs an automated check in the background. Usually this works, but if it doesn't there is an option to provide a proof manually.</p>



<a name="222568667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222568667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222568667">(Jan 13 2021 at 11:51)</a>:</h4>
<p><span class="user-mention" data-user-id="270523">@Huỳnh Trần Khanh</span> <a href="https://leanprover-community.github.io/extras/well_founded_recursion.html">https://leanprover-community.github.io/extras/well_founded_recursion.html</a> for more info</p>



<a name="222682404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682404">(Jan 14 2021 at 05:55)</a>:</h4>
<p>How would you prove that sequence1 n = (some closed form expression)? Through induction right? I tried to rewrite and unfold but the goal then transformed into some Lisp-like gobbledygook and I didn't know how to proceed.</p>



<a name="222682463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682463">(Jan 14 2021 at 05:56)</a>:</h4>
<p>Thanks in advance.</p>



<a name="222682550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682550">(Jan 14 2021 at 05:59)</a>:</h4>
<p>Also how would you define the 1-indexed variant of sequence1 (sequence1 1 = 6, sequence1 (n + 1) = 5 + sequence1 n and sequence1 0 is not defined)?</p>



<a name="222682611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682611">(Jan 14 2021 at 06:00)</a>:</h4>
<p>Should I just supply a garbage value for sequence1 0, let's say 998244353 and call it a day?</p>



<a name="222682675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682675">(Jan 14 2021 at 06:02)</a>:</h4>
<p>Have you tried  the natural number game? To do induction you use <code>induction n with k ih</code>, or <code>cases n</code>.</p>



<a name="222682714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682714">(Jan 14 2021 at 06:02)</a>:</h4>
<p>You could use <code>option</code> for differentiating defined and undefined values.</p>



<a name="222682719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682719">(Jan 14 2021 at 06:02)</a>:</h4>
<p>You can also use 37.</p>



<a name="222682720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682720">(Jan 14 2021 at 06:02)</a>:</h4>
<p>Or make sure that all crucial lemmas describing your function take a hypothesis that the input is positive.</p>



<a name="222682892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682892">(Jan 14 2021 at 06:06)</a>:</h4>
<p>Yeah <code>induction n with d induction_hypothesis</code> is what I use. How do I "unfold" the function definition so that I can apply the usual tactics such as rw, ring and resolve the goal?</p>



<a name="222682970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682970">(Jan 14 2021 at 06:08)</a>:</h4>
<p>Can you give a MWE of what you're trying to do?</p>



<a name="222682981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222682981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222682981">(Jan 14 2021 at 06:08)</a>:</h4>
<p>Gimme a sec.</p>



<a name="222683012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683012">(Jan 14 2021 at 06:09)</a>:</h4>
<p>I'm not sure how you're expressing the idea of "closed form expression" here.</p>



<a name="222683193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683193">(Jan 14 2021 at 06:15)</a>:</h4>
<p>Alright so here is my code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">def</span> <span class="n">sequence1</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">6</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">sequence1</span> <span class="n">n</span>

<span class="kd">lemma</span> <span class="n">closed_form</span> <span class="o">{</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">}</span> <span class="o">:</span> <span class="n">sequence1</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">evaluate_right_hand_side</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">6</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">ring</span><span class="o">,</span>
    <span class="kd">end</span><span class="o">,</span>

    <span class="n">rw</span> <span class="n">evaluate_right_hand_side</span><span class="o">,</span>

    <span class="c1">-- I am stuck here</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222683289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683289">(Jan 14 2021 at 06:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">closed_form</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">sequence1</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">,</span> <span class="n">hd</span><span class="o">],</span>
    <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">ring</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222683333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683333">(Jan 14 2021 at 06:18)</a>:</h4>
<p><code>norm_num</code> deals with numerical calculations for nats, ints, rats, reals, and coercions thereof</p>



<a name="222683339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683339">(Jan 14 2021 at 06:18)</a>:</h4>
<p>and I give <code>sequence1</code> to the things it knows about so it can deal with <code>sequence1 0</code>.</p>



<a name="222683343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683343">(Jan 14 2021 at 06:19)</a>:</h4>
<p>When you have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="n">nat.zero</span>
<span class="bp">⊢</span> <span class="mi">0</span><span class="bp">.</span><span class="n">sequence1</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">6</span>
</code></pre></div>
<p><code>sequence1 0</code> is definitionally equal to 6, because you defined it like that, you don't have to <code>unfold</code> it.</p>



<a name="222683404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683404">(Jan 14 2021 at 06:20)</a>:</h4>
<p>In the inductive case, you have <code>sequence1 d.succ</code>, which <code>rw sequence1</code> changes to <code>5 + sequence1 d</code> by the definition of <code>sequence1</code>. Then <code>rw hd</code> uses the inductive hypothesis to change that into whatever statement. <code>norm_num</code> makes it all happy by dealing with the coerced <code>d.succ</code> now, and then finish with <code>ring</code> to combine terms.</p>



<a name="222683414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683414">(Jan 14 2021 at 06:21)</a>:</h4>
<p>Thank you, that was really helpful! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="222683497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683497">(Jan 14 2021 at 06:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="355764">Hanting Zhang</span> <a href="#narrow/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F/near/222683343">said</a>:</p>
<blockquote>
<p>When you have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="n">nat.zero</span>
<span class="bp">⊢</span> <span class="mi">0</span><span class="bp">.</span><span class="n">sequence1</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">6</span>
</code></pre></div>
<p><code>sequence1 0</code> is definitionally equal to 6, because you defined it like that, you don't have to <code>unfold</code> it.</p>
</blockquote>
<p>Thanks! And therefore <code>refl</code> also works for the base case!</p>



<a name="222683508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222683508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222683508">(Jan 14 2021 at 06:23)</a>:</h4>
<p>I got it now.</p>



<a name="222688358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222688358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222688358">(Jan 14 2021 at 08:04)</a>:</h4>
<p>Now I'm fed up with counting from 0, LOL. How would you prove the same thing, but with the base case being 1 := 6?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">def</span> <span class="n">sequence1</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
  <span class="bp">|</span> <span class="c1">-- what to put here, 0 := 998244353? but then norm_num would fail to work</span>
    <span class="c1">-- 998244353 is every competitive programmer's favorite integer</span>
    <span class="c1">-- see https://codeforces.com/blog/entry/62541</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="mi">6</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">sequence1</span> <span class="n">n</span>

<span class="kd">lemma</span> <span class="n">closed_form</span> <span class="o">{</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">}</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">sequence1</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="c1">-- nat.le_induction should work right</span>
  <span class="n">apply</span> <span class="n">nat.le_induction</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">norm_num</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">],</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">bound</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">induction_hypothesis</span><span class="o">,</span>

    <span class="n">norm_num</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
    <span class="n">ring</span> <span class="n">at</span> <span class="n">induction_hypothesis</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">induction_hypothesis</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222688730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222688730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222688730">(Jan 14 2021 at 08:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">def</span> <span class="n">sequence1</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="mi">6</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span> <span class="bp">+</span> <span class="n">sequence1</span> <span class="n">n</span>

<span class="kd">lemma</span> <span class="n">closed_form</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hpos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">sequence1</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">absurd</span> <span class="n">hpos</span> <span class="o">(</span><span class="n">lt_irrefl</span> <span class="n">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sequence1</span><span class="o">,</span> <span class="n">hn</span> <span class="n">nat.succ_pos'</span><span class="o">],</span>
      <span class="n">ring</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222689247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20would%20you%20define%20this%20sequence%3F/near/222689247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20would.20you.20define.20this.20sequence.3F.html#222689247">(Jan 14 2021 at 08:16)</a>:</h4>
<p>What was nice here is expressing the constraint <code>hpos</code> in the more mathlib friendly way, which is <code>0 &lt; n</code> instead of <code>1 \le n</code>. Then, one discharges the first case of <code>n = 0</code> by showing that <code>0 &lt; 0</code> leads to a contradiction, easily via <code>lt_irrefl</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>