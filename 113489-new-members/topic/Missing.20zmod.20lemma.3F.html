---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html">Missing zmod lemma?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276101626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276101626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276101626">(Mar 21 2022 at 19:22)</a>:</h4>
<p>Not sure if this is the right stream for this question... (I'm still thinking of myself as a new member, though).<br>
We have (in <code>data.zmod.basic</code>) the following</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="kd">theorem</span> <span class="n">zmod.int_coe_eq_int_coe_iff</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">a</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="bp">↑</span><span class="n">c</span><span class="o">]</span>
 <span class="kd">theorem</span> <span class="n">zmod.int_coe_eq_int_coe_iff'</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">a</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">%</span> <span class="bp">↑</span><span class="n">c</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">%</span> <span class="bp">↑</span><span class="n">c</span>
 <span class="kd">theorem</span> <span class="n">zmod.int_coe_zmod_eq_zero_iff_dvd</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">↑</span><span class="n">b</span> <span class="bp">∣</span> <span class="n">a</span>
</code></pre></div>
<p>but I cannot seem to find</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zmod.int_coe_eq_int_coe_iff_dvd_sub</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">a</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">b</span> <span class="bp">↔</span> <span class="bp">↑</span><span class="n">c</span> <span class="bp">∣</span> <span class="n">a</span><span class="bp">-</span><span class="n">b</span>
</code></pre></div>
<p>(which would be useful to have). Is there a reason why this is missing?</p>



<a name="276101910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276101910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276101910">(Mar 21 2022 at 19:26)</a>:</h4>
<p>(Also, the naming of the results is not completely consistent; the last one has an additional <code>_zmod</code>...)</p>



<a name="276107834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276107834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276107834">(Mar 21 2022 at 20:18)</a>:</h4>
<p>This is an ok place for the question, but #general or <a class="stream" data-stream-id="217875" href="/#narrow/stream/217875-Is-there-code-for-X.3F">#Is there code for X?</a> would also be ok for it.<br>
I don't think there is any particular reason it is missing, most likely nobody needed precisely that lemma (or they just rewrote with <a href="https://leanprover-community.github.io/mathlib_docs/find/sub_eq_zero">docs#sub_eq_zero</a> and used one of the ones you mentioned instead). Seems like a useful enough lemma to add to mathlib. Removing the zmod would also be welcome I'm sure</p>



<a name="276109721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276109721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276109721">(Mar 21 2022 at 20:35)</a>:</h4>
<p>So how does this work? Do I wait and hope that somebody adds it eventually, or can/should I do it myself? In the latter case, I'll need some help, since I have never used github so far.<br>
But probably this would be a good opportunity to learn how to do it, since I'll most likely want to add stuff to mathlib at some point.</p>



<a name="276109808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276109808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276109808">(Mar 21 2022 at 20:36)</a>:</h4>
<p>I'm not sure about removing the <code>_zmod</code>, though, since I'd be afraid this could break code that uses the present name.</p>



<a name="276110314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276110314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276110314">(Mar 21 2022 at 20:40)</a>:</h4>
<p>You can do it, this would be a nice first PR to mathlib I think, to get used to the workflow.<br>
We have some instructions at <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a>, but the upshot is you can ask here for push access to the mathlib git repository (and give your github username). Then you push your updates to a branch of the leanprover-community/mathlib repo (using git) and create a PR for that branch (using the github website).</p>
<p>As for breaking existing code, we have continuous integration tools that will check that all of mathlib still builds with your changes, so that is fine (some things may need fixing as part of the PR but any breakage will be discovered). As for external projects there is potential for breakage when they update, but we try and smooth that by having tools to let people know about breaking changes, rather than by not making breaking changes, mathlib has very little in the way of backwards compatibility guarentees.</p>



<a name="276110526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276110526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276110526">(Mar 21 2022 at 20:42)</a>:</h4>
<p>OK, thanks for the pointer! I'll have a look at how this works (but maybe not today...).</p>



<a name="276125051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276125051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276125051">(Mar 21 2022 at 23:06)</a>:</h4>
<p>Does this lemma exist if you apply one of the first two lemmas you mention first?</p>



<a name="276125074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276125074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276125074">(Mar 21 2022 at 23:06)</a>:</h4>
<p><del>maybe <a href="https://leanprover-community.github.io/mathlib_docs/find/int.dvd_sub">docs#int.dvd_sub</a>?</del></p>



<a name="276125440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276125440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276125440">(Mar 21 2022 at 23:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">c</span><span class="o">]</span> <span class="bp">↔</span> <span class="n">c</span> <span class="bp">∣</span> <span class="n">a</span><span class="bp">-</span><span class="n">b</span>
</code></pre></div>
<p>Is probably the lemma I would expect to have</p>



<a name="276129130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276129130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276129130">(Mar 22 2022 at 00:00)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/int.modeq_iff_dvd">docs#int.modeq_iff_dvd</a></p>



<a name="276161652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276161652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276161652">(Mar 22 2022 at 09:31)</a>:</h4>
<p>I think all these equivalences should be available.</p>



<a name="276163207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276163207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276163207">(Mar 22 2022 at 09:48)</a>:</h4>
<p>Aren't you effectively stating that every lemma with <code>a ≡ b [ZMOD c]</code> on the LHS should have an analogous lemma about zmod?</p>



<a name="276164050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276164050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276164050">(Mar 22 2022 at 09:57)</a>:</h4>
<p>Why not? The <code>zmod</code> version seems more useful to me, since <code>zmod n</code> is a finite ring (which allows for example the use of <code>dec_trivial</code> to prove statements [as I recently learned]).</p>



<a name="276256136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276256136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276256136">(Mar 22 2022 at 21:19)</a>:</h4>
<p>Another question: How do I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span>
<span class="kd">lemma</span> <span class="n">zmod.coe_self_eq_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">zmod.nat_coe_zmod_eq_zero_iff_dvd</span>
</code></pre></div>
<p>to apply to (say) <code>(2 : zmod 2)</code>? The problem seems to be that <code>2 : zmod 2</code> is not the same as <code>(2 : nat) : zmod 2</code>.</p>



<a name="276256433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276256433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276256433">(Mar 22 2022 at 21:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="479359">Michael Stoll</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F/near/276164050">said</a>:</p>
<blockquote>
<p>(which allows for example the use of <code>dec_trivial</code> to prove statements [as I recently learned]).</p>
</blockquote>
<p>In principle, <code>dec_trivial</code> can prove things about <code>ZMOD</code> too, and it might just be a matter of missing <code>decidable</code> instances.</p>



<a name="276256547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276256547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276256547">(Mar 22 2022 at 21:22)</a>:</h4>
<p>Well, I guess it is good to have flexibility, so have both!</p>



<a name="276257145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257145">(Mar 22 2022 at 21:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="479359">Michael Stoll</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F/near/276256136">said</a>:</p>
<blockquote>
<p>Another question: How do I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span>
<span class="kd">lemma</span> <span class="n">zmod.coe_self_eq_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">zmod.nat_coe_zmod_eq_zero_iff_dvd</span>
</code></pre></div>
<p>to apply to (say) <code>(2 : zmod 2)</code>? The problem seems to be that <code>2 : zmod 2</code> is not the same as <code>(2 : nat) : zmod 2</code>.</p>
</blockquote>
<p>Yeah, good question. For numerals the way people usually do things is to prove results for <code>bit0</code> and <code>bit1</code>. You can <code>set_option pp.numerals false</code> to see what Lean actually sees.</p>



<a name="276257329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257329">(Mar 22 2022 at 21:29)</a>:</h4>
<p>This kind of stumbling block is something I have repeatedly hurt my feet on. It would be nice if there were some kind of automatic coercion of numerals...</p>



<a name="276257411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257411">(Mar 22 2022 at 21:29)</a>:</h4>
<p>I think in Lean 4 they completely overhauled numerals.</p>



<a name="276257527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257527">(Mar 22 2022 at 21:30)</a>:</h4>
<p>Do <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_num">tactic#norm_num</a> or <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_cast">tactic#norm_cast</a> work for you to normalize the numerals?</p>



<a name="276257613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257613">(Mar 22 2022 at 21:31)</a>:</h4>
<p>Instead of <code>simp</code>, I can do <code>rw [(by norm_cast : (2 : zmod 2) = ((2 : ℕ) : zmod 2)), zmod.coe_self_eq_zero]</code>. But I would rather want to have simp do that automatically.</p>



<a name="276257680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257680">(Mar 22 2022 at 21:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F/near/276257411">said</a>:</p>
<blockquote>
<p>I think in Lean 4 they completely overhauled numerals.</p>
</blockquote>
<p>I'm probably misunderstanding it, but the mental model I have was that all numerals will be in "<code>(2 : nat) : zmod 2</code>" form</p>



<a name="276257789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276257789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276257789">(Mar 22 2022 at 21:32)</a>:</h4>
<p>In that case, it should work, but it doesn't.</p>



<a name="276258524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276258524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276258524">(Mar 22 2022 at 21:37)</a>:</h4>
<p>it should work in Lean 4 -- we're all using Lean 3</p>



<a name="276259048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276259048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276259048">(Mar 22 2022 at 21:42)</a>:</h4>
<p>Regarding <code>zmod.coe_self_eq_zero</code>, I think that sort of lemma is more under the purview of <code>norm_num</code>. It can't normalize <code>2 : zmod 2</code> yet, but it's a matter of creating a <code>norm_num</code> tactic using code from <code>norm_fin</code>.</p>
<p>Here's a hack though:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">by_norm_cast</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">zmod.coe_self_eq_zero</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a'</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a'</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">.</span> <span class="n">by_norm_cast</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a'</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">change</span> <span class="n">a'</span> <span class="bp">=</span> <span class="n">a</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">zmod.nat_coe_zmod_eq_zero_iff_dvd</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">zmod.coe_self_eq_zero</span> <span class="mi">2</span> <span class="mi">2</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="276259118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276259118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276259118">(Mar 22 2022 at 21:43)</a>:</h4>
<p>Would this work as a simp lemma?</p>



<a name="276266174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276266174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276266174">(Mar 22 2022 at 23:02)</a>:</h4>
<p>(deleted)</p>



<a name="276648238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276648238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276648238">(Mar 25 2022 at 16:54)</a>:</h4>
<p>Coming back to the original topic, I would like to add this lemma (and change the names of two by removing "_zmod") to see how the process works. Can someone give me permission to push a branch? I'm MichaelStollBayreuth on Github. Thanks!</p>



<a name="276648648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276648648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276648648">(Mar 25 2022 at 16:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="479359">Michael Stoll</span> <a href="#narrow/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F/near/276648238">said</a>:</p>
<blockquote>
<p>Coming back to the original topic, I would like to add this lemma (and change the names of two by removing "_zmod") to see how the process works. Can someone give me permission to push a branch? I'm MichaelStollBayreuth on Github. Thanks!</p>
</blockquote>
<p>Invite sent! <a href="https://github.com/leanprover-community/mathlib/invitations">https://github.com/leanprover-community/mathlib/invitations</a></p>



<a name="276649008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276649008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276649008">(Mar 25 2022 at 17:00)</a>:</h4>
<p>Thanks!</p>



<a name="276791876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276791876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276791876">(Mar 27 2022 at 14:45)</a>:</h4>
<p>The PR is <a href="https://github.com/leanprover-community/mathlib/pull/12944">#12944</a>. It is just the lemma with a one-line proof (after a suggestion by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> ).</p>



<a name="276801566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276801566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276801566">(Mar 27 2022 at 18:40)</a>:</h4>
<p>Looks like 3 lines to me ;). You could use <code>by rw ...</code> instead of <code>begin rw ... end</code> next time to save two lines</p>



<a name="276802965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276802965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276802965">(Mar 27 2022 at 19:13)</a>:</h4>
<p>Actually, it adds four lines...<br>
What is the recommended style here, use <code>begin ... end</code> or <code>by ...</code> if it is a one-line proof?</p>



<a name="276803044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Missing%20zmod%20lemma%3F/near/276803044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F.html#276803044">(Mar 27 2022 at 19:15)</a>:</h4>
<p><code>by ...</code> for one-liners, not for twopliners</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>