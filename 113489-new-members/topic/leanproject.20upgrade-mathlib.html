---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html">leanproject upgrade-mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224938442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224938442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224938442">(Feb 02 2021 at 21:21)</a>:</h4>
<p>I ran <code>leanproject upgrade-mathlib</code> to get access to one the lemmas I edited which was recently merged. After doing this I started getting a huge number of errors - for example</p>
<p><code>excessive memory consumption detected at 'expression replacer' (potential solution: increase memory consumption threshold)</code></p>
<p>I also started getting messages saying things like</p>
<p><code>imported file '/Users/boltonbailey/Desktop/myproject/_target/deps/mathlib/src/data/polynomial/eval.lean' uses sorry</code></p>
<p>Not sure why I should ever get this message for a mathlib file. Can anyone troubleshoot what is going on?</p>
<p>Another thing - If I <code>leanproject new</code> to make a fresh project and copy my <code>/src</code> folder into it, everything works fine.</p>



<a name="224938547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224938547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224938547">(Feb 02 2021 at 21:22)</a>:</h4>
<p><span class="user-mention" data-user-id="282271">@Bolton Bailey</span> did you restart lean in VScode, after upgrading mathlib?</p>



<a name="224938576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224938576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224938576">(Feb 02 2021 at 21:22)</a>:</h4>
<p>no let me try that</p>



<a name="224938790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224938790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224938790">(Feb 02 2021 at 21:24)</a>:</h4>
<p>Yep, this seems to have fixed it. Thank you.</p>



<a name="224939315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224939315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224939315">(Feb 02 2021 at 21:28)</a>:</h4>
<p>This seems to be a common stumbling block. I wonder if there's a way for the extension to detect that it needs to be restarted? Or perhaps <code>leanproject</code> could output a reminder.</p>



<a name="224939415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224939415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224939415">(Feb 02 2021 at 21:29)</a>:</h4>
<p>emacs seems to handle this fine, fwiw</p>



<a name="224939581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224939581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224939581">(Feb 02 2021 at 21:30)</a>:</h4>
<p>Interesting! I wonder what <code>lean-mode</code> does differently.</p>



<a name="224956642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224956642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224956642">(Feb 03 2021 at 00:15)</a>:</h4>
<p>I was just following the instructions on <a href="https://leanprover-community.github.io/leanproject.html">https://leanprover-community.github.io/leanproject.html</a> so a reminder there would be helpful.</p>



<a name="224957942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224957942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224957942">(Feb 03 2021 at 00:29)</a>:</h4>
<p>I opened a PR: <a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/164">https://github.com/leanprover-community/leanprover-community.github.io/pull/164</a></p>
<p>Let me know if there's anything I should add / modify.</p>



<a name="224963883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/leanproject%20upgrade-mathlib/near/224963883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/leanproject.20upgrade-mathlib.html#224963883">(Feb 03 2021 at 01:48)</a>:</h4>
<p>Seems good to me.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>