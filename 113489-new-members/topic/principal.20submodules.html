---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/principal.20submodules.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html">principal submodules</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208546301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208546301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208546301">(Aug 31 2020 at 11:43)</a>:</h4>
<p>Dear All,</p>
<p>I am trying to work with ideals generated by a single element, but I am having issues getting Lean to realize that they are principal.  More specifically, I suspect that the issue is that Lean does not recognize the element that I use to define the ideal to be the <code>generator</code> guaranteed by the <code>is_principal</code> property.  I am aware of the existence of this lemma (in /src/ring_theory/principal_ideal_domain.lean), which is what I would like to apply:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">mem_iff_eq_smul_generator</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">R</span><span class="o">)</span> <span class="o">[</span><span class="n">S</span><span class="bp">.</span><span class="n">is_principal</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">s</span> <span class="err">•</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">is_principal</span><span class="bp">.</span><span class="n">generator</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="bp">@</span><span class="n">eq_comm</span> <span class="bp">_</span> <span class="n">x</span><span class="o">,</span> <span class="err">←</span> <span class="n">mem_span_singleton</span><span class="o">,</span> <span class="n">span_singleton_generator</span><span class="o">]</span>
</code></pre></div>


<p>and this is my attempt</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">module</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">principal_ideal_domain</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">lemma</span> <span class="n">myprinc</span>  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">g</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">submodule</span><span class="bp">.</span><span class="n">span</span> <span class="n">R</span> <span class="o">{</span><span class="n">g</span><span class="o">}</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">s</span> <span class="err">•</span> <span class="n">g</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intro</span> <span class="n">sh</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">Rg</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span> <span class="o">(</span><span class="n">submodule</span><span class="bp">.</span><span class="n">span</span> <span class="n">R</span> <span class="o">{</span><span class="n">g</span><span class="o">}</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">R</span><span class="o">),</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">is_principal</span> <span class="n">Rg</span><span class="o">,</span>
        <span class="o">{</span>
            <span class="n">refine</span> <span class="o">{</span><span class="n">principal</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">},</span>
            <span class="n">use</span> <span class="n">g</span><span class="o">,</span>
        <span class="o">},</span>
<span class="c1">--  library_search fails</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="208547761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547761">(Aug 31 2020 at 12:03)</a>:</h4>
<p>Try <code>haveI</code>?</p>



<a name="208547811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547811">(Aug 31 2020 at 12:04)</a>:</h4>
<p>(Why is <code>is_principal</code> a class anyways?)</p>



<a name="208547863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547863">(Aug 31 2020 at 12:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/principal.20submodules/near/208547761">said</a>:</p>
<blockquote>
<p>Try <code>haveI</code>?</p>
</blockquote>
<p>Do you mean to simply type <code>haveI</code> to try to finish the goal?</p>



<a name="208547900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547900">(Aug 31 2020 at 12:05)</a>:</h4>
<p>I get an error:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&#39;«</span><span class="o">:=</span><span class="err">»&#39;</span> <span class="n">expected</span>
</code></pre></div>



<a name="208547919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547919">(Aug 31 2020 at 12:05)</a>:</h4>
<p>instead of <code>have</code>. But now I think you might need <code>letI</code></p>



<a name="208547985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208547985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208547985">(Aug 31 2020 at 12:06)</a>:</h4>
<p>(I suspect that you are underestimating my incompetence with Lean...  ahahaa)</p>
<p>I understand what you meant now!</p>



<a name="208548077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548077">(Aug 31 2020 at 12:07)</a>:</h4>
<p>actually no, it is a Prop so <code>haveI</code> should be fine, but the proof still won't work</p>



<a name="208548125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548125">(Aug 31 2020 at 12:08)</a>:</h4>
<p>I tried with <code>letI</code> after, as Reid Barton said, <code>haveI</code> did not work.  It still does not find a solution with library_search, but now the output makes me suspect that Lean knows what generator I am talking about</p>



<a name="208548215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548215">(Aug 31 2020 at 12:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/principal.20submodules/near/208546301">said</a>:</p>
<blockquote>
<p>More specifically, I suspect that the issue is that Lean does not recognize the element that I use to define the ideal to be the <code>generator</code> guaranteed by the <code>is_principal</code> property. </p>
</blockquote>
<p>Yes, <code>generator</code> is just some arbitrary choice of generator and you can't force it to be your <code>g</code>, so the lemma doesn't apply.</p>



<a name="208548252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548252">(Aug 31 2020 at 12:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/principal.20submodules/near/208548215">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/principal.20submodules/near/208546301">said</a>:</p>
<blockquote>
<p>More specifically, I suspect that the issue is that Lean does not recognize the element that I use to define the ideal to be the <code>generator</code> guaranteed by the <code>is_principal</code> property. </p>
</blockquote>
<p>Yes, <code>generator</code> is just some arbitrary choice of generator and you can't force it to be your <code>g</code>, so the lemma doesn't apply.</p>
</blockquote>
<p>Ok, this sucks, though...</p>



<a name="208548356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548356">(Aug 31 2020 at 12:10)</a>:</h4>
<p>it's not a problem, just use a different lemma</p>



<a name="208548373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548373">(Aug 31 2020 at 12:11)</a>:</h4>
<p>for example <code>mem_span_singleton</code> which appears in its proof looks relevant</p>



<a name="208548395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548395">(Aug 31 2020 at 12:11)</a>:</h4>
<p>I will keep trying, but I have failed with many lemmas...</p>



<a name="208548437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548437">(Aug 31 2020 at 12:11)</a>:</h4>
<p>in particular, the <code>mwe</code> produced above might work with <code>mem_span_singleton</code>, but I am not sure that the actual instance that I have will</p>



<a name="208548440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548440">(Aug 31 2020 at 12:12)</a>:</h4>
<p>I need to see</p>



<a name="208548506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548506">(Aug 31 2020 at 12:12)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Want to share your screen and prove this together?</p>



<a name="208548531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548531">(Aug 31 2020 at 12:13)</a>:</h4>
<p>sure, but I will not be able to talk while sharing the screen, since my computer does not have a mic</p>



<a name="208548552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548552">(Aug 31 2020 at 12:13)</a>:</h4>
<p>(also, where do you want to share my screen?)</p>



<a name="208548561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548561">(Aug 31 2020 at 12:13)</a>:</h4>
<p>Aha... let's see how it goes... you could write a chat in the comment blocks</p>



<a name="208548613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208548613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208548613">(Aug 31 2020 at 12:14)</a>:</h4>
<p>(I should say: I am able to talk, just you will not be able to listen to me...)</p>



<a name="208550696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/principal%20submodules/near/208550696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/principal.20submodules.html#208550696">(Aug 31 2020 at 12:36)</a>:</h4>
<p>for the record: the <code>mwe</code> could be solved as follows</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">myprinc</span> <span class="o">{</span><span class="n">x</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="n">submodule</span><span class="bp">.</span><span class="n">span</span> <span class="n">R</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">))</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">r</span> <span class="err">•</span> <span class="n">x</span> <span class="o">:=</span>
<span class="c1">-- x ∣ s :=</span>
<span class="k">begin</span>
<span class="n">rw</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">mem_span_singleton</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">eq_comm</span><span class="o">],</span>
<span class="n">exact</span> <span class="n">id</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>thanks to all who pointed me towards the right lemma!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>