---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Understanding.20assume.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html">Understanding assume</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="186014967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186014967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186014967">(Jan 18 2020 at 22:47)</a>:</h4>
<p>New to functional languages. Want to understand how <code>assume</code> works in Lean. Why is it OK to have <code>theorem ex1 : ¬(p ∧ ¬q) → (p → q) := begin assume h : ¬(p ∧ ¬q), assume hp : p</code> but not for example <code>theorem ex2 : (p → r ∨ s) → ((p → r) ∨ (p → s)) := begin assume rs : r ∨ s</code>?</p>



<a name="186015136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moses Schönfinkel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015136">(Jan 18 2020 at 22:52)</a>:</h4>
<p>Because -&gt; is right associative. The first argument of <code>theorem ex2</code> is a function from <code>p</code> to <code>r or s</code>.</p>



<a name="186015147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moses Schönfinkel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015147">(Jan 18 2020 at 22:53)</a>:</h4>
<p>Also note that in <code>theorem ex1</code>, your <code>h</code> is of type <code>(p and not q) -&gt; false</code>, that is, a function type. You're then left with <code>p -&gt; s</code>, where associativity plays no part. You can therefore further assume <code>p</code>. Note that the parentheses around <code>(p -&gt; q)</code> are redundant.</p>



<a name="186015496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015496">(Jan 18 2020 at 23:03)</a>:</h4>
<p>Surely the analogue of what works in ex1 is <code>assume prs : (p → r ∨ s)</code>? That's the left hand side of the implication. Both goals are of the form <code>P -&gt; Q</code> and you want to start with <code>assume hP : P</code>.</p>



<a name="186015568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015568">(Jan 18 2020 at 23:04)</a>:</h4>
<p>So is there any assumption that can be made to help in <code>theorem ex2</code>? I wanted to get started like <code>assume hp : p</code>, like @Kevin Buzzard suggests, but it just doesn't work. I get an error message.</p>



<a name="186015706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015706">(Jan 18 2020 at 23:08)</a>:</h4>
<p>You can't prove that theorem in constructive logic, meaning that the straightforward "follow your nose" approach doesn't work</p>



<a name="186015716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015716">(Jan 18 2020 at 23:08)</a>:</h4>
<p>You can prove it by cases on whether <code>p</code> is true or false</p>



<a name="186015737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015737">(Jan 18 2020 at 23:09)</a>:</h4>
<p>How to get started in that case?</p>



<a name="186015741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015741">(Jan 18 2020 at 23:09)</a>:</h4>
<p><code>begin by_cases p,</code></p>



<a name="186015794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015794">(Jan 18 2020 at 23:10)</a>:</h4>
<p>if it complains about decidable something then write this at the top of your file:</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
</pre></div>



<a name="186015816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015816">(Jan 18 2020 at 23:11)</a>:</h4>
<p>Right, it does say <code>by_cases tactic failed, type of given expression is not decidable</code>.</p>



<a name="186015925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015925">(Jan 18 2020 at 23:15)</a>:</h4>
<p>I said <code>P</code> not <code>p</code>. You have some super-complex goals with lots and lots of p's and q's and and's and r's, but ultimately it is of the form P -&gt; Q with P and Q slightly less complicated expressions. Your job is to figure out what P and Q are, and then assume hP of type P.</p>



<a name="186015988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015988">(Jan 18 2020 at 23:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Sorry, I noticed that too late. That is actually something I can already get from <code>intro</code>, right?</p>



<a name="186015990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186015990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186015990">(Jan 18 2020 at 23:17)</a>:</h4>
<p>oh sure</p>



<a name="186016225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016225">(Jan 18 2020 at 23:25)</a>:</h4>
<blockquote>
<p>if it complains about decidable something then write this at the top of your file:</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
</pre></div>


</blockquote>
<p>Isn't something like</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">10</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
</pre></div>


<p>better? But isn't <code>open_locale classical</code> even better?</p>



<a name="186016375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016375">(Jan 18 2020 at 23:30)</a>:</h4>
<p>Yes, but I don't know if daniel is using mathlib</p>



<a name="186016690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016690">(Jan 18 2020 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110027">@Moses Schönfinkel</span> Your response is too high-level for a newbie like me. Is there any way to elaborate a bit? For another example, I can do <code>theorem T3L : ¬p ∧ ¬q → ¬(p ∨ q) := assume right: p ∨ q</code> but can't do <code>assume right : ((p → r) ∨ (p → s)) </code> in that <code>ex2</code>.</p>



<a name="186016739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016739">(Jan 18 2020 at 23:42)</a>:</h4>
<p>Are you really sure you can do <code>assume right: p ∨ q</code>?</p>



<a name="186016750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016750">(Jan 18 2020 at 23:43)</a>:</h4>
<p><code>¬p ∧ ¬q → ¬(p ∨ q)</code> is of the form <code>X -&gt; Y</code> with <code>X=¬p ∧ ¬q</code> and <code>Y=¬(p ∨ q)</code>. Do you understand that?</p>



<a name="186016753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016753">(Jan 18 2020 at 23:43)</a>:</h4>
<p>So the only possible thing you can assume is a proof of <code>X</code></p>



<a name="186016801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016801">(Jan 18 2020 at 23:44)</a>:</h4>
<p>ex2 is also of the form X -&gt; Y and you have to figure out what X and Y are, and then assume you have a proof of X, and your goal will be to prove Y. But first you need to figure out what X and Y are.</p>



<a name="186016815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186016815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186016815">(Jan 18 2020 at 23:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I sure can. I have that working. </p>
<div class="codehilite"><pre><span></span>theorem T3L : ¬p ∧ ¬q → ¬(p ∨ q) :=
begin
    intros notP_and_notQ,
    assume rhs : p ∨ q,
    { cases rhs with hp hq,
            { exact notP_and_notQ.left hp },
            { exact notP_and_notQ.right hq } }
end
#check T3L p q
</pre></div>



<a name="186017170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017170">(Jan 18 2020 at 23:55)</a>:</h4>
<p>sure it works after the intros!</p>



<a name="186017213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017213">(Jan 18 2020 at 23:56)</a>:</h4>
<p>After the intros, the goal is <code>(p ∨ q) -&gt; false</code></p>



<a name="186017215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017215">(Jan 18 2020 at 23:56)</a>:</h4>
<p>so you can assume a proof of <code>(p ∨ q)</code></p>



<a name="186017276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017276">(Jan 18 2020 at 23:58)</a>:</h4>
<p>If your goal is X -&gt; Y then you can assume a proof of X. That's the rule.</p>



<a name="186017285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017285">(Jan 18 2020 at 23:59)</a>:</h4>
<p><span class="user-mention" data-user-id="259186">@Daniel Keys</span> <br>
You want to prove <code>((p → r) ∨ (p → s))</code> in <code>ex2</code>, so it just doesn't make any sense to assume it. Else there would be nothing left to prove.</p>



<a name="186017289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017289">(Jan 18 2020 at 23:59)</a>:</h4>
<p>I'm not sure why you find this confusing...</p>



<a name="186017939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017939">(Jan 19 2020 at 00:20)</a>:</h4>
<p><span class="user-mention" data-user-id="127148">@Joe</span> You're right, that part is not confusing. What I struggle with is something around these lines: to prove a statement, sometimes you need to go several routes. For example, you can have cases that split in "if p is true, this follows" and "if p is not true, this follows". So in my mind it seems like I should be able to "assume p" and reach a conclusion, then "assume not p" and reach the other. That is kind of where I struggle now.</p>



<a name="186017994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186017994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186017994">(Jan 19 2020 at 00:22)</a>:</h4>
<p>Yes you can do that</p>



<a name="186018042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018042">(Jan 19 2020 at 00:24)</a>:</h4>
<p>Do you have mathlib installed? What happens if you type <code>import tactic.linarith</code> at the beginning of your file?</p>



<a name="186018097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018097">(Jan 19 2020 at 00:26)</a>:</h4>
<p>What does that do? Why install mathlib?</p>



<a name="186018352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cerek Hillen (he) (W2'20) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018352">(Jan 19 2020 at 00:36)</a>:</h4>
<p>fellow newbie so take this with a grain of salt: mathlib is the accompanying library that defines a bunch of common mathematical concepts for use in other proofs</p>



<a name="186018362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cerek Hillen (he) (W2'20) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018362">(Jan 19 2020 at 00:37)</a>:</h4>
<p>e.g. i'm using it for <code>data.set.basic</code> which just defines sets and their properties</p>



<a name="186018564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018564">(Jan 19 2020 at 00:44)</a>:</h4>
<p>Mathlib offers more tactic tools for you to be able to argue like a mathematician would, for example here's a proof of Q given that <code>P -&gt; Q</code> and <code>¬ P → Q</code>, but using a tactic from mathlib:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">hP</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hnP</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="n">Q</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">P</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hP</span><span class="o">,</span>
    <span class="n">assumption</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hnP</span><span class="o">,</span>
    <span class="n">assumption</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>Without mathlib you have to write some more intimidating stuff like Mario's <code>local attribute [instance] classical.prop_decidable</code> above.</p>



<a name="186018623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018623">(Jan 19 2020 at 00:46)</a>:</h4>
<p>Your underlying problem with <code>assume</code> is that you're assuming it means a vague all-purpose "assume" which we use in normal English. In Lean <code>assume</code> has one, extremely precise, meaning -- it can only be used on goals of the form <code>X -&gt; Y</code> and it can only be used to assume that <code>X</code> is true.</p>



<a name="186018672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018672">(Jan 19 2020 at 00:48)</a>:</h4>
<p>I proved <code>Q</code> above by saying "Assume <code>P</code> is true -- then use <code>hP</code>; now assume it's false and use <code>hnP</code> instead". But the Lean translation of <em>that</em> kind of "assume" is <code>by_cases</code>, at least if you have mathlib. If you only have core Lean then it will look uglier.</p>



<a name="186018686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018686">(Jan 19 2020 at 00:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">hP</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hnP</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">P</span> <span class="bp">→</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="n">Q</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">P</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">em</span> <span class="n">P</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">H</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hP</span><span class="o">,</span>
    <span class="n">assumption</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hnP</span><span class="o">,</span>
    <span class="n">assumption</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p><code>classical.em</code> is the classical law of the excluded middle.</p>



<a name="186018995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186018995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186018995">(Jan 19 2020 at 00:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> OK then, so the way to introduce other assumptions (is it goals?) is by <code>have</code>? But what was confusing was that I could still use <code>assume hp:p</code> in the very first example I posted. It seems like an extra.</p>



<a name="186019050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019050">(Jan 19 2020 at 01:01)</a>:</h4>
<p>I can only repeat what I've said before about exactly what assume does</p>



<a name="186019060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019060">(Jan 19 2020 at 01:01)</a>:</h4>
<p>That's fine, thank you! I need more homework.</p>



<a name="186019064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019064">(Jan 19 2020 at 01:01)</a>:</h4>
<p>Try the exercises in Theorem Proving In Lean</p>



<a name="186019104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019104">(Jan 19 2020 at 01:02)</a>:</h4>
<p>Or the natural number game</p>



<a name="186019108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019108">(Jan 19 2020 at 01:02)</a>:</h4>
<p>Well, I did all of those in chapter 3 except for the classical stuff (7 problems) where I got totally stuck.</p>



<a name="186019117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019117">(Jan 19 2020 at 01:03)</a>:</h4>
<p>Well maybe you could ask some very precise questions about things you were stuck on</p>



<a name="186019159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019159">(Jan 19 2020 at 01:04)</a>:</h4>
<p>A precise question in the form of some working lean code which people can just cut and paste without having to figure out variables or whatever is usually what goes down best here</p>



<a name="186019161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186019161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186019161">(Jan 19 2020 at 01:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  I can. Here is this, I need help! <code>theorem T1 : (p → r ∨ s) → ((p → r) ∨ (p → s)) := sorry</code>. The first one in the classical problems in ch.3</p>



<a name="186022501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186022501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186022501">(Jan 19 2020 at 03:03)</a>:</h4>
<p><span class="user-mention" data-user-id="259186">@Daniel Keys</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">T1</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">∨</span> <span class="n">s</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">s</span><span class="o">))</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">by_cases</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">hp</span> <span class="o">:</span> <span class="n">p</span><span class="o">,</span> <span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">h</span> <span class="n">hp</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hr</span><span class="o">,</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">hp</span><span class="o">,</span> <span class="n">hr</span><span class="o">)</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">hs</span><span class="o">,</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">hp</span><span class="o">,</span> <span class="n">hs</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">hp</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">p</span><span class="o">,</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">hp&#39;</span><span class="o">,</span> <span class="n">absurd</span> <span class="n">hp&#39;</span> <span class="n">hp</span><span class="o">)</span>
</pre></div>



<a name="186031050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031050">(Jan 19 2020 at 08:11)</a>:</h4>
<p><span class="user-mention" data-user-id="127148">@Joe</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  So that brings me exactly to what I fail to understand in these proofs. All of a sudden you have <code>hr</code> and <code>hs</code>, or the even more cryptic <code>$ λ hp'</code> coming up in your <code>lambda</code> terms. How can you produce these and work with them if the only hypothesis is <code>(p → r ∨ s)</code>? Where from does LEAN know what <code>hp'</code> is? Maybe it is my unwillingness to work with <code>lambda</code>. While I'll be looking into it, can one get what you wrote in a framework like this:</p>
<div class="codehilite"><pre><span></span>theorem T1 : (p → r ∨ s) → ((p → r) ∨ (p → s)) :=
begin
    intros prs,
    cases (em p) with hp hnp,
    { ... },
    { ... }
end
</pre></div>


<p>which is easier to read, to help my understanding?</p>



<a name="186031409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031409">(Jan 19 2020 at 08:24)</a>:</h4>
<p>lambda is a binder, meaning that it introduces a new name. So when you see <code>λ hp'</code>, you should expect that the name <code>hp'</code> has not been previously used</p>



<a name="186031411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031411">(Jan 19 2020 at 08:24)</a>:</h4>
<p>The tactic version of lambda is <code>intros</code></p>



<a name="186031418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031418">(Jan 19 2020 at 08:25)</a>:</h4>
<p>The dollar sign is just a trick for reducing parentheses. <code>f $ g x y</code> is the same as <code>f (g x y)</code></p>



<a name="186031472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031472">(Jan 19 2020 at 08:27)</a>:</h4>
<p>So how do you write it with <code>begin...end</code>? I probably just need to see that once.</p>



<a name="186031505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031505">(Jan 19 2020 at 08:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="kn">open</span> <span class="n">classical</span>
<span class="kn">theorem</span> <span class="n">T1</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">∨</span> <span class="n">s</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">s</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">prs</span><span class="o">,</span>
  <span class="n">cases</span> <span class="o">(</span><span class="n">em</span> <span class="n">p</span><span class="o">)</span> <span class="k">with</span> <span class="n">hp</span> <span class="n">hnp</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">prs</span> <span class="n">hp</span> <span class="k">with</span> <span class="n">hr</span> <span class="n">hs</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">intro</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hr</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">intro</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hs</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">intro</span><span class="o">,</span> <span class="n">contradiction</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="186031531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031531">(Jan 19 2020 at 08:28)</a>:</h4>
<p>Thanks a lot! This will get me going.</p>



<a name="186031534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031534">(Jan 19 2020 at 08:28)</a>:</h4>
<p>protip: use <code> ```lean ... ``` </code> to fence lean code</p>



<a name="186031922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031922">(Jan 19 2020 at 08:43)</a>:</h4>
<p>I can see what the <code>left</code> and <code>right</code> terms do in the above, but I don't remember having seen that in the manual. Is it there somewhere?</p>



<a name="186031983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186031983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186031983">(Jan 19 2020 at 08:44)</a>:</h4>
<p>They're explained in the <a href="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/" target="_blank" title="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/">natural number game</a></p>



<a name="186032452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186032452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186032452">(Jan 19 2020 at 09:01)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/tactics.html?highlight=left#more-tactics" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/tactics.html?highlight=left#more-tactics">https://leanprover.github.io/theorem_proving_in_lean/tactics.html?highlight=left#more-tactics</a></p>



<a name="186032495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Understanding%20assume/near/186032495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Keys <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Understanding.20assume.html#186032495">(Jan 19 2020 at 09:02)</a>:</h4>
<p>OK, I see. I only got to the end of chapter 3.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>