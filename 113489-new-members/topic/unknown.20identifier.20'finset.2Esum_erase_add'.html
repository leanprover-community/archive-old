---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html">unknown identifier 'finset.sum_erase_add'</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="264630138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630138">(Dec 12 2021 at 16:05)</a>:</h4>
<p>I have mathlib installed and can work with many of the definitions in there.<br>
However <code>finset.sum_erase_add</code> seems not to be available, even though it is documented in mathlib: <br>
<a href="https://leanprover-community.github.io/mathlib_docs/algebra/big_operators/basic.html#finset.sum_erase_add">https://leanprover-community.github.io/mathlib_docs/algebra/big_operators/basic.html#finset.sum_erase_add</a></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unknown</span> <span class="n">identifier</span> <span class="bp">'</span><span class="n">finset.sum_erase_add'</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">d</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span>
<span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">d</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">d</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">,</span>
<span class="n">f_sum</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">d</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">n</span>
<span class="bp">⊢</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">d</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.univ.erase</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">n</span>
</code></pre></div>
<p>I just upgraded mathlib with leanproject (both globally and locally) and restarted lean in VSCode. The issue persists.<br>
mathlib commit that leanproject used : d856bf9b7fd5c46c24e5b0159ffc8e9bbec20242</p>



<a name="264630203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630203">(Dec 12 2021 at 16:06)</a>:</h4>
<p>Can you post fully working code? aka "are you sure you imported the right file?"</p>



<a name="264630212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630212">(Dec 12 2021 at 16:07)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_erase_add">docs#finset.sum_erase_add</a></p>



<a name="264630243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630243">(Dec 12 2021 at 16:08)</a>:</h4>
<p><a href="/user_uploads/3121/KGOq15FIrI5kjSSapTRxN4em/sperner2.lean">sperner.lean</a></p>



<a name="264630270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630270">(Dec 12 2021 at 16:08)</a>:</h4>
<p>PS I'm not sure there's such a thing as a global mathlib, but this is another matter</p>



<a name="264630292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630292">(Dec 12 2021 at 16:09)</a>:</h4>
<p>Sorry, I'm on mobile. Is <code>algebra.big_operators.basic</code>  imported?</p>



<a name="264630304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630304">(Dec 12 2021 at 16:09)</a>:</h4>
<p>Yes (accidentally even twice)</p>



<a name="264630448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630448">(Dec 12 2021 at 16:12)</a>:</h4>
<p>(note that I just edited my post to add <code>.basic</code>, in case that makes a difference). I'm not at lean right now, sorry, and I can't see your file because the Android app doesn't let me download it (it wants to switch to another app to view it and the other app doesn't have access to the Zulip instance). Hopefully someone at a computer can help</p>



<a name="264630515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630515">(Dec 12 2021 at 16:14)</a>:</h4>
<p>Actually maybe I can do epsilon more debugging. I'm assuming you're working in a lean project. Is this project mathlib itself or a project with mathlib as a dependency?</p>



<a name="264630526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630526">(Dec 12 2021 at 16:15)</a>:</h4>
<p>Do other definitions in <code>algebra.big_operators.basic</code> work?</p>



<a name="264630626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630626">(Dec 12 2021 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'/near/264630515">said</a>:</p>
<blockquote>
<p>Actually maybe I can do epsilon more debugging. I'm assuming you're working in a lean project. Is this project mathlib itself or a project with mathlib as a dependency?</p>
</blockquote>
<p>Should be a project with mathlib as a dependency. It is just somewhere to play around with lean</p>



<a name="264630673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264630673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264630673">(Dec 12 2021 at 16:18)</a>:</h4>
<p>Yes, for example <code>finset.sum_singleton</code> works which is also in algebra.big_operators.basic. Other than this issue I seem to be able to use sums just fine.</p>



<a name="264631539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264631539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264631539">(Dec 12 2021 at 16:40)</a>:</h4>
<p>Btw we've an almost complete proof of Sperner's lemma at <a href="https://github.com/leanprover-community/mathlib/tree/sperner-again">branch#sperner-again</a></p>



<a name="264631579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264631579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264631579">(Dec 12 2021 at 16:41)</a>:</h4>
<p>So on the command line navigate to the root directory of the project that the file is in, then change directory to <code>_target/deps/mathlib</code> and run <code>git log</code>. Is the most recent commit from today?</p>



<a name="264631631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264631631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264631631">(Dec 12 2021 at 16:42)</a>:</h4>
<p>The reason I ask this is that you said something a bit weird about updating mathlib earlier</p>



<a name="264631739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264631739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264631739">(Dec 12 2021 at 16:45)</a>:</h4>
<p>The commit hash corresponds to the branch <code>origin/lean-3.35.1</code> which was last updated yesterday.</p>



<a name="264631785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264631785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264631785">(Dec 12 2021 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'/near/264630270">said</a>:</p>
<blockquote>
<p>PS I'm not sure there's such a thing as a global mathlib, but this is another matter</p>
</blockquote>
<p><a href="https://leanprover-community.github.io/leanproject.html#global-mathlib-install">https://leanprover-community.github.io/leanproject.html#global-mathlib-install</a><br>
I have since removed <code>~/.lean</code> but still the same issue</p>



<a name="264632253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632253">(Dec 12 2021 at 16:57)</a>:</h4>
<p>Your answers do not correspond to my question at all. Here is a conjecture: you have several mathlibs installed on your system and your file is looking at the wrong one. Can we start again? Are you working within a lean project? Have you opened the root directory of the project in VS Code?</p>



<a name="264632471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632471">(Dec 12 2021 at 17:00)</a>:</h4>
<p>Here's an easy thing you can do -- write <code>#check finset.&lt;name of a lemma in algebra.big_operators.basic which is working for you&gt;</code> and then right click on the name of the lemma and jump to definition. Now you'll be in the version of mathlib which lean is using in your file. Can you see the declaration <code>sum_erase_add</code> there? My guess is no</p>



<a name="264632502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632502">(Dec 12 2021 at 17:01)</a>:</h4>
<p>Re global install--note the "this is generally discouraged" line and right now you're seeing why.</p>



<a name="264632597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jelmer Firet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632597">(Dec 12 2021 at 17:03)</a>:</h4>
<p>The project opened in VSCode was different than the one the file was in. Opened the right folder in VSCode and now it works</p>



<a name="264632605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632605">(Dec 12 2021 at 17:03)</a>:</h4>
<p>Nice!</p>



<a name="264632666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632666">(Dec 12 2021 at 17:04)</a>:</h4>
<p>Yeah you need to open the relevant root project directory if you're working on a file in a project. The entire system is a little brittle.</p>



<a name="264632676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/unknown%20identifier%20%27finset.sum_erase_add%27/near/264632676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/unknown.20identifier.20'finset.2Esum_erase_add'.html#264632676">(Dec 12 2021 at 17:04)</a>:</h4>
<p>This is a common gotcha</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>