---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html">Order reversing bijection on fin n</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259933360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259933360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259933360">(Nov 01 2021 at 23:11)</a>:</h4>
<p>This may be a stupid question, but I was wondering what was the simplest way to denote the element <code>n-1-i</code> given <code>i : fin n</code>. If I just write it as such Lean complains because <code>n</code> is of type <code>nat</code> so it doesn't know how to subtract something from it.<br>
I noticed that Lean accepts <code>⟨n-1-i, _⟩</code>, but adds <code>n-1-i&lt;n</code> as a new goal. That seems to work but feels too convoluted but something that should be simple.<br>
Is the order-reversing bijection <code>i ↦ n-1-i</code> on <code>fin n</code> already defined somewhere, and if not what is the best way to work with it?</p>



<a name="259933455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259933455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259933455">(Nov 01 2021 at 23:13)</a>:</h4>
<p><code>fin.last n - i</code></p>



<a name="259933959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259933959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259933959">(Nov 01 2021 at 23:20)</a>:</h4>
<p>Thanks!</p>



<a name="259934087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259934087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259934087">(Nov 01 2021 at 23:22)</a>:</h4>
<p>Or I think <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.sub_left">docs#equiv.sub_left</a> (fin.last n) if you want the bijection</p>



<a name="259936583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259936583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259936583">(Nov 01 2021 at 23:43)</a>:</h4>
<p><code>equiv.sub_left</code> is protected, can I still use it? Lean gives me an "unknown identifier" message even if I import <code>data.equiv.mul_add</code>.</p>



<a name="259936855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259936855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259936855">(Nov 01 2021 at 23:47)</a>:</h4>
<p>Yes, check out <a href="https://leanprover-community.github.io/mathlib_docs/attributes.html#protected">attr#protected</a>, it should still be usable, just you always need to use its full name. If you post a full example we can try and see what's wrong.</p>



<a name="259937556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259937556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259937556">(Nov 01 2021 at 23:57)</a>:</h4>
<p>Here is my code</p>
<div class="codehilite" data-code-language="import"><pre><span></span><code>import data.finset.sort
import data.equiv.mul_add

open_locale big_operators

theorem imo1994 (n : ℕ) (m : ℕ) (A : finset ℕ) (hm : A.card = m + 1)
  (hrange : ∀ a ∈ A, a ≥ 1 ∧ a ≤ n) (hadd : ∀ a b ∈ A, a + b ≤ n → a + b ∈ A) :
  (n+1)/2 ≤ (∑ x in A, x)/(m+1) :=
begin
  have a := finset.order_emb_of_fin A hm,
  set flip := equiv.sub_left (fin.last m),
end
</code></pre></div>



<a name="259938113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259938113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259938113">(Nov 02 2021 at 00:02)</a>:</h4>
<p>I don't see any errors with this in the web editor (<a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20data.equiv.mul_add%0Aimport%20algebra.big_operators%0Aimport%20data.finset.sort%0A%0Aopen_locale%20big_operators%0A%0Atheorem%20imo1994%20%28n%20%3A%20%E2%84%95%29%20%28m%20%3A%20%E2%84%95%29%20%28A%20%3A%20finset%20%E2%84%95%29%20%28hm%20%3A%20A.card%20%3D%20m%20%2B%201%29%0A%20%20%28hrange%20%3A%20%E2%88%80%20a%20%E2%88%88%20A%2C%20a%20%E2%89%A5%201%20%E2%88%A7%20a%20%E2%89%A4%20n%29%20%28hadd%20%3A%20%E2%88%80%20a%20b%20%E2%88%88%20A%2C%20a%20%2B%20b%20%E2%89%A4%20n%20%E2%86%92%20a%20%2B%20b%20%E2%88%88%20A%29%20%3A%0A%20%20%28n%2B1%29%2F2%20%E2%89%A4%20%28%E2%88%91%20x%20in%20A%2C%20x%29%2F%28m%2B1%29%20%3A%3D%0Abegin%0A%20%20have%20a%20%3A%3D%20finset.order_emb_of_fin%20A%20hm%2C%0A%20%20set%20flip%20%3A%3D%20equiv.sub_left%20%28fin.last%20m%29%2C%0A%20%20%0Aend">https://leanprover-community.github.io/lean-web-editor/#code=import%20data.equiv.mul_add%0Aimport%20algebra.big_operators%0Aimport%20data.finset.sort%0A%0Aopen_locale%20big_operators%0A%0Atheorem%20imo1994%20%28n%20%3A%20%E2%84%95%29%20%28m%20%3A%20%E2%84%95%29%20%28A%20%3A%20finset%20%E2%84%95%29%20%28hm%20%3A%20A.card%20%3D%20m%20%2B%201%29%0A%20%20%28hrange%20%3A%20%E2%88%80%20a%20%E2%88%88%20A%2C%20a%20%E2%89%A5%201%20%E2%88%A7%20a%20%E2%89%A4%20n%29%20%28hadd%20%3A%20%E2%88%80%20a%20b%20%E2%88%88%20A%2C%20a%20%2B%20b%20%E2%89%A4%20n%20%E2%86%92%20a%20%2B%20b%20%E2%88%88%20A%29%20%3A%0A%20%20%28n%2B1%29%2F2%20%E2%89%A4%20%28%E2%88%91%20x%20in%20A%2C%20x%29%2F%28m%2B1%29%20%3A%3D%0Abegin%0A%20%20have%20a%20%3A%3D%20finset.order_emb_of_fin%20A%20hm%2C%0A%20%20set%20flip%20%3A%3D%20equiv.sub_left%20%28fin.last%20m%29%2C%0A%20%20%0Aend</a>)</p>



<a name="259938196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259938196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259938196">(Nov 02 2021 at 00:03)</a>:</h4>
<p>You also need a newline after the first set of backticks, like so</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">```</span>
<span class="kn">import</span> <span class="n">blah</span>

<span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:=</span> <span class="n">trivial</span>
<span class="bp">```</span>
</code></pre></div>



<a name="259939185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259939185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259939185">(Nov 02 2021 at 00:17)</a>:</h4>
<p>Weird, do you have any idea why it wouldn't work for me in VScode? Could I have problems with my installation of mathlib?</p>



<a name="259939310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259939310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259939310">(Nov 02 2021 at 00:19)</a>:</h4>
<p>Yes, that could be the case, when did you install lean/mathlib? Maybe it just needs an update?</p>



<a name="259939942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Order%20reversing%20bijection%20on%20fin%20n/near/259939942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Labelle <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Order.20reversing.20bijection.20on.20fin.20n.html#259939942">(Nov 02 2021 at 00:28)</a>:</h4>
<p>Oh yeah, an upgrade worked <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> . Thanks for the help!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>