---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html">Square, curly and normal brackets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="180116607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180116607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180116607">(Nov 07 2019 at 09:51)</a>:</h4>
<p>Hey everybody,</p>
<p>I am still trying to do the lean exercises in section 2, i.e. defining vector addition, matrix addition and matrix  multiplication. And this is what I have so far:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>

<span class="n">def</span> <span class="n">vec_add</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">⟨</span> <span class="o">[],</span>    <span class="n">h</span> <span class="bp">⟩</span> <span class="bp">_</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="o">[],</span> <span class="n">h</span> <span class="bp">⟩</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">⟨</span> <span class="o">[],</span>    <span class="n">h</span> <span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="o">[],</span> <span class="n">h</span> <span class="bp">⟩</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span>
<span class="n">vector</span><span class="bp">.</span><span class="n">cons</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">v</span><span class="o">)</span><span class="bp">+</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">w</span><span class="o">))</span> <span class="o">(</span><span class="n">vec_add</span> <span class="n">n</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">v</span><span class="o">))</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">w</span><span class="o">)))</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">vec_add</span>

<span class="kn">instance</span> <span class="n">vec_has_add</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="o">)[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">](</span><span class="n">n</span><span class="o">:</span><span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_add</span> <span class="o">(</span><span class="n">vector</span> <span class="n">α</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">vec_add</span> <span class="n">α</span> <span class="n">n</span><span class="bp">⟩</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">vec_has_add</span>

<span class="n">def</span> <span class="n">scal_mul</span><span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="o">)[</span><span class="n">has_mul</span> <span class="n">α</span><span class="o">]:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">a</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">v</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="n">a</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">vector</span><span class="bp">.</span><span class="n">cons</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">v</span><span class="o">)</span><span class="bp">*</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">scal_mul</span> <span class="n">n</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">v</span><span class="o">)))</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">scal_mul</span>
</pre></div>


<p>This somehow works. But I what exactly is the difference between declaring a variable \alpha:Type in the beginning of a file and putting (\alpha:Type) in front of the colon of every declaration? What is the difference between normal brackets and curly braces?</p>
<p>E.g. in the definition of vec_add I had to make everything a a dependent type depending on n since otherwise the recursion wouldn't work out. Is it also possible to skip (\alpha:Type) in front of the colon and make everything a dependent type depending on \alpha?</p>
<p>It is hard to spell out but I have a bunch of problems which seem very similar to each other making me feel that I didn't get something conceptually.</p>



<a name="180117250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180117250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180117250">(Nov 07 2019 at 10:01)</a>:</h4>
<p>The difference is that <code>variable (α : Type)</code> saves you some typing.</p>



<a name="180117334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180117334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180117334">(Nov 07 2019 at 10:02)</a>:</h4>
<p>The difference between <code>()</code> and <code>{}</code> is in how you can call such declarations. If you use <code>def foo {α : Type}</code> then <code>α</code> is <em>implicit</em> which means that you don't pass that argument to <code>foo</code> when you call it.</p>



<a name="180117356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180117356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180117356">(Nov 07 2019 at 10:03)</a>:</h4>
<p>This is useful, if <code>α</code> can be figured out by looking at other arguments (for example <code>a : α</code> might be another argument to <code>foo</code>.</p>



<a name="180117428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180117428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180117428">(Nov 07 2019 at 10:04)</a>:</h4>
<p>If at some point you do want to tell Lean the argument <code>α</code>, you can write <code>@foo α</code>, and the <code>@</code> will make all arguments to <code>foo</code> explicit.</p>



<a name="180117964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180117964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180117964">(Nov 07 2019 at 10:13)</a>:</h4>
<p>Oh thanks for the quick answer. I see.</p>



<a name="180118063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118063">(Nov 07 2019 at 10:15)</a>:</h4>
<p>And writing variable \a:Type is somehow a "fixed constant" and every definition depending on it is fixed as well and cannot be instantiated with another type?</p>



<a name="180118151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118151">(Nov 07 2019 at 10:16)</a>:</h4>
<p>I mean variable \a:Type is not syntactic sugar for inserting (a:Type) in front of every definition nor {a:Type}. It is really something else.</p>



<a name="180118641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118641">(Nov 07 2019 at 10:24)</a>:</h4>
<p>No, it is such syntactic sugar</p>



<a name="180118658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118658">(Nov 07 2019 at 10:24)</a>:</h4>
<p>And it is a bit smart, because it only gets inserted when needed</p>



<a name="180118681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118681">(Nov 07 2019 at 10:25)</a>:</h4>
<p>So it is not a "fixed constant"</p>



<a name="180118865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180118865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180118865">(Nov 07 2019 at 10:28)</a>:</h4>
<p>And is it sugar for normal brackets or curly braces?</p>



<a name="180119008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119008">(Nov 07 2019 at 10:30)</a>:</h4>
<p>Depends on what you put after the <code>variables</code> keyword</p>



<a name="180119061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119061">(Nov 07 2019 at 10:30)</a>:</h4>
<p>You can write <code>variables {G : Type} [group G] (g : G)</code></p>



<a name="180119097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119097">(Nov 07 2019 at 10:31)</a>:</h4>
<p>And if halfway your file you need to switch, you can write <code>variables (G)</code> and from then on <code>G</code> will be explicit</p>



<a name="180119115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119115">(Nov 07 2019 at 10:31)</a>:</h4>
<p>Ahhh, I see!</p>



<a name="180119192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119192">(Nov 07 2019 at 10:32)</a>:</h4>
<p>Thanks. This clarified a lot.</p>



<a name="180119195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180119195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180119195">(Nov 07 2019 at 10:32)</a>:</h4>
<p>If you write <code>variable A : Type</code> with no parentheses it's explicit, the same as <code>(A : Type)</code>.</p>



<a name="180127040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180127040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180127040">(Nov 07 2019 at 12:30)</a>:</h4>
<blockquote>
<p>Thanks. This clarified a lot.</p>
</blockquote>
<p>It took me ages to learn this. It was only looking through the mathlib source code and noticing Johannes constantly writing <code>variable (X : Type)</code> when he'd already got a variable X and finally asking someone what was going on, that it all dawned on me. <span class="user-mention" data-user-id="246966">@yuppie</span> you should write up a brief <code>variables.md</code> file and PR it to the mathlib docs directory. Just a brief thing explaining the contents of this thread.</p>



<a name="180127675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180127675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180127675">(Nov 07 2019 at 12:40)</a>:</h4>
<p>Yeah I can do that although evidently I have no idea about it ;) Do you mean into the mathlib repo? Is that the right place for explanations of the lean core syntax?</p>



<a name="180128519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180128519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180128519">(Nov 07 2019 at 12:53)</a>:</h4>
<p>I think so, and I want to make that doc directory grow. I certainly wrote stuff in it which explained <code>simp</code> and I wrote it exactly when I was in the same situation as you -- I had figured out some stuff about <code>simp</code> about 30 minutes previously and I just thought "sod it, I don't want to have to figure all of this out again, let me write it down". I've spent my entire life figuring out stuff and then just writing it down. In maths I ended up with this page <a href="http://wwwf.imperial.ac.uk/~buzzard/maths/research/notes/index.html" target="_blank" title="http://wwwf.imperial.ac.uk/~buzzard/maths/research/notes/index.html">http://wwwf.imperial.ac.uk/~buzzard/maths/research/notes/index.html</a> and people love those notes, I get fan mail, google indexes them highly, it works great. Why not do the same with Lean? When people work stuff out, just write it down quick before you forget it all again.</p>



<a name="180131492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180131492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180131492">(Nov 07 2019 at 13:30)</a>:</h4>
<p>Ok I'll do it :)</p>



<a name="180131969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180131969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180131969">(Nov 07 2019 at 13:36)</a>:</h4>
<p>Maybe the relevant section(s) in TPiL could be improved as well, though I don't have any concrete suggestions. <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span></p>



<a name="180138678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180138678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180138678">(Nov 07 2019 at 14:47)</a>:</h4>
<p>We don't need to keep hassling Jeremy. These facts could easily be in there and I just missed them first time around. TPIL is a brilliant document, I learnt so much from it, the mathlib docs can just build around it. <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> 's comment from the other day about how hard it was to use a new (to him) part of the library made me start thinking about this. <span class="user-mention" data-user-id="132603">@Calle Sönne</span> was figuring out how to use equalisers in the category theory library at Xena last week and I was hugely encouraging him to just write something once he'd figured it out. It would be really nice to just get a bunch of users explaining stuff they understand as they understand it.</p>



<a name="180258668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180258668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180258668">(Nov 08 2019 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Don't worry about hassling me. I keep adding things to my list. I feel guilty that I am falling behind with corrections, but I am planning to catch up on Tuesday.</p>
<p>But I agree that it would be good to have more documentation for mathlib. The docs folder is great. But it is also not hard to set up a new Sphinx document with the same style as TPIL. I'll be happy to do that if there is community interest in putting together a nice mathlib reference.</p>



<a name="180420057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180420057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180420057">(Nov 11 2019 at 12:48)</a>:</h4>
<p>I have been experimenting with the different types of variable declarations. Here is a code snippet:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">vector</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="o">}</span>

<span class="n">def</span> <span class="n">vec_add</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">vector</span><span class="bp">.</span><span class="n">nil</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span>
<span class="n">vector</span><span class="bp">.</span><span class="n">cons</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">v</span><span class="o">)</span><span class="bp">+</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">w</span><span class="o">))</span> <span class="o">(</span><span class="n">vec_add</span> <span class="n">n</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">v</span><span class="o">))</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">w</span><span class="o">)))</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">vec_add</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">vec_add</span>

<span class="n">def</span> <span class="n">vec_add_2</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">](</span><span class="n">n</span><span class="o">:</span><span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">vector</span><span class="bp">.</span><span class="n">nil</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span>
<span class="n">vector</span><span class="bp">.</span><span class="n">cons</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">v</span><span class="o">)</span><span class="bp">+</span><span class="n">vector</span><span class="bp">.</span><span class="n">head</span><span class="o">(</span><span class="n">w</span><span class="o">))</span> <span class="o">(</span><span class="n">vec_add_2</span> <span class="n">n</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">v</span><span class="o">))</span> <span class="o">(</span><span class="n">vector</span><span class="bp">.</span><span class="n">tail</span><span class="o">(</span><span class="n">w</span><span class="o">)))</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">vec_add_2</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">vec_add_2</span>
</pre></div>


<p>The check commands indicate that both declarations are of the same type but the first implementation type checks and the second does not. Somehow it interprets the first (explicit) argument as a vector and not as a natural number which is necessary for the recursion.</p>
<p>My question: What is the difference between the two declarations (Pi after the colon vs. (n:nat) before the colon)? How do I make the implementation of vec_add_2 type check?</p>



<a name="180420207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180420207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180420207">(Nov 11 2019 at 12:50)</a>:</h4>
<p>You can only pattern match on things after the colon</p>



<a name="180420247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180420247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180420247">(Nov 11 2019 at 12:51)</a>:</h4>
<p>So you can use</p>
<div class="codehilite"><pre><span></span><span class="bp">|</span> <span class="mi">0</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">foo</span> <span class="n">bar</span>
</pre></div>


<p>in the second example. You only have two arguments to match on.</p>



<a name="180420274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180420274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180420274">(Nov 11 2019 at 12:51)</a>:</h4>
<p>To add: If you put arguments before the colon, they will be bound for the whole declaration. So within the definition of <code>vec_add_2</code>, the expression <code>vec_add_2</code> has type <code>vector α n → vector α n → vector α n</code></p>



<a name="180420364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/180420364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#180420364">(Nov 11 2019 at 12:52)</a>:</h4>
<p>Right... that's an important thing to know for recursive definitions. And it took me some time to understand this. (I admit, I should probably have read TPIL...)</p>



<a name="181725718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/181725718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#181725718">(Nov 23 2019 at 18:18)</a>:</h4>
<p>I tried to write this stuff up and opened a PR but I am not sure whether I could and should have assigned this to a specific reviewer. How do you handle things here?</p>



<a name="181725836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/181725836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#181725836">(Nov 23 2019 at 18:20)</a>:</h4>
<p>You don't need to assign it to anyone.</p>



<a name="181725962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/181725962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yuppie <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#181725962">(Nov 23 2019 at 18:24)</a>:</h4>
<p>Ok I hope this is kind of what you thought about.</p>



<a name="181798694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/181798694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#181798694">(Nov 25 2019 at 07:43)</a>:</h4>
<p><span class="user-mention" data-user-id="246966">@yuppie</span> Thanks for the PR</p>



<a name="185440454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Square%2C%20curly%20and%20normal%20brackets/near/185440454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Square.2C.20curly.20and.20normal.20brackets.html#185440454">(Jan 12 2020 at 16:32)</a>:</h4>
<p>Sorry, wrong thread.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>