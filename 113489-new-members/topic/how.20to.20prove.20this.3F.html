---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/how.20to.20prove.20this.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html">how to prove this?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="280767929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280767929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280767929">(May 01 2022 at 02:17)</a>:</h4>
<p>How can I prove this goal?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span>
<span class="n">f</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">B</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">range</span> <span class="n">f</span><span class="o">}</span>
<span class="n">h</span><span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span>
<span class="n">ξ</span><span class="o">:</span> <span class="n">α</span>
<span class="n">fx</span><span class="o">:</span> <span class="n">f</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">ξ</span>
<span class="bp">⊢</span> <span class="n">ξ</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">↔</span> <span class="n">f</span> <span class="n">B</span> <span class="bp">∉</span> <span class="n">B</span>
</code></pre></div>
<p>here is the proof so far:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">cantor_injective</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">¬</span><span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">range</span> <span class="n">f</span><span class="o">},</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ξ</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">ξ</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">exists_eq'</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">this</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">ξ</span><span class="o">,</span> <span class="n">fx</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">ξ</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">↔</span> <span class="n">f</span> <span class="n">B</span> <span class="bp">∉</span> <span class="n">B</span><span class="o">,</span>
    <span class="o">{</span> <span class="gr">sorry</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">fx</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">not_p_iff_not_p</span> <span class="n">_</span> <span class="n">this</span><span class="o">,</span> <span class="o">}}</span>
<span class="kd">end</span>
</code></pre></div>
<p>the proof of this goal should go in the <code>sorry</code><br>
thanks in advance</p>



<a name="280773089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280773089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280773089">(May 01 2022 at 04:17)</a>:</h4>
<p>It's a bit easier on us if you include imports in the code section to make it an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="280775035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280775035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280775035">(May 01 2022 at 05:09)</a>:</h4>
<p>It's not clear to me that there's a simple way of doing this from here. Presumably you want to use the injectivity in some way. So you need some statement of the form <code>f A = f B</code> for which <code>A</code> is not <code>B</code>. But <code>B</code> here won't necessarily work for that: You could imagine the function <code>f</code> on <code>set nat</code> that maps finite sets to their cardinality, and infinite sets to 17. In that case every nat is in the range, so <code>B</code> would be the empty set. But now you can't find a collision because <code>B</code> is the only thing that <code>f</code> maps to 0.</p>



<a name="280783013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280783013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280783013">(May 01 2022 at 08:53)</a>:</h4>
<p>Are you following a Maths proof that you already know here? It seems unlikely to me that the <code>have... exists_eq' ... cases this</code> is an accurate translation, as it's entirely vacuous mathematically</p>



<a name="280783082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280783082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280783082">(May 01 2022 at 08:55)</a>:</h4>
<p>You can replace those three lines with <code>set ξ := f B with hx</code></p>



<a name="280796004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796004">(May 01 2022 at 14:01)</a>:</h4>
<p>Can anyone tell me why this doesnt work?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">|</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">∉</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">⊆</span> <span class="n">α</span><span class="o">},</span>
</code></pre></div>



<a name="280796009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796009">(May 01 2022 at 14:01)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="sc">'{'</span> <span class="n">expression</span><span class="o">,</span> <span class="sc">','</span><span class="o">,</span> <span class="sc">'}'</span><span class="o">,</span> <span class="bp">'..'</span><span class="o">,</span> <span class="bp">`//`</span> <span class="n">or</span> <span class="bp">`|`</span> <span class="n">expected</span>
</code></pre></div>



<a name="280796085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796085">(May 01 2022 at 14:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> has marked this topic as unresolved.</p>



<a name="280796099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796099">(May 01 2022 at 14:03)</a>:</h4>
<p><code>(f : set α → α)</code></p>



<a name="280796616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796616">(May 01 2022 at 14:14)</a>:</h4>
<p>Even adding type signatures didnt help</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{(</span><span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="n">α</span><span class="bp">|</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∉</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">⊆</span> <span class="n">α</span><span class="o">},</span>
</code></pre></div>



<a name="280796815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796815">(May 01 2022 at 14:18)</a>:</h4>
<p>You're not allowed to put expressions to the left of <code>|</code> in a set literal</p>



<a name="280796817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796817">(May 01 2022 at 14:18)</a>:</h4>
<p>The thing to the left of <code>|</code> is a variable name</p>



<a name="280796841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796841">(May 01 2022 at 14:19)</a>:</h4>
<p>I'm not sure what the expression is supposed to mean, which makes it hard to figure out what to tell lean</p>



<a name="280796907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280796907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280796907">(May 01 2022 at 14:21)</a>:</h4>
<p>I would guess the intent is "the set of <code>y</code> such that there exists an <code>x</code> satisfying <code>f x = y</code> and (rest of the conditions)"</p>



<a name="280797427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797427">(May 01 2022 at 14:33)</a>:</h4>
<p>^ this</p>



<a name="280797484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797484">(May 01 2022 at 14:34)</a>:</h4>
<p>Well then you need to write it out like that, complete with spelling out the <code>exists</code></p>



<a name="280797516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797516">(May 01 2022 at 14:35)</a>:</h4>
<p>Why? This is what I want I think</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">},</span>
</code></pre></div>



<a name="280797587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797587">(May 01 2022 at 14:37)</a>:</h4>
<p>Well actually not really</p>



<a name="280797603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797603">(May 01 2022 at 14:37)</a>:</h4>
<p>Its of type <code>set (set a)</code>, but I want it to be of type <code>set a</code></p>



<a name="280797657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797657">(May 01 2022 at 14:38)</a>:</h4>
<p>seems like its counting <code>x : set α</code> as elements</p>



<a name="280797669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797669">(May 01 2022 at 14:38)</a>:</h4>
<p>Yes, because when you write <code>{x : A | p x}</code>, that means "I am giving you a set of <code>A</code>s"</p>



<a name="280797743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797743">(May 01 2022 at 14:40)</a>:</h4>
<p>I need <code>x</code> to be some <code>set a</code>, and <code>B</code> to be a set of <code>a</code>s where each element is not in <code>x</code></p>



<a name="280797888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797888">(May 01 2022 at 14:44)</a>:</h4>
<p>Idea on how to do this?</p>



<a name="280797938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280797938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280797938">(May 01 2022 at 14:45)</a>:</h4>
<p>Do you have an English proof you can paste?</p>



<a name="280798079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798079">(May 01 2022 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280797888">said</a>:</p>
<blockquote>
<p>Idea on how to do this?</p>
</blockquote>
<p>Yes, try translating this into lean, since you said it was what you meant</p>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280796907">said</a>:</p>
<blockquote>
<p>I would guess the intent is "the set of <code>y</code> such that there exists an <code>x</code> satisfying <code>f x = y</code> and (rest of the conditions)"</p>
</blockquote>



<a name="280798090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798090">(May 01 2022 at 14:48)</a>:</h4>
<p>Your translation should include an <code>exists</code> symbol</p>



<a name="280798184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798184">(May 01 2022 at 14:50)</a>:</h4>
<p>Like this? </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
</code></pre></div>



<a name="280798203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798203">(May 01 2022 at 14:51)</a>:</h4>
<p>You've not include the "set of" bit</p>



<a name="280798211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798211">(May 01 2022 at 14:51)</a>:</h4>
<p>"the set of <code>y: α</code> such that ..." is spelt <code>{y : α| ... }</code></p>



<a name="280798252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798252">(May 01 2022 at 14:52)</a>:</h4>
<p>You also should be writing <code>B :=</code> not <code>B :</code></p>



<a name="280798287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798287">(May 01 2022 at 14:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280798211">said</a>:</p>
<blockquote>
<p>"the set of <code>y: α</code> such that ..." is spelt <code>{y : α| ... }</code></p>
</blockquote>
<p>But then I can't do the <code>x : set a</code> part</p>



<a name="280798291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798291">(May 01 2022 at 14:53)</a>:</h4>
<p>Yes you can, put the <code>∃ x : set α</code> inside the <code>...</code></p>



<a name="280798334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798334">(May 01 2022 at 14:54)</a>:</h4>
<p>I see</p>



<a name="280798355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798355">(May 01 2022 at 14:55)</a>:</h4>
<p>So its this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">},</span>
</code></pre></div>



<a name="280798379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798379">(May 01 2022 at 14:55)</a>:</h4>
<p>You wanted to add <code>∧ (f x) ∉ x</code> too though, right?</p>



<a name="280798451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798451">(May 01 2022 at 14:57)</a>:</h4>
<p>So far, is the math here right?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">cantor_injective</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">¬</span><span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">},</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">ξ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">τ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">ξ</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">τ</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span><span class="o">,</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="280798522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798522">(May 01 2022 at 14:58)</a>:</h4>
<p>The <code>have</code> looks like nonsense, it's obviously true (pick <code>ξ  = τ = empty</code>) and isn't going to help with the rest of the proof</p>



<a name="280798535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798535">(May 01 2022 at 14:58)</a>:</h4>
<p>I was trying to follow the definition of injective functions</p>



<a name="280798550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798550">(May 01 2022 at 14:59)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/init/function.html#function.injective">doc#function.injective</a></p>



<a name="280798675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798675">(May 01 2022 at 15:00)</a>:</h4>
<p>You should go back to your pen and paper proof and check you've translated it accurately</p>



<a name="280798787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280798787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280798787">(May 01 2022 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="467926">@Joseph O</span> it is very <em>very</em> difficult to formalize some math if you haven't already understood it perfectly. Formalization, even if it is of course useful, tends to add problems rather than solving them. In particular you should first of all write a very detailed pen and paper proof.</p>



<a name="280800257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280800257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280800257">(May 01 2022 at 15:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280796815">said</a>:</p>
<blockquote>
<p>You're not allowed to put expressions to the left of <code>|</code> in a set literal</p>
</blockquote>
<p>Since <a href="https://github.com/leanprover-community/lean/pull/402">lean#402</a> there is a very important special case where this is allowed though. But I don't think this is completely general</p>



<a name="280800704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280800704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280800704">(May 01 2022 at 15:46)</a>:</h4>
<p>I remembered seeing that but had totally forgotten you needed the parens for it to work</p>



<a name="280802765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280802765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280802765">(May 01 2022 at 16:33)</a>:</h4>
<p>It's in the file of "all the things that start with <code>{</code>" <a href="https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/brackets.cpp">https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/brackets.cpp</a> (see <code>parse_set_replacement</code>)</p>



<a name="280803015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280803015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280803015">(May 01 2022 at 16:38)</a>:</h4>
<p>Here's a way to write Joseph's set from earlier: <code>{ (f x) | (x : set α) (h : f x ∉ x) }</code>. You can put any binders you want after the <code>|</code>.</p>



<a name="280803042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280803042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280803042">(May 01 2022 at 16:39)</a>:</h4>
<p>That gets interpreted as <code>{_x : α | ∃ (x : set α) (h : f x ∉ x), f x = _x}</code></p>



<a name="280803288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280803288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280803288">(May 01 2022 at 16:45)</a>:</h4>
<p>I guess you can also use union notation to build that kind of set. <code>⋃ (x : set α) (h : f x ∉ x), {f x}</code></p>



<a name="280818598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280818598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280818598">(May 01 2022 at 22:56)</a>:</h4>
<p>how would the mathematical proof for the <code>sorry</code> go?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">cantor_injective</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">¬</span><span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">},</span>
  <span class="n">set</span> <span class="n">B'</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">},</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ξ</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">B'</span> <span class="bp">=</span> <span class="n">ξ</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">exists_eq'</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">this</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">ξ</span><span class="o">,</span> <span class="n">fx</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">f</span><span class="o">(</span><span class="n">B'</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">B'</span> <span class="bp">↔</span> <span class="n">f</span><span class="o">(</span><span class="n">B'</span><span class="o">)</span> <span class="bp">∉</span> <span class="n">B'</span><span class="o">,</span>
    <span class="o">{</span> <span class="gr">sorry</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">fx</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">not_p_iff_not_p</span> <span class="n">_</span> <span class="n">this</span><span class="o">,</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>the goal is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span>
<span class="n">f</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">B</span><span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">}</span>
<span class="n">B'</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">}</span>
<span class="n">h</span><span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span>
<span class="n">ξ</span><span class="o">:</span> <span class="n">α</span>
<span class="n">fx</span><span class="o">:</span> <span class="n">f</span> <span class="n">B'</span> <span class="bp">=</span> <span class="n">ξ</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="n">B'</span> <span class="bp">∈</span> <span class="n">B'</span> <span class="bp">↔</span> <span class="n">f</span> <span class="n">B'</span> <span class="bp">∉</span> <span class="n">B'</span>
</code></pre></div>



<a name="280819337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280819337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280819337">(May 01 2022 at 23:14)</a>:</h4>
<p>Didn't you ask exactly that question at the top of the thread? I feel like we're going in circles a bit here...</p>



<a name="280820640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280820640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280820640">(May 01 2022 at 23:52)</a>:</h4>
<p>Hmm you are right, except my proof is now different. Let me go take a look again,</p>



<a name="280873365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280873365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280873365">(May 02 2022 at 13:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280783013">said</a>:</p>
<blockquote>
<p>Are you following a Maths proof that you already know here? It seems unlikely to me that the <code>have... exists_eq' ... cases this</code> is an accurate translation, as it's entirely vacuous mathematically</p>
</blockquote>
<p>Though that is how the proof went for surjective functions</p>



<a name="280873395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280873395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280873395">(May 02 2022 at 13:30)</a>:</h4>
<p>But I am going to try <code>set ξ := f B' with hx,</code></p>



<a name="280877256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280877256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280877256">(May 02 2022 at 14:01)</a>:</h4>
<p>What do you mean by "how the proof went"? Which proof? Your own proof, or one you're following?</p>



<a name="280877696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280877696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280877696">(May 02 2022 at 14:05)</a>:</h4>
<p>Oh sorry, so here was the proof for surjective functions</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">cantor_surjective</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">¬</span><span class="n">function.surjective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">f</span> <span class="n">x</span><span class="o">},</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ξ</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">ξ</span> <span class="bp">=</span> <span class="n">B</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">h</span> <span class="n">B</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">this</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">ξ</span><span class="o">,</span> <span class="n">fx</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">ξ</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">↔</span> <span class="n">ξ</span> <span class="bp">∉</span> <span class="n">f</span><span class="o">(</span><span class="n">ξ</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">mem_set_of</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">fx</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">not_p_iff_not_p</span> <span class="n">_</span> <span class="n">this</span><span class="o">,</span> <span class="o">}}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="280878785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280878785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280878785">(May 02 2022 at 14:15)</a>:</h4>
<p>Someone told me the proof for injective functions should be very similar</p>



<a name="280880016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280880016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280880016">(May 02 2022 at 14:25)</a>:</h4>
<p>Following <span class="user-mention" data-user-id="310045">@Eric Wieser</span> 's suggestion in the second reply,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">cantor_injective</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">¬</span><span class="n">function.injective</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">},</span>
  <span class="n">set</span> <span class="n">B'</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">},</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="n">set</span> <span class="n">ξ</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">B'</span> <span class="k">with</span> <span class="n">hx</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>and this gives a goal of </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span>
<span class="n">f</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">B</span><span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">}</span>
<span class="n">B'</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">}</span>
<span class="n">h</span><span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span>
<span class="n">ξ</span><span class="o">:</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">B'</span>
<span class="n">hx</span><span class="o">:</span> <span class="n">ξ</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">B'</span>
<span class="bp">⊢</span> <span class="n">false</span>
</code></pre></div>
<p>which I dont know if it makes things any better?</p>



<a name="280880266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280880266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280880266">(May 02 2022 at 14:27)</a>:</h4>
<p>The lean code is at least short. But it sounds like your problem is that you don't know the maths proof? To make any progress there, you need to come up with something (an equality of two <code>α </code> terms of the form <code>f _ = f _</code>) to apply <code>h</code> to.</p>



<a name="280900609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280900609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280900609">(May 02 2022 at 16:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/how.20to.20prove.20this.3F/near/280880266">said</a>:</p>
<blockquote>
<p>The lean code is at least short. But it sounds like your problem is that you don't know the maths proof? To make any progress there, you need to come up with something (an equality of two <code>α </code> terms of the form <code>f _ = f _</code>) to apply <code>h</code> to.</p>
</blockquote>
<p>Does this look fine?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">τ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">τ</span> <span class="bp">=</span> <span class="n">ξ</span><span class="o">,</span>
</code></pre></div>



<a name="280900634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280900634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280900634">(May 02 2022 at 16:52)</a>:</h4>
<p>But for some reason applying <code>h</code> doesnt really work</p>



<a name="280900697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280900697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280900697">(May 02 2022 at 16:53)</a>:</h4>
<p>I get two goals. The first one I was able to close off with <code>exact Exists.intro B' rfl,</code>,</p>



<a name="280900956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280900956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280900956">(May 02 2022 at 16:55)</a>:</h4>
<p>The reason applying <code>h</code> doesnt work is because the goal is to result in <code>false</code></p>



<a name="280901018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280901018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280901018">(May 02 2022 at 16:55)</a>:</h4>
<p>Maybe I shouldnt do a contradiction</p>



<a name="280901261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280901261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280901261">(May 02 2022 at 16:57)</a>:</h4>
<p>Here is the error and goal I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">apply</span> <span class="n">tactic</span><span class="o">,</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">unify</span>
  <span class="n">false</span>
<span class="k">with</span>
  <span class="bp">?</span><span class="n">m_1</span> <span class="bp">=</span> <span class="bp">?</span><span class="n">m_2</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">,</span>
<span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">x</span><span class="o">},</span>
<span class="n">B'</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">},</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">ξ</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">B'</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">ξ</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">B'</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">τ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">τ</span> <span class="bp">=</span> <span class="n">ξ</span>
<span class="bp">⊢</span> <span class="n">false</span>
</code></pre></div>



<a name="280902663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280902663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280902663">(May 02 2022 at 17:06)</a>:</h4>
<p>You did not make progress. You already knew that there was some <code>\tau</code> such that <code>f \tau = \xi</code>. Just take <code>B'</code>.</p>



<a name="280902801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280902801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280902801">(May 02 2022 at 17:07)</a>:</h4>
<p>What do you mean by "just take <code>B'</code>"?</p>



<a name="280902959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280902959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280902959">(May 02 2022 at 17:08)</a>:</h4>
<p>What is the next step of the proof in <strong>words</strong>?</p>



<a name="280903929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280903929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280903929">(May 02 2022 at 17:14)</a>:</h4>
<p>We have an equality of <code>f τ = f B'</code>, and since <code>h</code> says that <code>f</code> is injective, if we apply it, we get a proof that <code>τ = B'</code>.</p>



<a name="280905669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280905669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280905669">(May 02 2022 at 17:27)</a>:</h4>
<p>Great! But you <em>picked</em> <code>\tau = B'</code> in the first place, so you did not learn anything.</p>



<a name="280908097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280908097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280908097">(May 02 2022 at 17:45)</a>:</h4>
<p>By the way, while the proof of <code>cantor_surjective</code> in mathlib is the classic one, I had not seen the proof of <code>cantor_injective</code> before and it was based on a proof on nLab</p>



<a name="280908336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280908336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280908336">(May 02 2022 at 17:47)</a>:</h4>
<p>I don't think it is easy to come up with that proof on your own (the classic proof uses <code>inv_surj</code> and the axiom of choice and is probably easier to guess)</p>



<a name="280918538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280918538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280918538">(May 02 2022 at 19:05)</a>:</h4>
<p>Hmm... I personally tried them for fun a while back and figured that both proofs were pretty similar (I only knew the surjective one and came up with the injective version myself).</p>



<a name="280918822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/280918822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#280918822">(May 02 2022 at 19:06)</a>:</h4>
<p>Yeah they should be very similar</p>



<a name="305825164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305825164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Jam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305825164">(Oct 24 2022 at 13:56)</a>:</h4>
<p>I'm stuck trying to prove the following fact in lean 4:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Classical</span> <span class="k">in</span>
<span class="kd">example</span>
<span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Empty</span><span class="o">)</span>
<span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">()</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>What's a simple way to prove this? I tried using simp and cases everywhere, but it doesn't seem to help.<br>
Any suggestions are welcome.</p>



<a name="305829588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305829588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Jam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305829588">(Oct 24 2022 at 14:15)</a>:</h4>
<p><code>open Classical</code> is only there so that I don't need an extra Decidable assumption.<br>
This example came up while proving the basic laws of a discrete category.</p>



<a name="305892677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305892677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305892677">(Oct 24 2022 at 18:50)</a>:</h4>
<p>Why would you want to forcibly insert a noncomputable decidability instance into the theorem statement rather than letting typeclass inference find its own? In Lean 3 the rule of thumb is that if the <em>statement</em> doesn't compile without decidability assumptions, put them in the statement; if the <em>proof</em> needs them, use classical assumptions. This makes lemmas maximally applicable.</p>
<p>As for your question, I feel like it would be easier if we had more tactics, for example <code>convert</code> or <code>split_ifs</code>. But neither of these have been ported yet :-( Can I ask for more details about how you got into this mess?</p>



<a name="305893794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305893794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305893794">(Oct 24 2022 at 18:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Classical</span> <span class="k">in</span>
<span class="kd">example</span>
<span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Empty</span><span class="o">)</span>
<span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">()</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">Subsingleton</span> <span class="o">(</span><span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Empty</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">split</span> <span class="bp">&lt;;&gt;</span> <span class="n">infer_instance</span>
  <span class="n">Subsingleton.elim</span> <span class="n">_</span> <span class="n">_</span>
</code></pre></div>



<a name="305893965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305893965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305893965">(Oct 24 2022 at 18:58)</a>:</h4>
<p>Can you do it with <code>s/Empty/Nat</code>?</p>



<a name="305895084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305895084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305895084">(Oct 24 2022 at 19:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Classical</span> <span class="k">in</span>
<span class="kd">example</span>
<span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Nat</span><span class="o">)</span>
<span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">()</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">generalize</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h'</span><span class="bp">;</span> <span class="n">revert</span> <span class="n">e</span> <span class="n">h'</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">if_pos</span> <span class="n">h</span><span class="o">]</span><span class="bp">;</span> <span class="n">simp</span>
</code></pre></div>



<a name="305895254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305895254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305895254">(Oct 24 2022 at 19:05)</a>:</h4>
<p>Aah nice; this is somehow the "proper" proof.</p>



<a name="305896154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305896154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305896154">(Oct 24 2022 at 19:10)</a>:</h4>
<p>Probably you should not use <code>if c then Unit else Nat</code> in the first place, but rather whatever the Lean 4 spelling of <code>plift</code> is</p>



<a name="305896208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305896208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305896208">(Oct 24 2022 at 19:10)</a>:</h4>
<p>or a custom inductive family</p>



<a name="305897840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305897840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305897840">(Oct 24 2022 at 19:19)</a>:</h4>
<p>Oh, by a quirk it seems this works too:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Classical</span> <span class="k">in</span>
<span class="kd">theorem</span> <span class="n">T</span>
<span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Nat</span><span class="o">)</span>
<span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">()</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">Subsingleton</span> <span class="o">(</span><span class="k">if</span> <span class="n">c</span> <span class="k">then</span> <span class="n">Unit</span> <span class="k">else</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">split</span> <span class="bp">&lt;;&gt;</span> <span class="n">infer_instance</span>
  <span class="n">Subsingleton.elim</span> <span class="n">_</span> <span class="n">_</span>
</code></pre></div>



<a name="305897956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305897956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305897956">(Oct 24 2022 at 19:20)</a>:</h4>
<p>It looks like <code>split</code> got confused and applied <code>h</code> to simplify the if in both cases, so both calls to <code>infer_instance</code> are proving <code>Subsingleton Unit</code>!</p>



<a name="305926826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305926826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moahu Cheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305926826">(Oct 24 2022 at 22:54)</a>:</h4>
<p>Help please lean3 how to prove</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">notPiffnotP</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">P</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="305926910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305926910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305926910">(Oct 24 2022 at 22:55)</a>:</h4>
<p>Is this homework? It comes up a lot :-)</p>



<a name="305926961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305926961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305926961">(Oct 24 2022 at 22:56)</a>:</h4>
<p>Try the <code>hint</code> tactic; it might find other tactics which can solve it</p>



<a name="305927543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305927543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moahu Cheng <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305927543">(Oct 24 2022 at 23:00)</a>:</h4>
<p>hint does not work :-\<br>
it does not give me anything</p>



<a name="305929474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305929474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305929474">(Oct 24 2022 at 23:17)</a>:</h4>
<p>keep in mind that <code>¬X</code> in Lean means <code>X → false</code></p>



<a name="305930364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305930364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305930364">(Oct 24 2022 at 23:26)</a>:</h4>
<p>also you might need to <code>import tactic.hint</code> for <code>hint</code> to work</p>



<a name="305946610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305946610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305946610">(Oct 25 2022 at 02:40)</a>:</h4>
<p>two other hints:</p>
<ol>
<li><code>intro h</code> is always a good thing to try</li>
<li>understand what <code>classical.em</code> does</li>
</ol>



<a name="305947488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305947488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305947488">(Oct 25 2022 at 02:55)</a>:</h4>
<p>and <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#by_cases">tactic#by_cases</a>!</p>



<a name="305957054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305957054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305957054">(Oct 25 2022 at 05:25)</a>:</h4>
<p>The usual context for this question is that the student has been told to prove it constructively, which is tricky but possible. I was expecting <code>hint</code> to suggest <code>tauto!</code> which should nail it classically</p>



<a name="305995817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305995817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Jam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305995817">(Oct 25 2022 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> To give you some details, I was just making a small category library in my lean 4 playground. To make something into a diagram, I want to view a Type as a discrete category.<br>
So the code looks like this in isolation.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">Category</span>
<span class="kd">class</span> <span class="n">Hom.</span><span class="o">{</span><span class="n">u</span><span class="o">,</span><span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">hom</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">C</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span>
<span class="kn">export</span> <span class="n">Hom</span> <span class="o">(</span><span class="n">hom</span><span class="o">)</span>
<span class="n">scoped</span> <span class="kd">infix</span><span class="o">:</span><span class="mi">10</span> <span class="s2">" ⟶ "</span> <span class="bp">=&gt;</span> <span class="n">hom</span>

<span class="kd">class</span> <span class="n">Data</span> <span class="o">(</span><span class="n">C</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Hom</span> <span class="n">C</span> <span class="n">where</span>
  <span class="n">comp</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">⟶</span> <span class="n">Z</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⟶</span> <span class="n">Z</span><span class="o">)</span>
  <span class="n">id</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">X</span>
<span class="kn">export</span> <span class="n">Data</span> <span class="o">(</span><span class="n">comp</span> <span class="n">id</span><span class="o">)</span>
<span class="n">scoped</span> <span class="kd">infix</span><span class="o">:</span><span class="mi">80</span> <span class="s2">" ≫ "</span> <span class="bp">=&gt;</span> <span class="n">comp</span>
<span class="n">scoped</span> <span class="kd">notation</span> <span class="s2">"𝟙"</span> <span class="bp">=&gt;</span> <span class="n">id</span>
<span class="kd">end</span> <span class="n">Category</span>

<span class="kn">open</span> <span class="n">Category</span> <span class="k">in</span>
<span class="kd">class</span> <span class="n">Category</span> <span class="o">(</span><span class="n">C</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Data</span> <span class="n">C</span> <span class="n">where</span>
  <span class="n">id_comp</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">),</span> <span class="mi">𝟙</span> <span class="n">X</span> <span class="bp">≫</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">comp_id</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="bp">≫</span> <span class="mi">𝟙</span> <span class="n">Y</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">assoc</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">⟶</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⟶</span> <span class="n">W</span><span class="o">),</span>
    <span class="o">(</span><span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">g</span> <span class="bp">≫</span> <span class="n">h</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">Empty.elim</span> <span class="o">:</span> <span class="n">Empty</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">h</span> <span class="bp">=&gt;</span> <span class="n">nomatch</span> <span class="n">h</span>

<span class="kd">inductive</span> <span class="n">TUnit.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">where</span>
<span class="bp">|</span> <span class="n">unit</span> <span class="o">:</span> <span class="n">TUnit</span> <span class="n">a</span>

<span class="kd">def</span> <span class="n">Category.discreteCategoryOf</span> <span class="o">(</span><span class="n">I</span><span class="o">)</span> <span class="o">[</span><span class="n">DecidableEq</span> <span class="n">I</span><span class="o">]</span> <span class="o">:</span> <span class="n">Category</span> <span class="n">I</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">hom</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="bp">=&gt;</span> <span class="k">if</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span> <span class="k">then</span> <span class="n">TUnit</span> <span class="n">X</span> <span class="k">else</span> <span class="n">Empty</span>
  <span class="n">comp</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ite</span> <span class="bp">..</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">ite</span> <span class="bp">..</span><span class="o">)</span> <span class="bp">=&gt;</span>
    <span class="k">show</span> <span class="n">ite</span> <span class="bp">..</span> <span class="k">from</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span> <span class="k">then</span> <span class="n">h</span> <span class="k">else</span> <span class="o">(</span><span class="n">if_neg</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">=</span> <span class="n">Z</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">=</span> <span class="n">Z</span> <span class="k">then</span> <span class="n">h</span> <span class="k">else</span> <span class="o">(</span><span class="n">if_neg</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">g</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
    <span class="n">if_pos</span> <span class="o">(</span><span class="n">h1.trans</span> <span class="n">h2</span><span class="o">)</span> <span class="bp">▸</span> <span class="o">⟨⟩</span>
  <span class="n">id</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="bp">=&gt;</span> <span class="k">show</span> <span class="n">ite</span> <span class="bp">..</span> <span class="k">from</span> <span class="n">if_pos</span> <span class="n">rfl</span> <span class="bp">▸</span> <span class="o">⟨⟩</span>
  <span class="n">id_comp</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ite</span> <span class="bp">..</span><span class="o">)</span> <span class="bp">=&gt;</span>
    <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span> <span class="k">then</span> <span class="kd">by</span>
      <span class="k">show</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">⟨⟩</span> <span class="bp">=</span> <span class="n">f</span>
      <span class="n">generalize</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h'</span><span class="bp">;</span> <span class="n">revert</span> <span class="n">f</span> <span class="n">h'</span><span class="bp">;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">if_pos</span> <span class="n">h</span><span class="o">]</span>
      <span class="n">simp</span>
    <span class="k">else</span> <span class="o">(</span><span class="n">if_neg</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
  <span class="n">comp_id</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ite</span> <span class="bp">..</span><span class="o">)</span> <span class="bp">=&gt;</span>
    <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span> <span class="k">then</span> <span class="kd">by</span>
      <span class="k">show</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">▸</span> <span class="o">⟨⟩</span> <span class="bp">=</span> <span class="n">f</span>
      <span class="n">generalize</span> <span class="n">if_pos</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h'</span><span class="bp">;</span> <span class="n">revert</span> <span class="n">f</span> <span class="n">h'</span><span class="bp">;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">if_pos</span> <span class="n">h</span><span class="o">]</span>
      <span class="n">simp</span>
    <span class="k">else</span> <span class="o">(</span><span class="n">if_neg</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
  <span class="n">assoc</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span><span class="o">}</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="bp">=&gt;</span> <span class="n">rfl</span>
<span class="o">}</span>
</code></pre></div>
<p>Those proofs are probably dumb and automatable. <br>
Many thanks to <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  for your generalize,revert,rw trick. I often get stuck in those kind of situations.</p>



<a name="305998549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305998549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305998549">(Oct 25 2022 at 10:27)</a>:</h4>
<p><span class="user-mention" data-user-id="403214">@Michael Jam</span> Here's what Reid was alluding to by saying you shouldn't use <code>if c then Unit else Empty</code>: You can express that much more nicely by using <code>PLift c</code>, and since it's an inductive type everything is nice by pattern matching:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Category.discreteCategoryOf</span> <span class="o">(</span><span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="n">Category</span> <span class="n">I</span> <span class="n">where</span>
  <span class="n">hom</span> <span class="n">X</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">PLift</span> <span class="o">(</span><span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span><span class="o">)</span>
  <span class="n">comp</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">h2</span><span class="o">⟩</span> <span class="bp">=&gt;</span> <span class="o">⟨</span><span class="n">h1.trans</span> <span class="n">h2</span><span class="o">⟩</span>
  <span class="n">id</span> <span class="n">_</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">rfl</span><span class="o">⟩</span>
  <span class="n">id_comp</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">rfl</span>
  <span class="n">comp_id</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">rfl</span>
  <span class="n">assoc</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="305998673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305998673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305998673">(Oct 25 2022 at 10:28)</a>:</h4>
<p>and we can even drop the <code>DecidableEq I</code> assumption</p>



<a name="305998686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/305998686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#305998686">(Oct 25 2022 at 10:28)</a>:</h4>
<p>Your definition of the morphisms is going to be super-hard to work with (as you just saw). Use <code>plift (X = Y)</code> (or whatever the Lean 4 equivalent is). In Lean 3 it's </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Universe lifting operation from Sort to Type -/</span>
<span class="kd">structure</span> <span class="n">plift</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">up</span> <span class="o">::</span> <span class="o">(</span><span class="n">down</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</code></pre></div>
<p>(edit: Mario got there first!)</p>



<a name="306004632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/how%20to%20prove%20this%3F/near/306004632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Jam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/how.20to.20prove.20this.3F.html#306004632">(Oct 25 2022 at 11:13)</a>:</h4>
<p>Right thanks, this is much simpler. I could even get rid of PLift by allowing Sort valued arrows as in lean 3's category library</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>