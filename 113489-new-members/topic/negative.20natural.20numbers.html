---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/negative.20natural.20numbers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html">negative natural numbers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208789516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789516">(Sep 02 2020 at 07:42)</a>:</h4>
<p>Dear All,</p>
<p>every once in a while, I am confronted with Lean accepting and working with functions that I thought would not have to exist.  Here is a simple example</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">shift1</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="n">i</span><span class="bp">-</span><span class="mi">1</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">shift1</span> <span class="mi">0</span>  <span class="c1">--- 0</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">shift1</span> <span class="mi">1</span>  <span class="c1">--- 0</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">shift1</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">shift1</span> <span class="mi">1</span>  <span class="c1">--- 0</span>
</code></pre></div>


<p>I gather than Lean considers "negative natural numbers" as equal to <code>0</code>.  I always feel a little worried by this.</p>
<ol>
<li>Why does Lean not ask me to prove that the codomain of <code>shift1</code> is <code>ℕ</code>?</li>
<li>Assuming that Lean is being lazy about it, why does Lean not complain when I apply <code>shift1</code> at <code>0</code>?</li>
<li>Does this not cause consistency issues with proof checking?</li>
</ol>



<a name="208789737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789737">(Sep 02 2020 at 07:45)</a>:</h4>
<p>When you use <code>-</code> and the domain is natural numbers, you get the function <code>nat.sub : nat -&gt; nat -&gt; nat</code>, which is truncated subtraction</p>



<a name="208789778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789778">(Sep 02 2020 at 07:45)</a>:</h4>
<p>there is no inference of alternatives, and this can sometimes cause surprises, but there is no consistency concern, it's just a weird function</p>



<a name="208789808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789808">(Sep 02 2020 at 07:45)</a>:</h4>
<p>As Mario says, 1+2 might be cleared up if you inspect the definition of natural number subtraction in Lean. <a href="https://xenaproject.wordpress.com/2020/07/05/division-by-zero-in-type-theory-a-faq/">This blog post of <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></a> is related too.</p>



<a name="208789936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789936">(Sep 02 2020 at 07:47)</a>:</h4>
<p>If you want "proper subtraction", you should write <code>(a - b : int)</code> (even if <code>a</code> and <code>b</code> have type <code>nat</code>). Then it will infer <code>int.sub</code> instead (which is sensible) and coerce <code>a</code> and <code>b</code> to integers</p>



<a name="208789971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208789971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208789971">(Sep 02 2020 at 07:48)</a>:</h4>
<p>Of course, if you do this lean will complain about the type you have given <code>shift1</code></p>



<a name="208790035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790035">(Sep 02 2020 at 07:48)</a>:</h4>
<p>Ok, so you are saying that what Lean checks is correct, but it is on me to check that I am not using <code>-</code> where I should not?</p>



<a name="208790065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790065">(Sep 02 2020 at 07:48)</a>:</h4>
<p>well, if you wanted truncated subtraction then it might be the right thing</p>



<a name="208790076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790076">(Sep 02 2020 at 07:49)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> You cannot <em>prove</em> that a function (or any term, for that matter) has a certain type. It has only one type, Lean can try to check it for you, but from a proving point of view, it's inaccesible.</p>



<a name="208790080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790080">(Sep 02 2020 at 07:49)</a>:</h4>
<p>Yes, just like it's on you to put parentheses in the right places!</p>



<a name="208790086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790086">(Sep 02 2020 at 07:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208789936">said</a>:</p>
<blockquote>
<p>If you want "proper subtraction", you should write <code>(a - b : int)</code> (even if <code>a</code> and <code>b</code> have type <code>nat</code>). Then it will infer <code>int.sub</code> instead (which is sensible) and coerce <code>a</code> and <code>b</code> to integers</p>
</blockquote>
<p>I see, so, to be safe, I should be using "integer subtraction" and prove that I land in the naturals in my applications</p>



<a name="208790092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790092">(Sep 02 2020 at 07:49)</a>:</h4>
<p>but usually yes, you should just always use it when you have a hypothesis saying it is sensible</p>



<a name="208790138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790138">(Sep 02 2020 at 07:49)</a>:</h4>
<p>So if you write <code>def shift1 : ℕ → ℕ :=</code> then what ever comes afterwards must be a function that has a well-defined <code>nat</code> value when you stick in <code>0</code>.</p>



<a name="208790224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790224">(Sep 02 2020 at 07:50)</a>:</h4>
<p>You could also define <code>shift1 : pnat -&gt; nat</code>... and then you cannot evaluate it on <code>0</code>, but only on terms of type <code>pnat</code>, which consist of <code>nat</code> + a proof of positivity.</p>



<a name="208790239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790239">(Sep 02 2020 at 07:50)</a>:</h4>
<p>In practice however, it is easier to use the <code>shift1</code> that you defined.</p>



<a name="208790254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790254">(Sep 02 2020 at 07:51)</a>:</h4>
<p>(It's called <code>nat.pred</code> btw)</p>



<a name="208790260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790260">(Sep 02 2020 at 07:51)</a>:</h4>
<p>And then put the possitivity assumptions in the theorems that you want to prove.</p>



<a name="208790279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790279">(Sep 02 2020 at 07:51)</a>:</h4>
<p>Ok, these answers clarified my doubts and confirmed my fears!  I am glad to hear that Lean is acting consistently, I am less happy about having to now check that when I use <code>-</code> is really should make sure that <code>-</code> is the function that I think it is!</p>



<a name="208790283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790283">(Sep 02 2020 at 07:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208790254">said</a>:</p>
<blockquote>
<p>(It's called <code>nat.pred</code> btw)</p>
</blockquote>
<p>But that one has syntactic issues... because <code>i - 1</code> looks a lot better.</p>



<a name="208790320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790320">(Sep 02 2020 at 07:52)</a>:</h4>
<p>it is <code>nat.pred</code> up to equality</p>



<a name="208790386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790386">(Sep 02 2020 at 07:52)</a>:</h4>
<p>Kevin will tell you to just avoid ever using <code>-</code> on naturals</p>



<a name="208790407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790407">(Sep 02 2020 at 07:52)</a>:</h4>
<p>But you can't avoid using <code>1/x</code> on the rationals...</p>



<a name="208790445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790445">(Sep 02 2020 at 07:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208790279">said</a>:</p>
<blockquote>
<p>Ok, these answers clarified my doubts and confirmed my fears!  I am glad to hear that Lean is acting consistently, I am less happy about having to now check that when I use <code>-</code> is really should make sure that <code>-</code> is the function that I think it is!</p>
</blockquote>
<p>There will be a theorem that says that it is the function you think it is for all sensible inputs.</p>



<a name="208790456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790456">(Sep 02 2020 at 07:53)</a>:</h4>
<p>If you prove a good selection of theorems about your definitions, you will very likely notice if you have missed a hypothesis</p>



<a name="208790464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790464">(Sep 02 2020 at 07:53)</a>:</h4>
<p>So, just to make it completely explicit: <code>a-b</code> in Lean means what I would write on a board as <code>max 0 (a-b)</code><br>
Lean takes care of checking that with this definition, everything follows</p>



<a name="208790471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790471">(Sep 02 2020 at 07:53)</a>:</h4>
<p><code>1/0 = 0</code>, but for all nonzero <code>x</code>, we have a theorem that says <code>x * (1/x) = 1</code></p>



<a name="208790547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790547">(Sep 02 2020 at 07:54)</a>:</h4>
<p>Alright, my doubts have dissolved, my fears have crystallized!</p>



<a name="208790550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790550">(Sep 02 2020 at 07:54)</a>:</h4>
<p>thank you!</p>



<a name="208790551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790551">(Sep 02 2020 at 07:54)</a>:</h4>
<p>similarly, we have a theorem that says <code>a-b</code> means what you would write on a board as <code>a-b</code> whenever it could possibly land in the type you have ascribed to it</p>



<a name="208790570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790570">(Sep 02 2020 at 07:55)</a>:</h4>
<p>Of course <code>def shift1' : int -&gt; int := \lam i, i - 1</code> is <em>mathematically pure</em></p>



<a name="208790585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790585">(Sep 02 2020 at 07:55)</a>:</h4>
<p>otherwise it yields "garbage"and we quietly ignore that case</p>



<a name="208790673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790673">(Sep 02 2020 at 07:56)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Have you ever tried <code>#eval 7.3/2.5</code>?</p>



<a name="208790687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790687">(Sep 02 2020 at 07:56)</a>:</h4>
<p>ouch</p>



<a name="208790701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790701">(Sep 02 2020 at 07:56)</a>:</h4>
<p>Right, except that if I am trying to shift the coefficients of a polynomial, then I am assigning the constant term to lots of coefficients that should be getting a coefficient of 0</p>



<a name="208790742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790742">(Sep 02 2020 at 07:57)</a>:</h4>
<p>shouldn't the coefficient map be going the other direction?</p>



<a name="208790748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790748">(Sep 02 2020 at 07:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208790673">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> Have you ever tried <code>#eval 7.3/2.5</code>?</p>
</blockquote>
<p>are you trying to discourage me from using Lean?!?!  Ahahaha</p>



<a name="208790756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790756">(Sep 02 2020 at 07:57)</a>:</h4>
<p>What exactly are you trying to do? Can you write down the function in maths <code>$$ \latex here $$</code></p>



<a name="208790856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790856">(Sep 02 2020 at 07:59)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Is it <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>a</mi><mi>i</mi></msub><msup><mi>X</mi><mi>i</mi></msup><mo>↦</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>a</mi><mi>i</mi></msub><msup><mi>X</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\sum_i a_i X^i \mapsto \sum_i a_i X^{i-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.124374em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.124374em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>, or what kind of map do you want?</p>



<a name="208790875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790875">(Sep 02 2020 at 07:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208790742">said</a>:</p>
<blockquote>
<p>shouldn't the coefficient map be going the other direction?</p>
</blockquote>
<p>In my mind, I have a polynomial <code>f</code> and I want to write is as <code>x^N*g</code>, where <code>g</code> is not divisible by <code>x</code>.  For this, I shift coefficients by <code>N</code>...</p>



<a name="208790964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208790964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208790964">(Sep 02 2020 at 08:00)</a>:</h4>
<p>What's happening with the coefficients below <code>N</code>?</p>



<a name="208791010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791010">(Sep 02 2020 at 08:00)</a>:</h4>
<p>the polynomial <code>f</code> has coefficients below <code>N</code> equal to 0...</p>



<a name="208791032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791032">(Sep 02 2020 at 08:01)</a>:</h4>
<p>In that situation you can define <code>g(i) = f(i+N)</code></p>



<a name="208791035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791035">(Sep 02 2020 at 08:01)</a>:</h4>
<p>I wish <code>multiplicity</code> would be easier to use... but I'm scared of sending you in that direction. It is what should be used here.</p>



<a name="208791040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791040">(Sep 02 2020 at 08:01)</a>:</h4>
<p>where <code>()</code> is coeff</p>



<a name="208791126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791126">(Sep 02 2020 at 08:02)</a>:</h4>
<p>but in order to construct the <code>support</code> for <code>g</code> i need to do the opposite shift, no?</p>



<a name="208791140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791140">(Sep 02 2020 at 08:02)</a>:</h4>
<p>I don't think you should construct the polynomial by hand.</p>



<a name="208791154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791154">(Sep 02 2020 at 08:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791140">said</a>:</p>
<blockquote>
<p>I don't think you should construct the polynomial by hand.</p>
</blockquote>
<p>Ok, but I know of no other way...</p>



<a name="208791188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791188">(Sep 02 2020 at 08:03)</a>:</h4>
<p>You could say <code>N</code> is the largest integer such that there exists <code>g</code> such that <code>f = x^N*g</code></p>



<a name="208791223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791223">(Sep 02 2020 at 08:03)</a>:</h4>
<p>(to be clear, in this specific case, I do not think that there is a problem with using Lean's <code>-</code>, but the proof checker in my mind was having some difficult times reconciling the two notions!)</p>



<a name="208791225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791225">(Sep 02 2020 at 08:03)</a>:</h4>
<p><code>\lam poly, \sum i in range (nat_degree poly), coeff i poly * X ^ (i - N)</code> is one definition... but I don't think it's the best.</p>



<a name="208791280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791280">(Sep 02 2020 at 08:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791188">said</a>:</p>
<blockquote>
<p>You could say <code>N</code> is the largest integer such that there exists <code>g</code> such that <code>f = x^N*g</code></p>
</blockquote>
<p>This is <code>multiplicity</code></p>



<a name="208791294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791294">(Sep 02 2020 at 08:04)</a>:</h4>
<p>indeed</p>



<a name="208791301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791301">(Sep 02 2020 at 08:04)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Do you already have a proof that your poly is nonzero?</p>



<a name="208791320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791320">(Sep 02 2020 at 08:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791301">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> Do you already have a proof that your poly is nonzero?</p>
</blockquote>
<p>yes</p>



<a name="208791338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791338">(Sep 02 2020 at 08:05)</a>:</h4>
<p>you could try using <code>N = multiplicity x f</code></p>



<a name="208791339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791339">(Sep 02 2020 at 08:05)</a>:</h4>
<p>Great... then <code>multiplicity</code> might not be too bad.</p>



<a name="208791357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791357">(Sep 02 2020 at 08:05)</a>:</h4>
<p>(roughly)</p>



<a name="208791367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791367">(Sep 02 2020 at 08:05)</a>:</h4>
<p>I will look up <code>multiplicity</code>, then!</p>



<a name="208791384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791384">(Sep 02 2020 at 08:05)</a>:</h4>
<p>(and use it carefully: I am fed up of <code>finsets</code>)</p>



<a name="208791407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791407">(Sep 02 2020 at 08:06)</a>:</h4>
<p>oh, enats are even more fun! <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span></p>



<a name="208791493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791493">(Sep 02 2020 at 08:06)</a>:</h4>
<p>i had to write a lemma to show that a bounded subset of the naturals is a <code>finset</code> and i do not want to think about <code>finset</code>s again, if possible!</p>



<a name="208791526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791526">(Sep 02 2020 at 08:06)</a>:</h4>
<p>it's a subset of <code>fin.range n</code></p>



<a name="208791542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791542">(Sep 02 2020 at 08:06)</a>:</h4>
<p>enats?!  I am not sure that I want to know what those are</p>



<a name="208791563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791563">(Sep 02 2020 at 08:07)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi><mo>∪</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\mathbb{N} \cup \infty</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></p>



<a name="208791571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791571">(Sep 02 2020 at 08:07)</a>:</h4>
<p>"extended" natural numbers</p>



<a name="208791614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791614">(Sep 02 2020 at 08:07)</a>:</h4>
<p>you will be getting acquainted with them because that's the type of <code>multiplicity</code></p>



<a name="208791718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791718">(Sep 02 2020 at 08:08)</a>:</h4>
<p>oooh no!  at least, I also produced many lemmas proving that a polynomial is non-zero, so hopefully I can steer away from enats!  for <code>finsets</code> the bad guy was <code>nonempty</code>...</p>



<a name="208791762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791762">(Sep 02 2020 at 08:09)</a>:</h4>
<p>it looks like the "good" non-zero saves you from the evil of enats and nonempty</p>



<a name="208791764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791764">(Sep 02 2020 at 08:09)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> I was going to be using <code>multiplicity</code> in about an hour on the Discord.</p>



<a name="208791785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791785">(Sep 02 2020 at 08:09)</a>:</h4>
<p>I want to define the valuation on a discrete valuation ring</p>



<a name="208791873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791873">(Sep 02 2020 at 08:10)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="k">let</span> <span class="n">N</span> <span class="o">:=</span> <span class="n">enat</span><span class="bp">.</span><span class="n">get</span> <span class="o">(</span><span class="n">multiplicity</span> <span class="n">X</span> <span class="n">f</span><span class="o">)</span> <span class="bp">_</span>
<span class="k">obtain</span> <span class="err">\</span><span class="bp">&lt;</span><span class="n">g</span><span class="o">,</span> <span class="n">hg</span><span class="err">\</span><span class="bp">&gt;</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">^</span> <span class="n">N</span> <span class="err">\</span><span class="bp">|</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">pow_multiplicity_dvd</span> <span class="bp">_</span><span class="o">,</span>
</code></pre></div>



<a name="208791911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791911">(Sep 02 2020 at 08:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791764">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> I was going to be using <code>multiplicity</code> in about an hour on the Discord.</p>
</blockquote>
<p>I see!  I will try to work with it a little first and if I am still having problems, I will come to discord.  i feel a little awkward on the discord: I am listening in on the conversation, but not able to talk.  I feel like I am eavesdropping...</p>



<a name="208791931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791931">(Sep 02 2020 at 08:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791785">said</a>:</p>
<blockquote>
<p>I want to define the valuation on a discrete valuation ring</p>
</blockquote>
<p>Where will it take values?</p>



<a name="208791937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791937">(Sep 02 2020 at 08:11)</a>:</h4>
<p>You should buy an external mic on amazon or whatever</p>



<a name="208791954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791954">(Sep 02 2020 at 08:11)</a>:</h4>
<p><code>with_zero (multiplicative \Z)</code></p>



<a name="208791960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791960">(Sep 02 2020 at 08:11)</a>:</h4>
<p>Note that <code>(factors x).card</code> is also very useful. See the dvr.lean file</p>



<a name="208791980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791980">(Sep 02 2020 at 08:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791937">said</a>:</p>
<blockquote>
<p>You should buy an external mic on amazon or whatever</p>
</blockquote>
<p>Yes, I am going to, I just have not gotten around to doing it, yet</p>



<a name="208791990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208791990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208791990">(Sep 02 2020 at 08:11)</a>:</h4>
<p>I've used it as a "pseudo" valuation already</p>



<a name="208792216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792216">(Sep 02 2020 at 08:14)</a>:</h4>
<p>The issue with DVRs will be proving v(xy)=v(x)v(y).</p>



<a name="208792264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792264">(Sep 02 2020 at 08:14)</a>:</h4>
<p>Ok, I have made a note of all the commands that you suggested wrt multiplicities and also made a mental note that <code>-</code> in Lean is not the <code>-</code> in my mind, at least when it comes to the naturals!</p>
<p>I feel kind of strange that in my mind, <code>shift1</code> does not compile as a function from nat to nat, while for Lean it does, although now I understand the reason behind it!</p>



<a name="208792377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792377">(Sep 02 2020 at 08:16)</a>:</h4>
<p>To find "all of the commands for multiplicity" you should #check the definition, right click to find it in the source code, and then read the statements of the theorems that come immediately after the definition.</p>



<a name="208792398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792398">(Sep 02 2020 at 08:16)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> But like I said... <code>multiplicity</code> API needs quite a bit of love</p>



<a name="208792464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792464">(Sep 02 2020 at 08:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208792398">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> But like I said... <code>multiplicity</code> API needs quite a bit of love</p>
</blockquote>
<p>that is ok: i feel like I have not really taken advantage of the existing API's of almost all the definitions that I have been using so far...</p>



<a name="208792774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208792774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208792774">(Sep 02 2020 at 08:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208792377">said</a>:</p>
<blockquote>
<p>To find "all of the commands for multiplicity" you should #check the definition, right click to find it in the source code, and then read the statements of the theorems that come immediately after the definition.</p>
</blockquote>
<p>I know that you mentioned this many times and I am making progress with this!</p>
<ol>
<li>I am getting better at reading Lean code, so I can actually understand the statements (although the proof escape me, usually, but, by proof irrelevance, I can work with the one in my head and I am happy!)</li>
<li>I am starting to realize that files are not so long, so "reading the <em>whole</em> file" is actually not a daunting task!</li>
<li>I am also understanding how to convert these statement into commands that I can use.</li>
</ol>
<p>Probably, these 3 points above are clear to everyone else, but I am trying to internalize them, albeit slowly!</p>



<a name="208793922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208793922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208793922">(Sep 02 2020 at 08:33)</a>:</h4>
<p>For me this was a key point. I remember thinking "I need to use finite sets, so I should carefully read all of data.finset so I should probably also read all of data.multiset" and these files are (or were -- maybe now they have been split up a bit) gigantic, and the proofs were incomprehensible. I thought I was in trouble! I tried to work through some of the early proofs but they were in term mode and I found it extremely difficult.</p>
<p>I later on realised that I was doing the wrong thing. The key things to do are: (1) isolate the key definitions in the file (which nowadays should be easy because they should be in the module documentation at the top of the file) and (2) for each definition which you want to use, get to know its interface by reading the statements of the theorems proved about it; often some of the important ones are proved in the code directly after the definition is made. <em>Don't worry about the proofs</em>. Just figure out what you can do with the definition. Then you can use it in your own work.</p>



<a name="208794737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794737">(Sep 02 2020 at 08:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791225">said</a>:</p>
<blockquote>
<p><code>\lam poly, \sum i in range (nat_degree poly), coeff i poly * X ^ (i - N)</code> is one definition... but I don't think it's the best.</p>
</blockquote>
<p>Johan, when you write <code>\sum</code>, I imagine that you are telling Lean that you want to sum over the set.  What is the syntax?  I am using </p>
<div class="codehilite"><pre><span></span><code><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="o">,</span> <span class="o">(</span><span class="err">∑</span> <span class="o">(</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span><span class="o">)),</span> <span class="n">coeff</span> <span class="n">i</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">X</span> <span class="bp">^</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">i</span><span class="o">))</span>
</code></pre></div>


<p>and Lean does not like it...</p>



<a name="208794794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794794">(Sep 02 2020 at 08:43)</a>:</h4>
<p>it's <code>∑ i in range (nat_degree p)</code> not <code>∑ ( i in range (nat_degree p))</code></p>



<a name="208794800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794800">(Sep 02 2020 at 08:43)</a>:</h4>
<p>the <code>in</code> is part of the syntax</p>



<a name="208794825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794825">(Sep 02 2020 at 08:43)</a>:</h4>
<p>btw this is <code>polynomial.derivative</code></p>



<a name="208794842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794842">(Sep 02 2020 at 08:43)</a>:</h4>
<p>so you can just look at how they do it</p>



<a name="208794847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794847">(Sep 02 2020 at 08:43)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.derivative/src">src#polynomial.derivative</a></p>



<a name="208794983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794983">(Sep 02 2020 at 08:44)</a>:</h4>
<p>nvm this isn't the derivative</p>



<a name="208794987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208794987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208794987">(Sep 02 2020 at 08:44)</a>:</h4>
<p>with </p>
<div class="codehilite"><pre><span></span><code><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="o">,</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span><span class="o">)</span> <span class="o">,</span> <span class="n">coeff</span> <span class="n">i</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">X</span> <span class="bp">^</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">i</span><span class="o">))</span>
</code></pre></div>


<p>I still get an <code>unexpected token</code> and a red underlined \Sigma</p>



<a name="208795017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795017">(Sep 02 2020 at 08:45)</a>:</h4>
<p>you need to <code>open_locale big_operators</code> at the top of the file after the imports</p>



<a name="208795032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795032">(Sep 02 2020 at 08:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208794983">said</a>:</p>
<blockquote>
<p>nvm this isn't the derivative</p>
</blockquote>
<p>That is ok, they probably do something similar to what I want: I will take a look!</p>



<a name="208795037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795037">(Sep 02 2020 at 08:45)</a>:</h4>
<p>you'll find that "Lean does not like it" doesn't tell much</p>



<a name="208795049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795049">(Sep 02 2020 at 08:45)</a>:</h4>
<p>it's like people saying that some code "doesn't work"</p>



<a name="208795143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795143">(Sep 02 2020 at 08:46)</a>:</h4>
<p>including the error would be more efficient</p>



<a name="208795183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795183">(Sep 02 2020 at 08:46)</a>:</h4>
<p>Now "Lean does not like range"!  Wow  Progress!!</p>



<a name="208795225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795225">(Sep 02 2020 at 08:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208795143">said</a>:</p>
<blockquote>
<p>including the error would be more efficient</p>
</blockquote>
<p>The error was <code>unexpected token</code>, though...</p>



<a name="208795373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795373">(Sep 02 2020 at 08:48)</a>:</h4>
<p>yes, and that's more helpful than "Lean doesn't like it"</p>



<a name="208795411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795411">(Sep 02 2020 at 08:48)</a>:</h4>
<p>so Lean doesn't like <code>range</code> because it's <code>finset.range</code>, so you either type the full name or <code>open finset</code></p>



<a name="208795462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795462">(Sep 02 2020 at 08:49)</a>:</h4>
<p>yes, I added the <code>finset</code>.  Still...</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">p</span><span class="bp">.</span><span class="n">coeff</span>
<span class="n">term</span>
  <span class="n">p</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">polynomial</span> <span class="n">R</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">polynomial</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span>
</code></pre></div>



<a name="208795481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795481">(Sep 02 2020 at 08:49)</a>:</h4>
<p>(<code>coeff</code> is underlined)</p>



<a name="208795746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795746">(Sep 02 2020 at 08:52)</a>:</h4>
<p>Lean sees <code>coeff i p * X ^ (nat_degree p - i))</code> and knows that <code>X ^ (nat_degree p - i)) : polynomial R</code></p>



<a name="208795759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795759">(Sep 02 2020 at 08:52)</a>:</h4>
<p>so Lean expects <code>coeff i p : polynomial R</code> as well</p>



<a name="208795778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795778">(Sep 02 2020 at 08:52)</a>:</h4>
<p>so Lean expects <code>p : polynomial (polynomial R)</code></p>



<a name="208795788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795788">(Sep 02 2020 at 08:52)</a>:</h4>
<p>because you need <code>C (coeff i p)</code> instead of <code>coeff i p</code></p>



<a name="208795795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795795">(Sep 02 2020 at 08:52)</a>:</h4>
<p>Ok, I added a C, indeed!  Thanks!</p>



<a name="208795813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208795813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208795813">(Sep 02 2020 at 08:52)</a>:</h4>
<p>(also, the i and the p are flipped, but I got as far!)</p>



<a name="208796073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208796073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208796073">(Sep 02 2020 at 08:55)</a>:</h4>
<p>Sorry for not testing the code...</p>



<a name="208796207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208796207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208796207">(Sep 02 2020 at 08:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208796073">said</a>:</p>
<blockquote>
<p>Sorry for not testing the code...</p>
</blockquote>
<p>No problem: it is more helpful when I also have to do some work to understand how to use it!</p>



<a name="208808316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208808316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208808316">(Sep 02 2020 at 11:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208791225">said</a>:</p>
<blockquote>
<p><code>\lam poly, \sum i in range (nat_degree poly), coeff i poly * X ^ (i - N)</code> is one definition... but I don't think it's the best.</p>
</blockquote>
<p>Dear Johan,</p>
<p>as I am making progress in unwrapping the definitions, I think that the range should be <code>nat_degree p + 1</code>, rather than <code>nat_degree p</code>, if I understand correctly.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">larger_range</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">f</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">,</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">coeff</span> <span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">X</span> <span class="bp">^</span><span class="n">i</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">exact</span> <span class="n">as_sum</span> <span class="n">f</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="208813343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208813343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208813343">(Sep 02 2020 at 12:06)</a>:</h4>
<p>There was no point proving that lemma; it is best if you delete it and just use <code>as_sum</code>. The more functions there are, the more the chances are that Lean will get confused.</p>



<a name="208813597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208813597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208813597">(Sep 02 2020 at 12:09)</a>:</h4>
<p>I agree, although I would like to use the "reversal of coefficients", which I am not sure is already defined:</p>
<div class="codehilite"><pre><span></span><code><span class="n">noncomputable</span> <span class="n">def</span> <span class="n">at_infty</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="o">,</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">,</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">coeff</span> <span class="n">p</span> <span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">X</span> <span class="bp">^</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>



<a name="208813724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208813724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208813724">(Sep 02 2020 at 12:10)</a>:</h4>
<p>(and now I am struggling to prove that the coefficients satisfy the identity </p>
<div class="codehilite"><pre><span></span><code><span class="n">coeff</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">coeff</span> <span class="o">(</span><span class="n">at_infty</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">nat_degree</span> <span class="n">f</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span>
</code></pre></div>


<p>)</p>



<a name="208814485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208814485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208814485">(Sep 02 2020 at 12:17)</a>:</h4>
<p>This operation was actually discussed <a href="#narrow/stream/116395-maths/topic/reversing.20the.20coefficients/near/200078636">here</a> but I don't know whether a PR was ever made</p>



<a name="208814930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208814930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208814930">(Sep 02 2020 at 12:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/negative.20natural.20numbers/near/208814485">said</a>:</p>
<blockquote>
<p>This operation was actually discussed <a href="#narrow/stream/116395-maths/topic/reversing.20the.20coefficients/near/200078636">here</a> but I don't know whether a PR was ever made</p>
</blockquote>
<p>Thank you!  I tried</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">check</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">reverse</span>
</code></pre></div>


<p>but there is not hit, unfortunately.</p>



<a name="208818642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/negative%20natural%20numbers/near/208818642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/negative.20natural.20numbers.html#208818642">(Sep 02 2020 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> oops, you are right about the <code>nat.degree f + 1</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>