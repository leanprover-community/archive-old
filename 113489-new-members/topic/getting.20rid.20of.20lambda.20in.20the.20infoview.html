---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html">getting rid of lambda in the infoview</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279846766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279846766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279846766">(Apr 22 2022 at 16:24)</a>:</h4>
<p>Hey, i have defined an infix like this (the meaning is not important)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kn">local</span> <span class="kd">infix</span>  <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span> <span class="mi">90</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">P</span> <span class="n">Q</span><span class="o">:</span> <span class="n">Form</span><span class="o">,</span> <span class="o">(</span><span class="n">P</span> <span class="bp">⇒</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">⇒</span> <span class="n">Q</span>
</code></pre></div>
<p>I have set <code>set_option trace.simplify.rewrite true</code>. When <code>simp</code> uses anything with this infix, the infix is in the infoview written out as <code>λ P Q: Form, (P ⇒ Q) ⇒ Q</code>. Is there some way how to make lean print in the infoview <code>P ⊔ Q</code> instead?</p>



<a name="279848376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279848376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279848376">(Apr 22 2022 at 16:38)</a>:</h4>
<p>I think "what <code>simp</code> does" and "notation" are two different things. What happens if you remove <code>@[simp]</code> and don't do the <code>set_option</code>?</p>



<a name="279849855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279849855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279849855">(Apr 22 2022 at 16:47)</a>:</h4>
<p>Turns out the <code>@[simp]</code> tag is not needed</p>



<a name="279850197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279850197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279850197">(Apr 22 2022 at 16:50)</a>:</h4>
<p>The problem is, that <code>simp</code> is doing crazy things while proving some lemmas and i wanted to know, what is it doing. So i have set <code>set_option</code> to see the steps it did, but since its using <code>λ..., ...</code> instead <code>⊔ </code> in the infoview it is just a big mess i cant orient in.</p>



<a name="279850795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279850795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279850795">(Apr 22 2022 at 16:55)</a>:</h4>
<p>I had no idea that was legal syntax</p>



<a name="279850904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279850904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279850904">(Apr 22 2022 at 16:56)</a>:</h4>
<p>You need to give that operator a name for lean to pretty-print it, is my guess</p>



<a name="279850920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279850920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279850920">(Apr 22 2022 at 16:56)</a>:</h4>
<p>Why not declare a <code>has_sup</code> instance?</p>



<a name="279851036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279851036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279851036">(Apr 22 2022 at 16:57)</a>:</h4>
<p>If infix works the same here as it does in Lean 4 this notation does make sense since notation commands basically expand into parser declarations though tagging the parser itself with simp will of course not have the desired effect^^</p>



<a name="279851628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279851628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279851628">(Apr 22 2022 at 17:01)</a>:</h4>
<p>Maybe you would have more luck with (if I got the syntax right)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="n">P</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">90</span> <span class="n">Q</span><span class="o">:</span><span class="mi">90</span> <span class="o">:=</span> <span class="o">(</span><span class="n">P</span> <span class="bp">⇒</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">⇒</span> <span class="n">Q</span>
</code></pre></div>



<a name="279852696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279852696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279852696">(Apr 22 2022 at 17:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview/near/279850920">said</a>:</p>
<blockquote>
<p>Why not declare a <code>has_sup</code> instance?</p>
</blockquote>
<p>This unfortunately works just half way for me. It prints nicely, but for some reason breaks some usages in lemmas i have in my code other things</p>



<a name="279852865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279852865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279852865">(Apr 22 2022 at 17:11)</a>:</h4>
<p>Does <code>Form</code> have a <code>le</code> operator? Does it respect the rules of <a href="https://leanprover-community.github.io/mathlib_docs/find/semilattice_sup">docs#semilattice_sup</a>?</p>



<a name="279853044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279853044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279853044">(Apr 22 2022 at 17:12)</a>:</h4>
<p>The <code>Form</code>  is a type that represents logical formulas. It doesnt have <code>le</code> operator</p>



<a name="279853112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279853112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279853112">(Apr 22 2022 at 17:13)</a>:</h4>
<p>Its defined as </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kd">inductive</span> <span class="n">Form</span> <span class="o">:</span> <span class="kt">Type</span>
  <span class="bp">|</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">Form</span>
  <span class="bp">|</span> <span class="n">imp</span> <span class="o">:</span> <span class="n">Form</span> <span class="bp">→</span> <span class="n">Form</span> <span class="bp">→</span> <span class="n">Form</span>
  <span class="bp">|</span> <span class="n">neg</span> <span class="o">:</span> <span class="n">Form</span> <span class="bp">→</span> <span class="n">Form</span>
</code></pre></div>



<a name="279853290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279853290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279853290">(Apr 22 2022 at 17:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview/near/279851628">said</a>:</p>
<blockquote>
<p>Maybe you would have more luck with (if I got the syntax right)</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="n">P</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">90</span> <span class="n">Q</span><span class="o">:</span><span class="mi">90</span> <span class="o">:=</span> <span class="o">(</span><span class="n">P</span> <span class="bp">⇒</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">⇒</span> <span class="n">Q</span>
</code></pre></div><br>
</p>
</blockquote>
<p>It seems this works the same way as the infix, but does not change the printing unfortunatelly</p>



<a name="279853732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279853732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279853732">(Apr 22 2022 at 17:18)</a>:</h4>
<p>Try this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[reducible]</span> <span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">Form</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">P</span> <span class="bp">⇒</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">⇒</span> <span class="n">Q</span>
<span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">90</span> <span class="o">:=</span> <span class="n">f</span>
</code></pre></div>



<a name="279853939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/getting%20rid%20of%20lambda%20in%20the%20infoview/near/279853939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jachym simon <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/getting.20rid.20of.20lambda.20in.20the.20infoview.html#279853939">(Apr 22 2022 at 17:21)</a>:</h4>
<p>The <code>has_sup</code> instance actually works. I was confused, because it messed up the binding strength, so i had to add brackets to some places</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>