---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/fintype.2Eprod_dite.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html">fintype.prod_dite</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="246143925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246143925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246143925">(Jul 15 2021 at 19:31)</a>:</h4>
<p>Why doesn't <code>fintype.prod_dite</code> has the label <code>to_additive</code>? I need to use the sum version of this. <span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span></p>



<a name="246144253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246144253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246144253">(Jul 15 2021 at 19:34)</a>:</h4>
<p>and an <code>ite</code> version also seems missing</p>



<a name="246146242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246146242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246146242">(Jul 15 2021 at 19:50)</a>:</h4>
<p>Not very familiar with this part, I would be grateful if anyone can do the poof!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[to_additive]</span>
<span class="kd">lemma</span> <span class="n">fintype.prod_ite</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">p</span><span class="o">]</span>
  <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="bp">¬</span><span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">g</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset.prod_ite</span><span class="o">,</span> <span class="n">finset.attach_eq_univ</span><span class="o">],</span>
  <span class="n">congr'</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">library_search</span><span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="246147355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246147355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246147355">(Jul 15 2021 at 19:58)</a>:</h4>
<p>Please, <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> with imports and variables</p>



<a name="246147457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246147457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246147457">(Jul 15 2021 at 19:59)</a>:</h4>
<p>You have that already, and for us to try to explore the issue, we'd have to rewrite it ourselves. It's almost surely easier for you to just copy+paste the extra few lines</p>



<a name="246148250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246148250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246148250">(Jul 15 2021 at 20:05)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">@[to_additive]</span>
<span class="kd">lemma</span> <span class="n">fintype.prod_ite</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">p</span><span class="o">]</span>
  <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="bp">¬</span><span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">g</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset.prod_ite</span><span class="o">,</span> <span class="n">finset.attach_eq_univ</span><span class="o">],</span>
  <span class="n">congr'</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span><span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span><span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="246148310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246148310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246148310">(Jul 15 2021 at 20:05)</a>:</h4>
<p>I wrote the imports.</p>



<a name="246148867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246148867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246148867">(Jul 15 2021 at 20:10)</a>:</h4>
<p>I tagged <code>fintype.prod_dite</code> at <code>@{to_additive]</code> in <code>data.fintype.card</code> and then the following works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.card</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">@[to_additive]</span>
<span class="kd">lemma</span> <span class="n">fintype.prod_ite</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">p</span><span class="o">]</span>
  <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">∏</span> <span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="bp">¬</span><span class="n">p</span> <span class="n">a</span><span class="o">},</span> <span class="n">g</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">fintype.prod_dite</span> <span class="n">_</span> <span class="n">_</span>

<span class="k">#check</span> <span class="n">fintype.sum_ite</span>
</code></pre></div>



<a name="246150187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246150187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246150187">(Jul 15 2021 at 20:22)</a>:</h4>
<p>I think this can make a PR.</p>



<a name="246150200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246150200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246150200">(Jul 15 2021 at 20:22)</a>:</h4>
<p>Feel free to!</p>



<a name="246150824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246150824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246150824">(Jul 15 2021 at 20:28)</a>:</h4>
<p>Can this be made more general? <span class="user-mention" data-user-id="308899">@Yakov Pechersky</span></p>



<a name="246150870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246150870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246150870">(Jul 15 2021 at 20:29)</a>:</h4>
<p>Well the <code>dite</code> version is the more general one, no? What additional generality would you want?</p>



<a name="246151173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246151173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246151173">(Jul 15 2021 at 20:32)</a>:</h4>
<p>By the way, in the <code>{prod,sum}_ite</code> lemma, <code>p</code> should be an explicit variable.</p>



<a name="246151542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/fintype.prod_dite/near/246151542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/fintype.2Eprod_dite.html#246151542">(Jul 15 2021 at 20:35)</a>:</h4>
<p>I am not sure if there could be any generalization. I was just asking. This lemma now is enough for my own use.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>