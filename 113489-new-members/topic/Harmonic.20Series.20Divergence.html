---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html">Harmonic Series Divergence</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201651652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201651652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201651652">(Jun 22 2020 at 19:45)</a>:</h4>
<p>Hello again ! Yesterday I discovered the "Formalizing 100 theorem" challenge. Browsing the list, I was surprised to see that no proof was made in Lean of the divergence of the Harmonic Series. I'm glad to say it is now done ! The first two lemmas have been stated and proved by <span class="user-mention" data-user-id="110031">@Patrick Massot</span> in #new_members &gt; sequence_limit_lemmas and I will PR-them to Mathlib as he thinks they should be there. Let me know if you have any ideas about making this shorter, other ways to approach the problem, etc...</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">instances</span><span class="bp">.</span><span class="n">real</span>

<span class="kn">open</span> <span class="n">classical</span> <span class="n">filter</span> <span class="n">set</span> <span class="n">topological_space</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="c1">-- These two lemmas have been stated and proved by Patrick Massot, and they should soon be PR-ed to mahlib</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_supr_of_bdd</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">conditionally_complete_linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">order_topology</span> <span class="n">Œ±</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">(</span><span class="n">h_mono</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hbdd</span> <span class="o">:</span> <span class="n">bdd_above</span> <span class="err">$</span> <span class="n">range</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="err">ùìù</span> <span class="o">(</span><span class="err">‚®Ü</span><span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">tendsto_order</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">eventually_at_top</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">exists_lt_of_lt_csupr</span> <span class="n">h</span> <span class="k">with</span> <span class="n">N</span> <span class="n">hN</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">‚ü®</span><span class="n">N</span><span class="o">,</span> <span class="bp">Œª</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span> <span class="n">lt_of_lt_of_le</span> <span class="n">hN</span> <span class="o">(</span><span class="n">h_mono</span> <span class="n">hi</span><span class="o">)</span><span class="bp">‚ü©</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">univ_mem_sets&#39;</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">lt_of_le_of_lt</span> <span class="o">(</span><span class="n">le_csupr</span> <span class="n">hbdd</span> <span class="n">n</span><span class="o">)</span> <span class="n">h</span> <span class="o">},</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_of_monotone</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">order_topology</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">¬¨</span><span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="n">u</span><span class="o">))</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">u</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">rw</span> <span class="n">tendsto_at_top</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_at_top_sets</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">not_bdd_above_iff</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">H</span> <span class="n">b</span> <span class="k">with</span> <span class="bp">‚ü®_</span><span class="o">,</span> <span class="bp">‚ü®</span><span class="n">N</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">‚ü©</span><span class="o">,</span> <span class="n">hN</span><span class="bp">‚ü©</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">‚ü®</span><span class="n">N</span><span class="o">,</span> <span class="bp">Œª</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">lt_of_lt_of_le</span> <span class="n">hN</span> <span class="err">$</span> <span class="n">h</span> <span class="n">hn</span><span class="o">)</span><span class="bp">‚ü©</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c1">-- Now the theorem in itself</span>

<span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">k</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span>

<span class="kn">lemma</span> <span class="n">harmonic_not_tendsto_real</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬¨</span> <span class="o">(</span><span class="n">tendsto</span> <span class="n">harmonic</span> <span class="n">at_top</span> <span class="o">(</span><span class="n">nhds</span> <span class="n">l</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="k">have</span> <span class="n">key</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
        <span class="n">rw</span> <span class="o">[(</span><span class="k">show</span> <span class="mi">2</span><span class="bp">*</span><span class="n">n</span> <span class="bp">=</span> <span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">),</span> <span class="n">le_sub_iff_add_le</span><span class="o">,</span> <span class="n">add_comm</span><span class="o">],</span>
        <span class="k">have</span> <span class="o">:=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_add_sum_Ico</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">k</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="o">(</span><span class="k">show</span> <span class="n">n</span> <span class="bp">‚â§</span> <span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">),</span>
        <span class="n">change</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="bp">Œª</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="bp">=</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">rw</span> <span class="err">‚Üê</span> <span class="n">this</span><span class="o">,</span>
        <span class="k">have</span> <span class="n">ineq</span> <span class="o">:</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="bp">Œª</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)),</span>
        <span class="o">{</span>
            <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="bp">Œª</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="o">)),</span> <span class="k">by</span> <span class="o">{</span>
                <span class="n">rw</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">Ico</span><span class="bp">.</span><span class="n">card</span><span class="o">,</span> <span class="o">(</span><span class="k">show</span> <span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="bp">-</span><span class="n">n</span> <span class="bp">=</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">),</span>
                    <span class="n">nsmul_eq_mul</span><span class="o">,</span> <span class="err">‚Üê</span> <span class="n">div_eq_mul_one_div</span><span class="o">,</span> <span class="err">‚Üê</span> <span class="n">two_mul</span><span class="o">,</span>
                    <span class="n">mul_comm</span><span class="o">,</span> <span class="n">div_mul_eq_div_mul_one_div</span><span class="o">,</span> <span class="n">div_self</span><span class="o">],</span>
                <span class="n">simp</span><span class="o">,</span>
                <span class="n">norm_cast</span><span class="o">,</span> <span class="n">change</span> <span class="o">(</span><span class="n">n</span> <span class="bp">‚â†</span> <span class="mi">0</span><span class="o">),</span> <span class="n">symmetry</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ne_of_lt</span> <span class="n">hn</span><span class="o">,</span>
            <span class="o">}),</span>
            <span class="n">apply</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_le_sum</span><span class="o">,</span>
            <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
            <span class="n">simp</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
            <span class="n">rw</span> <span class="n">one_div_le_one_div</span><span class="o">,</span>
            <span class="n">norm_cast</span><span class="o">,</span> <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_le_of_lt</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
            <span class="n">norm_cast</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
            <span class="n">norm_cast</span><span class="o">,</span> <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="n">x</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="n">rwa</span> <span class="n">add_le_add_iff_left</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">by_contra</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">‚â§</span> <span class="mi">0</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">apply</span> <span class="bp">@</span><span class="n">ge_of_tendsto</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">harmonic</span> <span class="err">‚àò</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">k</span><span class="o">,</span> <span class="mi">2</span><span class="bp">*</span><span class="n">k</span><span class="o">))</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">at_top</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">at_top_ne_bot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">l</span><span class="bp">-</span><span class="n">l</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">),</span>
        <span class="n">apply</span> <span class="n">tendsto</span><span class="bp">.</span><span class="n">sub</span><span class="o">,</span>
        <span class="o">{</span>
            <span class="n">simp</span><span class="o">,</span>
            <span class="n">apply</span> <span class="n">tendsto</span><span class="bp">.</span><span class="n">comp</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
            <span class="n">rw</span> <span class="n">tendsto_at_top</span><span class="o">,</span>
            <span class="n">simp</span><span class="o">,</span>
            <span class="n">intros</span> <span class="n">b</span><span class="o">,</span>
            <span class="n">use</span> <span class="n">b</span><span class="o">,</span>
            <span class="n">intros</span> <span class="n">c</span> <span class="n">h</span><span class="o">,</span>
            <span class="n">linarith</span><span class="o">,</span>
        <span class="o">},</span>
        <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">eventually_at_top</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span>
        <span class="n">use</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="mi">0</span><span class="o">),</span>
        <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
        <span class="n">exact</span> <span class="o">(</span><span class="n">key</span> <span class="n">n</span> <span class="o">(</span><span class="k">by</span> <span class="n">linarith</span><span class="o">)),</span>
        <span class="n">use</span> <span class="mi">0</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">linarith</span><span class="o">,</span>
<span class="o">}</span>

<span class="kn">theorem</span> <span class="n">harmonic_tendsto_at_top</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">harmonic</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">harmonic</span><span class="o">,</span> <span class="o">{</span>
        <span class="n">intros</span> <span class="n">p</span> <span class="n">q</span> <span class="n">hpq</span><span class="o">,</span>
        <span class="n">unfold</span> <span class="n">harmonic</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_le_sum_of_subset_of_nonneg</span><span class="o">,</span>
        <span class="n">rwa</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range_subset</span><span class="o">,</span>
        <span class="n">intros</span> <span class="n">x</span> <span class="n">h</span> <span class="bp">_</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">le_of_lt</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">one_div_pos_of_pos</span><span class="o">,</span>
        <span class="n">norm_cast</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="bp">_</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">by_cases</span> <span class="n">H</span> <span class="o">:</span> <span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="n">harmonic</span><span class="o">),</span> <span class="o">{</span>
        <span class="n">exfalso</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">harmonic_not_tendsto_real</span> <span class="o">(</span><span class="n">supr</span> <span class="n">harmonic</span><span class="o">)</span> <span class="o">(</span><span class="n">tendsto_at_top_supr_of_bdd</span> <span class="n">this</span> <span class="n">H</span><span class="o">),</span>
    <span class="o">},</span> <span class="o">{</span>
        <span class="n">exact</span> <span class="n">tendsto_at_top_of_monotone</span> <span class="n">this</span> <span class="n">H</span><span class="o">,</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="201651855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201651855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201651855">(Jun 22 2020 at 19:46)</a>:</h4>
<p>I think all of this should go into mathlib</p>



<a name="201651883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201651883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201651883">(Jun 22 2020 at 19:46)</a>:</h4>
<p>Nice work!</p>



<a name="201652128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652128">(Jun 22 2020 at 19:48)</a>:</h4>
<p>Quick feedback (for mathlib submission):</p>
<ul>
<li>indent by 2 spaces</li>
<li>closing brace <code>}</code> on same line as last tactic in the block</li>
<li>don't use <code>simp</code> halfway a proof. Use <code>squeeze_simp</code> to get a <code>simp only</code> version</li>
<li>if you <code>open_locale big_operators</code> then you can write <code>\sum i in finset.range n, blabla i</code> for nice notation.</li>
</ul>



<a name="201652191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652191">(Jun 22 2020 at 19:49)</a>:</h4>
<p>Thanks ! I can't find a situation where it would help proving something else though, so should it really go into mathlib ?</p>



<a name="201652246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652246">(Jun 22 2020 at 19:50)</a>:</h4>
<p>I feel you can get a slightly slicker proof, avoiding all arguments by contradiction, by noting that <code>harmonic (2^n) \geq n/2</code> (you have proved this) and therefore <code>harmonic (2^n)</code> tends to infinity (as it is bounded below by a sequence tending to infinity -- I hope we have this!). And then, for a monotone sequence, having a subsequence tending to infinity implies convergence to infinity (I hope we have this also). But what you did is great!</p>



<a name="201652371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652371">(Jun 22 2020 at 19:51)</a>:</h4>
<p>This is so important that it should definitely go into mathlib!</p>



<a name="201652802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652802">(Jun 22 2020 at 19:55)</a>:</h4>
<p>Oh yeah using 2^n is smart, I'm going to try it. Thanks for the feedback !</p>



<a name="201652988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201652988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201652988">(Jun 22 2020 at 19:57)</a>:</h4>
<p>Why don't you use <code>begin</code> and <code>end</code>?</p>



<a name="201653023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653023">(Jun 22 2020 at 19:57)</a>:</h4>
<p>You can <code>open finset</code> and use stuff like <code>(Ico n (2*n)).sum ...</code>.</p>



<a name="201653065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653065">(Jun 22 2020 at 19:57)</a>:</h4>
<p>or <code>def harmonic (n : ‚Ñï) : ‚Ñù := (range n).sum (Œª k, 1/(k + 1 : ‚Ñù))</code></p>



<a name="201653148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653148">(Jun 22 2020 at 19:58)</a>:</h4>
<p>But using the <code>big_operators</code> sum notation, of course :)</p>



<a name="201653198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653198">(Jun 22 2020 at 19:58)</a>:</h4>
<p>As explained in <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652128">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652128</a></p>



<a name="201653200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653200">(Jun 22 2020 at 19:58)</a>:</h4>
<p>Yes, even better.</p>



<a name="201653234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653234">(Jun 22 2020 at 19:59)</a>:</h4>
<p>Oh, I missed Johan's message.</p>



<a name="201653269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653269">(Jun 22 2020 at 19:59)</a>:</h4>
<p>You'll get maximal readability by using advice from both.</p>



<a name="201653433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653433">(Jun 22 2020 at 20:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652988">said</a>:</p>
<blockquote>
<p>Why don't you use <code>begin</code> and <code>end</code>?</p>
</blockquote>
<p>C++ part of me wants {} around blocks, so I like the <code>by</code> syntax. But I can change it of course</p>



<a name="201653482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653482">(Jun 22 2020 at 20:01)</a>:</h4>
<p>You should work on the LaTeX part of you :-)</p>



<a name="201653488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201653488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201653488">(Jun 22 2020 at 20:01)</a>:</h4>
<p>Channel your inner Pascal programmer <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="201655495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201655495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201655495">(Jun 22 2020 at 20:18)</a>:</h4>
<p>If this gets in mathlib, do you think I should make <code>‚àÄ n : ‚Ñï, 0 &lt; n ‚Üí 1/2 ‚â§ harmonic (2*n) - harmonic n</code> a lemma by itself ? Or keep it as a <code>have</code> ?</p>



<a name="201655671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201655671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201655671">(Jun 22 2020 at 20:20)</a>:</h4>
<p>Aside: we don't have the Cauchy condensation test for series convergence, do we - in fact I couldn't really find <em>anything</em> about the convergence of series, although my mathlib-fu is still not good</p>



<a name="201655857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201655857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201655857">(Jun 22 2020 at 20:21)</a>:</h4>
<p>Yes, I've already said we should develop some basics of convergence of series.</p>



<a name="201656965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201656965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201656965">(Jun 22 2020 at 20:30)</a>:</h4>
<p>My understanding is this -- someone goes "let's prove theorems about convergence of series" and then someone else goes "oh this is all just a special case of some lemma about filter" so we prove everything about filters but nobody has specialized them to series yet</p>



<a name="201657229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201657229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201657229">(Jun 22 2020 at 20:32)</a>:</h4>
<p>We have a bunch on infinite sums, but almost nothing specialized to the case where the infinite sum is indexed by <code>‚Ñï</code>. See <code>topology/algebra/infinite_sum.lean</code>.</p>



<a name="201657310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201657310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201657310">(Jun 22 2020 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201655495">said</a>:</p>
<blockquote>
<p>If this gets in mathlib, do you think I should make <code>‚àÄ n : ‚Ñï, 0 &lt; n ‚Üí 1/2 ‚â§ harmonic (2*n) - harmonic n</code> a lemma by itself ? Or keep it as a <code>have</code> ?</p>
</blockquote>
<p>I would say have it as a separate lemma.</p>



<a name="201658845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201658845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201658845">(Jun 22 2020 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="268315">@Anatole Dedecker</span>  Of course I agree with S√©bastien that you should directly prove that <code>harmonic</code> goes to infinity. But I made a compression pass on your proof (without changing the proof on paper) because I think you could learn various tricks by studying the differences with your proof. You need to replace the top import with <code>analysis.specific_limits</code>. Then you can do:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">finset</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:=</span> <span class="err">‚àë</span> <span class="n">k</span> <span class="k">in</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">harmonic_not_tendsto_real</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬¨</span> <span class="o">(</span><span class="n">tendsto</span> <span class="n">harmonic</span> <span class="n">at_top</span> <span class="o">(</span><span class="n">nhds</span> <span class="n">l</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">key</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">two_mul</span><span class="o">,</span>
      <span class="n">linarith</span> <span class="o">},</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="bp">+</span> <span class="err">‚àë</span> <span class="n">k</span> <span class="k">in</span> <span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
      <span class="n">sum_range_add_sum_Ico</span> <span class="bp">_</span> <span class="o">(</span><span class="k">show</span> <span class="n">n</span> <span class="bp">‚â§</span> <span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">),</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">‚Üê</span> <span class="n">this</span><span class="o">,</span>  <span class="n">add_le_add_iff_left</span><span class="o">],</span>
    <span class="k">have</span> <span class="o">:</span> <span class="err">‚àë</span> <span class="n">k</span> <span class="k">in</span> <span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">Ico</span><span class="bp">.</span><span class="n">card</span><span class="o">],</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="k">show</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_cast</span> <span class="bp">;</span> <span class="n">linarith</span><span class="o">],</span>
      <span class="n">ring</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="err">‚Üê</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">sum_le_sum</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">one_div_le_one_div</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_le_of_lt</span> <span class="o">(</span><span class="n">Ico</span><span class="bp">.</span><span class="n">mem</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="n">x</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">by_contra</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">ineq</span> <span class="o">:</span> <span class="bp">‚àÄ</span><span class="err">·∂†</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="k">in</span> <span class="n">at_top</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">c</span> <span class="o">:=</span>
    <span class="n">eventually_at_top</span><span class="bp">.</span><span class="n">mpr</span> <span class="bp">‚ü®</span><span class="mi">1</span><span class="o">,</span> <span class="bp">Œª</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span> <span class="n">key</span> <span class="n">n</span> <span class="o">(</span><span class="k">by</span> <span class="n">linarith</span><span class="o">)</span><span class="bp">‚ü©</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="bp">Œª</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">),</span> <span class="o">(</span><span class="n">harmonic</span> <span class="err">‚àò</span> <span class="bp">Œª</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span><span class="o">)</span> <span class="n">at_top</span> <span class="o">(</span><span class="err">ùìù</span> <span class="mi">0</span><span class="o">),</span>
    <span class="k">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">ge_of_tendsto</span> <span class="n">at_top_ne_bot</span> <span class="n">this</span> <span class="n">ineq</span><span class="o">],</span>
  <span class="n">convert</span> <span class="o">(</span><span class="n">h</span><span class="bp">.</span><span class="n">comp</span> <span class="err">$</span> <span class="n">tendsto_at_top_mul_left</span> <span class="n">two_pos</span> <span class="n">tendsto_id</span><span class="o">)</span><span class="bp">.</span><span class="n">sub</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201658987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201658987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201658987">(Jun 22 2020 at 20:48)</a>:</h4>
<p>You can use <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html">https://leanprover-community.github.io/mathlib_docs/tactics.html</a> to learn about any tactic that you don't know yet.</p>



<a name="201659193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201659193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201659193">(Jun 22 2020 at 20:50)</a>:</h4>
<p>is the non-terminal <code>field_simp</code> ok?</p>



<a name="201659357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201659357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201659357">(Jun 22 2020 at 20:51)</a>:</h4>
<p>I think so, this tactic is really meant as a preprocessing step.</p>



<a name="201659715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201659715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201659715">(Jun 22 2020 at 20:55)</a>:</h4>
<p>I've slightly edited the proof to adhere strictly to the idiomatic <code> field_simp, ring</code>.</p>



<a name="201660265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201660265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201660265">(Jun 22 2020 at 21:00)</a>:</h4>
<p>isn't every <code>field</code> a <code>ring</code>? <span aria-label="stuck out tongue" class="emoji emoji-1f61d" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="201661417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201661417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201661417">(Jun 22 2020 at 21:10)</a>:</h4>
<p><code>field_simp, ring</code> made me as happy in 2020 as <code>ring</code> made me in 2018/9.</p>



<a name="201661945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201661945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201661945">(Jun 22 2020 at 21:15)</a>:</h4>
<p>Is there a problem with writing <code>have := ...</code> without explicitly writing the goal ?</p>



<a name="201661963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201661963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201661963">(Jun 22 2020 at 21:15)</a>:</h4>
<p>only readability problems</p>



<a name="201661972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201661972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201661972">(Jun 22 2020 at 21:15)</a>:</h4>
<p>Ok</p>



<a name="201662335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201662335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201662335">(Jun 22 2020 at 21:18)</a>:</h4>
<p>I replaced that because you wrote <code>change ... at this</code> right after this line. So I only combined two of your lines into one.</p>



<a name="201662629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201662629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201662629">(Jun 22 2020 at 21:20)</a>:</h4>
<p>Oh indeed</p>



<a name="201663667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663667">(Jun 22 2020 at 21:30)</a>:</h4>
<p>What is <code>$</code> ?</p>



<a name="201663699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663699">(Jun 22 2020 at 21:31)</a>:</h4>
<p><code>X $ Y</code> is the same as <code>X (Y)</code></p>



<a name="201663735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663735">(Jun 22 2020 at 21:31)</a>:</h4>
<p>Oooooooooooh this is great</p>



<a name="201663740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663740">(Jun 22 2020 at 21:31)</a>:</h4>
<p>it's just a super-low-priority notation</p>



<a name="201663752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663752">(Jun 22 2020 at 21:31)</a>:</h4>
<p><code>#print notation $</code></p>



<a name="201663814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663814">(Jun 22 2020 at 21:32)</a>:</h4>
<p>I was starting to get bored of lisp-like parenthesizing</p>



<a name="201663820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663820">(Jun 22 2020 at 21:32)</a>:</h4>
<p>the <code>1</code> and <code>0</code> just indicate that it gets evaluated last, and when it gets evaluated Lean discovers that it doesn't do anything :-)</p>



<a name="201663865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663865">(Jun 22 2020 at 21:32)</a>:</h4>
<p>I read about it in learnyouahaskell</p>



<a name="201663896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201663896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201663896">(Jun 22 2020 at 21:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201663820">said</a>:</p>
<blockquote>
<p>the <code>1</code> and <code>0</code> just indicate that it gets evaluated last, and when it gets evaluated Lean discovers that it doesn't do anything :-)</p>
</blockquote>
<p>Smart</p>



<a name="201669486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201669486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201669486">(Jun 22 2020 at 22:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652246">said</a>:</p>
<blockquote>
<p>I feel you can get a slightly slicker proof, avoiding all arguments by contradiction, by noting that <code>harmonic (2^n) \geq n/2</code> (you have proved this) and therefore <code>harmonic (2^n)</code> tends to infinity (as it is bounded below by a sequence tending to infinity -- I hope we have this!). And then, for a monotone sequence, having a subsequence tending to infinity implies convergence to infinity (I hope we have this also). But what you did is great!</p>
</blockquote>
<p>Well, I I'd be done if I had found those two lemmas... If they exist, they are well hidden. I'll continue to search tomorrow, and if they don't exist I'll prove them, it doesn't seem <em>that</em> difficult</p>



<a name="201676042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201676042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201676042">(Jun 23 2020 at 00:09)</a>:</h4>
<p>For readability you might like to factor out more steps into lemmas. Essentially any top level <code>have</code> statement in a long proof is a good candidate for extraction.</p>



<a name="201676108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201676108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201676108">(Jun 23 2020 at 00:10)</a>:</h4>
<p>e.g. things like  <code>mono harmonic</code> should certainly be their own lemmas.</p>



<a name="201678084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678084">(Jun 23 2020 at 00:46)</a>:</h4>
<p>Does it make sense to</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- the sequence</span>
<span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">real</span> <span class="o">:=</span> <span class="mi">1</span> <span class="bp">/</span> <span class="n">n</span>

<span class="n">def</span> <span class="n">series</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">sequence</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">‚Üí</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="err">\</span><span class="n">sum</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">sequence</span> <span class="n">i</span>

<span class="c1">-- the series</span>
<span class="n">def</span> <span class="n">harmonic_series</span> <span class="o">:=</span> <span class="n">series</span> <span class="n">harmonic</span>
</code></pre></div>



<a name="201678106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678106">(Jun 23 2020 at 00:46)</a>:</h4>
<p>Then we can prove things about <code>1 + (1/2)^2 + (1/3)^2 + ...</code> later as things about <code>series (square \circ harmonic)</code>.</p>



<a name="201678406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678406">(Jun 23 2020 at 00:52)</a>:</h4>
<p>How about <code>(n : \Z)</code> so that one can have alternating harmonic? Or should alternating_series be a separate sum?</p>



<a name="201678500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678500">(Jun 23 2020 at 00:54)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">real</span> <span class="o">:=</span> <span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">def</span> <span class="n">alternating</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">series</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">-&gt;</span> <span class="n">real</span><span class="o">)</span> <span class="o">:</span> <span class="n">real</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">series</span> <span class="n">n</span>
</code></pre></div>



<a name="201678620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678620">(Jun 23 2020 at 00:57)</a>:</h4>
<p>You don't want to abuse <code>1/0 = 0</code>? <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="201678693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678693">(Jun 23 2020 at 00:58)</a>:</h4>
<p>Note that <code>alternating</code> could be done for any <code>add_comm_group A</code></p>



<a name="201678701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678701">(Jun 23 2020 at 00:59)</a>:</h4>
<p>Well it would mess with what <code>alternating harmonic</code> would converge to.</p>



<a name="201678704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678704">(Jun 23 2020 at 00:59)</a>:</h4>
<p>If you replace the <code>*</code> with a <code>\bu[\Z]</code></p>



<a name="201678730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678730">(Jun 23 2020 at 01:00)</a>:</h4>
<p>/me doesn't know that standard indexing convention for standard series</p>



<a name="201678792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201678792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201678792">(Jun 23 2020 at 01:00)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">alternating</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">r</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">series</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">-&gt;</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">r</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="err">\</span><span class="n">bu</span><span class="o">[</span><span class="err">\</span><span class="n">Z</span><span class="o">]</span> <span class="n">series</span> <span class="n">n</span>
</code></pre></div>



<a name="201679678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201679678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201679678">(Jun 23 2020 at 01:19)</a>:</h4>
<p>The indexing convention is whatever makes the result cleanest. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>‚àë</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="normal">‚àû</mi></msubsup><mfrac><mn>1</mn><msup><mi>n</mi><mn>2</mn></msup></mfrac><mo>=</mo><msup><mi>œÄ</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>6</mn></mrow><annotation encoding="application/x-tex">\sum_{n=1}^\infty\frac1{n^2}=\pi^2/6</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">‚àë</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">‚àû</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">œÄ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">6</span></span></span></span> but <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>‚àë</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">‚àû</mi></msubsup><msup><mi>a</mi><mi>n</mi></msup><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{n=0}^\infty a^n=1/(1-a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">‚àë</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">‚àû</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mclose">)</span></span></span></span></p>



<a name="201682289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201682289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201682289">(Jun 23 2020 at 02:19)</a>:</h4>
<p>You can start the first sum at <code>0</code> as well, right? Or am I misunderstanding when to abuse <code>1/0 = 0</code>?</p>



<a name="201683086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201683086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201683086">(Jun 23 2020 at 02:40)</a>:</h4>
<p>Oh I thought you meant standard in maths</p>



<a name="201683093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201683093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201683093">(Jun 23 2020 at 02:40)</a>:</h4>
<p>I don't see a problem with starting the sum at 0 in lean as long as it's still true</p>



<a name="201692799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201692799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201692799">(Jun 23 2020 at 06:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201669486">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652246">said</a>:</p>
<blockquote>
<p>I feel you can get a slightly slicker proof, avoiding all arguments by contradiction, by noting that <code>harmonic (2^n) \geq n/2</code> (you have proved this) and therefore <code>harmonic (2^n)</code> tends to infinity (as it is bounded below by a sequence tending to infinity -- I hope we have this!). And then, for a monotone sequence, having a subsequence tending to infinity implies convergence to infinity (I hope we have this also). But what you did is great!</p>
</blockquote>
<p>Well, I I'd be done if I had found those two lemmas... If they exist, they are well hidden. I'll continue to search tomorrow, and if they don't exist I'll prove them, it doesn't seem <em>that</em> difficult</p>
</blockquote>
<p>The first one is definitely there, it's <code>tendsto_at_top_mono</code>. I wouldn't bet on finding the second one.</p>



<a name="201693382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201693382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201693382">(Jun 23 2020 at 07:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">unbounded_of_tensto_at_top</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œ±</span><span class="o">]</span>
  <span class="o">[</span><span class="n">preorder</span> <span class="n">Œ≤</span><span class="o">]</span> <span class="o">[</span><span class="n">no_top_order</span> <span class="n">Œ≤</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="n">at_top</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬¨</span> <span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintros</span> <span class="bp">‚ü®</span><span class="n">M</span><span class="o">,</span> <span class="n">hM</span><span class="bp">‚ü©</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">tendsto_at_top</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">no_top</span> <span class="n">M</span> <span class="k">with</span> <span class="n">M&#39;</span> <span class="n">hMM&#39;</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">mem_at_top_sets</span><span class="bp">.</span><span class="n">mp</span> <span class="o">(</span><span class="n">h</span> <span class="n">M&#39;</span><span class="o">)</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">lt_irrefl</span> <span class="n">M</span><span class="o">,</span>
  <span class="k">calc</span>
  <span class="n">M</span> <span class="bp">&lt;</span> <span class="n">M&#39;</span> <span class="o">:</span> <span class="n">hMM&#39;</span>
  <span class="bp">...</span> <span class="bp">‚â§</span> <span class="n">f</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ha</span> <span class="n">a</span> <span class="o">(</span><span class="n">le_refl</span> <span class="bp">_</span><span class="o">)</span>
  <span class="bp">...</span> <span class="bp">‚â§</span> <span class="n">M</span> <span class="o">:</span> <span class="n">hM</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_range_self</span> <span class="n">a</span><span class="o">)</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_of_monotone_of_subseq</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">no_top_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span>
  <span class="o">{</span><span class="n">œÜ</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œπ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="n">u</span> <span class="err">‚àò</span> <span class="n">œÜ</span><span class="o">)</span> <span class="n">at_top</span> <span class="n">at_top</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">u</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">tendsto_at_top_of_monotone</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="bp">¬¨</span> <span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="err">$</span> <span class="n">u</span> <span class="err">‚àò</span> <span class="n">œÜ</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">contrapose</span><span class="bp">!</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">bdd_above</span><span class="bp">.</span><span class="n">mono</span> <span class="o">(</span><span class="n">range_comp_subset_range</span> <span class="n">œÜ</span> <span class="n">u</span><span class="o">)</span> <span class="n">this</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">unbounded_of_tensto_at_top</span> <span class="n">H</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>while writing this I also noticed I had a couple of copy-paste typos in yesterday's lemmas (unnecessary <code>[topological_space Œ±] [order_topology Œ±]</code> in lemmas that don't use any topology, only the order).</p>



<a name="201716901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201716901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201716901">(Jun 23 2020 at 12:13)</a>:</h4>
<p>Big thanks to everyone for your help and advice ! I was also thinking of defining series in general as <span class="user-mention" data-user-id="112680">@Johan Commelin</span> proposed, but I thought a more generic and complete had to exist in mathlib. If this isn't the case, it would indeed be interesting to define it ! </p>
<p>I have to admit I didn't think this project would get to mathlib, so making it clean and user-friendly wasn't my primary goal, but now I feel this is even more rewarding than the challenge in itself ! I'll finish the shorter proof with <code>2^n</code> and then I'll work on organizing everything, breaking into lemmas, etc...</p>



<a name="201718392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201718392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201718392">(Jun 23 2020 at 12:30)</a>:</h4>
<p>Well, I'll actually have to pause lean for a few days after that, cause I'm supposed to prepare an unofficial CS "lecture" for my colleagues <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="201720035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201720035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201720035">(Jun 23 2020 at 12:46)</a>:</h4>
<p>With Patrick's lemmas in <code>not_yet_in_lib</code>, this is where I am now : </p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">specific_limits</span>

<span class="kn">import</span> <span class="n">not_yet_in_lib</span>

<span class="kn">open</span> <span class="n">classical</span> <span class="n">filter</span> <span class="n">finset</span> <span class="n">set</span> <span class="n">topological_space</span>
<span class="n">open_locale</span> <span class="n">topological_space</span> <span class="n">big_operators</span>

<span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="o">:=</span>
<span class="err">‚àë</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">succ</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">mono_harmonic</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">harmonic</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">p</span> <span class="n">q</span> <span class="n">hpq</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">harmonic</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">sum_le_sum_of_subset_of_nonneg</span><span class="o">,</span>
  <span class="n">rwa</span> <span class="n">range_subset</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">h</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">le_of_lt</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">one_div_pos_of_pos</span><span class="o">,</span>
  <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="bp">_</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">half_le_harmonic_double_sub_harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">two_mul</span><span class="o">,</span>
      <span class="n">linarith</span> <span class="o">},</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="bp">+</span> <span class="err">‚àë</span> <span class="n">k</span> <span class="k">in</span> <span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
      <span class="n">sum_range_add_sum_Ico</span> <span class="bp">_</span> <span class="o">(</span><span class="k">show</span> <span class="n">n</span> <span class="bp">‚â§</span> <span class="n">n</span><span class="bp">+</span><span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">),</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">‚Üê</span> <span class="n">this</span><span class="o">,</span>  <span class="n">add_le_add_iff_left</span><span class="o">],</span>
    <span class="k">have</span> <span class="o">:</span> <span class="err">‚àë</span> <span class="n">k</span> <span class="k">in</span> <span class="n">Ico</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="mi">0</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">},</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">sum_const</span><span class="o">,</span> <span class="n">Ico</span><span class="bp">.</span><span class="n">card</span><span class="o">],</span>
      <span class="n">field_simp</span> <span class="o">[</span><span class="n">this</span><span class="o">],</span>
      <span class="n">ring</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="err">‚Üê</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">sum_le_sum</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">one_div_le_one_div</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_le_of_lt</span> <span class="o">(</span><span class="n">Ico</span><span class="bp">.</span><span class="n">mem</span><span class="bp">.</span><span class="n">mp</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact_mod_cast</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="n">x</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">harmonic_two_pow_ge_id_div_two</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">harmonic</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">one_div_eq_inv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_zero</span><span class="o">,</span> <span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">zero_div</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_succ</span><span class="o">,</span> <span class="n">sum_singleton</span><span class="o">,</span> <span class="n">inv_one</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_zero</span><span class="o">,</span> <span class="n">range_one</span><span class="o">],</span>
  <span class="n">linarith</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">),</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="n">half_le_harmonic_double_sub_harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="o">{</span><span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_pos</span><span class="o">,</span> <span class="n">linarith</span><span class="o">}),</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_comm</span><span class="o">,</span> <span class="err">‚Üê</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">linarith</span><span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_trans</span> <span class="bp">_</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">),</span> <span class="k">by</span> <span class="o">{</span><span class="n">field_simp</span><span class="o">}),</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">harmonic_two_pow_ge_id_div_two&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="bp">‚â§</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">harmonic_two_pow_ge_id_div_two</span><span class="o">],</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">harmonic_tendsto_at_top</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">harmonic</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">))</span> <span class="n">at_top</span> <span class="n">at_top</span><span class="o">,</span> <span class="k">by</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">tendsto_at_top_of_monotone_of_subseq</span> <span class="n">mono_harmonic</span> <span class="n">this</span><span class="o">},</span>
  <span class="n">apply</span> <span class="n">tendsto_at_top_mono</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">harmonic_two_pow_ge_id_div_two&#39;</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">tendsto_at_top_div</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">tendsto_coe_nat_real_at_top_at_top</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201737057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201737057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201737057">(Jun 23 2020 at 14:58)</a>:</h4>
<p>If I recall correctly, the tutorial project has a lemma about subsequences that tend to infinity</p>



<a name="201741752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201741752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201741752">(Jun 23 2020 at 15:31)</a>:</h4>
<p>Seems like I remembered somewhat right, but they are in the opposite direction: <a href="https://github.com/leanprover-community/tutorials/blob/13efdfcc7879582710bb541c1b691d8e2b65fec9/src/solutions/09_limits_final.lean#L217">https://github.com/leanprover-community/tutorials/blob/13efdfcc7879582710bb541c1b691d8e2b65fec9/src/solutions/09_limits_final.lean#L217</a></p>



<a name="201743071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201743071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201743071">(Jun 23 2020 at 15:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201737057">said</a>:</p>
<blockquote>
<p>If I recall correctly, the tutorial project has a lemma about subsequences that tend to infinity</p>
</blockquote>
<p>Indeed, all these lemmas are easy to prove for the specific case of <code>N -&gt; R</code>with epsilon-delta limits (I did indeed prove everything in this tutorial since it is more or less the same content as the course I took  with Patrick Massot). But I wanted to use mathlib as much as possible to avoid unnecessary dependencies</p>



<a name="201743142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201743142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201743142">(Jun 23 2020 at 15:41)</a>:</h4>
<p>Indeed, everything in the tutorial is too specialized.</p>



<a name="201744931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201744931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201744931">(Jun 23 2020 at 15:54)</a>:</h4>
<p>I also need to find time to remove the mess in <a href="https://github.com/leanprover-community/tutorials/blob/13efdfcc7879582710bb541c1b691d8e2b65fec9/src/solutions/tuto_lib.lean">tuto_lib</a> now that Bolzano-Weirstrass is in mathlib.</p>



<a name="201745006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201745006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201745006">(Jun 23 2020 at 15:55)</a>:</h4>
<p>There is even more mess there that I remembered. I shouldn't draw attention to this file.</p>



<a name="201782296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/201782296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#201782296">(Jun 23 2020 at 20:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201692799">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201669486">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201652246">said</a>:</p>
<blockquote>
<p>I feel you can get a slightly slicker proof, avoiding all arguments by contradiction, by noting that <code>harmonic (2^n) \geq n/2</code> (you have proved this) and therefore <code>harmonic (2^n)</code> tends to infinity (as it is bounded below by a sequence tending to infinity -- I hope we have this!). And then, for a monotone sequence, having a subsequence tending to infinity implies convergence to infinity (I hope we have this also). But what you did is great!</p>
</blockquote>
<p>Well, I I'd be done if I had found those two lemmas... If they exist, they are well hidden. I'll continue to search tomorrow, and if they don't exist I'll prove them, it doesn't seem <em>that</em> difficult</p>
</blockquote>
<p>The first one is definitely there, it's <code>tendsto_at_top_mono</code>. I wouldn't bet on finding the second one.</p>
</blockquote>
<p>The fun thing is : I had seen this lemma. I just hadn't thought what I was searching was a certain function being monotonous</p>



<a name="202333551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202333551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202333551">(Jun 29 2020 at 16:21)</a>:</h4>
<p>Ok so I'm reviving this topic cause this will be my first ever commit to mathlib, and I'm a bit nervous <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> To sum up, I currently have the following lemmas (and their proofs, which I didn't wrote here for readability as I assume they'll be reviewed later anyway, but you can find them at <a href="https://gitlab.com/Someody42/harmonic">https://gitlab.com/Someody42/harmonic</a> ) : </p>
<div class="codehilite"><pre><span></span><code><span class="c1">--Patrick&#39;s lemmas</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_supr_of_bdd</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">conditionally_complete_linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">order_topology</span> <span class="n">Œ±</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">(</span><span class="n">h_mono</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hbdd</span> <span class="o">:</span> <span class="n">bdd_above</span> <span class="err">$</span> <span class="n">range</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="err">ùìù</span> <span class="o">(</span><span class="err">‚®Ü</span><span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_of_monotone</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">¬¨</span><span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="n">u</span><span class="o">))</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">u</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">unbounded_of_tensto_at_top</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œ±</span><span class="o">]</span>
  <span class="o">[</span><span class="n">preorder</span> <span class="n">Œ≤</span><span class="o">]</span> <span class="o">[</span><span class="n">no_top_order</span> <span class="n">Œ≤</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="n">at_top</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬¨</span> <span class="n">bdd_above</span> <span class="o">(</span><span class="n">range</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">tendsto_at_top_of_monotone_of_subseq</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">no_top_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span>
  <span class="o">{</span><span class="n">œÜ</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œπ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="n">u</span> <span class="err">‚àò</span> <span class="n">œÜ</span><span class="o">)</span> <span class="n">at_top</span> <span class="n">at_top</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">u</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">-- My lemmas</span>

<span class="kn">lemma</span> <span class="n">tendsto_either_of_monotone</span> <span class="o">{</span><span class="n">Œπ</span>  <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">Œπ</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup</span> <span class="n">Œπ</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">conditionally_complete_linear_order</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">order_topology</span> <span class="n">Œ±</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">(</span><span class="n">h_mono</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="bp">‚à®</span> <span class="o">(</span><span class="bp">‚àÉ</span> <span class="n">l</span><span class="o">,</span> <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="o">(</span><span class="err">ùìù</span> <span class="n">l</span><span class="o">))</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="n">harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="o">:=</span>
<span class="err">‚àë</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="bp">/</span><span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">succ</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">mono_harmonic</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">harmonic</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">half_le_harmonic_double_sub_harmonic</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="n">harmonic</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">harmonic_two_pow_ge_id_div_two</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">‚â§</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">harmonic_two_pow_ge_id_div_two&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="bp">‚â§</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="n">harmonic</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span><span class="o">))</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">theorem</span> <span class="n">harmonic_tendsto_at_top</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">harmonic</span> <span class="n">at_top</span> <span class="n">at_top</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>My questions are :</p>
<ul>
<li>Do all of these lemmas have their place in mathlib ?</li>
<li>I was thinking of putting the "generic" ones in <code>topology/order.lean</code> as Patrick advised for the first two, do they all fit there ?</li>
<li>Maybe there could be a better name than <code>tendsto_either_of_monotone</code> ?</li>
<li>Where should I put the <code>harmonic</code> stuff ? I was thinking of <code>analysis/specific_limits</code> but maybe not all of the intermediary lemmas fit here ?</li>
<li>Should I make two separates PR, one for generic lemmas and the other for harmonic series ?</li>
<li>Do I need to write some doc ?</li>
</ul>
<p>Thanks in advance ! Sorry for asking so many things, I want to do things right <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="202334433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334433">(Jun 29 2020 at 16:26)</a>:</h4>
<p>Q1: yes</p>



<a name="202334583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334583">(Jun 29 2020 at 16:27)</a>:</h4>
<p>Please don't write <code>i.succ</code>. For <code>simp</code> it's a lot better if you use <code>i+1</code>.</p>



<a name="202334616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334616">(Jun 29 2020 at 16:27)</a>:</h4>
<p>Oh okay</p>



<a name="202334664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334664">(Jun 29 2020 at 16:27)</a>:</h4>
<p>If it's &lt; 100 lines, put everything in 1 PR. Otherwise splitting makes sense.</p>



<a name="202334750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334750">(Jun 29 2020 at 16:28)</a>:</h4>
<blockquote>
<p>Do I need to write some doc ?</p>
</blockquote>
<p>Definitions need docstrings. Otherwise, this won't need to many docs.</p>



<a name="202334844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202334844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202334844">(Jun 29 2020 at 16:29)</a>:</h4>
<p>I would rename <code>harmonic</code> to <code>harmonic_series</code>, I think. But it's a minor point.</p>



<a name="202335225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335225">(Jun 29 2020 at 16:31)</a>:</h4>
<p><span class="user-mention" data-user-id="268315">@Anatole Dedecker</span> Let me know if you want guidance on the <code>git</code> side of creating a PR.</p>



<a name="202335423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335423">(Jun 29 2020 at 16:33)</a>:</h4>
<p>Put in <code>topology/order.lean</code> only things that involve a topology.</p>



<a name="202335519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335519">(Jun 29 2020 at 16:33)</a>:</h4>
<p>The other ones can go in the file defining  <code>at_top</code>.</p>



<a name="202335636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335636">(Jun 29 2020 at 16:34)</a>:</h4>
<p><code>unbounded_of_tensto_at_top</code> misses a "d"</p>



<a name="202335723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335723">(Jun 29 2020 at 16:35)</a>:</h4>
<p>maybe <code>tendsto_of_monotone</code> is enough for <code>tendsto_either_of_monotone</code>.</p>



<a name="202335822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335822">(Jun 29 2020 at 16:36)</a>:</h4>
<p>Why did you put a prime at <code>harmonic_tendsto_at_top'</code>?</p>



<a name="202335878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335878">(Jun 29 2020 at 16:36)</a>:</h4>
<p>That's a mistake</p>



<a name="202335929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202335929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202335929">(Jun 29 2020 at 16:36)</a>:</h4>
<p>It's because I kept other versions of the proof in the same file</p>



<a name="202336314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202336314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202336314">(Jun 29 2020 at 16:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/202335225">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> Let me know if you want guidance on the <code>git</code> side of creating a PR.</p>
</blockquote>
<p>Patrick gave me write access to non-master branch, so if I understand well I just have to follow the steps here : <a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a> ?</p>



<a name="202336621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202336621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202336621">(Jun 29 2020 at 16:42)</a>:</h4>
<p>Yup, that sounds good</p>



<a name="202336939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202336939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202336939">(Jun 29 2020 at 16:44)</a>:</h4>
<p>Can I make the two PRs without creating two local branches ?</p>



<a name="202337005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202337005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202337005">(Jun 29 2020 at 16:45)</a>:</h4>
<p>Nope</p>



<a name="202337041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202337041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202337041">(Jun 29 2020 at 16:45)</a>:</h4>
<p>So create a big PR</p>



<a name="202337122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202337122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202337122">(Jun 29 2020 at 16:46)</a>:</h4>
<p>Okay</p>



<a name="202337159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202337159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202337159">(Jun 29 2020 at 16:46)</a>:</h4>
<p>And then you can do</p>
<div class="codehilite"><pre><span></span><code>git checkout -b harmonic-preparations
git checkout harmonic-main-branch -- src/topology/foobar.lean
...
git commit -am <span class="s2">&quot;feat(*): preparations for divergence of harmonic series&quot;</span>
git push
<span class="c1"># create another PR</span>
</code></pre></div>



<a name="202337190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202337190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202337190">(Jun 29 2020 at 16:47)</a>:</h4>
<p>If you want to create a smaller first PR</p>



<a name="202340077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202340077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202340077">(Jun 29 2020 at 17:08)</a>:</h4>
<p>Is there any logic in the way we order things in a file ?</p>



<a name="202341005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202341005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202341005">(Jun 29 2020 at 17:15)</a>:</h4>
<p>First come first serve?</p>



<a name="202341125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202341125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202341125">(Jun 29 2020 at 17:15)</a>:</h4>
<p>But we try to put things that belong together close together</p>



<a name="202341168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202341168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202341168">(Jun 29 2020 at 17:15)</a>:</h4>
<p>And sometimes we turn a file upside down and inside out, when it becomes too messy.</p>



<a name="202341308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202341308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202341308">(Jun 29 2020 at 17:16)</a>:</h4>
<p>Some files have module docs like: <code>/-! ### lemmas about foo -/</code> that group related lemmas together.</p>



<a name="202341750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202341750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202341750">(Jun 29 2020 at 17:20)</a>:</h4>
<p>Oh just realised I meant <code>topology/algebra/ordered</code> not <code>topology/order</code></p>



<a name="202346445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202346445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202346445">(Jun 29 2020 at 17:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/202341308">said</a>:</p>
<blockquote>
<p>Some files have module docs like: <code>/-! ### lemmas about foo -/</code> that group related lemmas together.</p>
</blockquote>
<p>Note that you new line breaks before and after the title.</p>



<a name="202347682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202347682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202347682">(Jun 29 2020 at 18:09)</a>:</h4>
<p>Yes, that's recommended. Although if everything fits on one line then it's strictly not necessary.</p>



<a name="202370158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202370158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202370158">(Jun 29 2020 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/202337159">said</a>:</p>
<blockquote>
<p>And then you can do</p>
<div class="codehilite"><pre><span></span><code>git checkout -b harmonic-preparations
git checkout harmonic-main-branch -- src/topology/foobar.lean
...
git commit -am <span class="s2">&quot;feat(*): preparations for divergence of harmonic series&quot;</span>
git push
<span class="c1"># create another PR</span>
</code></pre></div>


</blockquote>
<p>Hmmmmm I think I misunderstood something here <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> In which order was I supposed to do the operations ?</p>



<a name="202370494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202370494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202370494">(Jun 29 2020 at 21:30)</a>:</h4>
<p>I mean : should I do all modifications first and then checkout ? Or just the modifications I want to put in the first PR ?</p>



<a name="202370808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202370808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202370808">(Jun 29 2020 at 21:33)</a>:</h4>
<p>Johan is complicating things, one PR will be fine.</p>



<a name="202483900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202483900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202483900">(Jun 30 2020 at 19:33)</a>:</h4>
<p>Just to be sure : is there any part of Mathlib dedicated to series ? <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> mentioned <code>topology.algebra.infinite_sums</code> but that doesn't seem to be what I'm searching for.</p>



<a name="202484763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202484763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202484763">(Jun 30 2020 at 19:40)</a>:</h4>
<p>The natural place in mathlib would probably be <code>analysis/specific_limits</code>.</p>



<a name="202485123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202485123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202485123">(Jun 30 2020 at 19:43)</a>:</h4>
<p>Oh yeah, but at the moment is there anything done ? Because <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> suggested me to extend the result to p-series by proving Cauchy Condensation Test, and I didn't know if there were any infrastructure I should base on top of</p>



<a name="202485273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202485273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202485273">(Jun 30 2020 at 19:44)</a>:</h4>
<p>I don't think there is anything else specifically on series. It might be time to start a new file in this direction.</p>



<a name="202500397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202500397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202500397">(Jun 30 2020 at 21:56)</a>:</h4>
<p>Yes, this was discussed before. We have <a href="https://leanprover-community.github.io/mathlib_docs/topology/algebra/infinite_sum.html">many things</a> about sumable families of elements of a topological additive monoid, but nothing about series. Of course we can already write partial sums and speak about their limits, but I think we need a dedicated set of lemmas, including convergence criteria (there are many more common criteria than Cauchy condensation).</p>



<a name="202500752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202500752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202500752">(Jun 30 2020 at 22:00)</a>:</h4>
<p>One slightly painful question is whether we should impose the source type. It is tempting to use series whose general term is indexed by natural numbers, but sometimes it's much more natural to have something slightly smaller or bigger. I would say any source type that has a reasonable <code>at_top</code> filter should be supported. Also convergence should probably be expressed for an arbitrary filter on the target, but then we run into the issue that we want to call diverging a series which converges to <code>at_top</code> on the target...</p>



<a name="202506563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202506563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202506563">(Jun 30 2020 at 23:12)</a>:</h4>
<p>Hmmmm not sure about being well placed to make these design choices then. But if someone wants to setup basic definitions, I think I'll be able to prove a decent amount of things</p>



<a name="202507156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Harmonic%20Series%20Divergence/near/202507156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Harmonic.20Series.20Divergence.html#202507156">(Jun 30 2020 at 23:20)</a>:</h4>
<p>Sure, I wasn't writing this specifically for you. I hope that S√©bastien and Yury will comment on this (we should probably move this to the math stream) and then we can write the definitions and let everybody contribute lemmas.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>