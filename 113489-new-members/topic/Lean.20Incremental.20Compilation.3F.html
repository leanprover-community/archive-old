---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html">Lean Incremental Compilation?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236555543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/236555543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#236555543">(Apr 28 2021 at 18:27)</a>:</h4>
<p>Hi, I'm currently parsing output from a lean file just by calling lean in a loop. We can't compile all of the files involved and it goes very slowly. We've been trying to figure out what the plugin is doing and it looks like it's using lean's --server option, for which there is limited but some documentation. I think mainly all we need is incremental compilation. I just wanted to check for those familiar if indeed implementing a client for the server mode is indeed the right rabbit hole to go down.</p>



<a name="236557832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/236557832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#236557832">(Apr 28 2021 at 18:43)</a>:</h4>
<p>I assume your loop that calls into lean is also modifying the files?</p>



<a name="236559746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/236559746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#236559746">(Apr 28 2021 at 18:56)</a>:</h4>
<p>Usually yes. Although right now I'm just printing off the file from scratch every turn, but eventually yes, should only change one or perhaps a few lines every iteration</p>



<a name="236606570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/236606570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#236606570">(Apr 29 2021 at 01:44)</a>:</h4>
<p>First, make sure you are not starting up the server every time, (although if you keep it running but work with different files, you might have memory leaks).  However, even if you leave the server open every sync will take 200ms, so you can’t do better than that really.  It is a hard coded delay in the code.</p>



<a name="236606909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/236606909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#236606909">(Apr 29 2021 at 01:48)</a>:</h4>
<p>You can compile an individual file with <code>lean —make</code>.  It will also compile the dependencies if they are not already compiled, but if you know what the dependencies are and they don’t change, that will speed things up.</p>



<a name="237670906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20Incremental%20Compilation%3F/near/237670906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Elsey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F.html#237670906">(May 06 2021 at 14:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="115715">Jason Rute</span> <a href="#narrow/stream/113489-new-members/topic/Lean.20Incremental.20Compilation.3F/near/236606570">said</a>:</p>
<blockquote>
<p>First, make sure you are not starting up the server every time, (although if you keep it running but work with different files, you might have memory leaks).  However, even if you leave the server open every sync will take 200ms, so you can’t do better than that really.  It is a hard coded delay in the code.</p>
</blockquote>
<p>Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>