---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Explaining.20noncomputable.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html">Explaining noncomputable</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289351223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351223">(Jul 12 2022 at 16:32)</a>:</h4>
<p>I noticed that a couple of Lean defs have the tag noncomputable, and recently Lean has given me a warning that my def needs the noncomputable tag because it depends on a noncomputable def. Can you explain what is meant by noncomputable? I noticed, for example, real.has_pow is noncomputable. Is that because Lean can't calculate the expression like e^e the same as it could calculate 2^2 = 4?</p>



<a name="289351468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351468">(Jul 12 2022 at 16:34)</a>:</h4>
<p>It means that it is not computable even if in principle, for example because something depends on the axiom of choice</p>



<a name="289351532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351532">(Jul 12 2022 at 16:35)</a>:</h4>
<p>The definition of real numbers as equivalence classes of something for example is not computable (I think)</p>



<a name="289351546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351546">(Jul 12 2022 at 16:35)</a>:</h4>
<p>What does "calculate the expression e^e" mean?</p>



<a name="289351574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351574">(Jul 12 2022 at 16:35)</a>:</h4>
<p>So there is no algorithm to say if s given real number is equal to zero</p>



<a name="289351773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351773">(Jul 12 2022 at 16:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Explaining.20noncomputable/near/289351546">said</a>:</p>
<blockquote>
<p>What does "calculate the expression e^e" mean?</p>
</blockquote>
<p>I meant, as an example, you can say in Lean</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</code></pre></div>
<p>but there is no way of saying</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">real.exp</span> <span class="mi">1</span><span class="o">)</span><span class="bp">^</span><span class="o">(</span><span class="n">real.exp</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">?</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</code></pre></div>



<a name="289351829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351829">(Jul 12 2022 at 16:37)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/real.has_pow">docs#real.has_pow</a></p>



<a name="289351903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289351903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289351903">(Jul 12 2022 at 16:37)</a>:</h4>
<p>Apparently it's <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.cpow">docs#complex.cpow</a> (which underlies <a href="https://leanprover-community.github.io/mathlib_docs/find/real.has_pow">docs#real.has_pow</a>) that invokes decidability of equality.</p>



<a name="289352108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289352108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289352108">(Jul 12 2022 at 16:39)</a>:</h4>
<p>I guess you can see that it must be noncomputable because 0^0=1 and 0^y=0 if y isn't 0, so the even the function 0^x isn't computable.</p>



<a name="289352592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289352592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289352592">(Jul 12 2022 at 16:42)</a>:</h4>
<p>The difference is that in <code>2+2 = 4</code> (as natural numbers) you can unfold everything and then you see that both sides become <code>succ succ succ succ 0</code>. For reals you can not just do that. <code>norm_num</code> is a smart tactic, so sometimes it can prove stuff even if they're not computable I think (using <code>simp</code>)</p>



<a name="289352700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289352700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289352700">(Jul 12 2022 at 16:42)</a>:</h4>
<p>But <code>2+2=4</code> can be also proved by <code>refl</code>, unfolding the definitions</p>



<a name="289352709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289352709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289352709">(Jul 12 2022 at 16:42)</a>:</h4>
<p>Yea, I was running into problems where norm_num just returned false, which made sense due to the type casting. Does noncomputable make the math any different, or is it more just a tag that Lean needs?</p>



<a name="289352815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289352815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289352815">(Jul 12 2022 at 16:43)</a>:</h4>
<p>If you add <code>noncomputable theory </code>at the beginning the math becomes more "standard"</p>



<a name="289353001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353001">(Jul 12 2022 at 16:45)</a>:</h4>
<p>Ok, I will give that a try, thank you!</p>



<a name="289353047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353047">(Jul 12 2022 at 16:45)</a>:</h4>
<p><code>noncomputable</code> is a way that Lean keeps track of which definitions should be compiled (by the VM compiler) into a more efficient representation (for the VM). You should more or less only care about whether or not a definition is <code>noncomputable</code> if you care about evaluating it using <code>#eval</code> or evaluating it from within the implementation of some tactic.</p>



<a name="289353105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353105">(Jul 12 2022 at 16:46)</a>:</h4>
<p>In mathlib it's useful to try to be computable when possibile to prove stupid stuff. For example I once spent literally hours proving that the finite set <code>{1, 3, 5, 15}</code> has four elements and then someone told me <code>refl</code> can do it. It can because everything is computable so we can say to Lean "just look"</p>



<a name="289353172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353172">(Jul 12 2022 at 16:46)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> That example's not the same kind of computability as what <code>noncomputable</code> is about</p>



<a name="289353282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353282">(Jul 12 2022 at 16:47)</a>:</h4>
<p>Ops, I am sorry</p>



<a name="289353442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353442">(Jul 12 2022 at 16:48)</a>:</h4>
<p>There are at least three ways Lean can compute something, I think. One is the elaborator doing expression reduction (which honors things like the <code>reducible</code>/<code>semireducible</code>/<code>irreducible</code> attributes), another is the Lean kernel itself doing expression reduction (which doesn't honor these -- everything is essentially <code>reducible</code> I believe), and the third is the VM after VM compilation (which is not guaranteed to evaluate things correctly, but it sure tries)</p>



<a name="289353502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353502">(Jul 12 2022 at 16:48)</a>:</h4>
<p>Oh sure, this about decidability! I must be still jetlagged</p>



<a name="289353805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353805">(Jul 12 2022 at 16:51)</a>:</h4>
<p>(My understanding is that the original Lean evaluator was just the expression reducer, and <code>noncomputable</code> was used to keep track of which definitions could actually reduce all the way. From what I remember, one of the reasons for the VM besides speed is that it gets around the fact that <code>eq.rec</code> terms don't always reduce.)</p>



<a name="289353942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289353942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289353942">(Jul 12 2022 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="474115">@Max Bobbin</span> in any case you can safely ignore this warning if you want to do standard mathematics</p>



<a name="289354009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289354009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289354009">(Jul 12 2022 at 16:53)</a>:</h4>
<p>Oh right, and a fourth type of "evaluation" is <code>decidable</code> via <code>dec_trivial</code>, where you use the typeclass system to search for a proof using whatever instances happen to lie around.</p>



<a name="289354025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289354025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Bobbin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289354025">(Jul 12 2022 at 16:53)</a>:</h4>
<p>Ok, cool. Thank you. This is helpful, I think my problems are more type casting related then. I just wanted to make sure noncomputable wasn't the problem</p>



<a name="289354289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Explaining%20noncomputable/near/289354289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Explaining.20noncomputable.html#289354289">(Jul 12 2022 at 16:55)</a>:</h4>
<p>I guess a fifth type is <code>norm_num</code> (and <code>simp</code>) which pretty much doesn't care about whether something is <code>noncomputable</code> since it just operates on the terms themselves and applies rules ("<code>norm_num</code> plugins"). It evaluates terms more in the Mathematica or Sage sense, symbolically.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>