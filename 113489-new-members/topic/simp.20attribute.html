---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/simp.20attribute.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/simp.20attribute.html">simp attribute</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273768165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/simp%20attribute/near/273768165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/simp.20attribute.html#273768165">(Mar 02 2022 at 07:56)</a>:</h4>
<p>Dear All,</p>
<p>this question is mostly for my own education about <code>simp</code>.</p>
<p>With my very limited understanding of how <code>simp</code> works, I would have thought that the lemma below would not fire with <code>simp</code>, due to the hypothesis <code>h</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span>
<span class="kd">lemma</span> <span class="n">to_nat_pred_coe_of_pos</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">i.to_nat</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">i</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
</code></pre></div>
<p><del>I tried proving this lemma using <code>by simp [h]</code> and I could not get it to work.</del><br>
Proving this lemma using <code>by simp [h]</code> works, but <code>by simp</code> does not.</p>
<p>However, the <code>simp</code> attribute is in <a href="https://github.com/leanprover-community/mathlib/blob/fefe359d48630c94826dfc387b17602518156a55/src/data/int/basic.lean#L1194">data.int.basic</a>.</p>
<p>What is the <code>simp</code> attribute doing in this case?</p>
<p>Thanks!</p>



<a name="273769091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/simp%20attribute/near/273769091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/simp.20attribute.html#273769091">(Mar 02 2022 at 08:04)</a>:</h4>
<p>It means that <code>simp</code> will try to use the lemma <code>to_nat_pred_coe_of_pos</code>. But it can only use if after it knows how to prove <code>h</code>. So you either pass it <code>h</code> directly, like you did. Or you hope that other simp lemmas can provide a proof of <code>h</code>, recursively. The latter will be unlikely for a generic <code>0 &lt; i</code> proof. But if <code>i = 1</code>, then it will probably work.</p>



<a name="273769353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/simp%20attribute/near/273769353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/simp.20attribute.html#273769353">(Mar 02 2022 at 08:07)</a>:</h4>
<p>Ah, thanks for the explanation!  I had not realized about the specific number case!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>