---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html">failed to instantiate goal</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="244118787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244118787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244118787">(Jun 28 2021 at 09:10)</a>:</h4>
<p>what does this error mean?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">instantiate</span> <span class="n">goal</span> <span class="k">with</span> <span class="n">function.embedding.mk</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="mi">4</span><span class="bp">.</span><span class="n">_.10</span><span class="o">),</span> <span class="o">(</span><span class="n">dite</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mem.mem</span><span class="o">)</span> <span class="n">x</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">frozen_name</span> <span class="n">has_mem.mem</span><span class="o">)</span> <span class="n">x</span> <span class="n">a</span><span class="o">),</span> <span class="o">(</span><span class="n">b.to_fun</span> <span class="o">(</span><span class="n">subtype.mk</span> <span class="n">x</span> <span class="n">h</span><span class="o">)))</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">not</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mem.mem</span><span class="o">)</span> <span class="n">x</span> <span class="n">a</span><span class="o">)),</span> <span class="o">(</span><span class="n">dite</span> <span class="o">(</span><span class="n">nonempty</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">a</span><span class="o">),</span> <span class="o">(</span><span class="n">a.max'</span> <span class="n">h</span><span class="o">))</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">not</span> <span class="o">(</span><span class="n">nonempty</span> <span class="n">a</span><span class="o">)),</span> <span class="n">x</span><span class="o">)))))</span>
</code></pre></div>
<p>this is the proof that i got</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">goal_injective</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">↪</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">↪</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">set.restrict</span> <span class="n">h</span> <span class="n">S</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">finset.set_of_mem.symm</span><span class="o">,</span> <span class="n">set.set_coe_eq_subtype</span><span class="o">]</span> <span class="n">at</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">function.embedding.mk</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">a</span> <span class="k">then</span> <span class="n">b.to_fun</span> <span class="o">(</span><span class="n">subtype.mk</span> <span class="n">x</span> <span class="n">h</span><span class="o">)</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">a</span> <span class="k">then</span> <span class="n">a.max'</span> <span class="n">h</span> <span class="k">else</span> <span class="n">x</span><span class="o">),</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>here is the room numbering scheme that i'm trying to implement: if the set of VIP people is empty then the room number is equal to the person number. otherwise, if the person is VIP then the room number is retrieved from the <code>↥(↑S : set ℕ) ↪ ℕ</code> bundle. if the person is not VIP then the room number is equal to the max room number that is assigned to a VIP person, plus 1, plus that person's number.</p>



<a name="244118999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244118999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244118999">(Jun 28 2021 at 09:12)</a>:</h4>
<p>If you break this up a bit and try</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">let</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">function.embedding.mk</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">a</span> <span class="k">then</span> <span class="n">b.to_fun</span> <span class="o">(</span><span class="n">subtype.mk</span> <span class="n">x</span> <span class="n">h</span><span class="o">)</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">a</span> <span class="k">then</span> <span class="n">a.max'</span> <span class="n">h</span> <span class="k">else</span> <span class="n">x</span><span class="o">),</span>
</code></pre></div>
<p>then you can see your error, this term doesn't quite typecheck.</p>



<a name="244119403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244119403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244119403">(Jun 28 2021 at 09:16)</a>:</h4>
<p>I don't know why the error <code>use</code> gives is so obfuscated; somehow the term has been partially translated into some more primitive form before stuff bombs out. If you look at the code which defines <code>use</code> (e.g. by right clicking on it) you might be able to work out what's going on better than I can!</p>



<a name="244119567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244119567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244119567">(Jun 28 2021 at 09:18)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#use">tactic#use</a> and <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#show">tactic#show</a> are two tactics that I almost never use because their error messages are useless. Instead there is <code>refine \&lt;something, _\&gt;</code> or <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#change">tactic#change</a></p>



<a name="244119639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244119639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244119639">(Jun 28 2021 at 09:19)</a>:</h4>
<p><code>use</code> is absolutely great for beginners though, and I use <code>show</code> a lot in my teaching when Lean decides to obfuscate the goal for whatever reason and I use <code>show</code> to tidy it up before the <code>sorry</code> that the students then have to deal with.</p>



<a name="244119977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244119977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244119977">(Jun 28 2021 at 09:23)</a>:</h4>
<p>Sure, <code>refine \&lt;something, _\&gt;</code> is a bit more complicated, but the basic use of <code>change</code> is exactly the same as <code>show</code> except the error <code>change</code> reports is not just literally <code>show tactic failed</code></p>



<a name="244120225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/244120225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#244120225">(Jun 28 2021 at 09:25)</a>:</h4>
<p>(I just remembered <code>show</code> has a secondary use where you can choose which goal to work on. Still the basic purpose of <code>show</code> and <code>change</code> is identical.)</p>



<a name="282189150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282189150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282189150">(May 13 2022 at 00:31)</a>:</h4>
<p>I am getting an error <code>failed to instantiate goal with polynomial K</code> after <code>use polynomial K</code> when my goal is <code>∃ (X : (Algebra K)ᵒᵖ) (f : coyoneda.obj X ⟶ forget (Algebra K)), is_iso f</code>. Why could this be? The file is below</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">category_theory.types</span>
<span class="kn">import</span> <span class="n">algebra.category.Algebra.basic</span>
<span class="kn">import</span> <span class="n">algebra.category.Group.basic</span>
<span class="kn">import</span> <span class="n">data.polynomial.basic</span>

<span class="n">open_locale</span> <span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">category_theory</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">class</span> <span class="n">affine_scheme</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">scheme</span> <span class="o">:</span> <span class="n">Algebra</span> <span class="n">K</span> <span class="bp">⥤</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">(</span><span class="n">corepresentable</span> <span class="o">:</span> <span class="n">scheme.corepresentable</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">affine_group_scheme</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">scheme</span> <span class="o">:</span> <span class="n">Algebra</span> <span class="n">K</span> <span class="bp">⥤</span> <span class="n">Group</span><span class="o">)</span>
<span class="o">(</span><span class="n">corepresentable</span> <span class="o">:</span> <span class="o">(</span><span class="n">scheme</span> <span class="bp">⋙</span> <span class="n">forget</span> <span class="n">Group</span><span class="o">)</span><span class="bp">.</span><span class="n">corepresentable</span><span class="o">)</span>

<span class="c1">-- DEFINING G_a</span>
<span class="kd">instance</span> <span class="n">G_a</span> <span class="o">:</span> <span class="n">affine_scheme</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">scheme</span> <span class="o">:=</span> <span class="n">forget</span> <span class="o">(</span><span class="n">Algebra</span> <span class="n">K</span><span class="o">),</span>
  <span class="n">corepresentable</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">refine</span> <span class="o">{</span><span class="n">has_corepresentation</span> <span class="o">:=</span> <span class="n">_</span><span class="o">},</span>
    <span class="n">use</span> <span class="n">polynomial</span> <span class="n">K</span><span class="o">,</span> <span class="c1">-- failed to instantiate goal with polynomial K</span>
  <span class="kd">end</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="282208508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282208508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282208508">(May 13 2022 at 06:37)</a>:</h4>
<p>I would guess you need to use <a href="https://leanprover-community.github.io/mathlib_docs/find/Algebra.of">docs#Algebra.of</a></p>



<a name="282209108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282209108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282209108">(May 13 2022 at 06:46)</a>:</h4>
<p>If you want to see what <code>use</code> exists you can always try <code>refine \&lt;_, _\&gt;</code></p>



<a name="282341623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341623">(May 14 2022 at 08:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  I do not understand what <code>refine \&lt;_, _\&gt;</code> does. It splits goal <code>⊢ ∃ (X : (Algebra K)ᵒᵖ), Exists is_iso</code> into <code>⊢ (Algebra K)ᵒᵖ</code> and <code>⊢ Exists is_iso</code>. But I don't understand what it means to prove <code>⊢ (Algebra K)ᵒᵖ</code>.</p>



<a name="282341661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341661">(May 14 2022 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> , this is a good suggestion but it did not work for me. I'm getting <code>failed to instantiate goal with Algebra.of K ((frozen_name polynomial) K)</code> error.</p>



<a name="282341678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341678">(May 14 2022 at 08:48)</a>:</h4>
<p>It means you have to give an element of <code>Algebra K^op</code>, which is as per <a href="https://leanprover-community.github.io/mathlib_docs/algebra/category/Algebra/basic.html#Algebra">https://leanprover-community.github.io/mathlib_docs/algebra/category/Algebra/basic.html#Algebra</a> a triple of a Type a ring structure and an algebra structure.</p>



<a name="282341686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341686">(May 14 2022 at 08:49)</a>:</h4>
<p>Alex, I think your parens are missing there</p>



<a name="282341690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341690">(May 14 2022 at 08:49)</a>:</h4>
<p>Sure, its also not unicode</p>



<a name="282341742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341742">(May 14 2022 at 08:50)</a>:</h4>
<p>But this does not work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">G_a</span> <span class="o">:</span> <span class="n">affine_scheme</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">scheme</span> <span class="o">:=</span> <span class="n">forget</span> <span class="o">(</span><span class="n">Algebra</span> <span class="n">K</span><span class="o">),</span>
  <span class="n">corepresentable</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">refine</span> <span class="o">{</span><span class="n">has_corepresentation</span> <span class="o">:=</span> <span class="n">_</span><span class="o">},</span>
    <span class="n">simp</span> <span class="n">only</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">],</span>
      <span class="n">refine</span> <span class="n">ring_hom.to_algebra</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">C</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="n">refine</span> <span class="n">opposite.op</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">Algebra.of</span> <span class="n">K</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="c1">-- failed to instantiate goal with Algebra.of K ((frozen_name polynomial) K)</span>

  <span class="kd">end</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="282341756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341756">(May 14 2022 at 08:50)</a>:</h4>
<p>Can you change that use to a refine?</p>



<a name="282341761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341761">(May 14 2022 at 08:50)</a>:</h4>
<p>You'll get a better error message</p>



<a name="282341767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341767">(May 14 2022 at 08:51)</a>:</h4>
<p>Or <code>existsi </code> instead of <code>use</code></p>



<a name="282341772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341772">(May 14 2022 at 08:51)</a>:</h4>
<p>It's not even an existential at that point</p>



<a name="282341774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341774">(May 14 2022 at 08:51)</a>:</h4>
<p>Error: <code>failed to synthesize type class instance for K : Type u_1,
_inst_1 : comm_ring K,
this : algebra K K[X]
⊢ algebra K K[X]</code></p>



<a name="282341824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341824">(May 14 2022 at 08:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/failed.20to.20instantiate.20goal/near/282341772">said</a>:</p>
<blockquote>
<p>It's not even an existential at that point</p>
</blockquote>
<p>I'm confused why we are using use instead of exact then?</p>



<a name="282341837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341837">(May 14 2022 at 08:52)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#use">tactic#use</a> tries to be clever</p>



<a name="282341838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341838">(May 14 2022 at 08:52)</a>:</h4>
<p>Actually, this also errors: <code>#check Algebra.of K K[X]</code>. Not sure what's going on</p>



<a name="282341848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341848">(May 14 2022 at 08:53)</a>:</h4>
<p>Do you have <code>data.polynomial.algebra_map</code> imported?</p>



<a name="282341900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341900">(May 14 2022 at 08:54)</a>:</h4>
<p>You need to have <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.algebra_of_algebra">docs#polynomial.algebra_of_algebra</a> imported</p>



<a name="282341909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341909">(May 14 2022 at 08:55)</a>:</h4>
<p>I did not. I thought it would be part of polyonmial.basic. Now <code>#check Algebra.of K K[X]</code> works. But the proof still does not</p>



<a name="282341914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341914">(May 14 2022 at 08:55)</a>:</h4>
<p>I am not getting an error any more though</p>



<a name="282341958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341958">(May 14 2022 at 08:56)</a>:</h4>
<p>Surely if the proof doesn't work, then you're still getting an error?</p>



<a name="282341968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341968">(May 14 2022 at 08:56)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">G_a</span> <span class="o">:</span> <span class="n">affine_scheme</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">scheme</span> <span class="o">:=</span> <span class="n">forget</span> <span class="o">(</span><span class="n">Algebra</span> <span class="n">K</span><span class="o">),</span>
  <span class="n">corepresentable</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">refine</span> <span class="o">{</span><span class="n">has_corepresentation</span> <span class="o">:=</span> <span class="n">_</span><span class="o">},</span>
    <span class="n">simp</span> <span class="n">only</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">K</span> <span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">],</span>
      <span class="n">refine</span> <span class="n">ring_hom.to_algebra</span> <span class="n">_</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">C</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="n">refine</span> <span class="n">opposite.op</span> <span class="n">_</span><span class="o">,</span> <span class="c1">-- ⊢ Algebra K</span>
    <span class="n">refine</span> <span class="n">Algebra.of</span> <span class="n">K</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="c1">-- ⊢ Algebra K</span>
  <span class="kd">end</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="282341975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341975">(May 14 2022 at 08:56)</a>:</h4>
<p>Add a comma</p>



<a name="282341976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341976">(May 14 2022 at 08:56)</a>:</h4>
<p>This is what I have. I give it a K-algebra but it doesn't wanna take it</p>



<a name="282341981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341981">(May 14 2022 at 08:57)</a>:</h4>
<p>You're not done, you have another goal to prove</p>



<a name="282341983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282341983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282341983">(May 14 2022 at 08:57)</a>:</h4>
<p>Well, that worked</p>



<a name="282342209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282342209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vasily Ilin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282342209">(May 14 2022 at 09:01)</a>:</h4>
<p>What does the goal <code>⊢ Exists is_iso</code> mean? Mathematically, I need to prove the isomorphism Hom(K[X], A) = abelian group of A. But I don't understand how this goal expresses that</p>



<a name="282342276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20instantiate%20goal/near/282342276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20instantiate.20goal.html#282342276">(May 14 2022 at 09:03)</a>:</h4>
<p>The goal state after</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- DEFINING G_a</span>
<span class="kd">instance</span> <span class="n">G_a</span> <span class="o">:</span> <span class="n">affine_scheme</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">scheme</span> <span class="o">:=</span> <span class="n">forget</span> <span class="o">(</span><span class="n">Algebra</span> <span class="n">K</span><span class="o">),</span>
  <span class="n">corepresentable</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">refine</span> <span class="o">{</span><span class="n">has_corepresentation</span> <span class="o">:=</span> <span class="n">_</span><span class="o">},</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">opposite.op</span> <span class="o">(</span><span class="n">Algebra.of</span> <span class="n">K</span> <span class="o">(</span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])),</span> <span class="n">_</span><span class="o">⟩,</span>

  <span class="kd">end</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>
<p>might be more clear</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>