---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html">Updating some proofs to new mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="267289401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267289401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267289401">(Jan 08 2022 at 10:44)</a>:</h4>
<p>I tried to PR the following four lemmas, but mathlib has changed and they no longer work. Could someone help me fix the broken ones? </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">ring_equiv.subsemiring_equiv_map</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃+*</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">subsemiring</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">R</span> <span class="bp">≃+*</span> <span class="n">R.map</span> <span class="n">e.to_ring_hom</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span><span class="n">e.to_add_equiv.add_submonoid_equiv_map</span> <span class="n">R.to_add_submonoid</span><span class="o">,</span>
  <span class="bp">..</span><span class="n">e.to_mul_equiv.submonoid_equiv_map</span> <span class="n">R.to_submonoid</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">ring_equiv.subring_equiv_map</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">ring</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃+*</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">R</span> <span class="bp">≃+*</span> <span class="n">R.map</span> <span class="n">e.to_ring_hom</span> <span class="o">:=</span>
<span class="n">e.subsemiring_equiv_map</span> <span class="n">R.to_subsemiring</span>

<span class="kd">def</span> <span class="n">alg_equiv.subalgebra_equiv_map</span> <span class="o">{</span><span class="n">R</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">S</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">S.map</span> <span class="n">e.to_alg_hom</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">commutes'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="bp">..</span><span class="n">e.to_ring_equiv.subsemiring_equiv_map</span> <span class="n">S.to_subsemiring</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">alg_equiv.intermediate_field_equiv_map</span> <span class="o">{</span><span class="n">K</span> <span class="n">L</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">intermediate_field</span> <span class="n">K</span> <span class="n">L</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">E</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">E.map</span> <span class="n">e.to_alg_hom</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">e.subalgebra_equiv_map</span> <span class="n">E.to_subalgebra</span>
</code></pre></div>
<p>The first and third one don't work anymore, and I haven't been able to find a fix</p>



<a name="267289413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267289413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267289413">(Jan 08 2022 at 10:45)</a>:</h4>
<p>Can you make a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ?</p>



<a name="267289925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267289925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267289925">(Jan 08 2022 at 10:59)</a>:</h4>
<p>Ah sorry, my bad</p>



<a name="267289929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267289929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267289929">(Jan 08 2022 at 10:59)</a>:</h4>
<p>Will do in a few minutes</p>



<a name="267290376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267290376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267290376">(Jan 08 2022 at 11:09)</a>:</h4>
<p>Here it is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.galois</span>

<span class="kd">def</span> <span class="n">ring_equiv.subsemiring_equiv_map</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃+*</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">subsemiring</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">R</span> <span class="bp">≃+*</span> <span class="n">R.map</span> <span class="n">e.to_ring_hom</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span><span class="n">e.to_add_equiv.add_submonoid_equiv_map</span> <span class="n">R.to_add_submonoid</span><span class="o">,</span>
  <span class="bp">..</span><span class="n">e.to_mul_equiv.submonoid_equiv_map</span> <span class="n">R.to_submonoid</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">ring_equiv.subring_equiv_map</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">ring</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃+*</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">R</span> <span class="bp">≃+*</span> <span class="n">R.map</span> <span class="n">e.to_ring_hom</span> <span class="o">:=</span>
<span class="n">e.subsemiring_equiv_map</span> <span class="n">R.to_subsemiring</span>

<span class="kd">def</span> <span class="n">alg_equiv.subalgebra_equiv_map</span> <span class="o">{</span><span class="n">R</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">S</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">S.map</span> <span class="n">e.to_alg_hom</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">commutes'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="bp">..</span><span class="n">e.to_ring_equiv.subsemiring_equiv_map</span> <span class="n">S.to_subsemiring</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">alg_equiv.intermediate_field_equiv_map</span> <span class="o">{</span><span class="n">K</span> <span class="n">L</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">intermediate_field</span> <span class="n">K</span> <span class="n">L</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">E</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="o">(</span><span class="n">E.map</span> <span class="n">e.to_alg_hom</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">e.subalgebra_equiv_map</span> <span class="n">E.to_subalgebra</span>
</code></pre></div>



<a name="267290563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267290563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267290563">(Jan 08 2022 at 11:14)</a>:</h4>
<p>I already told you how to fix this in the PR review :) - just replace <code>*_equiv_map</code> with <code>*_map</code> everywhere</p>



<a name="267291205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Updating%20some%20proofs%20to%20new%20mathlib/near/267291205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Monnet <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib.html#267291205">(Jan 08 2022 at 11:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Updating.20some.20proofs.20to.20new.20mathlib/near/267290563">said</a>:</p>
<blockquote>
<p>I already told you how to fix this in the PR review :) - just replace <code>*_equiv_map</code> with <code>*_map</code> everywhere</p>
</blockquote>
<p>Ohh thank you! Sorry, I missed that comment on the PR</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>