---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Dangerous.20instance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html">Dangerous instance</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202245302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245302">(Jun 28 2020 at 17:10)</a>:</h4>
<p>I have read a couple of discussions of "dangerous instance" linter errors, but can't figure out how to fix my specific one (<a href="https://github.com/leanprover-community/mathlib/issues/3210">#3210</a>):</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">to_nonzero</span> <span class="o">{</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="err">𝕜&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_ring</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">normed_algebra</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">]</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="err">𝕜&#39;</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">zero_ne_one</span> <span class="o">:=</span>
  <span class="k">begin</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">norm_pos_iff</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">norm_one</span> <span class="err">𝕜</span> <span class="err">𝕜&#39;</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="kn">end</span> <span class="o">}</span>
</code></pre></div>


<p>What is the problem?</p>



<a name="202245316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245316">(Jun 28 2020 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span>  There result only mentions <code>k'</code> but the statement also depends on <code>k</code>.</p>



<a name="202245325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245325">(Jun 28 2020 at 17:11)</a>:</h4>
<p>So if it tries to prove <code>nonzero k'</code> then it will go on a wild goose chase to find a <code>k</code>.</p>



<a name="202245330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245330">(Jun 28 2020 at 17:11)</a>:</h4>
<p>That's "dangerous".</p>



<a name="202245370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245370">(Jun 28 2020 at 17:12)</a>:</h4>
<p>Ahh.</p>



<a name="202245376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245376">(Jun 28 2020 at 17:12)</a>:</h4>
<p>(Note that your statement doesn't seem to need anything about <code>normed_*</code>. Just fields and algebras would also work.)</p>



<a name="202245381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245381">(Jun 28 2020 at 17:12)</a>:</h4>
<p>Oh, really?  I used <code>norm_pos_iff</code> in my proof.</p>



<a name="202245387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245387">(Jun 28 2020 at 17:13)</a>:</h4>
<p>Is <code>algebra_map</code> required to be injective in mathlib?</p>



<a name="202245457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245457">(Jun 28 2020 at 17:15)</a>:</h4>
<p>I don't actually need this instance, so I can kill it if fixing it is too difficult.  But is there a fix?</p>



<a name="202245739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245739">(Jun 28 2020 at 17:21)</a>:</h4>
<p>Ooh wait... I'm silly.</p>



<a name="202245786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202245786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202245786">(Jun 28 2020 at 17:22)</a>:</h4>
<p>It doesn't work with just fields.</p>



<a name="202246117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246117">(Jun 28 2020 at 17:31)</a>:</h4>
<p>Is there a change I can make to pass the linter?</p>



<a name="202246192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246192">(Jun 28 2020 at 17:33)</a>:</h4>
<p>I think we really don't want this instance.</p>



<a name="202246195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246195">(Jun 28 2020 at 17:33)</a>:</h4>
<p>It could be a local instance in some situations.</p>



<a name="202246253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246253">(Jun 28 2020 at 17:34)</a>:</h4>
<p>OK, then I will just prove the lemma <code>zero_ne_one</code></p>



<a name="202246315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246315">(Jun 28 2020 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> You can replace <code>instance</code> with <code>def</code>, and call it with</p>
<div class="codehilite"><pre><span></span><code><span class="n">haveI</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="n">k&#39;</span> <span class="o">:=</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">to_nonzero</span> <span class="n">k</span> <span class="n">k&#39;</span><span class="o">,</span>
</code></pre></div>


<p>whenever you need it.</p>



<a name="202246489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246489">(Jun 28 2020 at 17:40)</a>:</h4>
<p>Johan, I did actually try replacing <code>instance</code> with <code>def</code>, and got the following linter error:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> INCORRECT DEF/LEMMA: -/</span>
<span class="c1">-- analysis/normed_space/basic.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">normed_algebra</span><span class="bp">.</span><span class="n">to_nonzero</span> <span class="c">/-</span><span class="cm"> is a def, should be a lemma/theorem -/</span>
</code></pre></div>



<a name="202246555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246555">(Jun 28 2020 at 17:42)</a>:</h4>
<p>Aaah, then just do what it says (-;</p>



<a name="202246560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202246560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202246560">(Jun 28 2020 at 17:42)</a>:</h4>
<p>I.e., make it <code>lemma</code> instead of <code>def</code>.</p>



<a name="202248043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248043">(Jun 28 2020 at 18:18)</a>:</h4>
<p>OK, I will.  Is it really possible to have a lemma of non-Prop type?</p>



<a name="202248171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248171">(Jun 28 2020 at 18:22)</a>:</h4>
<p>It is a Prop</p>



<a name="202248254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248254">(Jun 28 2020 at 18:25)</a>:</h4>
<p>Is this a feature of all structures?  Or just specifically of the structure <code>nonzero</code>, which has one field, of type Prop?</p>



<a name="202248402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248402">(Jun 28 2020 at 18:28)</a>:</h4>
<p>It's only a Prop if there is <code>: Prop</code> written before <code>:=</code>.</p>



<a name="202248434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248434">(Jun 28 2020 at 18:29)</a>:</h4>
<p>This is a little mysterious to me, but if someone can suggest the appropriate section of <a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a>, I will read up.</p>



<a name="202248508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202248508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202248508">(Jun 28 2020 at 18:31)</a>:</h4>
<p>Oh it's actually not a structure technically, it's defined as an inductive proposition for some reason</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="kn">inductive</span> <span class="n">nonempty</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">intro</span> <span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonempty</span>
</code></pre></div>



<a name="202253275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202253275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202253275">(Jun 28 2020 at 20:21)</a>:</h4>
<p>whoops I just noticed you were talking about <code>nonzero</code> not <code>nonempty</code>.</p>



<a name="202253330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202253330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202253330">(Jun 28 2020 at 20:22)</a>:</h4>
<p>Anyways <code>class nonzero (α : Type u) [has_zero α] [has_one α] : Prop :=</code> is also declared to be a <code>Prop</code>.</p>



<a name="202253857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202253857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202253857">(Jun 28 2020 at 20:36)</a>:</h4>
<p>I think I see; are there many such classes?  Like, from the user's point of view <code>[nonempty α]</code> and <code>[ring α]</code> look the same; is <code>ring</code> a Prop?</p>



<a name="202253865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202253865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202253865">(Jun 28 2020 at 20:37)</a>:</h4>
<p>No, it can't be because it contains the <code>+</code> and <code>*</code> operations which are data.</p>



<a name="202254025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254025">(Jun 28 2020 at 20:39)</a>:</h4>
<p>OK, this is why when I was discussing <code>subsingleton</code> and <code>unique</code> with <span class="user-mention" data-user-id="112680">@Johan Commelin</span> yesterday, he <a href="#narrow/stream/116395-maths/topic/zero.20ring/near/202202519">noted</a> that <code>unique</code> was data.</p>



<a name="202254175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254175">(Jun 28 2020 at 20:42)</a>:</h4>
<p>And why, in the <a href="https://github.com/leanprover-community/mathlib/blob/5def1eeb556e98a709a3d352bf10440b1f2ddd82/src/algebra/ring.lean#L179">code</a> resulting from that discussion, <code>psum</code> is used for <code>unique</code> but <code>∨</code> for <code>subsingleton</code>?</p>



<a name="202254472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254472">(Jun 28 2020 at 20:49)</a>:</h4>
<p>We are slowly beginning to refactor algebra so that "core" classes like <code>integral_domain</code> are data (they contain the addition, multiplication, 0 and 1) and then there are lots of classes on top called things like <code>is_local_ring R</code>, the idea being that the <code>is</code> tells you what the props are, but then it was decided that <code>local_ring R</code> was smaller, so now you can't tell again.</p>



<a name="202254573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254573">(Jun 28 2020 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Dangerous.20instance/near/202253865">said</a>:</p>
<blockquote>
<p>No, it can't be because it contains the <code>+</code> and <code>*</code> operations which are data.</p>
</blockquote>
<p>I was just looking at this and wondered what is meant here by is/are data? Like they are positive information? How does this work in Lean?</p>



<a name="202254649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254649">(Jun 28 2020 at 20:53)</a>:</h4>
<p>types and terms live in the <code>Type</code> universe and are data. Theorems and proofs live in the <code>Prop</code> universe and aren't. The difference between <code>add</code> and <code>add_assoc</code> is that <code>add</code> is a definition, so lives on the <code>Type</code> side of things (its output is a number), but <code>add_assoc</code> is a proof, so lives on the <code>Prop</code> side of things.</p>



<a name="202254710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254710">(Jun 28 2020 at 20:54)</a>:</h4>
<p>Thank you. This was a very good explanation, I think</p>



<a name="202254833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254833">(Jun 28 2020 at 20:57)</a>:</h4>
<p>Kevin has a nice recent blog post that's also related: <a href="https://xenaproject.wordpress.com/2020/06/20/mathematics-in-type-theory/">https://xenaproject.wordpress.com/2020/06/20/mathematics-in-type-theory/</a></p>



<a name="202254851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254851">(Jun 28 2020 at 20:57)</a>:</h4>
<p>I will read this now, thanks</p>



<a name="202254905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202254905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202254905">(Jun 28 2020 at 20:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> you should announce your blogposts somewhere in this Zulip. I always end up seeing them days or weeks after they come out...</p>



<a name="202255077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255077">(Jun 28 2020 at 21:02)</a>:</h4>
<p>I tend to announce them on Twitter and the discord -- I think that just an announcement of a blog post is a bit off topic for this site.</p>



<a name="202255153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255153">(Jun 28 2020 at 21:03)</a>:</h4>
<p>They're all Lean-related, so I don't see why they'd be off-topic.</p>



<a name="202255217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255217">(Jun 28 2020 at 21:04)</a>:</h4>
<p>Hey so I was reading the blog post and it says that proofs are terms in type theory, but up there you said that terms were types and proofs were props</p>



<a name="202255227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255227">(Jun 28 2020 at 21:04)</a>:</h4>
<p>Is there some elaboration that  makes sense of this?</p>



<a name="202255235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255235">(Jun 28 2020 at 21:04)</a>:</h4>
<p>Everything is a term in Lean's type theory.</p>



<a name="202255268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255268">(Jun 28 2020 at 21:05)</a>:</h4>
<p>Some terms are types and some types are props.</p>



<a name="202255313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255313">(Jun 28 2020 at 21:06)</a>:</h4>
<p>what terms are not types</p>



<a name="202255317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255317">(Jun 28 2020 at 21:06)</a>:</h4>
<p><code>1</code> is not a type.</p>



<a name="202255323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255323">(Jun 28 2020 at 21:06)</a>:</h4>
<p>so things like constants?</p>



<a name="202255329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255329">(Jun 28 2020 at 21:07)</a>:</h4>
<p>Not necessarily, you can declare type constants.</p>



<a name="202255343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255343">(Jun 28 2020 at 21:07)</a>:</h4>
<p>so 1 could be a type?</p>



<a name="202255347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255347">(Jun 28 2020 at 21:07)</a>:</h4>
<p>types are sets, terms are their elements</p>



<a name="202255353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255353">(Jun 28 2020 at 21:07)</a>:</h4>
<p>1 is not a type because it's not a set</p>



<a name="202255390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255390">(Jun 28 2020 at 21:08)</a>:</h4>
<p>When I wrote <code>1</code>, I meant the term <code>1 : nat</code>. This is not a type and cannot be made a type.</p>



<a name="202255412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255412">(Jun 28 2020 at 21:08)</a>:</h4>
<p>that analogy seems kinda reasonable. so a proof is a term of the type prop? is that ok to say?</p>



<a name="202255417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255417">(Jun 28 2020 at 21:08)</a>:</h4>
<p>oh ok <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span></p>



<a name="202255422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255422">(Jun 28 2020 at 21:09)</a>:</h4>
<p><code>proof : P</code> and <code>P : Prop</code>, like <code>1 : real</code> and <code>real : Type</code></p>



<a name="202255427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255427">(Jun 28 2020 at 21:09)</a>:</h4>
<p><code>proof  : 2+2=4</code> and <code>2+2=4 : Prop</code></p>



<a name="202255432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255432">(Jun 28 2020 at 21:09)</a>:</h4>
<p>right ok this makes sense</p>



<a name="202255476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255476">(Jun 28 2020 at 21:10)</a>:</h4>
<p>I think I learned most of this from chapters 2+3 of <a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a></p>



<a name="202255496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255496">(Jun 28 2020 at 21:10)</a>:</h4>
<p>also you said 1 is not a set, but what if you are an evil person and you say something like <code>1 = {{}}</code> ?</p>



<a name="202255504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255504">(Jun 28 2020 at 21:11)</a>:</h4>
<p>That's a different <code>1</code> then.</p>



<a name="202255540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255540">(Jun 28 2020 at 21:12)</a>:</h4>
<p>why because it's something like <code>1 : ordinals</code>instead of <code>1:nat</code> ?</p>



<a name="202255607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255607">(Jun 28 2020 at 21:13)</a>:</h4>
<p>Yeah, basically. Any term can only have one type. So two terms with different types cannot be equal.</p>



<a name="202255662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255662">(Jun 28 2020 at 21:14)</a>:</h4>
<p>there's a very nice picture in hitchhiker's guide to logical verification:<br>
<a href="/user_uploads/3121/BmWONwPG_FNw2RyZU2oNpH8B/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/BmWONwPG_FNw2RyZU2oNpH8B/image.png" title="image.png"><img src="/user_uploads/3121/BmWONwPG_FNw2RyZU2oNpH8B/image.png"></a></div>



<a name="202255685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255685">(Jun 28 2020 at 21:15)</a>:</h4>
<p>but i guess whether propositions are types depends on your perspective :)</p>



<a name="202255689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255689">(Jun 28 2020 at 21:15)</a>:</h4>
<p>There's a link to the hitchhiker's guide on the website <a href="https://leanprover-community.github.io/learn.html#textbooks">here</a>. I liked it a lot!</p>



<a name="202255695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255695">(Jun 28 2020 at 21:15)</a>:</h4>
<p>ok I like this image, thanks- also would <code>1 = {{}}</code> mean that each ordinal is kind of a type on its own?</p>



<a name="202255704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255704">(Jun 28 2020 at 21:15)</a>:</h4>
<p>what you are writing has no meaning</p>



<a name="202255748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255748">(Jun 28 2020 at 21:16)</a>:</h4>
<p>this is not set theory, and you cannot make definitions by just writing down sets</p>



<a name="202255755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255755">(Jun 28 2020 at 21:16)</a>:</h4>
<p>oops meant equals there</p>



<a name="202255770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202255770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dave <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202255770">(Jun 28 2020 at 21:16)</a>:</h4>
<p>oh ok. I only brought it up because you said types are sets so I thought we could play with sets.</p>



<a name="202267490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202267490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202267490">(Jun 29 2020 at 02:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Dangerous.20instance/near/202248508">said</a>:</p>
<blockquote>
<p>Oh it's actually not a structure technically, it's defined as an inductive proposition for some reason</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="kn">inductive</span> <span class="n">nonempty</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">intro</span> <span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonempty</span>
</code></pre></div>


</blockquote>
<p>It can't be a structure, because then lean would try to create a projection called <code>val</code> which it can't because of universe restrictions</p>



<a name="202270294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/202270294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#202270294">(Jun 29 2020 at 04:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113489-new-members/topic/Dangerous.20instance/near/202254025">said</a>:</p>
<blockquote>
<p>OK, this is why when I was discussing <code>subsingleton</code> and <code>unique</code> with <span class="user-mention silent" data-user-id="112680">Johan Commelin</span> yesterday, he <a href="#narrow/stream/116395-maths/topic/zero.20ring/near/202202519">noted</a> that <code>unique</code> was data.</p>
<p>And why, in the <a href="https://github.com/leanprover-community/mathlib/blob/5def1eeb556e98a709a3d352bf10440b1f2ddd82/src/algebra/ring.lean#L179">code</a> resulting from that discussion, <code>psum</code> is used for <code>unique</code> but <code>∨</code> for <code>subsingleton</code>?</p>
</blockquote>
<p>Yup, exactly.</p>



<a name="203735301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203735301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203735301">(Jul 13 2020 at 16:13)</a>:</h4>
<p>I've got a dangerous instance I managed to fix but which I'd still like to understand why is dangerous.<br>
The problem is with the following, placed in <code>topology/module</code> right after the definition of topological module:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- A topological algebra, over a semiring which is topological semiring, is an algebra that is</span>
<span class="cm">both a topological semimodule and a topological semiring. -/</span>
<span class="n">class</span> <span class="n">topological_algebra</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span>
  <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kn">extends</span> <span class="n">topological_semimodule</span> <span class="n">R</span> <span class="n">A</span><span class="o">,</span> <span class="n">topological_semiring</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Prop</span>
</code></pre></div>


<p>and the Linter says</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> DANGEROUS INSTANCES FOUND.</span>
<span class="cm">These instances are recursive, and create a new type-class problem which will have metavariables.</span>
<span class="cm">  Possible solution: remove the instance attribute or make it a local instance instead.</span>

<span class="cm">  Currently this linter does not check whether the metavariables only occur in arguments marked with `out_param`, in which case this linter gives a false positive.: -/</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">topological_algebra</span><span class="bp">.</span><span class="n">to_topological_semiring</span> <span class="c">/-</span><span class="cm"> The following arguments become metavariables. argument 1: (R : Type u) -/</span>
</code></pre></div>


<p>I don't even know what a metavariable is in this case so I guess I'm looking for a very basic answer</p>



<a name="203736758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203736758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203736758">(Jul 13 2020 at 16:26)</a>:</h4>
<p>Hmm... I'm confused about what is dangerous here... <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Could one of you take a look please?</p>



<a name="203738834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203738834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203738834">(Jul 13 2020 at 16:45)</a>:</h4>
<p><code>topological_algebra R A</code> has two arguments but has a parent <code>topological_semiring A</code> with only one argument, this is not allowed</p>



<a name="203738924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203738924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203738924">(Jul 13 2020 at 16:46)</a>:</h4>
<p>because it means that when determining if a type <code>A</code> has <code>topological_semiring A</code>, it will check if <code>topological_algebra ? A</code> which is bad</p>



<a name="203739179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203739179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203739179">(Jul 13 2020 at 16:49)</a>:</h4>
<p>Ooh right, of course... I should have seen this <span aria-label="expressionless" class="emoji emoji-1f611" role="img" title="expressionless">:expressionless:</span></p>



<a name="203745220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745220">(Jul 13 2020 at 17:37)</a>:</h4>
<p>What is the most common solution to this? Moving topological ring to the hypotheses?</p>



<a name="203745353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745353">(Jul 13 2020 at 17:38)</a>:</h4>
<p>Yup... but I understand that this is becoming really bulky</p>



<a name="203745384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745384">(Jul 13 2020 at 17:38)</a>:</h4>
<p>You can however move <code>algebra R A</code> to the <code>extends</code></p>



<a name="203745615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745615">(Jul 13 2020 at 17:40)</a>:</h4>
<p>Yeah the point is that I do not really need the notion of <code>topological_algebra</code> it was just so to make it closer to normal maths, but from a formal point of view one just needs to write down <code>topological_semiring</code> and <code>topological_module</code> so I guess I'll just remove it completely</p>



<a name="203745728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745728">(Jul 13 2020 at 17:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Dangerous.20instance/near/203745384">said</a>:</p>
<blockquote>
<p>You can however move <code>algebra R A</code> to the <code>extends</code></p>
</blockquote>
<p>I would really like to do this but people did not do it in the past for group, ring etc, so I guess they had some reason not to do it</p>



<a name="203745844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745844">(Jul 13 2020 at 17:42)</a>:</h4>
<p>What do you mean? <code>ring</code> extends <code>monoid</code> and <code>add_group</code>...</p>



<a name="203745879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745879">(Jul 13 2020 at 17:43)</a>:</h4>
<p>No <code>topological_group</code>, <code>topological_ring</code></p>



<a name="203745947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203745947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203745947">(Jul 13 2020 at 17:43)</a>:</h4>
<p>I see. That's right. Because it allows for easier mixing of algebraic properties and topological ones.</p>



<a name="203746032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746032">(Jul 13 2020 at 17:44)</a>:</h4>
<p>Otherwise we would end up with <code>topological_X</code> for all <code>X</code> in the algebra part of the library. And that's quite a lot.</p>



<a name="203746068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746068">(Jul 13 2020 at 17:44)</a>:</h4>
<p>Ok it make sense</p>



<a name="203746331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746331">(Jul 13 2020 at 17:47)</a>:</h4>
<p>Do you think it'd make sense to have <code>topological_algebra</code> as an abbreviation just as <code>module</code> for <code>semimodule</code>? It's quite useless but probably makes hypotheses clear and forces you not to forget the <code>topological_semiring</code> hypothesis which Lean often does not understand is the correct missing hypothesis from the proof</p>



<a name="203746639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746639">(Jul 13 2020 at 17:49)</a>:</h4>
<p>I don't know. At the moment I would just continue without it. If we find out that it really would help, we can always add it later.</p>



<a name="203746731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746731">(Jul 13 2020 at 17:50)</a>:</h4>
<p>Okok</p>



<a name="203746741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/203746741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#203746741">(Jul 13 2020 at 17:50)</a>:</h4>
<p>Every new concept brings the obligation with it to write an interface for it, and connect it to all related concepts...</p>



<a name="204194538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/204194538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#204194538">(Jul 17 2020 at 11:19)</a>:</h4>
<p>Just as a preamble: the following problem arose in geometry but the problem itself has nothing to do with geometry. I believe it is a general problem that probably was probably faced in mathlib many times, so I don't think familiarity with the geometry section of mathlib is necessary to help me here!</p>
<p>I have a new dangerous instance. This time it is the opposite: I know why it is there but I have no idea about how to fix it.<br>
With this definition of Lie_group:</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">Lie_group</span> <span class="o">{</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="err">𝕜</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_space</span> <span class="err">𝕜</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="err">𝕜</span> <span class="n">E</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">G</span><span class="o">]</span>
  <span class="o">[</span><span class="n">charted_space</span> <span class="n">E</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">smooth_mul</span> <span class="o">:</span> <span class="n">smooth</span> <span class="o">(</span><span class="n">I</span><span class="bp">.</span><span class="n">prod</span> <span class="n">I</span><span class="o">)</span> <span class="n">I</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">G</span><span class="bp">×</span><span class="n">G</span><span class="o">,</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">*</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">))</span>
  <span class="o">(</span><span class="n">smooth_inv</span> <span class="o">:</span> <span class="n">smooth</span> <span class="n">I</span> <span class="n">I</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">:</span><span class="n">G</span><span class="o">,</span> <span class="n">a</span><span class="bp">⁻¹</span><span class="o">))</span>
</code></pre></div>


<p>I need this instance</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="n">to_topological_group</span> <span class="o">{</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
<span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="err">𝕜</span> <span class="n">E</span><span class="o">]</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">model_with_corners</span> <span class="err">𝕜</span> <span class="n">E</span> <span class="n">E</span><span class="o">}</span>
<span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">charted_space</span> <span class="n">E</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">smooth_manifold_with_corners</span> <span class="n">I</span> <span class="n">G</span><span class="o">]</span>
<span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">Lie_group</span> <span class="n">I</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">topological_group</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">continuous_mul</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="n">smooth_mul</span><span class="bp">.</span><span class="n">continuous</span><span class="o">,</span>
  <span class="n">continuous_inv</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">.</span><span class="n">smooth_inv</span><span class="bp">.</span><span class="n">continuous</span><span class="o">,</span> <span class="o">}</span>
</code></pre></div>


<p>However this produces</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">print</span> <span class="n">to_topological_group</span> <span class="c">/-</span><span class="cm"> The following arguments become metavariables.</span>
<span class="cm">argument 1: {𝕜 : Type u_1}, argument 3: {E : Type u_2}, argument 6: {I : model_with_corners 𝕜 E E} -/</span>
</code></pre></div>


<p>and I really need this instance otherwise I have to write twice every definition applying to <code>topological_group</code>.<br>
If you want a mwe I can produce it easily even if I don't know how having code locally could help, since this is an exclusively conceptual problem.<br>
What can I do?</p>



<a name="204195651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/204195651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#204195651">(Jul 17 2020 at 11:34)</a>:</h4>
<p>Lie group should take <code>[topological_group G]</code> as an instance parameter in this kind of situation. And you can have another constructor that constructs both the topological structure and the Lie group structure out of a structure called something like <code>Lie_group.core</code>. In the same way that you could construct a topology from a charted space structure, but instead charted spaces take the topology as an instance parameter, but there is a constructor in terms of <code>charted_space_core</code></p>



<a name="204195812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/204195812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#204195812">(Jul 17 2020 at 11:37)</a>:</h4>
<p>Ok thanks I will do that</p>



<a name="204197593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dangerous%20instance/near/204197593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dangerous.20instance.html#204197593">(Jul 17 2020 at 12:04)</a>:</h4>
<p>Nicolò, did you watch <a href="https://youtu.be/RTfjSlwbKjQ?list=PLlF-CfQhukNlxexiNJErGJd2dte_J1t1N">https://youtu.be/RTfjSlwbKjQ?list=PLlF-CfQhukNlxexiNJErGJd2dte_J1t1N</a> ? It explains this issue pretty nicely.</p>
<div class="youtube-video message_inline_image"><a data-id="RTfjSlwbKjQ" href="https://youtu.be/RTfjSlwbKjQ?list=PLlF-CfQhukNlxexiNJErGJd2dte_J1t1N"><img src="https://i.ytimg.com/vi/RTfjSlwbKjQ/default.jpg"></a></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>