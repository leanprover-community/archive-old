---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html">but is expected to have type   Prop : Type error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="299660987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299660987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299660987">(Sep 19 2022 at 23:22)</a>:</h4>
<p>I'm working through the Theorem Proving book, and trying to prove associativity of and.</p>
<p>I've got</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">and_assoc_right</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">p</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">assume</span> <span class="n">hpqr</span><span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">p</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">),</span> <span class="k">from</span> <span class="n">and.intro</span> <span class="n">hpqr.left.left</span> <span class="o">(</span><span class="n">and.intro</span> <span class="n">hpqr.left.right</span> <span class="n">hpqr.right</span><span class="o">)</span>
</code></pre></div>
<p>which typechecks just fine, but when I try to use it I get a strange error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">↔</span> <span class="n">p</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">iff.intro</span>
  <span class="o">(</span> <span class="k">assume</span> <span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">p</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">),</span> <span class="k">from</span> <span class="n">and_assoc_right</span> <span class="n">h</span><span class="o">)</span>
<span class="c1">-- etc</span>
</code></pre></div>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">and_assoc_right</span> <span class="n">h</span>
<span class="n">term</span>
  <span class="n">h</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Prop</span> <span class="o">:</span> <span class="kt">Type</span>
</code></pre></div>
<p>&amp; I'm not sure what Lean is trying to tell me.</p>



<a name="299661768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299661768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299661768">(Sep 19 2022 at 23:30)</a>:</h4>
<p>The first three arguments to <code>and_assoc_right</code> are <code>p</code>, <code>q</code>, and <code>r</code> themselves. To use it as written, you can write <code>and_assoc_right _ _ _ h</code>, where the underscores tell Lean to figure out <code>p</code>, <code>q</code>, and <code>r</code> from context.</p>



<a name="299661831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299661831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299661831">(Sep 19 2022 at 23:31)</a>:</h4>
<p>If you alter <code>and_assoc_right</code> to have <code>{p q r : Prop}</code> in curly braces, then your <code>example</code> should work. This causes Lean to always try to figure out <code>p</code>, <code>q</code>, and <code>r</code> from context.</p>



<a name="299661874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299661874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299661874">(Sep 19 2022 at 23:31)</a>:</h4>
<p>The type mismatch error you are seeing is from the fact that you are supplying <code>h</code> for <code>p</code>, but <code>p</code> is supposed to be a <code>Prop</code>.</p>



<a name="299662307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299662307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299662307">(Sep 19 2022 at 23:36)</a>:</h4>
<p>Ah -- mentally I think I'm I'm passing in one conjunction and getting back another, but I could partially apply…? something?</p>



<a name="299662364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299662364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299662364">(Sep 19 2022 at 23:37)</a>:</h4>
<p>I guess I'm passing in some types and a compound with those types? Or?? My mental model doesn't match dependent typing well.</p>



<a name="299662549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299662549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299662549">(Sep 19 2022 at 23:39)</a>:</h4>
<p>Reading again, I have an actual <code>Prop</code> and Lean wants me to pass a type....</p>



<a name="299662958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299662958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299662958">(Sep 19 2022 at 23:44)</a>:</h4>
<p><code>and_assoc_right</code> takes four explicit arguments: the three before the colon and a proof of <code>(p ∧ q) ∧ r</code></p>



<a name="299663029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299663029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299663029">(Sep 19 2022 at 23:45)</a>:</h4>
<p>The error message that it is expecting a <code>Prop : Type</code> is admittedly confusing, but it's meant to give you more information. It's just wanting a <code>Prop</code> for the first argument (and <code>Prop</code> has type <code>Type</code>). It is similar to how it is reporting that <code>h</code> has type <code>(p ∧ q) ∧ r</code> (and <code>(p ∧ q) ∧ r</code> has type <code>Prop</code>).</p>



<a name="299663141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/but%20is%20expected%20to%20have%20type%20%20%20Prop%20%3A%20Type%20error/near/299663141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/but.20is.20expected.20to.20have.20type.20.20.20Prop.20.3A.20Type.20error.html#299663141">(Sep 19 2022 at 23:47)</a>:</h4>
<p>My curly brace suggestion has the effect of making the first three arguments be implicit arguments. That way when you supply <code>h</code> it goes toward the explicit argument corresponding to <code>(p ∧ q) ∧ r</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>