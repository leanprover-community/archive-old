---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html">Sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197645788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197645788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197645788">(May 15 2020 at 03:53)</a>:</h4>
<p>How do I do something as trivial as proving set membership?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="n">def</span> <span class="n">x1</span> <span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">}</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span>   <span class="c1">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>
<span class="kn">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="197645957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197645957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197645957">(May 15 2020 at 03:57)</a>:</h4>
<p>In this case you can use <code>dec_trivial</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="n">def</span> <span class="n">x1</span> <span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">}</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span>   <span class="c1">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>
<span class="kn">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="197646023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646023">(May 15 2020 at 03:58)</a>:</h4>
<p><span class="user-mention" data-user-id="243102">@Brandon Brown</span> If you've got a very explicit set, like in your example, then it's <code>dec_trivial</code>, like Bryan said. If you have a set if the form <code>finset.range n</code> or <code>finset.filter foo bar</code>, then there will be lemmas <code>finset.mem_range</code> and <code>finset.mem_filter</code> etc... that help you proving this.</p>



<a name="197646051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646051">(May 15 2020 at 03:59)</a>:</h4>
<p>Thanks!</p>



<a name="197646109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646109">(May 15 2020 at 04:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243102">Brandon Brown</span> <a href="#narrow/stream/113489-new-members/topic/Sets/near/197645788">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="n">reduce</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span>   <span class="c1">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>
</code></pre></div>


</blockquote>
<p>Note that this is about to change to</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="n">reduce</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span>   <span class="c1">--1 = 1 ∨ 1 = 2 ∨ 1 = 3</span>
</code></pre></div>


<p>which I think is a big improvement (-;</p>



<a name="197646136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646136">(May 15 2020 at 04:01)</a>:</h4>
<p>Also, if you don't like <code>dec_trivial</code>, you could use a combination of <code>or.inl</code>, <code>or.inr</code> and <code>rfl</code>.</p>



<a name="197646205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646205">(May 15 2020 at 04:02)</a>:</h4>
<p>This reminds me a lot of <a href="#narrow/stream/113489-new-members/topic/proof.20of.20something.20that.20.23eval.20.2F.20.23reduce.20computes">one of my early threads here</a>.</p>



<a name="197646822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646822">(May 15 2020 at 04:17)</a>:</h4>
<p>I have a more basic question. I understand constructions of the form</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">h</span>
</code></pre></div>


<p>Because I'm injecting h</p>



<a name="197646869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646869">(May 15 2020 at 04:18)</a>:</h4>
<p>But I don't really understand what's going on under the hood with</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="o">(</span><span class="n">rfl</span><span class="o">)</span>
</code></pre></div>



<a name="197646881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646881">(May 15 2020 at 04:18)</a>:</h4>
<p><code>or.inl _</code> would expect a proof of <code>1 = 1</code> at the location of the <code>_</code></p>



<a name="197646882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646882">(May 15 2020 at 04:18)</a>:</h4>
<p>Well, you need to inject a proof of <code>1 = 1</code></p>



<a name="197646889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646889">(May 15 2020 at 04:18)</a>:</h4>
<p>Let <code>p := 1=1</code>, <code>q := false</code> and <code>h := rfl</code>.</p>



<a name="197646890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197646890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197646890">(May 15 2020 at 04:18)</a>:</h4>
<p>and <code>rfl</code> is a proof of <code>1 = 1</code></p>



<a name="197647072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197647072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197647072">(May 15 2020 at 04:22)</a>:</h4>
<p>Ahh right I see</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variable</span> <span class="n">p</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">p</span>
</code></pre></div>


<p>So using rfl is inferring this since what else could it be</p>



<a name="197647079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197647079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197647079">(May 15 2020 at 04:23)</a>:</h4>
<p><code>rfl</code> is short for <code>eq.refl _</code></p>



<a name="197647080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197647080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197647080">(May 15 2020 at 04:23)</a>:</h4>
<p>rfl is a smart kid (-;</p>



<a name="197650843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197650843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197650843">(May 15 2020 at 05:59)</a>:</h4>
<p><code>refl</code> is a powerful tactic!</p>



<a name="197653464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197653464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197653464">(May 15 2020 at 06:54)</a>:</h4>
<p>the correct way, much as I hate it, is <code>by simp</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="n">def</span> <span class="n">x1</span> <span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">}</span>
<span class="kn">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">x1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">x1</span><span class="o">]</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
<span class="n">def</span> <span class="n">x2</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">}</span>
<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="err">∈</span> <span class="o">(</span><span class="n">x2</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- fails</span>
<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="err">∈</span> <span class="o">(</span><span class="n">x2</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">x2</span><span class="o">]</span> <span class="c1">-- works</span>
</code></pre></div>



<a name="197653671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197653671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197653671">(May 15 2020 at 06:58)</a>:</h4>
<p>the last line is equivalent to <code>simp only [x2, eq_self_iff_true, or_true, finset.mem_insert, finset.mem_singleton, finset.singleton_eq_singleton]</code></p>



<a name="197653679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197653679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197653679">(May 15 2020 at 06:58)</a>:</h4>
<p>(thanks, <code>squeeze_simp</code>)</p>



<a name="197653881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197653881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197653881">(May 15 2020 at 07:01)</a>:</h4>
<p>That's surprising to me. Are there some missing decidability instances somewhere?</p>



<a name="197654036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197654036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197654036">(May 15 2020 at 07:03)</a>:</h4>
<p>no, it's just that asserting <code>\a</code> has decidable_eq does not actually give an algorithm to decide whether two terms of <code>\a</code> are equal</p>



<a name="197654045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197654045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197654045">(May 15 2020 at 07:03)</a>:</h4>
<p>if <code>\a</code> is anything concrete (like <code>\N</code>) then it will work</p>



<a name="197654333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197654333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197654333">(May 15 2020 at 07:07)</a>:</h4>
<p>Oh, right. The type class is a <code>variable</code> so there's no actual definition.</p>



<a name="197655263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/197655263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#197655263">(May 15 2020 at 07:19)</a>:</h4>
<p>yeah that also confused me for a while :P</p>



<a name="283869921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283869921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283869921">(May 25 2022 at 11:32)</a>:</h4>
<p>Hi, First, please excuse my private message if you received one from me, I didn't know how to begin and someone comprehensive told me to post in new members : I am completely new in Lean proving. I need help to define sets, to formalize in Lean a simple proof yet written mathematically (by others than me). Could you help me to do that. I put the definition of sets here : <a href="http://denise.vella.chemla.free.fr/defsets.png">http://denise.vella.chemla.free.fr/defsets.png</a> and the failure of my definition of sets here <a href="http://denise.vella.chemla.free.fr/ratage1.png">http://denise.vella.chemla.free.fr/ratage1.png</a> Thank you for your help. The proof to be tested in Lean is here <a href="http://denise.vella.chemla.free.fr/jade1.pdf">http://denise.vella.chemla.free.fr/jade1.pdf</a></p>
<div class="message_inline_image"><a href="http://denise.vella.chemla.free.fr/defsets.png"><img src="https://uploads.zulipusercontent.net/6885207d23ee6f7197e32c65cbe0026222afa571/687474703a2f2f64656e6973652e76656c6c612e6368656d6c612e667265652e66722f646566736574732e706e67"></a></div><div class="message_inline_image"><a href="http://denise.vella.chemla.free.fr/ratage1.png"><img src="https://uploads.zulipusercontent.net/89f0960fa15cfabd0d263bbe24027f101254009a/687474703a2f2f64656e6973652e76656c6c612e6368656d6c612e667265652e66722f726174616765312e706e67"></a></div>



<a name="283870300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283870300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283870300">(May 25 2022 at 11:37)</a>:</h4>
<p>Hi, thanks for moving your posts here; Zulip can be confusing if you're new!</p>
<p>Would you be able to produce a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> showing what you have so far? There look to be lots of errors in that screenshot, and it's not clear which one you're asking about. You can post code on Zulip in <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> so that we can copy-paste it to try to help you.</p>



<a name="283872310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283872310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283872310">(May 25 2022 at 11:59)</a>:</h4>
<p>Thank you for answering. Until line 72, that's all things I copied from the tutorial I believed I would need (modulo for integers, and logical and found somewhere). As I don't know how to make a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, I put my code here <a href="http://denise.vella.chemla.free.fr/tentecglean1.lean">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>



<a name="283872488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283872488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283872488">(May 25 2022 at 12:00)</a>:</h4>
<p>OK, here it is (only from 72 and seq.) :<br>
def Fp (n : nat, p : nat) : nat :=<br>
begin<br>
  intro m, </p>
<p>have (mod_equiv 2 m 1) ∧ (3 ≤ m ≤ n/2) <br>
  ∧ (not mod_equiv p m 0) ∧ (not mod_equiv p m n)<br>
end</p>
<p>def D (n : nat) : nat :=<br>
  intro m, </p>
<p>have (∀ p, <a href="http://nat.prime">nat.prime</a> p, 3 ≤ p ≤ sqrt(n)) ∧ (m in Fp(n,p))</p>
<p>lemma lem1 :  ∀ m, ((mod_equiv 2 m 1) ∧ <br>
                    ((∀ p, (p : nat, p ≤ sqrt(n) ∧ <a href="http://nat.prime">nat.prime</a> p <br>
                           implies not mod_equiv p n 0))) <br>
                                  implies <a href="http://nat.prime">nat.prime</a> m := <br>
begin<br>
  sorry ;<br>
end</p>
<p>lemma lem2 : ∀x, x in D(n) := <a href="http://nat.prime">nat.prime</a> x<br>
begin<br>
  sorry ;<br>
end</p>
<p>lemma lem3 : ∀x, n-x in D(n) := <a href="http://nat.prime">nat.prime</a> x<br>
begin<br>
  sorry ;<br>
end</p>
<p>lemma lem4 : intro n, mod_equiv 2 n 0, n ≥ 6, D(n) != emptyset implies <br>
   exists p, exists q, <a href="http://nat.prime">nat.prime</a> p, <a href="http://nat.prime">nat.prime</a> q, n = p+q<br>
begin<br>
  sorry ;<br>
end</p>



<a name="283875765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283875765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283875765">(May 25 2022 at 12:35)</a>:</h4>
<p>Can you read <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> and edit your post accordingly?</p>



<a name="283876170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283876170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283876170">(May 25 2022 at 12:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224188">Chemla</span> <a href="#narrow/stream/113489-new-members/topic/Sets/near/283872310">said</a>:</p>
<blockquote>
<p>As I don't know how to make a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, I put my code here <a href="http://denise.vella.chemla.free.fr/tentecglean1.lean">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>
</blockquote>
<p>Unfortunately your webserver is not configured to send <code>.lean</code> files as <code>charset=utf-8</code>, so that file is hard to read in a browser.</p>



<a name="283883431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283883431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283883431">(May 25 2022 at 13:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Sets/near/283876170">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="224188">Chemla</span> <a href="#narrow/stream/113489-new-members/topic/Sets/near/283872310">said</a>:</p>
<blockquote>
<p>As I don't know how to make a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, I put my code here <a href="http://denise.vella.chemla.free.fr/tentecglean1.lean">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>
</blockquote>
<p>Unfortunately your webserver is not configured to send <code>.lean</code> files as <code>charset=utf-8</code>, so that file is hard to read in a browser.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.int.basic</span>
<span class="kn">import</span> <span class="n">data.nat.prime</span>
<span class="kn">import</span> <span class="n">tactic.linarith</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">namespace</span> <span class="n">int</span>

<span class="kd">def</span> <span class="n">dvd</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">k</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_dvd</span> <span class="n">int</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">int.dvd</span><span class="o">⟩</span>

<span class="kd">@[simp]</span>
<span class="kd">theorem</span> <span class="n">dvd_zero</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">∣</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩</span>

<span class="kd">theorem</span> <span class="n">dvd_intro</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">∣</span> <span class="n">n</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span>

<span class="kd">end</span> <span class="n">int</span>

<span class="kn">open</span> <span class="n">int</span>

<span class="kn">section</span> <span class="n">mod_m</span>
<span class="kd">parameter</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span>

<span class="kd">definition</span> <span class="n">mod_equiv</span> <span class="o">(</span><span class="n">m</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">∣</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">mod_refl</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">m</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">a</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span>

<span class="kd">theorem</span> <span class="n">mod_symm</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">c</span> <span class="n">hc</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">dvd_intro</span> <span class="o">(</span><span class="bp">-</span><span class="n">c</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">eq.symm</span> <span class="n">hc</span><span class="o">]</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">add_assoc</span> <span class="n">add_comm</span> <span class="n">add_left_comm</span>

<span class="kd">theorem</span> <span class="n">mod_trans</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">h₁</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h₂</span> <span class="k">with</span> <span class="n">e</span> <span class="n">he</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">dvd_intro</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="n">e</span><span class="o">),</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">eq.symm</span> <span class="n">hd</span><span class="o">,</span> <span class="n">eq.symm</span> <span class="n">he</span><span class="o">,</span> <span class="n">sub_eq_add_neg</span><span class="o">]</span>
<span class="kd">end</span>
<span class="kd">end</span> <span class="n">mod_m</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">mod_refl</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">a</span><span class="o">)</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">mod_symm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">b</span> <span class="n">a</span><span class="o">)</span>

<span class="k">#check</span> <span class="o">(</span><span class="n">mod_trans</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
   <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">mod_equiv</span> <span class="n">m</span> <span class="n">a</span> <span class="n">c</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">and_commutative</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">∧</span> <span class="n">p</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">hpq</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hp</span> <span class="o">:</span> <span class="n">p</span><span class="o">,</span> <span class="k">from</span> <span class="n">and.left</span> <span class="n">hpq</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hq</span> <span class="o">:</span> <span class="n">q</span><span class="o">,</span> <span class="k">from</span> <span class="n">and.right</span> <span class="n">hpq</span><span class="o">,</span>
<span class="k">show</span> <span class="n">q</span> <span class="bp">∧</span> <span class="n">p</span><span class="o">,</span> <span class="k">from</span> <span class="n">and.intro</span> <span class="n">hq</span> <span class="n">hp</span>

<span class="kd">def</span> <span class="n">double</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span>
<span class="k">#print</span> <span class="n">double</span>
<span class="k">#check</span> <span class="n">double</span> <span class="mi">3</span>
<span class="k">#reduce</span> <span class="n">double</span> <span class="mi">3</span>    <span class="c1">-- 6</span>

<span class="kd">def</span> <span class="n">square</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span>
<span class="k">#print</span> <span class="n">square</span>
<span class="k">#check</span> <span class="n">square</span> <span class="mi">3</span>
<span class="k">#reduce</span> <span class="n">square</span> <span class="mi">3</span>    <span class="c1">-- 9</span>

<span class="kd">def</span> <span class="n">do_twice</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span>

<span class="k">#reduce</span> <span class="n">do_twice</span> <span class="n">double</span> <span class="mi">2</span>    <span class="c1">-- 8</span>

<span class="kd">def</span> <span class="n">Fp</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">m</span><span class="o">,</span>

  <span class="k">have</span> <span class="o">(</span><span class="n">mod_equiv</span> <span class="mi">2</span> <span class="n">m</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span>
  <span class="bp">∧</span> <span class="o">(</span><span class="n">not</span> <span class="n">mod_equiv</span> <span class="n">p</span> <span class="n">m</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">not</span> <span class="n">mod_equiv</span> <span class="n">p</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">D</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
  <span class="n">intro</span> <span class="n">m</span><span class="o">,</span>

  <span class="k">have</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">,</span> <span class="mi">3</span> <span class="bp">≤</span> <span class="n">p</span> <span class="bp">≤</span> <span class="n">sqrt</span><span class="o">(</span><span class="n">n</span><span class="o">))</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">m</span> <span class="k">in</span> <span class="n">Fp</span><span class="o">(</span><span class="n">n</span><span class="o">,</span><span class="n">p</span><span class="o">))</span>

<span class="kd">lemma</span> <span class="n">lem1</span> <span class="o">:</span>  <span class="bp">∀</span> <span class="n">m</span><span class="o">,</span> <span class="o">((</span><span class="n">mod_equiv</span> <span class="mi">2</span> <span class="n">m</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span>
                    <span class="o">((</span><span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">p</span> <span class="bp">≤</span> <span class="n">sqrt</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">nat.prime</span> <span class="n">p</span>
                           <span class="n">implies</span> <span class="n">not</span> <span class="n">mod_equiv</span> <span class="n">p</span> <span class="n">n</span> <span class="mi">0</span><span class="o">)))</span>
                                  <span class="n">implies</span> <span class="n">nat.prime</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span> <span class="bp">;</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="k">in</span> <span class="n">D</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nat.prime</span> <span class="n">x</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span> <span class="bp">;</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem3</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">x</span><span class="o">,</span> <span class="n">n</span><span class="bp">-</span><span class="n">x</span> <span class="k">in</span> <span class="n">D</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nat.prime</span> <span class="n">x</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span> <span class="bp">;</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem4</span> <span class="o">:</span> <span class="n">intro</span> <span class="n">n</span><span class="o">,</span> <span class="n">mod_equiv</span> <span class="mi">2</span> <span class="n">n</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≥</span> <span class="mi">6</span><span class="o">,</span> <span class="n">D</span><span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="bp">!=</span> <span class="n">emptyset</span> <span class="n">implies</span>
   <span class="n">exists</span> <span class="n">p</span><span class="o">,</span> <span class="n">exists</span> <span class="n">q</span><span class="o">,</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">,</span> <span class="n">nat.prime</span> <span class="n">q</span><span class="o">,</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">p</span><span class="bp">+</span><span class="n">q</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span> <span class="bp">;</span>
<span class="kd">end</span>
</code></pre></div>
</blockquote>



<a name="283884806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283884806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283884806">(May 25 2022 at 13:48)</a>:</h4>
<p>Note you can edit your previous message rather than posting a new one</p>



<a name="283885193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283885193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283885193">(May 25 2022 at 13:51)</a>:</h4>
<p>Regarding your actual question: lean is telling you that this is a syntax error on line 72</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Fp</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
</code></pre></div>
<p>as it should be spelt</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Fp</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
</code></pre></div>
<p>When lean gives you error messages, you have to solve them in order, because after the first one Lean can get very confused</p>



<a name="283885446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283885446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283885446">(May 25 2022 at 13:53)</a>:</h4>
<p>or <code>def Fp (n  p : nat) : nat :=</code></p>



<a name="283888947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283888947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283888947">(May 25 2022 at 14:20)</a>:</h4>
<p>Thank you very much for this help. But as you can see in the images png I posted in my first message, my question was in other words : "there are no sets in Lean, it seems to me, so my sets must be defined using functions, is it all right or must I define sets, like in page 158 I think, of the tutorial, and define intersection, and all that ?". Thank you very much.</p>



<a name="283889266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283889266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283889266">(May 25 2022 at 14:22)</a>:</h4>
<p>Not in page 158, but in page 155, § 11.3, there is a definition of set...</p>



<a name="283890390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283890390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283890390">(May 25 2022 at 14:31)</a>:</h4>
<p><span class="user-mention" data-user-id="224188">@Chemla</span> Most of mathematics can be very naturally translated from set theory to type theory. Unless you are doing hardcore set theory in the logic sense, you should probably just use types.</p>



<a name="283890420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283890420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283890420">(May 25 2022 at 14:31)</a>:</h4>
<p>Number theory, topology, algebra, geometry... everything just uses types.</p>



<a name="283895782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283895782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283895782">(May 25 2022 at 15:07)</a>:</h4>
<p>Thank you Johan. Sincerely (I hope this word exists in english), it is not natural for me to reason with types : I am an old computer scientist (this means that I was not used to use object oriented languages - they seem to correspond to types with attributes associated to objects) but only functions. Perhaps, your answer makes me understand that I should rather use a characteristic function instead of a set. This translation of an existing paper demonstration, all the more I had not been able to write it, is presumably too headlock for me. Thank you.</p>



<a name="283897341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283897341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283897341">(May 25 2022 at 15:18)</a>:</h4>
<p>This is how I would translate that paper to Lean<br>
(I may have made some mistake, please double-check it yourself):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kd">def</span> <span class="n">F</span> <span class="o">(</span><span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">|</span> <span class="n">odd</span> <span class="n">m</span> <span class="bp">∧</span> <span class="mi">3</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">∧</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">∧</span> <span class="n">m</span> <span class="bp">%</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">m</span> <span class="bp">%</span> <span class="n">p</span> <span class="bp">≠</span> <span class="n">n</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">D</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="bp">⋂</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">//</span> <span class="n">prime</span> <span class="n">p</span> <span class="bp">∧</span> <span class="mi">3</span> <span class="bp">≤</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">≤</span> <span class="n">n.sqrt</span><span class="o">}),</span> <span class="n">F</span> <span class="n">n</span> <span class="n">p</span>

<span class="kd">lemma</span> <span class="n">lem₁</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">m</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₃</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">prime</span> <span class="n">p</span> <span class="bp">∧</span> <span class="mi">3</span> <span class="bp">≤</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">≤</span> <span class="n">m.sqrt</span> <span class="bp">→</span> <span class="n">m</span> <span class="bp">%</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem₂</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">D</span> <span class="n">n</span> <span class="bp">⊆</span> <span class="n">prime</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem₃</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">m</span><span class="o">)</span> <span class="bp">''</span> <span class="n">D</span> <span class="n">n</span> <span class="bp">⊆</span> <span class="n">prime</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">lem₄</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">6</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="o">(</span><span class="n">D</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">nonempty</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">prime</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">prime</span> <span class="n">q</span> <span class="bp">∧</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">q</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="283898159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283898159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283898159">(May 25 2022 at 15:24)</a>:</h4>
<p>Thank you very much, Patrick. I'll look to this very carefully.<br>
Ma last question : I found this page <a href="https://leanprover.github.io/logic_and_proof/sets_in_lean.html">sets in lean</a> typing "sets in Lean" in google but the page in question is not accessible in the page of current (?) tutorial here <a href="https://leanprover.github.io/theorem_proving_in_lean/index.html">last ? tutorial v 3.23.0</a>that one advised me. Is there a reason for this ? Thank you</p>



<a name="283901184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283901184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283901184">(May 25 2022 at 15:46)</a>:</h4>
<p>Your first link is from <a href="https://github.com/leanprover/logic_and_proof">https://github.com/leanprover/logic_and_proof</a> which is (was?) a CMU undergraduate course, while the second is from <a href="https://github.com/leanprover/theorem_proving_in_lean">https://github.com/leanprover/theorem_proving_in_lean</a>. I don't know what the link between the two websites is, beyond being written by similar groups of people</p>



<a name="283903958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283903958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283903958">(May 25 2022 at 16:04)</a>:</h4>
<p>Thank you. Good evening.</p>



<a name="283904079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283904079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283904079">(May 25 2022 at 16:05)</a>:</h4>
<p><span class="user-mention" data-user-id="224188">@Chemla</span>  Here is the definition of sets in Lean: <a href="https://leanprover-community.github.io/mathlib_docs/find/set">docs#set</a> (and click "Source")</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
</code></pre></div>
<p>Lean sets are characteristic functions that are accompanied by familiar set-like notation.</p>



<a name="283904365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283904365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283904365">(May 25 2022 at 16:07)</a>:</h4>
<p>(They are characteristic functions on a type, where the type can be thought of as being the universe for the elements of the set.)</p>



<a name="283926204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283926204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283926204">(May 25 2022 at 18:57)</a>:</h4>
<p>Thank you Kyle, I will try, but I really think it's too much difficult for me, even if the three first lemma have yet been formally demonstrated.</p>



<a name="283930022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/283930022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#283930022">(May 25 2022 at 19:28)</a>:</h4>
<p>What I was meaning by that was a response to your comment:</p>
<blockquote>
<p>Perhaps, your answer makes me understand that I should rather use a characteristic function instead of a set.<br>
It turns out that Lean sets are characteristic functions on types already, if that helps clarify anything.</p>
</blockquote>
<p>The fact that <code>set α</code> is defined to be <code>α → Prop</code> means that for each term <code>x : α</code> a set <code>s : set α</code> gives either true or false, which we interpret to mean whether or not <code>x</code> is an element of <code>s</code>. In fact, the notation <code>x ∈ s</code> is defined to be <code>s x</code>.</p>



<a name="284489534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Sets/near/284489534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chemla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Sets.html#284489534">(May 31 2022 at 15:03)</a>:</h4>
<p>Thank you Kyle and excuse the time I took to thank : I make all those researches on my free time, and I don't have so much such time. Last week I translated in french the synthesis text of Buzzard (the one he will present at IMU 2022 online conference perhaps) : the paper is on free access in arxiv and I translated it to familiarize a little to the subject (and I made the same with another paper concerning adeles and ideles because I believed it would help me to understand a bit more about those objects but it was not the case). <br>
I will dip (or drown) in the exercize of trying to verify "my" 3 lemmas in two weeks I hope. If I succeed (hum...), I will post.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>