---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/nat.2Efind.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nat.2Efind.html">nat.find</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268463671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/nat.find/near/268463671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/nat.2Efind.html#268463671">(Jan 18 2022 at 22:14)</a>:</h4>
<p>I am a bit unsure about the best way to phrase a lemma about <code>nat.find</code>.  Consider something like the following. Which formulation of the lemma about <code>nat.find</code> is best?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">green_are_followed_by_red</span> <span class="n">n</span> <span class="o">(</span><span class="n">hG</span> <span class="o">:</span> <span class="n">is_green</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="bp">&gt;</span> <span class="n">n.</span> <span class="n">is_red</span> <span class="n">m</span> <span class="o">:=</span> <span class="bp">…</span>

<span class="kd">lemma</span> <span class="n">first_red_after_green_is_joe1</span> <span class="n">n</span> <span class="o">(</span><span class="n">hG</span> <span class="o">:</span> <span class="n">is_green</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="bp">&gt;</span> <span class="n">n.</span> <span class="n">is_red</span> <span class="n">m</span><span class="o">)</span>
  <span class="n">nat.find</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">joe</span>

<span class="kd">lemma</span> <span class="n">first_red_after_green_is_joe2</span> <span class="n">n</span> <span class="o">(</span><span class="n">hG</span> <span class="o">:</span> <span class="n">is_green</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
  <span class="k">let</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="bp">&gt;</span> <span class="n">n.</span> <span class="n">is_red</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">green_are_followed_by_red</span> <span class="n">n</span> <span class="n">hG</span> <span class="k">in</span>
  <span class="n">nat.find</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">joe</span>

<span class="kd">lemma</span> <span class="n">first_red_after_green_is_joe3</span> <span class="n">n</span> <span class="o">(</span><span class="n">hG</span> <span class="o">:</span> <span class="n">is_green</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">nat.find</span> <span class="o">(</span><span class="n">green_are_followed_by_red</span> <span class="n">n</span> <span class="n">hG</span><span class="o">)</span> <span class="bp">=</span> <span class="n">joe</span>
</code></pre></div>
<p>The first is most readable, but annoying to use – you have to provide a proof for <code>h</code> when you want to use the lemma.<br>
The last is compact, but it somehow look silly to me to give a _specific_ proof term for that existential here (and indeed later lean prints this as <code>nat.find _ = joe</code>, because the proof term doesn’t matter…).<br>
The middle one might be a compromise.</p>
<p>Or maybe I am approaching this the wrong way?</p>
<p>(If you want a more real example; this comes up when <a href="https://github.com/leanprover-community/mathlib/pull/11540">proving that various possible nilpotency class definitions are equivalent</a>.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>