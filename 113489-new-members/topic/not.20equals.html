---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/not.20equals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html">not equals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="209184638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184638">(Sep 05 2020 at 16:07)</a>:</h4>
<p><code>
h3: ∀ a b:M, (a ≠ b ↔ ¬ (a = b)) := 
      begin
        ifinish,
      end   
</code><br>
This fails, specifically "solve1 tactic failed, focused goal has not been solved".<br>
I got here because something that should rewrite a certain equality did not rewrite when I had \neq  instead of = .<br>
So apparently \neq is not just an abbreviation for not equal ??</p>



<a name="209184718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184718">(Sep 05 2020 at 16:08)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="209184728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184728">(Sep 05 2020 at 16:09)</a>:</h4>
<p>\ne is just an abbreviation for not equals, but some tactics cannot see through abbreviations</p>



<a name="209184867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184867">(Sep 05 2020 at 16:12)</a>:</h4>
<p>What you've posted isn't a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> and it's missing something relevant, because this works fine:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">finish</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">ifinish</span>
</code></pre></div>



<a name="209184934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184934">(Sep 05 2020 at 16:14)</a>:</h4>
<p>Yes,  something trivial was wrong with the posted syntax,  and I guess Kenny Lau's answer explains the original problem.<br>
So the moral is,  I should just use neg (a=b)  and never use a \neq b.</p>



<a name="209184944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209184944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209184944">(Sep 05 2020 at 16:14)</a>:</h4>
<p>But also note that <code>ifinish</code> and <code>i</code>friends aren't advertised for a reason.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">finish</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">¬</span> <span class="n">p</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">ifinish</span>
</code></pre></div>



<a name="209185030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185030">(Sep 05 2020 at 16:16)</a>:</h4>
<p>Ouch!   I've been using ifinish  under the assumption that it is intuitionistic.   That's what it says in the file where it's defined.</p>



<a name="209185101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185101">(Sep 05 2020 at 16:18)</a>:</h4>
<p>Someone told me once about a command to see what axioms have been used in a file.  What was that again?  <br>
I've used  ifinish   many times to polish off the last few steps.  Now my whole development might not be intuitionistically correct??</p>



<a name="209185104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185104">(Sep 05 2020 at 16:18)</a>:</h4>
<p>See the top of that file.</p>
<div class="codehilite"><pre><span></span><code>The variants <span class="sb">`ifinish`</span>, <span class="sb">`iclarify`</span>, and <span class="sb">`isafe`</span> try to restrict to intuitionistic logic. But the
<span class="sb">`done`</span> tactic leaks classical logic:

<span class="s">```lean</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬¬</span><span class="n">P</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">using_smt</span> <span class="o">(</span><span class="n">do</span> <span class="n">smt_tactic</span><span class="bp">.</span><span class="n">intros</span><span class="o">,</span> <span class="n">smt_tactic</span><span class="bp">.</span><span class="n">close</span><span class="o">)</span>
<span class="s">```</span>

They also do not work well with the current heuristic instantiation method used by <span class="sb">`ematch`</span>.
So they are left here mainly for reference.
</code></pre></div>



<a name="209185105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185105">(Sep 05 2020 at 16:18)</a>:</h4>
<p><code>#print my_lemma</code></p>



<a name="209185181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185181">(Sep 05 2020 at 16:20)</a>:</h4>
<p>So "try to"  means "do not".</p>



<a name="209185275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185275">(Sep 05 2020 at 16:23)</a>:</h4>
<p>It means "does not always", you can always <code>#print axioms my_classical_lemma_name</code> to check if it did anything non-classical though.</p>



<a name="209185335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185335">(Sep 05 2020 at 16:24)</a>:</h4>
<p>There has to be a joke involving "do or do not" and classical logic in here somewhere</p>



<a name="209185336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185336">(Sep 05 2020 at 16:24)</a>:</h4>
<p>How can I use #print axioms   on my whole file at once to check if it is really intuitionistically correct?</p>



<a name="209185358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185358">(Sep 05 2020 at 16:25)</a>:</h4>
<p>(deleted)</p>



<a name="209185403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185403">(Sep 05 2020 at 16:26)</a>:</h4>
<p>And why should I (not to mention the referee of my journal article)  believe that #print axioms is telling the truth about that?</p>



<a name="209185405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185405">(Sep 05 2020 at 16:26)</a>:</h4>
<p>AFAIK there's no per-file way to check, just per-declaration.</p>



<a name="209185465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185465">(Sep 05 2020 at 16:28)</a>:</h4>
<p>So after every lemma that uses ifinish, I have to put #print axioms &lt;lemma_name&gt;   and check manually that <br>
it doesn't list anything classical.   I thought I was using a computer proof-checker.</p>



<a name="209185466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185466">(Sep 05 2020 at 16:28)</a>:</h4>
<p>Is there a tactic interface to <code>#print axioms</code>?</p>



<a name="209185502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209185502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209185502">(Sep 05 2020 at 16:29)</a>:</h4>
<p>Of course the ifinish situation is a bit unfortunate, and it is not intended to work in this way, but nobody has had the time+need+energy to fix it. As far as I know there is no obstacle to making a version of ifinish that really is intuitionistic.</p>



<a name="209186002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209186002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209186002">(Sep 05 2020 at 16:42)</a>:</h4>
<p>Here is a super hacky way to print all the axioms used by everything in the current file. Import it and invoke it with <code>#axioms_all</code>. You could grep the output for <code>choice</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">core</span>

<span class="kn">section</span>

<span class="kn">open</span> <span class="n">lean</span> <span class="n">lean</span><span class="bp">.</span><span class="n">parser</span>

<span class="bp">@</span><span class="o">[</span><span class="n">user_command</span><span class="o">]</span> <span class="n">meta</span> <span class="n">def</span> <span class="n">axioms_all</span> <span class="o">(</span><span class="bp">_</span> <span class="o">:</span> <span class="n">interactive</span><span class="bp">.</span><span class="n">parse</span> <span class="err">$</span> <span class="n">tk</span> <span class="s2">&quot;#axioms_all&quot;</span><span class="o">)</span> <span class="o">:</span> <span class="n">parser</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">e</span> <span class="err">←</span> <span class="n">get_env</span><span class="o">,</span>
   <span class="n">e</span><span class="bp">.</span><span class="n">fold</span> <span class="o">(</span><span class="n">return</span> <span class="o">())</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">d</span> <span class="n">rest</span><span class="o">,</span> <span class="n">do</span>
     <span class="n">when</span> <span class="o">(</span><span class="n">e</span><span class="bp">.</span><span class="n">in_current_file</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="o">)</span>
       <span class="o">(</span><span class="n">do</span> <span class="n">emit_command_here</span> <span class="o">(</span><span class="s2">&quot;#check &quot;</span> <span class="bp">++</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="bp">.</span><span class="n">to_string</span><span class="o">),</span>
           <span class="n">emit_command_here</span> <span class="o">(</span><span class="s2">&quot;#print axioms &quot;</span> <span class="bp">++</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="bp">.</span><span class="n">to_string</span><span class="o">),</span>
           <span class="n">return</span> <span class="o">()),</span>
     <span class="n">rest</span><span class="o">),</span>
   <span class="n">return</span> <span class="o">()</span>

<span class="kn">end</span>
</code></pre></div>



<a name="209233162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209233162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Beeson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209233162">(Sep 06 2020 at 17:05)</a>:</h4>
<p>Reid,  your code for #axioms_all  works,  and (happily) there's no "choice" in the output,  so I'm good to go.<br>
But,  your code did produce a message I thought you should see:</p>
<p>invalid 'Model.no_confusion' application, elaborator has special support for no_confusion but the expected type must be known</p>



<a name="209233211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209233211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209233211">(Sep 06 2020 at 17:07)</a>:</h4>
<p>Throw in some type annotations</p>



<a name="209233330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209233330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209233330">(Sep 06 2020 at 17:10)</a>:</h4>
<p>This is almost certainly from the line <code>#check Model.no_confusion</code> that it generates. Simplest solution: in Reid's code, change <code>"#check "</code> to <code>"#check @"</code></p>



<a name="209233398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/not%20equals/near/209233398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/not.20equals.html#209233398">(Sep 06 2020 at 17:12)</a>:</h4>
<p>This is a good idea anyway if you want to see the full types.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>