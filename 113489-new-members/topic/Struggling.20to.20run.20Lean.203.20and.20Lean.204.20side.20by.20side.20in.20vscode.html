---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html">Struggling to run Lean 3 and Lean 4 side by side in vscode</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="280100619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280100619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280100619">(Apr 25 2022 at 17:15)</a>:</h4>
<p>Hi, I installed vscode with extensions for Lean 3 and Lean 4. The Lean 4 extension works nicely, but I cannot get the Lean 3 extension to work. </p>
<p>It says:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">bash</span> <span class="bp">-</span><span class="n">c</span> <span class="bp">'</span><span class="n">curl</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">elan</span><span class="bp">/</span><span class="n">master</span><span class="bp">/</span><span class="n">elan</span><span class="bp">-</span><span class="n">init.sh</span> <span class="bp">-</span><span class="n">sSf</span> <span class="bp">|</span> <span class="n">sh</span> <span class="bp">-</span><span class="n">s</span> <span class="c1">-- -y --default-toolchain leanprover-community/lean:3.20.0 || echo &amp;&amp; read -n 1 -s -r -p "Install failed, press ENTER to continue..."' &amp;&amp; exit</span>
<span class="n">info</span><span class="o">:</span> <span class="n">downloading</span> <span class="n">installer</span>
<span class="n">info</span><span class="o">:</span> <span class="n">updating</span> <span class="n">existing</span> <span class="n">elan</span> <span class="n">installation</span>

<span class="n">Install</span> <span class="n">failed</span><span class="o">,</span> <span class="n">press</span> <span class="n">ENTER</span> <span class="n">to</span> <span class="n">continue...</span>
</code></pre></div>
<p>Does anybody know whether/how it is possible to have both versions of Lean running within VSCode? thanks in advance -</p>



<a name="280101781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280101781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280101781">(Apr 25 2022 at 17:25)</a>:</h4>
<p>Here is a screenshot of what happens when I open up a Lean3 file in vscode: </p>
<p><a href="/user_uploads/3121/DGVVhHtPA5X3H1EZqvVm7zdw/lean-error.png">lean-error.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/DGVVhHtPA5X3H1EZqvVm7zdw/lean-error.png" title="lean-error.png"><img src="/user_uploads/3121/DGVVhHtPA5X3H1EZqvVm7zdw/lean-error.png"></a></div><p>(If I load a Lean4 file, everything works just fine).</p>



<a name="280102448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280102448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280102448">(Apr 25 2022 at 17:29)</a>:</h4>
<p>I have both <code>lean</code> and <code>lean4</code> extensions installed. </p>
<p>Here is a screenshot of a Lean4 file working just fine:<br>
<a href="/user_uploads/3121/VH0YI-Lj3De1NhbSSMtrAluf/lean-working.png">lean-working.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/VH0YI-Lj3De1NhbSSMtrAluf/lean-working.png" title="lean-working.png"><img src="/user_uploads/3121/VH0YI-Lj3De1NhbSSMtrAluf/lean-working.png"></a></div>



<a name="280102920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280102920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280102920">(Apr 25 2022 at 17:33)</a>:</h4>
<p>Someone else might have a better solution, but I cherry pick the workspaces for which the extensions will be triggered by hand. For Lean 3, it's allowed to trigger on mathlib, only... And I keep the Lean 4 extension off there. And for everything else I let the Lean 4 extension trigger automatically and have the Lean 3 extension off by default (I work with Lean 4 mostly)</p>



<a name="280103763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280103763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280103763">(Apr 25 2022 at 17:40)</a>:</h4>
<p>It's definitely possible. What are your version numbers for vscode and the lean4 extension?</p>



<a name="280109009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280109009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280109009">(Apr 25 2022 at 18:20)</a>:</h4>
<p>For <code>lean4</code>, it is v0.0.71. For <code>lean</code>, it is v0.16.46. For VSCode, it is 1.66.2. (Running on Mac).</p>



<a name="280122642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280122642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280122642">(Apr 25 2022 at 20:13)</a>:</h4>
<p>That's the same setup I'm using; what's the output of <code>elan toolchain list</code>?  When I have issues with elan, I usually just uninstall/reinstall (<code>elan self uninstall</code>).</p>



<a name="280162258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280162258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280162258">(Apr 26 2022 at 05:10)</a>:</h4>
<p>I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">elan</span> <span class="n">toolchain</span> <span class="n">list</span>
<span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">20</span><span class="bp">.</span><span class="mi">0</span>
<span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span> <span class="o">(</span><span class="n">default</span><span class="o">)</span>
</code></pre></div>
<p>and:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">elan</span> <span class="k">show</span>
<span class="n">installed</span> <span class="n">toolchains</span>
<span class="c1">--------------------</span>

<span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">20</span><span class="bp">.</span><span class="mi">0</span>
<span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span> <span class="o">(</span><span class="n">default</span><span class="o">)</span>

<span class="n">active</span> <span class="n">toolchain</span>
<span class="c1">----------------</span>

<span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span> <span class="o">(</span><span class="n">default</span><span class="o">)</span>
<span class="n">Lean</span> <span class="o">(</span><span class="n">version</span> <span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">nightly</span><span class="bp">-</span><span class="mi">2022</span><span class="bp">-</span><span class="mi">03</span><span class="bp">-</span><span class="mi">28</span><span class="o">,</span> <span class="n">commit</span> <span class="mi">4</span><span class="n">e008cf8b701</span><span class="o">,</span> <span class="n">Release</span><span class="o">)</span>
</code></pre></div>
<p>Is it significant that lean3 is not in the list of active toolchains?</p>



<a name="280169278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280169278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280169278">(Apr 26 2022 at 07:12)</a>:</h4>
<p>What happens if you execute <code>elan show</code> inside the <code>logical_verification_2020</code> folder?</p>



<a name="280173245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280173245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280173245">(Apr 26 2022 at 07:57)</a>:</h4>
<p>Inside the <code>logical_verification_2020</code> folder, I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">elan</span> <span class="k">show</span>
<span class="n">installed</span> <span class="n">toolchains</span>
<span class="c1">--------------------</span>

<span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">20</span><span class="bp">.</span><span class="mi">0</span>
<span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span> <span class="o">(</span><span class="n">default</span><span class="o">)</span>

<span class="n">active</span> <span class="n">toolchain</span>
<span class="c1">----------------</span>

<span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">20</span><span class="bp">.</span><span class="mi">0</span> <span class="o">(</span><span class="n">overridden</span> <span class="kd">by</span> <span class="bp">'/</span><span class="n">Users</span><span class="bp">/</span><span class="n">richardevans</span><span class="bp">/</span><span class="n">Documents</span><span class="bp">/</span><span class="n">research</span><span class="bp">/</span><span class="n">work</span><span class="bp">/</span><span class="n">projects</span><span class="bp">/</span><span class="n">lean</span><span class="bp">/</span><span class="n">logical_verification_2020</span><span class="bp">/</span><span class="n">leanpkg.toml'</span><span class="o">)</span>
<span class="o">(</span><span class="n">error</span> <span class="n">reading</span> <span class="n">lean</span> <span class="n">version</span><span class="o">)</span>
</code></pre></div>



<a name="280174388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280174388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280174388">(Apr 26 2022 at 08:07)</a>:</h4>
<p>"error reading lean version" is suspicious. What is the error you get when running <code>lean --version</code> inside the LV2020 folder?</p>



<a name="280175880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280175880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280175880">(Apr 26 2022 at 08:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">lean</span> <span class="c1">--version</span>
<span class="n">dyld</span><span class="o">[</span><span class="mi">2506</span><span class="o">]:</span> <span class="n">Library</span> <span class="n">not</span> <span class="n">loaded</span><span class="o">:</span> <span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">gmp</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">libgmp.10.dylib</span>
  <span class="n">Referenced</span> <span class="k">from</span><span class="o">:</span> <span class="bp">/</span><span class="n">Users</span><span class="bp">/</span><span class="n">richardevans</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="c1">--lean---3.20.0/bin/lean</span>
  <span class="n">Reason</span><span class="o">:</span> <span class="n">tried</span><span class="o">:</span> <span class="bp">'/</span><span class="n">Users</span><span class="bp">/</span><span class="n">richardevans</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="c1">--lean---3.20.0/lib/libgmp.10.dylib' (no such file), '/usr/local/opt/gmp/lib/libgmp.10.dylib' (no such file), '/usr/local/lib/libgmp.10.dylib' (no such file), '/usr/lib/libgmp.10.dylib' (no such file)</span>
<span class="n">Abort</span> <span class="n">trap</span><span class="o">:</span> <span class="mi">6</span>
</code></pre></div>



<a name="280176511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280176511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280176511">(Apr 26 2022 at 08:30)</a>:</h4>
<p>Are you using a M1 Mac? If so, this part of <a href="https://github.com/leanprover/elan">the elan readme</a> might be useful:</p>
<blockquote>
<p>Lean 4 has native macOS/aarch64 releases (nightly only so far) that you can install as above by choosing the leanprover/lean4:nightly toolchain. For Lean 3, you need to run the installer under Rosetta (install using <code>softwareupdate --install-rosetta</code> if you haven't already done so) because there are no M1 releases for it right now:</p>
</blockquote>
<blockquote>
<p><code>curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | arch -x86_64 sh</code></p>
</blockquote>



<a name="280176832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280176832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280176832">(Apr 26 2022 at 08:33)</a>:</h4>
<p>Thanks Mauricio. I will try that.</p>



<a name="280178423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280178423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280178423">(Apr 26 2022 at 08:48)</a>:</h4>
<p>Oh no hang on. It isn't an M1 mac - it is an intel.</p>



<a name="280178741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280178741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280178741">(Apr 26 2022 at 08:51)</a>:</h4>
<p>Ah, I see! The instructions on the lean-community website could be useful then: <a href="https://leanprover-community.github.io/install/macos.html#intel-macs">https://leanprover-community.github.io/install/macos.html#intel-macs</a>. The script installs <code>elan</code> via <code>brew</code>, which probably installs dependencies such as <code>gmp</code> automatically.</p>



<a name="280178858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280178858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280178858">(Apr 26 2022 at 08:52)</a>:</h4>
<p>I am not a Mac user, so I'll have to let more experienced people help you if this fails</p>



<a name="280185308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280185308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280185308">(Apr 26 2022 at 09:49)</a>:</h4>
<p>Thanks! I will try this...</p>



<a name="280228508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Struggling%20to%20run%20Lean%203%20and%20Lean%204%20side%20by%20side%20in%20vscode/near/280228508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard Evans <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Struggling.20to.20run.20Lean.203.20and.20Lean.204.20side.20by.20side.20in.20vscode.html#280228508">(Apr 26 2022 at 15:41)</a>:</h4>
<p>Thanks for all your help everyone. It is working now :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>