---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Lean.20running.20very.20slowly.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html">Lean running very slowly</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281851769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20running%20very%20slowly/near/281851769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fingy Soupy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html#281851769">(May 10 2022 at 16:39)</a>:</h4>
<p>I recently divided a large file I have into several smaller files and now Lean is running very slowly and often times out. It also frequently consumes a large amount of memory 4gb+<br>
I'm wondering if there are some common performance pitfalls or an easy way to profile to find out what change led to the drastic decrease in performance</p>
<p>Some notes:</p>
<ul>
<li>I am using mathlib, installed with leanproject</li>
<li>I have Lean set to "check visible files and above"</li>
</ul>



<a name="281853041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20running%20very%20slowly/near/281853041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html#281853041">(May 10 2022 at 16:48)</a>:</h4>
<p>One thing you can do is compile olean files, which are caches of pre-processed Lean code. For example, <code>lean --make src</code> if <code>src</code> is the directory containing all your lean files, or <code>lean --make path/to/specific/file.lean</code>.</p>



<a name="281853128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20running%20very%20slowly/near/281853128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html#281853128">(May 10 2022 at 16:49)</a>:</h4>
<p>The most important question is "Was it a leaf file (not imported much) or a basic file (imported by a big proportion of mathlib?", or maybe the auxiliary question  "Is it one of your files or is it in mathlib?".</p>



<a name="281853135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20running%20very%20slowly/near/281853135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html#281853135">(May 10 2022 at 16:49)</a>:</h4>
<p>I find I usually need to restart the editor's Lean process for it to pick up the new olean files, rather than it trying to recursively process every file itself.</p>



<a name="281853965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Lean%20running%20very%20slowly/near/281853965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fingy Soupy <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Lean.20running.20very.20slowly.html#281853965">(May 10 2022 at 16:55)</a>:</h4>
<p>I will try recompiling, thanks.<br>
I'm only editing files in my own project, I haven't changed mathlib</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>