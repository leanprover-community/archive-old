---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html">Merge conflict - localization</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272863352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272863352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272863352">(Feb 22 2022 at 20:40)</a>:</h4>
<p>PR <a href="https://github.com/leanprover-community/mathlib/pull/12081">#12081</a> has a merge conflict since it was modifying <code>ring_theory/localization</code>, which no longer exists. I think that the lemmas I added there should now go in <code>ring_theory/localization/basic</code>. I don't really now how to resolve this kind of merge conflict, should I just create a new PR adding the lemmas to the new file, and close PR <a href="https://github.com/leanprover-community/mathlib/pull/12081">#12081</a>?</p>



<a name="272863564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272863564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272863564">(Feb 22 2022 at 20:42)</a>:</h4>
<p>the way I went about this for my similar PRs was something like:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp">$ </span>git switch master
<span class="gp">$ </span>git pull
<span class="gp">$ </span>git switch my_branch
<span class="gp">$ </span>git merge master
<span class="gp">$ </span>git rm src/ring_theory/localization.lean
<span class="gp gp-VirtualEnv">(re-add all my changes manually in VSCode)</span>
<span class="gp">$ </span>git commit
</code></pre></div>
<p>not sure if this is the best way</p>
<p>edit:added some extra steps</p>



<a name="272864145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272864145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272864145">(Feb 22 2022 at 20:47)</a>:</h4>
<p>OK, I'll try this. Thanks!</p>



<a name="272923062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272923062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272923062">(Feb 23 2022 at 09:26)</a>:</h4>
<p>I think your merge went wrong somehow, because GitHub claims 12 thousand new lines! I'll try and make a fixed branch</p>



<a name="272923568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272923568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272923568">(Feb 23 2022 at 09:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/is_localization_lemmas_merged">branch#is_localization_lemmas_merged</a></p>



<a name="272923614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272923614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272923614">(Feb 23 2022 at 09:32)</a>:</h4>
<p>I followed Eric's steps (with a quick <code>git diff</code> at the start to see what I had to re-add)</p>



<a name="272923931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272923931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272923931">(Feb 23 2022 at 09:36)</a>:</h4>
<p>I would recommend:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span> <span class="n">master</span>
<span class="bp">$</span> <span class="n">git</span> <span class="n">merge</span> <span class="n">origin</span><span class="bp">/</span><span class="n">master</span>
</code></pre></div>
<p>instead of what you suggested as <code>git switch master; git pull; git switch my_branch; git merge master</code></p>



<a name="272923995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272923995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272923995">(Feb 23 2022 at 09:37)</a>:</h4>
<p>I suspect the mess on the branch was caused by somehow doing the merge in the wrong direction</p>



<a name="272924022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272924022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272924022">(Feb 23 2022 at 09:37)</a>:</h4>
<p><del>Wouldn't the following command then become <code>git merge origin/master</code>?</del></p>



<a name="272924172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272924172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272924172">(Feb 23 2022 at 09:38)</a>:</h4>
<p>In any case, I'm happy to apply my new branch or you can do it with the following commands:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ git fetch
$ git push origin 67258754ade8ef18882b8d39176dd684a7908748:refs/heads/is_localization_lemmas --force-with-lease
</code></pre></div>
<p>The first command downloads the latest commits from GitHub, the second command tells GitHub that the <code>is_localization_lemmas</code> branch should point to commit <code>67258754ade8ef18882b8d39176dd684a7908748</code> (which is the one I just pushed)</p>



<a name="272924196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272924196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272924196">(Feb 23 2022 at 09:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Merge.20conflict.20-.20localization/near/272924022">said</a>:</p>
<blockquote>
<p>Wouldn't the following command then become <code>git merge origin/master</code>?</p>
</blockquote>
<p>Yes, see my edit</p>



<a name="272927956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272927956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272927956">(Feb 23 2022 at 10:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Merge.20conflict.20-.20localization/near/272924172">said</a>:</p>
<blockquote>
<p>In any case, I'm happy to apply my new branch or you can do it with the following commands:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ git fetch
$ git push origin 67258754ade8ef18882b8d39176dd684a7908748:refs/heads/is_localization_lemmas --force-with-lease
</code></pre></div>
<p>The first command downloads the latest commits from GitHub, the second command tells GitHub that the <code>is_localization_lemmas</code> branch should point to commit <code>67258754ade8ef18882b8d39176dd684a7908748</code> (which is the one I just pushed)</p>
</blockquote>
<p>Sorry, I just saw this. I have just pushed changes to my branch (adding my lemmas to the new files). Should I still do this now?</p>



<a name="272928297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272928297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272928297">(Feb 23 2022 at 10:16)</a>:</h4>
<p>If you could push your changes, I can fix the merge and push the fixed versions to your branch</p>



<a name="272928744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272928744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272928744">(Feb 23 2022 at 10:20)</a>:</h4>
<p>(Or is commit <code>e744644705</code> already the last part?)</p>



<a name="272928954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272928954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272928954">(Feb 23 2022 at 10:22)</a>:</h4>
<p>I just pushed the changes <a href="https://github.com/leanprover-community/mathlib/pull/12081/commits/e744644705f9d6a7daa2a9556cc9876b1265bfc0">here</a>. Is this what you mean? Other that this, the only file I have intentionally changed is <code>field_theory/ratfunc</code>, in <a href="https://github.com/leanprover-community/mathlib/pull/12081/commits/7de1bf7aaa3d16f237d38f074bec0d719e5dd0fb">this previous commit</a>.</p>



<a name="272929116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929116">(Feb 23 2022 at 10:24)</a>:</h4>
<p>Yes, that commit is the last part.</p>



<a name="272929148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929148">(Feb 23 2022 at 10:24)</a>:</h4>
<p>Thank you! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="272929153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929153">(Feb 23 2022 at 10:24)</a>:</h4>
<p>Perfect, then I already got those changes. Shall I go ahead and push the fixed commits to your branch?</p>



<a name="272929180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> María Inés de Frutos Fernández <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929180">(Feb 23 2022 at 10:24)</a>:</h4>
<p>That would be great, thanks!</p>



<a name="272929196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929196">(Feb 23 2022 at 10:24)</a>:</h4>
<p>Done <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="272929318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929318">(Feb 23 2022 at 10:25)</a>:</h4>
<p>Sorry, now it's done!</p>



<a name="272929319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929319">(Feb 23 2022 at 10:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Merge.20conflict.20-.20localization/near/272923931">said</a>:</p>
<blockquote>
<p>I would recommend:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span> <span class="n">master</span>
<span class="bp">$</span> <span class="n">git</span> <span class="n">merge</span> <span class="n">origin</span><span class="bp">/</span><span class="n">master</span>
</code></pre></div>
<p>instead of what you suggested as <code>git switch master; git pull; git switch my_branch; git merge master</code></p>
</blockquote>
<p>can you explain what the difference is, Eric? I should learn git better</p>



<a name="272929547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272929547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272929547">(Feb 23 2022 at 10:28)</a>:</h4>
<p>Eric W.'s commands only update the remote tracking branch <code>origin/master</code> with <code>git fetch</code>, while Eric R.'s commands update the remote branches and also the local branch <code>master</code> with <code>git pull</code>. It's less work, so less commands to potentially mess up or forget.</p>



<a name="272945096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272945096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272945096">(Feb 23 2022 at 13:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Merge.20conflict.20-.20localization/near/272929318">said</a>:</p>
<blockquote>
<p>Sorry, now it's done!</p>
</blockquote>
<p>Watch out though <span class="user-mention" data-user-id="406490">@María Inés de Frutos Fernández</span>, you'll need to run <code>git fetch origin</code> <code>git reset --hard origin/yourbranchname</code> (<strong>which throws away your local changes</strong>), otherwise next time you commit you're reintroduce the history mess</p>



<a name="272945196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Merge%20conflict%20-%20localization/near/272945196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Merge.20conflict.20-.20localization.html#272945196">(Feb 23 2022 at 13:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113489-new-members/topic/Merge.20conflict.20-.20localization/near/272929547">said</a>:</p>
<blockquote>
<p>Eric W.'s commands only update the remote tracking branch <code>origin/master</code> with <code>git fetch</code>, while Eric R.'s commands update the remote branches and also the local branch <code>master</code> with <code>git pull</code>. It's less work, so less commands to potentially mess up or forget.</p>
</blockquote>
<p>More importantly though, <code>fetch</code> doesn't touch your working tree and throw away changes you forgot to commit, unlike <code>switch</code> which I think might.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>