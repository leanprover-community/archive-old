---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html">Hints on double Induction with le_induction</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="299673799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299673799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299673799">(Sep 20 2022 at 02:06)</a>:</h4>
<p>Looking through <code>mathlib</code>, I haven't been able to find double induction.  Any suggestions on double induction using <code>le_induction</code> (starting from 1 for both indices as seen in the hypotheses)?   Doesn't seem like there is a double index variant of <code>le_induction</code>.  The code below is what I am trying to prove.  I don't need anyone to actually prove this for me as I would like to do it myself and just looking for some hints to help me along. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">nat.le_induction</span><span class="o">,</span> <span class="c1">-- this is for one index</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="299673892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299673892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299673892">(Sep 20 2022 at 02:08)</a>:</h4>
<p>double induction is usually just an induction inside another one</p>



<a name="299673951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299673951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299673951">(Sep 20 2022 at 02:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction/near/299673892">said</a>:</p>
<blockquote>
<p>double induction is usually just an induction inside another one</p>
</blockquote>
<p>Maybe I am just being blind but do you know of any examples in the code base where this is happening so I can use it as an example?</p>



<a name="299677875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299677875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299677875">(Sep 20 2022 at 03:12)</a>:</h4>
<p>Will try nested induction for now (not sure on the <code>le_induction</code> part though)</p>



<a name="299692282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299692282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299692282">(Sep 20 2022 at 06:48)</a>:</h4>
<p>I would formalise the statement like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
</code></pre></div>
<p>because then you are doing the mathematically correct division, not "division with remainder", which is worse to work with.</p>



<a name="299692372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299692372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299692372">(Sep 20 2022 at 06:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">tactic.slim_check</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">slim_check</span><span class="o">,</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  ===================</span>
<span class="cm">Found problems!</span>

<span class="cm">m := 1</span>
<span class="cm">n := 1</span>
<span class="cm">guard: 1 ≤ 1</span>
<span class="cm">guard: 1 ≤ 1</span>
<span class="cm">issue: 4 = 2 does not hold</span>
<span class="cm">(0 shrinks)</span>
<span class="cm">-------------------</span>
<span class="cm">-/</span>
<span class="kd">end</span>
</code></pre></div>
<p>Your statement as it stands appears to be wrong (with or without the coercion to rationals). Just to be clear: <code>finset.range n</code> is 0&lt;=j&lt;n.</p>



<a name="299694582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299694582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299694582">(Sep 20 2022 at 07:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
</code></pre></div>
<p>I think this is the correct statement (and I've dropped the hypotheses that m,n&gt;=1 as I don't think they're necessary)</p>



<a name="299695238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299695238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299695238">(Sep 20 2022 at 07:15)</a>:</h4>
<p>My instinct for the proof would not be to just launch into Mario's strategy (a single induction) until you're absolutely clear on precisely which statement in one variable you want to prove by induction (the statement you want to prove has two variables). I am not sure that there's just one "double induction"  -- can you say precisely which inductive principle you want to use? The following would be an interesting experiment:</p>
<p>(1) state <em>in Lean</em> what you mean by "double induction" (hopefully in a form strong enough to prove your example mathematically)<br>
(2) Assume your induction principle and <code>apply</code> it to prove your example<br>
(3) prove your double induction principle (it will be easier to prove a more abstract statement than to prove the special case we have here)</p>



<a name="299698171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299698171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299698171">(Sep 20 2022 at 07:38)</a>:</h4>
<p>OK so I have a relatively straightforward proof using only single induction, using a "helper lemma". I'll post a hint and a solution as spoilers.</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Hint (helper lemma statement)</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kn">open</span> <span class="n">finset</span>

<span class="kd">lemma</span> <span class="n">helper_lemma</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">m</span><span class="o">,</span> <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="bp">...</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp_rw</span> <span class="n">helper_lemma</span><span class="o">,</span>
  <span class="bp">...</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>
<div class="spoiler-block"><div class="spoiler-header">
<p>The proofs</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kn">open</span> <span class="n">finset</span>

<span class="kd">lemma</span> <span class="n">helper_lemma</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">m</span><span class="o">,</span> <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">m</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">m</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sum_range_succ</span><span class="o">,</span> <span class="n">hd</span><span class="o">],</span>
    <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="bp">=</span>
<span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp_rw</span> <span class="n">helper_lemma</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">m</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sum_range_succ</span><span class="o">,</span> <span class="n">hd</span><span class="o">],</span>
    <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="299704106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299704106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299704106">(Sep 20 2022 at 08:25)</a>:</h4>
<p>maybe <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.sub_induction">docs#nat.sub_induction</a> might also be useful</p>



<a name="299704566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299704566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299704566">(Sep 20 2022 at 08:28)</a>:</h4>
<p>and also <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.strong_sub_recursion">docs#nat.strong_sub_recursion</a></p>



<a name="299707141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299707141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299707141">(Sep 20 2022 at 08:46)</a>:</h4>
<p>Or perhaps something like <a href="https://leanprover-community.github.io/mathlib_docs/find/well_founded.induction">docs#well_founded.induction</a> on NxN</p>



<a name="299831763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299831763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299831763">(Sep 20 2022 at 19:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction/near/299692372">said</a>:</p>
<blockquote>
<p>Your statement as it stands appears to be wrong (with or without the coercion to rationals). Just to be clear: <code>finset.range n</code> is 0&lt;=j&lt;n.</p>
</blockquote>
<p>From <em>Handbook of Mathematical Induction - Theory and Applications</em>, Theorem 3.5.1 on page 44 states:</p>
<p><strong>Theorem 3.5.1.</strong> <em>Let positive integers m and n be given.</em></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>m</mi><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\sum_{i=1}^m \sum_{j=1}^n (i + j) = \dfrac{mn(m + n + 2)}{2}.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0652em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">mn</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">.</span></span></span></span></span></p>
<p>The textbook then proceeds to give a proof of this using double induction.  Yes, that is why the range was bumped up to <code>m + 1</code> and <code>n + 1</code>, so that it would actually be summing up to <code>m</code> and <code>n</code>.</p>



<a name="299832005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299832005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299832005">(Sep 20 2022 at 19:22)</a>:</h4>
<p>Yes, so <code>range n</code> is <code>{0, 1, ..., n - 1}</code>, not <code>{1, ..., n}</code></p>



<a name="299833818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299833818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299833818">(Sep 20 2022 at 19:32)</a>:</h4>
<p>Bumping to <code>m+1</code> and <code>n+1</code> sums from 0 to m and from 0 to n, and the terms where either i = 0 or j = 0 matter.</p>



<a name="299833877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299833877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299833877">(Sep 20 2022 at 19:33)</a>:</h4>
<p>yes, was just noticing this actually</p>



<a name="299833916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299833916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299833916">(Sep 20 2022 at 19:33)</a>:</h4>
<p>Seems I need to find a range that can start from 1</p>



<a name="299834727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299834727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299834727">(Sep 20 2022 at 19:38)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.Ico">docs#finset.Ico</a></p>



<a name="299834982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299834982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299834982">(Sep 20 2022 at 19:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction/near/299695238">said</a>:</p>
<blockquote>
<p>(1) state <em>in Lean</em> what you mean by "double induction" (hopefully in a form strong enough to prove your example mathematically)<br>
(2) Assume your induction principle and <code>apply</code> it to prove your example<br>
(3) prove your double induction principle (it will be easier to prove a more abstract statement than to prove the special case we have here)</p>
</blockquote>
<p>Well last night late before bed I was playing around with (3) even before I read your comment and came up with this.  I just got to my computer so haven't tried proving it yet.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[elab_as_eliminator]</span> <span class="kd">lemma</span> <span class="n">le_double_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">l</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="kd">end</span>
</code></pre></div>
<p>This is the method of double induction that I was going for at least (as there are several different ways of doing it).  So yes, if I was able to have a proof of this, then I could apply it (your (2) above) and then go from there solving the pieces.</p>



<a name="299836138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299836138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299836138">(Sep 20 2022 at 19:47)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>

<span class="kd">@[elab_as_eliminator]</span> <span class="kd">lemma</span> <span class="n">le_double_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">l</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span> <span class="n">hm</span> <span class="n">hn</span><span class="o">,</span> <span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">nat.le_induction</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">h2</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat.le_induction</span> <span class="n">h0</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="n">h</span><span class="o">,</span> <span class="n">h1</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">hm</span>
<span class="kd">end</span>
</code></pre></div>



<a name="299836394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299836394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299836394">(Sep 20 2022 at 19:49)</a>:</h4>
<p>Might as well add it to mathlib now ;)</p>



<a name="299837918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299837918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299837918">(Sep 20 2022 at 19:57)</a>:</h4>
<p>well you can see what I meant by "use <code>le_induction</code> twice"</p>



<a name="299838014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299838014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299838014">(Sep 20 2022 at 19:58)</a>:</h4>
<p>every subproof comes up exactly once so I don't see a big reason to have the lemma</p>



<a name="299886412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hints%20on%20double%20Induction%20with%20le_induction/near/299886412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Newell Jensen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hints.20on.20double.20Induction.20with.20le_induction.html#299886412">(Sep 21 2022 at 05:27)</a>:</h4>
<p>Almost there but having a hard time on the last  part.  Suggestions?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">import</span> <span class="n">algebra.big_operators.intervals</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>


<span class="kd">@[elab_as_eliminator]</span> <span class="kd">lemma</span> <span class="n">le_double_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">l</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∀</span><span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span> <span class="n">hm</span> <span class="n">hn</span><span class="o">,</span> <span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">nat.le_induction</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span> <span class="n">h</span><span class="o">,</span> <span class="n">h2</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat.le_induction</span> <span class="n">h0</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="n">h</span><span class="o">,</span> <span class="n">h1</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">hm</span>
<span class="kd">end</span>


<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">→</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
<span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_double_induction</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">m</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
        <span class="o">(</span><span class="bp">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">finset.sum_Ico_succ_top</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h2</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">2</span><span class="o">,</span> <span class="n">nat.add_div_of_dvd_left</span><span class="o">,</span>
      <span class="n">nat.mul_div_cancel</span><span class="o">,</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">m</span> <span class="mi">2</span><span class="o">,</span> <span class="n">nat.add_div_of_dvd_left</span><span class="o">,</span>
      <span class="n">nat.mul_div_cancel</span><span class="o">,</span> <span class="n">mul_add</span> <span class="n">m</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">2</span><span class="o">,</span> <span class="n">nat.add_div_of_dvd_left</span><span class="o">,</span>
      <span class="n">nat.mul_div_cancel</span><span class="o">],</span>
    <span class="n">ring_nf</span><span class="o">,</span>
    <span class="n">repeat</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">}</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intros</span> <span class="n">m</span> <span class="n">n</span> <span class="n">h3</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h4</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
      <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span><span class="o">)</span> <span class="bp">=</span>
      <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.Ico</span> <span class="mi">1</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
      <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="n">j</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">,</span>
    <span class="o">{</span> <span class="c1">-- want to do `rw finset.sum_Ico_succ_top` like above but</span>
      <span class="c1">-- it gets applied to `1 (m + 1)` and not the `1 (n + 1 + 1)`</span>
      <span class="c1">-- like I would like, any suggestions?</span>
      <span class="gr">sorry</span> <span class="o">},</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>