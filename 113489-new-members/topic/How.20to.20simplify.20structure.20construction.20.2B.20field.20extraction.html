---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html">How to simplify structure construction + field extraction</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="213769778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213769778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213769778">(Oct 19 2020 at 11:06)</a>:</h4>
<p>Quick question: If I have <code>{my_field := expression}.my_field</code>,<br>
then how can I simplify this to <code>expression</code>? <code>simp</code> works, but I'd like to know what function I would have to apply to perform this manually.<br>
As always, thanks for all the help I'm getting here!</p>



<a name="213770170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213770170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213770170">(Oct 19 2020 at 11:10)</a>:</h4>
<p><code>dsimp only</code></p>



<a name="213770482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213770482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213770482">(Oct 19 2020 at 11:14)</a>:</h4>
<p>In term mode, you don't have to apply anything at all to perform this reduction</p>



<a name="213770500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213770500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213770500">(Oct 19 2020 at 11:14)</a>:</h4>
<p>it will just naturally happen if you apply a theorem that wouldn't otherwise typecheck</p>



<a name="213770520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213770520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213770520">(Oct 19 2020 at 11:15)</a>:</h4>
<p>in fact, this is what <code>refl</code> does - you apply a theorem that says <code>a = a</code> but the two sides aren't obviously the same so lean performs reduction until they are</p>



<a name="213794342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213794342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213794342">(Oct 19 2020 at 14:33)</a>:</h4>
<p>I have a proof of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">h</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="n">P</span> <span class="n">j</span> <span class="n">a</span><span class="o">)</span> <span class="bp">\</span><span class="n">iff</span> <span class="n">p</span> <span class="n">i</span> <span class="n">a</span>
</code></pre></div>

<p>how can I apply this to prove the following</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">\</span><span class="n">a</span> <span class="bp">|</span>  <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="n">P</span> <span class="n">j</span> <span class="n">a</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">\</span><span class="n">a</span> <span class="bp">|</span> <span class="k">Pi</span> <span class="n">a</span><span class="o">}</span>
</code></pre></div>

<p>I thought I could rw h or intro a but it doesn't work.</p>



<a name="213794535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213794535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213794535">(Oct 19 2020 at 14:34)</a>:</h4>
<p>Start with <code>ext a</code></p>



<a name="213795123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795123">(Oct 19 2020 at 14:38)</a>:</h4>
<p>Also have a look at <a href="https://leanprover-community.github.io/mathlib_docs/find/set.ext">docs#set.ext</a></p>



<a name="213795134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795134">(Oct 19 2020 at 14:38)</a>:</h4>
<p>which, by the way, is an application of <code>set.ext</code> in term mode</p>



<a name="213795186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795186">(Oct 19 2020 at 14:39)</a>:</h4>
<p>Ha ha! I was faster!</p>



<a name="213795353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795353">(Oct 19 2020 at 14:40)</a>:</h4>
<p>omg thx guys :D</p>



<a name="213795378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795378">(Oct 19 2020 at 14:40)</a>:</h4>
<p>Golol, what we mean is you can have a look at:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">P</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">Q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">P</span> <span class="n">x</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">Q</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">set.ext</span> <span class="n">h</span>
<span class="c1">--funext (λ x, propext $ h x)</span>
</code></pre></div>



<a name="213795420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795420">(Oct 19 2020 at 14:40)</a>:</h4>
<p>where the commented line is the proof hidden under <code>set.ext h</code></p>



<a name="213795831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213795831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213795831">(Oct 19 2020 at 14:43)</a>:</h4>
<p>Aah, good old functional extensionality</p>



<a name="213807170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213807170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213807170">(Oct 19 2020 at 15:58)</a>:</h4>
<p>Alright, I need this one extra thing. My situation is the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">β</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">m</span><span class="o">:</span> <span class="n">measurable_space</span> <span class="n">β</span>
<span class="n">x</span><span class="o">:</span> <span class="n">set</span> <span class="n">β</span>
<span class="n">h</span><span class="o">:</span> <span class="n">m.is_measurable'</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">measurable_space.generate_measurable</span> <span class="n">m.is_measurable'</span> <span class="n">x</span>
</code></pre></div>

<p>Here I know that the inductively generated type <code>measurable_space.generate_measurable m.is_measurable'</code><br>
must at least make every set measurable which is in m.is_measurable' due to the constructor basic.<br>
I couldn't manage to do induction on  measurable_space.generate_measurable m.is_measurable... how can I use that with the basic case I can finish my proof?</p>



<a name="213809995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213809995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213809995">(Oct 19 2020 at 16:19)</a>:</h4>
<p>There is nothing to induct on here, just use the constructor <code>basic</code> as you said.</p>



<a name="213810189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213810189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213810189">(Oct 19 2020 at 16:21)</a>:</h4>
<p>Induction is the opposite process--"destructing" a value of type <code>generate_measurable ...</code>. Here <code>generate_measurable</code> is in the goal, so you want to construct a value, which is what the constructors do.</p>



<a name="213810733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20simplify%20structure%20construction%20%2B%20field%20extraction/near/213810733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20simplify.20structure.20construction.20.2B.20field.20extraction.html#213810733">(Oct 19 2020 at 16:24)</a>:</h4>
<p>Oh of course, I was totally stuck on this. Finally done!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>