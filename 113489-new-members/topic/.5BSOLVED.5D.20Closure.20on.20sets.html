---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html">[SOLVED] Closure on sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212292192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292192">(Oct 05 2020 at 12:31)</a>:</h4>
<p>I have a function  on <code>f : set state → set state</code> and know that <code>fintype state</code>. I would like to find the closure or fixed point of this, i.e. <code>s : set state</code> such that <code>f s = s</code>. I have found <code>has_fix</code> in mathlib but I am unsure how to relate this to <code>fintype</code>s.</p>



<a name="212292430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292430">(Oct 05 2020 at 12:33)</a>:</h4>
<p>It doesn't need to have a fix point, right?</p>



<a name="212292453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292453">(Oct 05 2020 at 12:33)</a>:</h4>
<p>Do you mean that you want the <em>set</em> of all fixpoints? Or do you want to construct one?</p>



<a name="212292457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292457">(Oct 05 2020 at 12:33)</a>:</h4>
<p>I also can show <code>t ⊂ f t</code> for all <code>t</code></p>



<a name="212292528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292528">(Oct 05 2020 at 12:34)</a>:</h4>
<p>Do you care about decidability? (As in, is this maths or CS?)</p>



<a name="212292567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292567">(Oct 05 2020 at 12:34)</a>:</h4>
<p>Given an initial <code>s</code> I want to itterate <code>f</code> until I get a fixed point</p>



<a name="212292579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292579">(Oct 05 2020 at 12:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="267202">Fox Thomson</span> <a href="#narrow/stream/113489-new-members/topic/Closure.20on.20sets/near/212292457">said</a>:</p>
<blockquote>
<p>I also can show <code>t ⊂ f t</code> for all <code>t</code></p>
</blockquote>
<p>for all <code>t</code>?? So also for <code>{x}</code>?</p>



<a name="212292611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292611">(Oct 05 2020 at 12:35)</a>:</h4>
<p>And decidability would be ideal, it's for NFA's</p>



<a name="212292625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292625">(Oct 05 2020 at 12:35)</a>:</h4>
<p>I don't know what NFA is</p>



<a name="212292660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292660">(Oct 05 2020 at 12:35)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton">https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton</a></p>



<a name="212292955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212292955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212292955">(Oct 05 2020 at 12:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Closure.20on.20sets/near/212292579">said</a>:<br>
for all <code>t</code>?? So also for <code>{x}</code>?</p>
<p>For instance <code>f(∅) = ∅</code>, <code>f({a}) = {a}</code>, <code>f({b}) = {a, b}</code>, <code>f({a, b}) = {a, b}</code>.</p>



<a name="212293009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293009">(Oct 05 2020 at 12:39)</a>:</h4>
<p>Aha, thx</p>



<a name="212293241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293241">(Oct 05 2020 at 12:41)</a>:</h4>
<p>But there can be multiple fix points, so this sounds like you'll be doing maths instead of algorithms</p>



<a name="212293261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293261">(Oct 05 2020 at 12:41)</a>:</h4>
<p>There isn't an algorithmic way to choose one</p>



<a name="212293424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293424">(Oct 05 2020 at 12:43)</a>:</h4>
<p>Wait, I'm still confused... why is <code>s = finset.univ</code> not what you want?</p>



<a name="212293478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293478">(Oct 05 2020 at 12:43)</a>:</h4>
<p>The algorithm I had in mind was if <code>S = f(S)</code> then <code>fixpoint S = S</code>, otherwise <code>fixpoint S = fixpoint (f S)</code></p>



<a name="212293480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293480">(Oct 05 2020 at 12:43)</a>:</h4>
<p>There should be a unique least fixpoint. I know because I presented a lecture on how to do this in Lean last year :)</p>



<a name="212293563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293563">(Oct 05 2020 at 12:44)</a>:</h4>
<p>Fixpoints given an initial set</p>



<a name="212293590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293590">(Oct 05 2020 at 12:44)</a>:</h4>
<p>I'll shut up... I'm clearly out of my comfort zone.</p>



<a name="212293615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293615">(Oct 05 2020 at 12:44)</a>:</h4>
<p>Does section 10.3 of <a href="https://github.com/blanchette/logical_verification_2020/raw/master/hitchhikers_guide.pdf">the Hitchhikers guide</a> help?</p>



<a name="212293682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212293682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212293682">(Oct 05 2020 at 12:45)</a>:</h4>
<p>Ah sorry, you have <code>x ≤ f x</code> instead of monotonicity.</p>



<a name="212294069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212294069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212294069">(Oct 05 2020 at 12:49)</a>:</h4>
<p>Hmm, I think we should be able to do this with inductive types:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">nfa</span>

<span class="kd">def</span> <span class="n">state</span> <span class="o">:=</span> <span class="n">ℕ</span>

<span class="kd">inductive</span> <span class="n">least_fixpoint</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">state</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">state</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">state</span> <span class="bp">→</span> <span class="n">state</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">base</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="n">least_fixpoint</span> <span class="n">s</span> <span class="n">x</span>
<span class="bp">|</span> <span class="n">step</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span> <span class="n">x</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">least_fixpoint</span> <span class="o">(</span><span class="n">f</span> <span class="n">s</span><span class="o">)</span> <span class="n">x</span><span class="o">),</span> <span class="n">least_fixpoint</span> <span class="n">s</span> <span class="n">x</span>

<span class="kd">end</span> <span class="n">nfa</span>
</code></pre></div>



<a name="212294604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%5BSOLVED%5D%20Closure%20on%20sets/near/212294604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.5BSOLVED.5D.20Closure.20on.20sets.html#212294604">(Oct 05 2020 at 12:55)</a>:</h4>
<p>I think that will work, thank you!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>