---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/is_regular.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html">is_regular</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="226660901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226660901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226660901">(Feb 17 2021 at 14:11)</a>:</h4>
<p>Any preference for which one is <code>left</code> and which one is <code>right</code>?</p>
<p>Also, should the ambidextrous property be the conjunction of the other two or does it not matter?</p>
<p>I.e., should it be</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_regular</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">is_left_regular</span> <span class="n">c</span> <span class="bp">âˆ§</span> <span class="n">is_right_regular</span> <span class="n">c</span>
</code></pre></div>



<a name="226661385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226661385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226661385">(Feb 17 2021 at 14:14)</a>:</h4>
<p>We could also use structures, then you can name the fields</p>



<a name="226661431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226661431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226661431">(Feb 17 2021 at 14:15)</a>:</h4>
<p>I might even define them as <code>is_lregular</code> and <code>is_rregular</code> or this is too much?</p>



<a name="226661564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226661564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226661564">(Feb 17 2021 at 14:16)</a>:</h4>
<p>I guess we can define this for arbitrary <code>has_mul</code>s?</p>



<a name="226661872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226661872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226661872">(Feb 17 2021 at 14:18)</a>:</h4>
<p>I guess so: the definition only uses multiplication!</p>



<a name="226662221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226662221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226662221">(Feb 17 2021 at 14:20)</a>:</h4>
<p>I updated the definition above to only require <code>has_mul</code>.   I will now think about what it means that we can use classes!</p>
<p>With classes now.</p>



<a name="226663992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226663992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226663992">(Feb 17 2021 at 14:33)</a>:</h4>
<p>Hmm, it's better to use <code>structure</code> instead of <code>class</code>. Because you don't want to use typeclass inference, presumably.</p>



<a name="226664046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226664046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226664046">(Feb 17 2021 at 14:34)</a>:</h4>
<p>And you can use dot-notation <code>is_regular.is_left_regular</code> if you name the lemmas appropriately</p>



<a name="226664640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226664640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226664640">(Feb 17 2021 at 14:38)</a>:</h4>
<p><code>structure</code> instead of <code>class</code> and dot-notation (if I understood correctly)!</p>



<a name="226664900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226664900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226664900">(Feb 17 2021 at 14:40)</a>:</h4>
<p>Does this mean that if I then assume <code>{a : R} (ra : is_regular a)</code> I can access the two properties by <code>cases ra</code>?</p>



<a name="226664962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226664962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226664962">(Feb 17 2021 at 14:40)</a>:</h4>
<p><code>ra.mul_left_inj</code></p>



<a name="226665024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665024">(Feb 17 2021 at 14:41)</a>:</h4>
<p>Maybe splitting into <code>left</code> and <code>right</code> should wait until we see a need for it.</p>



<a name="226665222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665222">(Feb 17 2021 at 14:42)</a>:</h4>
<p>Are you suggesting to remove the two or to leave them in, but not use them very much?  It does seem like a good way of halving the length of the first few lemmas (at the price of doubling the number of lemmas, of course!).</p>



<a name="226665253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665253">(Feb 17 2021 at 14:42)</a>:</h4>
<p>I think what we need now is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_unit.is_regular</span>

<span class="kd">lemma</span> <span class="n">is_regular_of_cancel_semigroup</span> <span class="o">[</span><span class="n">cancel_semigroup</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="n">g</span> <span class="o">:=</span> <span class="c1">-- find correct typeclass name</span>

<span class="kd">lemma</span> <span class="n">is_regular_of_integral_domain</span>
</code></pre></div>



<a name="226665316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665316">(Feb 17 2021 at 14:43)</a>:</h4>
<p>And also the version with <code>with_zero</code> assuming non-zero!</p>



<a name="226665325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665325">(Feb 17 2021 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/is_regular/near/226665222">said</a>:</p>
<blockquote>
<p>Are you suggesting to remove the two or to leave them in, but not use them very much?  It does seem like a good way of halving the length of the first few lemmas (at the price of doubling the number of lemmas, of course!).</p>
</blockquote>
<p>I don't really know. I guess it doesn't matter too much which aproach we take</p>



<a name="226665347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665347">(Feb 17 2021 at 14:43)</a>:</h4>
<p>You put the zero in, to immediately exclude it...</p>



<a name="226665479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665479">(Feb 17 2021 at 14:44)</a>:</h4>
<p>But this is definitely a case that I care about: non-zero elements being regular is definitely a case that I want to be able to talk about easily!</p>



<a name="226665873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665873">(Feb 17 2021 at 14:47)</a>:</h4>
<p>The nice thing about this definition is that it automatically excludes <code>0</code>.</p>



<a name="226665884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665884">(Feb 17 2021 at 14:47)</a>:</h4>
<p>Of course, if it is just an <code>and</code>, then <code>is_regular.left</code> and <code>is_regular.right</code> still works!</p>



<a name="226665962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226665962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226665962">(Feb 17 2021 at 14:48)</a>:</h4>
<p>Ooh, that's a sort of sweet hack (-;</p>



<a name="226666340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226666340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226666340">(Feb 17 2021 at 14:50)</a>:</h4>
<p>Aaaahh!!  Yakov, I really like this observation!!</p>
<p>We should definitely keep the two then!</p>



<a name="226667184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226667184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226667184">(Feb 17 2021 at 14:55)</a>:</h4>
<p>I added a proof that a unit is a regular element.  <del>(Not the bundled version, though.)</del></p>



<a name="226668820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226668820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226668820">(Feb 17 2021 at 15:05)</a>:</h4>
<p>I might PR what is above: does this seem like a good idea?</p>



<a name="226668870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226668870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226668870">(Feb 17 2021 at 15:05)</a>:</h4>
<p>Right now we have the following problem:</p>



<a name="226669030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226669030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226669030">(Feb 17 2021 at 15:06)</a>:</h4>
<p>People interested in commutative algebra show up, say "I'm interested in formalising flat modules / projective modules / regular sequences / regular local rings" and we say "yeah sure thing beginner, go ahead! By the way, definitions are really hard, you don't actually stand a chance"</p>



<a name="226669150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226669150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226669150">(Feb 17 2021 at 15:07)</a>:</h4>
<p>If we just got some of these <em>definitions</em> into Lean, then when people show up and say "have you got flat modules?" we say "yeah sure! Feel free to prove a theorem about them" and this is _much_ easier.</p>



<a name="226669212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226669212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226669212">(Feb 17 2021 at 15:07)</a>:</h4>
<p>Ok, so you are in favour of PRing this, right?  Ahaha</p>



<a name="226669384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226669384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226669384">(Feb 17 2021 at 15:08)</a>:</h4>
<p>I guess this has to be balanced with the fact that "every definition should come with a comprehensive API"</p>



<a name="226669846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226669846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226669846">(Feb 17 2021 at 15:11)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> If you call the lemma <code>is_unit.is_regular</code>, then you can write <code>hu.is_regular</code> if <code>hu : is_unit u</code>.</p>



<a name="226670030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670030">(Feb 17 2021 at 15:12)</a>:</h4>
<p>Johan, you mean <em>outside</em> the <code>is_regular</code> namespace, right?</p>



<a name="226670432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670432">(Feb 17 2021 at 15:15)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> exactly</p>



<a name="226670470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670470">(Feb 17 2021 at 15:15)</a>:</h4>
<p>the fully qualified name should be <code>is_unit.is_regular</code></p>



<a name="226670551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670551">(Feb 17 2021 at 15:15)</a>:</h4>
<p>But I made DVRs and made essentially 0 API</p>



<a name="226670625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670625">(Feb 17 2021 at 15:16)</a>:</h4>
<p>and it just kind of organically grew</p>



<a name="226670777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670777">(Feb 17 2021 at 15:17)</a>:</h4>
<p>We want API to make sure that we chose usable defn's that allow us to develop the API without too much struggle.</p>



<a name="226670823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670823">(Feb 17 2021 at 15:17)</a>:</h4>
<p>If we are confident that the definitions are right, then the API could come later.</p>



<a name="226670875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226670875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226670875">(Feb 17 2021 at 15:17)</a>:</h4>
<p>And with "right" I don't just mean maths-right. I mean "right for setting up API afterwards".</p>



<a name="226671010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671010">(Feb 17 2021 at 15:18)</a>:</h4>
<p>e.g. just PR flat modules anyway, and write in the module doc what needs to be done to make progress</p>



<a name="226671053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671053">(Feb 17 2021 at 15:18)</a>:</h4>
<p>I have students who are looking for simple projects to pass my course</p>



<a name="226671094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671094">(Feb 17 2021 at 15:18)</a>:</h4>
<p>I am just asking them to prove one novel lemma</p>



<a name="226671205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671205">(Feb 17 2021 at 15:19)</a>:</h4>
<p>I think there is still a lot of commutative algebra that can be done without making new definitions.</p>



<a name="226671404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671404">(Feb 17 2021 at 15:21)</a>:</h4>
<p>Ok, for the moment, here is the PR: <a href="https://github.com/leanprover-community/mathlib/issues/6282">#6282</a>.  From now on, I will concentrate on not making new definitions!</p>



<a name="226671692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671692">(Feb 17 2021 at 15:22)</a>:</h4>
<p>(At the moment, my goal is to prove that "transcendental over \Z" implies "transcendental over \Q" and for this, I was proving that you can "clear denominators in polynomials"  and non-zero divisors are useful in this setting)</p>



<a name="226671770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671770">(Feb 17 2021 at 15:22)</a>:</h4>
<p>Here's another gut feeling: we always say that definitions are hard, but I think we can be more precise.</p>
<ul>
<li>defining a new algebraic structure can be easy. There is only one sensible definition of <code>monoid</code>, once mathlib has settled on the semi-bundled typeclass approach</li>
<li>defining other sorts of new data can be tricky to get right. (E.g. <code>finset</code>, <code>finsupp</code>, <code>polynomial</code>, whatever)</li>
<li>defining a predicate on <em>terms</em> is not so hard. You typically don't run into DTT traps there.</li>
<li>defining a predicate over <em>types</em> can be tricky. E.g. <code>flat</code>, because you don't want to quantify over universes.</li>
</ul>



<a name="226671832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226671832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226671832">(Feb 17 2021 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> does <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span> make sense?</p>



<a name="226672167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672167">(Feb 17 2021 at 15:25)</a>:</h4>
<p>If someone comes along and says "I want to prove a theorem about flat modules" we can just then ask them what their maths proof is and find the next lemma which isn't in mathlib</p>



<a name="226672359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672359">(Feb 17 2021 at 15:26)</a>:</h4>
<p>and then maybe they'll end up proving a lemma which mathlib wants</p>



<a name="226672457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672457">(Feb 17 2021 at 15:26)</a>:</h4>
<p>but with definitions we never go anywhere. At least two people have shown up here saying "I want to do flat modules" and there was no definition so they could do nothing</p>



<a name="226672500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672500">(Feb 17 2021 at 15:27)</a>:</h4>
<p>random lemmas created on zulip sometimes get PR'ed.</p>



<a name="226672565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672565">(Feb 17 2021 at 15:27)</a>:</h4>
<p>but if we're still bikeshedding about the defiinition nothing will go anywhere.</p>



<a name="226672612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672612">(Feb 17 2021 at 15:27)</a>:</h4>
<p>Johan already figured out what the Lean definition of a flat module was</p>



<a name="226672629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672629">(Feb 17 2021 at 15:27)</a>:</h4>
<p>but it's still not there</p>



<a name="226672772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226672772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226672772">(Feb 17 2021 at 15:28)</a>:</h4>
<p>we want newcomers to go away saying "I helped to prove a theorem", not "I found out that these people can't even define flat modules witthout a lot of work"</p>



<a name="226673329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673329">(Feb 17 2021 at 15:31)</a>:</h4>
<p>I completely agree with that last remark!</p>



<a name="226673449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673449">(Feb 17 2021 at 15:32)</a>:</h4>
<p>so you'll PR flat module definition plus those comments about how we need Z[X] tensor R = R[X] etc?</p>



<a name="226673495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673495">(Feb 17 2021 at 15:32)</a>:</h4>
<p>and then Damiano can PR regular elements?</p>



<a name="226673595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673595">(Feb 17 2021 at 15:33)</a>:</h4>
<p>Damiano already did that</p>



<a name="226673618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673618">(Feb 17 2021 at 15:33)</a>:</h4>
<p>nice!</p>



<a name="226673760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673760">(Feb 17 2021 at 15:34)</a>:</h4>
<p>The CS people are edgy about definitions but by now we know what we're doing.</p>



<a name="226673838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226673838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226673838">(Feb 17 2021 at 15:34)</a>:</h4>
<p>e.g. we know you have the right definition of flat</p>



<a name="226674070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226674070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226674070">(Feb 17 2021 at 15:36)</a>:</h4>
<p>I made a definition of DVR and remarked that there were 10 other definitions in wikipedia and left it at that. Two months later I came back because I needed equivalence of it with another one, and you had filled in a ton of API because of the Witt vector work.</p>



<a name="226674099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226674099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226674099">(Feb 17 2021 at 15:36)</a>:</h4>
<p>we still don't know the right definition of chain complex... even though it is in mathlib</p>



<a name="226674160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226674160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226674160">(Feb 17 2021 at 15:37)</a>:</h4>
<p>that's a different story though, there we are actively experimenting and we know it</p>



<a name="226674176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226674176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226674176">(Feb 17 2021 at 15:37)</a>:</h4>
<p>with flat modules the experiment is over</p>



<a name="226674254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226674254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226674254">(Feb 17 2021 at 15:37)</a>:</h4>
<p>I am still scared of definitions but I will prove theorems in my spare time</p>



<a name="226681545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226681545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226681545">(Feb 17 2021 at 16:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <a href="https://github.com/leanprover-community/mathlib/issues/6284">#6284</a></p>



<a name="226682977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226682977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226682977">(Feb 17 2021 at 16:24)</a>:</h4>
<p>Btw, in the meantime, I pushed proofs that elements of <code>(left/right_)cancel_monoids</code> and non-zero elements of <code>integral_domains</code> are all regular.</p>



<a name="226685480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685480">(Feb 17 2021 at 16:39)</a>:</h4>
<p>If I understand correctly, with Eric's definition below, I no longer need to define <code>left</code> and <code>right</code>, ... right?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_left_regular</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">function.injective</span> <span class="o">((</span><span class="bp">*</span><span class="o">)</span> <span class="n">c</span><span class="o">))</span>
<span class="kd">def</span> <span class="n">is_right_regular</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">function.injective</span> <span class="o">(</span><span class="bp">*</span> <span class="n">c</span><span class="o">))</span>

<span class="kd">structure</span> <span class="n">is_regular</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">left</span> <span class="o">:</span> <span class="n">is_left_regular</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">right</span> <span class="o">:</span> <span class="n">is_right_regular</span> <span class="n">c</span><span class="o">)</span>
</code></pre></div>



<a name="226685548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685548">(Feb 17 2021 at 16:39)</a>:</h4>
<p>Yes, exactly</p>



<a name="226685601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685601">(Feb 17 2021 at 16:39)</a>:</h4>
<p>Ok, thank you!  The more I look at this definition, the more I like it!</p>



<a name="226685632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685632">(Feb 17 2021 at 16:40)</a>:</h4>
<p>And <code>of_left_right</code> is just <code>\&lt;&gt;</code> / <code>is_regular.mk</code></p>



<a name="226685796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685796">(Feb 17 2021 at 16:41)</a>:</h4>
<p>You can then change the types of <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_left_injective">docs#mul_left_injective</a> (which I think already exists) to be the <code>is_left_regular</code> etc</p>



<a name="226685874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226685874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226685874">(Feb 17 2021 at 16:41)</a>:</h4>
<p>This raises a question - should <code>is_regular</code> apply to the additive case too?</p>



<a name="226686115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226686115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226686115">(Feb 17 2021 at 16:43)</a>:</h4>
<p>I am not sure that I understand the mul_left_injective comment, and I need to go now!</p>
<p>I will look at it later, likely tomorrow or Friday!</p>



<a name="226686128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226686128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226686128">(Feb 17 2021 at 16:43)</a>:</h4>
<p>Thanks a lot to all!</p>



<a name="226686166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226686166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226686166">(Feb 17 2021 at 16:43)</a>:</h4>
<p>It's not really a thing for additive things, there's nothing stopping someone adding a <code>to_additive</code> but then you'll have to think of a name for the additive version and because it doesn't really exist in real life this will just sort of be adding junk.</p>



<a name="226763852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226763852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226763852">(Feb 18 2021 at 04:34)</a>:</h4>
<p>It seems that the remaining wrinkle on the PRed part of regular elements is what to do with the lemma below.  There are two proposed versions for it.  Which one should stay?  Should they both go?  Also, any further suggestions (golfing, naming,...) are as always welcome!</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- version 1</span>
<span class="kd">lemma</span> <span class="n">of_mul_eq_one_mul_eq_one</span> <span class="o">{</span><span class="n">a</span> <span class="n">ai</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">ai</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hl</span> <span class="o">:</span> <span class="n">ai</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">of_left_right</span> <span class="o">(</span><span class="n">left_of_mul_eq_one</span> <span class="n">hl</span><span class="o">)</span> <span class="o">(</span><span class="n">right_of_mul_eq_one</span> <span class="n">hr</span><span class="o">)</span>

<span class="c1">-- version 2</span>
<span class="kd">lemma</span> <span class="n">unit.is_regular</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">units</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">âŸ¨</span><span class="n">left_of_mul_eq_one</span> <span class="n">a.inv_mul</span><span class="o">,</span>  <span class="n">right_of_mul_eq_one</span> <span class="n">a.mul_inv</span><span class="o">âŸ©</span>
</code></pre></div>



<a name="226763882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226763882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226763882">(Feb 18 2021 at 04:36)</a>:</h4>
<p>The snd version can be proved by applying <code>is_regular_of_cancel_monoid</code>, right?</p>



<a name="226764086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764086">(Feb 18 2021 at 04:39)</a>:</h4>
<p>Maybe it can, but I am failing to do that.  Lean does not like that <code>a : units R</code> since it expects <code>a : R</code>.  I will try to break <code>a : units R</code> apart.</p>



<a name="226764157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764157">(Feb 18 2021 at 04:40)</a>:</h4>
<p>I'm confused. <code>units R</code> is a group. And you have a lemma about "groups" (or something similar/weaker) a few lines up, right?</p>



<a name="226764234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764234">(Feb 18 2021 at 04:42)</a>:</h4>
<p>I had forgotten to add the <code>cancel_monoid</code> assumption...  It does work!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- An element admitting a left and a right inverse is regular. -/</span>
<span class="kd">lemma</span> <span class="n">unit.is_regular</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">cancel_monoid</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">units</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">is_regular_of_cancel_monoid</span> <span class="n">_</span>
</code></pre></div>



<a name="226764257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764257">(Feb 18 2021 at 04:43)</a>:</h4>
<p>So, this means that if we keep one version, it is the other one, right?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- only contender left</span>
<span class="kd">lemma</span> <span class="n">of_mul_eq_one_mul_eq_one</span> <span class="o">{</span><span class="n">a</span> <span class="n">ai</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">ai</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hl</span> <span class="o">:</span> <span class="n">ai</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">of_left_right</span> <span class="o">(</span><span class="n">left_of_mul_eq_one</span> <span class="n">hl</span><span class="o">)</span> <span class="o">(</span><span class="n">right_of_mul_eq_one</span> <span class="n">hr</span><span class="o">)</span>
</code></pre></div>



<a name="226764584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764584">(Feb 18 2021 at 04:49)</a>:</h4>
<p>Hmm, but <code>--version 2</code> doesn't need the <code>[cancel_monoid]</code> assumption? In that case <code>--version 2</code> seems useful to keep around.<br>
Note that it should be <code>units.is_regular</code>, because the type of <code>a</code> is <code>units _</code>.</p>



<a name="226764600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764600">(Feb 18 2021 at 04:50)</a>:</h4>
<p>Looking back at this, the new version is silly.</p>
<p>Johan, I am also confused.  If I assume that <code>R</code> is a <code>monoid</code>, then the lemma</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- An element admitting a left and a right inverse is regular. -/</span>
<span class="kd">lemma</span> <span class="n">unit.is_regular</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">units</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_regular</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">is_regular_of_cancel_monoid</span> <span class="n">_</span>
</code></pre></div>
<p>says</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">is_regular_of_cancel_monoid</span> <span class="bp">?</span><span class="n">m_3</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">is_regular</span> <span class="bp">?</span><span class="n">m_3</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">is_regular</span> <span class="bp">â†‘</span><span class="n">a</span>
</code></pre></div>



<a name="226764670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764670">(Feb 18 2021 at 04:50)</a>:</h4>
<p>Aah, it's about the coercion</p>



<a name="226764710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764710">(Feb 18 2021 at 04:51)</a>:</h4>
<p>Ok, I'm convinced, keeping <code>--version 2</code> around is useful.</p>



<a name="226764719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764719">(Feb 18 2021 at 04:51)</a>:</h4>
<p>Ok, I will keep this version then!</p>



<a name="226764976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226764976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226764976">(Feb 18 2021 at 04:55)</a>:</h4>
<p>I just pushed this version!</p>



<a name="226765053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226765053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226765053">(Feb 18 2021 at 04:56)</a>:</h4>
<p>I created several sections that only contain one lemma: the idea is that more lemmas can come in, so it feels a little overkill at the moment, but it might make more sense if there are more lemmas in each section, right?</p>



<a name="226770695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226770695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226770695">(Feb 18 2021 at 06:35)</a>:</h4>
<p>Eric, Johan, you really helped a lot with this file and I think that you should also be authors of it.  However, I do not want to forcefully add you!  So, let me know if you want to be added as authors (or directly add yourselves), or if you prefer not to!</p>



<a name="226772109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226772109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226772109">(Feb 18 2021 at 07:02)</a>:</h4>
<p>I really don't care. You did the actual work.</p>



<a name="226774988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226774988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226774988">(Feb 18 2021 at 07:49)</a>:</h4>
<p>Ok, in any case, I guess that git remembers the various contributions anyways.</p>
<p>On a separate note, I added some saturation properties for <code>left/right_regular</code> elements.  It is a common idiom to say "products of non-zero divisors are non-zero divisors" or "<code>a * b</code> is a non-zero divisor implies <code>a</code> and <code>b</code> are non-zero divisors".  The asymmetric versions are in.  I am going to add the symmetric ones, though I will assume commutativity of multiplication for this.</p>



<a name="226779675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/is_regular/near/226779675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/is_regular.html#226779675">(Feb 18 2021 at 08:42)</a>:</h4>
<p>Also the symmetric versions are in.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>