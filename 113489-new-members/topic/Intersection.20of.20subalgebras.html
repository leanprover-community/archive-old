---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Intersection.20of.20subalgebras.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html">Intersection of subalgebras</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="240936901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240936901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240936901">(Jun 01 2021 at 12:56)</a>:</h4>
<p>The following is true, right? I am a little bit lost since the lattice structure of <code>subalgebra R A</code> is done via Galois insertions, and I am not very familiar with them...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.subalgebra</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="o">(</span><span class="bp">↑</span><span class="o">(</span><span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="240936941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240936941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240936941">(Jun 01 2021 at 12:56)</a>:</h4>
<p>Yes it's true :-)</p>



<a name="240937406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240937406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240937406">(Jun 01 2021 at 13:00)</a>:</h4>
<p>I mean, for me <code>⊓</code> <em>is</em> the intersection (and for example for all other structures I checked it is defined this way). But for subalgebras everything is defined differently. For example we have explicitly  <a href="https://leanprover-community.github.io/mathlib_docs/find/subring.has_Inf">docs#subring.has_Inf</a>, but not for <code>subalgebra</code> (<code>apply_instance</code> find it, essentially going through  <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.subalgebra.complete_lattice">docs#algebra.subalgebra.complete_lattice</a> that uses <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.gi">docs#algebra.gi</a>).</p>



<a name="240937870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240937870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240937870">(Jun 01 2021 at 13:04)</a>:</h4>
<p>Yes, so the question becomes how <code>galois_insertion.lift_complete_lattice</code> makes the <code>inf</code>.</p>



<a name="240938052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240938052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240938052">(Jun 01 2021 at 13:05)</a>:</h4>
<p>I think this is the definition being used:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">lift_semilattice_inf</span> <span class="o">[</span><span class="n">semilattice_inf</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">gi</span> <span class="o">:</span> <span class="n">galois_insertion</span> <span class="n">l</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="n">semilattice_inf</span> <span class="n">β</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">inf</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">gi.choice</span> <span class="o">(</span><span class="n">u</span> <span class="n">a</span> <span class="bp">⊓</span> <span class="n">u</span> <span class="n">b</span><span class="o">)</span> <span class="bp">$</span>
    <span class="o">(</span><span class="n">le_inf</span> <span class="o">(</span><span class="n">gi.gc.monotone_u</span> <span class="bp">$</span> <span class="n">gi.gc.l_le</span> <span class="bp">$</span> <span class="n">inf_le_left</span><span class="o">)</span>
      <span class="o">(</span><span class="n">gi.gc.monotone_u</span> <span class="bp">$</span> <span class="n">gi.gc.l_le</span> <span class="bp">$</span> <span class="n">inf_le_right</span><span class="o">)),</span>
</code></pre></div>



<a name="240940449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240940449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240940449">(Jun 01 2021 at 13:22)</a>:</h4>
<p>I think it's easier just to redefine inf as the inter and use the axioms :-(</p>



<a name="240940530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240940530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240940530">(Jun 01 2021 at 13:23)</a>:</h4>
<p>Unless you can figure out exactly what <code>S ⊓ T : set A</code> is</p>



<a name="240941610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240941610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240941610">(Jun 01 2021 at 13:31)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.subalgebra</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="o">(</span><span class="bp">↑</span><span class="o">(</span><span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">I</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="n">S</span> <span class="bp">∩</span> <span class="n">T</span><span class="o">,</span>
    <span class="n">add_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">_</span> <span class="n">_</span> <span class="o">⟨</span><span class="n">hxS</span><span class="o">,</span> <span class="n">hxT</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">hyS</span><span class="o">,</span> <span class="n">hyT</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">S.add_mem'</span> <span class="n">hxS</span> <span class="n">hyS</span><span class="o">,</span> <span class="n">T.add_mem'</span> <span class="n">hxT</span> <span class="n">hyT</span><span class="o">⟩,</span>
    <span class="n">mul_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">_</span> <span class="n">_</span> <span class="o">⟨</span><span class="n">hxS</span><span class="o">,</span> <span class="n">hxT</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">hyS</span><span class="o">,</span> <span class="n">hyT</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">S.mul_mem'</span> <span class="n">hxS</span> <span class="n">hyS</span><span class="o">,</span> <span class="n">T.mul_mem'</span> <span class="n">hxT</span> <span class="n">hyT</span><span class="o">⟩,</span>
    <span class="n">algebra_map_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="o">⟨</span><span class="n">S.algebra_map_mem'</span> <span class="n">r</span><span class="o">,</span> <span class="n">T.algebra_map_mem'</span> <span class="n">r</span><span class="o">⟩</span>
  <span class="o">},</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span> <span class="bp">=</span> <span class="n">I</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">this</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨(</span><span class="n">inf_le_left</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span> <span class="bp">≤</span> <span class="n">S</span><span class="o">)</span> <span class="n">hx</span><span class="o">,</span> <span class="o">(</span><span class="n">inf_le_right</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span> <span class="bp">≤</span> <span class="n">T</span><span class="o">)</span> <span class="n">hx</span><span class="o">⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">le_inf</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span> <span class="n">h.1</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span> <span class="n">h.2</span><span class="o">)</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>bleurgh</p>



<a name="240944100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240944100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240944100">(Jun 01 2021 at 13:47)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.subalgebra</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="o">((</span><span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">simp</span>
<span class="kd">end</span>
</code></pre></div>



<a name="240944750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240944750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240944750">(Jun 01 2021 at 13:52)</a>:</h4>
<p>I am a little bit confused, but if you look at the infoview of your lemma, at the very beginning, it says <code>↑S ⊓ ↑T = ↑S ∩ ↑T</code>. And indeed <code>refl</code> proves it.</p>



<a name="240944804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240944804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240944804">(Jun 01 2021 at 13:53)</a>:</h4>
<p>In my lemma it says <code>↑(S ⊓ T) = ↑S ∩ ↑T</code></p>



<a name="240944920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240944920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240944920">(Jun 01 2021 at 13:53)</a>:</h4>
<p>For some reasons when you say <code>(S ⊓ T) : set A</code> Lean understand <code>↑S ⊓ ↑T</code>, so it is obvious.</p>



<a name="240945002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240945002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240945002">(Jun 01 2021 at 13:54)</a>:</h4>
<p>The issue is type ascription working outside-in; lean thinks you want the ⊓ that produces a <code>set A</code>, which is one that takes two <code>set A</code>'s</p>



<a name="240945223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240945223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240945223">(Jun 01 2021 at 13:55)</a>:</h4>
<p>You're right, apologies.</p>



<a name="240945274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240945274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240945274">(Jun 01 2021 at 13:56)</a>:</h4>
<p>Too bad :)</p>



<a name="240945317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240945317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240945317">(Jun 01 2021 at 13:56)</a>:</h4>
<p>Don't worry, I quickly realized it because I did the same mistake :D</p>



<a name="240950506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240950506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240950506">(Jun 01 2021 at 14:31)</a>:</h4>
<p>OK, this should work and it's less disgusting (the first two lemms should go there anyway).</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.adjoin.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">adjoin_eq_of_le</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">≤</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">le_antisymm</span> <span class="o">(</span><span class="n">adjoin_le</span> <span class="n">h₁</span><span class="o">)</span> <span class="n">h₂</span>

<span class="kd">theorem</span> <span class="n">adjoin_eq</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="bp">↑</span><span class="n">S</span> <span class="bp">=</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">adjoin_eq_of_le</span> <span class="n">_</span> <span class="o">(</span><span class="n">set.subset.refl</span> <span class="n">_</span><span class="o">)</span> <span class="n">subset_adjoin</span>

<span class="kd">lemma</span> <span class="n">coe_inf</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">↑</span><span class="o">(</span><span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">hx</span> <span class="o">,⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span> <span class="bp">λ</span> <span class="n">hx</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inf_le_left</span> <span class="n">_</span> <span class="n">_</span> <span class="n">S</span> <span class="n">T</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">this</span> <span class="o">(</span><span class="n">set_like.mem_coe.1</span> <span class="n">hx</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inf_le_right</span> <span class="n">_</span> <span class="n">_</span> <span class="n">S</span> <span class="n">T</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">this</span> <span class="o">(</span><span class="n">set_like.mem_coe.1</span> <span class="n">hx</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">subset_adjoin</span> <span class="n">R</span> <span class="n">A</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">((</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="n">T</span><span class="o">),</span>
    <span class="n">replace</span> <span class="n">this</span> <span class="o">:=</span> <span class="n">this</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">change</span> <span class="n">x</span> <span class="bp">∈</span> <span class="bp">↑</span><span class="o">(</span><span class="n">adjoin</span> <span class="n">R</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="bp">⊓</span> <span class="bp">↑</span><span class="n">T</span><span class="o">))</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="n">galois_insertion.l_inf_u</span> <span class="o">(</span><span class="bp">@</span><span class="n">algebra.gi</span> <span class="n">R</span> <span class="n">A</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="n">at</span> <span class="n">this</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="240952151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240952151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240952151">(Jun 01 2021 at 14:42)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.adjoin.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">coe_inf</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">↑</span><span class="o">(</span><span class="n">S</span> <span class="bp">⊓</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="bp">←</span><span class="n">galois_insertion.l_inf_u</span> <span class="o">(</span><span class="bp">@</span><span class="n">algebra.gi</span> <span class="n">R</span> <span class="n">A</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">),</span>
    <span class="n">exact</span> <span class="n">algebra.subset_adjoin</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="240952443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240952443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240952443">(Jun 01 2021 at 14:44)</a>:</h4>
<p>Nice!!</p>



<a name="240952755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240952755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240952755">(Jun 01 2021 at 14:46)</a>:</h4>
<p>I try to avoid <code>change</code>, because it can hide expensive <code>refl</code>s. If the underlying definitions change, then <code>change</code> can easily break or become much slower.</p>



<a name="240953004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240953004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240953004">(Jun 01 2021 at 14:48)</a>:</h4>
<p>Instead, doing the appropriate <code>rw</code> will always work</p>



<a name="240981624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240981624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240981624">(Jun 01 2021 at 18:09)</a>:</h4>
<p>It seems to me that it might still be worth redefining <code>inf</code> as the version defeq to set intersection</p>



<a name="240981646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240981646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240981646">(Jun 01 2021 at 18:09)</a>:</h4>
<p>Especially since we do it everwhere else</p>



<a name="240984872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/240984872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#240984872">(Jun 01 2021 at 18:32)</a>:</h4>
<p>I think this is the canonical problem with this clever "make subwidgets into a complete lattice by using the Galois insertion into <code>set</code>" approach -- <code>Sup</code> is defined to be "intersection of subwidgets containing your given subwidget" but somehow everything else ends up out of control.</p>



<a name="241070261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/241070261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#241070261">(Jun 01 2021 at 20:24)</a>:</h4>
<p>I will try to do this. I agree that it's not clear which one is the better approach... in any case not <em>everything</em> is the same for (say) submodules and subalgebras: for example  <code>⊥.prod ⊥ = ⊥</code> is trivially true for submodules but false for subalgebras.</p>



<a name="241419925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Intersection%20of%20subalgebras/near/241419925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Intersection.20of.20subalgebras.html#241419925">(Jun 03 2021 at 16:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7812">#7812</a> makes <code>foo</code> (aka <code>coe_inf</code>) true by rfl</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>