---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html">making a repo compatible with leanproject</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198927451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927451">(May 27 2020 at 17:52)</a>:</h4>
<p>This is probably a not-fun game of "guess which instructions i failed to follow"<br>
I have a repo with a <code>src</code> folder and a <code>leanpackage.toml</code> in the top level directory.<br>
On my local machine, I navigate to a folder which is not a git repo (and contains my other git repos in subfolders)<br>
I run <code>leanproject get https://github.com/jalex-stark/lean-at-MC2020.git</code><br>
I use VSCode to open the <code>lean-at-MC2020</code> folder, which has <code>src</code> and <code>_target</code> subfolders.<br>
I open an arbitrary file in <code>src/</code>, and the Lean messages are full of errors that look like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="kn">import</span><span class="o">:</span> <span class="n">data</span><span class="bp">.</span><span class="n">option</span><span class="bp">.</span><span class="n">defs</span>
<span class="n">excessive</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">detected</span> <span class="n">at</span> <span class="err">&#39;</span><span class="n">replace&#39;</span> <span class="o">(</span><span class="n">potential</span> <span class="n">solution</span><span class="o">:</span> <span class="n">increase</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">threshold</span><span class="o">)</span>
</code></pre></div>



<a name="198927518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927518">(May 27 2020 at 17:52)</a>:</h4>
<p>Ctrl-shift-P Lean:Restart?</p>



<a name="198927611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927611">(May 27 2020 at 17:53)</a>:</h4>
<p>Wait -- you are supposed to have a leanpkg.toml not what you said</p>



<a name="198927626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927626">(May 27 2020 at 17:53)</a>:</h4>
<p>Also, I hope "I open an arbitrary file in <code>src/</code>" is short for "I open the <code>lean-at-MC2020</code> folder in VS Code and then from there open an arbitrary file from <code>src/</code>"</p>



<a name="198927706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927706">(May 27 2020 at 17:54)</a>:</h4>
<p>Restarting Lean often fixes the excessive memory consumption errors</p>



<a name="198927711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927711">(May 27 2020 at 17:54)</a>:</h4>
<p>yes, the "open folder" bit was two steps earlier,</p>



<a name="198927718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927718">(May 27 2020 at 17:54)</a>:</h4>
<p>Bryan, see the line before.</p>



<a name="198927731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927731">(May 27 2020 at 17:54)</a>:</h4>
<p>i restarted lean and am waiting at an orange bar</p>



<a name="198927779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927779">(May 27 2020 at 17:54)</a>:</h4>
<p>Ah, OK. Sorry I missed that. </p>
<p>I looked at <a href="https://github.com/jalex-stark/lean-at-MC2020">https://github.com/jalex-stark/lean-at-MC2020</a> and it seems OK, though you shouldn't need to commit <code>leanpkg.path</code>.</p>



<a name="198927796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927796">(May 27 2020 at 17:55)</a>:</h4>
<p>Did leanproject get all your mathlib oleans?</p>



<a name="198927955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927955">(May 27 2020 at 17:56)</a>:</h4>
<p>I don't think <code>leanproject get</code> downloads a mathlib cache, does it? Isn't it just <code>git clone</code>?</p>



<a name="198927968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927968">(May 27 2020 at 17:56)</a>:</h4>
<p>I think yes.</p>
<div class="codehilite"><pre><span></span><code><span class="n">jstark</span><span class="bp">@</span><span class="n">Jalexs</span><span class="bp">-</span><span class="n">MBP</span> <span class="n">lean</span><span class="bp">-</span><span class="n">projects</span> <span class="err">%</span> <span class="n">leanproject</span> <span class="n">get</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">jalex</span><span class="bp">-</span><span class="n">stark</span><span class="bp">/</span><span class="n">lean</span><span class="bp">-</span><span class="n">at</span><span class="bp">-</span><span class="n">MC2020</span><span class="bp">.</span><span class="n">git</span>
<span class="n">Cloning</span> <span class="k">from</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">jalex</span><span class="bp">-</span><span class="n">stark</span><span class="bp">/</span><span class="n">lean</span><span class="bp">-</span><span class="n">at</span><span class="bp">-</span><span class="n">MC2020</span><span class="bp">.</span><span class="n">git</span>
<span class="n">configuring</span> <span class="n">Mathcamp2020</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span>
<span class="n">mathlib</span><span class="o">:</span> <span class="n">cloning</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span> <span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span>
<span class="n">Cloning</span> <span class="n">into</span> <span class="err">&#39;</span><span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib&#39;</span><span class="bp">...</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Enumerating</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">336</span><span class="o">,</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Counting</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">336</span><span class="bp">/</span><span class="mi">336</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Compressing</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">216</span><span class="bp">/</span><span class="mi">216</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Total</span> <span class="mi">50297</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">197</span><span class="o">),</span> <span class="n">reused</span> <span class="mi">165</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">119</span><span class="o">),</span> <span class="n">pack</span><span class="bp">-</span><span class="n">reused</span> <span class="mi">49961</span>
<span class="n">Receiving</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">50297</span><span class="bp">/</span><span class="mi">50297</span><span class="o">),</span> <span class="mi">21</span><span class="bp">.</span><span class="mi">67</span> <span class="n">MiB</span> <span class="bp">|</span> <span class="mi">6</span><span class="bp">.</span><span class="mi">16</span> <span class="n">MiB</span><span class="bp">/</span><span class="n">s</span><span class="o">,</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">Resolving</span> <span class="n">deltas</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">38738</span><span class="bp">/</span><span class="mi">38738</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--detach c812ebebde49c0409c5a93e41e3a36431f72b0a5    # in directory _target/deps/mathlib</span>
<span class="n">HEAD</span> <span class="n">is</span> <span class="n">now</span> <span class="n">at</span> <span class="n">c812ebeb</span> <span class="n">feat</span><span class="o">(</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">abelian</span><span class="o">):</span> <span class="n">abelian</span> <span class="n">categories</span> <span class="o">(</span><span class="bp">#</span><span class="mi">2817</span><span class="o">)</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Found</span> <span class="n">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
</code></pre></div>



<a name="198927973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198927973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198927973">(May 27 2020 at 17:56)</a>:</h4>
<p>Disclaimer, I've never used <code>leanproject get</code>.</p>



<a name="198928105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928105">(May 27 2020 at 17:57)</a>:</h4>
<p>Your project works fine for me Jalex</p>



<a name="198928144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928144">(May 27 2020 at 17:57)</a>:</h4>
<p>hmm okay maybe the local mathlib oleans that leanproject finds are bad</p>



<a name="198928172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928172">(May 27 2020 at 17:58)</a>:</h4>
<p>probably reinstalling the whole <code>elan</code> toolchain will be enough</p>



<a name="198928227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928227">(May 27 2020 at 17:58)</a>:</h4>
<p>That sounds excessive...</p>



<a name="198928229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928229">(May 27 2020 at 17:58)</a>:</h4>
<p>but maybe I'll think for a moment about whether there's an easier solution</p>



<a name="198928244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928244">(May 27 2020 at 17:58)</a>:</h4>
<p><code>leanproject get -f</code>?</p>



<a name="198928264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928264">(May 27 2020 at 17:58)</a>:</h4>
<p><code>leanproject get-mathlib-cache -f</code>?</p>



<a name="198928332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928332">(May 27 2020 at 17:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">%</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="bp">-</span><span class="n">f</span>
<span class="n">Usage</span><span class="o">:</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="o">[</span><span class="n">OPTIONS</span><span class="o">]</span>
<span class="n">Try</span> <span class="err">&#39;</span><span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="bp">-</span><span class="n">h&#39;</span> <span class="n">for</span> <span class="kn">help</span><span class="bp">.</span>

<span class="n">Error</span><span class="o">:</span> <span class="n">no</span> <span class="n">such</span> <span class="n">option</span><span class="o">:</span> <span class="bp">-</span><span class="n">f</span>
</code></pre></div>



<a name="198928345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928345">(May 27 2020 at 17:59)</a>:</h4>
<p><code>--force</code>?</p>



<a name="198928348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928348">(May 27 2020 at 17:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code>leanproject get jalex-stark/lean-at-MC2020
cd lean-at-MC2020/
code .
</code></pre></div>


<p>works for me, but as you pointed out I have</p>
<div class="codehilite"><pre><span></span><code>Looking for local mathlib oleans
Looking for remote mathlib oleans
Trying to download https://oleanstorage.azureedge.net/mathlib/c812ebebde49c0409c5a93e41e3a36431f72b0a5.tar.xz to /home/buzzard/.mathlib/c812ebebde49c0409c5a93e41e3a36431f72b0a5.tar.xz
100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 21.9M/21.9M [00:03&lt;00:00, 5.56MiB/s]
Found mathlib oleans at https://oleanstorage.azureedge.net/mathlib/
</code></pre></div>



<a name="198928374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928374">(May 27 2020 at 17:59)</a>:</h4>
<p>Just delete your local oleans</p>



<a name="198928426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928426">(May 27 2020 at 17:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">%</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="c1">--force</span>
<span class="n">Usage</span><span class="o">:</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="o">[</span><span class="n">OPTIONS</span><span class="o">]</span>
<span class="n">Try</span> <span class="err">&#39;</span><span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span> <span class="bp">-</span><span class="n">h&#39;</span> <span class="n">for</span> <span class="kn">help</span><span class="bp">.</span>

<span class="n">Error</span><span class="o">:</span> <span class="n">no</span> <span class="n">such</span> <span class="n">option</span><span class="o">:</span> <span class="c1">--force</span>
</code></pre></div>



<a name="198928511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928511">(May 27 2020 at 18:00)</a>:</h4>
<p><code>leanproject --help</code> says</p>
<div class="codehilite"><pre><span></span><code>  -f, --force-download  Download olean cache without looking for a local
                        version.
</code></pre></div>



<a name="198928537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928537">(May 27 2020 at 18:00)</a>:</h4>
<p>okay, i guess i have a stale leanproject</p>



<a name="198928614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928614">(May 27 2020 at 18:00)</a>:</h4>
<p>(so i <em>should</em> reinstall the whole <code>elan</code> toolchain now?)</p>



<a name="198928642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928642">(May 27 2020 at 18:01)</a>:</h4>
<p>It also implies <code>leanproject get</code> is just <code>git clone</code> so maybe that's not trustworthy.</p>



<a name="198928677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928677">(May 27 2020 at 18:01)</a>:</h4>
<p><code>elan</code> and <code>leanproject</code> are separate.</p>



<a name="198928757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928757">(May 27 2020 at 18:01)</a>:</h4>
<p>Cached oleans are in <code>~/.mathlib/git-hash.tar.(bz2_or_xz)</code></p>



<a name="198928814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928814">(May 27 2020 at 18:02)</a>:</h4>
<p>You can manually delete some of these files.</p>



<a name="198928818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928818">(May 27 2020 at 18:02)</a>:</h4>
<p><code>pip install --upgrade mathlibtools</code> should upgrade <code>leanproject</code> to the latest, which is 0.0.8.</p>



<a name="198928820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928820">(May 27 2020 at 18:02)</a>:</h4>
<p>Thanks Yury!</p>



<a name="198928827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928827">(May 27 2020 at 18:02)</a>:</h4>
<p>Maybe <code>pip3</code> depending on your python setup.</p>



<a name="198928882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198928882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198928882">(May 27 2020 at 18:02)</a>:</h4>
<p>oh okay it's <code>leanproject -f get-mathlib-cache</code>, not <code>leanproject get-mathlib-cache -f</code></p>



<a name="198931385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931385">(May 27 2020 at 18:20)</a>:</h4>
<p>i'm still in a sad state after forcing the mathlib cache, so i'll go delete oleans manually and then do <code>leanproject up</code></p>



<a name="198931423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931423">(May 27 2020 at 18:21)</a>:</h4>
<p>delete the project and re-clone</p>



<a name="198931443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931443">(May 27 2020 at 18:21)</a>:</h4>
<p>maybe?</p>



<a name="198931664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931664">(May 27 2020 at 18:23)</a>:</h4>
<p>when i do that it still finds local oleans</p>



<a name="198931678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931678">(May 27 2020 at 18:23)</a>:</h4>
<p>so i have oleans somewhere sticky</p>



<a name="198931743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931743">(May 27 2020 at 18:23)</a>:</h4>
<p>What exactly is your problem at this point? Your repo worked fine for me</p>



<a name="198931751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931751">(May 27 2020 at 18:23)</a>:</h4>
<p>(although you should remove the path file)</p>



<a name="198931942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198931942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198931942">(May 27 2020 at 18:25)</a>:</h4>
<p>I added a line <code>import data.nat.basic</code> to the header of a <code>.lean</code> file in <code>src/</code> and it went back to the error message about memory</p>



<a name="198932015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932015">(May 27 2020 at 18:25)</a>:</h4>
<p>I can't reproduce :-(</p>



<a name="198932087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932087">(May 27 2020 at 18:26)</a>:</h4>
<p>you mean you took the same action and didn't get a catastrophic result?</p>



<a name="198932145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932145">(May 27 2020 at 18:26)</a>:</h4>
<p>(or the action was underspecified so you didn't try?)</p>



<a name="198932155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932155">(May 27 2020 at 18:26)</a>:</h4>
<p>I added import data.nat.basic to function_equation.lean and nothing bad happened</p>



<a name="198932228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932228">(May 27 2020 at 18:27)</a>:</h4>
<p>thanks, that's great news</p>



<a name="198932401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932401">(May 27 2020 at 18:28)</a>:</h4>
<p>If the issue is oleans, then this can definitely be fixed by firstly removing the offending local oleans from .mathlib and then recloning the project with <code>leanproject</code> and verifying that they're downloaded from the azure site</p>



<a name="198932552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932552">(May 27 2020 at 18:29)</a>:</h4>
<p>yep, I agree, that's next on my queue</p>



<a name="198932679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198932679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198932679">(May 27 2020 at 18:30)</a>:</h4>
<div class="codehilite"><pre><span></span><code>buzzard@bob:~/.mathlib$ md5sum c812ebebde49c0409c5a93e41e3a36431f72b0a5.tar.xz
b28742d6de88f719309e235138d12124  c812ebebde49c0409c5a93e41e3a36431f72b0a5.tar.xz
</code></pre></div>


<p>FWIW</p>



<a name="198933455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198933455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198933455">(May 27 2020 at 18:36)</a>:</h4>
<p>It looks like i succeeded at replacing my oleans!</p>
<div class="codehilite"><pre><span></span><code><span class="n">jstark</span><span class="bp">@</span><span class="n">Jalexs</span><span class="bp">-</span><span class="n">MBP</span> <span class="bp">.</span><span class="n">mathlib</span> <span class="err">%</span> <span class="n">md5sum</span> <span class="n">c812ebebde49c0409c5a93e41e3a36431f72b0a5</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">xz</span>
<span class="n">b28742d6de88f719309e235138d12124</span>  <span class="n">c812ebebde49c0409c5a93e41e3a36431f72b0a5</span><span class="bp">.</span><span class="n">tar</span><span class="bp">.</span><span class="n">xz</span>
</code></pre></div>



<a name="198937276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198937276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198937276">(May 27 2020 at 19:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject/near/198928882">said</a>:</p>
<blockquote>
<p>oh okay it's <code>leanproject -f get-mathlib-cache</code>, not <code>leanproject get-mathlib-cache -f</code></p>
</blockquote>
<p>I'm sorry about that. This is a limitation of the cli building tool I'm using. The <code>-f</code> option is a shared option used by many command hence it must come before the command name.</p>



<a name="198937602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198937602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198937602">(May 27 2020 at 19:07)</a>:</h4>
<p>it seems like a fine choice to me! Rob just made an incorrect guess about the right command to use</p>



<a name="198943809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/making%20a%20repo%20compatible%20with%20leanproject/near/198943809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/making.20a.20repo.20compatible.20with.20leanproject.html#198943809">(May 27 2020 at 19:51)</a>:</h4>
<p>okay, i'm still in a bad state when i do <code>leanproject new test</code> then open the folder <code>test</code> in VSCode, start up a new <code>.lean</code> file, and write <code>import tactic</code> as a header. I'm going to go reinstall everything.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>