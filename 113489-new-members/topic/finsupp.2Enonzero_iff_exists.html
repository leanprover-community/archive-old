---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html">finsupp.nonzero_iff_exists</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228730260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730260">(Mar 04 2021 at 07:48)</a>:</h4>
<p>Dear All,</p>
<p>is the lemma below already in mathlib?  Or can you suggest a better proof, such that I can do directly <code>rcases</code> on the ∃ part, simply feeding it that <code>f</code> is non-zero?</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.finsupp.basic</span>

<span class="kd">lemma</span> <span class="n">finsupp.nonzero_iff_exists</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">finsupp</span> <span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_eq_empty.symm</span><span class="o">,</span> <span class="n">finset.eq_empty_iff_forall_not_mem</span><span class="o">]</span>
</code></pre></div>



<a name="228730443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730443">(Mar 04 2021 at 07:51)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> I guess maybe there should be a <code>support_nonempty_iff</code> lemma?</p>



<a name="228730607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730607">(Mar 04 2021 at 07:53)</a>:</h4>
<p>I can find the negation of that statement, but not the direct one...</p>



<a name="228730631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730631">(Mar 04 2021 at 07:54)</a>:</h4>
<p>i.e. as you can see, I found <code>support_eq_empty</code>, but not the other one <code>support_nonempty_...</code></p>



<a name="228730851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730851">(Mar 04 2021 at 07:56)</a>:</h4>
<p>Right, because you could do <code>rcases</code> on <code>f.support.nonempty</code>... so it seems useful to have that version as well</p>



<a name="228730873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228730873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228730873">(Mar 04 2021 at 07:56)</a>:</h4>
<p><code>f.support.nonempty \iff f \ne 0</code>.</p>



<a name="228731379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228731379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228731379">(Mar 04 2021 at 08:04)</a>:</h4>
<p>Ok, so are you suggesting that I should add the first (and maybe also the second) of these lemmas?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"> to add -/</span>
<span class="kd">lemma</span> <span class="n">finsupp.nonempty_iff</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">finsupp</span> <span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">f.support.nonempty</span> <span class="bp">↔</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finsupp.support_eq_empty</span><span class="o">,</span> <span class="n">finset.nonempty_iff_ne_empty</span><span class="o">,</span> <span class="n">ne.def</span><span class="o">]</span>

<span class="c1">-- maybe to add</span>
<span class="kd">lemma</span> <span class="n">finsupp.nonzero_iff_exists</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">finsupp</span> <span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_eq_empty.symm</span><span class="o">,</span> <span class="n">finset.eq_empty_iff_forall_not_mem</span><span class="o">]</span>
</code></pre></div>



<a name="228731774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228731774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228731774">(Mar 04 2021 at 08:08)</a>:</h4>
<p>The second is <code>iff.symm</code> of the first, right?</p>



<a name="228732108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732108">(Mar 04 2021 at 08:11)</a>:</h4>
<p>Are you suggesting what is below?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">finsupp.nonzero_iff_exists</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">finsupp</span> <span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">finsupp.nonempty_iff.symm</span> <span class="c1">-- fails</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">type mismatch, term</span>
<span class="cm">  finsupp.nonempty_iff.symm</span>
<span class="cm">has type</span>
<span class="cm">  ?m_4 ≠ 0 ↔ ?m_4.support.nonempty</span>
<span class="cm">but is expected to have type</span>
<span class="cm">  f ≠ 0 ↔ ∃ (a : α), ⇑f a ≠ 0</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="228732196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732196">(Mar 04 2021 at 08:12)</a>:</h4>
<p>Ooh, sorry, I'm stupid. Should learn to read.</p>



<a name="228732212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732212">(Mar 04 2021 at 08:12)</a>:</h4>
<p>Ok, I think both lemmas are useful.</p>



<a name="228732234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732234">(Mar 04 2021 at 08:13)</a>:</h4>
<p>Note that the first one should be called <code>support_nonempty_iff</code></p>



<a name="228732296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732296">(Mar 04 2021 at 08:13)</a>:</h4>
<p>Ok, I will PR both of them, then!</p>
<p>Should they be marked as <code>simp</code>?</p>



<a name="228732320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732320">(Mar 04 2021 at 08:14)</a>:</h4>
<p>No, I don't think so.</p>



<a name="228732399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732399">(Mar 04 2021 at 08:14)</a>:</h4>
<p>It's not clear to me that they bring things towards some canonical form.</p>



<a name="228732452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228732452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228732452">(Mar 04 2021 at 08:15)</a>:</h4>
<p>Ok, great!  Since otherwise, the linter would want me to change the \ne to \not which seems a worse form for the statements!</p>



<a name="228733364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/finsupp.nonzero_iff_exists/near/228733364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists.html#228733364">(Mar 04 2021 at 08:22)</a>:</h4>
<p>PR <a href="https://github.com/leanprover-community/mathlib/issues/6530">#6530</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>