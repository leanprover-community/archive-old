---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html">graphs and deleting edges</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="320907663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320907663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320907663">(Jan 12 2023 at 10:56)</a>:</h4>
<p>Hello everyone,<br>
I am working with my directed simple graphs:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universes</span> <span class="n">u</span>

<span class="kd">@[ext]</span>
<span class="kd">structure</span> <span class="n">directed_simple_graph</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">adj</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">directed_simple_graph</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span>
</code></pre></div>
<p>and I am trying to implement the deleting edges definiton from simple graphs, which have symmetric edges :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">delete_edges</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">sym2</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">G.adj</span> <span class="bp">\</span> <span class="n">sym2.to_rel</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">symm</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">adj_comm</span><span class="o">,</span> <span class="n">sym2.eq_swap</span><span class="o">]</span> <span class="o">}</span>
</code></pre></div>
<p>Of course, I only need adjacency not symmetry. However, I did not see a way to translate s to a relation. Therefore I tried to explicitly define what adj is supposed to do when s is deleted :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">delete_edges</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">,</span> <span class="k">if</span> <span class="o">(</span><span class="n">v1</span><span class="o">,</span><span class="n">v2</span><span class="o">)</span> <span class="bp">∉</span> <span class="n">s</span> <span class="k">then</span> <span class="n">G.adj</span> <span class="n">v1</span> <span class="n">v2</span> <span class="k">else</span> <span class="n">false</span><span class="o">}</span>
</code></pre></div>
<p>That does work but I am not 100% sure whether it is doing what it is supposed to do.  Is there a more convenient way, such that one can prove</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G.delete_edges</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>by rfl ? As in:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">sym2</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G.delete_edges</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="bp">⟦</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="o">)</span><span class="bp">⟧</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">iff.rfl</span>
</code></pre></div>
<p>Any help is appreciated.</p>



<a name="320928169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320928169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320928169">(Jan 12 2023 at 12:43)</a>:</h4>
<p>Why not just write <code>s</code> as a relation? Then</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">delete_edges</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">G.adj</span> <span class="bp">\</span> <span class="n">s</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G.delete_edges</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">s</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">iff.rfl</span>
</code></pre></div>



<a name="320945046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320945046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320945046">(Jan 12 2023 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="111433">@Alistair Tucker</span> I would like s to be the set of the edges one wants to remove from the directed graph.. </p>
<p>As s, for directed graphs, has no symmetry, one obviously can not use </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">sym2.to</span> <span class="n">rel</span> <span class="n">s</span>
</code></pre></div>
<p>but is there a way to obtain a relation from s?</p>



<a name="320950088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320950088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320950088">(Jan 12 2023 at 14:23)</a>:</h4>
<p>You can write it as <code>λ v w, (v, w) ∈ s</code>. There might be some definition(s) in mathlib for going between a set of pairs and a relation, but nothing comes to mind.</p>



<a name="320950758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320950758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320950758">(Jan 12 2023 at 14:26)</a>:</h4>
<p><code>sym2.to_rel</code> exists mainly because it's an inverse to <code>sym2.from_rel</code> and there are a few lemmas about it. It's also not too bad to write <code>λ v w, ⟦(v, w)⟧ ∈ s</code> for it instead.</p>



<a name="320956598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320956598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320956598">(Jan 12 2023 at 14:50)</a>:</h4>
<p>Internally <code>set (V × V)</code> is just <code>V × V → Prop</code> anyway. But perhaps you want to draw some subtle distinction here that I don't understand...</p>



<a name="320957336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320957336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320957336">(Jan 12 2023 at 14:53)</a>:</h4>
<p>Yes, the set "API" expects that you always respect the proper syntax of a set. Sure a set is a predicate, but you ought to always use the membership syntax for things like simp to work properly.</p>



<a name="320957635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320957635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320957635">(Jan 12 2023 at 14:54)</a>:</h4>
<p>Also, my functions have type <code>V → V → Prop</code> (not <code>V × V → Prop</code>).</p>
<p>If <a href="https://leanprover-community.github.io/mathlib_docs/find/function.uncurry">docs#function.uncurry</a> allowed <code>Sort*</code> rather than <code>Type*</code> I might have written <code>function.uncurry (∈ s)</code></p>



<a name="320957828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320957828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320957828">(Jan 12 2023 at 14:55)</a>:</h4>
<p>This <code>(∈ s)</code> notation is how you're expected to turn a set back into a predicate. It's the inverse of <a href="https://leanprover-community.github.io/mathlib_docs/find/set_of">docs#set_of</a></p>



<a name="320962516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320962516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320962516">(Jan 12 2023 at 15:14)</a>:</h4>
<p>Sorry I should have made it clear that I was addressing <span class="user-mention" data-user-id="573061">@Christopher Schmidt</span></p>



<a name="320963018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320963018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320963018">(Jan 12 2023 at 15:16)</a>:</h4>
<p>I guess you could take what I wrote as addressing why you might want a <code>set (V × V)</code> argument rather than a raw relation.</p>



<a name="320963208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320963208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320963208">(Jan 12 2023 at 15:17)</a>:</h4>
<p><span class="user-mention" data-user-id="573061">@Christopher Schmidt</span> Another design, instead of defining <code>delete_edges</code>, is to make a function to create a <code>directed_simple_graph</code> from an edge set, then define the difference of two graphs</p>



<a name="320963614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320963614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320963614">(Jan 12 2023 at 15:18)</a>:</h4>
<p>For simple graphs we don't do that because there's the annoyance that you have to delete the diagonal from the set, since simple graphs are loopless.</p>



<a name="320976276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320976276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320976276">(Jan 12 2023 at 16:11)</a>:</h4>
<p>Thanks for your help and ideas. What I have accomplished through that:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">\</span><span class="n">times</span> <span class="n">V</span><span class="o">)}</span>

<span class="kd">def</span> <span class="n">set_to_rel</span><span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">G</span> <span class="n">s</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">,</span> <span class="o">(</span><span class="n">v1</span><span class="o">,</span><span class="n">v2</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span>

<span class="sd">/-- `from_edge_set` constructs a `directed_simple_graph` from a set of edges. -/</span>
<span class="kd">def</span> <span class="n">from_edge_set</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="o">(</span><span class="n">G.set_to_rel</span> <span class="n">s</span><span class="o">)</span> <span class="o">}</span>

<span class="sd">/-- Given a set of vertex pairs, remove all of the corresponding edges from the</span>
<span class="sd">graph's edge set, if present. -/</span>
<span class="kd">def</span> <span class="n">delete_edges</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">G.adj</span> <span class="bp">\</span> <span class="o">(</span><span class="n">G.set_to_rel</span> <span class="n">s</span><span class="o">)</span> <span class="o">}</span>

<span class="sd">/-- The difference of two graphs `x \ y` has the edges of `x` with the edges of `y` removed. -/</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_sdiff</span> <span class="o">(</span><span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">x.adj</span> <span class="bp">\</span> <span class="n">y.adj</span><span class="o">,}⟩</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G.delete_edges</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">iff.rfl</span>
</code></pre></div>
<p>Does that look alright ?</p>



<a name="320979553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320979553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320979553">(Jan 12 2023 at 16:26)</a>:</h4>
<p>You likely don't want <code>G</code> to be an argument to <code>set_to_rel</code> since it's not used.</p>



<a name="320979590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320979590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320979590">(Jan 12 2023 at 16:26)</a>:</h4>
<p>I'd suggest this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universes</span> <span class="n">u</span>

<span class="kd">@[ext]</span>
<span class="kd">structure</span> <span class="n">directed_simple_graph</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">adj</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">directed_simple_graph</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span>

<span class="sd">/-- `from_edge_set` constructs a `directed_simple_graph` from a set of edges. -/</span>
<span class="kd">def</span> <span class="n">from_edge_set</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span><span class="o">,</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">}</span>

<span class="sd">/-- The difference of two graphs `x \ y` has the edges of `x` with the edges of `y` removed. -/</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_sdiff</span> <span class="o">(</span><span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">x.adj</span> <span class="bp">\</span> <span class="n">y.adj</span> <span class="o">}⟩</span>

<span class="sd">/-- Given a set of vertex pairs, remove all of the corresponding edges from the</span>
<span class="sd">graph's edge set, if present. -/</span>
<span class="kd">def</span> <span class="n">delete_edges</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span> <span class="n">G</span> <span class="bp">\</span> <span class="n">from_edge_set</span> <span class="n">s</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G.delete_edges</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">iff.rfl</span>

<span class="kd">end</span> <span class="n">directed_simple_graph</span>
</code></pre></div>



<a name="320979696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320979696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320979696">(Jan 12 2023 at 16:27)</a>:</h4>
<p>and I probably wouldn't have <code>delete_edges</code> since you can write <code>G \ from_edge_set s</code></p>



<a name="320980280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320980280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320980280">(Jan 12 2023 at 16:30)</a>:</h4>
<p>I'd also add the <code>@[simps]</code> attribute to <code>from_edge_set</code> (which automatically makes a <code>from_edge_set_adj</code> lemma) and add</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">adj_sdiff</span> <span class="o">(</span><span class="n">G</span> <span class="n">G'</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G</span> <span class="bp">\</span> <span class="n">G'</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">G'.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">iff.rfl</span>
</code></pre></div>



<a name="320980830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320980830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320980830">(Jan 12 2023 at 16:32)</a>:</h4>
<p>These together <em>should</em> prove the analogue of <code>delete_edges_adj</code>, but I seem to be missing an import that makes <code>simp</code> handle it automatically...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">delete_edges_adj</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G</span> <span class="bp">\</span> <span class="n">from_edge_set</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="n">simp</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> missing import? -/</span> <span class="kd">end</span>
</code></pre></div>



<a name="320981603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320981603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320981603">(Jan 12 2023 at 16:35)</a>:</h4>
<p>Ah, I had <code>@[simps]</code> on the instance in my own file, which gave the "wrong" simp lemma for this. Here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universes</span> <span class="n">u</span>

<span class="kd">@[ext]</span>
<span class="kd">structure</span> <span class="n">directed_simple_graph</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">adj</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">directed_simple_graph</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span>

<span class="sd">/-- `from_edge_set` constructs a `directed_simple_graph` from a set of edges. -/</span>
<span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">from_edge_set</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span><span class="o">,</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">}</span>

<span class="sd">/-- The difference of two graphs `x \ y` has the edges of `x` with the edges of `y` removed. -/</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_sdiff</span> <span class="o">(</span><span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="n">x.adj</span> <span class="bp">\</span> <span class="n">y.adj</span> <span class="o">}⟩</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">adj_sdiff</span> <span class="o">(</span><span class="n">G</span> <span class="n">G'</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G</span> <span class="bp">\</span> <span class="n">G'</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">G'.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">iff.rfl</span>

<span class="c1">-- Then this particular lemma is unnecessary:</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">V</span> <span class="bp">×</span> <span class="n">V</span><span class="o">))</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">G</span> <span class="bp">\</span> <span class="n">from_edge_set</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">↔</span> <span class="n">G.adj</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">w</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span>

<span class="kd">end</span> <span class="n">directed_simple_graph</span>
</code></pre></div>



<a name="320985218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320985218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320985218">(Jan 12 2023 at 16:51)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> Thanks, that looks better.</p>



<a name="320986496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320986496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320986496">(Jan 12 2023 at 16:57)</a>:</h4>
<p>If one includes the delete_edges Def, why does</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_univ_eq</span> <span class="o">:</span> <span class="n">G.delete_edges</span> <span class="n">set.univ</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">}</span>
</code></pre></div>
<p>give an error? (wanted to have it analogous to mathlib)</p>



<a name="320987286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320987286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320987286">(Jan 12 2023 at 17:00)</a>:</h4>
<p>That depends on what you defined bot to be. I'm guessing you don't have an adjacency simp lemma for it?</p>



<a name="320987917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/320987917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#320987917">(Jan 12 2023 at 17:03)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_bot</span> <span class="o">(</span><span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨{</span> <span class="n">adj</span> <span class="o">:=</span> <span class="bp">⊥</span> <span class="o">}⟩</span>

<span class="kd">@[simp]</span>
<span class="kd">lemma</span> <span class="n">not_adj_bot</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">⊥</span> <span class="o">:</span> <span class="n">directed_simple_graph</span> <span class="n">V</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">false.elim</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">delete_edges_univ_eq</span> <span class="o">:</span>
  <span class="n">G</span> <span class="bp">\</span> <span class="n">from_edge_set</span> <span class="n">set.univ</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="o">}</span>
</code></pre></div>



<a name="321007614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/graphs%20and%20deleting%20edges/near/321007614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Schmidt <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/graphs.20and.20deleting.20edges.html#321007614">(Jan 12 2023 at 18:36)</a>:</h4>
<p>Oh, I tough that this symbol is predefined as an always false, as G.delete edges set.univ obviously is an "always false relation".<br>
Anyways.. thank you <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> .</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>