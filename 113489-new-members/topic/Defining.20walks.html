---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Defining.20walks.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html">Defining walks</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="215105955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215105955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oskar Berndal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215105955">(Oct 30 2020 at 15:01)</a>:</h4>
<p>Hello everyone! I am trying to define a type of walks in a square grid. I want to parametrize the type over endpoints of the walk and the number of backwards-moves (moves that are either up or left). I made the following definition</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">node</span> <span class="o">:=</span> <span class="n">ℕ</span><span class="bp">×</span><span class="n">ℕ</span>

<span class="kd">inductive</span> <span class="n">back_walk</span><span class="o">:</span> <span class="n">node</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">node</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">start</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">s</span><span class="o">:</span> <span class="n">node</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="mi">0</span> <span class="n">s</span>
<span class="bp">|</span> <span class="n">d</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">s</span><span class="o">:</span> <span class="n">node</span><span class="o">,</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">r</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">s</span><span class="o">:</span> <span class="n">node</span><span class="o">,</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">l</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">s</span><span class="o">:</span> <span class="n">node</span><span class="o">,</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">u</span><span class="o">:</span> <span class="bp">Π</span> <span class="n">s</span><span class="o">:</span> <span class="n">node</span><span class="o">,</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">s</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
</code></pre></div>

<p>which seems to do what I want it to do, but it would be nice to be able to have the variables of the constructors somehow be captured by the scope of the inductive definition rather than the <code>\Pi</code>'s at the constructors. I'm wondering if anyone has a suggestion? Thanks ^__^</p>



<a name="215110011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215110011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215110011">(Oct 30 2020 at 15:29)</a>:</h4>
<p>Is this more what you mean?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">node</span> <span class="o">:=</span> <span class="n">ℕ</span><span class="bp">×</span><span class="n">ℕ</span>

<span class="kd">inductive</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">node</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">node</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">start</span> <span class="o">:</span> <span class="n">back_walk</span> <span class="mi">0</span> <span class="n">s</span>
<span class="bp">|</span> <span class="n">d</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">l</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">u</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
</code></pre></div>



<a name="215110920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215110920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oskar Berndal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215110920">(Oct 30 2020 at 15:35)</a>:</h4>
<p>Yes thank you ^___^</p>



<a name="215111037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215111037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215111037">(Oct 30 2020 at 15:36)</a>:</h4>
<p>I'm not sure how you plan on using it, so that might not be the right way to express it</p>



<a name="215111883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215111883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215111883">(Oct 30 2020 at 15:43)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">node</span> <span class="o">:=</span> <span class="n">ℕ</span><span class="bp">×</span><span class="n">ℕ</span>

<span class="kd">inductive</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">node</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">node</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">start</span> <span class="o">:</span> <span class="n">back_walk</span> <span class="mi">0</span> <span class="n">s</span>
<span class="bp">|</span> <span class="n">d</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">},</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">},</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">l</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">},</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>
<span class="bp">|</span> <span class="n">u</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">},</span> <span class="n">back_walk</span> <span class="n">n</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">+</span><span class="mi">1</span> <span class="o">⟩</span> <span class="bp">→</span> <span class="n">back_walk</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">⟨</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">⟩</span>

<span class="kn">open</span> <span class="n">back_walk</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">x'</span> <span class="n">y'</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_repr</span> <span class="o">(</span><span class="n">back_walk</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">⟩</span> <span class="n">n</span> <span class="o">⟨</span><span class="n">x'</span><span class="o">,</span> <span class="n">y'</span><span class="o">⟩)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">string.intercalate</span> <span class="s2">", "</span> <span class="o">[</span><span class="s2">"end: "</span> <span class="bp">++</span> <span class="n">repr</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="s2">"steps: "</span> <span class="bp">++</span> <span class="n">repr</span> <span class="n">n</span><span class="o">,</span> <span class="s2">"start: "</span> <span class="bp">++</span> <span class="n">repr</span> <span class="o">(</span><span class="n">x'</span><span class="o">,</span> <span class="n">y'</span><span class="o">)]⟩</span>

<span class="k">#eval</span> <span class="o">(</span><span class="n">start</span> <span class="o">:</span> <span class="n">back_walk</span> <span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">u.d.l.d.l.d.r</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">end: (5, 5), steps: 3, start: (6, 5)</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="215112735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215112735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oskar Berndal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215112735">(Oct 30 2020 at 15:49)</a>:</h4>
<p>Oh you are quite right I have <code>d</code> and <code>r</code>mixed up. Thank you, also for providing the nice debugging thingie :^)</p>



<a name="215112965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215112965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oskar Berndal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215112965">(Oct 30 2020 at 15:50)</a>:</h4>
<p>(Although I'd say that you have <code>end</code> and <code>start</code> mixed up there, I'm following the strange convention that pos y-dir is down and pos x-dir is right)</p>



<a name="215113233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215113233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215113233">(Oct 30 2020 at 15:52)</a>:</h4>
<p>Well, if it's a "back walk" then I think you're counting the <code>l</code> and <code>u</code> taken backwards. Of course, not sure of the actual problem, so easy to change the labels =)</p>



<a name="215113648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20walks/near/215113648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oskar Berndal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20walks.html#215113648">(Oct 30 2020 at 15:55)</a>:</h4>
<p>Maybe it's just the name 'back_walk' that is bad, because it is meant to convey something like 'a walk where we count the number of backs' which 'back_walk' does not convey</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>