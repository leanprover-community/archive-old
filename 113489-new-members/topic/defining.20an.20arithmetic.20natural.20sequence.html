---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/defining.20an.20arithmetic.20natural.20sequence.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/defining.20an.20arithmetic.20natural.20sequence.html">defining an arithmetic natural sequence</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="292962517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/defining%20an%20arithmetic%20natural%20sequence/near/292962517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bulhwi Cha <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/defining.20an.20arithmetic.20natural.20sequence.html#292962517">(Aug 11 2022 at 16:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- this code is written in Lean 4</span>
<span class="kn">import</span> <span class="n">Mathlib.Tactic.Ring</span>

<span class="c1">-- define an arithmetic natural sequence</span>
<span class="kd">def</span> <span class="n">is_arith_nat_seq</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
    <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span>

<span class="kd">def</span> <span class="n">is_not_arith_nat_seq</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">¬</span> <span class="n">is_arith_nat_seq</span> <span class="n">a</span>

<span class="kd">postfix</span><span class="o">:</span><span class="n">max</span> <span class="s2">"is an arithmetic natural sequence"</span>     <span class="bp">=&gt;</span> <span class="n">is_arith_nat_seq</span>
<span class="kd">postfix</span><span class="o">:</span><span class="n">max</span> <span class="s2">"is not an arithmetic natural sequence"</span> <span class="bp">=&gt;</span> <span class="n">is_not_arith_nat_seq</span>

<span class="c1">-- define the sequence of odd natural numbers</span>
<span class="kd">def</span> <span class="n">odd</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">=&gt;</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>

<span class="k">#reduce</span> <span class="n">odd</span> <span class="mi">0</span> <span class="c1">-- output: 1</span>
<span class="k">#reduce</span> <span class="n">odd</span> <span class="mi">1</span> <span class="c1">-- 3</span>
<span class="k">#reduce</span> <span class="n">odd</span> <span class="mi">2</span> <span class="c1">-- 5</span>

<span class="c1">-- `odd` is an arithmetic natural sequence</span>
<span class="kd">theorem</span> <span class="n">odd_is_arith_nat_seq</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">is</span> <span class="n">an</span> <span class="n">arithmetic</span> <span class="n">natural</span> <span class="n">sequence</span> <span class="o">:=</span>
  <span class="k">show</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">odd</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">odd</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span>
    <span class="k">from</span> <span class="n">Exists.intro</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>
    <span class="o">(</span><span class="k">show</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">odd</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">odd</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span>
      <span class="k">from</span> <span class="k">fun</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">=&gt;</span> <span class="k">calc</span>
      <span class="n">odd</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
      <span class="n">_</span>           <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">congrArg</span> <span class="n">Nat.succ</span> <span class="o">(</span><span class="n">Nat.mul_add</span> <span class="mi">2</span> <span class="n">n</span> <span class="mi">1</span><span class="o">)</span>
      <span class="n">_</span>           <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">Nat.add_right_comm</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span>
      <span class="n">_</span>           <span class="bp">=</span> <span class="n">odd</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span>       <span class="o">:=</span> <span class="n">rfl</span><span class="o">)</span>

<span class="c">/-</span><span class="cm"> do not switch the order of the quantifiers</span>
<span class="cm">   in the definition of `is_arith_nat_seq` -/</span>
<span class="kd">theorem</span> <span class="n">do_not_switch_quantifiers</span> <span class="o">:</span>
        <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
                      <span class="bp">∧</span> <span class="n">b</span> <span class="n">is</span> <span class="n">not</span> <span class="n">an</span> <span class="n">arithmetic</span> <span class="n">natural</span> <span class="n">sequence</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">=&gt;</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span>

  <span class="k">have</span> <span class="n">switch_quantifiers</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span>
    <span class="k">fun</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">=&gt;</span>
    <span class="k">show</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span>
      <span class="k">from</span> <span class="n">Exists.intro</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>
      <span class="o">(</span><span class="k">show</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
        <span class="k">from</span> <span class="k">calc</span>
        <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span>       <span class="o">:=</span> <span class="n">rfl</span>
        <span class="n">_</span>         <span class="bp">=</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
        <span class="n">_</span>         <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">)</span>

  <span class="k">have</span> <span class="n">b_is_not_arith_nat_seq</span> <span class="o">:</span> <span class="n">b</span> <span class="n">is</span> <span class="n">not</span> <span class="n">an</span> <span class="n">arithmetic</span> <span class="n">natural</span> <span class="n">sequence</span> <span class="o">:=</span>
    <span class="k">fun</span> <span class="n">hyp</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span> <span class="bp">=&gt;</span>
    <span class="k">show</span> <span class="n">False</span>
      <span class="k">from</span> <span class="n">Exists.elim</span> <span class="n">hyp</span>
      <span class="o">(</span><span class="k">fun</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">=&gt;</span>
      <span class="k">fun</span> <span class="n">d_is_common_difference</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span> <span class="bp">=&gt;</span>
      <span class="k">have</span> <span class="n">b_1_is_b_0_plus_d</span> <span class="o">:</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">d_is_common_difference</span> <span class="mi">0</span>
      <span class="k">have</span> <span class="n">d_is_1</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">calc</span>
        <span class="n">d</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">b</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">b_1_is_b_0_plus_d</span><span class="o">,</span> <span class="n">Nat.add_sub_self_left</span><span class="o">]</span>
        <span class="n">_</span> <span class="bp">=</span> <span class="mi">1</span>         <span class="o">:=</span> <span class="n">rfl</span>
      <span class="k">have</span> <span class="n">b_2_is_b_1_plus_d</span> <span class="o">:</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">d_is_common_difference</span> <span class="mi">1</span>
      <span class="k">have</span> <span class="n">d_is_3</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">calc</span>
        <span class="n">d</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">b</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">b_2_is_b_1_plus_d</span><span class="o">,</span> <span class="n">Nat.add_sub_self_left</span><span class="o">]</span>
        <span class="n">_</span> <span class="bp">=</span> <span class="mi">3</span>         <span class="o">:=</span> <span class="n">rfl</span>
      <span class="k">have</span> <span class="n">one_is_3</span>     <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">d_is_1</span><span class="o">,</span> <span class="n">d_is_3</span><span class="o">]</span>
      <span class="k">have</span> <span class="n">one_is_not_3</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≠</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
      <span class="k">show</span> <span class="n">False</span> <span class="k">from</span> <span class="n">one_is_not_3</span> <span class="n">one_is_3</span><span class="o">)</span>

  <span class="k">show</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
                    <span class="bp">∧</span> <span class="n">b</span> <span class="n">is</span> <span class="n">not</span> <span class="n">an</span> <span class="n">arithmetic</span> <span class="n">natural</span> <span class="n">sequence</span>
    <span class="k">from</span> <span class="n">Exists.intro</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span>
    <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span>
          <span class="bp">∧</span> <span class="n">b</span> <span class="n">is</span> <span class="n">not</span> <span class="n">an</span> <span class="n">arithmetic</span> <span class="n">natural</span> <span class="n">sequence</span>
      <span class="k">from</span> <span class="n">And.intro</span> <span class="n">switch_quantifiers</span> <span class="n">b_is_not_arith_nat_seq</span><span class="o">)</span>
</code></pre></div>



<a name="292962634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/defining%20an%20arithmetic%20natural%20sequence/near/292962634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bulhwi Cha <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/defining.20an.20arithmetic.20natural.20sequence.html#292962634">(Aug 11 2022 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="454439">@shimsw20</span> and I wrote the above code for practice. We defined arithmetic natural sequences, proved that the sequence of odd natural numbers is one of them, and showed that you shouldn't switch the order of the quantifiers in the definition of <code>is_arith_nat_seq</code>.</p>
<p>Our proof style is adapted from the draft of <span class="user-mention" data-user-id="392185">@Clara Löh</span>'s "<a href="#narrow/stream/113486-announce/topic/Book.20project.20.22Exploring.20Formalisation.22/near/285971829">Exploring Formalisation. A Primer in Human-Readable Mathematics in Lean 3 with Examples from Simplicial Topology</a>."</p>



<a name="292965834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/defining%20an%20arithmetic%20natural%20sequence/near/292965834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/defining.20an.20arithmetic.20natural.20sequence.html#292965834">(Aug 11 2022 at 16:40)</a>:</h4>
<p>Nice!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>