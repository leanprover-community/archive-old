---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html">has_deriv_at for function defined on open set</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214045326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214045326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214045326">(Oct 21 2020 at 12:56)</a>:</h4>
<p>So far I could only find variants of has_deriv_at which take as input a function from a normed group or field to a normed group. I want to talk about the differentiability of a function defined on an open subset of \C, i.e.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">constant</span> <span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">\</span><span class="n">C</span>
<span class="kd">constant</span> <span class="n">h</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span>
<span class="kd">constant</span> <span class="n">f</span> <span class="o">:</span> <span class="n">U</span> <span class="bp">-&gt;</span> <span class="bp">\</span><span class="n">C</span>
</code></pre></div>

<p>I suppose I could extend f by zero and then use has_deriv_at, but this doesn't seem like a natural way to do things. <br>
Should I just make a definition kind of like the following?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">has_deriv_open_subset_at</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">\</span><span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">U</span> <span class="bp">-&gt;</span> <span class="bp">\</span><span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
   <span class="o">:=</span> <span class="n">has_deriv_at</span> <span class="o">(</span><span class="n">extend_by_0</span> <span class="n">f</span><span class="o">)</span>
</code></pre></div>



<a name="214046347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046347">(Oct 21 2020 at 13:05)</a>:</h4>
<p>Where did you get that function?</p>



<a name="214046455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046455">(Oct 21 2020 at 13:06)</a>:</h4>
<p>I tried to push for a derivative on partial functions early on, but the view was that in practice you only ever get total functions (and we try to keep it that way)</p>



<a name="214046562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046562">(Oct 21 2020 at 13:07)</a>:</h4>
<p>I want to formalize some basic lemmas in a complex analysis book I have and in this book functions are pretty much always associated with a domain U.</p>



<a name="214046621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046621">(Oct 21 2020 at 13:08)</a>:</h4>
<p>okay, so just ignore that then</p>



<a name="214046656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046656">(Oct 21 2020 at 13:08)</a>:</h4>
<p>just use a total function which is only assumed to be reasonable on U</p>



<a name="214046685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046685">(Oct 21 2020 at 13:08)</a>:</h4>
<p>ah hmm that would work for now</p>



<a name="214046786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214046786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214046786">(Oct 21 2020 at 13:09)</a>:</h4>
<p>we'll just keep pushing the <code>extend_by_0</code> part off and maybe we'll never need it</p>



<a name="214047186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214047186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214047186">(Oct 21 2020 at 13:13)</a>:</h4>
<p>So I guess just always carry the domain along with the function and try to never do anything which depends on function values outside its domain. Ok that'll work.</p>



<a name="214047224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214047224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214047224">(Oct 21 2020 at 13:13)</a>:</h4>
<p>welcome to the weird world of dependent type theory</p>



<a name="214047525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214047525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214047525">(Oct 21 2020 at 13:16)</a>:</h4>
<p>where the one thing you must avoid at all costs is dependent types</p>



<a name="214064440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214064440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Golol <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214064440">(Oct 21 2020 at 15:13)</a>:</h4>
<p>I am struggling to rewrite <code>Δ x * (x - z) - Δ z * (x - z)</code> into <code>(Δ x  -  Δ z) * (x - z) </code> using right_distrib. The problem is that there is a minus and not a plus. What exactly does this notation actually stand for? Is it <code>Δ x * (x - z) + (-1) * Δ z * (x - z)</code>?</p>



<a name="214064702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214064702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214064702">(Oct 21 2020 at 15:14)</a>:</h4>
<p>just use <code>sub_mul</code></p>



<a name="214065463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214065463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214065463">(Oct 21 2020 at 15:18)</a>:</h4>
<p>To see what notation stands for, you can use <code>set_option pp.notation false</code>.</p>



<a name="214065551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214065551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214065551">(Oct 21 2020 at 15:18)</a>:</h4>
<p>Though often times you'll also need <code>set_option pp.implicit true</code> to make sense of the output.</p>



<a name="214066740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/has_deriv_at%20for%20function%20defined%20on%20open%20set/near/214066740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/has_deriv_at.20for.20function.20defined.20on.20open.20set.html#214066740">(Oct 21 2020 at 15:25)</a>:</h4>
<p>There is probably a lemma that says that the two statements are equal (<code>-</code> and <code>+ (-1) *</code>) but only for types that make sense. So for example, this is not true for <code>nat</code> because there is no<code>-1</code> in <code>nat</code>, and subtraction in <code>nat</code> isn't what you expect.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>