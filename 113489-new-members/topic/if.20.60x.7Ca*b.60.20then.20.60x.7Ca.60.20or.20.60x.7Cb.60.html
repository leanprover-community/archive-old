---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html">if `x|a*b` then `x|a` or `x|b`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222247978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222247978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222247978">(Jan 10 2021 at 23:32)</a>:</h4>
<p>I'm looking for a lifeline here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">lemma</span> <span class="n">expand_dvd</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">ℕ</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∣</span> <span class="n">b</span> <span class="bp">↔</span>  <span class="bp">∃</span> <span class="n">c</span><span class="o">,</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">iff.rfl</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">dvd_mul_a_b_then_a_or_b</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)))</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:=</span> <span class="n">exists_eq_mul_right_of_dvd</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">finish</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">or.inr</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">c</span> <span class="n">hc</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="o">(</span><span class="n">expand_dvd</span> <span class="n">x</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h2</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>The tactic state is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">abx</span><span class="o">:</span> <span class="n">ℕ</span>
<span class="n">h</span><span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span>
<span class="n">ha</span><span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span>
<span class="n">c</span><span class="o">:</span> <span class="n">ℕ</span>
<span class="n">hc</span><span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">c</span>
<span class="n">h2</span><span class="o">:</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">c</span>
</code></pre></div>
<p>It seems like an obvious fact but I'm blanking out and I don't see it already in <a href="https://leanprover-community.github.io/mathlib_docs/find/dvd">docs#dvd</a></p>



<a name="222248017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248017">(Jan 10 2021 at 23:34)</a>:</h4>
<p>Do you know the maths proof? I'm particularly interested in your answer this time, because in this case you're wasting your time -- what you're trying to prove here is false. You have to know the maths proof.</p>



<a name="222248300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248300">(Jan 10 2021 at 23:41)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactic/slim_check.html"><code>slim_check</code></a> can find lots of counterexamples:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.slim_check</span>

<span class="kd">lemma</span> <span class="n">dvd_mul_a_b_then_a_or_b</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)))</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">slim_check</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">===================</span>
<span class="cm">Found problems!</span>

<span class="cm">a := 1198</span>
<span class="cm">b := 18</span>
<span class="cm">x := 4</span>
<span class="cm">(0 shrinks)</span>
<span class="cm">-------------------</span>

<span class="cm">state:</span>
<span class="cm">a b x : ℕ,</span>
<span class="cm">h : x ∣ a * b</span>
<span class="cm">⊢ x ∣ a ∨ x ∣ b</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="222248345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248345">(Jan 10 2021 at 23:42)</a>:</h4>
<p>Oh nice! It's about time I stopped forgetting that <code>slim_check</code> exists.</p>



<a name="222248594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248594">(Jan 10 2021 at 23:49)</a>:</h4>
<p>I wonder... Can slim check work in "reverse" trying to find additional hypotheses that will "fix" a statement?</p>



<a name="222248639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248639">(Jan 10 2021 at 23:50)</a>:</h4>
<p><code>h : false</code> will fix this one</p>



<a name="222248641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248641">(Jan 10 2021 at 23:50)</a>:</h4>
<p>Yeah, it needs to be a bit more clever than that <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="222248651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248651">(Jan 10 2021 at 23:51)</a>:</h4>
<p>Lars -- if x is 0 or 1 or prime you're OK. But I'm not sure if a computer could spot that!</p>



<a name="222248719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248719">(Jan 10 2021 at 23:53)</a>:</h4>
<p>The smartest thing to do on this occasion would be to try values of x sequentially, figure out which ones seem to work, and then to query <a href="http://oeis.org">oeis.org</a> to try and find out what's going on. But even here there's a subtlety -- you have to know that it's a condition on x which gives you the interesting theorem, as opposed to a condition on a or b.</p>



<a name="222248768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248768">(Jan 10 2021 at 23:54)</a>:</h4>
<p>lol <a href="https://oeis.org/A158611">https://oeis.org/A158611</a></p>



<a name="222248780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248780">(Jan 10 2021 at 23:54)</a>:</h4>
<p>Oooh searching oeis is a very interesting idea!</p>



<a name="222248792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248792">(Jan 10 2021 at 23:55)</a>:</h4>
<p>In the old days you had to search Don Zagier, which was much more inconvenient.</p>



<a name="222248859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222248859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222248859">(Jan 10 2021 at 23:57)</a>:</h4>
<p>I remember when people started uploading pari code to OEIS which produced the sequences -- I thought it was a neat idea. Now I'm thinking that if enough people started uploading Lean code to produce the functions, you really could get something neat :-) Can we port the pari code to Lean?</p>



<a name="222249170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222249170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222249170">(Jan 11 2021 at 00:05)</a>:</h4>
<p>is there a tactic that knows how to instead look at the type of the goal and suggest hypotheses based on things in mathlib already with that goal type?</p>



<a name="222249228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222249228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222249228">(Jan 11 2021 at 00:06)</a>:</h4>
<p>There's the <code>#find</code> command</p>



<a name="222249367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222249367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222249367">(Jan 11 2021 at 00:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  you're right, I didn't consider the possibility that <code>x</code> could be a product of a factor in <code>a</code> and a factor in <code>b</code>.</p>
<p>I was actually trying to prove this lemma which is also false by <code>slim_check</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.basic</span>
<span class="kn">import</span> <span class="n">tactic.slim_check</span>

<span class="kd">lemma</span> <span class="n">neg_dvd_mul</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span><span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">x</span> <span class="bp">∣</span> <span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">hb</span><span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">x</span> <span class="bp">∣</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">slim_check</span>
</code></pre></div>
<p>The counterexample is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">a</span> <span class="o">:=</span> <span class="mi">34</span>
<span class="n">b</span> <span class="o">:=</span> <span class="mi">6</span>
<span class="n">x</span> <span class="o">:=</span> <span class="mi">12</span>
</code></pre></div>



<a name="222249379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222249379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222249379">(Jan 11 2021 at 00:10)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>  for <code>slim_check</code>.</p>



<a name="222249390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/if%20%60x%7Ca%2Ab%60%20then%20%60x%7Ca%60%20or%20%60x%7Cb%60/near/222249390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/if.20.60x.7Ca*b.60.20then.20.60x.7Ca.60.20or.20.60x.7Cb.60.html#222249390">(Jan 11 2021 at 00:11)</a>:</h4>
<p>or x=4, a=b=2.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>