---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html">✔ Opposite specialize</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="314048050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314048050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314048050">(Dec 05 2022 at 15:20)</a>:</h4>
<p>Is there a tactic that works like <code>specialize</code> but kinda opposite? I'd like to write the following in a single command.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="n">baz</span> <span class="o">:=</span> <span class="n">foo</span> <span class="n">bar</span><span class="o">,</span>
<span class="n">clear</span> <span class="n">bar</span><span class="o">,</span>
<span class="n">rename</span> <span class="n">baz</span> <span class="n">bar</span><span class="o">,</span>
</code></pre></div>
<p>Maybe it is what <code>apply foo at bar</code> was suggested to do? Does it exist?</p>



<a name="314058663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314058663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314058663">(Dec 05 2022 at 15:22)</a>:</h4>
<p><code>replace bar := foo bar</code>?</p>



<a name="314059813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314059813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314059813">(Dec 05 2022 at 15:28)</a>:</h4>
<p>Is it good manner to use <code>replace</code> in "production code"?</p>



<a name="314059847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314059847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314059847">(Dec 05 2022 at 15:28)</a>:</h4>
<p>i hope so because i've done it a lot</p>



<a name="314059917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314059917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314059917">(Dec 05 2022 at 15:29)</a>:</h4>
<p>I can see 600+ hits in mathlib</p>



<a name="314060042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314060042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314060042">(Dec 05 2022 at 15:29)</a>:</h4>
<p>I don't see any problem with it, and I like it!</p>



<a name="314060569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314060569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314060569">(Dec 05 2022 at 15:32)</a>:</h4>
<p>I was just wondering what happens if I accidentally write <code>replace baz := foo bar</code> instead. It seems it just does <code>have</code> and nothing breaks.</p>



<a name="314060758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314060758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314060758">(Dec 05 2022 at 15:32)</a>:</h4>
<p>What I like about <code>specialize</code> is that this mistake cannot happen. I don't have to write a pair of matching identifiers in order to do what it is made for.</p>



<a name="314060932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314060932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314060932">(Dec 05 2022 at 15:33)</a>:</h4>
<p>Regarding <code>apply foo at bar</code>, are you looking for <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#apply_fun">tactic#apply_fun</a>?</p>



<a name="314061232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314061232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314061232">(Dec 05 2022 at 15:35)</a>:</h4>
<p>No.</p>



<a name="314062056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314062056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314062056">(Dec 05 2022 at 15:39)</a>:</h4>
<p>Lean more or less ignore the name we give to variables (this is surely not precise, but in practice it's often like that). I think it uses behind the scenes the <a href="https://en.wikipedia.org/wiki/De_Bruijn_index">De_Bruijn_index</a>.</p>



<a name="314062350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314062350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314062350">(Dec 05 2022 at 15:40)</a>:</h4>
<p>Ah sorry, your question was different. You can see that <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.replace">docs#tactic.replace</a> does</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">replace</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">name</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">pexpr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="k">do</span> <span class="n">h'</span> <span class="bp">←</span> <span class="n">get_local</span> <span class="n">h</span><span class="o">,</span>
   <span class="n">p</span> <span class="bp">←</span> <span class="n">to_expr</span> <span class="n">p</span><span class="o">,</span>
   <span class="n">note</span> <span class="n">h</span> <span class="n">none</span> <span class="n">p</span><span class="o">,</span>
   <span class="n">clear</span> <span class="n">h'</span>
</code></pre></div>
<p>so if <code>h</code> doesn't exist it's like a <code>have</code>.</p>



<a name="314062690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Opposite%20specialize/near/314062690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Opposite.20specialize.html#314062690">(Dec 05 2022 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>