---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html">building reals with quasi-morphisms</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="256851073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256851073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256851073">(Oct 09 2021 at 08:07)</a>:</h4>
<p>Hello,  i am a french student in mathematics and for fun  (and in order to practice) i am trying to build the real numbers with the quasi-morphisme construction.</p>



<a name="256851678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256851678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256851678">(Oct 09 2021 at 08:17)</a>:</h4>
<p>See <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.max">docs#finset.max</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.max'">docs#finset.max'</a>.</p>



<a name="256851745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256851745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256851745">(Oct 09 2021 at 08:18)</a>:</h4>
<p>Can you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> showing what you're trying to do to import, and explain the file layout?</p>



<a name="256852689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852689">(Oct 09 2021 at 08:35)</a>:</h4>
<p>thank you for the link</p>
<p>I just created a second file in the directory "src" and wrote " import [name of my first file]" wich didn't work and i see that lean is not aware of what i wrote on the other file </p>
<p>the begining of the file is that:<br>
/-<br>
import data.int.basic<br>
import tactic.linarith</p>
<p>def q_morph (f:ℤ→ ℤ) := ∃ (M :ℤ) , ∀ n m,  (- M≤ f n + f m - f (n+m))∧(f n + f m - f (n+m)≤ M)</p>
<p>def QM: set _ :={f:ℤ→ℤ | q_morph f }</p>
<p>def egal (f:ℤ → ℤ ) (g:ℤ→ℤ):= q_morph (f - g) -/</p>
<p>and then there are lemmas to prove that things behave like we would expect</p>



<a name="256852903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852903">(Oct 09 2021 at 08:39)</a>:</h4>
<p>For the quotient question, you can start with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">structure</span> <span class="n">quasi_mph</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">→</span> <span class="n">ℤ</span><span class="o">)</span>
<span class="o">(</span><span class="n">bound</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">abs</span><span class="o">(</span><span class="n">to_fun</span> <span class="o">(</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span> <span class="bp">-</span> <span class="n">to_fun</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">to_fun</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">bound</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">quasi_mph</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="n">quasi_mph</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">q</span><span class="o">,</span> <span class="n">q.to_fun</span><span class="o">⟩</span>

<span class="c1">-- Let's restate the `map_mul' axiom in term of the coercion to function</span>

<span class="kd">lemma</span> <span class="n">map_mul</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">quasi_mph</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">q</span> <span class="o">(</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span> <span class="bp">-</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">q</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">q.bound</span> <span class="o">:=</span>
<span class="n">q.map_mul'</span> <span class="n">x</span> <span class="n">y</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">setoid</span> <span class="n">quasi_mph</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">r</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="o">⟨</span><span class="gr">sorry</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">⟩</span> <span class="o">}</span>

<span class="kd">end</span> <span class="n">quasi_mph</span>

<span class="kd">def</span> <span class="n">euxodus_real</span> <span class="o">:=</span> <span class="n">quotient</span> <span class="n">quasi_mph.setoid</span>

<span class="kd">variable</span> <span class="n">q</span> <span class="o">:</span> <span class="n">quasi_mph</span>

<span class="k">#check</span> <span class="o">(</span><span class="bp">⟦</span><span class="n">q</span><span class="bp">⟧</span> <span class="o">:</span> <span class="n">euxodus_real</span><span class="o">)</span>
</code></pre></div>



<a name="256852907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852907">(Oct 09 2021 at 08:39)</a>:</h4>
<p>You also need to read <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="256852919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852919">(Oct 09 2021 at 08:39)</a>:</h4>
<p>Do you have a <code>leanpkg.toml</code>? Did you open a file in VSCode, or the whole folder?</p>



<a name="256852927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852927">(Oct 09 2021 at 08:39)</a>:</h4>
<p>(You need one, and you need to open the folder containing <code>src</code>.)</p>



<a name="256852930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852930">(Oct 09 2021 at 08:39)</a>:</h4>
<p>About the file layout, we need to know what is the <code>src</code> folder you're talking about</p>



<a name="256852977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256852977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256852977">(Oct 09 2021 at 08:40)</a>:</h4>
<p>Did you create a project using <code>leanproject new</code>?</p>



<a name="256853131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256853131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256853131">(Oct 09 2021 at 08:42)</a>:</h4>
<p><a href="/user_uploads/3121/drw_B8dgQCIqaeJyx6KMknmr/yannis.gif">yannis.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/drw_B8dgQCIqaeJyx6KMknmr/yannis.gif" title="yannis.gif"><img src="/user_uploads/3121/drw_B8dgQCIqaeJyx6KMknmr/yannis.gif"></a></div>



<a name="256853221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256853221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256853221">(Oct 09 2021 at 08:44)</a>:</h4>
<p>Do not mind the <code>leanproject</code> bug that says it's looking for yannis olean instead of mathlib oleans</p>



<a name="256853565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256853565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256853565">(Oct 09 2021 at 08:51)</a>:</h4>
<p>i thought i did like that, but after redoing it like on your video, it now works. So i don't understand what hapened but the issue is now gone...</p>
<p>thank you very much</p>



<a name="256853730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256853730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256853730">(Oct 09 2021 at 08:54)</a>:</h4>
<p>Also make sure to read <a href="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#quotients">https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#quotients</a> if you haven't read it yet.</p>



<a name="256854358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256854358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256854358">(Oct 09 2021 at 09:04)</a>:</h4>
<p>Also note that this construction has already been done if you need inspiration, although I can't find it anymore <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="256854580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256854580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256854580">(Oct 09 2021 at 09:08)</a>:</h4>
<p>i saw on wikipedia  that it has been done by the projet  IsarMathLib, but is it in Lean?</p>



<a name="256854624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256854624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256854624">(Oct 09 2021 at 09:09)</a>:</h4>
<p>I remember so... but I might be mistaken. Can anyone else infirm/confirm?</p>



<a name="256861389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256861389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256861389">(Oct 09 2021 at 11:01)</a>:</h4>
<p>There was <a href="https://github.com/Lix0120/eudoxus">https://github.com/Lix0120/eudoxus</a> which seems pretty similar, though I don't know if they are exactly the same?</p>



<a name="256863281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/256863281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#256863281">(Oct 09 2021 at 11:34)</a>:</h4>
<p>That's what I was thinking about! This is exactly the same.</p>



<a name="257833630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/257833630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#257833630">(Oct 16 2021 at 13:55)</a>:</h4>
<p>hello, i have a question about lifting maps to with two agruments to the quotient</p>
<p>is there a way to lift to arguments at the same time or do we need to lift in one argument and then in the other?</p>



<a name="257833873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/257833873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#257833873">(Oct 16 2021 at 13:59)</a>:</h4>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/data/quot.html#quot.lift%E2%82%82">https://leanprover-community.github.io/mathlib_docs/data/quot.html#quot.lift%E2%82%82</a> what you want?</p>



<a name="257834055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/257834055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#257834055">(Oct 16 2021 at 14:01)</a>:</h4>
<p>yes it is exactly that thank you</p>



<a name="258829997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258829997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258829997">(Oct 23 2021 at 15:55)</a>:</h4>
<p>Hello, is there a way to extract from a term "\exists M,....." a value of M in the same way that we exctrat a proof of A from a proof of "A and B".</p>
<p>I am trying to define a new term of a structure and i need to give to lean a value of M and a proof that this M satisfy some conditions, but the actual value of M is dificult to know so i can't give it just by writing it's value.</p>
<p>On the other hand i tryed to define my term between 'begin' and 'end' in order to be able to use rcase (\exists M,...) but it seems not to work.</p>
<p>thank you for your help</p>



<a name="258830003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830003">(Oct 23 2021 at 15:56)</a>:</h4>
<blockquote>
<p>On the other hand i tryed to define my term between 'begin' and 'end' in order to be able to use rcase (\exists M,...) but it seems not to work.</p>
</blockquote>
<p>can you show your code?</p>



<a name="258830064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830064">(Oct 23 2021 at 15:57)</a>:</h4>
<p>Do you mean <code>obtain ⟨x, hx⟩ := h</code>, where <code>h : ∃ x,...</code>?</p>



<a name="258830150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830150">(Oct 23 2021 at 15:59)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">c_qm</span> <span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">quasi_mph</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">quasi_mph</span><span class="o">):</span> <span class="n">quasi_mph</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">stab_c</span> <span class="n">f</span> <span class="n">g</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">M</span><span class="o">,</span><span class="n">hM</span><span class="o">⟩,</span>

<span class="kd">end</span>
</code></pre></div>
<p>and the interpretor says nduction tactic failed, recursor 'Exists.dcases_on' can only eliminate into Prop</p>



<a name="258830245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830245">(Oct 23 2021 at 16:00)</a>:</h4>
<p>You almost got <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> right <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> Put them on their own line.</p>



<a name="258830290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830290">(Oct 23 2021 at 16:01)</a>:</h4>
<p>That's because you can't get data out of an existential to define data (without the axiom of choice). You can only get data of an existential to prove a proposition.</p>



<a name="258830298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830298">(Oct 23 2021 at 16:01)</a>:</h4>
<p>(Those are backticks: `` Those are not '')</p>



<a name="258830359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830359">(Oct 23 2021 at 16:02)</a>:</h4>
<p>If you're French, the backticks are actually loose accents graves. You can find them on the key for 7.</p>



<a name="258830363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830363">(Oct 23 2021 at 16:02)</a>:</h4>
<p>Ah! You found them.</p>



<a name="258830383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830383">(Oct 23 2021 at 16:03)</a>:</h4>
<p>thank you for the tips</p>
<p>is there a way to cheat, knowing that the value have an expression completly constructive?</p>



<a name="258830385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830385">(Oct 23 2021 at 16:03)</a>:</h4>
<p>The solution here is to either use <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.some">docs#classical.some</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.some_spec">docs#classical.some_spec</a>, or not hiding your data inside an existential in the first place.</p>



<a name="258830428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830428">(Oct 23 2021 at 16:04)</a>:</h4>
<p>Yeah so in your case you want to define a function.</p>



<a name="258830615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258830615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258830615">(Oct 23 2021 at 16:08)</a>:</h4>
<p>ok i will try to find an explicit value, than you</p>



<a name="258869382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869382">(Oct 24 2021 at 09:34)</a>:</h4>
<p>hello, i have a lot of calculation involving involving integer + and -  (like x-y= x- z+ -y+z) to prove to lean and the tacting ring (or ring_nf) seems to have problem with this kind of example, is there another tactic better suited for that job ?</p>
<p>thank you</p>



<a name="258869400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anupam Nayak <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869400">(Oct 24 2021 at 09:35)</a>:</h4>
<p><code>linarith</code></p>



<a name="258869404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anupam Nayak <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869404">(Oct 24 2021 at 09:35)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactic/linarith/frontend.html">https://leanprover-community.github.io/mathlib_docs/tactic/linarith/frontend.html</a></p>



<a name="258869466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869466">(Oct 24 2021 at 09:37)</a>:</h4>
<p>Do you really mean integer here? Do you have an example?</p>



<a name="258869548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869548">(Oct 24 2021 at 09:39)</a>:</h4>
<p><code>ring</code> has no trouble doing <code>example (x y z : ℤ) : x - y = x - z + -y + z := by ring</code> (that would be a huge bug noticed a long time ago)</p>



<a name="258869617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869617">(Oct 24 2021 at 09:41)</a>:</h4>
<p>no it is somme elements that have the type int but they are of the form f ( g(n)+g(m)) for example<br>
i have an example but i am not shure it is realy readable</p>



<a name="258869687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869687">(Oct 24 2021 at 09:42)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="258869695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869695">(Oct 24 2021 at 09:42)</a>:</h4>
<p>We can't help you without a mwe</p>



<a name="258869783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869783">(Oct 24 2021 at 09:45)</a>:</h4>
<p><code>calc |f (g (n + m)) - f (g n + g m)| = |(f((g(n + m)) - f (g (n + m)-(g n+g m))- f (g n + g m))+(f (g (n + m)-g n-g m))|: by {ring,}</code></p>
<p>to better read it it is of the form |x-y|=|x-z-y+z|</p>



<a name="258869850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869850">(Oct 24 2021 at 09:46)</a>:</h4>
<p>This is not a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> -- what is the definition of <code>|</code>? Maybe <code>ring</code> can't see inside it. You could apply <code>congr_fun</code> first maybe? What are the domain and codomain of f, g etc? If you give us code which we can just cut and paste and which works (the point of a mwe) we can help.</p>



<a name="258869927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258869927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258869927">(Oct 24 2021 at 09:49)</a>:</h4>
<p>Otherwise we have to start guessing, and this wastes people's time</p>



<a name="258870074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870074">(Oct 24 2021 at 09:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="c1">-- some guessing</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">→</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ring_nf</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="258870217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870217">(Oct 24 2021 at 09:56)</a>:</h4>
<p>sorry about that, </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">variables</span> <span class="n">f</span><span class="o">:</span><span class="n">ℤ</span><span class="bp">→</span> <span class="n">ℤ</span>
<span class="kd">variables</span> <span class="n">g</span><span class="o">:</span><span class="n">ℤ</span><span class="bp">→</span><span class="n">ℤ</span>


<span class="kd">lemma</span> <span class="n">ineg</span><span class="o">:</span><span class="bp">∀</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|&lt;=</span> <span class="mi">42</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span>
    <span class="k">calc</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">f</span> <span class="o">((</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="o">(</span><span class="n">g</span> <span class="n">n</span><span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">+</span><span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="n">g</span> <span class="n">n</span><span class="bp">-</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">|</span><span class="o">:</span> <span class="kd">by</span> <span class="o">{</span>

      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">}</span>
    <span class="bp">...≤</span> <span class="mi">42</span><span class="o">:</span> <span class="kd">by</span> <span class="gr">sorry</span><span class="o">,</span>

<span class="kd">end</span>
</code></pre></div>



<a name="258870292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870292">(Oct 24 2021 at 09:59)</a>:</h4>
<p>This doesn't solve your question but the correct thing to use here is <a href="https://leanprover-community.github.io/mathlib_docs/find/abs_sub_le">docs#abs_sub_le</a>.</p>



<a name="258870570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870570">(Oct 24 2021 at 10:05)</a>:</h4>
<p>thank you for that</p>



<a name="258870627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870627">(Oct 24 2021 at 10:06)</a>:</h4>
<p>This code is not correct</p>



<a name="258870630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870630">(Oct 24 2021 at 10:06)</a>:</h4>
<p>It has errors having nothing to do with ring</p>



<a name="258870713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870713">(Oct 24 2021 at 10:08)</a>:</h4>
<p>Presumably parentheses are messed up</p>



<a name="258870717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870717">(Oct 24 2021 at 10:08)</a>:</h4>
<p>yes i wrongly ad a ( by making the example it is corected now</p>



<a name="258870781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870781">(Oct 24 2021 at 10:10)</a>:</h4>
<p>I'm pretty sure this is still not what you intended to write</p>



<a name="258870791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870791">(Oct 24 2021 at 10:10)</a>:</h4>
<p>Try additing the <code>generalize</code> lines to your code</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ineg</span><span class="o">:</span><span class="bp">∀</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|&lt;=</span> <span class="mi">42</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span>
    <span class="k">calc</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">f</span> <span class="o">((</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="o">(</span><span class="n">g</span> <span class="n">n</span><span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">+</span><span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="n">g</span> <span class="n">n</span><span class="bp">-</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">|</span><span class="o">:</span> <span class="kd">by</span> <span class="o">{</span>
     <span class="n">generalize</span> <span class="o">:</span> <span class="n">g</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
     <span class="n">generalize</span> <span class="o">:</span> <span class="n">g</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
     <span class="n">generalize</span> <span class="o">:</span> <span class="n">g</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>

      <span class="n">ring_nf</span><span class="o">,</span>
    <span class="o">}</span>
    <span class="bp">...≤</span> <span class="mi">42</span><span class="o">:</span> <span class="kd">by</span> <span class="gr">sorry</span><span class="o">,</span>

<span class="kd">end</span>
</code></pre></div>



<a name="258870977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870977">(Oct 24 2021 at 10:15)</a>:</h4>
<p>yes indeed , i will think again on my example an see if did a mistake by wrinting my code (realy sorry if it is the case)</p>



<a name="258870988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258870988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258870988">(Oct 24 2021 at 10:15)</a>:</h4>
<p>Still, <code>ring</code> can't guess what to do inside function applications. I'm not sure you can do much better than</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ineg</span><span class="o">:</span><span class="bp">∀</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|&lt;=</span> <span class="mi">42</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span>
  <span class="k">calc</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="o">(</span><span class="n">g</span> <span class="n">n</span><span class="bp">+</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">-</span>
                                          <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">m</span><span class="o">)</span><span class="bp">+</span><span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span><span class="bp">-</span><span class="n">g</span> <span class="n">n</span><span class="bp">-</span><span class="n">g</span> <span class="n">m</span><span class="o">))</span><span class="bp">|</span> <span class="o">:</span> <span class="kd">by</span> <span class="o">{</span>
    <span class="n">rw</span> <span class="k">show</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">-</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">z</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">ring</span> <span class="o">},</span>
    <span class="n">congr</span><span class="o">,</span>
    <span class="n">ring</span><span class="o">,</span>
  <span class="o">}</span>
  <span class="bp">...≤</span> <span class="mi">42</span><span class="o">:</span> <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="258871033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258871033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258871033">(Oct 24 2021 at 10:16)</a>:</h4>
<p>Do you know you can use the widgets to inspect the structure of a complicated term and make sure that it associates correctly?</p>



<a name="258871043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258871043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258871043">(Oct 24 2021 at 10:17)</a>:</h4>
<p>Simply make sur the info view is wide (otherwise there are bugs) and put your mouse over subexpressions, paying attention to highlighting</p>



<a name="258871259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/258871259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#258871259">(Oct 24 2021 at 10:23)</a>:</h4>
<p>in fact the problem was that i had an other calculation inside a function and thought it was not a problem so i removed it in the example , and doing that i completly mixed up the '(' and now ring is okay</p>
<p>i will handle the inside as in your example</p>
<p>thank you very much</p>



<a name="260425375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/260425375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#260425375">(Nov 05 2021 at 16:03)</a>:</h4>
<p>hello, I am trying to lift a predicate "is positive" : r-&gt;Prop to a quotient of r but i think that in order to use the constructor like quot.lift i need an equivalence relation on Prop to express the fact that two elements of r that are equivalents are positive at the same time but i don't know what it could be.<br>
but maybe there is a direct construction for this type of lifting, could you give me a solution</p>
<p>thank you for your help</p>



<a name="260425851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/260425851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#260425851">(Nov 05 2021 at 16:06)</a>:</h4>
<p>In order to get a predicate on the quotient you need to know that if <code>x</code> and <code>y</code> are related then the propositions <code>is_positive x</code> and <code>is_positive y</code> are <em>equal</em>--but because of <a href="https://leanprover-community.github.io/mathlib_docs/find/propext">docs#propext</a> that's the same as saying that they are equivalent (related by <code>iff</code>).</p>



<a name="260425992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/260425992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#260425992">(Nov 05 2021 at 16:07)</a>:</h4>
<p>ok thank you very much</p>



<a name="261412386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/261412386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#261412386">(Nov 14 2021 at 11:25)</a>:</h4>
<p>Hello,  i have  a formalisation of a commutavive ring  , (in fact i have fonctions add:R-&gt;R-&gt;R, ....., and proof of the axioms of a comutative ring) and i have some statement to prove that need calculations with the ring structure. Is there a way to handle these calculations with some features of ring ?</p>
<p>thank you for your help</p>



<a name="261412819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/261412819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#261412819">(Nov 14 2021 at 11:36)</a>:</h4>
<p>There are tactics for calculations in rings such as <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#ring">tactic#ring</a> and <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#noncomm_ring">tactic#noncomm_ring</a>, do those help?</p>



<a name="261413116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/261413116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#261413116">(Nov 14 2021 at 11:43)</a>:</h4>
<p>This question is too vague, we can't help you. You should try to provide <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> or a link to a Lean project hosted on GitHub if building a mwe is too complicated.</p>



<a name="261413192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/building%20reals%20with%20quasi-morphisms/near/261413192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> yannis monbru <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/building.20reals.20with.20quasi-morphisms.html#261413192">(Nov 14 2021 at 11:45)</a>:</h4>
<p>yes i found the answer by reading this, i need to say to lean that i have a ring and not  stay with a list of statement.<br>
thank you very much</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>