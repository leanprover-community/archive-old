---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/split.20sum.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html">split sum</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242033190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242033190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242033190">(Jun 09 2021 at 08:42)</a>:</h4>
<p>How can I split the following sum? (I.e. how to prove <code>hh</code>?)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.set.function</span>

<span class="kn">open</span> <span class="n">function</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">lemma</span> <span class="n">test</span>
  <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">σ</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">perm</span><span class="o">:</span> <span class="n">bijective</span> <span class="n">σ</span><span class="o">):</span> <span class="n">tt</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span><span class="n">simp</span><span class="o">,},</span>
  <span class="k">have</span> <span class="n">hh</span><span class="o">:</span>
  <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n.succ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">↑</span><span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">(</span><span class="n">n.succ</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">i</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="bp">=</span><span class="n">x</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">↑</span><span class="o">(</span><span class="n">σ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">),</span> <span class="n">x</span> <span class="bp">↑</span><span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">(</span><span class="n">n.succ</span> <span class="bp">-</span> <span class="bp">↑</span><span class="n">i</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">),</span>
  <span class="o">{</span><span class="gr">sorry</span><span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="242035452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242035452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242035452">(Jun 09 2021 at 09:02)</a>:</h4>
<p>The machinery we have in lean for doing this kind of maths question is all set up for finset.sum over finset.range so if I was faced with that goal I would translate into that language, but if I were faced with that mathematics then I would try and avoid summing over fin n completely</p>



<a name="242035631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242035631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242035631">(Jun 09 2021 at 09:04)</a>:</h4>
<p>If you can express everything in this more idiomatic way then a theorem called something like <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_range_succ">docs#finset.sum_range_succ</a> should do it</p>



<a name="242035936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242035936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242035936">(Jun 09 2021 at 09:07)</a>:</h4>
<p>Your statement must be false, because you've assumed <code>y n = y (σ n)</code> for all <code>σ</code>.</p>



<a name="242036060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242036060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242036060">(Jun 09 2021 at 09:08)</a>:</h4>
<p>Are you missing a second <code>σ</code> somewhere on either the LHS or RHS?</p>



<a name="242036435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242036435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242036435">(Jun 09 2021 at 09:11)</a>:</h4>
<p>I think the lemma you're after is <a href="https://leanprover-community.github.io/mathlib_docs/find/fin.sum_univ_cast_succ">docs#fin.sum_univ_cast_succ</a>, anyway</p>



<a name="242036571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242036571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242036571">(Jun 09 2021 at 09:12)</a>:</h4>
<p>I removed y completely now.</p>



<a name="242036653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242036653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242036653">(Jun 09 2021 at 09:13)</a>:</h4>
<p>aah excellent, I didn't know we had the corresponding lemma for sums over fin. Thanks Eric.</p>



<a name="242036834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242036834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242036834">(Jun 09 2021 at 09:15)</a>:</h4>
<p>In future Alex, can you make a true <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? One easy way to do so is write <code>extract_goal</code> at the sorry that you're actually stuck at, and then use that instead:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span>  <span class="o">:</span>
  <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n.succ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">↑</span><span class="n">i</span> <span class="bp">=</span> <span class="n">x</span> <span class="n">n</span> <span class="bp">+</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">),</span> <span class="n">x</span> <span class="bp">↑</span><span class="n">i</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="242037023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242037023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242037023">(Jun 09 2021 at 09:17)</a>:</h4>
<p>Thanks for your advice!</p>



<a name="242037140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242037140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242037140">(Jun 09 2021 at 09:18)</a>:</h4>
<p>PS <code>tt</code> is a <code>bool</code>, if you want a Prop there's <code>true</code></p>



<a name="242037635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242037635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242037635">(Jun 09 2021 at 09:23)</a>:</h4>
<p>Suppose I want to use the theorem <code>finset.sum_range_succ</code>, but I don't know whether it exits and what its name is. How can I locate it?</p>



<a name="242040079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242040079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242040079">(Jun 09 2021 at 09:47)</a>:</h4>
<p>library_search</p>



<a name="242043831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/split%20sum/near/242043831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/split.20sum.html#242043831">(Jun 09 2021 at 10:25)</a>:</h4>
<p>Or observe that you're trying to simplify the sum over range (succ n) and so start guessing the name and use ctrl-space to help you look for possible helpful theorems</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>