---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Fiddly.20calculations.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html">Fiddly calculations.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216608238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216608238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216608238">(Nov 13 2020 at 13:16)</a>:</h4>
<p>I'm trying to do another kata on uniform continuity. I have got to the point where I can see the end - but I'm tripping up on fiddly calculations. This is my file.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">  Uniform continuity</span>
<span class="cm">  A function f(x) is said to be uniform continuous if it is continuous</span>
<span class="cm">  with the additional condition that the choice of δ depends on ε only</span>
<span class="cm">-/</span>
<span class="kd">def</span> <span class="n">uniform_continuous</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">δ</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">δ</span> <span class="bp">→</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">ε</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">  Lipschitz functions</span>
<span class="cm">  A function f(x) is said to be Lipschitz if there is L s.t.</span>
<span class="cm">  |f(x) - f(y)| ≤ L|x - y| for any x, y.</span>
<span class="cm">-/</span>
<span class="kd">def</span> <span class="n">lipschitz</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">L</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">uniform_continuous_of_lipschitz</span> <span class="o">{</span><span class="n">f</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">lipschitz</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">uniform_continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">ε_pos</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">L</span> <span class="n">hL</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">δ_pos</span> <span class="o">:</span> <span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">div_pos</span> <span class="n">ε_pos</span><span class="o">,</span>
        <span class="k">calc</span>
        <span class="mi">0</span>   <span class="bp">≤</span> <span class="n">abs</span> <span class="n">L</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">abs_nonneg</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>

    <span class="o">},</span>
    <span class="n">use</span> <span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">δ_pos</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">hL</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>I would prefer not to be messing around with specific axioms and was hoping linarith could do this for me, but it doesn't seem to. What's the nicest way to do this?</p>



<a name="216608715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216608715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216608715">(Nov 13 2020 at 13:21)</a>:</h4>
<p>(In a sense the fact that the Lipshitz definition here doesn't explictly require L to be non-negative is part of the issue...)</p>



<a name="216641355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216641355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216641355">(Nov 13 2020 at 17:06)</a>:</h4>
<p><code>linarith</code> doesn't do it because it involves multiplication.</p>



<a name="216642228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216642228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216642228">(Nov 13 2020 at 17:13)</a>:</h4>
<p>What's the maths proof here? </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>    <span class="k">calc</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">hL</span>
    <span class="bp">...</span>                  <span class="bp">&lt;</span> <span class="n">L</span> <span class="bp">*</span> <span class="o">(</span><span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">sorry</span>
    <span class="bp">...</span>                  <span class="bp">=</span> <span class="n">ε</span> <span class="bp">*</span> <span class="o">(</span><span class="n">L</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">field_simp</span><span class="bp">;</span> <span class="n">ring</span>
    <span class="bp">...</span>                  <span class="bp">&lt;</span> <span class="n">ε</span> <span class="o">:</span> <span class="n">sorry</span>
</code></pre></div>
<p>finishes it modulo the two sorries, but to prove the sorries I guess you need that L&gt;0. From <code>hL</code> we see that if L&lt;0 then abs(x-y) is going to have to be 0 meaning x=y and in this case we can solve the goal directly. If L=0 then we can solve the goal using hL, and if L&gt;0 then the calc route above will work.</p>



<a name="216644831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216644831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216644831">(Nov 13 2020 at 17:32)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">uniform_continuous_of_lipschitz</span> <span class="o">{</span><span class="n">f</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">lipschitz</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">uniform_continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">ε_pos</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">L</span> <span class="n">hL</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">δ_pos</span> <span class="o">:</span> <span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">div_pos</span> <span class="n">ε_pos</span><span class="o">,</span>
        <span class="k">calc</span>
        <span class="mi">0</span>   <span class="bp">≤</span> <span class="n">abs</span> <span class="n">L</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">abs_nonneg</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>

    <span class="o">},</span>
    <span class="n">use</span> <span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">δ_pos</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">hL</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">lt_trichotomy</span> <span class="n">L</span> <span class="mi">0</span> <span class="k">with</span> <span class="o">(</span><span class="n">hneg</span> <span class="bp">|</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="n">hpos</span><span class="o">),</span>
    <span class="o">{</span> <span class="c1">-- L &lt; 0</span>
      <span class="k">suffices</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">abs_eq_zero</span><span class="o">,</span> <span class="n">sub_eq_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">convert</span> <span class="n">ε_pos</span><span class="o">,</span>
        <span class="n">simp</span> <span class="o">},</span>
      <span class="n">by_contra</span> <span class="n">non0</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">hxy3</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">abs_nonneg</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">),</span>
      <span class="n">rw</span> <span class="n">le_iff_eq_or_lt</span> <span class="n">at</span> <span class="n">hxy3</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">hxy3</span><span class="o">,</span> <span class="n">exact</span> <span class="n">non0</span> <span class="n">hxy3.symm</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">hnonsense</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">calc</span>
        <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">abs_nonneg</span> <span class="n">_</span>
        <span class="bp">...</span>     <span class="bp">≤</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">hL</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">mul_neg_of_neg_of_pos</span> <span class="n">hneg</span> <span class="n">hxy3</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">lt_irrefl</span> <span class="mi">0</span> <span class="n">hnonsense</span> <span class="o">},</span>
    <span class="o">{</span> <span class="c1">-- L = 0</span>
      <span class="n">rw</span> <span class="n">zero_mul</span> <span class="n">at</span> <span class="n">hL</span><span class="o">,</span>
      <span class="n">linarith</span> <span class="o">},</span>
    <span class="o">{</span> <span class="c1">-- L &gt; 0</span>
      <span class="k">have</span> <span class="n">hL2</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
        <span class="n">rw</span> <span class="o">[</span><span class="n">div_lt_one</span><span class="o">,</span> <span class="n">abs_of_pos</span> <span class="n">hpos</span><span class="o">],</span> <span class="n">linarith</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">add_pos_of_nonneg_of_pos</span> <span class="o">(</span><span class="n">abs_nonneg</span> <span class="n">_</span><span class="o">)</span> <span class="n">zero_lt_one</span><span class="o">,</span>
      <span class="k">calc</span> <span class="n">abs</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">hL</span>
      <span class="bp">...</span>                  <span class="bp">&lt;</span> <span class="n">L</span> <span class="bp">*</span> <span class="o">(</span><span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="n">mul_lt_mul_left</span> <span class="n">hpos</span>
      <span class="bp">...</span>                  <span class="bp">=</span> <span class="n">ε</span> <span class="bp">*</span> <span class="o">(</span><span class="n">L</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">field_simp</span><span class="bp">;</span> <span class="n">ring</span>
      <span class="bp">...</span>                  <span class="bp">&lt;</span> <span class="n">ε</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="n">mul_lt_mul_left</span> <span class="n">ε_pos</span>
      <span class="bp">...</span>                  <span class="bp">=</span> <span class="n">ε</span> <span class="o">:</span> <span class="n">mul_one</span> <span class="n">_</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>Did I miss a trick?</p>



<a name="216659032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216659032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216659032">(Nov 13 2020 at 19:18)</a>:</h4>
<p>This is quite similar to what I did in the end.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">uniform_continuous_of_lipschitz</span> <span class="o">{</span><span class="n">f</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">lipschitz</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">uniform_continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">ε_pos</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">L</span> <span class="n">hL</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">abs_L_plus_1_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="k">calc</span>
        <span class="mi">0</span>   <span class="bp">≤</span> <span class="n">abs</span> <span class="n">L</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">abs_nonneg</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">δ_pos</span> <span class="o">:</span> <span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">div_pos</span> <span class="n">ε_pos</span> <span class="n">abs_L_plus_1_pos</span><span class="o">,</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">δ_pos</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">hL</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">),</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">mul_le_mul_of_nonneg_right</span><span class="o">,</span>
        <span class="k">calc</span>
        <span class="n">L</span>   <span class="bp">≤</span> <span class="n">abs</span> <span class="n">L</span> <span class="o">:</span> <span class="n">le_abs_self</span> <span class="n">L</span>
        <span class="bp">...</span> <span class="bp">≤</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">abs_nonneg</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">),</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">mul_lt_mul_of_pos_left</span><span class="o">,</span>
        <span class="n">assumption</span><span class="o">,</span>
        <span class="n">assumption</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="k">have</span> <span class="n">h3</span> <span class="o">:</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">)</span> <span class="bp">=</span> <span class="n">ε</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">apply</span> <span class="n">mul_div_cancel'</span><span class="o">,</span>
        <span class="n">linarith</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="216659084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216659084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216659084">(Nov 13 2020 at 19:18)</a>:</h4>
<p>As you can see I really don't like calc mode...</p>



<a name="216660022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216660022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216660022">(Nov 13 2020 at 19:26)</a>:</h4>
<p>You can avoid worrying about the sign of L, though.</p>



<a name="216664950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216664950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216664950">(Nov 13 2020 at 19:57)</a>:</h4>
<p><span class="user-mention" data-user-id="330967">@Wrenna Robson</span> you can learn some compression tricks from this version of your proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">uniform_continuous_of_lipschitz</span> <span class="o">{</span><span class="n">f</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">lipschitz</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">uniform_continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">ε_pos</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">L</span> <span class="n">hL</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">abs_L_plus_1_pos</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">abs_nonneg</span> <span class="n">L</span><span class="o">],</span>
    <span class="n">use</span> <span class="o">[</span><span class="n">ε</span><span class="bp">/</span><span class="o">(</span><span class="n">abs</span><span class="o">(</span><span class="n">L</span><span class="o">)</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">div_pos</span> <span class="n">ε_pos</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">abs_nonneg</span> <span class="n">L</span><span class="o">])],</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">mul_le_mul_of_nonneg_right</span> <span class="bp">;</span>
      <span class="n">linarith</span> <span class="o">[</span><span class="n">le_abs_self</span> <span class="n">L</span><span class="o">,</span> <span class="n">abs_nonneg</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)]</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">abs</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">),</span>
      <span class="k">from</span> <span class="n">mul_lt_mul_of_pos_left</span> <span class="o">‹</span><span class="n">_</span><span class="o">›</span> <span class="o">‹</span><span class="n">_</span><span class="o">›,</span>
    <span class="k">have</span> <span class="n">h3</span> <span class="o">:</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">ε</span> <span class="bp">/</span> <span class="o">(</span><span class="n">abs</span> <span class="n">L</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">)</span> <span class="bp">=</span> <span class="n">ε</span><span class="o">,</span>
      <span class="k">from</span> <span class="n">mul_div_cancel'</span> <span class="n">_</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span><span class="o">),</span>
    <span class="n">linarith</span> <span class="o">[</span><span class="n">hL</span> <span class="n">x</span> <span class="n">y</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="216664993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216664993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216664993">(Nov 13 2020 at 19:57)</a>:</h4>
<p>Thank you!</p>



<a name="216665295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216665295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216665295">(Nov 13 2020 at 19:59)</a>:</h4>
<p>Or have a look at <a href="https://leanprover-community.github.io/mathlib_docs/find/lipschitz_with.uniform_continuous">docs#lipschitz_with.uniform_continuous</a></p>



<a name="216665725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216665725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216665725">(Nov 13 2020 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Two things I don't follow there.</p>



<a name="216665743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216665743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216665743">(Nov 13 2020 at 20:02)</a>:</h4>
<p>What does the semicolon do, and what are the ‹_› doing?</p>



<a name="216666265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666265">(Nov 13 2020 at 20:07)</a>:</h4>
<p><code>‹_›</code> is shorthand for <code>by assumption</code></p>



<a name="216666296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666296">(Nov 13 2020 at 20:08)</a>:</h4>
<p>i.e. <code>assumption</code> as a term instead of a tactic</p>



<a name="216666338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666338">(Nov 13 2020 at 20:08)</a>:</h4>
<p>Huh! Alright.</p>



<a name="216666373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666373">(Nov 13 2020 at 20:08)</a>:</h4>
<p><code>tac1; tac2</code> runs <code>tac2</code> on all subgoals produced by <code>tac1</code></p>



<a name="216666399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666399">(Nov 13 2020 at 20:08)</a>:</h4>
<p>Perfect. Thank you.</p>



<a name="216666430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216666430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216666430">(Nov 13 2020 at 20:09)</a>:</h4>
<p>And thank you for your patience. I'm continuing to really enjoy Lean!</p>



<a name="216674541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216674541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216674541">(Nov 13 2020 at 21:20)</a>:</h4>
<p>I do struggle a bit with converting "well, I can just see how I'd do that in words" into the Lean-world: currently bumping at another kata to do with primes which is like that.</p>



<a name="216674571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216674571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216674571">(Nov 13 2020 at 21:21)</a>:</h4>
<p>I can see why all the things I need to be true are true to give me my result.</p>



<a name="216675079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216675079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216675079">(Nov 13 2020 at 21:25)</a>:</h4>
<p>But actually, mmm, showing them in good order in Lean... a trickier task!</p>



<a name="216677348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216677348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216677348">(Nov 13 2020 at 21:43)</a>:</h4>
<p>If I have other questions on different kata, is it better etiquette here to start a new thread or continue this one? (Ironically I sent this twice...)</p>



<a name="216678035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Fiddly%20calculations./near/216678035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Fiddly.20calculations.2E.html#216678035">(Nov 13 2020 at 21:48)</a>:</h4>
<p>I'd say feel free to make new threads.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>