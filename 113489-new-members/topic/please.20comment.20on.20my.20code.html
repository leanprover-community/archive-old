---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/please.20comment.20on.20my.20code.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html">please comment on my code</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197866908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197866908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197866908">(May 17 2020 at 20:15)</a>:</h4>
<p>Hi! I'm a newcomer to Lean, started learning the system yesterday. My thoughts are to contribute some stuff about finite-dimensional convex sets to mathlib.</p>
<p>For starters I decided to prove a simple lemma, and spent the last 2 days chasing sorry's and shortening &amp; simplifying the proofs and the statements...<br>
I'm looking for feedback for my code (attached). Anything from comments on my proof technique, to granularity of the lemmas, to the use of classical logic (didn't manage the first 2 properties without it), to stylistic comments. I want my code to be idiomatic.</p>
<p>Also, I felt that there's a proof tactic missing: similar to "simp", but that also tries to perform "apply" and "exact" steps in addition to "rewrite". Is there such a tactic? If not, would it be hard to make one or computationally heavy to run it?</p>
<p><a href="/user_uploads/3121/57z4nZgHrCn_TyW4KCOFlZvH/convexity.lean">convexity.lean</a></p>



<a name="197866929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197866929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197866929">(May 17 2020 at 20:15)</a>:</h4>
<p>I suggest cut and pasting the code here in a code block in <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="197866973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197866973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197866973">(May 17 2020 at 20:16)</a>:</h4>
<p>Sure!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">convex</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">section</span> <span class="n">general</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">not_forall</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">set</span><span class="bp">.</span><span class="n">not_nonempty_iff_eq_empty</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">set</span><span class="bp">.</span><span class="n">eq_empty_iff_forall_not_mem</span>

<span class="kn">lemma</span> <span class="n">not_bdd_above_over_everything</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">,</span> <span class="n">upper_bounds</span><span class="o">]</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hs</span> <span class="n">x</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">not_bdd_below_under_everything</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_below</span><span class="o">,</span> <span class="n">lower_bounds</span><span class="o">]</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hs</span> <span class="n">x</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">general</span>

<span class="kn">section</span> <span class="n">real_line</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span>

<span class="kn">lemma</span> <span class="n">between_mem_real_convex</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">a_le_x</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x_le_b</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">rewrite</span> <span class="n">convex_real_iff</span> <span class="n">at</span> <span class="n">sc</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">ab_subset_s</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">,</span>
        <span class="k">from</span> <span class="n">sc</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">x_mem_ab</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
        <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="o">,</span> <span class="n">a_le_x</span><span class="o">,</span> <span class="n">x_le_b</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span> <span class="n">x_mem_ab</span> <span class="n">ab_subset_s</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">unbounded_convex_is_real_line</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span>
    <span class="o">(</span><span class="n">sna</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">snb</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">eq_univ_of_forall</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">not_bdd_below_under_everything</span> <span class="n">snb</span> <span class="n">x</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">not_bdd_above_over_everything</span> <span class="n">sna</span> <span class="n">x</span> <span class="k">with</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">a_le_x</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_of_lt</span> <span class="n">ha</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">x_le_b</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_of_lt</span> <span class="n">hb</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">between_mem_real_convex</span> <span class="n">sc</span> <span class="n">ha</span><span class="bp">.</span><span class="n">left</span> <span class="n">hb</span><span class="bp">.</span><span class="n">left</span> <span class="n">a_le_x</span> <span class="n">x_le_b</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">real_line</span>
</code></pre></div>



<a name="197867041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867041">(May 17 2020 at 20:18)</a>:</h4>
<p>I think you can prove the first theorem using</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">not_bdd_above_over_everything</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="err">\</span><span class="n">all</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">,</span> <span class="n">upper_bounds</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hs</span>
</code></pre></div>



<a name="197867058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867058">(May 17 2020 at 20:19)</a>:</h4>
<p>The main thing which stands out to me here is the use of "non-terminal simps" - that means uses of simp which don't close the goal. For instance the first line of  <code>not_bdd_above_over_everything</code>, but not your proof of <code>x_mem_ab</code>. Non-terminal simps are discouraged, mainly because they're usually less robust in mathlib: if someone adds a new simp lemma, non-terminal simp proof often break. You can avoid them by changing it to <code>squeeze_simp</code>, which will tell you a <code>simp only</code> to replace your <code>simp</code> with. Or in some cases you can convert to a simpa, like Mario suggests</p>



<a name="197867127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867127">(May 17 2020 at 20:20)</a>:</h4>
<p>More minor things: instead of <code>have name : type, from proof</code> you can do <code>have name : type := proof</code>. Also I think two spaces are preferred in mathlib</p>



<a name="197867146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867146">(May 17 2020 at 20:21)</a>:</h4>
<p>I really prefer the version using <code>from</code>, it reads much nicer</p>



<a name="197867152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867152">(May 17 2020 at 20:21)</a>:</h4>
<p>The <code>:=</code> looks weird.</p>



<a name="197867155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867155">(May 17 2020 at 20:21)</a>:</h4>
<p>Fair enough, I prefer the <code>:=</code> but I guess this is personal choice</p>



<a name="197867195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867195">(May 17 2020 at 20:22)</a>:</h4>
<p>To me <code>:=</code> really suggests data</p>



<a name="197867218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867218">(May 17 2020 at 20:23)</a>:</h4>
<p>The best way to get a lot of feedback on a piece of Lean code is to PR it to mathlib on GitHub. People can more easily comment on specific lines of your code / make suggestions.</p>



<a name="197867220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867220">(May 17 2020 at 20:23)</a>:</h4>
<p>Nice suggestions! Thanks :)</p>
<p>Where could I have read about <code>simpa</code> (and presumably other tactics)?</p>



<a name="197867225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867225">(May 17 2020 at 20:24)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html">https://leanprover-community.github.io/mathlib_docs/tactics.html</a></p>



<a name="197867290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867290">(May 17 2020 at 20:25)</a>:</h4>
<p>Most steps in the proof of <code>between_mem_real_convex</code> just unfold definitions, so the proof can be condensed to (fixed a typo)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">between_mem_real_convex</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">a_le_x</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x_le_b</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">convex_real_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="n">sc</span> <span class="n">ha</span> <span class="n">hb</span> <span class="bp">⟨</span><span class="n">a_le_x</span><span class="o">,</span> <span class="n">x_le_b</span><span class="bp">⟩</span>
</code></pre></div>



<a name="197867373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867373">(May 17 2020 at 20:27)</a>:</h4>
<p>The <code>have : type := value</code> version also compiles faster and has better type inference</p>



<a name="197867379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867379">(May 17 2020 at 20:27)</a>:</h4>
<p>because <code>have : type, from value</code> is actually two tactics back to back</p>



<a name="197867517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867517">(May 17 2020 at 20:30)</a>:</h4>
<p>This version works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">between_mem_real_convex</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">a_le_x</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x_le_b</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">mem_of_mem_of_subset</span>
  <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">mem_Icc</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">and</span><span class="bp">.</span><span class="n">intro</span> <span class="n">a_le_x</span> <span class="n">x_le_b</span><span class="o">))</span>
  <span class="o">(</span><span class="n">convex_real_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="n">sc</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">)</span>
</code></pre></div>



<a name="197867577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867577">(May 17 2020 at 20:32)</a>:</h4>
<p>Note that both <code>mem_of_mem_of_subset</code> and <code>mem_Icc</code> just unfold definitions. In particular, you can apply <code>h : s \sub t</code> to <code>hx : x \in s</code></p>



<a name="197867578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867578">(May 17 2020 at 20:32)</a>:</h4>
<p>and is more intuitive to me (I can see how the function applications correspond to logic operations).</p>
<p>What do the brackets do? Is it magic? (Your version works too)</p>



<a name="197867588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867588">(May 17 2020 at 20:33)</a>:</h4>
<p>Brackets work as "use the only constructor for the expected type"</p>



<a name="197867644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867644">(May 17 2020 at 20:35)</a>:</h4>
<p>Lovely!</p>



<a name="197867658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867658">(May 17 2020 at 20:35)</a>:</h4>
<p>So it works for <code>and</code>, <code>Exists</code>, <code>prod</code>, <code>sigma</code>, ...</p>



<a name="197867702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867702">(May 17 2020 at 20:36)</a>:</h4>
<p>How did you learn Lean? You seem to have an exotic combination of knownledge</p>



<a name="197867711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867711">(May 17 2020 at 20:36)</a>:</h4>
<p>This anonymous constructor thing is much more basic than some things you seem to understand well</p>



<a name="197867722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867722">(May 17 2020 at 20:37)</a>:</h4>
<p>I'm curious where you learned the <code>rewrite</code> tactic</p>



<a name="197867725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867725">(May 17 2020 at 20:37)</a>:</h4>
<p>mathlib almost exclusively uses <code>rw</code></p>



<a name="197867769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867769">(May 17 2020 at 20:38)</a>:</h4>
<p>Proof assistance was in the back of my mind for a while, I read about Mizar some years ago, and started learning by doing around half of the tutorial (which is very tactic-heavy imo)</p>



<a name="197867774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867774">(May 17 2020 at 20:38)</a>:</h4>
<p>Is your background in maths or computing?</p>



<a name="197867780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867780">(May 17 2020 at 20:39)</a>:</h4>
<p>The tutorials are aimed at mathematicians, who think in a tactic-heavy way</p>



<a name="197867781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867781">(May 17 2020 at 20:39)</a>:</h4>
<p>which tutorial</p>



<a name="197867784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867784">(May 17 2020 at 20:39)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a> is a lot more termy</p>



<a name="197867787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867787">(May 17 2020 at 20:39)</a>:</h4>
<p>He already answered that question by complaining about tactics <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="197867792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867792">(May 17 2020 at 20:39)</a>:</h4>
<p>I have a graduate degree (MA) in math, but I've been working in algorithmics for the last few years</p>



<a name="197867796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867796">(May 17 2020 at 20:39)</a>:</h4>
<p><a href="https://github.com/leanprover-community/tutorials/">https://github.com/leanprover-community/tutorials/</a></p>



<a name="197867852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867852">(May 17 2020 at 20:40)</a>:</h4>
<p>You might like tpil better</p>



<a name="197867867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867867">(May 17 2020 at 20:40)</a>:</h4>
<p>is that this book?</p>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/">https://leanprover.github.io/theorem_proving_in_lean/</a></p>
<p>this really supplemented my knowledge and was a great help, but the syntax seems very out of date</p>



<a name="197867890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867890">(May 17 2020 at 20:41)</a>:</h4>
<p>the strange thing about the tutorial is that it focuses on goal tactics rather than on rewrite tactics, which seem to me to be closer to the usual way proofs are done (with natural language)</p>



<a name="197867892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867892">(May 17 2020 at 20:41)</a>:</h4>
<p>mathlib uses term mode proofs for a lot of simple "apply, cases, exact" proofs</p>



<a name="197867936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867936">(May 17 2020 at 20:42)</a>:</h4>
<p>No, TPIL is not outdated</p>



<a name="197867941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867941">(May 17 2020 at 20:42)</a>:</h4>
<p>Yury's version of <code>between_mem_real_convex</code> is a good example</p>



<a name="197867942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867942">(May 17 2020 at 20:42)</a>:</h4>
<p>About the first two lemmas: it would be nice to have</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">not_bdd_above_iff&#39;</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
 <span class="n">not</span> <span class="o">(</span><span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="bp">&lt;-&gt;</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">not</span> <span class="o">(</span><span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">not_bdd_above_iff</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
 <span class="n">not</span> <span class="o">(</span><span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="bp">&lt;-&gt;</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">]</span>
</code></pre></div>


<p>plus <code>bdd_below</code> versions. These lemmas should go to <code>order/bounds</code>.</p>



<a name="197867948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867948">(May 17 2020 at 20:42)</a>:</h4>
<p>(not tested, possibly I missed some "obvious" assumption)</p>



<a name="197867959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197867959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197867959">(May 17 2020 at 20:43)</a>:</h4>
<p>why nonempty?</p>



<a name="197868050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868050">(May 17 2020 at 20:45)</a>:</h4>
<p>These compile:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">not_bdd_above_iff&#39;</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="o">(</span><span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">not</span> <span class="o">(</span><span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">,</span> <span class="n">upper_bounds</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">not_bdd_above_iff</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="o">(</span><span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bdd_above</span><span class="o">,</span> <span class="n">upper_bounds</span><span class="o">]</span>
</code></pre></div>



<a name="197868102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868102">(May 17 2020 at 20:46)</a>:</h4>
<p>But they still need classical logic... Is it common practice to use  it in mathlib?<br>
(Personally I dont see why it's required here, but can be hard to tell sometimes what's constructive and what isn't)</p>



<a name="197868108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868108">(May 17 2020 at 20:46)</a>:</h4>
<blockquote>
<p>But they still need classical logic... Is it common practice to use it in mathlib?</p>
</blockquote>
<p>yes</p>



<a name="197868129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868129">(May 17 2020 at 20:47)</a>:</h4>
<p>mathlib is a predominantly classical library</p>



<a name="197868136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868136">(May 17 2020 at 20:47)</a>:</h4>
<p>It's not enough to use <code>[decidable_linear_order α]</code> for example</p>



<a name="197868149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868149">(May 17 2020 at 20:48)</a>:</h4>
<p>right, the decidability assumption on this is complicated enough as to be useless in practice</p>



<a name="197868189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868189">(May 17 2020 at 20:48)</a>:</h4>
<p>One of the aims of mathlib is to cover a normal maths undergraduate degree course and this uses so much classical stuff that it's become the default</p>



<a name="197868196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868196">(May 17 2020 at 20:48)</a>:</h4>
<p>Mathlib is trying to be "for the rest of the mathematicians", as opposed to pretty much all the other proof assistants out there which take great pains to be constructive</p>



<a name="197868197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868197">(May 17 2020 at 20:48)</a>:</h4>
<p>if you are avoiding EM then you shouldn't use this lemma</p>



<a name="197868206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868206">(May 17 2020 at 20:48)</a>:</h4>
<blockquote>
<p>pretty much all</p>
</blockquote>
<p>well, Coq and Agda mostly</p>



<a name="197868216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868216">(May 17 2020 at 20:49)</a>:</h4>
<p>I stand hyperbolic</p>



<a name="197868218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868218">(May 17 2020 at 20:49)</a>:</h4>
<p>isabelle, HOL, HOL light are classical</p>



<a name="197868227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868227">(May 17 2020 at 20:49)</a>:</h4>
<p>but most DTT theorem provers are constructive, it is true</p>



<a name="197868378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868378">(May 17 2020 at 20:53)</a>:</h4>
<p>Another question: how can I get type hints in "direct mode"?<br>
For example, I'm writing</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">unbounded_convex_is_real_line&#39;</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">sna</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">snb</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">eq_univ_of_forall</span> <span class="o">(</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span>  <span class="o">)</span>
</code></pre></div>


<p>how do I get (in VS code with the plugin) the type I should create in the lambda?</p>



<a name="197868380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868380">(May 17 2020 at 20:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">unbounded_convex_is_real_line&#39;</span> <span class="o">(</span><span class="n">sc</span> <span class="o">:</span> <span class="n">convex</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">sna</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_above</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">snb</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">bdd_below</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">eq_univ_of_forall</span> <span class="o">(</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">_</span><span class="o">)</span>
</code></pre></div>



<a name="197868388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868388">(May 17 2020 at 20:53)</a>:</h4>
<p>lean 3 uses  a comma after a lambda, not an arrow</p>



<a name="197868427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868427">(May 17 2020 at 20:54)</a>:</h4>
<p>(lean 4 thinks arrows are cool)</p>



<a name="197868433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868433">(May 17 2020 at 20:54)</a>:</h4>
<p>cool, replacing with a comma and adding an underscore works</p>



<a name="197868446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868446">(May 17 2020 at 20:54)</a>:</h4>
<p>you can also use <code>begin end</code> in place of any underscore or place where a term is expected to go to tactic mode locally</p>



<a name="197868518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/please%20comment%20on%20my%20code/near/197868518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Amir Livne Bar-on <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/please.20comment.20on.20my.20code.html#197868518">(May 17 2020 at 20:56)</a>:</h4>
<p>nice :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>