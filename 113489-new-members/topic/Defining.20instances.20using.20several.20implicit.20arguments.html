---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html">Defining instances using several implicit arguments</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="229036871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229036871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229036871">(Mar 05 2021 at 22:43)</a>:</h4>
<p>Another newbie syntax question: why does this not work (the definition of the class does work, but the instance does not, it says <code>failed to synthesize type class instance for...</code>. If I omit the parts <code>[q : ℕ] [char_p F q]</code> (both in the class and the instance), it does work.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">]</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">(</span><span class="mi">3</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">]</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>
</code></pre></div>



<a name="229037264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037264">(Mar 05 2021 at 22:46)</a>:</h4>
<p>What are your imports?</p>



<a name="229037496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037496">(Mar 05 2021 at 22:48)</a>:</h4>
<p>Oh, you need to use <code>(q : \nat)</code></p>



<a name="229037515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037515">(Mar 05 2021 at 22:48)</a>:</h4>
<p>But I can't know for sure without a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a></p>



<a name="229037578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037578">(Mar 05 2021 at 22:49)</a>:</h4>
<p>yes, sorry, I forgot to include the imports.</p>



<a name="229037593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037593">(Mar 05 2021 at 22:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">(</span><span class="mi">3</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span> <span class="n">q</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="229037610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037610">(Mar 05 2021 at 22:49)</a>:</h4>
<p><code>[ .. ]</code> is only used for classes.</p>



<a name="229037709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037709">(Mar 05 2021 at 22:50)</a>:</h4>
<p>OK -- is it possible to leave the q implicit by other means?</p>



<a name="229037725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037725">(Mar 05 2021 at 22:50)</a>:</h4>
<p>yeah, one sec.</p>



<a name="229037731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037731">(Mar 05 2021 at 22:50)</a>:</h4>
<p>Use <code>{}</code> instead</p>



<a name="229037738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037738">(Mar 05 2021 at 22:50)</a>:</h4>
<p><code>{ q : \N }</code> ?</p>



<a name="229037802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037802">(Mar 05 2021 at 22:51)</a>:</h4>
<p>but he wants the field to have characteristic <code>q</code></p>



<a name="229037808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037808">(Mar 05 2021 at 22:51)</a>:</h4>
<p>I would do this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">],</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">(</span><span class="mi">3</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span>  <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="229037946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229037946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229037946">(Mar 05 2021 at 22:52)</a>:</h4>
<p>OK, what is the general rule? If I use { q ... } I cannot refer to it in any later [...] ?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">(</span><span class="mi">3</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">q</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>does not work, with the same error message.</p>



<a name="229038003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038003">(Mar 05 2021 at 22:53)</a>:</h4>
<p>What's the name of the function which returns the characteristic of a ring?</p>



<a name="229038014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038014">(Mar 05 2021 at 22:53)</a>:</h4>
<p>char_ring</p>



<a name="229038041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038041">(Mar 05 2021 at 22:54)</a>:</h4>
<p>I believe</p>



<a name="229038123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038123">(Mar 05 2021 at 22:54)</a>:</h4>
<p>Wait, <code>q</code> doesn't appear at all after the <code>:</code> in your class, right?</p>



<a name="229038129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038129">(Mar 05 2021 at 22:54)</a>:</h4>
<p>Why do you need it at all?</p>



<a name="229038281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038281">(Mar 05 2021 at 22:56)</a>:</h4>
<p>Oh, for the purpose of testing I replaced <code>q^m</code> by <code>3^m</code>. Sorry about this glitch in posting it, but I do need it in the definition of the class.</p>



<a name="229038302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038302">(Mar 05 2021 at 22:56)</a>:</h4>
<p>Oh I see.</p>



<a name="229038326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038326">(Mar 05 2021 at 22:56)</a>:</h4>
<p>So you could do something like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">((</span><span class="n">ring_char</span> <span class="n">F</span><span class="o">)</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="229038395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038395">(Mar 05 2021 at 22:57)</a>:</h4>
<p>Note this works;</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">:</span> <span class="n">char_p</span> <span class="n">F</span> <span class="o">(</span><span class="n">ring_char</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="229038490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038490">(Mar 05 2021 at 22:58)</a>:</h4>
<p>Which means that the typeclass system will automatically know that <code>F</code> has characteristic <code>ring_char F</code> (as it should be!)</p>



<a name="229038752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038752">(Mar 05 2021 at 23:00)</a>:</h4>
<p>OK, I see, thanks. This works in this special case; for the purpose of having a mwe, I also simplified the code in another respect. I have defined a class <code>exp_char F p</code> (which otherwise is identical to char_p, but it is about the exponential characteristic). I guess I could also adapt the definition of <code>ring_char</code> to this situation and produce a function like <code>ring_exp_char</code>. This would allow me to use your solution. But is there no other general smooth way of invoking <code>[some_class some_structure some_natural_number]</code> without this detour (or the detour with the <code>forall q : </code> that you also kindly suggested)?</p>



<a name="229038981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229038981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229038981">(Mar 05 2021 at 23:02)</a>:</h4>
<p>The other option is to make <code>q</code> explicit, meaning that your class says "This is a polynomial which is a contraction of a separable polynomial, but you are only allowed to use it for fields of characteristic <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>".</p>



<a name="229039020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229039020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229039020">(Mar 05 2021 at 23:02)</a>:</h4>
<p>I.e. the class itself will depend on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>.</p>



<a name="229039241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229039241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229039241">(Mar 05 2021 at 23:04)</a>:</h4>
<p>Yes, but it feels (to me newbie!) somehow unnatural: I leave the existence &amp; assumption (concerning the characteristic) on the field implicit, but need to explicitly feed in the natural number.</p>



<a name="229039292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229039292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229039292">(Mar 05 2021 at 23:05)</a>:</h4>
<p>Well, it's a theorem that a field has a unique characteristic :)</p>



<a name="229039688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229039688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229039688">(Mar 05 2021 at 23:08)</a>:</h4>
<p>Yes, sure, I won't argue with you on that! :) , and of course all your solutions do work. Just to understand it also in general, let me ask one last time: is it not possible to have implicit assumptions involving an implicitly present natural number?</p>



<a name="229039823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229039823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229039823">(Mar 05 2021 at 23:09)</a>:</h4>
<p>Oh, it's certainly possible in cases where lean can infer what that natural number must be from context.</p>



<a name="229040203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040203">(Mar 05 2021 at 23:12)</a>:</h4>
<p>The issue is that lean had no way of inferring what <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span> was supposed to be in <code>my_has_separable_contraction</code>, just because you declare <code>[char_p F q</code> as an assumption for <code>my_irreducible_has_separable_contraction</code>. That's the point I was trying to make above -- you can perfectly legally write <br>
<code>{F : Type} [field F] [char_p F 5] [char_p F 3]</code></p>



<a name="229040247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040247">(Mar 05 2021 at 23:12)</a>:</h4>
<p>How would lean know whether the characteristic of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>?</p>



<a name="229040304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040304">(Mar 05 2021 at 23:13)</a>:</h4>
<p>(of course you can prove false with these assumptions, but that's another point altogether.)</p>



<a name="229040450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040450">(Mar 05 2021 at 23:14)</a>:</h4>
<p>OK, I understand your point. In some sense I would like to put <code>[q : \N]</code> both in the class, and also in the instance (prior to the char_p, so that this clause does know about the q). If I understand you correctly,  the (only?) thing that makes this fail is the fact that a number is not a structure, so I guess I would like to find a syntax that overcome this hurdle.</p>



<a name="229040522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040522">(Mar 05 2021 at 23:15)</a>:</h4>
<p>Not quite. It's the fact that a number is not a typeclass. Typeclasses are things like <code>field</code>, <code>ring</code>, etc.</p>



<a name="229040575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040575">(Mar 05 2021 at 23:15)</a>:</h4>
<p>You can very well have a class that's a plain proposition (just like the one you made).</p>



<a name="229040715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040715">(Mar 05 2021 at 23:16)</a>:</h4>
<p>OK, yes. So: can I turn a number into a typeclass (and otherwise keep its nature as is)?</p>



<a name="229040744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040744">(Mar 05 2021 at 23:17)</a>:</h4>
<p>And you can make a class that is just a number, like this: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="n">foo.n</span>
</code></pre></div>



<a name="229040927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229040927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229040927">(Mar 05 2021 at 23:18)</a>:</h4>
<p>This is a bit silly, but you can do this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.char_p</span>

<span class="kd">class</span> <span class="n">foo</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">bar</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">char_p</span> <span class="n">F</span> <span class="n">foo.n</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="o">[</span><span class="n">bar</span> <span class="n">F</span><span class="o">]</span> <span class="o">:</span> <span class="n">char_p</span> <span class="n">F</span> <span class="n">foo.n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="229041281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229041281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229041281">(Mar 05 2021 at 23:21)</a>:</h4>
<p>OK, I see. Thank you very much for your advice -- I appreciate it! Just to record it for later readers: this solution would read like so:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.polynomial.basic</span>
<span class="kn">import</span> <span class="n">algebra.char_p</span>
<span class="kn">import</span> <span class="n">field_theory.separable</span>

<span class="kd">class</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">my_has_separable_contraction</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">foo.n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">has_separable_contraction'</span> <span class="o">[]</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">g.separable</span> <span class="bp">∧</span> <span class="n">polynomial.expand</span> <span class="n">F</span> <span class="o">(</span><span class="n">foo.n</span><span class="bp">^</span><span class="n">m</span><span class="o">)</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">f</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">my_irreducible_has_separable_contraction</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">foo.n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">irred</span> <span class="o">:</span> <span class="n">irreducible</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">fn</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">):</span>
  <span class="n">my_has_separable_contraction</span> <span class="n">F</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="229049113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20instances%20using%20several%20implicit%20arguments/near/229049113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20instances.20using.20several.20implicit.20arguments.html#229049113">(Mar 06 2021 at 00:49)</a>:</h4>
<p>Maybe it's worth mentioning that such a hack should not be done in practice.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>