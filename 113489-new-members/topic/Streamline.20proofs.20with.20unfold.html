---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html">Streamline proofs with unfold</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206945710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206945710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206945710">(Aug 14 2020 at 16:04)</a>:</h4>
<p>I have a proof that just unfolds some definitions in a hypothesis and the goal, and then concludes with <code>rw H, refl</code>. Is there some automation that lets me get rid of those unfolds? For some reason, <code>simp at H</code> reduces <code>H</code> to <code>true</code>, which isn't helpful, and <code>simp</code> at the goal fails.</p>



<a name="206945976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206945976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206945976">(Aug 14 2020 at 16:06)</a>:</h4>
<p>Maybe <code>simp [H]</code> or <code>simp * at *</code> works but without seeing the details it's difficult to guess. If the rewrite is not too serious you might be able to do it in term mode. <code>simp [first_thing_you_unfold, second_thing_you_unfold, H] at *</code>?</p>



<a name="206947301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206947301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206947301">(Aug 14 2020 at 16:18)</a>:</h4>
<p>Passing a list to <code>simp</code> makes it a little easier to read, I only tried that with <code>unfold</code> before. What annoys me in particular is that I need <code>simp [has_mem.mem, set.mem]</code> to reduce <code>x ∈ λ y, t</code> to <code>t[y/x]</code> which I would have expected <code>simp</code> to do.</p>



<a name="206947664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206947664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206947664">(Aug 14 2020 at 16:21)</a>:</h4>
<p>I'm pretty sure you shouldn't have to do <code>simp [has_mem.mem, set.mem]</code> ever but I am not an expert simper.</p>



<a name="206947692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206947692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206947692">(Aug 14 2020 at 16:21)</a>:</h4>
<p>But it's very hard to diagnose (for me, at least) unless you post fully working code.</p>



<a name="206949255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206949255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206949255">(Aug 14 2020 at 16:36)</a>:</h4>
<p>I'm trying to make a self contained example, but when I replace my isomorphism with a general isomorphism, <code>simp</code> suddenly recognizes it and solves the goal right away, probably because it knows about <code>add_equiv.map_zero</code></p>



<a name="206949474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206949474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206949474">(Aug 14 2020 at 16:38)</a>:</h4>
<p>I remember Coq had a tactic to generalize a term to an arbitrary element of its type, is there such a thing for lean?</p>



<a name="206949537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206949537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206949537">(Aug 14 2020 at 16:39)</a>:</h4>
<p><code>generalize</code> :)</p>



<a name="206950154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206950154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206950154">(Aug 14 2020 at 16:44)</a>:</h4>
<p>Hm, sadly that didn't help in this case...</p>



<a name="206950629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Streamline%20proofs%20with%20unfold/near/206950629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Streamline.20proofs.20with.20unfold.html#206950629">(Aug 14 2020 at 16:48)</a>:</h4>
<p>There's probably some more subtle issue blocking <code>simp</code> from applying the lemma, like instance arguments not agreeing or something</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>