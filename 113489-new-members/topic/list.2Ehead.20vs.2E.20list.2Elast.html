---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html">list.head vs. list.last</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272679232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272679232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272679232">(Feb 21 2022 at 12:04)</a>:</h4>
<p>The <code>list.head</code> function requires <code>[inhabited α]</code>, but <code>list.last</code> requires <code>l ≠ list.nil</code>.  I understand that both are useful in different settings, and indeed there is <code>list.ilast</code> for the variant with <code>[inhabited α]</code>.<br>
For what I am doing right now I am missing the not-nil-variant of <code>head</code>, though. Is there a reason why it isn’t there?</p>



<a name="272679716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272679716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272679716">(Feb 21 2022 at 12:09)</a>:</h4>
<p>Is it <a href="https://leanprover-community.github.io/mathlib_docs/find/list.head'">docs#list.head'</a>?</p>



<a name="272679886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272679886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272679886">(Feb 21 2022 at 12:11)</a>:</h4>
<p>this naming is a disaster</p>



<a name="272680469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272680469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272680469">(Feb 21 2022 at 12:16)</a>:</h4>
<p>I don't think I have ever used the <code>l != []</code> functions on list. I see a use for <code>list.head</code> and <code>list.head'</code> style functions</p>



<a name="272680511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272680511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272680511">(Feb 21 2022 at 12:16)</a>:</h4>
<p>what is your application?</p>



<a name="272680602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272680602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272680602">(Feb 21 2022 at 12:17)</a>:</h4>
<p>The naming is definitely a disaster. I would use <code>list.ihead</code> and <code>list.head</code> for those two</p>



<a name="272680661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272680661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272680661">(Feb 21 2022 at 12:18)</a>:</h4>
<p>to match <a href="https://leanprover-community.github.io/mathlib_docs/find/list.nth">docs#list.nth</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/list.inth">docs#list.inth</a></p>



<a name="272684770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272684770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272684770">(Feb 21 2022 at 12:59)</a>:</h4>
<p>My application is dealing with reduced non-empty word in free products, where I have to do a lot of peeking at the head and tail.</p>



<a name="272684912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272684912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272684912">(Feb 21 2022 at 13:00)</a>:</h4>
<p>But it turns what I really want is a higher level API (that uses the list internally), and then it begins to matters less how the list api looks like</p>



<a name="272685839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272685839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Taucher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272685839">(Feb 21 2022 at 13:08)</a>:</h4>
<p>Does this have something to do with parsing?</p>



<a name="272687584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272687584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272687584">(Feb 21 2022 at 13:25)</a>:</h4>
<p>No, I wouldn’t say so.</p>



<a name="272692290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272692290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272692290">(Feb 21 2022 at 14:05)</a>:</h4>
<p>Maybe it's time for an explicit nonempty list as a promoted subtype and associated API?</p>



<a name="272776343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272776343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272776343">(Feb 22 2022 at 09:08)</a>:</h4>
<p>Maybe, although with head and last you might also encounter them with mixed lists, e.g. appending a non-empty to a general list.</p>



<a name="272776545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272776545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272776545">(Feb 22 2022 at 09:10)</a>:</h4>
<p>I refactored my current proof back and forth between tail and itail, and at least for me, tail works much better, so I added the equivalent head variant (with the not-nil assumption) to my file for now.</p>
<p>So I wonder if I should add it to the base library? If so, as <code>head</code>, renaming the existing function to <code>ihead</code>? Or some other naming convention that keeps <code>head</code> as it is and renames <code>tail</code>?</p>



<a name="272780462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272780462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272780462">(Feb 22 2022 at 09:50)</a>:</h4>
<p>Hmm, and the very next proof gets ugly (because <code>cases</code> doesn't work well on expressions that appear in such indices? Lack of dependent rewriting). Surprisingly tricky, all that.</p>



<a name="272782250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272782250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272782250">(Feb 22 2022 at 10:06)</a>:</h4>
<p>Try <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.interactive.cases'">docs#tactic.interactive.cases'</a>; it should generate equations for 'complex' indices.</p>



<a name="272789006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272789006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272789006">(Feb 22 2022 at 11:16)</a>:</h4>
<p>Ah, interesting! I’ll try it next time</p>



<a name="272790169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272790169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272790169">(Feb 22 2022 at 11:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="470149">Joachim Breitner</span> <a href="#narrow/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast/near/272780462">said</a>:</p>
<blockquote>
<p>Hmm, and the very next proof gets ugly (because <code>cases</code> doesn't work well on expressions that appear in such indices? Lack of dependent rewriting). Surprisingly tricky, all that.</p>
</blockquote>
<p>Yes, this is why I'm not so enthusiastic to add these functions, I don't think they actually work all that well. I would use the name <code>list.head</code> for the option-returning one, and you can have an API to use <code>option.get</code> on it but most likely you just want to actually pattern match to get the name out</p>



<a name="272799636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272799636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272799636">(Feb 22 2022 at 13:08)</a>:</h4>
<p>Or maybe a subtype-based API might be useful after all</p>



<a name="272801968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272801968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272801968">(Feb 22 2022 at 13:29)</a>:</h4>
<p>You say “just pattern match”, but that doesn't work easily for <code>last'</code>…</p>
<p>Anyways, I'm tempted to side step that issue in my proof completely and use a different data structure. Probably better anyways.</p>



<a name="272802947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272802947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272802947">(Feb 22 2022 at 13:36)</a>:</h4>
<p>you can pattern match on an option-returning <code>last</code></p>



<a name="272803554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/list.head%20vs.%20list.last/near/272803554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/list.2Ehead.20vs.2E.20list.2Elast.html#272803554">(Feb 22 2022 at 13:41)</a>:</h4>
<p>Pattern matching on a complex expression (e.g. <code>l.last'</code>) is often tedious, I find, as it tends to lose the connection to other facts about the things in the expression (e.g. <code>l ≠ nil</code>)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>