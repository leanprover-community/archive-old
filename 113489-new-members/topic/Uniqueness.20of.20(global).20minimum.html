---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html">Uniqueness of (global) minimum</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282117689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282117689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282117689">(May 12 2022 at 14:52)</a>:</h4>
<p>Hello, I would like to prove the following (written as <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">topology.local_extr</span>
<span class="kn">import</span> <span class="n">topology.instances.matrix</span>

<span class="kd">def</span> <span class="n">is_ols_coefficient</span>
  <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">u</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">:</span> <span class="kt">Prop</span>
<span class="o">:=</span> <span class="n">is_local_min</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">β</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="n">n</span> <span class="n">p₁</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X₁tilde</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β₁tilde</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β₁caron</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>

  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">is_ols_coefficient</span> <span class="n">Y</span> <span class="n">X₁tilde</span> <span class="n">β₁tilde</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">is_ols_coefficient</span> <span class="n">Y</span> <span class="n">X₁tilde</span> <span class="n">β₁caron</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">h₁</span> <span class="n">h₂</span>
<span class="kd">theorem</span> <span class="n">t1</span> <span class="o">:</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>In words: <code>β₁tilde</code> and <code>β₁caron</code> are both local minima of the function above, and I would like to show they are the same local minimum, as the function is convex.</p>
<p>How would I go about proving <code>t1</code>? I've tried <code>is_min_on.of_is_local_min_of_convex_univ</code> from <code>analysis.convex.extrema</code>, but matrices don't seem to be instances of <code>topological_add_group</code>, although Pi types are (wouldn't that imply matrices are too?). I would also have to show convexity with this theorem, which I'm also kind of stuck on...</p>
<p>The context for all this is some work on theorems related to linear regression and ordinary least squares (Is there prior work on these topics? I was not able to find relevant discussions on Zulip).</p>
<p>Besides the above question, is this canonical Lean? Are hypotheses supposed to go into a <code>variables</code> section?</p>
<p>Thanks in advance!</p>



<a name="282124788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282124788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282124788">(May 12 2022 at 15:37)</a>:</h4>
<p>I'm guessing I could do something with positive semi-definiteness to prove convexity here?</p>



<a name="282125852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282125852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282125852">(May 12 2022 at 15:45)</a>:</h4>
<p>Are you following a reference?</p>



<a name="282126623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282126623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282126623">(May 12 2022 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Well, not quite, they are very superficial lecture notes from a coworker that don't go into detail. This proof is pretty much only implied in a paragraph... Maybe I misunderstood your question?</p>



<a name="282127121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282127121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282127121">(May 12 2022 at 15:53)</a>:</h4>
<p>Nono, that's what I meant. What function exactly are you trying to prove the convexity of?</p>



<a name="282127180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282127180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282127180">(May 12 2022 at 15:53)</a>:</h4>
<p>I assume you know about <a href="https://leanprover-community.github.io/mathlib_docs/find/convex_on">docs#convex_on</a>, already?</p>



<a name="282155760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282155760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282155760">(May 12 2022 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282127121">said</a>:</p>
<blockquote>
<p>Nono, that's what I meant. What function exactly are you trying to prove the convexity of?</p>
</blockquote>
<p>Ah I see, if I were to somehow get <a href="https://leanprover-community.github.io/mathlib_docs/find/is_min_on.of_is_local_min_of_convex_univ">docs#is_min_on.of_is_local_min_of_convex_univ</a> to work, I would have to proof the convexity of <code>(λ (β : matrix (fin v) unit ℝ), ((Y - X ⬝ β)ᵀ ⬝ (Y - X ⬝ β)) () ())</code>, where <code>Y</code> and <code>X</code> are the matrices given in <code>is_ols_coefficient</code>. </p>
<p>But I'm still stuck at the earlier step, since it's still telling me that </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">35</span><span class="o">:</span><span class="mi">13</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="bp">...</span>
<span class="bp">⊢</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
</code></pre></div>
<p>If I have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">include</span> <span class="n">h₁</span> <span class="n">h₂</span>
<span class="kd">theorem</span> <span class="n">t1</span> <span class="o">:</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">is_ols_coefficient</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">is_ols_coefficient</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">is_min_on.of_is_local_min_of_convex_univ</span> <span class="n">h₁</span>
<span class="kd">end</span>
</code></pre></div>



<a name="282155918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282155918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282155918">(May 12 2022 at 19:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282127180">said</a>:</p>
<blockquote>
<p>I assume you know about <a href="https://leanprover-community.github.io/mathlib_docs/find/convex_on">docs#convex_on</a>, already?</p>
</blockquote>
<p>Yes, this is mentioned in one of the hypotheses for <a href="https://leanprover-community.github.io/mathlib_docs/find/is_min_on.of_is_local_min_of_convex_univ">docs#is_min_on.of_is_local_min_of_convex_univ</a>, so I'm trying to get exactly that</p>



<a name="282156436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282156436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282156436">(May 12 2022 at 19:07)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.topological_ring">docs#matrix.topological_ring</a>. Does your file import <a href="https://tqft.net/mathlib/topology/instances/matrix">file#topology/instances/matrix</a> ?</p>



<a name="282163281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282163281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282163281">(May 12 2022 at 20:03)</a>:</h4>
<p>Yes I'm importing it in the <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>. Could I somehow project out the additive topological group from the topological ring to get a <code>topological_add_group</code> instance?</p>



<a name="282163696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282163696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282163696">(May 12 2022 at 20:05)</a>:</h4>
<p>Ah, I just found <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_ring.to_topological_add_group">docs#topological_ring.to_topological_add_group</a>, that might be it</p>



<a name="282163817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282163817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282163817">(May 12 2022 at 20:06)</a>:</h4>
<p>Typeclass instance search should be filling in that sort of gap for you in most cases though</p>



<a name="282163981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282163981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282163981">(May 12 2022 at 20:07)</a>:</h4>
<p>I just tried your code and it doesn't compile for me; I have complaints about <code>X ⬝ β</code>, Lean doesn't know what the dot is. Edit: aah, <code>open_locale matrix</code> fixes it</p>



<a name="282163990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282163990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282163990">(May 12 2022 at 20:07)</a>:</h4>
<p>In your case the indexing type for the rows is not the same as for the columns so it won't be a ring it seems</p>



<a name="282165349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282165349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282165349">(May 12 2022 at 20:16)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">letI</span> <span class="o">:</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta</span> <span class="n">matrix</span><span class="bp">;</span> <span class="n">apply_instance</span><span class="o">,</span>
</code></pre></div>
<p>(as the first line of the proof) is a hacky way to get that topological additive group, but it doesn't solve your problems because Lean now complains it doesn't know that the action of R on matrices is continuous.</p>



<a name="282165413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282165413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282165413">(May 12 2022 at 20:17)</a>:</h4>
<p>But I'm wondering whether really we're missing imports here or something?</p>



<a name="282166776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282166776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282166776">(May 12 2022 at 20:26)</a>:</h4>
<p>We're missing imports. With <code>import all</code> the below works without the weird instance at the top.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">topology.local_extr</span>
<span class="kn">import</span> <span class="n">topology.instances.matrix</span>
<span class="kn">import</span> <span class="n">analysis.convex.extrema</span>
<span class="kn">import</span> <span class="n">topology.algebra.mul_action</span>
<span class="kn">import</span> <span class="n">topology.instances.real</span>
<span class="c1">--import all</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_continuous_smul</span> <span class="n">ℝ</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="n">infer_instance</span> <span class="c1">-- with `import all` I don't need this</span>

<span class="n">open_locale</span> <span class="n">matrix</span>

<span class="kd">def</span> <span class="n">is_ols_coefficient</span>
  <span class="o">{</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">u</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">:</span> <span class="kt">Prop</span>
<span class="o">:=</span> <span class="n">is_local_min</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">v</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">β</span>

<span class="kd">variables</span>
  <span class="o">{</span><span class="n">n</span> <span class="n">p₁</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X₁tilde</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β₁tilde</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">β₁caron</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>

  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">is_ols_coefficient</span> <span class="n">Y</span> <span class="n">X₁tilde</span> <span class="n">β₁tilde</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">is_ols_coefficient</span> <span class="n">Y</span> <span class="n">X₁tilde</span> <span class="n">β₁caron</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">h₁</span> <span class="n">h₂</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta</span> <span class="n">matrix</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">theorem</span> <span class="n">t1</span> <span class="o">:</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">letI</span> <span class="o">:</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta</span> <span class="n">matrix</span><span class="bp">;</span> <span class="n">apply_instance</span><span class="o">,</span>
  <span class="n">haveI</span> <span class="o">:</span> <span class="n">has_continuous_smul</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta</span> <span class="n">matrix</span><span class="bp">;</span> <span class="n">apply_instance</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">is_min_on.of_is_local_min_of_convex_univ</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="282166869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282166869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282166869">(May 12 2022 at 20:27)</a>:</h4>
<p>To make <code>import all</code> work, run <code>./scripts/mk_all.sh</code> in the mathlib root directory (or wait for someone else to come along and tell us what the right import is to make it work). I also suspect I'm doing it wrong and these instances should just work; I don't know much about real matrices in Lean.</p>



<a name="282167367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282167367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282167367">(May 12 2022 at 20:30)</a>:</h4>
<p>I added all these instances quite recently, I'm a bit surprised you're seeing this weirdness</p>



<a name="282167476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282167476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282167476">(May 12 2022 at 20:31)</a>:</h4>
<p>Do we not have <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.topological_add_group">docs#matrix.topological_add_group</a>?</p>



<a name="282167526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282167526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282167526">(May 12 2022 at 20:31)</a>:</h4>
<p>I guess I assumed it would unfold <code>matrix</code> for me, but that was silly</p>



<a name="282167593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282167593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282167593">(May 12 2022 at 20:32)</a>:</h4>
<p>We should add it next to <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.has_continuous_add">docs#matrix.has_continuous_add</a></p>



<a name="282167651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282167651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282167651">(May 12 2022 at 20:32)</a>:</h4>
<p>... which we should also add, next to <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.has_continuous_smul">docs#matrix.has_continuous_smul</a></p>



<a name="282172648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282172648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282172648">(May 12 2022 at 21:15)</a>:</h4>
<p><code>import topology.metric_space.algebra</code> was the import I was missing -- needed for <code>has_bounded_smul.has_continuous_smul</code>.</p>



<a name="282173217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282173217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282173217">(May 12 2022 at 21:21)</a>:</h4>
<p>It's not obvious to me why you need that instance</p>



<a name="282173357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282173357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282173357">(May 12 2022 at 21:22)</a>:</h4>
<p>I would expect it to be found via <a href="https://leanprover-community.github.io/mathlib_docs/find/has_continuous_mul.to_has_continuous_smul">docs#has_continuous_mul.to_has_continuous_smul</a></p>



<a name="282173395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282173395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282173395">(May 12 2022 at 21:23)</a>:</h4>
<p>Oh come on, do we really have none of these?</p>



<a name="282173447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282173447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282173447">(May 12 2022 at 21:24)</a>:</h4>
<p>Phew, just a bad name<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/has_continuous_mul.has_continuous_smul">docs#has_continuous_mul.has_continuous_smul</a></p>



<a name="282179918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282179918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282179918">(May 12 2022 at 22:29)</a>:</h4>
<p>I posted the code above with the <code>import all</code> commented out and the instance just below; comment out the instance and the code stops compiling; add the import I suggest and it works again. Type class inference wanted a surprising instance of the form <code>fin p1 -&gt; continuous_smul R R</code> or some such thing</p>



<a name="282605773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282605773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282605773">(May 17 2022 at 08:13)</a>:</h4>
<p>Thanks for your responses! Sorry for the delayed response on my part.</p>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282163981">said</a>:</p>
<blockquote>
<p>I just tried your code and it doesn't compile for me; I have complaints about <code>X ⬝ β</code>, Lean doesn't know what the dot is. Edit: aah, <code>open_locale matrix</code> fixes it</p>
</blockquote>
<p>Yes, sorry, I sometimes have to redefine operators since for some reason some Unicode characters don't work on my Emacs. So for my MWEs, I remove the redefinitions again, but I forgot that people that don't have this problem have to open that module <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> </p>
<p>And thanks a bunch for your code! So the instances are done by unfolding the <code>matrix</code> into the definition with <code>delta</code> and then the <code>apply_instance</code> tactic finds such an instance in the current scope? (Is this what you meant <span class="user-mention" data-user-id="127136">@Alex J. Best</span>? )</p>



<a name="282605890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282605890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282605890">(May 17 2022 at 08:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282173447">said</a>:</p>
<blockquote>
<p>Phew, just a bad name<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/has_continuous_mul.has_continuous_smul">docs#has_continuous_mul.has_continuous_smul</a></p>
</blockquote>
<p>Can I use this somehow to not have to write out</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_continuous_smul</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">delta</span> <span class="n">matrix</span><span class="bp">;</span> <span class="n">apply_instance</span>
</code></pre></div>
<p>? </p>
<p>I imported <code>topology.algebra.monoid</code>(and omitted the "manual" instance), but it's still telling me </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">42</span><span class="o">:</span><span class="mi">13</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="bp">...</span>
<span class="bp">⊢</span> <span class="n">has_continuous_smul</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">)</span>
</code></pre></div>



<a name="282625427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282625427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282625427">(May 17 2022 at 11:31)</a>:</h4>
<p>Now I have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">t1</span> <span class="o">:</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">is_ols_coefficient</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">is_ols_coefficient</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">is_min_on.of_is_local_min_of_convex_univ</span> <span class="n">h₁</span> <span class="n">_</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">is_min_on.of_is_local_min_of_convex_univ</span> <span class="n">h₂</span> <span class="n">_</span><span class="o">,</span>
 <span class="c1">-- Uncomment to beta-reduce</span>
  <span class="c1">-- dsimp only [] at a,</span>
  <span class="c1">-- dsimp only [] at b,</span>
<span class="kd">end</span>
</code></pre></div>
<p>With the state </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">n</span> <span class="n">p₁</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span>
<span class="n">Y</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">X₁tilde</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">β₁tilde</span> <span class="n">β₁caron</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span>
  <span class="n">is_local_min</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span>
    <span class="n">β₁tilde</span><span class="o">,</span>
<span class="n">h₂</span> <span class="o">:</span>
  <span class="n">is_local_min</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span>
    <span class="n">β₁caron</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">β₁tilde</span> <span class="bp">≤</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">x</span><span class="o">,</span>
<span class="n">b</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">β₁caron</span> <span class="bp">≤</span>
      <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">p₁</span><span class="o">)</span> <span class="n">unit</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">((</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">)</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">Y</span> <span class="bp">-</span> <span class="n">X₁tilde</span> <span class="bp">⬝</span> <span class="n">β</span><span class="o">))</span> <span class="o">()</span> <span class="o">())</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span>
</code></pre></div>
<p>So I pretty much want to prove (in pseudo-Lean) </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">β₁tilde</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">β₁caron</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="n">β₁tilde</span> <span class="bp">=</span> <span class="n">β₁caron</span>
</code></pre></div>
<p>How would I go about proving this now? I've found <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_of_forall_ge_iff">docs#eq_of_forall_ge_iff</a>, but that's not quite it...</p>



<a name="282627778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282627778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282627778">(May 17 2022 at 11:52)</a>:</h4>
<p>Is <code>f</code> injective?</p>



<a name="282627834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282627834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282627834">(May 17 2022 at 11:53)</a>:</h4>
<p>Your assumptions can easily prove <code>f β₁tilde = f β₁caron</code>.</p>



<a name="282628794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282628794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282628794">(May 17 2022 at 12:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282627778">said</a>:</p>
<blockquote>
<p>Is <code>f</code> injective?</p>
</blockquote>
<p>Hmmm, I'm not sure about this.</p>
<blockquote>
<p>Your assumptions can easily prove <code>f β₁tilde = f β₁caron</code>.</p>
</blockquote>
<p>How would I do that? And assuming it is injective, would I proceed with something like <a href="https://leanprover-community.github.io/mathlib_docs/find/set.inj_on.eq_iff">docs#set.inj_on.eq_iff</a>?</p>



<a name="282629193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282629193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282629193">(May 17 2022 at 12:04)</a>:</h4>
<p><code>f β₁tilde ≤ f β₁caron</code> and <code>f β₁caron ≤ f β₁tilde</code> by your assumptions.</p>



<a name="282629269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282629269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282629269">(May 17 2022 at 12:04)</a>:</h4>
<p>If <code>hf : injective f</code> and <code>h : f β₁tilde = f β₁caron</code>, then <code>hf h : β₁tilde = β₁caron</code>.</p>



<a name="282629374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282629374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282629374">(May 17 2022 at 12:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282629193">said</a>:</p>
<blockquote>
<p><code>f β₁tilde ≤ f β₁caron</code> and <code>f β₁caron≤ f β₁tilde</code> by your assumptions.</p>
</blockquote>
<p>Oh yea, I was tunnel-visioning pretty hard... <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="282629527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282629527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282629527">(May 17 2022 at 12:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282156436">said</a>:</p>
<blockquote>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.topological_ring">docs#matrix.topological_ring</a>. Does your file import <a href="https://tqft.net/mathlib/topology/instances/matrix">file#topology/instances/matrix</a> ?</p>
</blockquote>
<p><span class="user-mention" data-user-id="460930">@Aron Erben</span> I was observing that as you have different types for the rows and columns the matrices arent square and so won't form a ring, and the above quoted instance didn't seem to apply in your setting, something more specifically only additive is needed.</p>



<a name="282630000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282630000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282630000">(May 17 2022 at 12:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282629527">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="460930">Aron Erben</span> I was observing that as you have different types for the rows and columns the matrices arent square and so won't form a ring, and the above quoted instance didn't seem to apply in your setting, something more specifically only additive is needed.</p>
</blockquote>
<p>I was more referring to <br>
<span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282163817">said</a>:</p>
<blockquote>
<p>Typeclass instance search should be filling in that sort of gap for you in most cases though</p>
</blockquote>
<p>Specifically if <code>Typeclass instance search</code> meant the <code>apply_instance</code> tactic.</p>



<a name="282630830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282630830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282630830">(May 17 2022 at 12:19)</a>:</h4>
<p>Oh sorry, right, apply instance is explicitly invoking typeclass search, but if you rewrite with or apply lemmas which have typeclass arguments, e.g. <code>[monoid G]</code>  then typeclass search is also run to get an instance of <code>monoid G</code> from <code>ring G</code> or whatever you have in context that "implies" the thing being searched for</p>



<a name="282630945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282630945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282630945">(May 17 2022 at 12:20)</a>:</h4>
<p>So <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_ring.to_topological_add_group">docs#topological_ring.to_topological_add_group</a> isn't something that you as a user should have to look up and invoke specifically by name</p>



<a name="282631029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282631029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282631029">(May 17 2022 at 12:21)</a>:</h4>
<p>Of course if the instance is missing then you can be a bit stuck, as typeclass search won't find it, so it is good to check things exist if Lean isn't filling in step we would expect it to.</p>



<a name="282631113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282631113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282631113">(May 17 2022 at 12:21)</a>:</h4>
<p>Ah I see, and in my case this didn't work because <code>matrix a b c</code> had to be unfolded into <code>a -&gt; b -&gt; c</code> before the lookup could happen (in this case explicitly with the <code>apply_instance</code> tactic)?</p>



<a name="282631448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282631448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282631448">(May 17 2022 at 12:24)</a>:</h4>
<p>(As there is a <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.topological_add_group">docs#pi.topological_add_group</a>)</p>



<a name="282633431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282633431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282633431">(May 17 2022 at 12:42)</a>:</h4>
<p>Yes exactly. But we should add these instances to mathlib for matrix, as Eric said, so future people don't have to unfold matrix to do stuff. Do you want to make a PR adding those instances?</p>



<a name="282635049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282635049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282635049">(May 17 2022 at 12:54)</a>:</h4>
<p>Cool, I get it now, thanks :) I'll gladly try my hand at adding them to mathlib!</p>



<a name="282641069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Uniqueness%20of%20%28global%29%20minimum/near/282641069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aron Erben <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Uniqueness.20of.20(global).20minimum.html#282641069">(May 17 2022 at 13:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113489-new-members/topic/Uniqueness.20of.20.28global.29.20minimum/near/282629269">said</a>:</p>
<blockquote>
<p>If <code>hf : injective f</code> and <code>h : f β₁tilde = f β₁caron</code>, then <code>hf h : β₁tilde = β₁caron</code>.</p>
</blockquote>
<p>I think I can't assume injectivity here. I think I have to work with global minima here, I'll try a proof by contradiction with convexity, maybe I can get that to work.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>