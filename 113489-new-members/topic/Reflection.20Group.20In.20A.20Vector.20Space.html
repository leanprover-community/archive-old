---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html">Reflection Group In A Vector Space</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263792656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263792656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263792656">(Dec 05 2021 at 22:27)</a>:</h4>
<p>Hi, I am new to Lean, and I am trying to implement a reflection group generated by root vectors in a vector space V. In my vector space V, I would like to create a basis, for example \alpha_1 -&gt; \alpha_n, and for each vector in the basis define the reflection operators {s_1 -&gt; s_n}</p>



<a name="263792722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263792722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263792722">(Dec 05 2021 at 22:29)</a>:</h4>
<p>In the docs it says that to create a basis <code>All definitions are given for families of vectors, i.e. v : Î¹ â†’ M where M is the module or vector space and Î¹ : Type* is an arbitrary indexing type.</code>.  How do I create the arbitrary indexing type? Thank you</p>



<a name="263792883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263792883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263792883">(Dec 05 2021 at 22:32)</a>:</h4>
<p>It can be anything you want that has the right cardinality. For <code>n</code> things indexed 0, 1, ..., n-1, one option is <code>fin n</code>.</p>



<a name="263794990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263794990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263794990">(Dec 05 2021 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="462368">@Jeffrey Li</span>  Have you seen the existing results on reflections?  For example, <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_isometry_equiv.reflections_generate">docs#linear_isometry_equiv.reflections_generate</a> stating that the orthogonal group is generated by reflections.</p>



<a name="263795451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263795451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263795451">(Dec 05 2021 at 23:30)</a>:</h4>
<p>Thank you, I hadn't looked at that yet. I wanted to work on simple roots of reflection groups so that topic is closely related. The proof for that result is a bit over my head currently so to begin with I'm just trying to implement a few basic results by myself.</p>



<a name="263797660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797660">(Dec 06 2021 at 00:24)</a>:</h4>
<p>Hi, how come addition isn't defined in the following code? The inner product definitions are taken from <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_isometry_equiv.reflections_generate">docs#linear_isometry_equiv.reflections_generate</a> </p>
<div class="codehilite" data-code-language="variables"><pre><span></span><code>variables [inner_product_space ğ•œ E] [inner_product_space â„ F]
local notation `âŸª`x`, `y`âŸ«` := @inner ğ•œ E _ x y
local notation `absR` := has_abs.abs

def double (x : E) : E := (x + x)
</code></pre></div>



<a name="263797681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797681">(Dec 06 2021 at 00:25)</a>:</h4>
<p>It says </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">E</span>
<span class="bp">âŠ¢</span> <span class="n">has_add</span> <span class="n">E</span>
</code></pre></div>
<p>Thanks</p>



<a name="263797741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797741">(Dec 06 2021 at 00:26)</a>:</h4>
<p>Can you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ? The code you posted doesn't compile. Include all imports etc.</p>



<a name="263797842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797842">(Dec 06 2021 at 00:28)</a>:</h4>
<p>The error you posted makes perfect sense -- the only thing Lean knows about <code>E</code> according to your local context is that it's a type, so sure you can't add two elements of it. On the other hand <code>inner_product_space  ğ•œ E</code> wouldn't work if Lean only knew that <code>E</code> was a type, so you're not telling the truth in some sense. Edit: I take that back!</p>



<a name="263797942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797942">(Dec 06 2021 at 00:31)</a>:</h4>
<p>Oh sorry, I missed a line</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">analysis.convex.basic</span>
<span class="kn">import</span> <span class="n">analysis.inner_product_space.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.is_R_or_C</span>

<span class="kn">open</span> <span class="n">vector_space</span>
<span class="kn">open</span> <span class="n">finite_dimensional</span>
<span class="kn">open</span> <span class="n">finite_dimensional.basis</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ğ•œ</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="n">â„</span> <span class="n">F</span><span class="o">]</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`âŸª`</span><span class="n">x</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="n">y</span><span class="bp">`âŸ«`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inner</span> <span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">_</span> <span class="n">x</span> <span class="n">y</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">absR</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">has_abs.abs</span>
<span class="kd">def</span> <span class="n">double</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="263797945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797945">(Dec 06 2021 at 00:31)</a>:</h4>
<p>Oh I can guess what's going on -- Lean is not using <code>inner_product_space ğ•œ E</code> in your definition of <code>double</code> because you're not doing anything which indicates that <code>E</code> is supposed to be an inner product space <em>in that lemma</em>. You could put <code>[inner_product_space ğ•œ E]</code> as an assumption in <code>double</code></p>



<a name="263797990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263797990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263797990">(Dec 06 2021 at 00:32)</a>:</h4>
<p>oh ok thank you i see, I assumed that already defining it as an inner product space would imply that addition was defined</p>



<a name="263798008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798008">(Dec 06 2021 at 00:33)</a>:</h4>
<p>What does the line <code>variables [inner_product_space ğ•œ E] [inner_product_space â„ F]</code> do then if it doesn't define E to be an inner product space over k? Thank you</p>



<a name="263798011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798011">(Dec 06 2021 at 00:33)</a>:</h4>
<p>So the way variables work is that Lean will only throw them in if it needs to. This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">double</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>The point is that even though <code>[inner_product_space ğ•œ E]</code> is a variable, Lean doesn't know to use it because you don't give it enough clues.</p>



<a name="263798027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798027">(Dec 06 2021 at 00:33)</a>:</h4>
<p>Oh i see, thanks for the help!</p>



<a name="263798074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798074">(Dec 06 2021 at 00:34)</a>:</h4>
<p>It's actually a bit subtle. I think what's going on is that you never mentioned <code>ğ•œ</code>. You're right that usually something like this should work</p>



<a name="263798101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798101">(Dec 06 2021 at 00:35)</a>:</h4>
<p>What would I need to change for <code>2 * v</code> to work as well?</p>



<a name="263798106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798106">(Dec 06 2021 at 00:35)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">double</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ğ•œ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>works. Lean somehow isn't smart enough to guess that it needs to use the variable.</p>



<a name="263798109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> FrÃ©dÃ©ric Dupuis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798109">(Dec 06 2021 at 00:35)</a>:</h4>
<p>I'm pretty sure just adding <code>include ğ•œ</code> above <code>double</code> will do the trick.</p>



<a name="263798154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798154">(Dec 06 2021 at 00:36)</a>:</h4>
<p>That's probably a good way to get around this, yes.</p>



<a name="263798177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798177">(Dec 06 2021 at 00:37)</a>:</h4>
<p>Is there a way to tell lean that 2 is in <code>is_R_or_C</code> so that I can multiply by a number? thanks</p>



<a name="263798190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798190">(Dec 06 2021 at 00:37)</a>:</h4>
<p><code>(2 : \bbk)</code> is the 2 in <code>\bbk</code></p>



<a name="263798286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798286">(Dec 06 2021 at 00:39)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">include</span> <span class="bp">ğ•œ</span>
<span class="kd">variable</span> <span class="o">(</span><span class="bp">ğ•œ</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">double</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">double</span> <span class="bp">ğ•œ</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="bp">ğ•œ</span><span class="o">)</span> <span class="bp">â€¢</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>I think you have to make \bbk explicit, or <code>double</code> won't be able to guess what to choose.</p>



<a name="263798344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798344">(Dec 06 2021 at 00:40)</a>:</h4>
<p>Oh ok thanks so much this was kind of driving me nuts</p>



<a name="263798346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798346">(Dec 06 2021 at 00:40)</a>:</h4>
<p>It knows that E is a k-module but it is open to the possibility that E can also be a module over lots of other fields. In commutative algebra we always have to say which rings we're modules over.</p>



<a name="263798367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798367">(Dec 06 2021 at 00:41)</a>:</h4>
<p>Yeah I posted it because I tried to do what you were doing and noticed that there were several subleties! The <code>\smul</code> is another one, <code>*</code> won't work because <code>*</code> always takes two elements of the same type.</p>



<a name="263798377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798377">(Dec 06 2021 at 00:41)</a>:</h4>
<p>Sorry for accusing you of not telling the full story earlier -- the variable line wasn't working for a more subtle reason than I had realised.</p>



<a name="263798462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798462">(Dec 06 2021 at 00:43)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">double</span> <span class="bp">ğ•œ</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="bp">ğ•œ</span><span class="o">)</span> <span class="bp">â€¢</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">two_smul</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="263798470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798470">(Dec 06 2021 at 00:44)</a>:</h4>
<p>Fortunately someone else got there first with <code>two_smul</code></p>



<a name="263798505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263798505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263798505">(Dec 06 2021 at 00:44)</a>:</h4>
<p>Yeah no problem, I think I forgot to paste the full code anyhow. Thanks for your help!</p>



<a name="263893444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893444">(Dec 06 2021 at 18:22)</a>:</h4>
<p>Hi, why doesn't the following code work </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ğ•œ</span><span class="o">]</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`âŸª`</span><span class="n">x</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="n">y</span><span class="bp">`âŸ«`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inner</span> <span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">_</span> <span class="n">x</span> <span class="n">y</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">absR</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">has_abs.abs</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>

<span class="kd">example</span><span class="o">:</span> <span class="n">s</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">s</span> <span class="n">w</span> <span class="n">v</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="263893528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893528">(Dec 06 2021 at 18:23)</a>:</h4>
<p>It says </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">don't</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="n">context</span><span class="o">:</span>
<span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">,</span>
<span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span>
<span class="bp">âŠ¢</span> <span class="kt">Type</span> <span class="bp">?</span>
</code></pre></div>



<a name="263893573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893573">(Dec 06 2021 at 18:23)</a>:</h4>
<p>#MWE <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="263893595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893595">(Dec 06 2021 at 18:23)</a>:</h4>
<p>How is lean supposed to work out the <code>ğ•œ</code>?</p>



<a name="263893602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893602">(Dec 06 2021 at 18:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">analysis.convex.basic</span>
<span class="kn">import</span> <span class="n">analysis.inner_product_space.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.is_R_or_C</span>

<span class="kn">open</span> <span class="n">vector_space</span>
<span class="kn">open</span> <span class="n">finite_dimensional</span>
<span class="kn">open</span> <span class="n">finite_dimensional.basis</span>


<span class="kd">variables</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ğ•œ</span><span class="o">]</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`âŸª`</span><span class="n">x</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="n">y</span><span class="bp">`âŸ«`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inner</span> <span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">_</span> <span class="n">x</span> <span class="n">y</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">absR</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">has_abs.abs</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>

<span class="kd">example</span><span class="o">:</span> <span class="n">s</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">s</span> <span class="n">w</span> <span class="n">v</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="263893774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893774">(Dec 06 2021 at 18:24)</a>:</h4>
<p>Lean can't guess \bbk unless you make it explicit (my <code>variable (\bbk)</code> line in earlier code did this)</p>



<a name="263893792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893792">(Dec 06 2021 at 18:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">ğ•œ</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>

<span class="kd">example</span><span class="o">:</span> <span class="n">s</span> <span class="bp">ğ•œ</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">ğ•œ</span> <span class="n">w</span> <span class="n">v</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="263893806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893806">(Dec 06 2021 at 18:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space/near/263893595">said</a>:</p>
<blockquote>
<p>How is lean supposed to work out the <code>ğ•œ</code>?</p>
</blockquote>
<p>Sorry I'm not sure what you mean. How would I tell it about \bbk? I tried doing include \bbk but it didn't work</p>



<a name="263893949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893949">(Dec 06 2021 at 18:25)</a>:</h4>
<p>oh ok thank you. What does <code>variables (\bbk)</code> do? Didn't I already declare it at the top? Thanks</p>



<a name="263893987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263893987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263893987">(Dec 06 2021 at 18:25)</a>:</h4>
<p>It changes the bracket</p>



<a name="263894014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263894014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263894014">(Dec 06 2021 at 18:25)</a>:</h4>
<p>It <em>updates</em> the brackets.</p>



<a name="263894214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263894214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263894214">(Dec 06 2021 at 18:26)</a>:</h4>
<p>E is a \bbk-module but it's also an \int-module and for all Lean knows it could be a module for 37 other rings. Lean can't guess the ring from E.</p>



<a name="263894291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263894291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263894291">(Dec 06 2021 at 18:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space/near/263893792">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">ğ•œ</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>

<span class="kd">example</span><span class="o">:</span> <span class="n">s</span> <span class="bp">ğ•œ</span> <span class="n">v</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">ğ•œ</span> <span class="n">w</span> <span class="n">v</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>sorry now I have this new error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">s</span> <span class="bp">ğ•œ</span> <span class="n">w</span>
<span class="n">term</span>
  <span class="n">w</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="n">u_1</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u_1</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">Additional</span> <span class="n">information</span><span class="o">:</span>
<span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Data</span><span class="bp">\</span><span class="n">COQ_Test</span><span class="bp">\</span><span class="n">reflection_groups</span><span class="bp">\</span><span class="n">src</span><span class="bp">\</span><span class="n">reflection_groups</span><span class="bp">\</span><span class="n">test.lean</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">19</span><span class="o">:</span> <span class="n">context</span><span class="o">:</span> <span class="n">switched</span> <span class="n">to</span> <span class="n">simple</span> <span class="n">application</span> <span class="n">elaboration</span> <span class="n">procedure</span> <span class="n">because</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">use</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">it</span><span class="o">,</span> <span class="n">error</span> <span class="n">message</span>
  <span class="n">too</span> <span class="n">many</span> <span class="n">arguments</span>
</code></pre></div>



<a name="263894371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263894371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263894371">(Dec 06 2021 at 18:28)</a>:</h4>
<p>Am I passing <code>\bbk</code> as an argument to the function s?</p>



<a name="263894905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263894905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263894905">(Dec 06 2021 at 18:30)</a>:</h4>
<p>We're saying that this is what you will need to do, yes.</p>



<a name="263895010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895010">(Dec 06 2021 at 18:31)</a>:</h4>
<p>Lean can figure out E from v but it can't figure out k from anything, unless you put it somewhere.</p>



<a name="263895237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895237">(Dec 06 2021 at 18:32)</a>:</h4>
<p>It seems that <code>variables (ğ•œ)</code> doesn't work properly here for some reason!</p>



<a name="263895494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895494">(Dec 06 2021 at 18:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space/near/263895237">said</a>:</p>
<blockquote>
<p>It seems that <code>variables (ğ•œ)</code> doesn't work properly here for some reason!</p>
</blockquote>
<p>Yes that's the error I'm getting, am I doing something wrong or?</p>



<a name="263895562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895562">(Dec 06 2021 at 18:34)</a>:</h4>
<p>Specifically, it seems that because <code>ğ•œ</code> appears only in the notation and not in the other parameters, it's new brackets don't get picked up by lean</p>



<a name="263895642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895642">(Dec 06 2021 at 18:34)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">ğ•œ</span><span class="o">)</span>
<span class="kn">include</span> <span class="bp">ğ•œ</span>
<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>
</code></pre></div>



<a name="263895678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895678">(Dec 06 2021 at 18:34)</a>:</h4>
<p>As does this, with the notation after the binders change:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">ğ•œ</span><span class="o">)</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`âŸª`</span><span class="n">x</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="n">y</span><span class="bp">`âŸ«`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inner</span> <span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">_</span> <span class="n">x</span> <span class="n">y</span>
<span class="kd">def</span> <span class="n">s</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">v</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="k">fun</span> <span class="n">w</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">w</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">2</span><span class="bp">*âŸª</span><span class="n">v</span><span class="o">,</span> <span class="n">w</span><span class="bp">âŸ«/âŸª</span><span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">âŸ«</span><span class="o">)</span><span class="bp">â€¢</span><span class="n">v</span>
</code></pre></div>



<a name="263895707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895707">(Dec 06 2021 at 18:35)</a>:</h4>
<p>I'm afraid you've hit a weird corner-case</p>



<a name="263895909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895909">(Dec 06 2021 at 18:36)</a>:</h4>
<p>Thank you, could you explain what the difference is between {\bbk} and (\bbk) is in the type declaration?</p>



<a name="263895980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263895980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeffrey Li <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263895980">(Dec 06 2021 at 18:36)</a>:</h4>
<p>How come when we initially declare \bbk we use {\bbk  : Type* } instead of (\bbk : Type*)?</p>



<a name="263908805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Reflection%20Group%20In%20A%20Vector%20Space/near/263908805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Reflection.20Group.20In.20A.20Vector.20Space.html#263908805">(Dec 06 2021 at 19:46)</a>:</h4>
<p>{} brackets mean "let Lean work out this input to the function" (or more precisely "let Lean's type unifier work out the input"), () brackets mean "let the user supply the input". <code>variable (X : Type)</code> means "whenever X is mentioned in a function, use round brackets for it", and then later on <code>variable {X}</code> means "I've changed my mind -- from now on use {} brackets"</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>