---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html">Type classes to bundled structures</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247134391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134391">(Jul 25 2021 at 16:53)</a>:</h4>
<p>I read somewhere that mathlib has been moving from type classes to bundled structures. I don't understand what this mean, can someone explain this to me and make me an explicit example?</p>



<a name="247134434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134434">(Jul 25 2021 at 16:54)</a>:</h4>
<p>we use <code>monoid_hom</code> not <code>is_monoid_hom</code>, and have been doing so for some time.</p>



<a name="247134528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134528">(Jul 25 2021 at 16:57)</a>:</h4>
<p>Ok I believe I joined the community after this change had already happened... before there was a class <code>is_monoid_hom</code>? Why would you ever do that? I mean what was the advantage of that?</p>



<a name="247134595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134595">(Jul 25 2021 at 16:58)</a>:</h4>
<p>there <em>is</em> a class <code>is_monoid_hom</code>! In the <code>undeprecate</code> branch I'm changing it to a structure. You seem to be speaking as if it is well-known how to do monoid homomorphisms in Lean's type theory. This was not always the case.</p>



<a name="247134660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134660">(Jul 25 2021 at 17:00)</a>:</h4>
<p>We tried <code>is_monoid_hom</code> first, and then <code>monoid_hom</code>, and the latter worked better so that's the one we've been using.</p>



<a name="247134748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134748">(Jul 25 2021 at 17:01)</a>:</h4>
<p>Oh I see I guess I just have the perspective from the future but I would see things differently if I were not used to bundled morphisms</p>



<a name="247134806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134806">(Jul 25 2021 at 17:02)</a>:</h4>
<p>Right. When we were building the algebra hierarchy I was asking questions like "so how do we do group homomorphisms", expecting the answer to be well-known, and it turned out that the answer was that one has to experiment to find out. I was very surprised! As a mathematician I just expected everything to be very well-understood, but this was not the case at all.</p>



<a name="247134823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134823">(Jul 25 2021 at 17:03)</a>:</h4>
<p>Even if you look at how they're done in Coq, this doesn't tell you how to do them in Lean, because they emphasize canonical structures and we emphasize type class inference etc.</p>



<a name="247134863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134863">(Jul 25 2021 at 17:03)</a>:</h4>
<p>I still don't see why would you make <code>is_monoid_hom</code> a class instead of a structure <code> : Prop</code> in case you want it to be a proposition instead of bundling it</p>



<a name="247134917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134917">(Jul 25 2021 at 17:04)</a>:</h4>
<p>Because you want the composite of two monoid homomorphisms to automatically be a monoid homomorphism.</p>



<a name="247134964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134964">(Jul 25 2021 at 17:05)</a>:</h4>
<p>However it turned out that type class inference would often not fire, and then it turned out that dot notation was super-powerful, and so the bundled version won.</p>



<a name="247134988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247134988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247134988">(Jul 25 2021 at 17:05)</a>:</h4>
<p>There are still many <code>is_monoid_hom</code>s in mathlib, although there are far fewer in the <code>undeprecate</code> branch.</p>



<a name="247135064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247135064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247135064">(Jul 25 2021 at 17:06)</a>:</h4>
<p>There are also many <code>is_ring_hom</code>, <code>is_submonoid</code>, <code>is_subgroup</code>, <code>is_subring</code> and <code>is_subfield</code>s.</p>



<a name="247135074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247135074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247135074">(Jul 25 2021 at 17:06)</a>:</h4>
<p>I'll push the many hours of work I've done on this branch today so you can see an update :-)</p>



<a name="247135102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247135102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247135102">(Jul 25 2021 at 17:07)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/compare/undeprecate">https://github.com/leanprover-community/mathlib/compare/undeprecate</a></p>



<a name="247135339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247135339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247135339">(Jul 25 2021 at 17:12)</a>:</h4>
<p>Consider something like polynomial.coeff p n. The way that coeff is defined is separate from the proofs that it's a hom. So one might use is_ring_hom to prove some lemmas, let's say about sums. Sometimes the definition of the function (the data) can come much earlier than the proofs that it's a hom.</p>



<a name="247135357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Type%20classes%20to%20bundled%20structures/near/247135357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Type.20classes.20to.20bundled.20structures.html#247135357">(Jul 25 2021 at 17:13)</a>:</h4>
<p>Another example is matrix.adjugate. Proving that it's a monoid_hom is more complex than just defining the adjugate.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>