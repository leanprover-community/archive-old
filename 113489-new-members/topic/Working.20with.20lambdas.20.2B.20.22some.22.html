---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html">Working with lambdas + "some"</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="255954417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255954417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Torger Olson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255954417">(Oct 03 2021 at 14:15)</a>:</h4>
<p>I'm almost done formalizing an assignment, but I'm struggling to make progress with this last one. I'm not used to working with 'λ' or 'some'. Any suggests for this current state or where I can read up on 'λ' and 'some'?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span>
<span class="n">s</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">univ</span> <span class="bp">⊆</span> <span class="n">g</span> <span class="bp">''</span> <span class="n">univ</span><span class="o">,</span>
<span class="n">v</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="o">:</span> <span class="n">some</span> <span class="n">_</span> <span class="bp">∈</span> <span class="n">univ</span> <span class="bp">∧</span> <span class="n">g</span> <span class="o">(</span><span class="n">some</span> <span class="n">_</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span><span class="o">),</span> <span class="n">some</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">A</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">v</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="255957112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255957112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255957112">(Oct 03 2021 at 15:01)</a>:</h4>
<p>Lambdas are how you define functions, see e.g. <a href="https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#function-abstraction-and-evaluation">https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#function-abstraction-and-evaluation</a>. And I'm guessing some is <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.some">docs#classical.some</a> (see <a href="https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#choice">https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#choice</a>).</p>



<a name="255957142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255957142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255957142">(Oct 03 2021 at 15:01)</a>:</h4>
<p>Its more easy to help if you post a self contained <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, so some small block of code with imports that results in this tactic state rather than just the tactic state.</p>



<a name="255957237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255957237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255957237">(Oct 03 2021 at 15:03)</a>:</h4>
<p>That said you probably want to <code>rw v</code> to replace <code>v</code> with its definition and maybe simp or dsimp after to see what you're left with. And the fundamental property of <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.some">docs#classical.some</a> is <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.some_spec">docs#classical.some_spec</a>, so you'll likely need that</p>



<a name="255963916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255963916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Torger Olson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255963916">(Oct 03 2021 at 16:53)</a>:</h4>
<p>Okay thanks. I'll keep reading/trying. </p>
<p>In case you or someone see's an obvious fix here's my mwe: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">classical</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">univ</span> <span class="bp">⊆</span> <span class="n">g</span> <span class="bp">''</span> <span class="n">univ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">),</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">∘</span> <span class="n">v</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">g</span> <span class="bp">''</span> <span class="n">univ</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_image</span> <span class="n">at</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">choose</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">using</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">c</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">v</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="255968518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20lambdas%20%2B%20%22some%22/near/255968518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20lambdas.20.2B.20.22some.22.html#255968518">(Oct 03 2021 at 18:07)</a>:</h4>
<p>Here's what I would do, note the use of <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#generalize_proofs">tactic#generalize_proofs</a> to replace the long and ugly proof term hidden behind the underscore with just <code>h</code>, that can then be fed into some_spec.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">classical</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>

<span class="c1">--set_option pp.proofs true -- this will let you see what the underscores are below, but they are long and ugly expressions</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">univ</span> <span class="bp">⊆</span> <span class="n">g</span> <span class="bp">''</span> <span class="n">univ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">),</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">∘</span> <span class="n">v</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">v</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">g</span> <span class="bp">''</span> <span class="n">univ</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">s</span><span class="o">,</span>
      <span class="n">simp</span><span class="o">,</span> <span class="o">},</span>
    <span class="c1">--rw mem_image at h1,</span>
    <span class="n">choose</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">using</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">c</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">use</span> <span class="n">v</span><span class="o">,</span>
    <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">v</span><span class="o">],</span>
    <span class="n">generalize_proofs</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">some_spec</span> <span class="n">h</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>