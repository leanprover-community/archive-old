---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/New.20conv.20tactic.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html">New conv tactic</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="278970672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278970672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278970672">(Apr 14 2022 at 14:09)</a>:</h4>
<p>So, is there anything special to making a tactic that works in <code>conv</code>? Do I just put it in the <code>converter.interactive</code> namespace?</p>



<a name="278970809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278970809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278970809">(Apr 14 2022 at 14:10)</a>:</h4>
<p>Specifically, I'm trying to write a tactic that takes a big chain of <code>+</code>s, turns it into a <code>multiset.sum</code>, and then collects like terms</p>



<a name="278970888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278970888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278970888">(Apr 14 2022 at 14:11)</a>:</h4>
<p>and since I haven't done much tactic writing before I thought it'd be easiest to use it in a context where I can just hand my tactic the expression without having to "find" it first</p>



<a name="278970995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278970995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278970995">(Apr 14 2022 at 14:11)</a>:</h4>
<p>(my specific use case is gathering scalar multiples of module elements, so the easiest way to find like terms is to just match against <code>k • r</code>, I think...?)</p>



<a name="278971062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278971062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278971062">(Apr 14 2022 at 14:12)</a>:</h4>
<p>(If there's a better way to do this or an existing tactic I'm very open to that but this is what I came up with on my own)</p>



<a name="278984538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278984538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278984538">(Apr 14 2022 at 15:58)</a>:</h4>
<p>I think strictly it's type should be <code>conv unit</code> rather than <code>tactic unit</code>, but they're the same type anyway</p>



<a name="278984546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278984546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278984546">(Apr 14 2022 at 15:58)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/conv">docs#conv</a></p>



<a name="278988245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/278988245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#278988245">(Apr 14 2022 at 16:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/278970809">said</a>:</p>
<blockquote>
<p>Specifically, I'm trying to write a tactic that takes a big chain of <code>+</code>s, turns it into a <code>multiset.sum</code>, and then collects like terms</p>
</blockquote>
<p>Is the goal "collect like terms", or do you specifically want it written as a <code>multiset.sum</code> in the end?</p>



<a name="279043264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279043264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279043264">(Apr 15 2022 at 02:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/278988245">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/278970809">said</a>:</p>
<blockquote>
<p>Specifically, I'm trying to write a tactic that takes a big chain of <code>+</code>s, turns it into a <code>multiset.sum</code>, and then collects like terms</p>
</blockquote>
<p>Is the goal "collect like terms", or do you specifically want it written as a <code>multiset.sum</code> in the end?</p>
</blockquote>
<p>goal is to collect like terms</p>



<a name="279043276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279043276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279043276">(Apr 15 2022 at 02:19)</a>:</h4>
<p>multiset.sum has the advantage of being already "orderless" -- I don't have to worry about associative rewrites</p>



<a name="279058706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279058706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279058706">(Apr 15 2022 at 08:03)</a>:</h4>
<p>The advantage of <code>list.sum</code> is you'll only need<code>add_monoid</code> not <code>add_comm_monoid</code>.</p>



<a name="279059217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279059217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279059217">(Apr 15 2022 at 08:12)</a>:</h4>
<p>Well, whether that's an advantage or not is kind of contextual, no? For the use case that made me decide to try making this, the problem was that I was really frustrated with having to throw around somewhat-unreliable <code>assoc_rw</code>and <code>add_comm</code> just to factor large expressions, so building in the assumption that you can reorder terms in your sum is a plus in that case</p>



<a name="279061129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279061129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279061129">(Apr 15 2022 at 08:42)</a>:</h4>
<p>My thinking was that it would be easier to start with the list tactic, then to build the multiset tactic on top of it</p>



<a name="279061284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279061284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279061284">(Apr 15 2022 at 08:44)</a>:</h4>
<p>I think something like this works as a poor-man's list tactic:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span><span class="n">add_assoc</span><span class="o">],</span>
<span class="n">refine</span> <span class="o">(</span><span class="n">add_zero</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm.trans</span> <span class="n">_</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_assoc</span><span class="o">],</span>
<span class="n">change</span> <span class="n">list.sum</span> <span class="o">[</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">]</span> <span class="c1">-- need the right number of _</span>
</code></pre></div>



<a name="279097642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279097642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279097642">(Apr 15 2022 at 16:39)</a>:</h4>
<p>sorry, what's the intent of that tactic?</p>



<a name="279097671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279097671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279097671">(Apr 15 2022 at 16:39)</a>:</h4>
<p>looks like it tries to cancel terms?</p>



<a name="279098218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279098218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279098218">(Apr 15 2022 at 16:44)</a>:</h4>
<p>It changes <code>a + b + c + d</code> into <code>[a, b, c, d].sum</code></p>



<a name="279098260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279098260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279098260">(Apr 15 2022 at 16:45)</a>:</h4>
<p>Isn't that what you were asking for?</p>



<a name="279098292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279098292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279098292">(Apr 15 2022 at 16:45)</a>:</h4>
<p>(I didn't actually test it)</p>



<a name="279104241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279104241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279104241">(Apr 15 2022 at 17:43)</a>:</h4>
<p>Ah, right. Well, it's the first half of it anyway; the bit I want the <code>conv</code> for is actually stepping through the list looking for matching terms<br>
I have a hacked together way to do <code>multiset.sum</code> but it's not particularly robust so I might swap it out for your <code>list.sum</code> anyway</p>



<a name="279104267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279104267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279104267">(Apr 15 2022 at 17:44)</a>:</h4>
<p>but mostly I'm trying to figure out how Lean's tactic API works ^.^;</p>



<a name="279104488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279104488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279104488">(Apr 15 2022 at 17:46)</a>:</h4>
<p>i actually just wonder whether something like <code>noncomm_ring</code> can do what you want immediately. (Given your other questions here I'm implicitly assuming that is your context.)</p>



<a name="279106884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279106884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279106884">(Apr 15 2022 at 18:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.interactive.noncomm_ring/src">src#tactic.interactive.noncomm_ring</a> is actually pretty unintelligent</p>



<a name="279132522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279132522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279132522">(Apr 15 2022 at 23:04)</a>:</h4>
<p>well, for starters, what I want is more like <code>noncomm_algebra</code> anyway...</p>



<a name="279132537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279132537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279132537">(Apr 15 2022 at 23:04)</a>:</h4>
<p>admittedly there's a certain formal similarity there but</p>



<a name="279133749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279133749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279133749">(Apr 15 2022 at 23:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279058706">said</a>:</p>
<blockquote>
<p>The advantage of <code>list.sum</code> is you'll only need<code>add_monoid</code> not <code>add_comm_monoid</code>.</p>
</blockquote>
<p>My first thought about <code>multset.sum</code> was "What does that really give you? You still need to apply commutativity lemmas yourself if you want to change the order, so if you reassociate everything to be in <code>a + (b + (c + ...))</code> form it doesn't seem to buy you anything." But, I think it does end up buying you something: it's like you're tagging a node in the expression with the fact that this particular additive monoid is commutative, so you don't need to look it up with typeclass search.</p>
<p>All <code>list.sum</code> records is that there's an addition with <code>0</code>.</p>
<p><span class="user-mention" data-user-id="359992">@Robert Maxton</span> I'm curious, are you a Mathematica user? It's a long shot, but the fact you said "orderless" might be a tell.</p>



<a name="279133868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279133868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279133868">(Apr 15 2022 at 23:26)</a>:</h4>
<p>oh yes, I am much more familiar with Mathematica</p>



<a name="279133889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279133889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279133889">(Apr 15 2022 at 23:26)</a>:</h4>
<p>in fact I am doing this largely <em>because</em> Mathematica completely lacks any ability to meaningfully simplify similar products natively</p>



<a name="279133924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279133924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279133924">(Apr 15 2022 at 23:27)</a>:</h4>
<p>it technically has "NonCommutativeMultiply", but it has no real definitions attached -- not even distributivity -- and unlike Lean, there's no good way to <em>teach</em> Simplify/FullSimplify anything new in a way that it'll actually use</p>



<a name="279133943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279133943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279133943">(Apr 15 2022 at 23:27)</a>:</h4>
<p>as a result, Mathematica basically has no good way to handle symbolic operator algebras &gt;.&gt;</p>



<a name="279134011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134011">(Apr 15 2022 at 23:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279133749">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279058706">said</a>:</p>
<blockquote>
<p>The advantage of <code>list.sum</code> is you'll only need<code>add_monoid</code> not <code>add_comm_monoid</code>.</p>
</blockquote>
<p>My first thought about <code>multset.sum</code> was "What does that really give you? You still need to apply commutativity lemmas yourself if you want to change the order, so if you reassociate everything to be in <code>a + (b + (c + ...))</code> form it doesn't seem to buy you anything." But, I think it does end up buying you something: it's like you're tagging a node in the expression with the fact that this particular additive monoid is commutative, so you don't need to look it up with typeclass search.</p>
<p>All <code>list.sum</code> records is that there's an addition with <code>0</code>.</p>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> I'm curious, are you a Mathematica user? It's a long shot, but the fact you said "orderless" might be a tell.</p>
</blockquote>
<p>That, and also that all the lemmas about <code>multiset.sum</code> already typecheck for "pulling something out of the multiset without paying attention to which entry it was"</p>



<a name="279134034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134034">(Apr 15 2022 at 23:29)</a>:</h4>
<p>my idea here is basically to use "dangerous" meta-def expression-based pattern-matching to do the factoring/gathering</p>



<a name="279134038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134038">(Apr 15 2022 at 23:29)</a>:</h4>
<p>and then prove equality after the fact using <code>multiset.sum</code> lemmas</p>



<a name="279134040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134040">(Apr 15 2022 at 23:29)</a>:</h4>
<p>I've used <code>NonCommutativeMultiply</code> for some category-theoretic manipulations. The next best thing is defining your own rewrite rules that do simplifications and wrapping those as functions (making use of the <code>Flat</code> attribute for the rules)</p>



<a name="279134045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134045">(Apr 15 2022 at 23:29)</a>:</h4>
<p>and so keep the assurance that it's provably true</p>



<a name="279134104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134104">(Apr 15 2022 at 23:30)</a>:</h4>
<p>It's very easy to get these things wrong in Mathematica, though... It's very happy to keep going in the face of total nonsense.</p>



<a name="279134128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134128">(Apr 15 2022 at 23:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279134040">said</a>:</p>
<blockquote>
<p>I've used <code>NonCommutativeMultiply</code> for some category-theoretic manipulations. The next best thing is defining your own rewrite rules that do simplifications and wrapping those as functions (making use of the <code>Flat</code> attribute)</p>
</blockquote>
<p>yeaaaah, I'm going to be honest, I tried that and I just bounced, I did not see a good way of systematically canonicalizing something without basically rewriting Simplify myself</p>



<a name="279134131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134131">(Apr 15 2022 at 23:30)</a>:</h4>
<p>complete with probably-a-graph-search-algorithm</p>



<a name="279134154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134154">(Apr 15 2022 at 23:31)</a>:</h4>
<p>I guess if I just wrote a few rewrite rules and said "keep applying these until they stop changing the result", the way Lean ultimately does</p>



<a name="279134216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134216">(Apr 15 2022 at 23:32)</a>:</h4>
<p>but I'm a little spoiled by Mathematica's ability to make use of two-way relations in an intelligent way, at least for its <em>built-in</em> relations, I guess</p>



<a name="279134231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134231">(Apr 15 2022 at 23:32)</a>:</h4>
<p>I remember looking at <a href="https://github.com/NCAlgebra/NC">https://github.com/NCAlgebra/NC</a> at some point, but I've never really used it.</p>



<a name="279134286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279134286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279134286">(Apr 15 2022 at 23:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279134216">said</a>:</p>
<blockquote>
<p>but I'm a little spoiled by Mathematica's ability to make use of two-way relations in an intelligent way, at least for its <em>built-in</em> relations, I guess</p>
</blockquote>
<p>What are you referring to here? Its pattern language, or something else?</p>



<a name="279135114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279135114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279135114">(Apr 15 2022 at 23:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279134286">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="359992">Robert Maxton</span> <a href="#narrow/stream/113489-new-members/topic/New.20conv.20tactic/near/279134216">said</a>:</p>
<blockquote>
<p>but I'm a little spoiled by Mathematica's ability to make use of two-way relations in an intelligent way, at least for its <em>built-in</em> relations, I guess</p>
</blockquote>
<p>What are you referring to here? Its pattern language, or something else?</p>
</blockquote>
<p>Hmm.... okay, upon reflection actually I don't have any good examples</p>



<a name="279135128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20conv%20tactic/near/279135128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Robert Maxton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20conv.20tactic.html#279135128">(Apr 15 2022 at 23:47)</a>:</h4>
<p>in fact I can very easily think of instances where <code>FullSimplify</code> has insisted on barking up the wrong tree as far as reducing an expression goes<br>
so nvm lol</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>