---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html">A semiring isomorphic to</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228567332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228567332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228567332">(Mar 03 2021 at 10:18)</a>:</h4>
<p>Dear All,</p>
<p>in the code below, I define the subsemiring of non-negative elements of an <code>ordered_semiring</code>.  After that, I would like to prove that, if I apply this construction starting from ℤ, I obtain ℕ.  I know that in Type theory, this will not really be an equality, but I would like to be able to convert from one to the other easily.  What can I do?</p>
<p>Also, any suggestions/improvements on the given definition are more than welcome!</p>
<p>Thanks!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.subsemiring</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">ordered_semiring</span> <span class="n">R</span><span class="o">]</span>

<span class="sd">/--  The subtype of non-negative elements of `R`. -/</span>
<span class="kd">def</span> <span class="n">pR</span> <span class="o">:</span> <span class="n">subsemiring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">r</span><span class="o">},</span>
  <span class="n">one_mem'</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_set_of_eq</span><span class="o">,</span> <span class="n">zero_le_one</span><span class="o">],</span>
  <span class="n">mul_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="o">(</span><span class="n">x0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">y0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">),</span> <span class="n">mul_nonneg</span> <span class="n">x0</span> <span class="n">y0</span><span class="o">,</span>
  <span class="n">zero_mem'</span> <span class="o">:=</span> <span class="n">rfl.le</span><span class="o">,</span>
  <span class="n">add_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="o">(</span><span class="n">x0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">y0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">),</span> <span class="n">add_nonneg</span> <span class="n">x0</span> <span class="n">y0</span> <span class="o">}</span>

<span class="c1">-- feel free to change this statement to something else that will still</span>
<span class="c1">-- assert that `pR ℤ` *is* ℕ!</span>
<span class="kd">lemma</span> <span class="n">pR_Z_eq_N</span> <span class="o">:</span> <span class="n">pR</span> <span class="n">ℤ</span> <span class="bp">≃</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="228568400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568400">(Mar 03 2021 at 10:20)</a>:</h4>
<p>I think that, in addition to <code>pR</code> you also want a predicate <code>is_nonneg_subsemiring N Z</code>.</p>



<a name="228568492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568492">(Mar 03 2021 at 10:21)</a>:</h4>
<p>You should then:</p>
<p>1) Show that <code>pR</code> satisfies this predicate<br>
2) Show that <code>nat</code> and <code>int</code> satisfy this predicate (and eg <code>nnreal</code> and <code>real</code>)<br>
3) Use that predicate whenever you develop API in this setting.</p>



<a name="228568587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568587">(Mar 03 2021 at 10:22)</a>:</h4>
<p>In applications, you should then be able to freely switch between <code>pR</code> or <code>nat</code>, etc</p>



<a name="228568616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568616">(Mar 03 2021 at 10:22)</a>:</h4>
<p>Ok, thanks Johan!  I will process this and report with more questions!</p>



<a name="228568720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568720">(Mar 03 2021 at 10:23)</a>:</h4>
<p>The predicate should probably assume that <code>Z</code> is an <code>N</code>-algebra, and then just require that the image of <code>N</code> is positive, <code>algebra_map</code> is injective, and for every positive element, there exists a preimage.</p>



<a name="228568735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568735">(Mar 03 2021 at 10:23)</a>:</h4>
<p>The predicate <code>is_nonneg_subsemiring</code> is a predicate on subsemirings of a general ordered_semiring, right?  And it simply checks that all the elements are non-negative, I imagine</p>



<a name="228568763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568763">(Mar 03 2021 at 10:23)</a>:</h4>
<p>No, not on subsemirings, because then <code>nat</code> will not be an example.</p>



<a name="228568865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568865">(Mar 03 2021 at 10:24)</a>:</h4>
<p>ah, I see, subsemirings up to injections!</p>



<a name="228568875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568875">(Mar 03 2021 at 10:24)</a>:</h4>
<p>It should be a predicate on two types, <code>[semiring N] [ordered_semiring Z] [algebra N Z]</code></p>



<a name="228568955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228568955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228568955">(Mar 03 2021 at 10:25)</a>:</h4>
<p>I get it now and it already addresses some of the issues that I was experiencing in my naïve approach!</p>



<a name="228569162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569162">(Mar 03 2021 at 10:26)</a>:</h4>
<p>Don't you want the stronger statement <code>pR ℤ ≃+* ℕ</code>?</p>



<a name="228569243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569243">(Mar 03 2021 at 10:27)</a>:</h4>
<p>Eric, yes, definitely!  I thought that the iso symbol meant what I can see now that your symbol means!</p>



<a name="228569290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569290">(Mar 03 2021 at 10:27)</a>:</h4>
<p>You might of course also want <code>pR ℤ ≃o ℕ</code>, once the order PR stuff we worked on gets merged</p>



<a name="228569299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569299">(Mar 03 2021 at 10:27)</a>:</h4>
<p>Unfortunately there's no <code>≃o+*</code> I don't think</p>



<a name="228569304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569304">(Mar 03 2021 at 10:27)</a>:</h4>
<p>Properties of bundled homs don't compose well</p>



<a name="228569319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569319">(Mar 03 2021 at 10:27)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> this is a consequence of what I sketched, right?</p>



<a name="228569469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569469">(Mar 03 2021 at 10:29)</a>:</h4>
<p>Yes, I definitely want all these things, but I am hoping that with the setup that Johan suggested, they will fall through.</p>
<p>Also, Eric, the PR that is causing you so much pain was my attempt at a start of this project...</p>



<a name="228569612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569612">(Mar 03 2021 at 10:30)</a>:</h4>
<p>At this point I think everything is resolved, and I just need to wait for the build queue to clear</p>



<a name="228569630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569630">(Mar 03 2021 at 10:30)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, probably yeah</p>



<a name="228569667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569667">(Mar 03 2021 at 10:31)</a>:</h4>
<p>You may be interested in <a href="https://leanprover-community.github.io/mathlib_docs/find/nonneg_ring">docs#nonneg_ring</a>, although I think that's not quite what you're asking for</p>



<a name="228569676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228569676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228569676">(Mar 03 2021 at 10:31)</a>:</h4>
<p>Eric, thank you so much for your help with the earlier, shattered, PR!</p>



<a name="228570246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570246">(Mar 03 2021 at 10:35)</a>:</h4>
<p>Johan, is there any reason for wanting <code>N</code> to be <em>all</em> non-negative elements?  Would it not be enough to ask that all the elements of <code>N</code> map to non-negative ones?</p>
<p>Will I get in trouble down the road if I allow subrings of non-negative elements that are not all of the non-negative elements?</p>



<a name="228570548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570548">(Mar 03 2021 at 10:37)</a>:</h4>
<p>I don't know...</p>



<a name="228570574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570574">(Mar 03 2021 at 10:38)</a>:</h4>
<p>Both concepts might be useful</p>



<a name="228570703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570703">(Mar 03 2021 at 10:38)</a>:</h4>
<p>I will try!</p>



<a name="228570763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570763">(Mar 03 2021 at 10:39)</a>:</h4>
<p>For toric your version might be good enough <span aria-label="bulb" class="emoji emoji-1f4a1" role="img" title="bulb">:bulb:</span></p>



<a name="228570814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570814">(Mar 03 2021 at 10:39)</a>:</h4>
<p>And then <code>nat -&gt; real</code> might be another interesting example</p>



<a name="228570932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228570932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228570932">(Mar 03 2021 at 10:40)</a>:</h4>
<p>Exactly, this is what I wanted.  Also <code>nat -&gt; rat</code></p>



<a name="228571194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/A%20semiring%20isomorphic%20to/near/228571194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/A.20semiring.20isomorphic.20to.html#228571194">(Mar 03 2021 at 10:42)</a>:</h4>
<p>I am going to try this definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_nonneg_subsemiring</span> <span class="o">(</span><span class="n">N</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">ordered_semiring</span> <span class="n">Z</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">N</span> <span class="n">Z</span><span class="o">]</span> <span class="o">:</span>
  <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">injective</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">N</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">algebra_map</span> <span class="n">N</span> <span class="n">Z</span> <span class="n">n</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>