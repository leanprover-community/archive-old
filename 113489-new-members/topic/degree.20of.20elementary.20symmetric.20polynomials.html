---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html">degree of elementary symmetric polynomials</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230416053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230416053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230416053">(Mar 15 2021 at 20:49)</a>:</h4>
<p>Besides the instance issue in the second proof, I would very much appreciate any suggestions for which direction to work in for both. Using <code>finset</code>, <code>finsupp</code>, and <code>multiset</code> at the same time is not fun.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.polynomial.symmetric</span>
<span class="kn">import</span> <span class="n">ring_theory.polynomial.homogeneous</span>
<span class="kn">import</span> <span class="n">data.mv_polynomial.basic</span>
<span class="kn">import</span> <span class="n">data.multiset.basic</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">fintype</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kn">namespace</span> <span class="n">mv_polynomial</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">σ</span><span class="o">]</span>  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">support_esymm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="o">(</span><span class="n">finset.powerset_len</span> <span class="n">n</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">))</span><span class="bp">.</span><span class="n">image</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">t</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>

<span class="kd">lemma</span> <span class="n">degrees_esymm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">degrees</span> <span class="bp">=</span> <span class="o">(</span><span class="n">finset.univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">degrees</span><span class="o">,</span> <span class="n">support_esymm</span><span class="o">],</span>
  <span class="n">convert</span> <span class="bp">←</span> <span class="n">finset.sup_finset_image</span><span class="o">,</span>
  <span class="c1">-- goal: semilattice_sup_bot_of_bounded_lattice (multiset σ) = multiset.semilattice_sup_bot</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">mv_polynomial</span>
</code></pre></div>



<a name="230420016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230420016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230420016">(Mar 15 2021 at 21:17)</a>:</h4>
<p>Some API to get you started:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">multiset.count_univ</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">multiset.count</span> <span class="n">a</span> <span class="n">finset.univ.val</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">multiset.count_eq_one_of_mem</span> <span class="n">finset.univ.nodup</span> <span class="o">(</span><span class="n">finset.mem_univ</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div>



<a name="230426072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230426072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230426072">(Mar 15 2021 at 22:02)</a>:</h4>
<p>Oh, maybe I was not being explicit, but the main issue is the instance issue. I'm not able to bypass it using the usual <code>congr</code> trick. At the same time I'm not sure why instances ever break like this anyways, so I don't know how I should proceed to fix it properly.</p>



<a name="230475248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230475248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230475248">(Mar 16 2021 at 08:21)</a>:</h4>
<p>After the <code>convert</code> some of your goals are data, and the reason those lattices aren't equal (or at least one of the reasons) is that one of them has a metavariable in the definition, which corresponds to a later <code>sorry</code>. <code>convert</code> does this. It's not good with type class inference, for example -- type class goals can be spat out as separate goals for later on, before unification takes place, it seems to me; often goals spat out by <code>convert</code> can be solved with <code>apply_instance</code>.</p>



<a name="230475497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230475497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230475497">(Mar 16 2021 at 08:24)</a>:</h4>
<p>In this case one of your goals is <code>⊢ complete_lattice (multiset σ)</code> and <code>apply_instance</code> doesn't solve it, and I'm not sure that such an instance can exist because {37},{37,37},{37,37,37,},... has no sup. So maybe you're <code>convert</code>ing the wrong lemma?</p>



<a name="230475623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230475623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230475623">(Mar 16 2021 at 08:25)</a>:</h4>
<p>there's no top in multiset</p>



<a name="230475735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230475735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230475735">(Mar 16 2021 at 08:26)</a>:</h4>
<p>it might be conditionally complete though</p>



<a name="230532763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230532763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230532763">(Mar 16 2021 at 15:27)</a>:</h4>
<p>The problem was that <code>finset.sup_finset_image</code> assumes the need of a complete lattice when there's no need for it. Having a <code>semilattice_inf_bot</code> suffices, but I had to rewrite the proof. (The one in the library uses <code>supr</code> to prove it, which adds the unneeded condition.)</p>



<a name="230532877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230532877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230532877">(Mar 16 2021 at 15:28)</a>:</h4>
<p>Can you share your whole proof?</p>



<a name="230547976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230547976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230547976">(Mar 16 2021 at 16:41)</a>:</h4>
<p>It quite ugly right now, but here: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.polynomial.symmetric</span>
<span class="kn">import</span> <span class="n">ring_theory.polynomial.homogeneous</span>
<span class="kn">import</span> <span class="n">data.mv_polynomial.basic</span>
<span class="kn">import</span> <span class="n">data.multiset.basic</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">finset</span> <span class="n">mv_polynomial</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">M</span><span class="o">]</span>

<span class="kn">namespace</span> <span class="n">mv_polymonial</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">σ</span><span class="o">]</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">support_sum_eq</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→₀</span> <span class="n">M</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ι</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i₁</span> <span class="n">i₂</span><span class="o">,</span> <span class="n">i₁</span> <span class="bp">≠</span> <span class="n">i₂</span> <span class="bp">→</span> <span class="n">disjoint</span> <span class="o">(</span><span class="n">g</span> <span class="n">i₁</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="o">(</span><span class="n">g</span> <span class="n">i₂</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">g</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="n">s.bUnion</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">finsupp.support_single</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span>
<span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="o">(</span><span class="n">finsupp.single</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">hb</span><span class="o">,</span>
  <span class="n">ext</span> <span class="n">a'</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">support_esymm''</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="o">(</span><span class="n">powerset_len</span> <span class="n">n</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">))</span><span class="bp">.</span><span class="n">bUnion</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">finsupp.single</span> <span class="o">(</span><span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">t</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">R</span><span class="o">))</span><span class="bp">.</span><span class="n">support</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">esymm_eq_sum_monomial</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">monomial</span><span class="o">],</span>
  <span class="n">convert</span> <span class="n">support_sum_eq</span> <span class="o">(</span><span class="n">powerset_len</span> <span class="n">n</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">))</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span> <span class="n">hij</span> <span class="n">d</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">R</span><span class="o">)</span> <span class="n">one_ne_zero</span><span class="o">],</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">and_imp</span><span class="o">,</span> <span class="n">inf_eq_inter</span><span class="o">,</span> <span class="n">mem_inter</span><span class="o">,</span> <span class="n">mem_singleton</span><span class="o">],</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ne.def</span><span class="o">,</span> <span class="n">not_false_iff</span><span class="o">,</span> <span class="n">one_ne_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">intros</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hi</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">i</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="n">i</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">support_sum_eq</span> <span class="n">i</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="mi">1</span> <span class="n">this</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span> <span class="n">hij</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="mi">1</span> <span class="n">this</span><span class="o">],</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">ne.def</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hij.symm</span><span class="o">,</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">hj</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">j</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="n">j</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">support_sum_eq</span> <span class="n">j</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="mi">1</span> <span class="n">this</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span> <span class="n">hij</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="mi">1</span> <span class="n">this</span><span class="o">],</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">ne.def</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hij.symm</span><span class="o">},</span>
  <span class="n">apply_fun</span> <span class="n">finsupp.support</span> <span class="n">at</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">apply_fun</span> <span class="n">finsupp.support</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hi</span> <span class="n">at</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hj</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h1</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">contradiction</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">support_esymm'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span> <span class="o">(</span><span class="n">powerset_len</span> <span class="n">n</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">))</span><span class="bp">.</span><span class="n">bUnion</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="o">{</span><span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">t</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">})</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">support_esymm''</span><span class="o">,</span>
  <span class="n">congr</span><span class="o">,</span>
  <span class="n">funext</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">finsupp.support_single</span> <span class="n">_</span> <span class="mi">1</span> <span class="n">one_ne_zero</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">support_esymm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">support</span> <span class="bp">=</span>
  <span class="o">(</span><span class="n">powerset_len</span> <span class="n">n</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">))</span><span class="bp">.</span><span class="n">image</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">t</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">support_esymm'</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">bUnion_singleton</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">sup_finset_image'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">semilattice_sup_bot</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">s.sup</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">s.image</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">sup</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">finset.induction_on</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">s'</span> <span class="n">ha</span> <span class="n">ih</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">sup_insert</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">image_insert</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">sup_insert</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">ih</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">to_multiset_sum</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">σ</span> <span class="bp">→₀</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span>
<span class="n">finsupp.to_multiset</span> <span class="o">(</span><span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">finsupp.to_multiset</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>

<span class="kd">lemma</span> <span class="n">single_to_multiset</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">finsupp.to_multiset</span> <span class="bp">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">),</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="k">in</span> <span class="n">t</span><span class="o">,</span> <span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">t.val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">funext</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">function.comp_app</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">to_multiset_sum</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finsupp.to_multiset_single</span><span class="o">,</span> <span class="n">one_nsmul</span><span class="o">],</span> <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">degrees_esymm</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">σ</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">esymm</span> <span class="n">σ</span> <span class="n">R</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">degrees</span> <span class="bp">=</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">σ</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">degrees</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">support_esymm</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="n">sup_finset_image'</span> <span class="o">(</span><span class="n">powerset_len</span> <span class="n">n</span> <span class="n">univ</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">single_to_multiset</span><span class="o">],</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">mv_polymonial</span>
</code></pre></div>
<p>My willpower to fill the <code>sorry</code>s ran out, but they're all simple ones.</p>



<a name="230567829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230567829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230567829">(Mar 16 2021 at 18:36)</a>:</h4>
<p>I'm filling it out, but just noticed: is it true for <code>n = 0</code>?</p>



<a name="230570239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230570239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230570239">(Mar 16 2021 at 18:52)</a>:</h4>
<p>And also for <code>n</code> greater than <code>card \sigma</code></p>



<a name="230571569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230571569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230571569">(Mar 16 2021 at 19:01)</a>:</h4>
<p>No for both. <code>esymm \s R 0</code> is just <code>1</code>, which has no variables, so the degrees set is empty. For <code>card \s &lt; n</code>, <code>esymm \s R n</code> is a sum over nothing, so its degrees set is also empty.</p>



<a name="230571638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230571638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230571638">(Mar 16 2021 at 19:01)</a>:</h4>
<p>Right, just clarifying</p>



<a name="230607254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230607254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230607254">(Mar 16 2021 at 22:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6718">#6718</a></p>



<a name="230615125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230615125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230615125">(Mar 17 2021 at 00:35)</a>:</h4>
<p>Hooray! And thus we have the first step in the long journey to the Lindemann-Weierstrass theorem.</p>



<a name="230645126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/degree%20of%20elementary%20symmetric%20polynomials/near/230645126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/degree.20of.20elementary.20symmetric.20polynomials.html#230645126">(Mar 17 2021 at 06:43)</a>:</h4>
<p><span class="user-mention" data-user-id="355764">@Hanting Zhang</span> That's a very nice target!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>