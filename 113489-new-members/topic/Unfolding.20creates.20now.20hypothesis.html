---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html">Unfolding creates now hypothesis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200731508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200731508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200731508">(Jun 12 2020 at 22:26)</a>:</h4>
<p>Why does <code>unfold</code> create new hypothesis?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subgroup</span> <span class="n">s</span><span class="o">]</span>

<span class="n">def</span> <span class="n">r</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">quotient_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">s</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">quotient_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">at</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200731890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200731890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200731890">(Jun 12 2020 at 22:31)</a>:</h4>
<p>because the goal depends on <code>a</code> and <code>b</code></p>



<a name="200731996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200731996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200731996">(Jun 12 2020 at 22:32)</a>:</h4>
<p>When <code>simp</code> runs on the reverted version of the goal, it can't rewrite inside the binder domain</p>



<a name="200732007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732007">(Jun 12 2020 at 22:32)</a>:</h4>
<p>Use <code>dunfold</code></p>



<a name="200732527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732527">(Jun 12 2020 at 22:38)</a>:</h4>
<p>Interesting.</p>



<a name="200732599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732599">(Jun 12 2020 at 22:39)</a>:</h4>
<p>Also on (<code>d</code>)<code>unfold</code>/(<code>d</code>)<code>simp</code>,  how can I unfold <code>setoid.r</code> on the goal <code>setoid.r (quotient.out' a) (quotient.out' b)</code> (the goal at <code>sorry</code>).</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subgroup</span> <span class="n">s</span><span class="o">]</span>

<span class="n">def</span> <span class="n">r</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">s</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">quotient_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="n">s</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">a</span><span class="bp">.</span><span class="n">out_eq&#39;</span><span class="o">,</span> <span class="err">←</span><span class="n">b</span><span class="bp">.</span><span class="n">out_eq&#39;</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">sound&#39;</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200732731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732731">(Jun 12 2020 at 22:40)</a>:</h4>
<p>I know that <code>setoid.r = r</code> defined above (it is how its defined in <code>group_theory.quotient_group</code> and would like to leverage that fact.</p>



<a name="200732892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732892">(Jun 12 2020 at 22:42)</a>:</h4>
<p>do you want the <code>r</code> you defined or the one in <code>quotient_group</code>?</p>



<a name="200732919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200732919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200732919">(Jun 12 2020 at 22:43)</a>:</h4>
<p>you can always force it with <code>change</code></p>



<a name="200733052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733052">(Jun 12 2020 at 22:44)</a>:</h4>
<p>I don't seem to be able to use change. <code>change r a.out' b.out'</code> nor <code>change setoid.r a.out' b.out'</code> work.</p>



<a name="200733062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733062">(Jun 12 2020 at 22:45)</a>:</h4>
<p>I've found it frustrating in the past that sometimes one can't just say "unfold this relation". You can use <code>set</code> instead of <code>let</code> to unfold a definitional <code>let</code> but there's no analogue here</p>



<a name="200733088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733088">(Jun 12 2020 at 22:45)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  <span class="n">change</span> <span class="bp">@</span><span class="n">r</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">s</span> <span class="bp">_</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">out&#39;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">out&#39;</span> <span class="n">b</span><span class="o">),</span>
</code></pre></div>


<p>works</p>



<a name="200733089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733089">(Jun 12 2020 at 22:45)</a>:</h4>
<p>Sometimes <code>simp only [setoid.r]</code> works</p>



<a name="200733172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733172">(Jun 12 2020 at 22:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis/near/200733088">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>  <span class="n">change</span> <span class="bp">@</span><span class="n">r</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">s</span> <span class="bp">_</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">out&#39;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">out&#39;</span> <span class="n">b</span><span class="o">),</span>
</code></pre></div>


<p>works</p>
</blockquote>
<p>Omg, you are a wizard. <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="200733176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733176">(Jun 12 2020 at 22:46)</a>:</h4>
<p>it is complicated here because it's not actually a simple unfold, <code>r</code> is not involved in the definition at all</p>



<a name="200733208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733208">(Jun 12 2020 at 22:46)</a>:</h4>
<p>That sure is quite the work around (although not really), I would have taken a long while to figure it out myself, thanks!</p>



<a name="200733301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733301">(Jun 12 2020 at 22:47)</a>:</h4>
<p>(Maybe making this whole ordeal less opaque would be good. It is not clear at all that this was even possible after a lot of messing around with <code>unfold</code> and <code>simp</code>.)</p>



<a name="200733354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733354">(Jun 12 2020 at 22:48)</a>:</h4>
<p>What I actually did was <code>change r _ _,</code> but that didn't work until I did <code>change _ ∈ _, change r _ _,</code> which yields a <code>is_subgroup s</code> subgoal. So apparently it can't figure out the implicit arguments to <code>r</code> without help</p>



<a name="200733387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733387">(Jun 12 2020 at 22:48)</a>:</h4>
<p>Wow, that is amazing!</p>



<a name="200733394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733394">(Jun 12 2020 at 22:48)</a>:</h4>
<p>which makes sense, because <code>r</code> doesn't have anything in its type that would help infer <code>s</code></p>



<a name="200733441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733441">(Jun 12 2020 at 22:49)</a>:</h4>
<p>Thank you for explaining your thought process. I just started using change earlier today actually (but I remember someone mentioning in another thread a while ago) and am not very good at it. <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="200733510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733510">(Jun 12 2020 at 22:50)</a>:</h4>
<p>when in doubt, use lots of underscores <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="200733720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/200733720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#200733720">(Jun 12 2020 at 22:53)</a>:</h4>
<p>I think it helps to know that there is always the fallback of being completely explicit and providing a fully elaborated term. That will always work unless the kernel is broken, so it's really a matter of inserting more implicit info until it works and then scaling back until you have just enough for lean to close the distance</p>



<a name="205382791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/205382791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#205382791">(Jul 29 2020 at 16:51)</a>:</h4>
<p>(deleted)</p>



<a name="205383078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Unfolding%20creates%20now%20hypothesis/near/205383078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Unfolding.20creates.20now.20hypothesis.html#205383078">(Jul 29 2020 at 16:53)</a>:</h4>
<p>(sorry, caught out by zulip's filtered search)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>