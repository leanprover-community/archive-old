---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Dependency.20problem.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html">Dependency problem</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197741946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197741946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197741946">(May 15 2020 at 19:26)</a>:</h4>
<p>I made a <a href="https://github.com/leanprover-community/mathlib/tree/normed-spaces-edits">new branch</a>, modifying <code>normed_space.basic</code> (see discussions <a href="https://github.com/leanprover-community/mathlib/pull/2660#discussion_r423522431">1</a> <a href="#narrow/stream/113489-new-members/topic/.22variables.22.20command/near/197581417">2</a>), which broke <code>normed_space.operator_norm</code>.  I can't figure out why, and wondered if someone would mind diagnosing it for me.</p>



<a name="197741950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197741950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197741950">(May 15 2020 at 19:26)</a>:</h4>
<p>The first error is, "term <code>f</code> has type <code>𝕜 →ₗ[𝕜] E : Type (max u_1 u_2)</code> but is expected to have type <code>?m_2 →ₗ[?m_1] ?m_3 : Type (max ? ?)</code>".</p>



<a name="197742221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742221">(May 15 2020 at 19:29)</a>:</h4>
<p>That looks ugly )-; [The error, I mean]</p>



<a name="197742444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742444">(May 15 2020 at 19:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  <span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
    <span class="bp">@</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">mk_continuous</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_2</span> <span class="err">?</span><span class="n">l_3</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_5</span> <span class="err">?</span><span class="n">m_6</span> <span class="err">?</span><span class="n">m_7</span> <span class="err">?</span><span class="n">m_8</span> <span class="err">?</span><span class="n">m_9</span> <span class="err">?</span><span class="n">m_10</span> <span class="err">?</span><span class="n">m_11</span> <span class="n">f</span>
  <span class="n">term</span>
    <span class="n">f</span>
  <span class="n">has</span> <span class="n">type</span>
    <span class="bp">@</span><span class="n">linear_map</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span> <span class="n">u_1</span> <span class="n">u_2</span><span class="o">}</span> <span class="err">𝕜</span> <span class="err">𝕜</span> <span class="n">E</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="bp">_</span><span class="n">inst_4</span><span class="o">))</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_add_comm_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span>
         <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_normed_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="bp">_</span><span class="n">inst_4</span><span class="o">)))</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_add_comm_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_2</span><span class="o">}</span> <span class="n">E</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">field</span><span class="bp">.</span><span class="n">to_vector_space</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_field</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="err">𝕜</span> <span class="bp">_</span><span class="n">inst_4</span><span class="o">))</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">to_module</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span> <span class="n">u_2</span><span class="o">}</span> <span class="err">𝕜</span> <span class="n">E</span> <span class="bp">_</span><span class="n">inst_4</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="bp">_</span><span class="n">inst_5</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_1</span> <span class="n">u_2</span><span class="o">)</span>
  <span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
    <span class="bp">@</span><span class="n">linear_map</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_2</span> <span class="err">?</span><span class="n">l_3</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_5</span> <span class="err">?</span><span class="n">m_6</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_7</span><span class="o">))</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_add_comm_group</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_2</span><span class="o">}</span> <span class="err">?</span><span class="n">m_5</span> <span class="err">?</span><span class="n">m_8</span><span class="o">)</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_add_comm_group</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_3</span><span class="o">}</span> <span class="err">?</span><span class="n">m_6</span> <span class="err">?</span><span class="n">m_9</span><span class="o">)</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">to_module</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_2</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_5</span> <span class="err">?</span><span class="n">m_7</span> <span class="err">?</span><span class="n">m_8</span> <span class="err">?</span><span class="n">m_10</span><span class="o">)</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">to_module</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_3</span><span class="o">}</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_6</span> <span class="err">?</span><span class="n">m_7</span> <span class="err">?</span><span class="n">m_9</span> <span class="err">?</span><span class="n">m_11</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_2</span><span class="o">)</span>
</code></pre></div>


<p>Is it a diamond?</p>



<a name="197742474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742474">(May 15 2020 at 19:31)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> (Btw, I think these questions could go in "general")<br>
<a href="https://github.com/leanprover-community/mathlib/commit/0f96de153ffb79f9c3cb147f6c206e67cc09aa49#diff-fc5c89c1d4551a23597885d48b6ed4e5R705">https://github.com/leanprover-community/mathlib/commit/0f96de153ffb79f9c3cb147f6c206e67cc09aa49#diff-fc5c89c1d4551a23597885d48b6ed4e5R705</a><br>
this looks like an instance loop</p>



<a name="197742498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742498">(May 15 2020 at 19:31)</a>:</h4>
<p>It should probably be a <code>def</code> instead of an <code>instance</code></p>



<a name="197742708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742708">(May 15 2020 at 19:33)</a>:</h4>
<p>I'll try that!  Of <code>of_normed_module</code> or <code>to_normed_module</code>, which should be the <code>instance</code> and which the <code>def</code>?</p>



<a name="197742828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742828">(May 15 2020 at 19:34)</a>:</h4>
<p>The one that makes your life easier when defining a new normed_space</p>



<a name="197742845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742845">(May 15 2020 at 19:34)</a>:</h4>
<p>So <code>of_</code></p>



<a name="197742931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742931">(May 15 2020 at 19:35)</a>:</h4>
<p>I think <code>of_</code> should be the <code>def</code></p>



<a name="197742990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197742990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197742990">(May 15 2020 at 19:35)</a>:</h4>
<p>I'm confused, are these two classes the same?</p>



<a name="197743063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743063">(May 15 2020 at 19:36)</a>:</h4>
<p>If at some point someone encounters a <code>normed_module</code> over a field, they will have to work a little bit to make it a <code>normed_space</code>. But the rest of the time, we want lemmas about <code>normed_module</code>s to automatically apply to <code>normed_space</code>s.</p>



<a name="197743064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743064">(May 15 2020 at 19:36)</a>:</h4>
<p>There is a typo in my documentation.</p>



<a name="197743071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743071">(May 15 2020 at 19:36)</a>:</h4>
<p>or does this equivalence only hold under certain conditions</p>



<a name="197743102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743102">(May 15 2020 at 19:36)</a>:</h4>
<p>It should read, "Over a normed field, <code>∥c • x∥ ≤ ∥c∥ ∥x∥</code> automatically implies <code>∥c • x∥ = ∥c∥ ∥x∥</code>"</p>



<a name="197743125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743125">(May 15 2020 at 19:36)</a>:</h4>
<p>The equivalence holds when the ring is a field</p>



<a name="197743149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743149">(May 15 2020 at 19:37)</a>:</h4>
<p>In general, if <code>A -&gt; B</code> and <code>C -&gt; B -&gt; A</code> then <code>B</code> should be the parent and <code>A -&gt; B</code> an instance</p>



<a name="197743212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743212">(May 15 2020 at 19:37)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> We could also decide to do away with <code>normed_module</code> and just define <code>normed_space</code> over general rings, right?</p>



<a name="197743239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743239">(May 15 2020 at 19:37)</a>:</h4>
<p><code>normed_module</code> is brand new, I just made it.</p>



<a name="197743283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743283">(May 15 2020 at 19:38)</a>:</h4>
<p>(Was going to open a discussion topic later.)</p>



<a name="197743293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743293">(May 15 2020 at 19:38)</a>:</h4>
<p>And then this:<br>
<span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113489-new-members/topic/Dependency.20problem/near/197743102">said</a>:</p>
<blockquote>
<p>It should read, "Over a normed field, <code>∥c • x∥ ≤ ∥c∥ ∥x∥</code> automatically implies <code>∥c • x∥ = ∥c∥ ∥x∥</code>"</p>
</blockquote>
<p>just becomes a lemma about normed spaces, if the base ring happens to be a field.</p>



<a name="197743328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743328">(May 15 2020 at 19:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113489-new-members/topic/Dependency.20problem/near/197743239">said</a>:</p>
<blockquote>
<p><code>normed_module</code> is brand new, I just made it.</p>
</blockquote>
<p>Sure, so I should have said: change the def or <code>normed_space</code> to work for general rings.</p>



<a name="197743361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743361">(May 15 2020 at 19:38)</a>:</h4>
<p>I think <code>normed_space</code> means <code>normed_vector_space</code></p>



<a name="197743393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743393">(May 15 2020 at 19:39)</a>:</h4>
<p>We decided to have both <code>module</code> and <code>vector_space</code> in mathlib, but it creates extra technical nuissance. The only reason we keep it is psychological/pedagogical.</p>



<a name="197743511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743511">(May 15 2020 at 19:40)</a>:</h4>
<p>You don't want a library without <code>vector_space</code>, but renaming <code>module</code> to <code>vector_space</code> also seems dishonest.</p>



<a name="197743515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743515">(May 15 2020 at 19:40)</a>:</h4>
<p>I think consistency is good -- what is done in the general category should also be done in the normed category, etc.</p>



<a name="197743571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743571">(May 15 2020 at 19:40)</a>:</h4>
<p>But in the normed category, you won't have beginning users that don't know that modules and vector spaces are just the same thing.</p>



<a name="197743795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743795">(May 15 2020 at 19:43)</a>:</h4>
<p>Unifying the two concepts would allow you to get rid of this instance loops altogether. But keeping it for the sake of consistency isn't a big problem either. Upgrading a <code>normed_module</code> over a field to a <code>normed_space</code> is just a one-liner in a proof.</p>



<a name="197743799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743799">(May 15 2020 at 19:43)</a>:</h4>
<p>I'm not sure it would be wise to go down the path of Banach modules, Hilbert modules, ...</p>



<a name="197743819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743819">(May 15 2020 at 19:43)</a>:</h4>
<p>Sobolev modules</p>



<a name="197743841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197743841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197743841">(May 15 2020 at 19:43)</a>:</h4>
<p>The module of measures of bounded variation</p>



<a name="197745445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745445">(May 15 2020 at 19:59)</a>:</h4>
<p>I think <code>vector_space</code> is just an abbreviation for <code>module</code>. We could have <code>normed_module</code>, and then <code>normed_space</code> as an abbreviation of <code>normed_module</code>.</p>



<a name="197745554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745554">(May 15 2020 at 20:00)</a>:</h4>
<p>But "just an abbreviation" is not good enough for type class inference.</p>



<a name="197745594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745594">(May 15 2020 at 20:00)</a>:</h4>
<p>I wish the pretty printer could do type class inference <span aria-label="oops" class="emoji emoji-1f643" role="img" title="oops">:oops:</span> <span aria-label="head bandage" class="emoji emoji-1f915" role="img" title="head bandage">:head_bandage:</span></p>



<a name="197745658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745658">(May 15 2020 at 20:01)</a>:</h4>
<p>Let me add that I made up these "normed modules" this morning because I had some instances in mind</p>



<a name="197745660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745660">(May 15 2020 at 20:01)</a>:</h4>
<p>Then everything would be a module, but print as <code>vector_space</code> if the pretty printer can infer that the base ring is a field.</p>



<a name="197745694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745694">(May 15 2020 at 20:01)</a>:</h4>
<p>(I was going to start a thread discussing it, but here will do.)</p>



<a name="197745806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197745806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197745806">(May 15 2020 at 20:02)</a>:</h4>
<p>Notably:  if E is a normed k-space then C(a, E) is a C(a, k)-module</p>



<a name="197746052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197746052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197746052">(May 15 2020 at 20:04)</a>:</h4>
<p>In that case, one has <code>norm_smul_le</code> rather than <code>norm_smul</code>, i.e., <code>∥c • x∥ ≤ ∥c∥ ∥x∥</code> without equality</p>



<a name="197746141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197746141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197746141">(May 15 2020 at 20:05)</a>:</h4>
<p>So if <code>normed_module</code> becomes the basic object, it should still be with the <code>norm_smul_le</code> axiom rather than the <code>norm_smul</code> axiom, which is only equivalent over fields.</p>



<a name="197746284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197746284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197746284">(May 15 2020 at 20:07)</a>:</h4>
<p>Sure. And <code>norm_smul</code> would be a lemma with the assumption <code>[normed_field k]</code></p>



<a name="197749012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197749012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197749012">(May 15 2020 at 20:32)</a>:</h4>
<p>Hmm.  Won't this break all the existing instances of normed spaces in the library?  They are all constructed by checking the axiom <code>norm_smul</code>.</p>



<a name="197775735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197775735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197775735">(May 16 2020 at 04:15)</a>:</h4>
<p>Yup, that's right. So all their constructions should be prepended with <code>normed_space.mk'</code> or some other name that provided a second constructor.<br>
<span class="user-mention" data-user-id="260507">@Heather Macbeth</span> You might be shocked if you read the defn of metric_space in mathlib. It hardcodes a metric + a topology + proof that they are compatible.<br>
But of course nobody creates metric spaces like that, so there is a 2nd constructor that only asks for a metric.</p>



<a name="197775809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197775809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197775809">(May 16 2020 at 04:17)</a>:</h4>
<p>The reason for this design is: in the case of the product metric/topology, you don't use the 2nd constructor, but fill in all fields by hand. And now the product metric induces a topology that is definitionally the product topology! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="197784778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependency%20problem/near/197784778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependency.20problem.html#197784778">(May 16 2020 at 08:44)</a>:</h4>
<blockquote>
<p>so there is a 2nd constructor that only asks for a metric.</p>
</blockquote>
<p>AFAIR, <code>metric_space</code> is done by using <code>:= </code> and <code>. </code> types, not by a second constructor.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>