---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html">There is no integer y such that y+y=1</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220936841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220936841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220936841">(Dec 25 2020 at 21:26)</a>:</h4>
<p>I'm stuck on this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">this_diophantine_not_solvable</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span><span class="o">:</span><span class="n">ℤ</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">+</span><span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">y</span> <span class="n">py</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>The goal state is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">y</span><span class="o">:</span> <span class="n">ℤ</span>
<span class="n">py</span><span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">false</span>
</code></pre></div>
<p>I don't know where to begin.   <code>ℤ</code> is a simple type to start with.</p>
<p>Generalizing a bit, I see there is a <code>dioph</code> in <code>matlib</code>, but is this theorem available?  If not, any hints on how to prove?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- Linear Diophantine equations ax + by = c are solvable if and only if</span>
<span class="c1">-- the greatest common divisor of a and b divides c</span>
<span class="c1">-- http://mathforum.org/library/drmath/view/51595.html</span>
<span class="c1">-- https://en.wikipedia.org/wiki/Diophantine_equation#One_equation</span>

<span class="kd">theorem</span> <span class="n">solvable_diophantine</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">int.gcd</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">∣</span> <span class="n">c</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="220936980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220936980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220936980">(Dec 25 2020 at 21:30)</a>:</h4>
<p>First you need to figure out the human proof (i.e., the proof that you would see when learning elementary number theory)</p>



<a name="220937111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220937111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220937111">(Dec 25 2020 at 21:34)</a>:</h4>
<p>nat.gcd_eq_gcd_ab might help with the solvable_diophantine theorem</p>



<a name="220937509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220937509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220937509">(Dec 25 2020 at 21:46)</a>:</h4>
<p>Applying <code>even</code> to both sides of <code>py</code> would be a straightforward way to prove that</p>



<a name="220940596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220940596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220940596">(Dec 25 2020 at 23:23)</a>:</h4>
<p>You can show that it is equivalent to <code> ¬ (2 | 1)</code>, and there is a decision procedure for the latter so <code>dec_trivial</code> will prove it</p>



<a name="220940605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220940605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220940605">(Dec 25 2020 at 23:24)</a>:</h4>
<p>or simply <code>¬ even 1</code>, which I'm sure also has a decision procedure</p>



<a name="220940642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220940642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220940642">(Dec 25 2020 at 23:24)</a>:</h4>
<p>in fact it's probably literally a theorem</p>



<a name="220940652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220940652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220940652">(Dec 25 2020 at 23:24)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.not_even_one">docs#nat.not_even_one</a></p>



<a name="220942867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220942867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220942867">(Dec 26 2020 at 00:44)</a>:</h4>
<p>Thanks, I see the theory of <code>even</code> is well developed in <code>mathlib</code>.</p>
<p>For the general case I will follow <span class="user-mention" data-user-id="253861">@Thomas Browning</span> suggestion to translate the <a href="https://en.wikipedia.org/wiki/Diophantine_equation#One_equation">elementary number theory proof</a>.  There seems a fair amount to unpack.  I will look at how <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.not_even_one">docs#nat.not_even_one</a> is proven to look for clues on how to do the general case:<br>
<a href="/user_uploads/3121/uOPUvAl_jbSAPVsDOtK6G-zc/Screenshot-from-2020-12-25-19-44-20.png">Screenshot-from-2020-12-25-19-44-20.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/uOPUvAl_jbSAPVsDOtK6G-zc/Screenshot-from-2020-12-25-19-44-20.png" title="Screenshot-from-2020-12-25-19-44-20.png"><img src="/user_uploads/3121/uOPUvAl_jbSAPVsDOtK6G-zc/Screenshot-from-2020-12-25-19-44-20.png"></a></div>



<a name="220943070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943070">(Dec 26 2020 at 00:52)</a>:</h4>
<p>wait what? It sounds like you are massively overcomplicating things with this diophantine business</p>



<a name="220943082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943082">(Dec 26 2020 at 00:52)</a>:</h4>
<p>divisibility is easily decidable</p>



<a name="220943141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943141">(Dec 26 2020 at 00:54)</a>:</h4>
<p>if you want an elementary proof that there is no integer<code>x</code> such that <code>x + x = 1</code>, observe that either <code>x &lt;= 0</code> or <code>x &gt;= 1</code>, and in the first case <code>x + x &lt;= 0</code> and in the second <code>x + x &gt;= 2</code>, so it can't be 1</p>



<a name="220943208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943208">(Dec 26 2020 at 00:57)</a>:</h4>
<p>If you want Bezout's theorem, you can use nat.gcd_eq_gcd_ab as Thomas suggested, but it's not necessary for your theorem at all</p>



<a name="220943313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943313">(Dec 26 2020 at 01:00)</a>:</h4>
<p>The <code>x+x=1</code> is artificial, I started with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">ℤ_even</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span><span class="o">}</span>
</code></pre></div>
<p>and I rewrote <code>2*y</code> as <code>y+y</code> in the hope that it would make simplification easier.</p>
<p>However now that I know <code>even</code> is defined I can write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">ℤ_even</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">even</span> <span class="n">x</span><span class="o">}</span>
</code></pre></div>
<p>and directly apply the available theorems in <code>mathlib</code> for even, so it takes me out of the Diophantine equation business.</p>
<p>I just threw in the general case <code>a * x + b * y = c</code> to look more eager to drown myself in the details of a Number Theory course I took in 1982 from a guy named <a href="https://www.legacy.com/obituaries/postgazette/obituary.aspx?n=oswald-wyler&amp;pid=18457942">Oswald Wyler</a> whose favorite thing to say was "I like the integers".</p>



<a name="220943426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943426">(Dec 26 2020 at 01:04)</a>:</h4>
<p>Take a look at the definition of divisibility. It is exactly the same as your <code>Z_even</code> up to commutation</p>



<a name="220943437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943437">(Dec 26 2020 at 01:05)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_has_dvd">docs#monoid_has_dvd</a></p>



<a name="220943476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943476">(Dec 26 2020 at 01:06)</a>:</h4>
<p>actually I take it back, it's exactly the same: Z_even is defeq to <code>{x | 2 \| x}</code></p>



<a name="220943482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943482">(Dec 26 2020 at 01:07)</a>:</h4>
<p>and there is a decision procedure for divides, hence <code>not (2 \| 1)</code> is true by dec_trivial</p>



<a name="220943527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220943527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220943527">(Dec 26 2020 at 01:08)</a>:</h4>
<p>it's also defeq to <code>{x | even x}</code></p>



<a name="220945260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/There%20is%20no%20integer%20y%20such%20that%20y%2By%3D1/near/220945260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/There.20is.20no.20integer.20y.20such.20that.20y.2By.3D1.html#220945260">(Dec 26 2020 at 02:12)</a>:</h4>
<p>DONE</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ℤ_even_is_not_a_submonoid</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">is_submonoid</span> <span class="o">{</span><span class="n">x</span><span class="o">:</span><span class="n">ℤ</span>  <span class="bp">|</span> <span class="mi">2</span> <span class="bp">∣</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">h1.one_mem</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h3</span> <span class="o">:=</span> <span class="n">int.not_even_one</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h3</span> <span class="n">h2</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Since <code>submonoid</code> is required for <code>integral_domain</code> I guess that's good  enough to prove that <code>{x:ℤ  | 2 ∣ x} </code> is not an integral domain.</p>
<p>Here are related tangents I will drop:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">solvable_diophantine</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span>
       <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">int.gcd</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">∣</span> <span class="n">c</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">theorem</span> <span class="n">ℝ_1_is_unique</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">u</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="n">u</span><span class="bp">=</span><span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h2</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">ℝ_0_is_unique</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span>
      <span class="n">z</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>
      <span class="n">x</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">∧</span>
      <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">)))</span>
    <span class="bp">→</span> <span class="n">z</span><span class="bp">=</span><span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h2</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>But on the third hand it is not completely automated because first I try to do <code>is_integral_domain</code> and it says "well I want an <code>is_monoid</code>" so then I manually rewrite the proof to <code>is_submonoid</code>.  This involves a manual rewriting step.  There doesn't seem to be a way to write that as code.</p>
<p>So that part is in my head instead of being a checkable proof step.</p>
<p>So the next one comes easier</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ex6b</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">is_subring</span> <span class="o">{</span><span class="n">x</span><span class="o">:</span><span class="n">ℤ</span> <span class="bp">|</span> <span class="n">odd</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">h1.to_is_add_subgroup.to_is_add_submonoid.zero_mem</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">assumption</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>but it has that missing proof step because if I start with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ex6b</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">is_integral_domain</span> <span class="o">{</span><span class="n">x</span><span class="o">:</span><span class="n">ℤ</span> <span class="bp">|</span> <span class="n">odd</span> <span class="n">x</span><span class="o">}</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>then I get the error message</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="bp">⊢</span> <span class="n">ring</span> <span class="bp">↥</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">|</span> <span class="n">odd</span> <span class="n">x</span><span class="o">}</span>
</code></pre></div>
<p>So then I manually rewrite the theorem to be <code>is_subring</code>.</p>
<p>Is there any way to automate this issue of the missing sub-instance when I am trying to prove that a set is not an instance of an algebraic structure type?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>