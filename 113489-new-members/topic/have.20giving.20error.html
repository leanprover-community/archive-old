---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/have.20giving.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html">have giving error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198822191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822191">(May 26 2020 at 21:11)</a>:</h4>
<p>the expression</p>
<div class="codehilite"><pre><span></span><code><span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">,</span>
</code></pre></div>


<p>introduces a weird forall, and the expression</p>
<div class="codehilite"><pre><span></span><code><span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">,</span>
</code></pre></div>


<p>gives an error at the third multiplication symbol. Why is this happening and how can it be avoided?</p>



<a name="198822487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822487">(May 26 2020 at 21:13)</a>:</h4>
<p>What's the error?</p>



<a name="198822510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822510">(May 26 2020 at 21:13)</a>:</h4>
<p>Probably adding parentheses will help</p>



<a name="198822555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822555">(May 26 2020 at 21:14)</a>:</h4>
<p>I don't know how <code>*</code>, <code>→</code> and <code>=</code> bind... but I guess not the way we're hoping (-;</p>



<a name="198822657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822657">(May 26 2020 at 21:14)</a>:</h4>
<p>parentheses don't seem to change anything:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="o">(((</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))),</span>
<span class="kn">end</span>
</code></pre></div>


<p>this still gives the error<br>
type mismatch at application<br>
  has_mul.mul a<br>
term<br>
  a<br>
has type<br>
  a * b = a * b : Prop<br>
but is expected to have type<br>
  ?m_1 : Type ?</p>



<a name="198822838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822838">(May 26 2020 at 21:16)</a>:</h4>
<p>Aha, the "a" bug</p>



<a name="198822849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822849">(May 26 2020 at 21:16)</a>:</h4>
<p>For reference,</p>
<div class="codehilite"><pre><span></span><code>  <span class="k">let</span> <span class="n">a</span> <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">b</span> <span class="o">:=</span> <span class="mi">1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="o">((</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span>  <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)),</span>
</code></pre></div>


<p>gives a state with the goal</p>
<div class="codehilite"><pre><span></span><code><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">),</span> <span class="n">a_1</span> <span class="bp">=</span> <span class="n">a_1</span>
</code></pre></div>



<a name="198822918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822918">(May 26 2020 at 21:17)</a>:</h4>
<p>The <code>a</code> bug! Long time no see</p>



<a name="198822924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822924">(May 26 2020 at 21:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">c</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="o">(((</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))),</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198822933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822933">(May 26 2020 at 21:18)</a>:</h4>
<p>For some reason, only in tactic mode, <code>have h : a * b = a * b → a = a</code> means <code>have h : \Pi (a : a * b = a * b), a = a</code></p>



<a name="198822977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198822977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198822977">(May 26 2020 at 21:18)</a>:</h4>
<p>this is pretty wild</p>



<a name="198823000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823000">(May 26 2020 at 21:18)</a>:</h4>
<p>Gaabrieeeel?</p>



<a name="198823016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823016">(May 26 2020 at 21:18)</a>:</h4>
<p>I've been meaning to change the implicit <code>H</code> to <code>_H</code> or something, but I totally forgot about this one.</p>



<a name="198823042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823042">(May 26 2020 at 21:19)</a>:</h4>
<p>I think it should be renamed to <code>\Pi (a_bug : etc...)</code></p>



<a name="198823065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823065">(May 26 2020 at 21:19)</a>:</h4>
<p>Wow, so is this only a problem because <code>a</code> is the default name? Funny (and horrifying).</p>



<a name="198823222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823222">(May 26 2020 at 21:20)</a>:</h4>
<p>so I guess I'll just do</p>
<div class="codehilite"><pre><span></span><code><span class="n">rename</span> <span class="n">a</span> <span class="n">c</span>
</code></pre></div>


<p>weird</p>



<a name="198823224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823224">(May 26 2020 at 21:21)</a>:</h4>
<p>Is it the same as <a href="https://github.com/leanprover-community/lean/issues/130">lean#130</a>?</p>



<a name="198823225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823225">(May 26 2020 at 21:21)</a>:</h4>
<p>This won't let you prove <code>false</code> however</p>



<a name="198823298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823298">(May 26 2020 at 21:21)</a>:</h4>
<p>I'm writing this because Pedro comes from Coq where bugs usually let you prove <code>false</code>.</p>



<a name="198823304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823304">(May 26 2020 at 21:21)</a>:</h4>
<p>Does this variable even get a name at all when in term mode?</p>



<a name="198823383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198823383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198823383">(May 26 2020 at 21:22)</a>:</h4>
<p>Soon Sebastian will come here and tell us everything about hygiene</p>



<a name="198834091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198834091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198834091">(May 26 2020 at 23:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113489-new-members/topic/have.20giving.20error/near/198823224">said</a>:</p>
<blockquote>
<p>Is it the same as <a href="https://github.com/leanprover-community/lean/issues/130">lean#130</a>?</p>
</blockquote>
<p>No, that's the <code>H</code> bug :-) The <code>a</code> bug is <a href="https://github.com/leanprover-community/mathlib/issues/1285">#1285</a></p>



<a name="198836293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198836293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198836293">(May 26 2020 at 23:59)</a>:</h4>
<p><span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>  I meant "the same" in a very loose sense, of course. Definitely much looser than "the mathematician's equals".</p>



<a name="198839333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198839333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198839333">(May 27 2020 at 00:45)</a>:</h4>
<p>Coq adds some numeric suffix to the name of the new variable in cases like these two.</p>



<a name="198846502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198846502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198846502">(May 27 2020 at 03:31)</a>:</h4>
<p>Amusingly, if I recall correctly, Agda sometimes disambiguates by incrementing numbers at the end of identifiers - can lead to confusion with terms called <code>a=1</code> and that kind of thing</p>



<a name="198847629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198847629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198847629">(May 27 2020 at 04:03)</a>:</h4>
<p>Lean does this too, but the sequence is something like <code>a</code> <code>a_2</code> <code>a_3</code> ...</p>



<a name="198847757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198847757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198847757">(May 27 2020 at 04:06)</a>:</h4>
<p>AFAIR coq takes the next <em>unused</em> name from the sequence.</p>



<a name="198847760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198847760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198847760">(May 27 2020 at 04:06)</a>:</h4>
<p>It has something like <code>mk_fresh_name prefix</code> (not sure about name).</p>



<a name="198847768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/have%20giving%20error/near/198847768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/have.20giving.20error.html#198847768">(May 27 2020 at 04:07)</a>:</h4>
<p>I think lean also has something like this, but it isn't used in all circumstances, and this is one of them</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>