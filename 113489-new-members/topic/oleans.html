---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/oleans.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html">oleans</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231684333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231684333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231684333">(Mar 24 2021 at 18:23)</a>:</h4>
<p>What should I read to understand how Lean decides whether an olean (presumably one fetched out of band) is acceptable for the .lean file it sits near? Is there a "magic number" or equivalent that takes into account the Lean interpreter version? Presumably there's a checksum on the file contents? The X to this Y is I'm recently [last 2 weeks?] noticing much more compilation happening when I use <code>leanproject</code> to fetch mathlib cached oleans (where I've made no changes).</p>



<a name="231685230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685230">(Mar 24 2021 at 18:28)</a>:</h4>
<p>I don't think this is documented anywhere outside of the code. <a href="https://github.com/leanprover-community/lean/issues/140">lean#140</a> by <span class="user-mention" data-user-id="128280">@Wojciech Nawrocki</span> would be where I'd start investigating.</p>



<a name="231685371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685371">(Mar 24 2021 at 18:29)</a>:</h4>
<p>Thanks! The thing I particularly want to check is whether platform architecture is somehow part of it -- in particular I notice this on my M1, and not on my intel mac (though it's possible I've somehow broken the setup in an unrelated way). Will start by reading there, appreciated.</p>



<a name="231685715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685715">(Mar 24 2021 at 18:31)</a>:</h4>
<p>As far as I know platform architecture isn't supposed to matter in Lean 3, so it's interesting if that somehow changed on M1.</p>



<a name="231685817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685817">(Mar 24 2021 at 18:32)</a>:</h4>
<p>A haaaa I found it.</p>



<a name="231685858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685858">(Mar 24 2021 at 18:32)</a>:</h4>
<p>Platform is not it, but platform caused the it. (Sorry, I should have found this by just opening the olean in vim)</p>



<a name="231685891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685891">(Mar 24 2021 at 18:32)</a>:</h4>
<p>I had to start compiling lean myself because the version on GH somehow recently stopped working for reasons I didn't diagnose</p>



<a name="231685935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685935">(Mar 24 2021 at 18:33)</a>:</h4>
<p>And .oleans contain not just the version but the <em>full</em> version it seems</p>



<a name="231685980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685980">(Mar 24 2021 at 18:33)</a>:</h4>
<p>Specifically I see in the file: <code>3.28.0, commit 5a3bb32c05bc</code></p>



<a name="231685999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231685999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231685999">(Mar 24 2021 at 18:33)</a>:</h4>
<p>and I compiled some commit 1 or 2 commits past that probably</p>



<a name="231686108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231686108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231686108">(Mar 24 2021 at 18:34)</a>:</h4>
<p>Yep, this is something we've talked about removing in the past, but it hasn't been high on the list.</p>



<a name="231686166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/oleans/near/231686166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/oleans.html#231686166">(Mar 24 2021 at 18:34)</a>:</h4>
<p>Got it, ok, lesson learned, I'll go compile the release commit</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>