---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/failed.20to.20open.20file.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html">failed to open file</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197781598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197781598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197781598">(May 16 2020 at 07:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">read_file</span> <span class="s2">&quot;{any file}&quot;</span>
</code></pre></div>



<a name="197781600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197781600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197781600">(May 16 2020 at 07:12)</a>:</h4>
<p>I can't get it to read any file</p>



<a name="197781604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197781604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197781604">(May 16 2020 at 07:12)</a>:</h4>
<p>it says <code>failed to open file {file name}</code></p>



<a name="197781617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197781617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197781617">(May 16 2020 at 07:13)</a>:</h4>
<p>do I need to give the full address? is it in <code>/c/</code> convention or <code>C:\</code> convention?</p>



<a name="197782646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782646">(May 16 2020 at 07:47)</a>:</h4>
<p>I got the error to go away by providing the full path, with the <code>C:\</code> convention</p>



<a name="197782689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782689">(May 16 2020 at 07:48)</a>:</h4>
<p>But there's no output with the <code>#eval</code></p>



<a name="197782714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782714">(May 16 2020 at 07:49)</a>:</h4>
<p>you actually used the <code>C:\\</code> convention didn't you</p>



<a name="197782721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782721">(May 16 2020 at 07:49)</a>:</h4>
<p>Yeah</p>



<a name="197782726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782726">(May 16 2020 at 07:49)</a>:</h4>
<p>You need to escape every backslash</p>



<a name="197782769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782769">(May 16 2020 at 07:50)</a>:</h4>
<p>ok that's the first step</p>



<a name="197782770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782770">(May 16 2020 at 07:50)</a>:</h4>
<p>so it outputs <code>io char_buffer</code></p>



<a name="197782771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197782771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197782771">(May 16 2020 at 07:50)</a>:</h4>
<p>which I don't know how to use</p>



<a name="197783025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783025">(May 16 2020 at 07:58)</a>:</h4>
<p>This works (outputs a list of characters), but that's easy to convert to other data types if necessary.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span>

<span class="n">def</span> <span class="n">test</span> <span class="o">(</span><span class="n">file_name</span> <span class="o">:</span> <span class="n">string</span><span class="o">)</span> <span class="o">:</span> <span class="n">io</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span>
  <span class="n">s</span> <span class="bp">&lt;-</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">read_file</span> <span class="n">file_name</span><span class="o">,</span>
  <span class="n">io</span><span class="bp">.</span><span class="kn">print</span> <span class="o">(</span><span class="n">buffer</span><span class="bp">.</span><span class="n">to_list</span> <span class="n">s</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">test</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Shing</span><span class="se">\\</span><span class="s2">Desktop</span><span class="se">\\</span><span class="s2">Test</span><span class="se">\\</span><span class="s2">leanpkg.toml&quot;</span>
</code></pre></div>



<a name="197783032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783032">(May 16 2020 at 07:58)</a>:</h4>
<p>wow thanks!</p>



<a name="197783104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783104">(May 16 2020 at 08:00)</a>:</h4>
<p><span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> do you think you can do the <a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/a.20mutable.20tactic">next step</a> then?</p>



<a name="197783446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783446">(May 16 2020 at 08:08)</a>:</h4>
<p>I don't know. I tried <code>get_line</code> but that just reads the first line of the file every time... Is there a function that keeps track of where it's read so far?</p>



<a name="197783462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783462">(May 16 2020 at 08:08)</a>:</h4>
<p>and <code>io.fs.read</code> seems to start at the beginning every time.</p>



<a name="197783486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783486">(May 16 2020 at 08:09)</a>:</h4>
<p>maybe you can use read/write then?</p>



<a name="197783695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783695">(May 16 2020 at 08:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span>

<span class="n">def</span> <span class="n">test</span> <span class="o">(</span><span class="n">file_name</span> <span class="o">:</span> <span class="n">string</span><span class="o">)</span> <span class="o">:</span> <span class="n">io</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span>
  <span class="n">h</span> <span class="bp">&lt;-</span> <span class="n">io</span><span class="bp">.</span><span class="n">mk_file_handle</span> <span class="n">file_name</span> <span class="n">io</span><span class="bp">.</span><span class="n">mode</span><span class="bp">.</span><span class="n">read</span><span class="o">,</span>
  <span class="n">s</span> <span class="bp">&lt;-</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">get_line</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">char</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">head</span> <span class="o">(</span><span class="n">buffer</span><span class="bp">.</span><span class="n">to_list</span> <span class="n">s</span><span class="o">)),</span>
  <span class="n">h&#39;</span> <span class="bp">&lt;-</span> <span class="n">io</span><span class="bp">.</span><span class="n">mk_file_handle</span> <span class="n">file_name</span> <span class="n">io</span><span class="bp">.</span><span class="n">mode</span><span class="bp">.</span><span class="n">write</span><span class="o">,</span>
  <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">write</span> <span class="n">h&#39;</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">to_buffer</span> <span class="o">[(</span><span class="n">char</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)),</span> <span class="err">&#39;\</span><span class="n">n&#39;</span><span class="o">]),</span>
  <span class="n">io</span><span class="bp">.</span><span class="kn">print</span> <span class="n">k</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">test</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Shing</span><span class="se">\\</span><span class="s2">Desktop</span><span class="se">\\</span><span class="s2">Test</span><span class="se">\\</span><span class="s2">test.txt&quot;</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">test</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Shing</span><span class="se">\\</span><span class="s2">Desktop</span><span class="se">\\</span><span class="s2">Test</span><span class="se">\\</span><span class="s2">test.txt&quot;</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="n">test</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Shing</span><span class="se">\\</span><span class="s2">Desktop</span><span class="se">\\</span><span class="s2">Test</span><span class="se">\\</span><span class="s2">test.txt&quot;</span>
</code></pre></div>


<p>This prints out consecutive numbers (but it doesn't start at 0...)</p>



<a name="197783735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783735">(May 16 2020 at 08:16)</a>:</h4>
<p>I think you can just use <code>k - something</code> though</p>



<a name="197783746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783746">(May 16 2020 at 08:17)</a>:</h4>
<p>that's ok</p>



<a name="197783803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783803">(May 16 2020 at 08:19)</a>:</h4>
<p>Also this isn't storing the number in the file, it's just storing the ASCII (or Unicode idk) of that value, so I don't think the new lines are necessary.</p>



<a name="197783822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783822">(May 16 2020 at 08:19)</a>:</h4>
<p>I just need 35 numbers / different values</p>



<a name="197783871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783871">(May 16 2020 at 08:20)</a>:</h4>
<p>one way is to store stuff in the environment</p>



<a name="197783959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197783959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197783959">(May 16 2020 at 08:22)</a>:</h4>
<p>how do you do that?</p>



<a name="197784157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784157">(May 16 2020 at 08:28)</a>:</h4>
<p>ideally I would want</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">first_time</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">increment</span>
<span class="n">def</span> <span class="n">second_time</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">increment</span>
<span class="n">def</span> <span class="n">third_time</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">increment</span>
</code></pre></div>


<p>to give different results</p>



<a name="197784160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784160">(May 16 2020 at 08:28)</a>:</h4>
<p>up to 35 times</p>



<a name="197784261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784261">(May 16 2020 at 08:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">user_attribute</span><span class="o">]</span>
<span class="n">meta</span> <span class="n">def</span> <span class="n">incr_attr</span> <span class="o">:</span> <span class="n">user_attribute</span> <span class="n">unit</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">name</span>   <span class="o">:=</span> <span class="bp">`</span><span class="n">incrementer</span><span class="o">,</span>
  <span class="n">descr</span>  <span class="o">:=</span> <span class="s2">&quot;incrementer&quot;</span><span class="o">,</span>
  <span class="n">parser</span> <span class="o">:=</span> <span class="n">pure</span> <span class="mi">0</span> <span class="o">}</span>

<span class="kn">open</span> <span class="n">tactic</span>
<span class="n">meta</span> <span class="n">def</span> <span class="n">increment</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">n</span> <span class="err">←</span> <span class="n">incr_attr</span><span class="bp">.</span><span class="n">get_param</span> <span class="bp">`</span><span class="n">increment</span> <span class="bp">&lt;|&gt;</span> <span class="n">pure</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">tactic</span><span class="bp">.</span><span class="n">trace</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">incr_attr</span><span class="bp">.</span><span class="n">set</span> <span class="bp">`</span><span class="n">increment</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">tt</span>

<span class="n">run_cmd</span> <span class="n">increment</span> <span class="c1">-- 0</span>
<span class="n">run_cmd</span> <span class="n">increment</span> <span class="c1">-- 1</span>
<span class="n">run_cmd</span> <span class="n">increment</span> <span class="c1">-- 2</span>
<span class="kn">example</span>   <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 3 -/</span> <span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 4 -/</span> <span class="n">triv</span><span class="o">}</span>
<span class="kn">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 3 -/</span> <span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 4 -/</span> <span class="n">triv</span><span class="o">}</span>
<span class="n">def</span>     <span class="n">U</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 3 -/</span> <span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 4 -/</span> <span class="n">triv</span><span class="o">}</span>
<span class="n">def</span>     <span class="n">V</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 5 -/</span> <span class="n">increment</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 6 -/</span> <span class="n">triv</span><span class="o">}</span>
</code></pre></div>



<a name="197784312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784312">(May 16 2020 at 08:32)</a>:</h4>
<p>wow, thanks!</p>



<a name="197784322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784322">(May 16 2020 at 08:33)</a>:</h4>
<p>If you <code>#print increment</code> you will see the magic: <code>increment</code> sets an attribute on itself when called</p>



<a name="197784365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784365">(May 16 2020 at 08:34)</a>:</h4>
<p>I guess I don't know attributes</p>



<a name="197784371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784371">(May 16 2020 at 08:34)</a>:</h4>
<p>You don't have to use attributes - you could equally well use new definitions</p>



<a name="197784374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784374">(May 16 2020 at 08:34)</a>:</h4>
<p>as in, you create <code>increment_1</code> and <code>increment_2</code> and so on</p>



<a name="197784383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784383">(May 16 2020 at 08:35)</a>:</h4>
<p>then I would need to parse names?</p>



<a name="197784386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784386">(May 16 2020 at 08:35)</a>:</h4>
<p>and each call to the tactic creates a new definition, and then you count how many definitions have been made so far</p>



<a name="197784389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784389">(May 16 2020 at 08:35)</a>:</h4>
<p>neat</p>



<a name="197784391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784391">(May 16 2020 at 08:35)</a>:</h4>
<p>Here you have to run exprs, which is at least as expensive as parsing names</p>



<a name="197784439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784439">(May 16 2020 at 08:36)</a>:</h4>
<p>is there any way to make it an actual definition though? like not just calling <code>tactic.trace</code></p>



<a name="197784443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/failed%20to%20open%20file/near/197784443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/failed.20to.20open.20file.html#197784443">(May 16 2020 at 08:36)</a>:</h4>
<p>Note that the changes don't stick when the call is inside an <code>example</code> or <code>theorem</code>, because the environment is rolled back after elaboration</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>