---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html">zero divisors and nilpotents</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197860872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197860872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197860872">(May 17 2020 at 17:53)</a>:</h4>
<p>Which definition would be considered better:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">is_nilpotent</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">def</span> <span class="n">is_nilpotent&#39;</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>



<a name="197860880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197860880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197860880">(May 17 2020 at 17:53)</a>:</h4>
<p>Top one</p>



<a name="197860892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197860892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197860892">(May 17 2020 at 17:54)</a>:</h4>
<p>The bottom one would be hard to use because in most cases Lean would not be able to guess <code>n</code>.</p>



<a name="197860932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197860932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197860932">(May 17 2020 at 17:54)</a>:</h4>
<p>The bottom one would force the user to know the witness to nilpotence, right?</p>



<a name="197860935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197860935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197860935">(May 17 2020 at 17:54)</a>:</h4>
<p>^^</p>



<a name="197864415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864415">(May 17 2020 at 19:10)</a>:</h4>
<p>I've almost proved that nonzero nilpotents are zero divisors, I just need to prove</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">nonzero_nilpotent_has_nonzero_power</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">is_nilpotent</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>to get it, but I'm stumped. I want to find <code>m</code> by taking the minimum of the set (type?) <code>{ n : ℕ | a^n = 0 }</code>, but I'm not sure how to set that up. Here's where I'm at so far:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">associated</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> An element a of a ring α is a zero divisor if there exists a b ∈ α</span>
<span class="cm">   such that b ≠ 0 and ab = 0. -/</span>
<span class="n">def</span> <span class="n">is_zero_divisor</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="c">/-</span><span class="cm"> An element a of a ring α is nilpotent if there exists a n ∈ ℕ such</span>
<span class="cm">   that n ≠ 0 and a^n = 0 -/</span>
<span class="n">def</span> <span class="n">is_nilpotent</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="c">/-</span><span class="cm"> If a is a nonzero nilpotent, then we can find a nonzero natural m</span>
<span class="cm">  such that a^m ≠ 0 and a^n = 0 for all n &gt; m. -/</span>
<span class="kn">theorem</span> <span class="n">nonzero_nilpotent_has_nonzero_power</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">is_nilpotent</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">is_nilpotent</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">hanz</span> <span class="n">hanlp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">set</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">|</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>I apparently can't just write <code>min set</code> to get the minimum because lean can't find an instance of a <code>decidable_linear_order</code> for <code>N</code>. Any advice?</p>



<a name="197864487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864487">(May 17 2020 at 19:13)</a>:</h4>
<p>Try going classical, it might be the decidability that causes issues</p>



<a name="197864548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864548">(May 17 2020 at 19:15)</a>:</h4>
<p>Sorry, can you be more specific?</p>



<a name="197864551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864551">(May 17 2020 at 19:15)</a>:</h4>
<p>In this specific case though, <code>nat.find</code> is what you probably should use</p>



<a name="197864684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864684">(May 17 2020 at 19:18)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="k">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">is_nilpotent</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">hanz</span> <span class="n">hanlp</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">property</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">there_is_some</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span><span class="o">,</span> <span class="n">property</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="n">there_is_some</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_spec</span> <span class="n">there_is_some</span><span class="o">,</span>

<span class="kn">end</span>
</code></pre></div>



<a name="197864698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864698">(May 17 2020 at 19:19)</a>:</h4>
<p>Here's a sketch of how you might use <code>nat.find</code></p>



<a name="197864711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864711">(May 17 2020 at 19:19)</a>:</h4>
<p>(in your case, the property maybe should be <code>a^n ≠ 0</code>, I haven't checked)</p>



<a name="197864752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864752">(May 17 2020 at 19:20)</a>:</h4>
<p>I guess it could just be the existential in <code>is_nilpotent</code>: <code>∃ n : ℕ, n ≠ 0 ∧ a ^ n = 0</code></p>



<a name="197864753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864753">(May 17 2020 at 19:20)</a>:</h4>
<p>That could work too</p>



<a name="197864763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197864763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197864763">(May 17 2020 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="294709">@Aniruddh Agarwal</span>, you might also like to note that I used <code>let</code> instead of <code>have</code> sometimes - <code>have</code> doesn't keep track of the actual definition, just its type (so it's the right sort of thing for properties, since we don't care about what the actual proof was) but <code>let</code> does keep track of how it was defined</p>



<a name="197865067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197865067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197865067">(May 17 2020 at 19:29)</a>:</h4>
<p><code>n ≠ 0</code> is unnecessary; is there a reason to include it?</p>



<a name="197865524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197865524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197865524">(May 17 2020 at 19:39)</a>:</h4>
<p>In this case you probably want to find the least <code>m</code> such that <code>a^(m+1)=0</code></p>



<a name="197868387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197868387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197868387">(May 17 2020 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> I've slightly modified your sketch to get to</p>
<div class="codehilite"><pre><span></span><code><span class="k">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">is_nilpotent</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">hanz</span> <span class="n">hanlp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">there_is_some</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_min&#39;</span> <span class="n">there_is_some</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>which is <em>almost</em> what I want, except that <code>m</code>'s type</p>
<div class="codehilite"><pre><span></span><code><span class="n">m</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="err">?</span><span class="n">m_1</span> <span class="bp">→</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="n">there_is_some</span> <span class="bp">≤</span> <span class="err">?</span><span class="n">m_1</span>
</code></pre></div>


<p>contains a dummy variable <code>?m_1</code></p>



<a name="197868458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197868458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197868458">(May 17 2020 at 20:55)</a>:</h4>
<p>The dummy variable represents a natural you haven't chosen yet</p>



<a name="197868475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197868475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197868475">(May 17 2020 at 20:55)</a>:</h4>
<p>Once the dummy variable is picked (I'll call it <code>t</code>), <code>m</code> would have type <code>a^(t + 1) = 0 → nat.find there_is_some ≤ t</code></p>



<a name="197868592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197868592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197868592">(May 17 2020 at 20:58)</a>:</h4>
<p>Have a look at the functions around <code>nat.find</code> to see what you're given to work with:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">protected</span> <span class="n">def</span> <span class="n">find</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_x</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">protected</span> <span class="kn">theorem</span> <span class="n">find_spec</span> <span class="o">:</span> <span class="n">p</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_x</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">left</span>

<span class="kn">protected</span> <span class="kn">theorem</span> <span class="n">find_min</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">},</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="bp">→</span> <span class="bp">¬</span><span class="n">p</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_x</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">right</span>

<span class="kn">protected</span> <span class="kn">theorem</span> <span class="n">find_min&#39;</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="bp">≤</span> <span class="n">m</span> <span class="o">:=</span>
<span class="n">le_of_not_gt</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">l</span><span class="o">,</span> <span class="n">find_min</span> <span class="n">l</span> <span class="n">h</span><span class="o">)</span>
</code></pre></div>



<a name="197871555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197871555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197871555">(May 17 2020 at 22:11)</a>:</h4>
<p>I'm still confused and unable to get the minimum of that set out using those functions around <code>nat.find</code> :/</p>



<a name="197871744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197871744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197871744">(May 17 2020 at 22:15)</a>:</h4>
<p>Look at the type of <code>nat.find</code>. That tells you what it does. What is your exact problem? Post some working code</p>



<a name="197872926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197872926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197872926">(May 17 2020 at 22:46)</a>:</h4>
<p>There is where I'm currently stuck:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">associated</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> An element a of a ring α is nilpotent if there exists a n ∈ ℕ such</span>
<span class="cm">   that a^n = 0. -/</span>
<span class="n">def</span> <span class="n">is_nilpotent</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="c">/-</span><span class="cm"> If a is a nonzero nilpotent, then we can find a nonzero natural m</span>
<span class="cm">  such that a^m ≠ 0 and a^n = 0 for all n &gt; m. -/</span>
<span class="kn">theorem</span> <span class="n">nonzero_nilpotent_has_nonzero_power</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">is_nilpotent</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">is_nilpotent</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">hanz</span> <span class="n">hanlp</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">there_is_some</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hanlp</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">n</span> <span class="k">with</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">bad</span> <span class="o">:=</span> <span class="n">hn</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
  <span class="n">contradiction</span><span class="o">,</span>
  <span class="n">constructor</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hn</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="n">there_is_some</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hm</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_min&#39;</span> <span class="n">there_is_some</span><span class="o">,</span>
  <span class="n">constructor</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="c1">-- I want to show that m satisfies a^(m+1)=0</span>
  <span class="n">sorry</span><span class="o">,</span>
  <span class="n">sorry</span><span class="o">,</span>
  <span class="n">sorry</span><span class="o">,</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197872937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197872937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197872937">(May 17 2020 at 22:47)</a>:</h4>
<p>Can we please change the definition of nilpotent by dropping the n != 0 condition?</p>



<a name="197872941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197872941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197872941">(May 17 2020 at 22:47)</a>:</h4>
<p>It just makes things harder</p>



<a name="197872989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197872989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197872989">(May 17 2020 at 22:49)</a>:</h4>
<p>oh but then your proof will need refactoring</p>



<a name="197873045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873045">(May 17 2020 at 22:50)</a>:</h4>
<p>You forgot to use <code>nat.find_spec</code></p>



<a name="197873099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873099">(May 17 2020 at 22:51)</a>:</h4>
<p>Do you need this statement? How about there exists <code>m</code> such that <code>a^m = 0</code> and <code>a^n \ne 0</code> for <code>n &lt; m</code>?</p>



<a name="197873134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873134">(May 17 2020 at 22:52)</a>:</h4>
<p>Yes what you're doing does look like an unnatural thing to prove</p>



<a name="197873249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873249">(May 17 2020 at 22:53)</a>:</h4>
<p><code>let m := nat.find there_is_some,</code> not <code>have</code></p>



<a name="197873476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873476">(May 17 2020 at 22:57)</a>:</h4>
<p>Reid's suggestion is better because it doesn't involve this unnatural hypothesis about a being non-zero.</p>



<a name="197873575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873575">(May 17 2020 at 22:59)</a>:</h4>
<p>Why not fix the definition of nilpotent and then prove what Reid suggests?</p>



<a name="197873857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197873857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197873857">(May 17 2020 at 23:02)</a>:</h4>
<p>The trick with these things is to find the right statement which doesn't have special cases such as "doesn't work if a=0".</p>



<a name="197874002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874002">(May 17 2020 at 23:05)</a>:</h4>
<p>How about <code>\exists m, \forall n, a^n = 0 &lt;-&gt; m &lt;= n</code></p>



<a name="197874082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874082">(May 17 2020 at 23:06)</a>:</h4>
<p>everything is better with iff</p>



<a name="197874126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874126">(May 17 2020 at 23:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">associated</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="n">open_locale</span> <span class="n">classical</span>

<span class="c">/-</span><span class="cm"> An element a of a ring α is nilpotent if there exists a n ∈ ℕ such</span>
<span class="cm">   that a^n = 0. -/</span>
<span class="n">def</span> <span class="n">is_nilpotent</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="c">/-</span><span class="cm"> If a is a nonzero nilpotent, then we can find a nonzero natural m</span>
<span class="cm">  such that a^m ≠ 0 and a^n = 0 for all n &gt; m. -/</span>
<span class="kn">theorem</span> <span class="n">nonzero_nilpotent_has_nonzero_power</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">is_nilpotent</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">^</span><span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintros</span> <span class="n">a</span> <span class="n">hna</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="n">hna</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_spec</span> <span class="n">hna</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find_min</span> <span class="n">hna</span><span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197874139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874139">(May 17 2020 at 23:07)</a>:</h4>
<p>Reid's version comes out really nicely.</p>



<a name="197874214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874214">(May 17 2020 at 23:08)</a>:</h4>
<p>Mario's version will also come out nicely</p>



<a name="197874727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197874727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197874727">(May 17 2020 at 23:20)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="gd">-  such that a^m ≠ 0 and a^n = 0 for all n &gt; m. -/</span>
<span class="gi">+  such that a^m = 0 and a^n ≠ 0 for all n &lt; m. -/</span>
</code></pre></div>



<a name="197911714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197911714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197911714">(May 18 2020 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="294709">@Aniruddh Agarwal</span> here is a way of thinking about all this. You want to find a way of expressing, in Lean, the following idea: if a is nilpotent, and you look at the function from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>T</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{T,F\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mclose">}</span></span></span></span> which sends <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> to the truth-value of the question "Is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>n</mi></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a^n=0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>?", then this function looks like "F,F,F,...,F,...,F,T,T,T,...,T,T,...". This is an idea, not a formalised statement. There are lots of different ways to formalise it. You chose one way, which treated the case a=0 as a special case (where the function looks like "T,T,T,T,..." or "F,T,T,T,..." depending on whether R is the zero ring or not) but one could just as well prove the lemma that said that a=0 iff a^n=0 for all n&gt;=1, which would be a much nicer way of dealing with a=0 rather than trying to formalise something general and then leaving out the a=0 case. Leaving in a=0 for now, we want to formalise the idea that there will be 0 or more F's, but a finite number, followed by a bunch of T's. Because 0 F's is possible (if R=0 and a=0) we should let the "key" natural number be the first T, rather than the last F (which might not exist in general). If you are in a situation where you want the index of the last F assuming a isn't zero, you'll be able to get it by subtracting 1 from the first T. But the more natural lemma is the one which applies for all a, rather than just non-zero a. </p>
<p>In short, the lemmas which one wants to formalise are the ones with the most natural statements and the fewest edge cases.</p>



<a name="197933370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197933370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197933370">(May 18 2020 at 13:23)</a>:</h4>
<p>of course the things kevin says about picking natural statements is also true when doing "paper maths", but human mathematicians can elaborate away the "trivial" edge-cases</p>



<a name="197978933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197978933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197978933">(May 18 2020 at 18:42)</a>:</h4>
<p>:sigh: I finally finished the proof that nonzero nilpotents are zero divisors: <a href="https://github.com/anrddh/commutative-algebra-playground/blob/master/src/zero_divisors_and_nilpotents.lean#L45">https://github.com/anrddh/commutative-algebra-playground/blob/master/src/zero_divisors_and_nilpotents.lean#L45</a></p>



<a name="197979160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197979160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197979160">(May 18 2020 at 18:45)</a>:</h4>
<p>Thanks all for your substantial help</p>



<a name="197980316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197980316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197980316">(May 18 2020 at 18:54)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">nz_nilpotent_is_zerodivisor</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">is_nilpotent</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">is_zero_divisor</span> <span class="n">a</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintros</span> <span class="n">a</span> <span class="n">ha</span> <span class="n">ha&#39;</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">exists_min_pow_zero_of_nilpotent</span> <span class="n">a</span> <span class="n">ha</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">hm1</span><span class="o">,</span> <span class="n">hm2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">m</span> <span class="k">with</span> <span class="n">m</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- a^0=0 can&#39;t happen</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">ha&#39;</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">eq_zero_of_zero_eq_one</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">hm1</span><span class="o">,</span>
    <span class="n">refl</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">use</span> <span class="n">a</span><span class="bp">^</span><span class="n">m</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">hm2</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">lt_add_one</span> <span class="n">m</span>
    <span class="o">},</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">hm1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">pow_succ</span>
  <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197980431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197980431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197980431">(May 18 2020 at 18:55)</a>:</h4>
<p>You shouldn't really use <code>simp</code> in the middle of proofs, they will break later on as <code>simp</code> gets smarter.</p>



<a name="197981399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197981399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197981399">(May 18 2020 at 19:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> All nonzero nilpotents are zerodivisors. -/</span>
<span class="kn">theorem</span> <span class="n">nz_nilpotent_is_zerodivisor</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">is_nilpotent</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">ha&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_zero_divisor</span> <span class="n">a</span>
<span class="o">:=</span>
<span class="k">let</span> <span class="bp">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">hm1</span><span class="o">,</span> <span class="n">hm2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">exists_min_pow_zero_of_nilpotent</span> <span class="n">a</span> <span class="n">ha</span> <span class="k">in</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">m</span> <span class="k">with</span> <span class="n">m</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">ha&#39;</span> <span class="o">(</span><span class="n">eq_zero_of_zero_eq_one</span> <span class="bp">_</span> <span class="n">hm1</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">_</span><span class="o">))},</span><span class="c1">-- a^0=0 can&#39;t happen</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">a</span><span class="bp">^</span><span class="n">m</span><span class="o">,</span> <span class="n">hm2</span> <span class="bp">_</span> <span class="o">(</span><span class="n">lt_add_one</span> <span class="n">m</span><span class="o">),</span> <span class="n">hm1</span><span class="bp">⟩</span><span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197981941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197981941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197981941">(May 18 2020 at 19:06)</a>:</h4>
<p>I can't figure out how to get the <code>cases</code> into term mode, but if I could this could be a completely term mode proof. The term proof is the same as the tactic proof, each tactic can be turned into a term.</p>



<a name="197981987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197981987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197981987">(May 18 2020 at 19:06)</a>:</h4>
<p>Note that it's perfectly fine to use <code>simp</code> if you phrase things so that <code>simp</code> is doing something <em>specific</em>. For example, <code>have something : foo, by simp</code> is safe: even if <code>simp</code> gets smarter, it's not going to start doing awful things to your proof state, because it's been restricted to this one little fragment of proof.</p>



<a name="197982121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197982121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197982121">(May 18 2020 at 19:08)</a>:</h4>
<p>(Although for efficiency, mathlib uses <code>squeeze_simp</code> to discover a more minimal subset of things that <code>simp</code> would use, and then restricts the call to <code>simp</code> using <code>only</code> so that it only uses those things)</p>



<a name="197983033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197983033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197983033">(May 18 2020 at 19:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents/near/197981941">said</a>:</p>
<blockquote>
<p>I can't figure out how to get the <code>cases</code> into term mode, but if I could this could be a completely term mode proof. The term proof is the same as the tactic proof, each tactic can be turned into a term.</p>
</blockquote>
<p>I'm not sure it's possible, although my confidence here is weak - <code>exists_min_pow_zero_of_nilpotent</code> has output a <code>Prop</code> existential, but to extract anything from this in term mode you'd need a <code>Type</code>, wouldn't you?</p>



<a name="197984105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197984105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197984105">(May 18 2020 at 19:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> <a href="#narrow/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents/near/197983033">said</a>:</p>
<blockquote>
<p>I'm not sure it's possible, although my confidence here is weak - <code>exists_min_pow_zero_of_nilpotent</code> has output a <code>Prop</code> existential, but to extract anything from this in term mode you'd need a <code>Type</code>, wouldn't you?</p>
</blockquote>
<p>I don't know, this is all a bit CS for me.</p>



<a name="197984885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197984885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197984885">(May 18 2020 at 19:33)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> All nonzero nilpotents are zerodivisors. -/</span>
<span class="kn">theorem</span> <span class="n">nz_nilpotent_is_zerodivisor&#39;</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">is_nilpotent</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">ha&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_zero_divisor</span> <span class="n">a</span>
<span class="o">:=</span> <span class="k">match</span> <span class="n">exists_min_pow_zero_of_nilpotent</span> <span class="n">a</span> <span class="n">ha</span> <span class="k">with</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="n">hm1</span><span class="o">,</span> <span class="n">hm2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">ha&#39;</span> <span class="o">(</span><span class="n">eq_zero_of_zero_eq_one</span> <span class="bp">_</span> <span class="n">hm1</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">_</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">hm1</span><span class="o">,</span> <span class="n">hm2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">a</span><span class="bp">^</span><span class="n">m</span><span class="o">,</span> <span class="n">hm2</span> <span class="bp">_</span> <span class="o">(</span><span class="n">lt_add_one</span> <span class="n">m</span><span class="o">),</span> <span class="n">hm1</span><span class="bp">⟩</span>
<span class="kn">end</span>
</code></pre></div>


<p>terms are love, terms  are life</p>



<a name="197988965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20divisors%20and%20nilpotents/near/197988965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents.html#197988965">(May 18 2020 at 20:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> <a href="#narrow/stream/113489-new-members/topic/zero.20divisors.20and.20nilpotents/near/197983033">said</a>:</p>
<blockquote>
<p>I'm not sure it's possible, although my confidence here is weak - <code>exists_min_pow_zero_of_nilpotent</code> has output a <code>Prop</code> existential, but to extract anything from this in term mode you'd need a <code>Type</code>, wouldn't you?</p>
</blockquote>
<p><code>exists_min_pow_zero_of_nilpotent</code> can be proven in <code>Type</code>, since it has an explicit witness, namely <code>nat.find</code> of some stuff</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>