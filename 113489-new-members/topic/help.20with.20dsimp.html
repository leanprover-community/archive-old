---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/help.20with.20dsimp.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html">help with dsimp</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="309915535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309915535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> King Crawford <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309915535">(Nov 14 2022 at 17:47)</a>:</h4>
<p>I have this goal:<br>
⊢ (λ (i : ℕ), ∃! (H : i ∈ finset.range n), ∑ (j : ℕ) in finset.range n, f j = f i) c<br>
I want to beta reduce it to <br>
⊢ ∃! (H : c ∈ finset.range n), ∑ (j : ℕ) in finset.range n, f j = f c<br>
dsimp gives me the following which isn't quite what I'm looking for<br>
⊢ ∃! (H : c ∈ finset.range n), (finset.range n).sum f = f c<br>
Is there a way to do this?</p>



<a name="309916304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309916304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309916304">(Nov 14 2022 at 17:51)</a>:</h4>
<p>You could <code>show &lt;your desired expression&gt;</code></p>



<a name="309916346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309916346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309916346">(Nov 14 2022 at 17:51)</a>:</h4>
<p>Or maybe <code>dsimp only</code> is slightly less aggressive?</p>



<a name="309916693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309916693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> King Crawford <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309916693">(Nov 14 2022 at 17:53)</a>:</h4>
<p>dsimp only does the same thing unfortunately, but show worked. I didn't know about show. Thanks!</p>



<a name="309916908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309916908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309916908">(Nov 14 2022 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/help.20with.20dsimp/near/309916304">said</a>:</p>
<blockquote>
<p>You could <code>show &lt;your desired expression&gt;</code></p>
</blockquote>
<p>What is the difference between <code>change</code> and <code>show</code> for these purposes?</p>



<a name="309917204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309917204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309917204">(Nov 14 2022 at 17:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="528143">King Crawford</span> <a href="#narrow/stream/113489-new-members/topic/help.20with.20dsimp/near/309915535">said</a>:</p>
<blockquote>
<p>I have this goal:<br>
⊢ (λ (i : ℕ), ∃! (H : i ∈ finset.range n), ∑ (j : ℕ) in finset.range n, f j = f i) c<br>
I want to beta reduce it to <br>
⊢ ∃! (H : c ∈ finset.range n), ∑ (j : ℕ) in finset.range n, f j = f c<br>
dsimp gives me the following which isn't quite what I'm looking for<br>
⊢ ∃! (H : c ∈ finset.range n), (finset.range n).sum f = f c<br>
Is there a way to do this?</p>
</blockquote>
<p>I have had similar issues. I wish there was a command (or a <code>rw</code> lemma) that specifically performs the beta reduction.</p>



<a name="309917279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309917279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309917279">(Nov 14 2022 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span>  None. But <code>change</code> is more flexible. You can do <code>change &lt;foobar&gt; at my_hyp,</code></p>



<a name="309917740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309917740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309917740">(Nov 14 2022 at 17:58)</a>:</h4>
<p>I have been using <code>change</code> on both the goal and hypotheses. I am glad that <code>change</code> exists but it is PITA to use it more than once per day.</p>



<a name="309917763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309917763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309917763">(Nov 14 2022 at 17:59)</a>:</h4>
<p>In fact, you can configure <code>dsimp</code> to perform whichever reduction you like.</p>



<a name="309918017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20with%20dsimp/near/309918017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/help.20with.20dsimp.html#309918017">(Nov 14 2022 at 18:00)</a>:</h4>
<p>Can I keep <code>dsimp</code> as it is and create a new command <code>bsimp</code> for beta reductions only?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>