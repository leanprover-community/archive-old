---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html">Cube root of cubic is id?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222997128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997128">(Jan 16 2021 at 18:21)</a>:</h4>
<p>I'm trying to prove </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">z</span><span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">z</span> <span class="bp">^</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">3</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="n">z</span>
</code></pre></div>
<p>and having one heck of a hard time. I'd assume there's a lemma somewhere for this, but i can't find it and <code>norm_num</code> is no help. Any tips?</p>



<a name="222997552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997552">(Jan 16 2021 at 18:29)</a>:</h4>
<p>There are lots of <code>pow_mul</code>s for nats, but none for reals afaict</p>



<a name="222997564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997564">(Jan 16 2021 at 18:29)</a>:</h4>
<p>The real power function is in <code>analysis.special_functions.pow</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">real.rpow_mul</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="222997638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997638">(Jan 16 2021 at 18:30)</a>:</h4>
<p>Sandy, you need to learn about <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> in order to help people helping you.</p>



<a name="222997685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997685">(Jan 16 2021 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> mind being more specific about that?</p>



<a name="222997709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997709">(Jan 16 2021 at 18:32)</a>:</h4>
<p>Did you follow the link?</p>



<a name="222997744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997744">(Jan 16 2021 at 18:32)</a>:</h4>
<p>It's pretty specific.</p>



<a name="222997751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222997751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222997751">(Jan 16 2021 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> thanks, that's helpful. tho i think this is true even for negative <code>x</code> in the case of <code>y = 3</code>, <code>z = 3^-1</code></p>



<a name="222998097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998097">(Jan 16 2021 at 18:38)</a>:</h4>
<p>well wolfram alpha disagrees with me :)</p>



<a name="222998494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998494">(Jan 16 2021 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> my confusion here is that i don't see how the problem statement doesn't pose enough information. hypothetically, what could be going wrong that me giving you the imports would help clarify?</p>



<a name="222998516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998516">(Jan 16 2021 at 18:44)</a>:</h4>
<p>are there lots of <code>^</code>s i need to worry about?</p>



<a name="222998526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998526">(Jan 16 2021 at 18:45)</a>:</h4>
<p>The type of 3 is one crucial thing here, and it comes with <code>^</code>.</p>



<a name="222998546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998546">(Jan 16 2021 at 18:45)</a>:</h4>
<p>Also it's just much more convenient to copy and paste working code than having to figure out which imports and namespaces are needed...</p>



<a name="222998548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998548">(Jan 16 2021 at 18:45)</a>:</h4>
<p>yeah, fair. they're all Reals (which i learned the hard way)</p>



<a name="222998549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998549">(Jan 16 2021 at 18:45)</a>:</h4>
<p>And providing a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> that others can simply copy-paste to their editor is simply showing respect.</p>



<a name="222998606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998606">(Jan 16 2021 at 18:46)</a>:</h4>
<p>noted. thanks</p>



<a name="222998619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998619">(Jan 16 2021 at 18:46)</a>:</h4>
<p>The trick is to at least pretend you can imagine that the time of people that are ready to help is as worthy as yours.</p>



<a name="222998637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998637">(Jan 16 2021 at 18:47)</a>:</h4>
<p>i think it's a difference of community culture is all. i come from hs land where people do all the reasoning in their head</p>



<a name="222998648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998648">(Jan 16 2021 at 18:47)</a>:</h4>
<p>no disrespect meant</p>



<a name="222998669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998669">(Jan 16 2021 at 18:47)</a>:</h4>
<p>Ok, let me mute this thread then.</p>



<a name="222998673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998673">(Jan 16 2021 at 18:47)</a>:</h4>
<p>There are times when people post questions in the style you posted, when I've not been able to get a working Lean session with the question in, because I can't figure out the imports. This is why I think MWEs are cool :-)</p>



<a name="222998723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998723">(Jan 16 2021 at 18:48)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kn">namespace</span> <span class="n">lecture11</span>

<span class="kd">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">injective</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">idiot</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">finish</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>


<span class="kd">end</span> <span class="n">lecture11</span>
</code></pre></div>



<a name="222998741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998741">(Jan 16 2021 at 18:48)</a>:</h4>
<p>so here's a MWE. is there a way i can prove this for all <code>x</code>, not just those &gt;= 0?</p>



<a name="222998771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998771">(Jan 16 2021 at 18:49)</a>:</h4>
<p>I'm not sure it's true in Lean</p>



<a name="222998782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998782">(Jan 16 2021 at 18:49)</a>:</h4>
<p><span aria-label="surprise" class="emoji emoji-1f62e" role="img" title="surprise">:surprise:</span></p>



<a name="222998845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998845">(Jan 16 2021 at 18:50)</a>:</h4>
<p>x^(1/2) won't be correctly defined for every real number, because the result must be real</p>



<a name="222998862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998862">(Jan 16 2021 at 18:50)</a>:</h4>
<p>so probably if x&lt;0 then x^(1/2)=0 because it will have to be something</p>



<a name="222998874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998874">(Jan 16 2021 at 18:50)</a>:</h4>
<p>x^pi is meaningless if x is negative</p>



<a name="222998904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998904">(Jan 16 2021 at 18:51)</a>:</h4>
<p>so I would be very surprised if x^(1/3) happens to be the thing you want it to be if x&lt;0</p>



<a name="222998945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222998945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222998945">(Jan 16 2021 at 18:52)</a>:</h4>
<p>I haven't looked at the definition but it would not surprise me if a^b is a random junk value e.g. 0 or 1 if a&lt;0</p>



<a name="222999000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999000">(Jan 16 2021 at 18:52)</a>:</h4>
<p>is the issue that ^(1/3) just incidentally happens to compute the cube root, but isn't defined as <code>cuberoot (x^3) = x</code>?</p>



<a name="222999028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999028">(Jan 16 2021 at 18:52)</a>:</h4>
<p>If I had to define x^y in Lean I'd probably go for exp(y*log(x))</p>



<a name="222999046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999046">(Jan 16 2021 at 18:53)</a>:</h4>
<p>you can't just define x^(1/3), you have to define x^(any real number at all)</p>



<a name="222999061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999061">(Jan 16 2021 at 18:53)</a>:</h4>
<p><a href="/user_uploads/3121/AGQ1y7f3stfGhk6msp6BytAM/2021-01-16-105246_486x369_scrot.png">2021-01-16-105246_486x369_scrot.png</a>   here's the exercise i'm working through</p>
<div class="message_inline_image"><a href="/user_uploads/3121/AGQ1y7f3stfGhk6msp6BytAM/2021-01-16-105246_486x369_scrot.png" title="2021-01-16-105246_486x369_scrot.png"><img src="/user_uploads/3121/AGQ1y7f3stfGhk6msp6BytAM/2021-01-16-105246_486x369_scrot.png"></a></div>



<a name="222999067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999067">(Jan 16 2021 at 18:53)</a>:</h4>
<p>so it's highly unlikely to say "if y is a rational number which happens to have an odd denominator then there's a way of making this make sense"</p>



<a name="222999133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999133">(Jan 16 2021 at 18:54)</a>:</h4>
<p>i think i might not be a sophisticated-enough mathematician to appreciate the point you're trying to express</p>



<a name="222999162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999162">(Jan 16 2021 at 18:54)</a>:</h4>
<p>^ has type <code>real -&gt; real -&gt; real</code></p>



<a name="222999172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999172">(Jan 16 2021 at 18:54)</a>:</h4>
<p>So what do you think (-2)^(1/2) is?</p>



<a name="222999173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999173">(Jan 16 2021 at 18:54)</a>:</h4>
<p>i understand that this isn't true for <code>y=2</code> and <code>z=1/2</code>, and i think you're saying "since it's not true for some cases, we need to define it in a way that works for all of them, and there are no special cases for the odd naturals"?</p>



<a name="222999175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999175">(Jan 16 2021 at 18:54)</a>:</h4>
<p>about what pow is for negative x: the doc of <code>real.rpow</code> states "For x &lt; 0, the definition is somewhat arbitary as it depends on the choice of a complex determination of the logarithm. With our conventions, it is equal to exp (y log x) cos (πy)."</p>



<a name="222999286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999286">(Jan 16 2021 at 18:56)</a>:</h4>
<p>you might be lucky then</p>



<a name="222999313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999313">(Jan 16 2021 at 18:56)</a>:</h4>
<p>i'm confused about whether or not this is a problem in my understanding,  in the given proof, or in how lean is implemented</p>



<a name="222999478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999478">(Jan 16 2021 at 18:59)</a>:</h4>
<p>and whether anything will go wrong if i just introduce an axiom for <code>\forall z, z^3^(1/3) = z</code></p>



<a name="222999584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999584">(Jan 16 2021 at 19:00)</a>:</h4>
<p>it might not be true! It might be though</p>



<a name="222999614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999614">(Jan 16 2021 at 19:01)</a>:</h4>
<p>sorry, what might not be true? the axiom?</p>



<a name="222999625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999625">(Jan 16 2021 at 19:01)</a>:</h4>
<p>right</p>



<a name="222999648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999648">(Jan 16 2021 at 19:01)</a>:</h4>
<p>I do not know if it's true or not, I will have to read the docstring but I'm in a lecture right now</p>



<a name="222999668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999668">(Jan 16 2021 at 19:01)</a>:</h4>
<p>this isn't a burning question that i'm going to stay up all night wondering about</p>



<a name="222999713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999713">(Jan 16 2021 at 19:02)</a>:</h4>
<p>if you're curious i'd be happy to know the answer, but please don't put yourself out</p>



<a name="222999792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/222999792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#222999792">(Jan 16 2021 at 19:03)</a>:</h4>
<p>but this exercise has definitely decreased some of my trust in lean if i can't just show the first-year first-week example as it's given</p>



<a name="223000049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000049">(Jan 16 2021 at 19:07)</a>:</h4>
<p>there will be a lemma in mathlib saying that <code>x |-&gt; x ^ 3</code> is injective. That should be good enough</p>



<a name="223000111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000111">(Jan 16 2021 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="375678">@Sandy Maguire</span> you should see one of the slides in the talk I just gave :-) I'll post it when I'm done here</p>



<a name="223000244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000244">(Jan 16 2021 at 19:10)</a>:</h4>
<p>I don't think that this should decrease your trust in <strong>Lean</strong>, but there are definitely things we could do to make mathlib more accessible / easier to use.</p>



<a name="223000254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000254">(Jan 16 2021 at 19:11)</a>:</h4>
<p>see <a href="https://leanprover-community.github.io/mathlib_docs/find/injective_pow_p">docs#injective_pow_p</a> for the statement that x^p is injective for p in N.</p>



<a name="223000270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000270">(Jan 16 2021 at 19:11)</a>:</h4>
<p><a href="/user_uploads/3121/E93GzeIA7mI3sFdQWw_QVq5p/2not1.png">2not1.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/E93GzeIA7mI3sFdQWw_QVq5p/2not1.png" title="2not1.png"><img src="/user_uploads/3121/E93GzeIA7mI3sFdQWw_QVq5p/2not1.png"></a></div>



<a name="223000311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000311">(Jan 16 2021 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="350992">@Rémy Degenne</span> that's not the one you want... it's for perfect rings of characteristic <code>p</code>...</p>



<a name="223000342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000342">(Jan 16 2021 at 19:12)</a>:</h4>
<p>oh yes indeed. i was suprised about the p in the name. Sorry</p>



<a name="223000351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000351">(Jan 16 2021 at 19:12)</a>:</h4>
<p><a href="/user_uploads/3121/msUnJXzMcWbPxJ02E-fERcvX/slide_before.png">slide_before.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/msUnJXzMcWbPxJ02E-fERcvX/slide_before.png" title="slide_before.png"><img src="/user_uploads/3121/msUnJXzMcWbPxJ02E-fERcvX/slide_before.png"></a></div>



<a name="223000368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000368">(Jan 16 2021 at 19:13)</a>:</h4>
<p>Me trying to formalise undergraduate mathematics in 2017</p>



<a name="223000374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000374">(Jan 16 2021 at 19:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="375678">Sandy Maguire</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/222999792">said</a>:</p>
<blockquote>
<p>but this exercise has definitely decreased some of my trust in lean if i can't just show the first-year first-week example as it's given</p>
</blockquote>
<p>[joking] does this mean it also decreases your trust in haskell, because I don't think you can do this exercise in haskell either... [/joking]</p>



<a name="223000474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000474">(Jan 16 2021 at 19:14)</a>:</h4>
<p>there is <a href="https://leanprover-community.github.io/mathlib_docs/find/pow_left_inj">docs#pow_left_inj</a> for positive inputs</p>



<a name="223000501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000501">(Jan 16 2021 at 19:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223000374">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="375678">Sandy Maguire</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/222999792">said</a>:</p>
<blockquote>
<p>but this exercise has definitely decreased some of my trust in lean if i can't just show the first-year first-week example as it's given</p>
</blockquote>
<p>[joking] does this mean it also decreases your trust in haskell, because I don't think you can do this exercise in haskell either... [/joking]</p>
</blockquote>
<p>fair --- but i don't even pretend to be productive haskell :)</p>



<a name="223000548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000548">(Jan 16 2021 at 19:15)</a>:</h4>
<p>don't we have a lemma stating that x^n is injective for n odd? I can't find one.</p>



<a name="223000569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000569">(Jan 16 2021 at 19:15)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/algebra/group_power/basic.html#pow_left_inj">https://leanprover-community.github.io/mathlib_docs/algebra/group_power/basic.html#pow_left_inj</a> is the closest I got</p>



<a name="223000632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000632">(Jan 16 2021 at 19:16)</a>:</h4>
<p>maybe nobody ever cared about odd powers until today <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="223000647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000647">(Jan 16 2021 at 19:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223000244">said</a>:</p>
<blockquote>
<p>I don't think that this should decrease your trust in <strong>Lean</strong>, but there are definitely things we could do to make mathlib more accessible / easier to use.</p>
</blockquote>
<p>that's fair. i'm such a noob that lean and mathlib are the same to me</p>



<a name="223000675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000675">(Jan 16 2021 at 19:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223000632">said</a>:</p>
<blockquote>
<p>maybe nobody ever cared about odd powers until today <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>
</blockquote>
<p>that's the other thing i never know. am i an idiot or a trailblazer? ... or both? :)</p>



<a name="223000677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000677">(Jan 16 2021 at 19:17)</a>:</h4>
<p>we only got odd numbers in 2020 I think ;-)</p>



<a name="223000762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223000762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223000762">(Jan 16 2021 at 19:19)</a>:</h4>
<p>It seems that the negative case evaluates to something weird:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">z</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">real.rpow_def_of_neg</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">real.pi</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">real.pi</span><span class="o">)</span> <span class="bp">+</span> <span class="n">real.pi</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_cast</span><span class="bp">;</span> <span class="n">ring</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">conv_lhs</span> <span class="o">{</span> <span class="n">congr</span><span class="o">,</span> <span class="n">congr</span><span class="o">,</span> <span class="n">skip</span><span class="o">,</span> <span class="n">rw</span> <span class="n">real.cos_int_mul_two_pi_add_pi</span> <span class="mi">1</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">real.exp_mul</span><span class="o">,</span> <span class="n">real.exp_log_of_neg</span> <span class="n">h</span><span class="o">,</span> <span class="n">mul_neg_one</span><span class="o">],</span>
  <span class="k">have</span> <span class="n">hnz</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">-</span><span class="n">z</span> <span class="o">:=</span> <span class="n">neg_pos_of_neg</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hnz3</span> <span class="o">:</span> <span class="bp">-</span><span class="o">(</span><span class="bp">-</span><span class="n">z</span><span class="o">)</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">neg_neg_of_pos</span> <span class="o">(</span><span class="n">real.rpow_pos_of_pos</span> <span class="n">hnz</span> <span class="n">_</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hnz3'</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="bp">-</span><span class="n">z</span><span class="o">)</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">pos_of_neg_neg</span> <span class="n">hnz3</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">real.rpow_def_of_neg</span> <span class="n">hnz3</span><span class="o">,</span> <span class="n">real.log_neg_eq_log</span><span class="o">,</span> <span class="n">real.exp_mul</span><span class="o">,</span>
    <span class="n">real.exp_log</span> <span class="n">hnz3'</span><span class="o">,</span> <span class="bp">←</span> <span class="n">real.rpow_mul</span> <span class="n">hnz.le</span><span class="o">,</span> <span class="n">inv_eq_one_div</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">_</span> <span class="n">real.pi</span><span class="o">,</span>
    <span class="n">mul_one_div</span> <span class="n">real.pi</span> <span class="n">_</span><span class="o">,</span> <span class="n">real.cos_pi_div_three</span><span class="o">,</span> <span class="n">mul_one_div</span><span class="o">,</span> <span class="n">mul_one_div</span><span class="o">,</span> <span class="n">div_self</span><span class="o">]</span><span class="bp">;</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>golfing, etc. welcome!</p>



<a name="223001046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001046">(Jan 16 2021 at 19:24)</a>:</h4>
<p>i think i'm going to proceed by introducing an axiom to eliminate <code>^3^(1/3)</code> and go on my merry way</p>



<a name="223001048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001048">(Jan 16 2021 at 19:24)</a>:</h4>
<p>so <code>-z/2</code> ?</p>



<a name="223001051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001051">(Jan 16 2021 at 19:24)</a>:</h4>
<p>thanks for all of your input everyone</p>



<a name="223001277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001277">(Jan 16 2021 at 19:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="350992">Rémy Degenne</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223001048">said</a>:</p>
<blockquote>
<p>so <code>-z/2</code> ?</p>
</blockquote>
<p>it's the real part of two of the complex cube roots... clearly they outvoted the other complex cube root <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="223001284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001284">(Jan 16 2021 at 19:29)</a>:</h4>
<p>could we change the definition of real.rpow to have <code>x^(n:R) = x^(n:N)</code> for all x in R? without breaking everything that is</p>



<a name="223001426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001426">(Jan 16 2021 at 19:32)</a>:</h4>
<p>wait, that should already be the case</p>



<a name="223001457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001457">(Jan 16 2021 at 19:33)</a>:</h4>
<p>I think cos(Pi/3)=0.5 so the theorem really is false.</p>



<a name="223001466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001466">(Jan 16 2021 at 19:33)</a>:</h4>
<p>Regarding the crazy discontinuous definition of x^y for negative x, I suppose we can do that but I think it would be better to use a dedicated function</p>



<a name="223001556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001556">(Jan 16 2021 at 19:35)</a>:</h4>
<p>and <span class="user-mention" data-user-id="375678">@Sandy Maguire</span> if a theorem doesn't work out, don't force it with an axiom! Make a better definition that satisfies the properties you want instead</p>



<a name="223001632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001632">(Jan 16 2021 at 19:36)</a>:</h4>
<p>In this case, I would suggest something like <code>def cube_root (x : R) := if x &gt;= 0 then x ^ (1/3) else -((-x) ^ (1/3))</code></p>



<a name="223001659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001659">(Jan 16 2021 at 19:37)</a>:</h4>
<p>(I've edited my snippet to show that it's indeed <code>-z/2</code>. This was probably much more painful than it had to be.)</p>



<a name="223001771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001771">(Jan 16 2021 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> that's a good idea. does anything go wrong with this axiom if i only use it locally in this proof? is it just a matter of bad style?</p>



<a name="223001784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001784">(Jan 16 2021 at 19:38)</a>:</h4>
<p>No, it's inconsistent</p>



<a name="223001803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001803">(Jan 16 2021 at 19:39)</a>:</h4>
<p>You are asserting a thing lean knows to be false, anything will follow and math crumbles</p>



<a name="223001808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001808">(Jan 16 2021 at 19:39)</a>:</h4>
<p>please don't assert axioms that you know to be disprovable</p>



<a name="223001863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001863">(Jan 16 2021 at 19:40)</a>:</h4>
<p>well what i'm really proving is <code>example : injective (λ (x : ℝ), 2 * x^(3 : ℝ) + 1)</code>  --- whcih i think IS true?</p>



<a name="223001870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001870">(Jan 16 2021 at 19:40)</a>:</h4>
<p>That is true</p>



<a name="223001883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001883">(Jan 16 2021 at 19:41)</a>:</h4>
<p>my proof sucks, admittedly</p>



<a name="223001885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001885">(Jan 16 2021 at 19:41)</a>:</h4>
<p>You can use <code>cube_root</code> if you want an explicit inverse in order to prove injectivity</p>



<a name="223001889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001889">(Jan 16 2021 at 19:41)</a>:</h4>
<p>i think i see your point</p>



<a name="223001897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001897">(Jan 16 2021 at 19:41)</a>:</h4>
<p>i am torn between "i hate this example and want to move onto something else" vs just doing it right</p>



<a name="223001899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001899">(Jan 16 2021 at 19:41)</a>:</h4>
<p>and i think i'll do the latter. thanks for the push</p>



<a name="223001906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001906">(Jan 16 2021 at 19:41)</a>:</h4>
<p>There are a lot of <code>.injective</code> lemmas which should let you chain together a neat-looking proof of your statement with dot notation.</p>



<a name="223001953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001953">(Jan 16 2021 at 19:42)</a>:</h4>
<p>do we have a <code>.injective</code> for rpow though? That seems to be the crux of it</p>



<a name="223001964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001964">(Jan 16 2021 at 19:43)</a>:</h4>
<p>Oh right. Whoops.</p>



<a name="223001965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001965">(Jan 16 2021 at 19:43)</a>:</h4>
<p>Or even <code>monoid.pow</code>, we know that's equal</p>



<a name="223001983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223001983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223001983">(Jan 16 2021 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> your cube_root is noncomputable and lean yells at me.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="c1">-- axiom cube_root (x : ℝ) : (x ^ (3 : ℝ)) ^ (3 : ℝ)⁻¹ = x</span>

<span class="kd">@[noncomputable]</span> <span class="kd">def</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">x</span> <span class="bp">&gt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">3</span><span class="o">)</span> <span class="k">else</span> <span class="bp">-</span><span class="o">((</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">3</span><span class="o">))</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">injective</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">suffices</span> <span class="n">idiot</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">←</span><span class="n">cube_root</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">←</span><span class="n">cube_root</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">assumption</span><span class="o">,</span>
  <span class="n">finish</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223002021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002021">(Jan 16 2021 at 19:44)</a>:</h4>
<p>The whole alternating odd/even thing seems like it would be better suited as a theorem about <code>monoid.pow</code></p>



<a name="223002027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002027">(Jan 16 2021 at 19:44)</a>:</h4>
<p><code>noncomputable</code> is a keyword, not an attribute</p>



<a name="223002032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002032">(Jan 16 2021 at 19:44)</a>:</h4>
<p>that does it. thanks</p>



<a name="223002056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002056">(Jan 16 2021 at 19:45)</a>:</h4>
<p>also you probably need to put a type ascription on the 1/3's</p>



<a name="223002120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002120">(Jan 16 2021 at 19:46)</a>:</h4>
<p>lean usually can't figure out the type in an exponent because it's not determined from context, so it will default to nat and that's definitely not what you want here because then 1/3=0</p>



<a name="223002124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002124">(Jan 16 2021 at 19:46)</a>:</h4>
<p>yeah :)</p>



<a name="223002126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223002126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223002126">(Jan 16 2021 at 19:46)</a>:</h4>
<p>i learned that the hard way the other day</p>



<a name="223004063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004063">(Jan 16 2021 at 20:20)</a>:</h4>
<p>okay, working on proving this with the cube_root... now getting stuck saying i can't apply a rewrite that pretty obviously seems like it should apply</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="kd">lemma</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="bp">&gt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">else</span> <span class="bp">-</span><span class="o">((</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">injective</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">hxycube</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">idiot</span> <span class="o">:</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">=</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">finish</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">cube_root</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">rw</span> <span class="bp">←</span><span class="n">hxycube</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_inv_cancel</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nonzero_of_invertible</span> <span class="mi">3</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">rw</span> <span class="bp">←</span><span class="n">hxycube</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>


  <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223004080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004080">(Jan 16 2021 at 20:21)</a>:</h4>
<p>also golfing tips GREATLY appreciated</p>



<a name="223004115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004115">(Jan 16 2021 at 20:22)</a>:</h4>
<p>tho i really really feel like i'm going against the grain here. it feels like this shouldn't be so hard to prove</p>



<a name="223004715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004715">(Jan 16 2021 at 20:35)</a>:</h4>
<p><span aria-label="shock" class="emoji emoji-1f628" role="img" title="shock">:shock:</span> <span aria-label="shock" class="emoji emoji-1f628" role="img" title="shock">:shock:</span> does mathlib not know</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">3</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>this is painful</p>



<a name="223004726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004726">(Jan 16 2021 at 20:35)</a>:</h4>
<p><code>norm_num</code> and <code>norm_cast</code> don't help</p>



<a name="223004781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004781">(Jan 16 2021 at 20:36)</a>:</h4>
<p>if I replace <code>3</code> by <code>n : nat</code> it does work</p>



<a name="223004798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004798">(Jan 16 2021 at 20:36)</a>:</h4>
<p>replace (3 : real) with ((3 : nat) : real) first?</p>



<a name="223004904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004904">(Jan 16 2021 at 20:39)</a>:</h4>
<p>but <code>norm_cast</code> should be able to do that for me</p>



<a name="223004973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223004973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223004973">(Jan 16 2021 at 20:40)</a>:</h4>
<p>maybe i'm running into the same thing. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kd">lemma</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx3</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_contradiction</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx_3</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">pow_succ</span><span class="o">},</span>
    <span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_one</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_neg_iff</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">or.inr</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">mul_pos_iff.mpr</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">or.inr</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx_3'</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="o">((</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">assumption_mod_cast</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>this assumption_mod_cast fails</p>



<a name="223005172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223005172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223005172">(Jan 16 2021 at 20:44)</a>:</h4>
<p>and then <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span> contradiction doesn't find any contradictions</p>



<a name="223005470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223005470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223005470">(Jan 16 2021 at 20:50)</a>:</h4>
<p><code>rwa real.rpow_nat_cast</code> works, fwiw</p>



<a name="223005490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223005490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223005490">(Jan 16 2021 at 20:50)</a>:</h4>
<p>Here's another approach:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="c1">-- we should have this in mathlib!</span>
<span class="kd">lemma</span> <span class="n">rpow_odd_strict_mono</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">strict_mono</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">function.injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">strict_mono.injective</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">strict_mono.add_const</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">strict_mono.const_mul</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">convert</span> <span class="n">rpow_odd_strict_mono</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">ext</span> <span class="n">x</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span> <span class="n">exact_mod_cast</span> <span class="n">real.rpow_nat_cast</span> <span class="n">x</span> <span class="mi">3</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">norm_num</span><span class="o">,</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>I'm working on <code>rpow_odd_strict_mono</code> still...</p>



<a name="223005682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223005682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223005682">(Jan 16 2021 at 20:54)</a>:</h4>
<p>and yet another approach. not sure about the proof of <code>pow_sub_pow</code> yet, but I think this proves that for all <code>odd n</code>, <code>x^n</code> is injective.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kn">import</span> <span class="n">data.nat.parity</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">lemma</span> <span class="n">pos_of_odd_pow_pos</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_pos_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hx</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">hx.1</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">hx1</span> <span class="n">hx2</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">pow_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx2</span><span class="o">,</span>
    <span class="n">nlinarith</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">neg_of_odd_pow_neg</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_neg_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hx</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">hx1</span> <span class="n">hx2</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">pow_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx2</span><span class="o">,</span>
    <span class="n">nlinarith</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">hx.1</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">odd_pow_pos_iff_pos</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">↔</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">pos_of_odd_pow_pos</span> <span class="n">hn</span> <span class="o">},</span>
  <span class="n">intro</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">pow_pos</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hx</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">odd_pow_neg_iff_neg</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">neg_of_odd_pow_neg</span> <span class="n">hn</span> <span class="o">},</span>
  <span class="n">intro</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="mi">2</span><span class="o">,</span> <span class="n">pow_mul</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">mul_neg_of_neg_of_pos</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">hx</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">pow_two_pos_of_ne_zero</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">pow_eq_zero</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">linarith</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">pow_sub_pow</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">∑</span> <span class="n">j</span> <span class="k">in</span> <span class="o">(</span><span class="n">finset.range</span> <span class="n">n.succ</span><span class="o">),</span> <span class="n">x</span><span class="bp">^</span><span class="n">j</span> <span class="bp">*</span> <span class="n">y</span><span class="bp">^</span><span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">j</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">pow_odd_inj_of_pos</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">sub_eq_zero</span><span class="o">,</span> <span class="n">pow_sub_pow</span> <span class="n">x</span> <span class="n">y</span><span class="o">]</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset.range</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">j</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">j</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="bp">←</span><span class="n">finset.sum_const_zero</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">finset.sum_lt_sum</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">le_of_lt</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">mul_pos</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">apply</span> <span class="n">pow_pos</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">hx</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">apply</span> <span class="n">pow_pos</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">hy</span> <span class="o">}</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">use</span> <span class="o">[</span><span class="mi">0</span><span class="o">],</span>
      <span class="n">split</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pow_zero</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat.sub_zero</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">pow_mul</span><span class="o">],</span>
        <span class="n">apply</span> <span class="n">pow_two_pos_of_ne_zero</span><span class="o">,</span>
        <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
        <span class="k">have</span> <span class="o">:=</span> <span class="n">pow_eq_zero</span> <span class="n">h</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">hy</span><span class="o">,</span>
        <span class="n">linarith</span> <span class="o">}</span> <span class="o">}</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">mul_eq_zero</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">hxy</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span><span class="n">sub_eq_zero_iff_eq</span><span class="o">]</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">rw</span> <span class="n">hxy</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">linarith</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">pow_odd_inj_of_neg</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">y</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">pow_odd_inj_of_pos</span> <span class="n">hn</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">linarith</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">linarith</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">neg_pow</span> <span class="n">x</span><span class="o">,</span> <span class="n">neg_pow</span> <span class="n">y</span><span class="o">,</span> <span class="n">nat.neg_one_pow_of_odd</span> <span class="n">hn</span><span class="o">],</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">pow_odd_inj</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">x</span><span class="bp">^</span><span class="n">n</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">^</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">lt_trichotomy</span> <span class="mi">0</span> <span class="n">x</span> <span class="k">with</span> <span class="o">(</span><span class="n">hx</span><span class="bp">|</span><span class="n">rfl</span><span class="bp">|</span><span class="n">hx</span><span class="o">),</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="bp">^</span><span class="n">n</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span><span class="n">hxy</span><span class="o">,</span> <span class="n">odd_pow_pos_iff_pos</span> <span class="n">hn</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">rwa</span> <span class="n">odd_pow_pos_iff_pos</span> <span class="n">hn</span> <span class="n">at</span> <span class="n">this</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">pow_odd_inj_of_pos</span> <span class="n">hn</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">hxy</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">zero_pow</span><span class="o">]</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">pow_eq_zero</span> <span class="n">hxy.symm</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat.odd_gt_zero</span> <span class="n">hn</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">y</span><span class="bp">^</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span><span class="n">hxy</span><span class="o">,</span> <span class="n">odd_pow_neg_iff_neg</span> <span class="n">hn</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">rwa</span> <span class="n">odd_pow_neg_iff_neg</span> <span class="n">hn</span> <span class="n">at</span> <span class="n">this</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">pow_odd_inj_of_neg</span> <span class="n">hn</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">hxy</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223005716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223005716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223005716">(Jan 16 2021 at 20:55)</a>:</h4>
<p>seeing all of these big scary suggestions makes me feel better about not being able to get it on my own</p>



<a name="223006496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223006496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223006496">(Jan 16 2021 at 21:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>

<span class="kn">open</span> <span class="n">function</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">nonneg_of_pow_nonneg</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="n">pow_succ</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_mul'</span><span class="o">,</span> <span class="n">mul_nonneg_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_two_nonneg</span><span class="o">,</span> <span class="n">and_true</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hx</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">hx</span> <span class="o">},</span>
  <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">hx0</span> <span class="n">hx</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hx'</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">le_antisymm</span> <span class="n">hx</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">pow_eq_zero</span> <span class="o">(</span><span class="n">pow_eq_zero</span> <span class="n">hx'</span><span class="o">))</span><span class="bp">.</span><span class="n">ge</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">pow_nonneg_iff</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">↔</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">nonneg_of_pow_nonneg</span> <span class="n">hn</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">pow_nonneg</span> <span class="n">h</span> <span class="n">n</span><span class="o">⟩</span>

<span class="kd">lemma</span> <span class="n">pow_neg_iff</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">not_iff_not</span><span class="o">],</span> <span class="n">push_neg</span><span class="o">,</span> <span class="n">exact</span> <span class="n">pow_nonneg_iff</span> <span class="n">hn</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">pow_neg_eq_neg_pow_of_odd</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">neg_pow_bit1</span> <span class="n">x</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">bit1</span><span class="o">,</span> <span class="n">bit0_eq_two_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">nat.pos_of_odd</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rcases</span> <span class="n">hn</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span> <span class="n">dec_trivial</span> <span class="o">}</span>

<span class="kd">theorem</span> <span class="n">pow_left_inj_of_odd</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">le_or_lt</span> <span class="mi">0</span> <span class="n">x</span> <span class="k">with</span> <span class="n">hx</span> <span class="n">hx</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span> <span class="n">pow_nonneg_iff</span> <span class="n">hn</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">pow_nonneg_iff</span> <span class="n">hn</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">pow_left_inj</span> <span class="n">hx</span> <span class="n">hy</span> <span class="o">(</span><span class="n">nat.pos_of_odd</span> <span class="n">hn</span><span class="o">)</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span> <span class="n">pow_neg_iff</span> <span class="n">hn</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">pow_neg_iff</span> <span class="n">hn</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hx'</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">x</span><span class="o">,</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">neg_nonneg</span><span class="o">]</span> <span class="n">using</span> <span class="n">hx.le</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hy'</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="n">y</span><span class="o">,</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">neg_nonneg</span><span class="o">]</span> <span class="n">using</span> <span class="n">hy.le</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">pow_left_inj</span> <span class="n">hx'</span> <span class="n">hy'</span> <span class="o">(</span><span class="n">nat.pos_of_odd</span> <span class="n">hn</span><span class="o">)</span> <span class="n">_</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simpa</span> <span class="o">},</span>
    <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">pow_neg_eq_neg_pow_of_odd</span> <span class="n">hn</span><span class="o">,</span> <span class="n">neg_inj</span><span class="o">]</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">norm_num</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">pow_left_inj_of_odd</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="n">h</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223006524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223006524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223006524">(Jan 16 2021 at 21:11)</a>:</h4>
<p>it's not exactly the strict_mono from Bryan's approach... but well</p>



<a name="223006630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223006630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223006630">(Jan 16 2021 at 21:13)</a>:</h4>
<p>I don't have time to turn this into a PR... but if someone else wants to do that, please go ahead <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="223007041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223007041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223007041">(Jan 16 2021 at 21:21)</a>:</h4>
<p>Poking at Sandy's approach a little more:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx3</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx3</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">real.rpow_nat_cast</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_neg_iff</span><span class="o">],</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">hx3</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">refine</span> <span class="n">lt_of_le_of_ne</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">ne.symm</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx3</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">pow_eq_zero</span> <span class="n">hx3</span><span class="o">)</span><span class="bp">.</span><span class="n">ge</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223007695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223007695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223007695">(Jan 16 2021 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> amazing! ooc how did decide to use <code>lt_of_le_of_ne</code>?</p>



<a name="223017219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223017219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223017219">(Jan 17 2021 at 01:24)</a>:</h4>
<p>(I finished my proof of <code>rpow_odd_strict_mono</code> finally and edited it into <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223005490">my message above</a>. There's surely a better way, but I ended up just following my nose instead of thinking about the math... )</p>



<a name="223037750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223037750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223037750">(Jan 17 2021 at 11:11)</a>:</h4>
<p><span class="user-mention" data-user-id="375678">@Sandy Maguire</span> I needed to prove 0 &lt; x², so it seemed helpful to point out the fact that 0 &lt;= x², so I'd only need to rule out x² = 0</p>



<a name="223038486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223038486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223038486">(Jan 17 2021 at 11:30)</a>:</h4>
<p>Sandy -- sorry for not really finishing my sentences yesterday -- I was busy doing something else and just occasionally looking at the chat. What is going on in the proof that you posted is that there's a "cube root" function involved, which is the inverse map to the bijection <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><msup><mi>x</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">x\mapsto x^3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> on the reals. The point is that Lean does not have that function right now (at least not until this thread) and in particular the function <code>lam x, x^(1/3:real)</code>, which looks superficially similar, is <em>not</em> this function. The point is that that <code>rpow</code>, which is what <code>^</code> expands to, is defined for all real inputs and is what you think it is for positive reals, but returns junk values for negative reals. The reason for this is that even though <em>coincidentally</em> there is a good choice of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">x^{1/3}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> for negative real <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>, there really is no good choice of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>r</mi></msup></mrow><annotation encoding="application/x-tex">x^r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span> for an arbitrary real number when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is negative, and <code>rpow</code> makes no attempt to distinguish between the real numbers for which there is a good choice (which happen to be the rational numbers with odd denominator) and the real numbers for which there is no good choice -- it just returns junk if x is negative, in all cases. There is no problem formalising this proof in Lean, but you will need the cube root function which is defined on all the reals, so this function needs to be made first.</p>



<a name="223039262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039262">(Jan 17 2021 at 11:53)</a>:</h4>
<p>So if we're free to choose a junk value for <code>rpow</code> with negative x, could we choose one that matches the good definition when it exists? Or would that cause too much trouble elsewhere?</p>



<a name="223039392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039392">(Jan 17 2021 at 11:58)</a>:</h4>
<p>The value of <code>rpow</code> for negative <code>x</code> is not really junk. It is the real part of the complex-valued function given by <code>x ^ y = exp (x log y)</code>, where <code>log</code> is the principal branch of the complex logarithm.</p>



<a name="223039809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039809">(Jan 17 2021 at 12:08)</a>:</h4>
<p>The fact that it returns -1/2 on an input of (-1)^(1/3) certainly makes it look like junk -- it's just the real part of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mn>2</mn><mi>π</mi><mi>i</mi><mi mathvariant="normal">/</mi><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">e^{2\pi i/3}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span><span class="mord mathnormal mtight">i</span><span class="mord mtight">/</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> but this answer is wrong on many levels :-) Given that the only possible values for the exponent where there happens to be a non-junk answer are rational, it makes me think that one could define a power function <code>real -&gt; rat -&gt; real</code> which returned the right answer when the real was negative and the rational had odd denominator, and that this would perhaps be the more sensible approach.</p>



<a name="223039837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039837">(Jan 17 2021 at 12:09)</a>:</h4>
<p>You want the power function to be continuous, and even analytic where it can be. Well, I don't know if you want it, but <em>I</em> want it :-)</p>



<a name="223039887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039887">(Jan 17 2021 at 12:10)</a>:</h4>
<p>Of course every definition comes with a cost, and the cost here would be the theorems saying that it agrees with <code>rpow</code> when the base is positive, and that it satisfies stuff like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mi>a</mi><mi>b</mi></mrow></msup><mo>=</mo><mo stretchy="false">(</mo><msup><mi>x</mi><mi>a</mi></msup><msup><mo stretchy="false">)</mo><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">x^{ab}=(x^a)^b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span> even sometimes when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is negative.</p>



<a name="223039888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039888">(Jan 17 2021 at 12:10)</a>:</h4>
<p>And you want it to be compatible with casts, also.</p>



<a name="223039953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223039953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223039953">(Jan 17 2021 at 12:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223039837">said</a>:</p>
<blockquote>
<p>You want the power function to be continuous, and even analytic where it can be. Well, I don't know if you want it, but <em>I</em> want it :-)</p>
</blockquote>
<p>You are talking about behaviour in the second variable here I guess. This phenomenon about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">x^{1/3}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> happening to make sense for negative <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is something which is happening on a discrete set, which is why I am suggesting rational powers, where things like continuity are not really so meaningful.</p>



<a name="223040523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223040523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223040523">(Jan 17 2021 at 12:30)</a>:</h4>
<p>well it's not called <code>qpow</code> is it? :)</p>



<a name="223040532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223040532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223040532">(Jan 17 2021 at 12:31)</a>:</h4>
<p>I think that the power function is rather unfortunately overloaded in mathematics</p>



<a name="223040891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223040891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223040891">(Jan 17 2021 at 12:40)</a>:</h4>
<p>Even before Lean I was well aware that you need <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mrow><mo>−</mo><mi>s</mi></mrow></msup></mrow><annotation encoding="application/x-tex">n^{-s}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span></span></span></span> to make sense for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>∈</mo><msub><mi mathvariant="double-struck">R</mi><mrow><mo>&gt;</mo><mn>0</mn></mrow></msub></mrow><annotation encoding="application/x-tex">n\in\mathbb{R}_{&gt;0}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.86626em;vertical-align:-0.17737em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&gt;</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">s\in\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> so you can talk about the zeta function, but you also needed it to make sense for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>∈</mo><msup><mi mathvariant="double-struck">C</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">n\in\mathbb{C}^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">C</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">s\in\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> to talk about integrating around poles etc. Each of those functions is well-behaved, the union of the two sets is random, and attempts to extend the definition to a larger set in a "natural" way are fraught with difficulty.</p>



<a name="223042278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223042278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223042278">(Jan 17 2021 at 13:15)</a>:</h4>
<p>Note that our definition has the right behavior both for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>∈</mo><msub><mi mathvariant="double-struck">R</mi><mrow><mo>&gt;</mo><mn>0</mn></mrow></msub></mrow><annotation encoding="application/x-tex">n \in \mathbb{R}_{&gt;0}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.86626em;vertical-align:-0.17737em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">&gt;</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.17737em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">s\in \mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> on the one hand, and for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>∈</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">n \in \mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">s\in \mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> on the other hand.</p>



<a name="223044963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223044963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223044963">(Jan 17 2021 at 14:23)</a>:</h4>
<p>So does <a href="https://leanprover-community.github.io/mathlib_docs/find/qpow">docs#qpow</a> exist already then?</p>



<a name="223045107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045107">(Jan 17 2021 at 14:27)</a>:</h4>
<p>No, we just have <a href="https://leanprover-community.github.io/mathlib_docs/find/rpow">docs#rpow</a>, but <code>x ^ y</code> behaves well when <code>x</code> is positive, and also when <code>y</code> is (the cast of) an integer. It does not behave well for <code>y = 1/3</code>, though.</p>



<a name="223045188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045188">(Jan 17 2021 at 14:29)</a>:</h4>
<p>here's a crazy idea for qpow: <code>x ^ y := if y &lt; 0 then -((-x) ^ y) else x ^ y</code></p>



<a name="223045212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045212">(Jan 17 2021 at 14:30)</a>:</h4>
<p>i.e. don't bother with the odd power thing, just always extend oddly</p>



<a name="223045483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045483">(Jan 17 2021 at 14:35)</a>:</h4>
<p>That makes <code>(-4) ^ (1/2) = 2</code> which seems like a dangerous kind of garbage that is easy to not notice</p>



<a name="223045499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045499">(Jan 17 2021 at 14:35)</a>:</h4>
<p>I know, but garbage is garbage</p>



<a name="223045513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045513">(Jan 17 2021 at 14:36)</a>:</h4>
<p>this version has the advantage that it's still somewhat continuous</p>



<a name="223045572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045572">(Jan 17 2021 at 14:36)</a>:</h4>
<p>AFAICT this gives the right answer whenever one exists</p>



<a name="223045588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045588">(Jan 17 2021 at 14:37)</a>:</h4>
<p>and if you are trying to solve <code>(-1)^(1/2)</code> over the reals, read an intro to complex analysis book</p>



<a name="223045643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045643">(Jan 17 2021 at 14:38)</a>:</h4>
<p>it also agrees in magnitude with the correct complex answer for all inputs</p>



<a name="223045645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045645">(Jan 17 2021 at 14:38)</a>:</h4>
<p>I'm more concerned about someone stating a theorem that is nonsense but happens to be true for that unusual definition of power</p>



<a name="223045659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045659">(Jan 17 2021 at 14:38)</a>:</h4>
<p>that's <em>the point</em> of "least bad" garbage definitions</p>



<a name="223045677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045677">(Jan 17 2021 at 14:39)</a>:</h4>
<p>Right; my question is whether <code>0</code> is a less bad result for negative x and even denominator</p>



<a name="223045685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045685">(Jan 17 2021 at 14:39)</a>:</h4>
<p>Which iirc correctly is what <a href="https://leanprover-community.github.io/mathlib_docs/find/real.sqrt">docs#real.sqrt</a> gives</p>



<a name="223045744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045744">(Jan 17 2021 at 14:40)</a>:</h4>
<p>well for example, you get a theorem of the form <code>x ^ y = 0 &lt;-&gt; x = 0</code> in some generality</p>



<a name="223045789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045789">(Jan 17 2021 at 14:41)</a>:</h4>
<p>Right, although that problem is already solved one way by <a href="https://leanprover-community.github.io/mathlib_docs/find/real.sqrt_eq_zero">docs#real.sqrt_eq_zero</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/real.sqrt_eq_zero'">docs#real.sqrt_eq_zero'</a></p>



<a name="223045845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045845">(Jan 17 2021 at 14:42)</a>:</h4>
<p>yes, that's a fine solution for a function which just does square root, but that doesn't generalize very well</p>



<a name="223045851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045851">(Jan 17 2021 at 14:43)</a>:</h4>
<p>I suppose the other question to ask is whether real.sqrt should be redefined to match your qpow suggestion</p>



<a name="223045868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045868">(Jan 17 2021 at 14:43)</a>:</h4>
<p>Does anyone use the current behavior?</p>



<a name="223045923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223045923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223045923">(Jan 17 2021 at 14:44)</a>:</h4>
<p>I don't think it really matters except in the theorem that rewrites <code>odd_rpow</code> to <code>sqrt</code></p>



<a name="223047826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223047826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223047826">(Jan 17 2021 at 15:28)</a>:</h4>
<p>Mario, if you throw in an <code>abs</code> in the name, it is neither garage, nor misleading...</p>



<a name="223048407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223048407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223048407">(Jan 17 2021 at 15:40)</a>:</h4>
<p>it's not an abs though</p>



<a name="223048412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223048412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223048412">(Jan 17 2021 at 15:40)</a>:</h4>
<p>it's negative for negative input</p>



<a name="223050429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223050429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223050429">(Jan 17 2021 at 16:19)</a>:</h4>
<p>Ah, I had missed the sign in front!  `signed_pow``. Not sure...</p>



<a name="223052264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052264">(Jan 17 2021 at 16:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223045188">said</a>:</p>
<blockquote>
<p>here's a crazy idea for qpow: <code>x ^ y := if x &lt; 0 then -((-x) ^ y) else x ^ y</code></p>
</blockquote>
<p>For <code>y = 2</code>, it doesn't give the square...</p>



<a name="223052360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052360">(Jan 17 2021 at 16:55)</a>:</h4>
<p>...right</p>



<a name="223052520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052520">(Jan 17 2021 at 16:58)</a>:</h4>
<p>ok, plan B: <code>root x n := if x &lt; 0 then -((-x) ^ (1/n)) else x ^ (1/n)</code>. No claim that this is a general power function anymore, n is a natural number that you probably want to be odd</p>



<a name="223052574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052574">(Jan 17 2021 at 17:00)</a>:</h4>
<p>actually in that case we can just as well do the alternations,<br>
<code>root x n := if x &lt; 0 then (-1)^n * ((-x) ^ (1/n)) else x ^ (1/n)</code>.</p>



<a name="223052666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052666">(Jan 17 2021 at 17:01)</a>:</h4>
<p>the idea being that there will be theorems of the form <code>root x n = x ^ (1/n)</code>, <code>root x n ^ m = x ^ (m/n)</code> and so on under limited conditions</p>



<a name="223052732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223052732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223052732">(Jan 17 2021 at 17:03)</a>:</h4>
<p>I don't know any practical utility to extending this root function to rationals with odd denominator; you can use <code>root (x^m) n</code> to express that</p>



<a name="223061898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223061898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223061898">(Jan 17 2021 at 20:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223045188">said</a>:</p>
<blockquote>
<p>here's a crazy idea for qpow: <code>x ^ y := if x &lt; 0 then -((-x) ^ y) else x ^ y</code></p>
</blockquote>
<p>i tried this yesterday for an hour or two (via your cube_root def) and still wasn't able to make the proof work. the issue is eliminating that negative that is now introduced --- i'd like to factor it into <code>(-1)^y * x^y</code> but then we run back into the <code>0&lt;=</code> constraint on rpow.</p>



<a name="223061928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223061928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223061928">(Jan 17 2021 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> here's as far as i could take it:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>


<span class="kd">lemma</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hx3</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx3</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">real.rpow_nat_cast</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_neg_iff</span><span class="o">],</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">hx3</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">refine</span> <span class="n">lt_of_le_of_ne</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">ne.symm</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx3</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">eq.ge</span> <span class="n">hx3</span><span class="o">,</span>
<span class="kd">end</span>


<span class="kd">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="bp">&gt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">else</span> <span class="bp">-</span><span class="o">((</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">injective</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">hxycube</span><span class="o">,</span>

  <span class="k">have</span> <span class="n">idiot</span> <span class="o">:</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">=</span> <span class="n">cube_root</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">finish</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">cube_root</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">x</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">rw</span> <span class="bp">←</span><span class="n">hxycube</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_inv_cancel</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nonzero_of_invertible</span> <span class="mi">3</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">rw</span> <span class="bp">←</span><span class="n">hxycube</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="c1">-- simp at h,</span>
    <span class="c1">-- simp at hy,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">neg_one_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.mul_rpow</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">3</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
      <span class="n">rw</span> <span class="bp">←</span><span class="n">neg_one_mul</span> <span class="o">(</span><span class="n">y</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">))</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">real.mul_rpow</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
      <span class="o">{</span>
        <span class="n">rw</span> <span class="n">this</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="bp">←</span><span class="n">real.rpow_mul</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">mul_inv_cancel</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">real.rpow_one</span> <span class="n">at</span> <span class="n">idiot</span><span class="o">,</span>
        <span class="n">assumption</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">nonzero_of_invertible</span> <span class="mi">3</span><span class="o">,</span>
        <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
        <span class="gr">sorry</span><span class="o">,</span>
        <span class="n">refine</span> <span class="n">x_iff_x_cubed_ge_zero</span> <span class="n">_</span><span class="o">,</span>
        <span class="gr">sorry</span><span class="o">,</span>
      <span class="o">},</span>
      <span class="gr">sorry</span><span class="o">,</span>
      <span class="gr">sorry</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="gr">sorry</span><span class="o">,</span>
    <span class="gr">sorry</span><span class="o">,</span>


  <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="223061993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223061993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sandy Maguire <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223061993">(Jan 17 2021 at 20:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223038486">said</a>:</p>
<blockquote>
<p>Sandy -- sorry for not really finishing my sentences yesterday -- I was busy doing something else and just occasionally looking at the chat. What is going on in the proof that you posted is that there's a "cube root" function involved, which is the inverse map to the bijection <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><msup><mi>x</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">x\mapsto x^3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> on the reals. The point is that Lean does not have that function right now (at least not until this thread) and in particular the function <code>lam x, x^(1/3:real)</code>, which looks superficially similar, is <em>not</em> this function. The point is that that <code>rpow</code>, which is what <code>^</code> expands to, is defined for all real inputs and is what you think it is for positive reals, but returns junk values for negative reals. The reason for this is that even though <em>coincidentally</em> there is a good choice of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">x^{1/3}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> for negative real <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>, there really is no good choice of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>r</mi></msup></mrow><annotation encoding="application/x-tex">x^r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span> for an arbitrary real number when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is negative, and <code>rpow</code> makes no attempt to distinguish between the real numbers for which there is a good choice (which happen to be the rational numbers with odd denominator) and the real numbers for which there is no good choice -- it just returns junk if x is negative, in all cases. There is no problem formalising this proof in Lean, but you will need the cube root function which is defined on all the reals, so this function needs to be made first.</p>
</blockquote>
<p>that's an extremely helpful elaboration, thank you kevin!</p>



<a name="223076016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/223076016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#223076016">(Jan 18 2021 at 02:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="375678">Sandy Maguire</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223061898">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223045188">said</a>:</p>
<blockquote>
<p>here's a crazy idea for qpow: <code>x ^ y := if x &lt; 0 then -((-x) ^ y) else x ^ y</code></p>
</blockquote>
<p>i tried this yesterday for an hour or two (via your cube_root def) and still wasn't able to make the proof work. the issue is eliminating that negative that is now introduced --- i'd like to factor it into <code>(-1)^y * x^y</code> but then we run back into the <code>0&lt;=</code> constraint on rpow.</p>
</blockquote>
<p>Why are you factoring it? The idea here, explicit in the <code>if</code>, is to break into cases based on <code>x &lt; 0</code> or <code>0 &lt;= x</code>. In the second case it's just rpow and you're covered. In the first case, <code>x &lt; 0</code> means <code>0 &lt;= -x</code> so the properties of rpow imply <code>(-((-x) ^ (1/3))) ^ 3 = -(((-x) ^ (1/3)) ^ 3) = --x = x</code>. I think you are saying that the first equality is the one giving you trouble, because rpow isn't nice on negatives, but this one isn't rpow, it's <code>x ^ 3</code> which can be rewritten as an instance of <code>monoid.pow</code>, because the exponent is an integer, which does have the <code>(-x)^n = (-1)^n * x ^n</code> theorem you want.</p>



<a name="233377974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233377974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Manuel Candales <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233377974">(Apr 06 2021 at 19:50)</a>:</h4>
<p>Reopening this thread. The following gives me a "goals accomplished" message.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.complex.basic</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233378422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233378422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233378422">(Apr 06 2021 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="359379">@Manuel Candales</span> That's because <code>(1/3)</code> is being interpreted as natural number division, which results in 0.</p>



<a name="233378562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233378562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233378562">(Apr 06 2021 at 19:54)</a>:</h4>
<p>Try this instead:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">^</span> <span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span><span class="bp">/</span><span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">norm_num</span><span class="o">,</span> <span class="c1">-- doesn't work</span>
<span class="kd">end</span>
</code></pre></div>



<a name="233378763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233378763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233378763">(Apr 06 2021 at 19:55)</a>:</h4>
<p><del>I think <code>(-1 : ℂ) ^ ((1 : ℂ)/3)</code> evaluates to <code>-1/2</code>, see <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223000762">this post</a>. </del></p>



<a name="233379336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233379336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Manuel Candales <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233379336">(Apr 06 2021 at 19:59)</a>:</h4>
<p>I am confused about the 1/3 evaluating to 0, because I used 1/2 in a recent proof without casting it. Anyway, I'll try to figure that out on my own. But in any case, -1/2 so the real part of one of the complex square roots. That makes sense for rpow. But not for cpow. cpow is defined from C to C.</p>



<a name="233379389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233379389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Manuel Candales <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233379389">(Apr 06 2021 at 19:59)</a>:</h4>
<p>*cubic roots</p>



<a name="233379504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233379504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233379504">(Apr 06 2021 at 20:00)</a>:</h4>
<p>Oh right, I missed the <code>cpow</code>!</p>



<a name="233409988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Cube%20root%20of%20cubic%20is%20id%3F/near/233409988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F.html#233409988">(Apr 07 2021 at 00:03)</a>:</h4>
<p><code>norm_num</code> doesn't know anything about real or complex powers. It can evaluate the exponent into a fraction but anything transcendental can't be evaluated</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>