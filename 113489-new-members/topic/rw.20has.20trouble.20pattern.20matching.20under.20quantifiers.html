---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html">rw has trouble pattern matching under quantifiers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197846625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20has%20trouble%20pattern%20matching%20under%20quantifiers/near/197846625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html#197846625">(May 17 2020 at 12:28)</a>:</h4>
<p>I've noticed that rw has trouble pattern matching under quantifiers. E.g. in this proof:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">mwe</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">nat</span><span class="o">),</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">P</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">Q</span> <span class="n">x</span><span class="o">):=</span>
<span class="k">begin</span>
    <span class="c1">--rw classical.not_implies_iff,</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>the rewrite fails where: <code>theorem not_implies_iff {P Q : Prop} : ¬ (P → Q) ↔ P ∧ ¬ Q</code>.</p>
<p>My guess is the it isn't interpreting <code>P x</code> and <code>Q x</code> as Props but as predicates, so it can't pattern match. But is there a way to get it to match? Perhaps I should just be using some fancy logic tactic?</p>
<p>I know to get that rw we could first just <code>intro x</code>, but there are cases where this would be a bit annoying to do. It feels like there should be a better way to do this.</p>



<a name="197846887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20has%20trouble%20pattern%20matching%20under%20quantifiers/near/197846887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html#197846887">(May 17 2020 at 12:35)</a>:</h4>
<p>rw never works under binders, unfortunately.</p>



<a name="197847030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20has%20trouble%20pattern%20matching%20under%20quantifiers/near/197847030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html#197847030">(May 17 2020 at 12:38)</a>:</h4>
<p>Ok thanks, good to know at least I'm not being stupid.</p>



<a name="197847121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20has%20trouble%20pattern%20matching%20under%20quantifiers/near/197847121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html#197847121">(May 17 2020 at 12:41)</a>:</h4>
<p>Isn't there some beefed up rewrite tactic which does do this?</p>



<a name="197847134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20has%20trouble%20pattern%20matching%20under%20quantifiers/near/197847134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/rw.20has.20trouble.20pattern.20matching.20under.20quantifiers.html#197847134">(May 17 2020 at 12:41)</a>:</h4>
<p>There's also <code>simp only [h]</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>