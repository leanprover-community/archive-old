---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Defining.20the.20unit.20interval.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html">Defining the unit interval</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200004066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004066">(Jun 07 2020 at 02:49)</a>:</h4>
<p>How to elegantly define the unit interval? I have kind of defined it using <code>set</code>, however, I find the result rather unwieldy.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">ge_zero</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≥</span> <span class="mi">0</span>
<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">le_one</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≤</span> <span class="mi">1</span>

<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="n">ge_zero</span> <span class="err">∩</span> <span class="n">le_one</span>
</code></pre></div>



<a name="200004092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004092">(Jun 07 2020 at 02:50)</a>:</h4>
<p>There should be a way of easily defining it with quotients I think.</p>



<a name="200004120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004120">(Jun 07 2020 at 02:51)</a>:</h4>
<p>The more idiomatic way to write your definition is:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">}</span>
</code></pre></div>


<p>What's wrong with it?</p>



<a name="200004133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004133">(Jun 07 2020 at 02:51)</a>:</h4>
<p>I don't see any reason for quotients to get involved, the unit interval is a subtype of the reals</p>



<a name="200004174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004174">(Jun 07 2020 at 02:52)</a>:</h4>
<p>(This already exists BTW, it's called <code>Icc 0 1</code>)</p>



<a name="200004546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004546">(Jun 07 2020 at 03:04)</a>:</h4>
<p>I'd like use relation <code>a ~ b</code> on  <code>ℝ</code> defined as <code>b - a ∈  ℤ</code> to be my unit interval.</p>



<a name="200004616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200004616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200004616">(Jun 07 2020 at 03:06)</a>:</h4>
<p>As I understand, if I define <code>I</code> as a quotient on <code>ℝ</code>, instead of a <code>set ℝ</code>, I can have <code>0 : I</code>, or am I mistaken?</p>



<a name="200005224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005224">(Jun 07 2020 at 03:26)</a>:</h4>
<p>I don't know if this topic came from mine (the message I deleted earlier), but I am having a similar problem in <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/About.20measures">#new members &gt; About measures</a></p>



<a name="200005285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005285">(Jun 07 2020 at 03:28)</a>:</h4>
<p>The thing I found neat about quotients is that I can define a function on the reals and lift it to the interval without having to redefine things like addition and multiplication (but maybe it is not so hard to do this in the subtype definition?)</p>



<a name="200005697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005697">(Jun 07 2020 at 03:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298376">Pedro Minicz</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20the.20unit.20interval/near/200004616">said</a>:</p>
<blockquote>
<p>As I understand, if I define <code>I</code> as a quotient on <code>ℝ</code>, instead of a <code>set ℝ</code>, I can have <code>0 : I</code>, or am I mistaken?</p>
</blockquote>
<p>I think you could define it as a subtype (instead of a set), so you could have <code>(a : I)</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">I</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">Icc</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)}</span>
</code></pre></div>


<p>but to have <code>0:I</code> you would need <code>I.has_zero</code></p>



<a name="200005857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005857">(Jun 07 2020 at 03:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298376">Pedro Minicz</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20the.20unit.20interval/near/200004546">said</a>:</p>
<blockquote>
<p>I'd like use relation <code>a ~ b</code> on  <code>ℝ</code> defined as <code>b - a ∈  ℤ</code> to be my unit interval.</p>
</blockquote>
<p>That's not the unit interval, that's S^1</p>



<a name="200005866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005866">(Jun 07 2020 at 03:49)</a>:</h4>
<p>it is naturally bijective with <code>[0, 1)</code> but not <code>[0, 1]</code></p>



<a name="200005930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005930">(Jun 07 2020 at 03:51)</a>:</h4>
<p>To flesh out Lucas's suggestion:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">intervals</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">I</span> <span class="o">:=</span> <span class="bp">⟨⟨</span><span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">zero_le_one</span><span class="o">]</span><span class="bp">⟩⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">I</span> <span class="o">:=</span> <span class="bp">⟨⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">zero_le_one</span><span class="o">]</span><span class="bp">⟩⟩</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
</code></pre></div>



<a name="200005973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005973">(Jun 07 2020 at 03:53)</a>:</h4>
<p>I ended up settling for the following:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">R</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">a</span>

<span class="kn">theorem</span> <span class="n">R_equiv</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">equivalence</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">transitive</span><span class="o">,</span>
  <span class="n">split</span><span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">split</span> <span class="o">},</span>
  <span class="k">show</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span> <span class="k">from</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sub_self</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">⟨-</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">push_cast</span><span class="bp">;</span> <span class="n">linarith</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="k">show</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">⟨</span><span class="n">k₁</span><span class="o">,</span> <span class="n">hk₁</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">k₂</span><span class="o">,</span> <span class="n">hk₂</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">⟨</span><span class="n">k₁</span> <span class="bp">+</span> <span class="n">k₂</span><span class="o">,</span> <span class="k">by</span> <span class="n">push_cast</span><span class="bp">;</span> <span class="n">linarith</span><span class="bp">⟩</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">quotient</span> <span class="o">(</span><span class="n">setoid</span><span class="bp">.</span><span class="n">mk</span> <span class="n">R</span> <span class="n">R_equiv</span><span class="o">)</span>
</code></pre></div>


<p>I'd like to see an expression <code>0.5 : I</code>, but I couldn't manufacture it.</p>



<a name="200005976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005976">(Jun 07 2020 at 03:53)</a>:</h4>
<p>You can't divide by 2 in R/Z though</p>



<a name="200005980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200005980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200005980">(Jun 07 2020 at 03:53)</a>:</h4>
<p>however you can use <code>[[1/2]]</code></p>



<a name="200006021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006021">(Jun 07 2020 at 03:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20the.20unit.20interval/near/200005866">said</a>:</p>
<blockquote>
<p>it is naturally bijective with <code>[0, 1)</code> but not <code>[0, 1]</code></p>
</blockquote>
<p>Yes, I realize this difference.</p>



<a name="200006025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006025">(Jun 07 2020 at 03:54)</a>:</h4>
<p>You can also leverage the general theory of quotient groups here to define R/Z and get all the additive group structure</p>



<a name="200006036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006036">(Jun 07 2020 at 03:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20the.20unit.20interval/near/200005930">said</a>:</p>
<blockquote>
<p>To flesh out Lucas's suggestion:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">intervals</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">I</span> <span class="o">:=</span> <span class="bp">⟨⟨</span><span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">zero_le_one</span><span class="o">]</span><span class="bp">⟩⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">I</span> <span class="o">:=</span> <span class="bp">⟨⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">zero_le_one</span><span class="o">]</span><span class="bp">⟩⟩</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
</code></pre></div>


</blockquote>
<p>Wow, those instances make a big difference! It suddenly looks so much nicer.</p>



<a name="200006224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006224">(Jun 07 2020 at 04:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Defining.20the.20unit.20interval/near/200006025">said</a>:</p>
<blockquote>
<p>You can also leverage the general theory of quotient groups here to define R/Z and get all the additive group structure</p>
</blockquote>
<p>Can I use something defined mathlib for that? I am not that familiar with it already. Or does the quotient I defined above suffice?</p>



<a name="200006302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006302">(Jun 07 2020 at 04:03)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span>

<span class="kn">instance</span> <span class="n">coe_int_is_add_group_hom</span> <span class="o">:</span> <span class="n">is_add_group_hom</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">is_add_group_hom</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">ℝ</span><span class="o">),</span> <span class="k">by</span> <span class="n">apply_instance</span>

<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">add_group</span><span class="o">]</span>
<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">quotient_add_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="n">def</span> <span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">I</span> <span class="o">:=</span> <span class="n">quotient_add_group</span><span class="bp">.</span><span class="n">mk</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span>
</code></pre></div>



<a name="200006350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200006350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200006350">(Jun 07 2020 at 04:04)</a>:</h4>
<p>The first instance should arguably be in mathlib, but I think it's in a precarious position because <code>is_add_group_hom</code> is deprecated</p>



<a name="200008304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008304">(Jun 07 2020 at 05:07)</a>:</h4>
<p>In this context, we should have <code>(0 : I) = 1</code>, right?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_add_submonoid</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">is_add_submonoid</span><span class="bp">.</span><span class="n">mk</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">(</span><span class="k">by</span> <span class="n">rintros</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">⟨</span><span class="n">ka</span><span class="o">,</span> <span class="n">hka</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">kb</span><span class="o">,</span> <span class="n">hkb</span><span class="bp">⟩;</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">ka</span> <span class="bp">+</span> <span class="n">kb</span><span class="o">,</span> <span class="k">by</span> <span class="n">push_cast</span><span class="bp">;</span> <span class="n">linarith</span><span class="bp">⟩</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_add_subgroup</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">is_add_subgroup</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="k">by</span> <span class="n">rintros</span> <span class="n">a</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="bp">⟩;</span> <span class="n">exact</span> <span class="bp">⟨-</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">push_cast</span><span class="bp">;</span> <span class="n">linarith</span><span class="bp">⟩</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">add_group</span><span class="o">]</span>
<span class="n">def</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">quotient_add_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="n">def</span> <span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">I</span> <span class="o">:=</span> <span class="n">quotient_add_group</span><span class="bp">.</span><span class="n">mk</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">I</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="mi">0</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">I</span>  <span class="o">:=</span> <span class="bp">⟨</span><span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="mi">1</span><span class="bp">⟩</span>

<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200008361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008361">(Jun 07 2020 at 05:08)</a>:</h4>
<p>Indeed. <code>  change _ ∈ _,</code> should make it clearer</p>



<a name="200008371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008371">(Jun 07 2020 at 05:09)</a>:</h4>
<p>Wow, you are a wizard, hahaha. Thank you very much!</p>



<a name="200008373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008373">(Jun 07 2020 at 05:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">quot</span><span class="bp">.</span><span class="n">sound</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩</span>
</code></pre></div>



<a name="200008431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008431">(Jun 07 2020 at 05:10)</a>:</h4>
<p>I keep getting suck on steps like these, I can "see through" the definitions, but find myself unable to show it to Lean.</p>



<a name="200008445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008445">(Jun 07 2020 at 05:11)</a>:</h4>
<p>In theory these should be simp lemmas, but in a hastily written development they may not be and then you have to use <code>change</code> tricks to force your way through the layers of definition</p>



<a name="200008536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200008536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200008536">(Jun 07 2020 at 05:14)</a>:</h4>
<p>in the proof I gave above, <code>⟨1, ...</code> forces it even past <code>_ \in set.range _</code> to <code>\exists n : int, ...</code> and provides the witness <code>1</code>, after which the body of the exists is a simple theorem <code>\u 1 = -0 + 1</code> which simp can handle</p>



<a name="200026026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026026">(Jun 07 2020 at 14:16)</a>:</h4>
<p>From this construction, how can I instantiate <code>setoid \R</code>?</p>



<a name="200026181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026181">(Jun 07 2020 at 14:21)</a>:</h4>
<p>Found it: </p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">:</span> <span class="n">setoid</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="n">quotient_add_group</span><span class="bp">.</span><span class="n">left_rel</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">))</span>
</code></pre></div>



<a name="200026474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026474">(Jun 07 2020 at 14:30)</a>:</h4>
<p>that shouldn't be an instance, because it will be the one and only <code>setoid real</code> instance if so, and this particular instance has no claim to canonicality</p>



<a name="200026485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026485">(Jun 07 2020 at 14:31)</a>:</h4>
<p>it can be a local instance but usually we just use a <code>def</code></p>



<a name="200026494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026494">(Jun 07 2020 at 14:31)</a>:</h4>
<p>arguably <code>setoid</code> shouldn't even be a class because this lack of uniqueness comes up so often</p>



<a name="200026879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200026879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200026879">(Jun 07 2020 at 14:41)</a>:</h4>
<p>I just want to use the <code>⟦x⟧</code> notation, should I do:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="bp">`</span><span class="err">⟦</span><span class="bp">`</span> <span class="n">x</span> <span class="bp">`</span><span class="err">⟧</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">I</span><span class="bp">.</span><span class="n">mk</span> <span class="n">x</span>
</code></pre></div>


<p>Instead?</p>



<a name="200027071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Defining%20the%20unit%20interval/near/200027071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Defining.20the.20unit.20interval.html#200027071">(Jun 07 2020 at 14:42)</a>:</h4>
<p>This looks simpler indeed (the other way would return more complicated expressions)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>