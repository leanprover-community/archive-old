---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html">✔ Lean/vs codium crashing</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="306868052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868052">(Oct 29 2022 at 17:18)</a>:</h4>
<p>Mmh, both <code>--make src</code> and a reinstalled <code>leanproject</code> fail. How much ram is considered enough to run lean? might that be the cause? I've got 8GB.</p>



<a name="306868181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868181">(Oct 29 2022 at 17:19)</a>:</h4>
<p>Oh boy that's quite low these days.I just bought a new machine today with 32G for lean.  Did you consider using a virtual machine?</p>



<a name="306868297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868297">(Oct 29 2022 at 17:21)</a>:</h4>
<p>Huh, no… what would a VM help with? I might just upgrade my computer but if there is some reasonable other way I'd like to keep using it while it runs OK!</p>



<a name="306868336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868336">(Oct 29 2022 at 17:21)</a>:</h4>
<p>A possible workaround is to use a single thread by running <code>lean --make -j1 src</code>. I think Kevin is referring to a cloud VM.</p>



<a name="306868442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868442">(Oct 29 2022 at 17:22)</a>:</h4>
<p>(You can configure VS Code to pass the <code>-j1</code> argument to Lean too: see the <code>lean.extraOptions</code> item at <a href="https://github.com/leanprover/vscode-lean#extension-settings">https://github.com/leanprover/vscode-lean#extension-settings</a>. You can also set lower memory limits so the OOM killer doesn't kick in.)</p>



<a name="306868768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306868768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306868768">(Oct 29 2022 at 17:26)</a>:</h4>
<p>Thanks, let me try that. What's the usability penalty from doing either/both of these changes?</p>



<a name="306869179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869179">(Oct 29 2022 at 17:30)</a>:</h4>
<p><code>-j1</code> will make things slower if you touch a file with many reverse dependencies, because they will not be compiled in parallel (which would potentially use X times as much memory for X worker threads). Setting lower memory limits will just replace the crash by an error message if you don't have enough memory if you pick an appropriate threshold.</p>



<a name="306869408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869408">(Oct 29 2022 at 17:33)</a>:</h4>
<p>So, there is some threshold below which you can't have a "very slow but working" lean: you can only tweak those two parameters, and with one thread, all reducing the memory limit does is give you an error if it runs out? that's kind of a bummer</p>



<a name="306869769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869769">(Oct 29 2022 at 17:37)</a>:</h4>
<p>Well, in any case, some combination of everything i did seems to make it work again. Fingers crossed that it stays like that, thanks for the help <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> and <span class="user-mention" data-user-id="325367">@Mauricio Collares</span> !</p>



<a name="306869781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869781">(Oct 29 2022 at 17:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461830">Rémi Bottinelli</span> has marked this topic as resolved.</p>



<a name="306869937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869937">(Oct 29 2022 at 17:38)</a>:</h4>
<p>That's a bit inevitable because some files are at the bottom of very complicated type hierarchies. Lean 4's memory-mapped oleans will help a lot, but I don't know of a better solution in Lean 3. You can add more swap to your system, which will make it unbearably slow but working. If you need this problem fixed now and <code>-j1</code> does not help, I think using a cloud VM as Kevin suggested (or buying more memory if you are on a desktop) is the only decent solution.</p>



<a name="306869982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306869982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306869982">(Oct 29 2022 at 17:39)</a>:</h4>
<p>Oh, good to know it's working!</p>



<a name="306870649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306870649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306870649">(Oct 29 2022 at 17:46)</a>:</h4>
<p>Is there a "blessed" path to using cloud VMs ?</p>



<a name="306870822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306870822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306870822">(Oct 29 2022 at 17:48)</a>:</h4>
<p>Back to <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> :) I know Gitpod exists, but I've never used it extensively.</p>



<a name="306875948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306875948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306875948">(Oct 29 2022 at 18:36)</a>:</h4>
<p>If the branch is so old that the cloud oleans have been deleted, you may still push a new commit to the branch (or create a new branch and push) and wait for CI to generate oleans for you and then you can use <code>leanproject get-cache</code> as usual.</p>



<a name="306890428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306890428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306890428">(Oct 29 2022 at 21:43)</a>:</h4>
<p>I don't really know anything about cloud VMs, all I know is that some people say that they always use them because their machines only have e.g. 8 gigs of ram. There is information here on Zulip somewhere I guess; I'm pretty sure I've asked explicit questions about them before. If gitpod is one then you could try gitpod. The idea is that you use VS Code in your browser and it's quicker than using VS Code locally and you still have all the features of VS Code like widgets etc.</p>



<a name="306900103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306900103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306900103">(Oct 30 2022 at 00:21)</a>:</h4>
<p>Gitpod generally works great but sometimes it may fail to install the Lean extension, among some less frequent failure modes. Also typing Unicode is not very responsive which can cause the order of typed characters to be garbled.</p>



<a name="306917275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/%E2%9C%94%20Lean/vs%20codium%20crashing/near/306917275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/.E2.9C.94.20Lean.2Fvs.20codium.20crashing.html#306917275">(Oct 30 2022 at 06:00)</a>:</h4>
<p>Alright, I'll try and make do with my machine for now and give gitpod a try if it gets too hard. Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>