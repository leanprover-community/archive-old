---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html">lim (Re) = Re( lim)?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212234496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212234496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212234496">(Oct 04 2020 at 18:15)</a>:</h4>
<p>Hello, can I please have help proving (or even properly stating) something like this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">lim_re</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℂ</span> <span class="n">complex.abs</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f.lim</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.re</span><span class="o">)</span><span class="bp">.</span><span class="n">lim</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>

<p>Of course the problem is that <a href="http://f.re">f.re</a> isn't defined... (How do I define it, or is something related in mathlib somewhere and I can't find it?) Thanks!</p>



<a name="212234951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212234951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212234951">(Oct 04 2020 at 18:24)</a>:</h4>
<p>Why do you need <code>cau_seq</code>?</p>



<a name="212234977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212234977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212234977">(Oct 04 2020 at 18:25)</a>:</h4>
<p>I know that it's not documented at all but <code>cau_seq</code> is considered to be an implementation detail of <code>def real := ...</code></p>



<a name="212234986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212234986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212234986">(Oct 04 2020 at 18:25)</a>:</h4>
<p>Most of the topology library relies on <code>cauchy_seq</code>.</p>



<a name="212235036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235036">(Oct 04 2020 at 18:26)</a>:</h4>
<p>Some day we should migrate <code>complex.exp</code> from <code>cau_seq</code>, but I don't want to do this migration until we have a glue between <code>mv_power_series</code> and analytic functions.</p>



<a name="212235050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235050">(Oct 04 2020 at 18:26)</a>:</h4>
<p>(then we'll port it to analytic functions)</p>



<a name="212235069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235069">(Oct 04 2020 at 18:27)</a>:</h4>
<p>I think I've figured out the statement?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">lim_re</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℂ</span>  <span class="n">complex.abs</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℝ</span>   <span class="n">abs</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">:</span><span class="n">ℂ</span> <span class="o">))</span> <span class="o">:</span> <span class="n">f.lim</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g.lim</span><span class="o">:</span><span class="n">ℂ</span> <span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212235118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235118">(Oct 04 2020 at 18:28)</a>:</h4>
<p>I need something with exp, which is defined in terms of cau_seq... Thanks!</p>



<a name="212235223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235223">(Oct 04 2020 at 18:31)</a>:</h4>
<p>We should prove <code>has_sum (λ z, z^n / n!) (exp z)</code>, may be even before migrating to analytic functions.</p>



<a name="212235278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235278">(Oct 04 2020 at 18:32)</a>:</h4>
<p>I can do it tonight or tomorrow.</p>



<a name="212235295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235295">(Oct 04 2020 at 18:33)</a>:</h4>
<p>Which fact about <code>exp</code> do you want to prove?</p>



<a name="212235354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235354">(Oct 04 2020 at 18:34)</a>:</h4>
<p>I'm sorry that you have to deal with <code>cau_seq</code> here. I was going to migrate it to at least <code>cauchy_seq</code> for months.</p>



<a name="212235390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235390">(Oct 04 2020 at 18:35)</a>:</h4>
<p>I think, we should have a fact that <code>cau_seq</code> tends to its <code>lim</code>.</p>



<a name="212235401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235401">(Oct 04 2020 at 18:35)</a>:</h4>
<p>Then <code>continuous_re</code> should help you.</p>



<a name="212235477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235477">(Oct 04 2020 at 18:37)</a>:</h4>
<p>See <a href="https://leanprover-community.github.io/mathlib_docs/find/cau_seq.tendsto_limit">docs#cau_seq.tendsto_limit</a></p>



<a name="212235733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212235733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212235733">(Oct 04 2020 at 18:43)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">lim_re</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℂ</span>  <span class="n">complex.abs</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">cau_seq</span> <span class="n">ℝ</span> <span class="n">abs</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span><span class="o">:</span><span class="n">ℂ</span> <span class="o">))</span> <span class="o">:</span> <span class="n">f.lim</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g.lim</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">tendsto_nhds_unique</span> <span class="n">f.tendsto_limit</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="k">show</span> <span class="bp">⇑</span><span class="n">f</span> <span class="bp">=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">),</span> <span class="k">from</span> <span class="n">funext</span> <span class="n">h</span><span class="o">],</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">complex.continuous_of_real.tendsto</span> <span class="n">g.lim</span><span class="o">)</span><span class="bp">.</span><span class="n">comp</span> <span class="n">g.tendsto_limit</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212237812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212237812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212237812">(Oct 04 2020 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="252920">@Alex Kontorovich</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="212249383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249383">(Oct 05 2020 at 00:46)</a>:</h4>
<p>Ah, thanks. But I'm getting an error at f.tendsto_limit...:</p>
<p>'tendsto_limit' is not a valid "field" because environment does not contain 'subtype.tendsto_limit'<br>
  f<br>
which has type<br>
  {f // is_cau_seq complex.abs f}</p>
<p>?? Thanks!</p>



<a name="212249472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249472">(Oct 05 2020 at 00:49)</a>:</h4>
<p>You might be missing the import?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.metric_space.cau_seq_filter</span>
</code></pre></div>



<a name="212249537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249537">(Oct 05 2020 at 00:50)</a>:</h4>
<p>Maybe I should cut to the chase of what I'm trying to prove; perhaps there's an easier way to do it. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">expLinearization</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span><span class="o">,</span> <span class="n">complex.abs</span> <span class="n">x</span> <span class="bp">≤</span> <span class="mi">1</span>
                                 <span class="bp">→</span> <span class="bp">Π</span> <span class="n">z</span><span class="o">,</span> <span class="n">complex.abs</span> <span class="o">(</span><span class="n">complex.exp</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
                                      <span class="bp">≤</span> <span class="o">(</span><span class="n">complex.abs</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">complex.abs</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">real.exp</span> <span class="o">(</span><span class="n">complex.abs</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
   <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>

<p>That is, if |x|\le 1 and z is any complex number, then <br>
|exp(x z ) - (1 + xz)| \le |x|^2 exp(|z|).</p>
<p>Human proof:<br>
|exp(x z ) - (1 + xz)| = | (xz)^2/2! + (xz)^3/3!+... |<br>
\le |x|^2 (|z|^2/2!+|z|^3/3!+...) (here using |x|\le 1)<br>
\le |x|^2(1+|z|+|z|^2/2!+|z|^3/3!+...)<br>
= |x|^2 exp(|z|).</p>



<a name="212249565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249565">(Oct 05 2020 at 00:51)</a>:</h4>
<p>That did it, thanks!...</p>



<a name="212249921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249921">(Oct 05 2020 at 01:00)</a>:</h4>
<p>I think you could prove this by Taylor's theorem, right?  That might be the "high-level" way (interacting with the API about the derivative of <code>exp</code>, rather than the details of the construction).</p>



<a name="212249954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212249954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212249954">(Oct 05 2020 at 01:01)</a>:</h4>
<p>Here's a PR by an undergraduate student of mine, doing something similar to prove bounds about <code>arctan</code>: <a href="https://github.com/leanprover-community/mathlib/issues/4228">#4228</a></p>



<a name="212250081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lim%20%28Re%29%20%3D%20Re%28%20lim%29%3F/near/212250081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lim.20(Re).20.3D.20Re(.20lim).3F.html#212250081">(Oct 05 2020 at 01:04)</a>:</h4>
<p>Minor problem -- no Taylor's theorem in mathlib yet :) (though messing round with the mean value theorem on a suitable auxiliary function would probably work)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>