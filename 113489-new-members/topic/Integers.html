---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Integers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html">Integers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201538849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201538849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201538849">(Jun 21 2020 at 15:24)</a>:</h4>
<p>I am trying to prove that val(1)+val(1) = 0 implies val(1) = 0, where val(1) is an integer. I tried to use </p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="n">add_self_eq_zero</span>
</code></pre></div>


<p>I get the error</p>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="err">?</span><span class="n">m_3</span> <span class="bp">+</span> <span class="err">?</span><span class="n">m_3</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="err">?</span><span class="n">m_3</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">val</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">val</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>


<p>Technically, val(1) is in with_top \Z . Is that what is causing the error?<br>
Any help is appreciated. Thank you!</p>



<a name="201538987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201538987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201538987">(Jun 21 2020 at 15:28)</a>:</h4>
<p>If you hover over <code>add_self_eq_zero</code> , or write <code>#check @add_self_eq_zero</code>, you see</p>
<div class="codehilite"><pre><span></span><code><span class="n">add_self_eq_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">domain</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">char_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>



<a name="201539038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201539038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201539038">(Jun 21 2020 at 15:29)</a>:</h4>
<p>So <code>add_self_eq_zero</code> will only work for domains (this is Lean's word for an integral domain without the commutativity condition) of characteristic zero, and <code>with_top \Z</code> is probably not even a ring.</p>



<a name="201539151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201539151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201539151">(Jun 21 2020 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Integers/near/201539038">said</a>:</p>
<blockquote>
<p>So <code>add_self_eq_zero</code> will only work for domains (this is Lean's word for an integral domain without the commutativity condition) of characteristic zero, and <code>with_top \Z</code> is probably not even a ring.</p>
</blockquote>
<p>Ah alright. Thank you!</p>



<a name="201539154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201539154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201539154">(Jun 21 2020 at 15:31)</a>:</h4>
<p>Hang on, I'll knock you up a proof. If you're going to be working with <code>with_top</code> you're going to have to learn how to use it.</p>



<a name="201539208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201539208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201539208">(Jun 21 2020 at 15:32)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">val_one_is_zero</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">have</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">K</span><span class="o">),</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">g</span> <span class="o">:</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">=</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)),</span>
<span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="k">have</span> <span class="n">k</span> <span class="o">:</span> <span class="n">val</span><span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">))</span> <span class="bp">=</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">val</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
<span class="n">apply</span> <span class="n">mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">k</span> <span class="n">at</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">g</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">&lt;-</span> <span class="n">two_nsmul</span><span class="o">,</span>
<span class="k">have</span> <span class="n">s</span> <span class="o">:</span> <span class="mi">2</span><span class="bp">*</span><span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>This is where I was. But that goes back to the same thing.</p>



<a name="201539584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201539584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201539584">(Jun 21 2020 at 15:43)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="c1">-- the next 10 lines should be in mathlib.</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_add</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_coe</span>

<span class="bp">@</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_zero&#39;</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="o">((</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_zero&#39;</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">with_top</span><span class="bp">.</span><span class="n">coe_zero&#39;</span><span class="o">,</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_coe</span><span class="o">]</span>

<span class="c">/-</span><span class="cm">- An element of ℤ ∪ {⊤} is either ⊤ or in ℤ -/</span>
<span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- a = ⊤ case</span>
    <span class="n">left</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span> <span class="c1">-- true by definition</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- ℤ case</span>
    <span class="n">right</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span> <span class="c1">-- true by definition</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- the hard way</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="c1">-- h is a proof of a+a=0</span>
    <span class="c1">-- split into cases</span>
    <span class="n">cases</span> <span class="o">(</span><span class="n">with_top</span><span class="bp">.</span><span class="n">cases</span> <span class="n">a</span><span class="o">)</span> <span class="k">with</span> <span class="n">htop</span> <span class="n">hn</span><span class="o">,</span>
    <span class="o">{</span> <span class="c1">-- a = ⊤</span>
      <span class="n">rw</span> <span class="n">htop</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
      <span class="c1">-- h is false</span>
      <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
      <span class="c1">-- no cases!</span>
    <span class="o">},</span>
    <span class="o">{</span> <span class="c1">-- a = n</span>
      <span class="n">cases</span> <span class="n">hn</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">hn</span> <span class="n">at</span> <span class="n">h</span> <span class="err">⊢</span><span class="o">,</span>
      <span class="c1">-- now h says n+n=0 and our goal is n=0</span>
      <span class="c1">-- but these are equalities in `with_top ℤ</span>
      <span class="c1">-- so we need to get them into ℤ</span>
      <span class="c1">-- A tactic called `norm_cast` does this</span>
     <span class="n">norm_cast</span> <span class="n">at</span> <span class="n">h</span> <span class="err">⊢</span><span class="o">,</span>
      <span class="c1">-- we finally have a hypothesis n + n = 0</span>
      <span class="c1">-- and a goal n = 0</span>
      <span class="c1">-- and everything is an integer</span>
      <span class="n">rw</span> <span class="n">add_self_eq_zero</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">assumption</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- the easy way</span>
    <span class="n">intro</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">simp</span>
  <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201564297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201564297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201564297">(Jun 22 2020 at 02:56)</a>:</h4>
<p>If you add two more simp lemmas you can get it down to:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="c1">-- the next *11* lines should be in mathlib.</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_add</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_coe</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">none_eq_top</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">some_eq_coe</span>

<span class="bp">@</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_zero&#39;</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="o">((</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_zero&#39;</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">with_top</span><span class="bp">.</span><span class="n">coe_zero&#39;</span><span class="o">,</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_eq_coe</span><span class="o">]</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_self_eq_zero</span><span class="o">],</span> <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201564300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201564300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201564300">(Jun 22 2020 at 02:56)</a>:</h4>
<p>(Of course, there's a non-terminal simp in my example, but it's only an example. :-)</p>



<a name="201564350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201564350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201564350">(Jun 22 2020 at 02:58)</a>:</h4>
<p>Perhaps those two simp lemmas break mathlib elsewhere, I didn't try. <span class="user-mention" data-user-id="250372">@Ashvni Narayanan</span>, would you be interested in trying to PR the extra norm_cast lemmas Kevin proposes?</p>



<a name="201568375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201568375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201568375">(Jun 22 2020 at 05:04)</a>:</h4>
<p>Can you golf that last line to ?</p>
<div class="codehilite"><pre><span></span><code> <span class="c1">-- { simp, norm_cast, simp [add_self_eq_zero], },</span>
 <span class="o">{</span> <span class="n">norm_cast</span> <span class="o">[</span><span class="n">add_self_eq_zero</span><span class="o">],</span> <span class="o">},</span>
</code></pre></div>



<a name="201574275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201574275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201574275">(Jun 22 2020 at 07:23)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3132">#3132</a></p>



<a name="201601614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201601614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201601614">(Jun 22 2020 at 12:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113489-new-members/topic/Integers/near/201564350">said</a>:</p>
<blockquote>
<p>Perhaps those two simp lemmas break mathlib elsewhere, I didn't try. <span class="user-mention silent" data-user-id="250372">Ashvni Narayanan</span>, would you be interested in trying to PR the extra norm_cast lemmas Kevin proposes?</p>
</blockquote>
<p>Sure! I don't know if I know how to, but I would like to learn.</p>



<a name="201601768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201601768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201601768">(Jun 22 2020 at 12:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Integers/near/201574275">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3132">#3132</a></p>
</blockquote>
<p>As far as I understand, this is about adding the attribute, right?</p>



<a name="201602750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201602750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201602750">(Jun 22 2020 at 13:07)</a>:</h4>
<p>Right. So  after that PR is accepted <code>norm_cast</code> should behave the way we want it to, and actually coe_zero will work for any type with a 0, as will coe_eq_zero: the lemmas are PR'ed too. But the example is not.</p>



<a name="201602962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201602962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201602962">(Jun 22 2020 at 13:09)</a>:</h4>
<p>So I need to convert the example into a lemma?</p>



<a name="201673756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201673756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201673756">(Jun 22 2020 at 23:33)</a>:</h4>
<p>I did a little experiment making those two lemmas <code>simp</code> lemmas, and unfortunately quite a lot breaks.</p>



<a name="201673879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201673879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201673879">(Jun 22 2020 at 23:34)</a>:</h4>
<p>I think it would nevertheless be a good change at some point --- to insist that <code>simp</code> normal form for expressions involving <code>with_top</code> uses <code>\top</code> instead of <code>none</code>, and uses the coercion rather than <code>some</code>. But achieving this will require rewiring some proofs in mathlib.</p>



<a name="201719552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Integers/near/201719552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Integers.html#201719552">(Jun 23 2020 at 12:41)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/3135#discussion_r443758403">https://github.com/leanprover-community/mathlib/pull/3135#discussion_r443758403</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>