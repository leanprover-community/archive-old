---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html">Underscore _x vs. x</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="290285993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290285993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290285993">(Jul 20 2022 at 19:25)</a>:</h4>
<p>I never called anything <code>_x</code> so what is the meaning of the underscore in this error?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">has</span> <span class="n">type</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">)</span> <span class="n">x.length</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">)</span> <span class="n">_x.length</span>
</code></pre></div>



<a name="290287077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290287077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290287077">(Jul 20 2022 at 19:33)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> I would guess _x is something generated by a match and you also happen to have a variable called x or something, but it's hard to say with an example</p>



<a name="290289279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290289279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290289279">(Jul 20 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x/near/290287077">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> I would guess _x is something generated by a match and you also happen to have a variable called x or something, but it's hard to say with an example</p>
</blockquote>
<p>OK thanks, you're right <code>_x</code> is not generated by adding <code>_</code> to <code>x</code>, as demonstrated by renaming <code>x</code> to <code>xx</code>.<br>
Here is a MWE, it doesn't try to do anything interesting but why does it give an error?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">mwe</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">xx</span><span class="o">:</span><span class="n">list</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span><span class="o">:</span> <span class="n">xx.length</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">):</span>
  <span class="k">let</span> <span class="n">σ</span>  <span class="o">:=</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">//</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">}</span> <span class="k">in</span>
  <span class="k">let</span> <span class="n">qx</span> <span class="o">:</span><span class="n">σ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">xx.length</span><span class="o">,</span><span class="n">g</span><span class="o">⟩</span> <span class="k">in</span>
  <span class="n">xx</span> <span class="bp">=</span> <span class="n">xx</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="290289504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290289504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290289504">(Jul 20 2022 at 19:51)</a>:</h4>
<p>Works fine for me (once I add a declaration of <code>\a</code>)</p>



<a name="290289700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290289700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290289700">(Jul 20 2022 at 19:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x/near/290289504">said</a>:</p>
<blockquote>
<p>Works fine for me (once I add a declaration of <code>\a</code>)</p>
</blockquote>
<p>Oops, I actually meant:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">mwe</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">xx</span><span class="o">:</span><span class="n">list</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span><span class="o">:</span> <span class="n">xx.length</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">):</span>
  <span class="k">let</span> <span class="n">σ</span>  <span class="o">:=</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">//</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">}</span> <span class="k">in</span>
  <span class="k">let</span> <span class="n">qx</span> <span class="o">:</span><span class="n">σ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">xx.length</span><span class="o">,</span><span class="n">g</span><span class="o">⟩</span> <span class="k">in</span>
  <span class="n">xx</span> <span class="bp">=</span> <span class="n">xx</span>
  <span class="o">:=</span>
<span class="n">list.rec_on</span> <span class="n">xx</span> <span class="gr">sorry</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="290289970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290289970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290289970">(Jul 20 2022 at 19:55)</a>:</h4>
<p>Well that's bizarre</p>



<a name="290290380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290290380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290290380">(Jul 20 2022 at 19:58)</a>:</h4>
<p>Actually it's just the location of the reported error that's wrong I think</p>



<a name="290290429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290290429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290290429">(Jul 20 2022 at 19:59)</a>:</h4>
<p>You can't apply <code>list.rec_on</code> without first reverting <code>g</code></p>



<a name="290290619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290290619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290290619">(Jul 20 2022 at 20:00)</a>:</h4>
<p>(because <code>g</code> appears in the conclusion, and the type of <code>g</code> depends on <code>xx</code>)</p>



<a name="290291858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290291858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290291858">(Jul 20 2022 at 20:10)</a>:</h4>
<p>What's meant by "reverting"?</p>



<a name="290292356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290292356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290292356">(Jul 20 2022 at 20:15)</a>:</h4>
<p>Move <code>g</code> after the colon, or</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">mwe</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">xx</span><span class="o">:</span><span class="n">list</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span><span class="o">:</span> <span class="n">xx.length</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">):</span>
  <span class="k">let</span> <span class="n">σ</span>  <span class="o">:=</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">//</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k.succ</span><span class="o">}</span> <span class="k">in</span>
  <span class="k">let</span> <span class="n">qx</span> <span class="o">:</span><span class="n">σ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">xx.length</span><span class="o">,</span><span class="n">g</span><span class="o">⟩</span> <span class="k">in</span>
  <span class="n">xx</span> <span class="bp">=</span> <span class="n">xx</span>
  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">revert</span> <span class="n">g</span><span class="o">,</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  α : Type,</span>
<span class="cm">  k : ℕ,</span>
<span class="cm">  xx : list.{0} α</span>
<span class="cm">  ⊢ ∀ (g : xx.length &lt; k.succ), let σ : Type := {l // l &lt; k.succ}, qx : σ := ⟨xx.length, g⟩ in xx = xx</span>
<span class="cm">  -/</span>
<span class="kd">end</span>
</code></pre></div>



<a name="290293647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290293647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290293647">(Jul 20 2022 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  I guess more broadly the problem is: can we not refer to an object in a theorem statement, if the type of that object relies on hypotheses of that theorem? OK so this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">really_mwe</span> <span class="o">(</span><span class="n">k</span> <span class="n">l</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">l</span> <span class="bp">&lt;</span> <span class="n">k</span><span class="o">):</span>
<span class="o">(⟨</span><span class="n">l</span><span class="o">,</span><span class="n">h</span><span class="o">⟩:</span> <span class="o">{</span><span class="n">m</span><span class="o">:</span><span class="n">ℕ</span><span class="bp">//</span><span class="n">m</span><span class="bp">&lt;</span><span class="n">k</span><span class="o">})</span> <span class="bp">=</span> <span class="o">(⟨</span><span class="n">l</span><span class="o">,</span><span class="n">h</span><span class="o">⟩:</span> <span class="o">{</span><span class="n">m</span><span class="o">:</span><span class="n">ℕ</span><span class="bp">//</span><span class="n">m</span><span class="bp">&lt;</span><span class="n">k</span><span class="o">})</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="290293793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290293793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290293793">(Jul 20 2022 at 20:26)</a>:</h4>
<p>This cannot be the correct error</p>



<a name="290293847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290293847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290293847">(Jul 20 2022 at 20:27)</a>:</h4>
<p>Anyways, there was no problem with the theorem statement itself. The start of the proof was wrong</p>



<a name="290294109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290294109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290294109">(Jul 20 2022 at 20:29)</a>:</h4>
<p>Right, sorry...</p>



<a name="290295740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Underscore%20_x%20vs.%20x/near/290295740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bjørn Kjos-Hanssen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Underscore.20_x.20vs.2E.20x.html#290295740">(Jul 20 2022 at 20:42)</a>:</h4>
<p>Well, I guess a solution is to rewrite the whole thing so that instead of referring to <code>qx</code> one has an existential statement: <code>∃ q, q.1 = xx.length ∧ ...</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>